<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Today is the fifth anniversary of Aaron Swartz&amp;#039;s death</title>
<link>https://news.ycombinator.com/item?id=16122999</link>
<guid isPermaLink="true" >https://news.ycombinator.com/item?id=16122999</guid>
<description>
&lt;table border=&quot;0&quot; class=&quot;comment-tree&quot; readability=&quot;144.89795918367&quot;&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123348&quot; readability=&quot;13.159159159159&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;6.5795795795796&quot;&gt;&lt;tr readability=&quot;13.159159159159&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;8.9294294294294&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123590&quot; readability=&quot;0.068965517241379&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123214&quot; readability=&quot;2.4424778761062&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123964&quot; readability=&quot;8.7888707037643&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.3944353518822&quot;&gt;&lt;tr readability=&quot;8.7888707037643&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;6.152209492635&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123564&quot; readability=&quot;2.6140350877193&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.3070175438596&quot;&gt;&lt;tr readability=&quot;2.6140350877193&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123886&quot; readability=&quot;1.5308641975309&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124245&quot; readability=&quot;1.25&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123926&quot; readability=&quot;0.96&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123944&quot; readability=&quot;2.0307692307692&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123233&quot; readability=&quot;3.4418604651163&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.7209302325581&quot;&gt;&lt;tr readability=&quot;3.4418604651163&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123414&quot; readability=&quot;1.5128205128205&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123287&quot; readability=&quot;1.3793103448276&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123670&quot; readability=&quot;3.047619047619&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123746&quot; readability=&quot;1.9473684210526&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123814&quot; readability=&quot;1.4666666666667&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123854&quot; readability=&quot;2.9866666666667&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124171&quot; readability=&quot;1.6507936507937&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123281&quot; readability=&quot;2.5488721804511&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2744360902256&quot;&gt;&lt;tr readability=&quot;2.5488721804511&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123572&quot; readability=&quot;4.673590504451&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.3367952522255&quot;&gt;&lt;tr readability=&quot;4.673590504451&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;6.5430267062315&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123976&quot; readability=&quot;2.4210526315789&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2105263157895&quot;&gt;&lt;tr readability=&quot;2.4210526315789&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;120&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123599&quot; readability=&quot;1.3809523809524&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123583&quot; readability=&quot;1.3783783783784&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123877&quot; readability=&quot;3.3504273504274&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.6752136752137&quot;&gt;&lt;tr readability=&quot;3.3504273504274&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124051&quot; readability=&quot;5.4310344827586&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.7155172413793&quot;&gt;&lt;tr readability=&quot;5.4310344827586&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;120&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123219&quot; readability=&quot;16.849964106246&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;8.4249820531228&quot;&gt;&lt;tr readability=&quot;16.849964106246&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;13.573582196698&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123878&quot; readability=&quot;1.4697986577181&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123314&quot; readability=&quot;6.6634205721242&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.3317102860621&quot;&gt;&lt;tr readability=&quot;6.6634205721242&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123435&quot; readability=&quot;8.3035714285714&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.1517857142857&quot;&gt;&lt;tr readability=&quot;8.3035714285714&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124187&quot; readability=&quot;76.739063462723&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;38.369531731362&quot;&gt;&lt;tr readability=&quot;76.739063462723&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;56.308533579791&quot;&gt;

&lt;br/&gt;&lt;div class=&quot;comment&quot; readability=&quot;86.932797775375&quot;&gt;&lt;span class=&quot;c5a&quot;&gt;Scratch Britain from your list of destinations, if you do accept retreat the better part of valour.&lt;/span&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;I uncovered a systematic and major fraud, of political direct association and impact, and had my life smashed. This story is not able to be reduced to a comment, i struggle with relating it, emotionally, still, so I'm sticking to the parts hopefully useful, or at least some warning. My timeline is 2013 thru 2016, but the arrayed circumstances cover over a decade, due to the fraud being (in part) on my property, and the fact this went through civil law as if bent on archaeological discovery of the very origins of land Law in England.*&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;If you are so targeted, please take my advice to retreat accordingly at the earliest convenience you can. Your mental health and capacity for organisation only decays with a half life I estimate is dependent on the ability you have to understand and defend yourself. Being intelligent and possessing either resources or recourse to sophisticated response, yours or thru attorneys, does delay initial decay. But take any system that relies on proper and correct functioning of high order intelligence. Cut the intelligence in half. And again. Without any mitigating possibility. First, such people are using their potential at capacity, in work and life. Second, when you are subject to unfair practice using complicated technical systems your reaction will be to over stress your capacity for research and learning what you think you must have missed. But you missed nothing, except for normal conditions not applying. The greater your perceived intelligence, the greater shall be social suspicion of you, regardless. Even your attorney will be, being human, so susceptible. Now start halving your abilities, pulling strings of attention this way and that, and blink half those again. It's brutal. If you have a good friend, the best they can do is provide you with immediate resources, before the situation complicates and regardless of your perceived needs, you'll need more everything soon. Then a good friend will have to get away from you. Because it's when you get through all this that you need them most, and association with you will not get easier for them, even on acquittal. For both of your sakes, split. Don't sell your home or put it or proceeds into your spouse's name. Cash or family trust. Move your family out of state or in England out of the country police operation area. This means parents too. Parents are most vulnerable to friendly inquiries. Lock down, record everything, ideally reside in a good quality hotel, preferably in a chain you can rotate through within any bail condition radius. If on police bail in England and Wales, it's not enforceable. At all. Only English court bail counts. In England, having a BT landline in your name puts the address as a residence on the police database, to which you can be released without any court involvement. Definitely have one line at your parents house. Remember that people don't necessarily answer phones, especially when in England the caller ID displays as &quot;Private Call&quot; for law enforcement numbers, which is unusual and can be off-putting. You don't want to be dependent on the most loyal people in your life, let anyone have leverage or just be asking for help from the start.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;I spent years being arrested, mostly after two courts had dismissed the case, the basis of arrest a family court order without any route through the criminal courts. It wasn't until after two more years, mostly in prison, considerable delay caused by head injuries sustained under circumstances extraordinarily difficult to reconcile with normal functioning of the contract prison, and the fear of realization that the system is so broken I had nearly been disappeared from externally accessible records and delivered to a random other prison not court on the day I was acquitted (automatically so, embarrassingly so to many constituencies) the fact of my appearance due only to my voice, from a transport inner pillbox recognized by the court jailor, my pillbox window hidden behind deliberately piled high property sacks..my exit from the prison that morning without any of my property or finance.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;&quot;We should never have been in this court. This order does not exist. This order never existed...&quot; began the judge's recitation ..&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;The order that tried to elevate the matter so that on the face of it I was liable to arrest, I belatedly learned to be forged. No wonder that it was photocopied faintly and condensed, askew, the interviewing officer concealing it with cupped hands.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;Make no mistake, I am most angry that law enforcement was subordinated to pressure, misused and abused by the perpetrators. But some people involved were complicit, in for a penny I think, hoping that the fractured system would conceal their oversight. I bumped into two young officers somewhat blindly at the hospital, and we recognized one another, they'd arrested me once. Both young men stated at their boots, in shame. That made me angrier than all the ordeal put together. You don't let the law be ashamed for no reason if their own. Not if you want to live in a safe society. But I was stripped of business, home, family, health... Yet the fear was the failure of state in every aspect imaginable. I was told by one judge to forget bail or trial.. a really senior police chief was glaring at her in skeleton staffing emptiness of court, the very young and nervous blonde prosecutor, who stumbled on even reading what had obviously been prepared for her, glanced nervously back to look at who just told that judge, &quot;oh never mind, that order is only a nullity impossible by lacking locus standing, but obviously I have other considerations at present for loved ones..&quot; I have paraphrased but that's what I said, effectively&quot;I get it I'm stitched up, but the entire capability of this being lawful is nil, I'm going along with you because my elderly mother just wrote saying she can't live without me...'&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;So I understand a little bit of what Aaron must have been going through.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;But as much as I am now inclined to cry myself, damn no way must we let his life be forgotten and only trudge onwards in sorrow.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;* Chitty On Contract, the go to reference for business dealings in England - if you have any business in England or any of the 53 countries whose ultimate arbiter is the Privy Council, Chitty is the most indispensable tool you can put next to Knuth. .&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;c5a&quot;&gt;Edit: long footnote cut. &lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124073&quot; readability=&quot;18.660411081323&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;9.3302055406613&quot;&gt;&lt;tr readability=&quot;18.660411081323&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;14.240840035746&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123650&quot; readability=&quot;4.7816349384099&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123227&quot; readability=&quot;6.65&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.325&quot;&gt;&lt;tr readability=&quot;6.65&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;6.175&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123623&quot; readability=&quot;3.4782608695652&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.7391304347826&quot;&gt;&lt;tr readability=&quot;3.4782608695652&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124124&quot; readability=&quot;8.7113702623907&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.3556851311953&quot;&gt;&lt;tr readability=&quot;8.7113702623907&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;11.131195335277&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123744&quot; readability=&quot;8.5537190082645&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.2768595041322&quot;&gt;&lt;tr readability=&quot;8.5537190082645&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;80&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;5.702479338843&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123649&quot; readability=&quot;5.578125&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.7890625&quot;&gt;&lt;tr readability=&quot;5.578125&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;4.6484375&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124080&quot; readability=&quot;2.0634920634921&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123821&quot; readability=&quot;4.480198019802&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.240099009901&quot;&gt;&lt;tr readability=&quot;4.480198019802&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;3.5841584158416&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124154&quot; readability=&quot;3.1872509960159&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123548&quot; readability=&quot;3.3806451612903&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.6903225806452&quot;&gt;&lt;tr readability=&quot;3.3806451612903&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124099&quot; readability=&quot;3.6156351791531&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123719&quot; readability=&quot;7.5891891891892&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;3.7945945945946&quot;&gt;&lt;tr readability=&quot;7.5891891891892&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;5.2175675675676&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124321&quot; readability=&quot;0.95652173913043&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123182&quot; readability=&quot;2.6460674157303&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.3230337078652&quot;&gt;&lt;tr readability=&quot;2.6460674157303&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;3.9691011235955&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123889&quot; readability=&quot;2.75&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124059&quot; readability=&quot;1.3650793650794&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123307&quot; readability=&quot;2.4403669724771&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123624&quot; readability=&quot;3.2440476190476&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123985&quot; readability=&quot;1.4210526315789&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123795&quot; readability=&quot;5.6036036036036&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.8018018018018&quot;&gt;&lt;tr readability=&quot;5.6036036036036&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123918&quot; readability=&quot;2.3553719008264&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124092&quot; readability=&quot;3.5483870967742&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.7741935483871&quot;&gt;&lt;tr readability=&quot;3.5483870967742&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123619&quot; readability=&quot;0.096774193548387&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16124062&quot; readability=&quot;4.6200607902736&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.3100303951368&quot;&gt;&lt;tr readability=&quot;4.6200607902736&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123263&quot; readability=&quot;8.6008869179601&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;4.30044345898&quot;&gt;&lt;tr readability=&quot;8.6008869179601&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123384&quot; readability=&quot;1.9672131147541&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123201&quot; readability=&quot;1.04&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123203&quot; readability=&quot;1.1929824561404&quot;&gt;&lt;td&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123270&quot; readability=&quot;4.4600938967136&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;2.2300469483568&quot;&gt;&lt;tr readability=&quot;4.4600938967136&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;0&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123857&quot; readability=&quot;10.47855530474&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;5.2392776523702&quot;&gt;&lt;tr readability=&quot;10.47855530474&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot; readability=&quot;7.6207674943567&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;athing comtr&quot; id=&quot;16123936&quot; readability=&quot;2.5786516853933&quot;&gt;&lt;td&gt;
&lt;table border=&quot;0&quot; readability=&quot;1.2893258426966&quot;&gt;&lt;tr readability=&quot;2.5786516853933&quot;&gt;&lt;td class=&quot;ind&quot;&gt;&lt;img src=&quot;https://news.ycombinator.com/s.gif&quot; height=&quot;1&quot; width=&quot;40&quot;/&gt;&lt;/td&gt;
&lt;td valign=&quot;top&quot; class=&quot;votelinks&quot;&gt;
&lt;center&gt;

&lt;/center&gt;
&lt;/td&gt;
&lt;td class=&quot;default&quot;&gt;

&lt;br/&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;</description>
<pubDate>Thu, 11 Jan 2018 11:35:36 +0000</pubDate>
<dc:creator>saaronm</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://news.ycombinator.com/item?id=16122999</dc:identifier>
</item>
<item>
<title>Courts: Violating a Website’s Terms of Service Is Not a Crime</title>
<link>https://www.eff.org/deeplinks/2018/01/ninth-circuit-doubles-down-violating-websites-terms-service-not-crime</link>
<guid isPermaLink="true" >https://www.eff.org/deeplinks/2018/01/ninth-circuit-doubles-down-violating-websites-terms-service-not-crime</guid>
<description>&lt;p&gt;Good news out of the Ninth Circuit: the federal court of appeals heeded EFF’s &lt;a href=&quot;https://www.eff.org/document/oracle-v-rimini-eff-amicus-brief&quot;&gt;advice&lt;/a&gt; and &lt;a href=&quot;https://www.eff.org/document/oracle-v-rimini-ninth-circuit-opinion&quot;&gt;rejected&lt;/a&gt; an attempt by Oracle to hold a company criminally liable for accessing Oracle’s website in a manner it didn’t like. The court &lt;a href=&quot;https://www.eff.org/document/ninth-circuit-en-banc-opinion&quot;&gt;ruled&lt;/a&gt; back in 2012 that merely violating a website’s terms of use is not a crime under the federal computer crime statute, the &lt;a href=&quot;https://ilt.eff.org/index.php/Computer_Fraud_and_Abuse_Act_%28CFAA%29&quot;&gt;Computer Fraud and Abuse Act&lt;/a&gt;. But some companies, like Oracle, turned to state computer crime statutes—in this case, California and Nevada—to enforce their computer use preferences.&lt;/p&gt;
&lt;p&gt;This decision shores up the good precedent from 2012 and makes clear—if it wasn’t clear already—that violating a corporate computer use policy is not a crime.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Oracle v. Rimini&lt;/em&gt; involves Oracle’s terms of use prohibition on the use of automated methods to download support materials from the company’s website. Rimini, which provides Oracle clients with software support that competes with Oracle’s own services, violated that provision by using automated scripts instead of downloading each file individually. Oracle sent Rimini a cease and desist letter demanding that it stop using automated scripts, but Oracle didn’t rescind Rimini’s authorization to access the files outright. Rimini still had authorization from Oracle to access the files, but Oracle wanted them to access them manually—which would have seriously slowed down Rimini’s ability to service customers.&lt;/p&gt;
&lt;p&gt;Rimini stopped using automatic downloading tools for about a year but then resumed using automated scripts to download support documents and files, since downloading all of the materials manually would have been burdensome, and Oracle sued. The jury found Rimini guilty under both the California and Nevada computer crime statues, and the judge upheld that verdict—concluding that, under both statutes, violating a website’s terms of service counts as using a computer without authorization or permission.&lt;/p&gt;
&lt;p&gt;Rimini Street appealed, and we filed an &lt;a href=&quot;https://www.eff.org/document/oracle-v-rimini-eff-amicus-brief&quot;&gt;amicus brief&lt;/a&gt; last year urging the court to reject Oracle’s position. As we told the court, the district court’s reasoning turns millions of Internet users into criminals on the basis of innocuous and routine online conduct. By making it completely unclear what conduct is criminal at any given time on any given website, the district court’s holding is in violation of the long-held Rule of Lenity—which requires that criminal statutes be interpreted to give clear notice of what conduct is criminal. Not only do people rarely (if ever) read terms of use agreements, but the bounds of criminal law should not be defined by the preferences of website operators. And private companies shouldn’t be using criminal laws meant to target malicious actors as tool to enforce their computer use preferences or to interfere with competitors.&lt;/p&gt;
&lt;p&gt;At oral argument in July 2017, Judge Susan Graber &lt;a href=&quot;https://www.ca9.uscourts.gov/media/view_video.php?pk_vid=0000011927&quot;&gt;pushed back&lt;/a&gt; [at around 33:40] on Oracle’s argument that automated scraping was a violation of the computer crime law. And Monday, the 3-judge panel issued a unanimous decision rejecting Oracle’s position. As the court held:&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;“[T]aking data using a method prohibited by the applicable terms of use”&lt;em&gt;— i.e&lt;/em&gt;., scraping — “when the taking itself generally is permitted, does not violate” the state computer crime laws.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The court even refers to our brief:&lt;/p&gt;
&lt;blockquote readability=&quot;10&quot;&gt;
&lt;p&gt;“As EFF puts it, ‘[n]either statute . . . applies to bare violations of a website’s terms of use—such as when a computer user has permission and authorization to access and use the computer or data at issue, but simply accesses or uses the information in a manner the website owner does not like.’”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;We’re happy to see the Ninth Circuit clarify, again, that violating a website’s terms of service is not a crime. And we hope this decision influences another case pending before the court involving an attempt to use a computer crime statute to enforce terms of service and stifle competition, &lt;a href=&quot;https://www.eff.org/deeplinks/2017/12/eff-court-accessing-publicly-available-information-internet-not-crimehttps://www.eff.org/deeplinks/2017/12/eff-court-accessing-publicly-available-information-internet-not-crime&quot;&gt;&lt;em&gt;hiQ v. LinkedIn&lt;/em&gt;&lt;/a&gt;. That case addresses whether using automated tools to access publicly available information on the Internet—information that we are all authorized to access under the Web’s open access norms—is a crime. It’s not, and we hope the court agrees. It will hear oral argument in March in San Francisco.&lt;/p&gt;
</description>
<pubDate>Wed, 10 Jan 2018 22:20:40 +0000</pubDate>
<dc:creator>uptown</dc:creator>
<og:type>article</og:type>
<og:title>Ninth Circuit Doubles Down: Violating a Website’s Terms of Service Is Not a Crime</og:title>
<og:url>https://www.eff.org/deeplinks/2018/01/ninth-circuit-doubles-down-violating-websites-terms-service-not-crime</og:url>
<og:description>Good news out of the Ninth Circuit: the federal court of appeals heeded EFF’s advice and rejected an attempt by Oracle to hold a company criminally liable for accessing Oracle’s website in a manner it didn’t like. The court ruled back in 2012 that merely violating a website’s terms of use is...</og:description>
<og:image>https://www.eff.org/files/issues/aaron-swartz.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.eff.org/deeplinks/2018/01/ninth-circuit-doubles-down-violating-websites-terms-service-not-crime</dc:identifier>
</item>
<item>
<title>Meltdown Update Kernel doesnt boot</title>
<link>https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1742323</link>
<guid isPermaLink="true" >https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1742323</guid>
<description>&lt;p&gt;Using a Dell Poweredge T20 and Ubuntu 16.04 with the 4.4 Kernel.&lt;/p&gt;
&lt;p&gt;Just got the Meltdown update to kernel linux-image-&lt;wbr/&gt;4.4.0-108-&lt;wbr/&gt;generic but this doesnt boot at all. It just hangs after grub. There is no logs from syslog or such. SysReq Keys dont work neither.&lt;br/&gt;The last kernel linux-image-&lt;wbr/&gt;4.4.0-104-&lt;wbr/&gt;generic still boots fine.&lt;/p&gt;
&lt;p&gt;ProblemType: Bug&lt;br/&gt;DistroRelease: Ubuntu 16.04&lt;br/&gt;Package: linux-image-&lt;wbr/&gt;4.4.0-104-&lt;wbr/&gt;generic 4.4.0-104.127&lt;br/&gt;ProcVersionSign&lt;wbr/&gt;ature: Ubuntu 4.4.0-104.&lt;wbr/&gt;127-generic 4.4.98&lt;br/&gt;Uname: Linux 4.4.0-104-generic x86_64&lt;br/&gt;NonfreeKernelMo&lt;wbr/&gt;dules: zfs zunicode zcommon znvpair zavl&lt;br/&gt;AlsaVersion: Advanced Linux Sound Architecture Driver Version k4.4.0-104-generic.&lt;br/&gt;AplayDevices: Error: [Errno 2] No such file or directory: 'aplay'&lt;br/&gt;ApportVersion: 2.20.1-0ubuntu2.15&lt;br/&gt;Architecture: amd64&lt;br/&gt;ArecordDevices: Error: [Errno 2] No such file or directory: 'arecord'&lt;br/&gt;AudioDevicesInUse: Error: command ['fuser', '-v', '/dev/snd/by-path', '/dev/snd/hwC0D0', '/dev/snd/&lt;wbr/&gt;pcmC0D0c'&lt;wbr/&gt;, '/dev/snd/&lt;wbr/&gt;pcmC0D0p'&lt;wbr/&gt;, '/dev/snd/&lt;wbr/&gt;controlC0'&lt;wbr/&gt;, '/dev/snd/seq', '/dev/snd/timer'] failed with exit code 1:&lt;br/&gt;Card0.Amixer.info: Error: [Errno 2] No such file or directory: 'amixer'&lt;br/&gt;Card0.Amixer.&lt;wbr/&gt;values: Error: [Errno 2] No such file or directory: 'amixer'&lt;br/&gt;Date: Wed Jan 10 01:36:01 2018&lt;br/&gt;HibernationDevice: RESUME=&lt;wbr/&gt;UUID=9b654b0f-&lt;wbr/&gt;96ef-49f0-&lt;wbr/&gt;bfd8-ad7907cb7b&lt;wbr/&gt;99&lt;br/&gt;InstallationDate: Installed on 2017-05-17 (237 days ago)&lt;br/&gt;InstallationMedia: Ubuntu-Server 16.04 LTS &quot;Xenial Xerus&quot; - Release amd64 (20160420.3)&lt;br/&gt;IwConfig: Error: [Errno 2] No such file or directory: 'iwconfig'&lt;br/&gt;MachineType: Dell Inc. PowerEdge T20&lt;br/&gt;ProcEnviron:&lt;br/&gt; TERM=xterm-&lt;wbr/&gt;256color&lt;br/&gt; PATH=(custom, no user)&lt;br/&gt; XDG_RUNTIME_&lt;wbr/&gt;DIR=&amp;lt;set&amp;gt;&lt;br/&gt; LANG=de_DE.UTF-8&lt;br/&gt; SHELL=/bin/bash&lt;br/&gt;ProcFB: 0 inteldrmfb&lt;br/&gt;ProcKernelCmdLine: BOOT_IMAGE=&lt;wbr/&gt;/boot/vmlinuz-&lt;wbr/&gt;4.4.0-104-&lt;wbr/&gt;generic.&lt;wbr/&gt;efi.signed root=UUID=&lt;wbr/&gt;9edb2ffb-&lt;wbr/&gt;791e-4988-&lt;wbr/&gt;b3a9-7ce7322780&lt;wbr/&gt;2c ro&lt;br/&gt;RelatedPackageV&lt;wbr/&gt;ersions:&lt;br/&gt; linux-&lt;wbr/&gt;restricted-&lt;wbr/&gt;modules-&lt;wbr/&gt;4.4.0-104-&lt;wbr/&gt;generic N/A&lt;br/&gt; linux-&lt;wbr/&gt;backports-&lt;wbr/&gt;modules-&lt;wbr/&gt;4.4.0-104-&lt;wbr/&gt;generic N/A&lt;br/&gt; linux-firmware 1.157.14&lt;br/&gt;RfKill: Error: [Errno 2] No such file or directory: 'rfkill'&lt;br/&gt;SourcePackage: linux&lt;br/&gt;UpgradeStatus: No upgrade log present (probably fresh install)&lt;br/&gt;dmi.bios.date: 05/11/2017&lt;br/&gt;dmi.bios.vendor: Dell Inc.&lt;br/&gt;dmi.bios.version: A12&lt;br/&gt;dmi.board.name: 0VD5HY&lt;br/&gt;dmi.board.vendor: Dell Inc.&lt;br/&gt;dmi.board.version: A07&lt;br/&gt;dmi.chassis.type: 6&lt;br/&gt;dmi.chassis.vendor: Dell Inc.&lt;br/&gt;dmi.modalias: dmi:bvnDellInc.&lt;wbr/&gt;:bvrA12:&lt;wbr/&gt;bd05/11/&lt;wbr/&gt;2017:svnDellInc&lt;wbr/&gt;.:pnPowerEdgeT2&lt;wbr/&gt;0:pvr00:&lt;wbr/&gt;rvnDellInc.&lt;wbr/&gt;:rn0VD5HY:&lt;wbr/&gt;rvrA07:&lt;wbr/&gt;cvnDellInc.&lt;wbr/&gt;:ct6:cvr:&lt;br/&gt;dmi.product.name: PowerEdge T20&lt;br/&gt;dmi.product.&lt;wbr/&gt;version: 00&lt;br/&gt;dmi.sys.vendor: Dell Inc.&lt;/p&gt;
</description>
<pubDate>Wed, 10 Jan 2018 20:41:30 +0000</pubDate>
<dc:creator>sz4kerto</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://bugs.launchpad.net/ubuntu/+source/linux/+bug/1742323</dc:identifier>
</item>
<item>
<title>The State of Atom&amp;#039;s Performance</title>
<link>http://blog.atom.io/2018/01/10/the-state-of-atoms-performance.html</link>
<guid isPermaLink="true" >http://blog.atom.io/2018/01/10/the-state-of-atoms-performance.html</guid>
<description>&lt;p&gt;Our original goal in building Atom was to create the most hackable text editor that we could imagine. This overarching goal shaped Atom’s architecture and our team’s early priorities. Since Atom launched, its extensibility has been validated by numerous ambitious projects that have been built on top of it, like &lt;a href=&quot;https://nuclide.io/&quot;&gt;Facebook’s Nuclide&lt;/a&gt;, &lt;a href=&quot;http://junolab.org/&quot;&gt;the Juno IDE for Julia&lt;/a&gt;, and &lt;a href=&quot;https://learn.co/lessons/learn-environment-setup&quot;&gt;the Learn.co IDE&lt;/a&gt;, as well as by the thousands of community packages and themes published to &lt;a href=&quot;https://atom.io/packages&quot;&gt;atom.io&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Atom has proven to be as extensible as we had hoped, and our focus over the last two years has shifted from building out an extensible system to achieving excellent performance. Now that 2017 has come to an end, we’re taking a moment to reflect on the performance improvements that we’ve made in the past year and the next improvements we’ll be tackling in 2018.&lt;/p&gt;

&lt;p&gt;Atom takes longer to start up than text editors like Vim and Sublime Text because of the dynamic architecture of the app. The majority of our code is written in JavaScript as opposed to C or C++, which is important for Atom’s extensibility, but makes it more challenging to ensure that the app starts quickly.&lt;/p&gt;
&lt;h3 id=&quot;2017s-improvements&quot;&gt;2017’s Improvements&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Startup Snapshots&lt;/strong&gt; - In March, we started making use of a relatively new feature of the V8 JavaScript runtime called &lt;a href=&quot;https://v8project.blogspot.com/2015/09/custom-startup-snapshots.html&quot;&gt;&lt;em&gt;custom startup snapshots&lt;/em&gt;&lt;/a&gt;. This feature allows us to perform major parts of Atom’s initialization ahead of time on our build servers: not just source code compilation (as is done with C or C++) but even &lt;a href=&quot;https://github.com/atom/atom/pull/14024&quot;&gt;the construction of complex object graphs on the heap&lt;/a&gt;. Using startup snapshots required us to make major architectural changes. In order to avoid making DOM calls during initialization, we removed the use of jQuery and custom HTML elements from our entire codebase, and we built a tool called &lt;a href=&quot;http://github.com/atom/electron-link&quot;&gt;electron-link&lt;/a&gt; to &lt;em&gt;transform&lt;/em&gt; our code into a script suitable for snapshotting. These investments paid off: we’ve already cut our initial startup time in half.&lt;/p&gt;
&lt;h3 id=&quot;next-steps&quot;&gt;Next Steps&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Expanding our Startup Snapshot&lt;/strong&gt; - Since we made our initial investments in startup snapshots, the V8 team has &lt;a href=&quot;https://v8project.blogspot.com/2017/05/energizing-atom-with-v8s-custom-start.html&quot;&gt;made further improvements&lt;/a&gt; to the feature. It is now possible for us to include in the snapshot even more parts of our code, such as those that include bindings to native code.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Deferring Package Loading&lt;/strong&gt; - Many packages can be loaded after the window has initially rendered without affecting the experience of using Atom. By doing this, we can mostly eliminate the impact of users’ installed packages on startup time.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Snapshotting Installed Packages&lt;/strong&gt; - Some packages &lt;em&gt;do&lt;/em&gt; need to be activated before we render anything. One weakness of our current startup snapshot is that it does not include the code of any community packages that you have installed. We may start including the snapshot-creation utilities as part of Atom so that we can automatically create snapshots of users’ customized Atom environments.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Native Launcher&lt;/strong&gt; - Currently, opening an Atom window requires briefly starting up a new Electron process even if the Atom application is already running. We plan to rework our application startup process by introducing a dedicated native executable that checks for a running Atom application and boots one up if needed.&lt;/p&gt;

&lt;p&gt;Historically, Atom’s extensibility has required us to perform some expensive computation on every keystroke. Last year, we made several major changes to eliminate these costs without sacrificing hackability.&lt;/p&gt;
&lt;h3 id=&quot;2017s-improvements-1&quot;&gt;2017’s Improvements&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Text Rendering Rewrite&lt;/strong&gt; - Atom renders text using the DOM in order to allow for effortless theming and customization. In May, we &lt;a href=&quot;http://blog.atom.io/2017/06/22/a-new-approach-to-text-rendering.html&quot;&gt;rewrote Atom’s text rendering system&lt;/a&gt; from scratch, with the goal of making DOM updates after keystrokes as efficient as possible. We made use of the latest DOM technologies and rendering techniques, and built a tiny React-like library called &lt;a href=&quot;https://github.com/atom/etch&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;etch&lt;/code&gt;&lt;/a&gt; that allows us to structure our rendering code cleanly while still allowing for imperative DOM manipulation for maximal performance in certain code paths. The result is that when typing, typical DOM updates now take less than 5 milliseconds: well within the range required for smooth animation and low energy usage.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Batched Text Change Events&lt;/strong&gt; - In order to allow packages to customize every aspect of Atom’s behavior, we expose numerous event APIs for observing different kinds of changes in the editor. Originally, some of these events were emitted many times during bulk editing operations like multi-cursor typing. In October, we &lt;a href=&quot;https://github.com/atom/text-buffer/pull/270&quot;&gt;reworked&lt;/a&gt; &lt;a href=&quot;https://github.com/atom/text-buffer/pull/273&quot;&gt;these&lt;/a&gt; &lt;a href=&quot;https://github.com/atom/text-buffer/pull/274&quot;&gt;APIs&lt;/a&gt; to batch the change events up until the ends of &lt;em&gt;transactions&lt;/em&gt; such that packages won’t introduce latency by using these event APIs.&lt;/p&gt;
&lt;h3 id=&quot;next-steps-1&quot;&gt;Next Steps&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Further Batching of Text Change Handling&lt;/strong&gt; - Now that we have reworked our editor change events, we can defer other change handling in our system with the knowledge that package code will never be notified of a change in the middle of a transaction.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Batching marker events&lt;/strong&gt; – Atom has an abstraction called markers that allow logical regions to be tracked in the presence of changes to the buffer. Markers currently expose a subscription API that allows a listener to be notified whenever a marker changes position. Unfortunately, when the number of markers is large, subscribing to markers individually via these APIs produces the same kinds of problems as subscribing to individual change events, and we need to take steps to push the ecosystem toward batched APIs for markers as well.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Simplifying Markup and Styling&lt;/strong&gt; - There are still ways we can optimize our text rendering further. After the rewrite, one expensive step in each frame is &lt;a href=&quot;https://developers.google.com/web/fundamentals/performance/rendering/reduce-the-scope-and-complexity-of-style-calculations&quot;&gt;&lt;em&gt;style recalculation&lt;/em&gt;&lt;/a&gt;. We believe that this step takes longer than necessary because some of our CSS is written in a naive style that makes heavy use of nested selectors. We’re already writing new CSS in the more efficient &lt;a href=&quot;http://getbem.com&quot;&gt;BEM style&lt;/a&gt; and going forward, we’ll be migrating our older style sheets to use this style.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;New Parsing System&lt;/strong&gt; - One source of latency in Atom’s keystroke handling is our syntax-highlighting system, &lt;a href=&quot;https://github.com/atom/first-mate&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;First Mate&lt;/code&gt;&lt;/a&gt;, which implements the TextMate grammar API. In the coming months, we’ll be &lt;a href=&quot;https://github.com/atom/atom/pull/16299&quot;&gt;rolling out&lt;/a&gt; a new incremental parsing system called &lt;a href=&quot;http://github.com/tree-sitter/tree-sitter&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Tree-sitter&lt;/code&gt;&lt;/a&gt; that will serve as the basis for improved syntax highlighting, code folding, auto-indent, and other new features. Using Tree-sitter, we will be able to perform parsing more efficiently and on background threads in some cases. Moving away from TextMate grammars will also allow us to produce simpler markup for syntax-highlighting, which should further reduce the style recalculation times mentioned above.&lt;/p&gt;

&lt;p&gt;Many features in Atom were initially developed and tested using files and repositories of moderate sizes. Last year we took our biggest steps yet in overhauling Atom from the core outward so that it handles large files and projects optimally.&lt;/p&gt;
&lt;h3 id=&quot;2017s-improvements-2&quot;&gt;2017’s Improvements&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Native Text Buffer&lt;/strong&gt; - In June, we &lt;a href=&quot;http://blog.atom.io/2017/10/12/atoms-new-buffer-implementation.html&quot;&gt;rewrote&lt;/a&gt; our core TextBuffer data structure in C++ using a memory-efficient data structure similar to a &lt;a href=&quot;https://en.wikipedia.org/wiki/Piece_table&quot;&gt;Piece Table&lt;/a&gt;. The result is that large files now open quickly, and Atom’s core data structures no longer impose significant memory costs when editing them. This change also makes it very easy to perform computations based on the buffer in background threads.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Autocomplete Rewrite&lt;/strong&gt; - In September, we &lt;a href=&quot;https://github.com/atom/superstring/pull/22&quot;&gt;developed&lt;/a&gt; a new autocomplete system that performs fuzzy searching and scoring on background threads. This allowed us to get rid of an expensive indexing strategy that our previous autocomplete system required and to fully enable autocomplete in buffers of any size.&lt;/p&gt;
&lt;h3 id=&quot;next-steps-2&quot;&gt;Next Steps&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;New Filesystem Watcher&lt;/strong&gt; - Atom watches your filesystem so that it can quickly respond to changes in your project files or Git state. When working in large directories, this filesystem-watching can be memory-intensive. That’s why we have developed &lt;a href=&quot;https://github.com/atom/watcher&quot;&gt;a brand-new cross-platform filesystem watching library&lt;/a&gt; with performance and scalability in mind. Integrating this library into Atom will fix a number of filesystem-related performance problems.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Native Display Index&lt;/strong&gt; - Now that the text buffer itself has been dropped to native code, there are a few related code paths in Atom that would benefit significantly from being ported to C++ or Rust and incorporating background threads. One is Atom’s &lt;em&gt;display index&lt;/em&gt; - the structure that stores the locations of things like soft wraps, folds and hard tabs. This data structure is already very compact in memory, but the code that populates it can be slow. Currently, if you open a very large file in Atom and try to immediately scroll to the bottom, Atom will hang while the display index is populated.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Native Find-and-replace&lt;/strong&gt; - Another computation that we can now move to a background thread is the core of our find-and-replace implementation. This code is already pretty efficient thanks to our native &lt;a href=&quot;https://github.com/atom/superstring#markerindex&quot;&gt;Marker Index&lt;/a&gt; data structure, but it causes perceptible lag when there are upwards of a hundred thousand search results. We can now remove JavaScript entirely from this code path and prevent it from blocking the UI at all.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Removing remaining synchronous IO:&lt;/strong&gt; - Atom still uses synchronous IO (which blocks the UI thread) in some places. This is because we created Atom before GitHub created &lt;a href=&quot;https://electronjs.org&quot;&gt;Electron&lt;/a&gt;, so Node.js APIs were not available from the outset. Much of the synchronous IO has been eliminated, but there are several Git-related code paths that we still have not updated, and which kills the experience of editing on remote drives like SSHFS for some users. We need to revisit these code paths and convert them all to use asynchronous IO.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Faster Project Search Tools&lt;/strong&gt; - We’d like to start using &lt;a href=&quot;https://github.com/ggreer/the_silver_searcher&quot;&gt;The Silver Searcher&lt;/a&gt; or &lt;a href=&quot;https://github.com/BurntSushi/ripgrep&quot;&gt;ripgrep&lt;/a&gt; to power our project search and &lt;a href=&quot;https://github.com/sharkdp/fd&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;fd&lt;/code&gt;&lt;/a&gt; or similar to populate our fuzzy-finder list. This would improve the experience of using Atom in very large directories.&lt;/p&gt;

&lt;p&gt;Atom currently uses more memory than text editors like Vim, but the app’s typical memory usage has decreased significantly in the last two years. Our goal is to improve Atom’s memory efficiency to the point where it is never significant.&lt;/p&gt;
&lt;h3 id=&quot;2017s-improvements-3&quot;&gt;2017’s Improvements&lt;/h3&gt;
&lt;p&gt;Several of the improvements discussed in previous sections have had side effects of improving Atom’s memory usage significantly. In August, after we released Atom 1.19 (which included the text buffer and text rendering rewrites), our friends at Facebook shared with us a graph that showed a significant drop in Atom’s memory usage for engineers within Facebook. Atom 1.19 used less than half as much memory as Atom 1.18 for these users. Note also that these numbers are for users running Nuclide, which adds substantial functionality to Atom and increases its memory usage. Typical Atom users should see lower memory consumption.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://blog.atom.io/img/posts/nuclide-memory-usage-graph.png&quot; alt=&quot;Decline in Memory Usage&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;next-steps-3&quot;&gt;Next Steps&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Native Spawn server&lt;/strong&gt; - A significant fraction of Atom’s typical memory consumption is due to a helper process that we use to work around a &lt;a href=&quot;https://github.com/nodejs/node/issues/14917&quot;&gt;performance issue&lt;/a&gt; with the Node.js child process APIs. We plan to eliminate this memory usage by &lt;a href=&quot;https://github.com/nathansobo/spawn-server&quot;&gt;rewriting this helper process&lt;/a&gt; in &lt;a href=&quot;https://www.rust-lang.org&quot;&gt;Rust&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In 2017, we invested heavily in improving Atom’s performance. Many of those investments will continue to pay off in 2018, and we will continue to invest in the structural improvements necessary to achieve world-class performance in Atom. If you’re interested in getting involved with these performance improvements, please do! For more information about how to get involved, see Atom’s &lt;a href=&quot;https://github.com/atom/atom/blob/master/CONTRIBUTING.md&quot;&gt;Contributing guide&lt;/a&gt;.&lt;/p&gt;
</description>
<pubDate>Wed, 10 Jan 2018 18:48:11 +0000</pubDate>
<dc:creator>ropiku</dc:creator>
<og:title>The State of Atom’s Performance</og:title>
<og:description>Our original goal in building Atom was to create the most hackable text editor that we could imagine. This overarching goal shaped Atom’s architecture and our team’s early priorities. Since Atom launched, its extensibility has been validated by numerous ambitious projects that have been built on top of it, like Facebook’s Nuclide, the Juno IDE for Julia, and the Learn.co IDE, as well as by the thousands of community packages and themes published to atom.io. Atom has proven to be as extensible as we had hoped, and our focus over the last two years has shifted from building out an extensible system to achieving excellent performance. Now that 2017 has come to an end, we’re taking a moment to reflect on the performance improvements that we’ve made in the past year and the next improvements we’ll be tackling in 2018.</og:description>
<og:url>http://blog.atom.io/2018/01/10/the-state-of-atoms-performance.html</og:url>
<og:type>article</og:type>
<dc:format>text/html</dc:format>
<dc:identifier>http://blog.atom.io/2018/01/10/the-state-of-atoms-performance.html</dc:identifier>
</item>
<item>
<title>GPU Fluid</title>
<link>https://benedikt-bitterli.me/gpu-fluid.html</link>
<guid isPermaLink="true" >https://benedikt-bitterli.me/gpu-fluid.html</guid>
<description>&lt;div class=&quot;youtube&quot;&gt;&lt;img src=&quot;https://benedikt-bitterli.me/images/fluid-thumb/video.jpg&quot; alt=&quot;Video Thumbnail&quot;/&gt;
&lt;/div&gt;
&lt;h2&gt;GPU Fluid&lt;/h2&gt;
&lt;p&gt;This GPU implementation of a high-quality, offline fluid solver was written in Summer 2013 as a personal exercise in GPGPU. My main goal here was to become more familiar with versatile GPU algorithms such as stream compaction, and at the same time apply them in an exciting, computation heavy setting. The solver is written in C++ and OpenGL 4. The project is available on &lt;a href=&quot;https://github.com/tunabrain/gpu-fluid&quot; target=&quot;_blank&quot;&gt;github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The fluid simulation itself is implemented using a grid-based Eulerian solver. One of the core ingredients of a Eulerian solver is the pressure solve, which involves computing the solution to a large system of linear equations (more than 1 million variables are typical). Simple solvers such as Gauss-Seidel are not very useful here, and I opted to implement the &lt;a href=&quot;http://en.wikipedia.org/wiki/Conjugate_gradient_method#The_preconditioned_conjugate_gradient_method&quot; target=&quot;_blank&quot;&gt;Preconditioned Conjugate Gradient method&lt;/a&gt; (PCG) instead.&lt;/p&gt;
&lt;div class=&quot;center&quot; readability=&quot;9&quot;&gt;
&lt;div class=&quot;youtube&quot;&gt;&lt;img src=&quot;https://benedikt-bitterli.me/images/fluid-thumb/video-2.jpg&quot; alt=&quot;Video Thumbnail&quot;/&gt;
&lt;/div&gt;
&lt;p class=&quot;caption&quot;&gt;Heavy, black liquid is dispersed onto an obstacle in a container of light, white liquid&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt;Accelerating dot products&lt;/h2&gt;
&lt;p&gt;Implementing PCG on the GPU can be challenging due to the fact that it requires several dot products per iteration. Dot products are difficult to parallelize efficiently over several hundred cores, since they require summing a large vector into a single scalar. On the GPU, this operation easily becomes the bottleneck of the solver, and I spent a lot of time just optimizing this step.&lt;/p&gt;
&lt;p&gt;Firstly, the vector sum is performed in 2D instead of 1D, and stepwise instead of all at once. The input vectors for the dot product are multiplied element-wise and the result stored in a 2D texture, which is then summed to a single scalar step by step. In each step, every shader core computes the sum of a 4x4 texel area, shrinking the texture by a factor of 4 per side at each step, eventually arriving at a 1x1 area (a scalar). This provides a compromise between the number of synchronization steps and the number of cores utilized per sum.&lt;/p&gt;
&lt;p&gt;As an additional trick, the texturing unit is used to decrease the number of texture reads. GPUs feature several highly optimized hardware texturing units that can be abused to perform efficient floating point sums. That is, an interpolated texture read placed precisely in the center between four texels will produce the sum of the four texels, divided by four, in a single texture read. This is much more efficient than reading four texels in the shader without interpolation (using texelFetch) and adding them manually. Also, multiple texture reads are performed by each shader core to overlap their latency.&lt;/p&gt;
&lt;div class=&quot;center&quot; readability=&quot;8&quot;&gt;
&lt;div class=&quot;youtube&quot;&gt;&lt;img src=&quot;https://benedikt-bitterli.me/images/fluid-thumb/video-3.jpg&quot; alt=&quot;Video Thumbnail&quot;/&gt;
&lt;/div&gt;
&lt;p class=&quot;caption&quot;&gt;Hot, black smoke rises in a cold container&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt;Finding a preconditioner&lt;/h2&gt;
&lt;p&gt;The performance of PCG is heavily dependent on the preconditioner, which is a special type of matrix tailored specifically to the class of matrix being inverted (here, a Poisson problem). For CPU implementations, a popular choice is Modified Incomplete Cholesky, which performs excellently in many cases. Unfortunately, it is also inherently sequential, making it infeasible for GPU implementations.&lt;br/&gt;I did some research and discovered the paper &lt;a href=&quot;http://link.springer.com/chapter/10.1007%2F978-3-642-25090-3_33&quot; target=&quot;_blank&quot;&gt;Parallelized Incomplete Poisson Preconditioner in Cloth Simulation&lt;/a&gt; by Sideris et. al., which describes the Incomplete Poisson preconditioner, tailored towards parallel solvers for Poisson problems. It translates to the GPU without issues and does not perform much worse than Modified Incomplete Cholesky.&lt;/p&gt;
&lt;div class=&quot;center&quot; readability=&quot;11&quot;&gt;
&lt;div class=&quot;youtube&quot;&gt;&lt;img src=&quot;https://benedikt-bitterli.me/images/fluid-thumb/video-4.jpg&quot; alt=&quot;Video Thumbnail&quot;/&gt;
&lt;/div&gt;
&lt;p class=&quot;caption&quot;&gt;Light, white fluid and heavy, black fluid flow past each other, creating the Kelvin-Helmholtz instability&lt;/p&gt;
&lt;/div&gt;
&lt;h2&gt;Managing Particles&lt;/h2&gt;
&lt;p&gt;Finally, performing accurate advection on the GPU poses additional challenges. Semi-lagrangian approaches are easy to implement on the GPU, but suffer from numerical diffusion; that is, the simulation loses small-scale detail over time and eventually becomes &quot;smoothed out&quot;. This is undesirable, since much of the visual fidelity is dependent on the small-scale vortices and other details.&lt;br/&gt;A popular choice of advection method that mostly avoids numerical diffusion is &lt;a href=&quot;http://www.researchgate.net/publication/222452290_Flip_A_low-dissipation_particle-in-cell_method_for_fluid_flow&quot; target=&quot;_blank&quot;&gt;Fluid Implicit Particle (FLIP)&lt;/a&gt;. On the CPU, this technique is not too difficult to implement. On the GPU however, things are a little bit more complex.&lt;/p&gt;
&lt;p&gt;The main problem is that a) lists of particles need to be built for every grid cell and b) possibly many particles need to be created and deleted per frame. Building lists of things and dynamically deleting/creating data points stored in a continuous buffer without the data ever leaving the GPU is a difficult thing to do, and this is where a technique called &lt;a href=&quot;http://folk.uio.no/erikd/histo/hpmarchertalk.pdf&quot; target=&quot;_blank&quot;&gt;Histopyramids&lt;/a&gt; comes in handy.&lt;br/&gt;Generally speaking, histopyramids allow collecting possibly sparse data points into a packed buffer using prefix sums, in order to evenly distribute work from this buffer to GPU cores. In this case, I am using histopyramids as a simple memory allocator that creates, deletes and sorts particles into lists in a single step. Doing this efficiently requires access to atomic memory operations, which are available as of OpenGL 3.2.&lt;/p&gt;
</description>
<pubDate>Wed, 10 Jan 2018 18:18:40 +0000</pubDate>
<dc:creator>pablode</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://benedikt-bitterli.me/gpu-fluid.html</dc:identifier>
</item>
<item>
<title>AppStore Preferences can be unlocked by a local admin with any bogus password</title>
<link>https://openradar.appspot.com/36350507</link>
<guid isPermaLink="true" >https://openradar.appspot.com/36350507</guid>
<description>&lt;div readability=&quot;7.3929845422117&quot;&gt;
&lt;table&gt;&lt;tr&gt;&lt;td&gt;Originator:&lt;/td&gt;
&lt;td&gt;eholtam&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Number:&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;rdar://problem/36350507&quot;&gt;rdar&lt;/a&gt;://&lt;a href=&quot;https://openradar.appspot.com/36350507&quot;&gt;36350507&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;Date Originated:&lt;/td&gt;
&lt;td&gt;08-Jan-2018 11:15 AM&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Status:&lt;/td&gt;
&lt;td&gt;Open&lt;/td&gt;
&lt;td&gt;Resolved:&lt;/td&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Product:&lt;/td&gt;
&lt;td&gt;macOS + SDK&lt;/td&gt;
&lt;td&gt;Product Version:&lt;/td&gt;
&lt;td&gt;10.13.2 17C88&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Classification:&lt;/td&gt;
&lt;td&gt;Security&lt;/td&gt;
&lt;td&gt;Reproducible:&lt;/td&gt;
&lt;td&gt;Always&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;div readability=&quot;10&quot;&gt;
&lt;pre&gt;
 
Summary:
The AppStore Preferences in System Preferences can be unlocked by a local admin with any bogus password.  

Steps to Reproduce:
1) Log in as a local admin
2) Open App Store Prefpane from the System Preferences
3) Lock the padlock if it is already unlocked
4) Click the lock to unlock it
5) Enter any bogus password

Expected Results:
The authorization to fail.

Actual Results:
Authorization succeeds and grants access to change the AppStore preferences.

Version:
10.13.2 17C88

Notes:
This only appears to be when logged in as a local admin. 
Tested with a non-admin account and I cannot unlock the prefpane with incorrect credentials.
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;h2&gt;Comments&lt;/h2&gt;


&lt;p&gt;&lt;strong&gt;Please note:&lt;/strong&gt; Reports posted here will not necessarily be seen by Apple. All problems should be submitted at bugreport.apple.com before they are posted here. Please only post information for Radars that you have filed yourself, and please do not include Apple confidential information in your posts. Thank you!&lt;/p&gt;
</description>
<pubDate>Wed, 10 Jan 2018 16:50:53 +0000</pubDate>
<dc:creator>tomduncalf</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://openradar.appspot.com/36350507</dc:identifier>
</item>
<item>
<title>Britain&amp;#039;s Next Megaproject: A Coast-To-Coast Forest</title>
<link>https://www.citylab.com/environment/2018/01/northern-forest-united-kingdom/550025/?utm_source=SFTwitter</link>
<guid isPermaLink="true" >https://www.citylab.com/environment/2018/01/northern-forest-united-kingdom/550025/?utm_source=SFTwitter</guid>
<description>&lt;p itemprop=&quot;description&quot;&gt;The plan is for 50 million new trees to repopulate one of the least wooded parts of the country—and offer a natural escape from several cities in the north.&lt;/p&gt;&lt;div id=&quot;article-section-1&quot;&gt;&lt;p&gt;Northern England is set to get a whole lot greener. On Sunday, the U.K. government &lt;a href=&quot;http://www.bbc.co.uk/news/uk-42591494&quot;&gt;unveiled plans&lt;/a&gt; for a vast new forest spanning the country from coast to coast. Shadowing the path of the east-west &lt;a href=&quot;https://en.wikipedia.org/wiki/M62_motorway&quot;&gt;M62 Highway&lt;/a&gt;, the new forest will create a broad green rib across England from Liverpool to the east coast city of Hull.&lt;/p&gt;
&lt;p&gt;If fully realized along the lines announced this week, the forest will ultimately contain 50 million new trees, stretched in a dense 62,000-acre patchwork along a 120-mile strip. Not only will the forest repopulate one of the least wooded parts of the country with local, mainly broadleaf tree species, it will also provide a band of newly greened landscape to escape to from the many big cities located nearby.&lt;/p&gt;
&lt;p&gt;The goal of a thick green ribbon is still a long way off, of course. So far, the government has pledged just an initial £5.7 million of the £500 million needed to fully realize the project. But what’s significant about the plan is that it amps up a transformation that is in fact already underway—it is actually the second major attempt in recent years to re-green the English landscape.&lt;/p&gt;
&lt;/div&gt;&lt;div id=&quot;article-section-2&quot;&gt;&lt;p&gt;That first attempt lies roughly 100 miles south, in the English Midlands, where a vast new woodland stretching across a 200-mile strip is steadily reaching maturity. First planted 28 years ago, the &lt;a href=&quot;http://www.nationalforest.org/&quot;&gt;National Forest&lt;/a&gt;, as it is called, is just beginning to mature and reveal how transformative such a rethink of the landscape can be. Like the new northern forest, it’s not just about providing a new carbon sink and leisure facility, but also about imagining what a landscape partly denuded by industrial exploitation and grazing can look like once these uses become obsolete.&lt;/p&gt;
&lt;img alt=&quot;&quot; data-srcset=&quot;https://cdn.theatlantic.com/assets/media/img/posts/2018/01/White_Rose_Forest_Scammonden_Water_Courtesy_Guy_thompson_2/bc332db29.jpg&quot; class=&quot;lazyload&quot;/&gt;The White Rose Forest, near Huddersfield, is an existing woodland that would be incorporated into the Northern Forest. (Courtesy of Guy Thompson/&lt;a href=&quot;https://www.woodlandtrust.org.uk&quot;&gt;Woodland Trust&lt;/a&gt;)
&lt;p&gt;This sounds wonderful—but first, a reality check. If Britain is planning new forests, it’s because the island badly needs them. Overall, the U.K.’s landscape contains one of Europe’s lowest proportions of woodland: just 13 percent. No one expects a populous, heavily developed country like the U.K. to reach the levels of, say Finland, which, at &lt;a href=&quot;https://gabrielhemery.com/plant-a-tree-for-every-year-of-your-life/&quot;&gt;over 73 percent&lt;/a&gt; woodland, is Europe’s leafiest country by far. The U.K. trails far behind its more comparable neighbors Belgium (22.6 percent woodland) and France (31 percent), making it look decidedly bare and patchy by comparison.&lt;/p&gt;
&lt;p&gt;This is especially true in England, which is just 10 percent woodland, compared to 15 percent in Wales and 18 percent in Scotland; in both countries, forestry has replaced pastoral farming in some areas. Even this small proportion is under attack, as ancient woodlands across the country face destruction. Current threats are numerous, including the endangering of &lt;a href=&quot;https://www.woodlandtrust.org.uk/get-involved/campaign-with-us/our-campaigns/hs2-rail-link/&quot;&gt;35 ancient forest tracts&lt;/a&gt; destined to be damaged by the construction of England’s new high-speed rail link, because tunneling or diversion has been deemed too expensive and inconvenient. Already, &lt;a href=&quot;https://www.theguardian.com/commentisfree/2018/jan/08/promised-northern-forest-diversion-hs2-shale-sherwood-forest&quot;&gt;some critics&lt;/a&gt; are protesting that the Northern Forest project is a fig leaf—albeit a vast one—intended to mask neglect and abuse of woodlands elsewhere. There may also be a degree of political machination going on (although when isn’t there?), with the British government seeking a high-profile project that can reassure people that leaving the E.U. will not mark an end to all green policies and state support.&lt;/p&gt;
&lt;/div&gt;&lt;div id=&quot;article-section-3&quot;&gt;&lt;p&gt;The existing National Forest nonetheless shows how attractive and sustainable such projects can be, provided they are not created at the exclusion of other conservation efforts. Its first saplings were planted in 1995 across a broad sweep that mixes towns, croplands, and former coalfields. Consisting mainly (if not exclusively) of slower-growing broadleaf trees sourced from the local area—a marked difference from the regimented stands of non-native pine that British forestry focused on for much of the 20th century—the forest is gradually starting to reveal its ultimate appearance.&lt;/p&gt;
&lt;p&gt;Over the past 20 years, the National Forest has spread like a sort of expressionist mosaic across the landscape. By offering &lt;a href=&quot;http://www.nationalforest.org/woodlands/woodlandcreation/&quot;&gt;funding incentives&lt;/a&gt; for mainly private landlords to plant, it has steadily joined up existing woodlands to create what will ultimately become a seamless forest habitat. By spring 2016, 8.5 million trees had already been planted there, but the project is by no means finished. Currently a little over 20 percent of the designated land is forest area. Maintaining the current jigsaw puzzle layout, the aim is to cover one-third of the total area with trees.&lt;/p&gt;
&lt;/div&gt;&lt;div id=&quot;article-section-5&quot;&gt;&lt;p&gt;So far, over 80 percent of this forest area is accessible to the public, making it easy to enjoy for nearby city-dwellers. Indeed, it’s the intimate link with major cities that connects the National and Northern Forests, as both plans create new havens of peace in some of England’s more densely inhabited, city-filled areas.&lt;/p&gt;
&lt;/div&gt;&lt;div id=&quot;article-section-6&quot;&gt;&lt;p&gt;The advantages of this are numerous. Just as trees within cities &lt;a href=&quot;https://www.citylab.com/design/2016/10/the-big-green-payoff-from-bigger-urban-forests/505913/&quot;&gt;clean and cool&lt;/a&gt; their air, so do woodlands on the urban edge reduce the pollution and noise caused by highways, helping to shelter both residents and visitors from their effect. In the U.S. alone, it’s estimated that the pollution-reducing abilities of trees cut annual health costs by &lt;a href=&quot;https://www.theatlantic.com/health/archive/2014/07/trees-good/375129/&quot;&gt;as much as $7 billion&lt;/a&gt;. Seaming the busier transit corridors of England with trees would not only give local cities newly attractive playgrounds on their fringes, but ensure that these fringes—and possibly even parts of the cities beyond them—are cleaner, fresher and more moderate in temperature.&lt;/p&gt;
&lt;p&gt;With even the National Forest still incomplete and juvenile, all this is some way off. Across its length, the results are already magical, with even lower thicket-like saplings scattered across the landscape in a way that looks utterly organic (although it isn’t), while the forest floor in places is already turning ultramarine with &lt;a href=&quot;https://en.wikipedia.org/wiki/Hyacinthoides_non-scripta&quot;&gt;bluebells&lt;/a&gt; in spring.&lt;/p&gt;
&lt;p&gt;Recreating this sort of widely-spaced green patchwork in the new Northern Forest 100 miles away would certainly be welcome. Threaded through an area that touches the outer edges of major cities such as Liverpool, Manchester, and Leeds, the area is one of the least wooded in all Britain. It’s nonetheless an area that’s often beautiful, passing through high moorlands as it crosses the low &lt;a href=&quot;https://en.wikipedia.org/wiki/Pennines&quot;&gt;Pennine&lt;/a&gt; mountain range. Turning this corridor into a greener, lusher place wouldn’t just make the surroundings of nearby cities more attractive. In doing so, it might also attract weekend visitors away from the nearby &lt;a href=&quot;https://en.wikipedia.org/wiki/Yorkshire_Dales&quot;&gt;Yorkshire Dales&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Peak_District&quot;&gt;Peak District&lt;/a&gt;, celebrated beauty spots and national parks that can heave with people on sunny weekends. It would also serve to join up habitats for rare animals such as birds and bats. Within a few decades, a squirrel could travel from east coast to west, solely by leaping from tree to tree.&lt;/p&gt;
&lt;/div&gt;</description>
<pubDate>Wed, 10 Jan 2018 16:17:06 +0000</pubDate>
<dc:creator>edward</dc:creator>
<og:description>The plan is for 50 million new trees to repopulate one of the least wooded parts of the country—and offer a natural escape from several cities in the north.</og:description>
<og:image>https://cdn.citylab.com/media/img/citylab/2018/01/Northern_Forest-1/facebook.jpg?1515509719</og:image>
<og:title>Britain's Next Megaproject: A Coast-to-Coast Forest</og:title>
<og:type>article</og:type>
<og:url>https://www.citylab.com/environment/2018/01/northern-forest-united-kingdom/550025/</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.citylab.com/environment/2018/01/northern-forest-united-kingdom/550025/</dc:identifier>
</item>
<item>
<title>Turning web design mockups into code with Deep Learning</title>
<link>https://blog.floydhub.com/turning-design-mockups-into-code-with-deep-learning/</link>
<guid isPermaLink="true" >https://blog.floydhub.com/turning-design-mockups-into-code-with-deep-learning/</guid>
<description>&lt;p&gt;Within three years deep learning will change front-end development. It will increase prototyping speed and lower the barrier for building software.&lt;/p&gt;
&lt;p&gt;The field took off last year when Tony Beltramelli introduced the &lt;a href=&quot;https://arxiv.org/abs/1705.07962&quot;&gt;pix2code paper&lt;/a&gt; and Airbnb launched &lt;a href=&quot;https://airbnb.design/sketching-interfaces/&quot;&gt;sketch2code&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Currently, the largest barrier to automating front-end development is computing power. However, we can use current deep learning algorithms, along with synthesized training data, to start exploring artificial front-end automation right now.&lt;/p&gt;
&lt;p&gt;In this post, we’ll teach a neural network how to code a basic a HTML and CSS website based on a picture of a design mockup. Here's a quick overview of the process:&lt;/p&gt;
&lt;h3&gt;1) Give a design image to the trained neural network&lt;/h3&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/image_to_notebookfile-3354b407064e4d95a0217612a5463434-4a3e0.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;image to notebookfile&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/image_to_notebookfile-3354b407064e4d95a0217612a5463434-6c1a3.png&quot; srcset=&quot;/static/image_to_notebookfile-3354b407064e4d95a0217612a5463434-4f362.png 192w, /static/image_to_notebookfile-3354b407064e4d95a0217612a5463434-1883a.png 384w, /static/image_to_notebookfile-3354b407064e4d95a0217612a5463434-6c1a3.png 768w, /static/image_to_notebookfile-3354b407064e4d95a0217612a5463434-4a3e0.png 1043w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;h3&gt;2) The neural network converts the image into HTML markup&lt;/h3&gt;
&lt;img src=&quot;https://blog.floydhub.com/generate_html_markup-b6ceec69a7c9cfd447d188648049f2a4.gif&quot;/&gt;&lt;h3&gt;3) Rendered output&lt;/h3&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-843a4.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;render example&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-6c1a3.png&quot; srcset=&quot;/static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-4f362.png 192w, /static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-1883a.png 384w, /static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-6c1a3.png 768w, /static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-650d4.png 1152w, /static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-bbf5a.png 1536w, /static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-c6553.png 2304w, /static/render_example-4c9df7e5e8bb455c71dd7856acca7aae-843a4.png 3570w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;p&gt;We’ll build the neural network in three iterations.&lt;/p&gt;
&lt;p&gt;In the first version, we’ll make a bare minimum version to get a hang of the moving parts. The second version, HTML, will focus on automating all the steps and explaining the neural network layers. In the final version, Bootstrap, we’ll create a model that can generalize and explore the LSTM layer.&lt;/p&gt;
&lt;p&gt;All the code is prepared on &lt;a href=&quot;https://github.com/emilwallner/Screenshot-to-code-in-Keras/blob/master/README.md&quot;&gt;Github&lt;/a&gt; and &lt;a href=&quot;https://www.floydhub.com/emilwallner/projects/picturetocode&quot;&gt;FloydHub&lt;/a&gt; in Jupyter notebooks. All the FloydHub notebooks are inside the &lt;code&gt;floydhub&lt;/code&gt; directory and the local equivalents are under &lt;code&gt;local&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The models are based on Beltramelli‘s &lt;a href=&quot;https://arxiv.org/abs/1705.07962&quot;&gt;pix2code paper&lt;/a&gt; and Jason Brownlee’s &lt;a href=&quot;https://machinelearningmastery.com/blog/page/2/&quot;&gt;image caption tutorials&lt;/a&gt;. The code is written in Python and Keras, a framework on top of TensorFlow.&lt;/p&gt;
&lt;p&gt;If you’re new to deep learning, I’d recommend getting a feel for Python, backpropagation, and convolutional neural networks. My three earlier posts on FloydHub’s blog will get you started &lt;a href=&quot;https://blog.floydhub.com/my-first-weekend-of-deep-learning/&quot;&gt;[1]&lt;/a&gt; &lt;a href=&quot;https://blog.floydhub.com/coding-the-history-of-deep-learning/&quot;&gt;[2]&lt;/a&gt; &lt;a href=&quot;https://blog.floydhub.com/colorizing-b&amp;amp;w-photos-with-neural-networks/&quot;&gt;[3]&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Let’s recap our goal. We want to build a neural network that will generate HTML/CSS markup that corresponds to a screenshot.&lt;/p&gt;
&lt;p&gt;When you train the neural network, you give it several screenshots with matching HTML.&lt;/p&gt;
&lt;p&gt;It learns by predicting all the matching HTML markup tags one by one. When it predicts the next markup tag, it receives the screenshot as well as all the correct markup tags until that point.&lt;/p&gt;
&lt;p&gt;Here is a simple &lt;a href=&quot;https://docs.google.com/spreadsheets/d/1xXwarcQZAHluorveZsACtXRdmNFbwGtN3WMNhcTdEyQ/edit?usp=sharing&quot;&gt;training data example&lt;/a&gt; in a Google Sheet.&lt;/p&gt;
&lt;p&gt;Creating a model that predicts word by word is the most common approach today. There are &lt;a href=&quot;https://machinelearningmastery.com/deep-learning-caption-generation-models/&quot;&gt;other approaches&lt;/a&gt;, but that’s the method that we’ll use throughout this tutorial.&lt;/p&gt;
&lt;p&gt;Notice that for each prediction it gets the same screenshot. So if it has to predict 20 words, it will get the same design mockup twenty times. For now, don’t worry about how the neural network works. Focus on grasping the input and output of the neural network.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/neural_network_overview-82bea09299f242ad5d6e1236b9661ec6-ecc59.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;neural network overview&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/neural_network_overview-82bea09299f242ad5d6e1236b9661ec6-6c1a3.png&quot; srcset=&quot;/static/neural_network_overview-82bea09299f242ad5d6e1236b9661ec6-4f362.png 192w, /static/neural_network_overview-82bea09299f242ad5d6e1236b9661ec6-1883a.png 384w, /static/neural_network_overview-82bea09299f242ad5d6e1236b9661ec6-6c1a3.png 768w, /static/neural_network_overview-82bea09299f242ad5d6e1236b9661ec6-650d4.png 1152w, /static/neural_network_overview-82bea09299f242ad5d6e1236b9661ec6-ecc59.png 1531w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;Let’s focus on the previous markup. Say we train the network to predict the sentence “I can code”. When it receives “I”, then it predicts “can”. Next time it will receive “I can” and predict “code”. It receives all the previous words and only has to predict the next word.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/input_and_output_data-555f7b04c75a202041f0a4438af5cd51-ecc59.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;input and output data&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/input_and_output_data-555f7b04c75a202041f0a4438af5cd51-6c1a3.png&quot; srcset=&quot;/static/input_and_output_data-555f7b04c75a202041f0a4438af5cd51-4f362.png 192w, /static/input_and_output_data-555f7b04c75a202041f0a4438af5cd51-1883a.png 384w, /static/input_and_output_data-555f7b04c75a202041f0a4438af5cd51-6c1a3.png 768w, /static/input_and_output_data-555f7b04c75a202041f0a4438af5cd51-650d4.png 1152w, /static/input_and_output_data-555f7b04c75a202041f0a4438af5cd51-ecc59.png 1531w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;p&gt;From the data the neural network creates features. The neural network builds features to link the input data with the output data. It has to create representations to understand what is in each screenshot, the HTML syntax, that it has predicted. This builds the knowledge to predict the next tag.&lt;/p&gt;
&lt;p&gt;When you want to use the trained model for real-world usage, it's similar to when you train the model. The text is generated one by one with the same screenshot each time. Instead of feeding it with the correct HTML tags, it receives the markup it has generated so far. Then it predicts the next markup tag. The prediction is initiated with a &quot;start tag&quot; and stops when it predicts an “end tag” or reaches a max limit. Here's another example in &lt;a href=&quot;https://docs.google.com/spreadsheets/d/1yneocsAb_w3-ZUdhwJ1odfsxR2kr-4e_c5FabQbNJrs/edit?usp=sharing&quot;&gt;a Google Sheet&lt;/a&gt;.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/model_prediction-801ad7af1d2205276ba64fdc6d7c7ec8-ecc59.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;model prediction&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/model_prediction-801ad7af1d2205276ba64fdc6d7c7ec8-6c1a3.png&quot; srcset=&quot;/static/model_prediction-801ad7af1d2205276ba64fdc6d7c7ec8-4f362.png 192w, /static/model_prediction-801ad7af1d2205276ba64fdc6d7c7ec8-1883a.png 384w, /static/model_prediction-801ad7af1d2205276ba64fdc6d7c7ec8-6c1a3.png 768w, /static/model_prediction-801ad7af1d2205276ba64fdc6d7c7ec8-650d4.png 1152w, /static/model_prediction-801ad7af1d2205276ba64fdc6d7c7ec8-ecc59.png 1531w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;

&lt;p&gt;Let’s build a hello world version. We’ll feed a neural network a screenshot with a website displaying “Hello World!”, and teach it to generate the markup.&lt;/p&gt;
&lt;img src=&quot;https://blog.floydhub.com/hello_world_generation-039d78c27eb584fa639b89d564b94772.gif&quot;/&gt;&lt;p&gt;First, the neural network maps the design mockup into a list of pixel values. From 0 - 255 in three channels - red, blue, and green.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/website_pixels-6f11057880ea91a87ddc087c27d063a7-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;website pixels&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/website_pixels-6f11057880ea91a87ddc087c27d063a7-6c1a3.png&quot; srcset=&quot;/static/website_pixels-6f11057880ea91a87ddc087c27d063a7-4f362.png 192w, /static/website_pixels-6f11057880ea91a87ddc087c27d063a7-1883a.png 384w, /static/website_pixels-6f11057880ea91a87ddc087c27d063a7-6c1a3.png 768w, /static/website_pixels-6f11057880ea91a87ddc087c27d063a7-650d4.png 1152w, /static/website_pixels-6f11057880ea91a87ddc087c27d063a7-bbf5a.png 1536w, /static/website_pixels-6f11057880ea91a87ddc087c27d063a7-c6553.png 2304w, /static/website_pixels-6f11057880ea91a87ddc087c27d063a7-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;p&gt;To represent the markup in a way that the neural network understands, I use &lt;a href=&quot;https://machinelearningmastery.com/how-to-one-hot-encode-sequence-data-in-python/&quot;&gt;one hot encoding&lt;/a&gt;. Thus, the sentence “I can code”, could be mapped like the below.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;one hot encoding&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-6c1a3.png&quot; srcset=&quot;/static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-4f362.png 192w, /static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-1883a.png 384w, /static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-6c1a3.png 768w, /static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-650d4.png 1152w, /static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-bbf5a.png 1536w, /static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-c6553.png 2304w, /static/one_hot_encoding-2a72d2b794b26e6e4c4cc9c5f8bd4649-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;In the above graphic, we include the start and end tag. These tags are cues for when the network starts its predictions and when to stop.&lt;/p&gt;
&lt;p&gt;For the input data, we will use sentences, starting with the first word and then adding each word one by one. The output data is always one word.&lt;/p&gt;
&lt;p&gt;Sentences follow the same logic as words. They also need the same input length. Instead of being capped by the vocabulary they are bound by maximum sentence length. If it’s shorter than the maximum length, you fill it up with empty words, a word with just zeros.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;one hot sentence&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-6c1a3.png&quot; srcset=&quot;/static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-4f362.png 192w, /static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-1883a.png 384w, /static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-6c1a3.png 768w, /static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-650d4.png 1152w, /static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-bbf5a.png 1536w, /static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-c6553.png 2304w, /static/one_hot_sentence-6b3c930c8a7808b928639201cac78ebe-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;As you see, words are printed from right to left. This forces each word to change position for each training round. This allows the model to learn the sequence instead of memorizing the position of each word.&lt;/p&gt;
&lt;p&gt;In the below graphic there are four predictions. Each row is one prediction. To the left are the images represented in their three color channels: red, green and blue and the previous words. Outside of the brackets, are the predictions one by one, ending with a red square to mark the end.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;model function&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-6c1a3.png&quot; srcset=&quot;/static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-4f362.png 192w, /static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-1883a.png 384w, /static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-6c1a3.png 768w, /static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-650d4.png 1152w, /static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-bbf5a.png 1536w, /static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-c6553.png 2304w, /static/model_function-068c180c2ba3efdbb54193f21a5d5d7d-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;50&quot;&gt;
&lt;pre class=&quot;language-python&quot;&gt;
&lt;code&gt;    
    max_caption_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
    
    vocab_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;
    
    
    images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        images&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;img_to_array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;load_img&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'screenshot.jpg'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;224&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;224&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dtype&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;float&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; preprocess_input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    html_input &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    next_words &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; 
                 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
    
    
    VGG &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; VGG16&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;weights&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'imagenet'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include_top&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    features &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; VGG&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;predict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    vgg_feature &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    vgg_feature_dense &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vgg_feature&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    vgg_feature_repeat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RepeatVector&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_caption_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vgg_feature_dense&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    language_input &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vocab_size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; concatenate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vgg_feature_repeat&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language_model&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    decoder_output &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'softmax'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;inputs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;vgg_feature&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language_input&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;decoder_output&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compile&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loss&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'categorical_crossentropy'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; optimizer&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'rmsprop'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;features&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; html_input&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next_words&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; batch_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; shuffle&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; epochs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In the hello world version we use three tokens: “start”, “Hello World!&lt;/p&gt;
” and “end”. A token can be anything. It can be a character, word or sentence. Character versions require a smaller vocabulary but constrain the neural network. Word level tokens tend to perform best.
&lt;p&gt;Here we make the prediction:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;19&quot;&gt;
&lt;pre class=&quot;language-python&quot;&gt;
&lt;code&gt;    
    sentence &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;zeros&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; 
    start_token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; 
    sentence&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; start_token 
    
    
    second_word &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;predict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;features&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sentence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    sentence&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; start_token
    sentence&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;round&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;second_word&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    third_word &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;predict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;features&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sentence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    sentence&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; start_token
    sentence&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;round&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;second_word&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    sentence&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;round&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;third_word&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    vocabulary &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;HTML&amp;gt;&amp;lt;center&amp;gt;&amp;lt;H1&amp;gt;Hello World!&amp;lt;/H1&amp;gt;&amp;lt;/center&amp;gt;&amp;lt;/HTML&amp;gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;end&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; sentence&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vocabulary&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argmax&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; end&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Output&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;10 epochs:&lt;/strong&gt; &lt;code&gt;start start start&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;100 epochs:&lt;/strong&gt; &lt;code&gt;start &amp;lt;HTML&amp;gt;&amp;lt;center&amp;gt;&amp;lt;H1&amp;gt;Hello World!&amp;lt;/H1&amp;gt;&amp;lt;/center&amp;gt;&amp;lt;/HTML&amp;gt; &amp;lt;HTML&amp;gt;&amp;lt;center&amp;gt;&amp;lt;H1&amp;gt;Hello World!&amp;lt;/H1&amp;gt;&amp;lt;/center&amp;gt;&amp;lt;/HTML&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;300 epochs:&lt;/strong&gt; &lt;code&gt;start &amp;lt;HTML&amp;gt;&amp;lt;center&amp;gt;&amp;lt;H1&amp;gt;Hello World!&amp;lt;/H1&amp;gt;&amp;lt;/center&amp;gt;&amp;lt;/HTML&amp;gt; end&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3&gt;Mistakes I made:&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Build the first working version before gathering the data.&lt;/strong&gt; Early on in this project, I managed to get a copy of an old archive of the Geocities hosting website. It had 38 million websites. Blinded by the potential, I ignored the huge workload that would be required to reduce the 100K-sized vocabulary.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dealing with a terabyte worth of data requires good hardware or a lot of patience.&lt;/strong&gt; After having my mac run into several problems I ended up using a powerful remote server. Expect to rent a rig with 8 modern CPU cores and a 1GPS internet connection to have a decent workflow.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Nothing made sense until I understood the input and output data.&lt;/strong&gt; The input, X, is one screenshot and the previous markup tags. The output, Y, is the next markup tag. When I got this, it became easier to understand everything between them. It also became easier to experiment with different architectures.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Be aware of the rabbit holes.&lt;/strong&gt; Because this project intersects with a lot of fields in deep learning, I got stuck in plenty of rabbit holes along the way. I spent a week programming RNNs from scratch, got too fascinated by embedding vector spaces, and was seduced by exotic implementations.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Picture-to-code networks are image caption models in disguise.&lt;/strong&gt; Even when I learned this, I still ignored many of the image caption papers, simply because they were less cool. Once I got some perspective, I accelerated my learning of the problem space.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;Running the code on FloydHub&lt;/h2&gt;
&lt;p&gt;FloydHub is a training platform for deep learning. I came across them when I first started learning deep learning and I’ve used them since for training and managing my deep learning experiments. You can install it and run your first model within 10 minutes. It’s hands down the best option to run models on cloud GPUs.&lt;/p&gt;
&lt;p&gt;If you are new to FloydHub, do their &lt;a href=&quot;https://www.floydhub.com/&quot;&gt;2-min installation&lt;/a&gt; or &lt;a href=&quot;https://www.youtube.com/watch?v=byLQ9kgjTdQ&amp;amp;t=21s&quot;&gt;my 5-minute walkthrough.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Clone the repository&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;language-bash&quot;&gt;
&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/emilwallner/Screenshot-to-code-in-Keras.git
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Login and initiate FloydHub command-line-tool&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;language-bash&quot;&gt;
&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;cd&lt;/span&gt; Screenshot-to-code-in-Keras
floyd login
floyd init s2c
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Run a Jupyter notebook on a FloydHub cloud GPU machine:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;language-bash&quot;&gt;
&lt;code&gt;floyd run --gpu --env tensorflow-1.4 --data emilwallner/datasets/imagetocode/2:data --mode jupyter
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;All the notebooks are prepared inside the floydhub directory. The local equivalents are under local. Once it’s running, you can find the first notebook here: floydhub/Hello&lt;em&gt;world/hello&lt;/em&gt;world.ipynb .&lt;/p&gt;
&lt;p&gt;If you want more detailed instructions and an explanation for the flags, check &lt;a href=&quot;https://blog.floydhub.com/colorizing-b&amp;amp;w-photos-with-neural-networks/&quot;&gt;my earlier post&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;In this version, we’ll automate many of the steps from the Hello World model. This section will focus on creating a scalable implementation and the moving pieces in the neural network.&lt;/p&gt;
&lt;p&gt;This version will not be able to predict HTML from random websites, but it’s still a great setup to explore the dynamics of the problem.&lt;/p&gt;
&lt;img src=&quot;https://blog.floydhub.com/html_generation-2476413d4299a3a8b407ee9cdb6774b6.gif&quot;/&gt;&lt;h3&gt;Overview&lt;/h3&gt;
&lt;p&gt;If we expand the components of the previous graphic it looks like this. npm &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-2b038.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;model more details&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-6c1a3.png&quot; srcset=&quot;/static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-4f362.png 192w, /static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-1883a.png 384w, /static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-6c1a3.png 768w, /static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-650d4.png 1152w, /static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-bbf5a.png 1536w, /static/model_more_details-68db3bf26f6df205ffe4c541ace33a92-2b038.png 2267w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There are two major sections. First, the encoder. This is where we create image features and previous markup features. Features are the building blocks that the network creates to connect the design mockups with the markup. At the end of the encoder, we glue the image features to each word in the previous markup.&lt;/p&gt;
&lt;p&gt;The decoder then takes the combined design and markup feature and creates a next tag feature. This feature is run through a fully connected neural network to predict the next tag.&lt;/p&gt;
&lt;h5&gt;Design mockup features&lt;/h5&gt;
&lt;p&gt;Since we need to insert one screenshot for each word, this becomes a bottleneck when training the network (&lt;a href=&quot;https://docs.google.com/spreadsheets/d/1xXwarcQZAHluorveZsACtXRdmNFbwGtN3WMNhcTdEyQ/edit#gid=0&quot;&gt;example&lt;/a&gt;). Instead of using the images, we extract the information we need to generate the markup.&lt;/p&gt;
&lt;p&gt;The information is encoded into image features. This is done by using an already pre-trained convolutional neural network (CNN). The model is pre-trained on Imagenet.&lt;/p&gt;
&lt;p&gt;We extract the features from the layer before the final classification.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/ir2_to_image_features-5455a0516284ac036482417b56a57d49-d5626.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;ir2 to image features&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/ir2_to_image_features-5455a0516284ac036482417b56a57d49-6c1a3.png&quot; srcset=&quot;/static/ir2_to_image_features-5455a0516284ac036482417b56a57d49-4f362.png 192w, /static/ir2_to_image_features-5455a0516284ac036482417b56a57d49-1883a.png 384w, /static/ir2_to_image_features-5455a0516284ac036482417b56a57d49-6c1a3.png 768w, /static/ir2_to_image_features-5455a0516284ac036482417b56a57d49-650d4.png 1152w, /static/ir2_to_image_features-5455a0516284ac036482417b56a57d49-d5626.png 1159w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;p&gt;We end up with 1536 eight by eight pixel images known as features. Although they are hard to understand for us, a neural network can extract the objects and position of the elements from these features.&lt;/p&gt;
&lt;h5&gt;Markup features&lt;/h5&gt;
&lt;p&gt;In the hello world version we used a one-hot encoding to represent the markup. In this version, we’ll use a word embedding for the input and keep the one-hot encoding for the output.&lt;/p&gt;
&lt;p&gt;The way we structure each sentence stays the same, but how we map each token is changed. One-hot encoding treats each word as an isolated unit. Instead, we convert each word in the input data to lists of digits. These represent the relationship between the markup tags.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/embedding-2146c151fd4dbf5dcce6257444931a79-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;embedding&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/embedding-2146c151fd4dbf5dcce6257444931a79-6c1a3.png&quot; srcset=&quot;/static/embedding-2146c151fd4dbf5dcce6257444931a79-4f362.png 192w, /static/embedding-2146c151fd4dbf5dcce6257444931a79-1883a.png 384w, /static/embedding-2146c151fd4dbf5dcce6257444931a79-6c1a3.png 768w, /static/embedding-2146c151fd4dbf5dcce6257444931a79-650d4.png 1152w, /static/embedding-2146c151fd4dbf5dcce6257444931a79-bbf5a.png 1536w, /static/embedding-2146c151fd4dbf5dcce6257444931a79-c6553.png 2304w, /static/embedding-2146c151fd4dbf5dcce6257444931a79-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;The dimension of this word embedding is eight but often vary between 50 - 500 depending on the size of the vocabulary.&lt;/p&gt;
&lt;p&gt;The eight digits for each word are weights similar to a vanilla neural network. They are tuned to map how the words relate to each other (&lt;a href=&quot;https://arxiv.org/abs/1301.3781&quot;&gt;Mikolov alt el., 2013&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;This is how we start developing markup features. Features are what the neural network develop to link the input data with the output data. For now, don’t worry about what they are, we’ll dig deeper into this in the next section.&lt;/p&gt;
&lt;h3&gt;The Encoder&lt;/h3&gt;
&lt;p&gt;We’ll take the word embeddings and run them through an LSTM and return a sequence of markup features. These are run through a Time distributed dense layer - think of it as a dense layer with multiple inputs and outputs.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/encoder-78498407f393e83128abed5eec86dd4c-524bf.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;encoder&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/encoder-78498407f393e83128abed5eec86dd4c-6c1a3.png&quot; srcset=&quot;/static/encoder-78498407f393e83128abed5eec86dd4c-4f362.png 192w, /static/encoder-78498407f393e83128abed5eec86dd4c-1883a.png 384w, /static/encoder-78498407f393e83128abed5eec86dd4c-6c1a3.png 768w, /static/encoder-78498407f393e83128abed5eec86dd4c-650d4.png 1152w, /static/encoder-78498407f393e83128abed5eec86dd4c-bbf5a.png 1536w, /static/encoder-78498407f393e83128abed5eec86dd4c-524bf.png 1561w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;In parallel, the image features are first flattened. Regardless of how the digits where structured they are transformed into one large list of numbers. Then we apply a dense layer on this layer to form a high-level features. These image features are then concatenated to the markup features.&lt;/p&gt;
&lt;p&gt;This can be hard to wrap your mind around - so let’s break it down.&lt;/p&gt;
&lt;h5&gt;Markup features&lt;/h5&gt;
&lt;p&gt;Here we run the word embeddings through the LSTM layer. In this graphic, all the sentences are padded to reach the maximum size of three tokens.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-f669c.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;word embedding markup feature&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-6c1a3.png&quot; srcset=&quot;/static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-4f362.png 192w, /static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-1883a.png 384w, /static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-6c1a3.png 768w, /static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-650d4.png 1152w, /static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-bbf5a.png 1536w, /static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-c6553.png 2304w, /static/word_embedding_markup_feature-d4e76483527fefd10742c0ddc1cd3227-f669c.png 2637w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;To mix signals and find higher-level patterns we apply a TimeDistributed dense layer to the markup features. TimeDistributed dense is the same as a dense layer but with multiple inputs and outputs.&lt;/p&gt;
&lt;h5&gt;Image features&lt;/h5&gt;
&lt;p&gt;In parallel, we prepare the images. We take all the mini image features and transform them into one long list. The information is not changed, just reorganized.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-78710.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;image feature to image feature&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-6c1a3.png&quot; srcset=&quot;/static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-4f362.png 192w, /static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-1883a.png 384w, /static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-6c1a3.png 768w, /static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-650d4.png 1152w, /static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-bbf5a.png 1536w, /static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-c6553.png 2304w, /static/image_feature_to_image_feature-77a1cf39ed251d4243b90325e60fbdf5-78710.png 2384w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;Again, to mix signals and extract higher level notions, we apply a dense layer. Since we are only dealing with one input value, we can use a normal dense layer. To connect the image features to the markup features, we copy the image features.&lt;/p&gt;
&lt;p&gt;In this case, we have three markup features. Thus, we end up with an equal amount of image features and markup features.&lt;/p&gt;
&lt;h5&gt;Concatenating the image and markup features&lt;/h5&gt;
&lt;p&gt;All the sentences are padded to create three markup features. Since we have prepared the image features, we can now add one image feature for each markup feature.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/concatenate-747c07d8c62a2e026212d20860514188-78710.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;concatenate&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/concatenate-747c07d8c62a2e026212d20860514188-6c1a3.png&quot; srcset=&quot;/static/concatenate-747c07d8c62a2e026212d20860514188-4f362.png 192w, /static/concatenate-747c07d8c62a2e026212d20860514188-1883a.png 384w, /static/concatenate-747c07d8c62a2e026212d20860514188-6c1a3.png 768w, /static/concatenate-747c07d8c62a2e026212d20860514188-650d4.png 1152w, /static/concatenate-747c07d8c62a2e026212d20860514188-bbf5a.png 1536w, /static/concatenate-747c07d8c62a2e026212d20860514188-c6553.png 2304w, /static/concatenate-747c07d8c62a2e026212d20860514188-78710.png 2384w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;After sticking one image feature to each markup feature, we end up with three image-markup features. This is the input we feed into the decoder.&lt;/p&gt;
&lt;h3&gt;The Decoder&lt;/h3&gt;
&lt;p&gt;Here we use the combined image-markup features to predict the next tag.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/decoder-1592aedab9a95e07a513234aa258d777-524bf.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;decoder&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/decoder-1592aedab9a95e07a513234aa258d777-6c1a3.png&quot; srcset=&quot;/static/decoder-1592aedab9a95e07a513234aa258d777-4f362.png 192w, /static/decoder-1592aedab9a95e07a513234aa258d777-1883a.png 384w, /static/decoder-1592aedab9a95e07a513234aa258d777-6c1a3.png 768w, /static/decoder-1592aedab9a95e07a513234aa258d777-650d4.png 1152w, /static/decoder-1592aedab9a95e07a513234aa258d777-bbf5a.png 1536w, /static/decoder-1592aedab9a95e07a513234aa258d777-524bf.png 1561w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;In the below example, we use three image-markup feature pairs and output one next tag feature.&lt;/p&gt;
&lt;p&gt;Note that the LSTM layer has the sequence set to false. Instead of returning the length of the input sequence it only predicts one feature. In our case, it’s a feature for the next tag. It contains the information for the final prediction.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-99852.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;image markup feature to vocab&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-6c1a3.png&quot; srcset=&quot;/static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-4f362.png 192w, /static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-1883a.png 384w, /static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-6c1a3.png 768w, /static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-650d4.png 1152w, /static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-bbf5a.png 1536w, /static/image-markup-feature_to_vocab-eb39368b3f466914c9383d532675a622-99852.png 2200w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;h5&gt;The final prediction&lt;/h5&gt;
&lt;p&gt;The dense layer works like a traditional feedforward neural network. It connects the 512 digits in the next tag feature with the 4 final predictions. Say we have 4 words in our vocabulary: start, hello, world, and end.&lt;/p&gt;
&lt;p&gt;The vocabulary prediction could be [0.1, 0.1, 0.1, 0.7]. The softmax activation in the dense layer distributes a probability from 0 - 1, with the sum of all predictions equal to 1. In this case, it predicts that the 4th word is the next tag. Then you translate the one-hot encoding [0, 0, 0, 1] into the mapped value, say “end”.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;68&quot;&gt;
&lt;pre class=&quot;language-python&quot;&gt;
&lt;code&gt;    
    images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    all_filenames &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; listdir&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'images/'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    all_filenames&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sort&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; filename &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; all_filenames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        images&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;img_to_array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;load_img&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'images/'&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;299&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;299&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dtype&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;float&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; preprocess_input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    IR2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; InceptionResNetV2&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;weights&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'imagenet'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; include_top&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    features &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; IR2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;predict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    
    max_caption_len &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;
    
    tokenizer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Tokenizer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filters&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; split&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lower&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;load_doc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        file &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; open&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; text
    
    
    X &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    all_filenames &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; listdir&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'html/'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    all_filenames&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sort&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; filename &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; all_filenames&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        X&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;load_doc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'html/'&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fit_on_texts&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;X&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    vocab_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; len&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;word_index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
    
    sequences &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;texts_to_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;X&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    max_length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; max&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;len&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; s &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; sequences&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    X&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; image_data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; img_no&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; seq &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; enumerate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sequences&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; len&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            
            in_seq&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; out_seq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; seq&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; seq&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            
            in_seq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pad_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;in_seq&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; maxlen&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            
            out_seq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; to_categorical&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;out_seq&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num_classes&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            
            image_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;features&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;img_no&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            X&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;in_seq&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            y&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;out_seq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    X&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; image_data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;X&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    image_features &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1536&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_flat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Flatten&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image_features&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_flat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image_flat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    ir2_out &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RepeatVector&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_caption_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image_flat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    language_input &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_caption_len&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Embedding&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; input_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_caption_len&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; TimeDistributed&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; concatenate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;ir2_out&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language_model&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    decoder_output &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'softmax'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;inputs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;image_features&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language_input&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;decoder_output&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compile&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loss&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'categorical_crossentropy'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; optimizer&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'rmsprop'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;image_data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; X&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; batch_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; shuffle&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; epochs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;word_for_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; word&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;word_index&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; word
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; None
    
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;generate_desc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; photo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        
        in_text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'START'&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;900&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            
            sequence &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;texts_to_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;in_text&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            
            sequence &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pad_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;sequence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; maxlen&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            yhat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;predict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;photo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;sequence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            yhat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argmax&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;yhat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            word &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; word_for_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;yhat&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; word &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; None&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
            
            in_text &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' '&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; word
            
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;' '&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; word&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; end&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; word &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'END'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
    
    
    test_image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; img_to_array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;load_img&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'images/87.jpg'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;299&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;299&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    test_image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;test_image&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dtype&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;float&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    test_image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; preprocess_input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;test_image&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    test_features &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; IR2&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;predict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;test_image&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    generate_desc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;test_features&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Output&lt;/h3&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;html output&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-6c1a3.png&quot; srcset=&quot;/static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-4f362.png 192w, /static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-1883a.png 384w, /static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-6c1a3.png 768w, /static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-650d4.png 1152w, /static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-bbf5a.png 1536w, /static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-c6553.png 2304w, /static/html_output-ba7571455ed0209f2d98b2cd1f94b9df-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;h4&gt;Links to generated websites&lt;/h4&gt;
&lt;p&gt;If you can’t see anything when you click these links, you can right click and click on ‘View Page Source’. Here is the &lt;a href=&quot;https://emilwallner.github.io/html/Original/&quot;&gt;original website&lt;/a&gt; for reference.&lt;/p&gt;
&lt;h3&gt;Mistakes I made:&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;LSTMs are a lot heavier for my cognition compared to CNNs&lt;/strong&gt;. When I unrolled all the LSTMs they became easier to understand. &lt;a href=&quot;http://course.fast.ai/lessons/lesson6.html&quot;&gt;Fast.ai’s video on RNNs&lt;/a&gt; was super useful. Also, focus on the input and output features before you try understanding how they work.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Building a vocabulary from the ground up is a lot easier than narrowing down a huge vocabulary.&lt;/strong&gt; This includes everything from fonts, div sizes, hex colors to variable names and normal words.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Most of the libraries are created to parse text documents and not code.&lt;/strong&gt; In documents, everything is separated by a space, but in code, you need custom parsing.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;You can extract features with a model that’s trained on Imagenet.&lt;/strong&gt; This might seem counterintuitive since Imagenet has few web images. However, the loss is 30% higher compared to to a pix2code model, which is trained from scratch. I’d be interesting to use a pre-train inception-resnet type of model based on web screenshots.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In our final version, we’ll use a dataset of generated bootstrap websites from the &lt;a href=&quot;https://arxiv.org/abs/1705.07962&quot;&gt;pix2code paper.&lt;/a&gt; By using Twitter’s &lt;a href=&quot;https://getbootstrap.com/&quot;&gt;bootstrap&lt;/a&gt;, we can combine HTML and CSS and decrease the size of the vocabulary.&lt;/p&gt;
&lt;p&gt;We’ll enable it to generate the markup for a screenshot it has not seen before. We’ll also dig into how it builds knowledge about the screenshot and markup.&lt;/p&gt;
&lt;p&gt;Instead of training it on the bootstrap markup, we’ll use 17 simplified tokens that we then translate into HTML and CSS. &lt;a href=&quot;https://github.com/tonybeltramelli/pix2code/tree/master/datasets&quot;&gt;The dataset&lt;/a&gt; includes 1500 test screenshots and 250 validation images. For each screenshot there are on average 65 tokens, resulting in 96925 training examples.&lt;/p&gt;
&lt;p&gt;By tweaking the model in the pix2code paper, the model can predict the web components with 97% accuracy (BLEU 4-ngram greedy search, more on this later).&lt;/p&gt;
&lt;img src=&quot;https://blog.floydhub.com/bootstrap_overview-99e7deb3c036ab6d5def0ab33f2e4d69.gif&quot;/&gt;&lt;h4&gt;An end-to-end approach&lt;/h4&gt;
&lt;p&gt;Extracting features from pre-trained models works well in image captioning models. But after a few experiments, I realized that pix2code’s end-to-end approach works better for this problem. The pre-trained models have not been trained on web data and are customized for classification.&lt;/p&gt;
&lt;p&gt;In this model, we replace the pre-trained image features with a light convolutional neural network. Instead of using max-pooling to increase information density, we increase the strides. This maintains the position and the color of the front-end elements.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-2b038.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;model more detail alone&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-6c1a3.png&quot; srcset=&quot;/static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-4f362.png 192w, /static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-1883a.png 384w, /static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-6c1a3.png 768w, /static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-650d4.png 1152w, /static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-bbf5a.png 1536w, /static/model_more_detail_alone-bfbf97a5ec65ff255f35a8e3cd2069e0-2b038.png 2267w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;There are two core models that enable this: convolutional neural networks (CNN) and recurrent neural networks (RNN). The most common recurrent neural network is long-short term memory (LSTM), so that’s what I’ll refer to.&lt;/p&gt;
&lt;p&gt;There are plenty of great CNN tutorials and I covered them in &lt;a href=&quot;https://blog.floydhub.com/colorizing-b&amp;amp;w-photos-with-neural-networks/&quot;&gt;my previous article&lt;/a&gt;. Here, I’ll focus on the LSTMs.&lt;/p&gt;
&lt;h4&gt;Understanding timesteps in LSTMs&lt;/h4&gt;
&lt;p&gt;One of the harder things to grasp about LSTMs is timesteps. A vanilla neural network can be thought of as two timesteps. If you give it “Hello”, it predicts “World”. But it would struggle to predict more timesteps. In the below example, the input has four timesteps, one for each word.&lt;/p&gt;
&lt;p&gt;LSTMs are made for input with timesteps. It’s a neural network customized for information in order. If you unroll our model it looks like this. For each downward step, you keep the same weights. You apply one set of weights to the previous output and another set to the new input.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;lstm timesteps&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-6c1a3.png&quot; srcset=&quot;/static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-4f362.png 192w, /static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-1883a.png 384w, /static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-6c1a3.png 768w, /static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-650d4.png 1152w, /static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-bbf5a.png 1536w, /static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-c6553.png 2304w, /static/lstm_timesteps-51b6eece9c5e6abe2cc16b0dcac6eb53-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;p&gt;The weighted input and output are concatenated and added together with an activation. This is the output for that timestep. Since we reuse the weights, they draw information from several inputs and build knowledge of the sequence.&lt;/p&gt;
&lt;p&gt;Here is a simplified version of the process for each timestep in an LSTM.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;rnn example&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-6c1a3.png&quot; srcset=&quot;/static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-4f362.png 192w, /static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-1883a.png 384w, /static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-6c1a3.png 768w, /static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-650d4.png 1152w, /static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-bbf5a.png 1536w, /static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-c6553.png 2304w, /static/rnn_example-385ca1843bf3d88e93eec3294fcbb13c-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;To get a feel for this logic, I’d recommend building an RNN from scratch with Andrew Trask’s &lt;a href=&quot;https://iamtrask.github.io/2015/11/15/anyone-can-code-lstm/&quot;&gt;brilliant tutorial&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;Understanding the units in LSTM layers&lt;/h4&gt;
&lt;p&gt;The amount of units in each LSTM layer determines it’s ability to memorize. This also corresponds to the size of each output feature. Again, a feature is a long list of numbers used to transfer information between layers.&lt;/p&gt;
&lt;p&gt;Each unit in the LSTM layer learns to keep track of different aspects of the syntax. Below is a visualization of a unit that keeps tracks of the information in the row div. This is the simplified markup we are using to train the bootstrap model.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;lstm cell activation&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-6c1a3.png&quot; srcset=&quot;/static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-4f362.png 192w, /static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-1883a.png 384w, /static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-6c1a3.png 768w, /static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-650d4.png 1152w, /static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-bbf5a.png 1536w, /static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-c6553.png 2304w, /static/lstm_cell_activation-1a1842b595ea638407a7389e26aa699b-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;Each LSTM unit maintains a cell state. Think of the cell state as the memory. The weights and activations are used to modify the state in different ways. This enables the LSTM layers to fine tune which information to keep and discard for each input.&lt;/p&gt;
&lt;p&gt;In addition to passing through an output feature for each input it also forwards the cell states, one value for each unit in the LSTM. To get a feel for how the components within the LSTM interacts, I recommend &lt;a href=&quot;https://colah.github.io/posts/2015-08-Understanding-LSTMs/&quot;&gt;Colah’s tutorial&lt;/a&gt;, Jayasiri’s &lt;a href=&quot;http://blog.varunajayasiri.com/numpy_lstm.html&quot;&gt;Numpy implementation&lt;/a&gt;, and &lt;a href=&quot;https://www.youtube.com/watch?v=yCC09vCHzF8&quot;&gt;Karphay’s lecture&lt;/a&gt; and &lt;a href=&quot;https://karpathy.github.io/2015/05/21/rnn-effectiveness/&quot;&gt;write-up.&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;101&quot;&gt;
&lt;pre class=&quot;language-python&quot;&gt;
&lt;code&gt;    dir_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'resources/eval_light/'&lt;/span&gt;
    
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;load_doc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        file &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; open&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; text
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;load_data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        
        all_filenames &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; listdir&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        all_filenames&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sort&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; filename &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;all_filenames&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; filename&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;npz&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                
                image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                images&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'features'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                
                syntax &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&amp;lt;START&amp;gt; '&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; load_doc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' &amp;lt;END&amp;gt;'&lt;/span&gt;
                
                syntax &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;syntax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                
                syntax &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; syntax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' ,'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                text&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;syntax&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dtype&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;float&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; images&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text
    
    train_features&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; texts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; load_data&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dir_name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    tokenizer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Tokenizer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filters&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; split&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lower&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fit_on_texts&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;load_doc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'bootstrap.vocab'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    vocab_size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; len&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;word_index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;
    
    train_sequences &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;texts_to_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;texts&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    max_sequence &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; max&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;len&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;s&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; s &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; train_sequences&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    max_length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;48&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;preprocess_data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sequences&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; features&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        X&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; image_data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; img_no&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; seq &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; enumerate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sequences&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; len&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;seq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                
                in_seq&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; out_seq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; seq&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; seq&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                
                in_seq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pad_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;in_seq&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; maxlen&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_sequence&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                
                out_seq &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; to_categorical&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;out_seq&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; num_classes&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
                
                image_data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;features&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;img_no&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                
                X&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;in_seq&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;48&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                y&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;out_seq&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;X&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    X&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; image_data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; preprocess_data&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;train_sequences&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; train_features&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    image_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Sequential&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Conv2D&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; padding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'valid'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; input_shape&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Conv2D&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; padding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'same'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; strides&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Conv2D&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; padding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'same'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Conv2D&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;32&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; padding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'same'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; strides&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Conv2D&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; padding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'same'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Conv2D&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; padding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'same'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; strides&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Conv2D&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; padding&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'same'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Flatten&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dropout&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1024&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'relu'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dropout&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    image_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;add&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;RepeatVector&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    visual_input &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;256&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    encoded_image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; image_model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;visual_input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    language_input &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Input&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;max_length&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Embedding&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; input_length&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_length&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; mask_zero&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    language_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;128&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;language_model&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; concatenate&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;encoded_image&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language_model&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; LSTM&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;512&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; return_sequences&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    decoder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Dense&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vocab_size&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; activation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'softmax'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;inputs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;visual_input&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language_input&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; outputs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;decoder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    optimizer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; RMSprop&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lr&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.0001&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; clipvalue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compile&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loss&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'categorical_crossentropy'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; optimizer&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;optimizer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    filepath&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;org-weights-epoch-{epoch:04d}--val_loss-{val_loss:.4f}--loss-{loss:.4f}.hdf5&quot;&lt;/span&gt;
    checkpoint &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ModelCheckpoint&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filepath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; monitor&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'val_loss'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; save_weights_only&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; period&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    callbacks_list &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;checkpoint&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
    
    
    model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fit&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;image_data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; X&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; batch_size&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; shuffle&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; validation_split&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; callbacks&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;callbacks_list&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; epochs&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Test accuracy&lt;/h3&gt;
&lt;p&gt;It’s tricky to find a fair way to measure the accuracy. Say you compare word by word. If your prediction is one word out of sync, you might have 0% accuracy. If you remove one word which syncs the prediction, you might end up with 99/100.&lt;/p&gt;
&lt;p&gt;I used the BLEU score, best practice in machine translating and image captioning models. It breaks the sentence into four n-grams, from 1-4 word sequences. In the below prediction “cat” is supposed to be “code”.&lt;/p&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-ef96e.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;bleu score&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-6c1a3.png&quot; srcset=&quot;/static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-4f362.png 192w, /static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-1883a.png 384w, /static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-6c1a3.png 768w, /static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-650d4.png 1152w, /static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-bbf5a.png 1536w, /static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-c6553.png 2304w, /static/bleu_score-741cd6ede6d32df1de54a6d8dd41c530-ef96e.png 3840w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;p&gt;To get the final score you multiply each score with 25%, (4/5) * 0.25 + (2/4) * 0.25 + (1/3) * 0.25 + (0/2) * 0.25 = 0.2 + 0.125 + 0.083 + 0 = 0.408 . The sum is then multiplied with a sentence length penalty. Since the length is correct in our example, it becomes our final score.&lt;/p&gt;
&lt;p&gt;You could increase the number of n-grams to make it harder. A four n-gram model is the model that best corresponds to human translations. I’d recommend running a few examples with the below code and reading the &lt;a href=&quot;https://en.wikipedia.org/wiki/BLEU&quot;&gt;wiki page.&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; readability=&quot;51&quot;&gt;
&lt;pre class=&quot;language-python&quot;&gt;
&lt;code&gt;    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;load_doc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        file &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; open&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; text
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;load_data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
        files_in_folder &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; os&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;listdir&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        files_in_folder&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sort&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; filename &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; tqdm&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;files_in_folder&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; filename&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;npz&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                image &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                images&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'features'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            
                syntax &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&amp;lt;START&amp;gt; '&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; load_doc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data_dir&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;filename&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' &amp;lt;END&amp;gt;'&lt;/span&gt;
                
                syntax &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;join&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;syntax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                
                syntax &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; syntax&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;replace&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;','&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' ,'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
                text&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;syntax&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        images &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;images&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dtype&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;float&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; images&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; text
    
    
    tokenizer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Tokenizer&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;filters&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; split&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot; &quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; lower&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fit_on_texts&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;load_doc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'bootstrap.vocab'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    dir_name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'../../../../eval/'&lt;/span&gt;
    train_features&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; texts &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; load_data&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dir_name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    json_file &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; open&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'../../../../model.json'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'r'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    loaded_model_json &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; json_file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;read&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    json_file&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    loaded_model &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; model_from_json&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loaded_model_json&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    loaded_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;load_weights&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;../../../../weights.hdf5&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Loaded model from disk&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;word_for_id&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;integer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; word&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; index &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;word_index&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; integer&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; word
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; None
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;word_for_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;generate_desc&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; photo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        photo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; np&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;photo&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
        in_text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&amp;lt;START&amp;gt; '&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'\nPrediction----&amp;gt;\n\n&amp;lt;START&amp;gt; '&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; end&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            
            sequence &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;texts_to_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;in_text&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
            
            sequence &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; pad_sequences&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;sequence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; maxlen&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            yhat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; loaded_model&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;predict&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;photo&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sequence&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; verbose&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            yhat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; argmax&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;yhat&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            word &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; word_for_id&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;yhat&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; word &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; None&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
            
            in_text &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; word &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' '&lt;/span&gt;
            
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;word &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; end&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; word &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'&amp;lt;END&amp;gt;'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; in_text
        
    
    max_length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;48&lt;/span&gt; 
    
    
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;evaluate_model&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; descriptions&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; photos&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        actual&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; predicted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; list&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
        &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; i &lt;span class=&quot;token keyword&quot;&gt;in&lt;/span&gt; range&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;len&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;texts&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
            yhat &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; generate_desc&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; photos&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            
            &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;'\n\nReal----&amp;gt;\n\n'&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; texts&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            actual&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;texts&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
            predicted&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;append&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;yhat&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;split&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        
        bleu &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; corpus_bleu&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;actual&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; predicted&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; bleu&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actual&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; predicted
    
    bleu&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; actual&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; predicted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; evaluate_model&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;loaded_model&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; texts&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; train_features&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; tokenizer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; max_length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    
    dsl_path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;compiler/assets/web-dsl-mapping.json&quot;&lt;/span&gt;
    compiler &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Compiler&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dsl_path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    compiled_website &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; compiler&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;compile&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;predicted&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;'index.html'&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;compiled_website &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;bleu&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;Output&lt;/h3&gt;
&lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;https://blog.floydhub.com/static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-1b912.png&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot;&gt;&lt;span class=&quot;gatsby-resp-image-background-image&quot;&gt;&lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;bootstrap output&quot; title=&quot;&quot; src=&quot;https://blog.floydhub.com/static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-6c1a3.png&quot; srcset=&quot;/static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-4f362.png 192w, /static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-1883a.png 384w, /static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-6c1a3.png 768w, /static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-650d4.png 1152w, /static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-bbf5a.png 1536w, /static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-c6553.png 2304w, /static/bootstrap_output-8a1b036ddc436e20453b7c2962b0fa85-1b912.png 3188w&quot; sizes=&quot;(max-width: 768px) 100vw, 768px&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;
&lt;h5&gt;Links to sample output&lt;/h5&gt;
&lt;h3&gt;Mistakes I made:&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Understand the weakness of the models instead of testing random models.&lt;/strong&gt; First I applied random things such as batch normalization, bidirectional networks and tried implementing attention. After looking at the test data and seeing that it could not predict color and position with high accuracy I realized there was a weakness in the CNN. This lead me to replace maxpooling with increased strides. The validation loss went from 0.12 to 0.02 and increased the BLEU score from 85% to 97%.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Only use pre-trained models if they are relevant.&lt;/strong&gt; Given the small dataset I thought that a pre-trained image model would improve the performance. From my experiments, and end-to-end model is slower to train and requires more memory, but is 30% more accurate.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Plan for slight variance when you run your model on a remote server.&lt;/strong&gt; On my mac, it read the files in alphabetic order. However, on the server, it was randomly located. This created a mismatch between the screenshots and the code. It still converged, but was the validation data was 50% worse than when I fixed it.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Make sure you understand library functions.&lt;/strong&gt; Include space for the empty token in your vocabulary. When I didn’t add it, it did not include one of the tokens. I only noticed it after looking at the final output several times and noticing that it never predicted a “single” token. After a quick check, I realized it wasn’t even in the vocabulary. Also, use the same order in the vocabulary for training and testing.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Use lighter models when experimenting.&lt;/strong&gt; Using GRUs instead of LSTMs reduced each epoch cycle by 30%, and did not have a large effect on the performance.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;Next steps&lt;/h2&gt;
&lt;p&gt;Front-end development is an ideal space to apply deep learning. It’s easy to generate data and the current deep learning algorithms can map most of the logic.&lt;/p&gt;
&lt;p&gt;One of the most exciting areas is &lt;a href=&quot;https://arxiv.org/pdf/1502.03044.pdf&quot;&gt;applying attention to LSTMs&lt;/a&gt;. This will not just improve the accuracy, but enable us to visualize where the CNN puts its focus as it generates the markup.&lt;/p&gt;
&lt;p&gt;Attention is also key for communicating between markup, stylesheets, scripts and eventually the backend. Attention layers can keep track of variables, enabling the network to communicate between programming languages.&lt;/p&gt;
&lt;p&gt;But in the near feature, the biggest impact will come from building a scalable way to synthesize data. Then you can add fonts, colors, words, and animations step-by-step.&lt;/p&gt;
&lt;p&gt;So far, most progress is happening in taking sketches and turning them into template apps. In less then two years, we’ll be able to draw an app on paper and have the corresponding front-end in less than a second. There are already two working prototypes built by &lt;a href=&quot;https://airbnb.design/sketching-interfaces/&quot;&gt;Airbnb’s design team&lt;/a&gt; and &lt;a href=&quot;https://www.uizard.io/&quot;&gt;Uizard&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here are some experiments to get started.&lt;/p&gt;
&lt;h2&gt;Experiments&lt;/h2&gt;
&lt;h5&gt;Getting started&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;Run all the models&lt;/li&gt;
&lt;li&gt;Try different hyper parameters&lt;/li&gt;
&lt;li&gt;Test a different CNN architecture&lt;/li&gt;
&lt;li&gt;Add Bidirectional LSTM models&lt;/li&gt;
&lt;li&gt;Implement the model with a &lt;a href=&quot;http://lstm.seas.harvard.edu/latex/&quot;&gt;different dataset&lt;/a&gt;. (You can easily mount this dataset in your FloydHub jobs with this flag &lt;code&gt;--data emilwallner/datasets/100k-html:data&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;&lt;h5&gt;Further experiments&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;Creating a solid random app/web generator with the corresponding syntax.&lt;/li&gt;
&lt;li&gt;Data for a sketch to app model. Auto-convert the app/web screenshots into sketches and use a GAN to create variety.&lt;/li&gt;
&lt;li&gt;Apply an attention layer to visualize the focus on the image for each prediction, &lt;a href=&quot;https://arxiv.org/abs/1502.03044&quot;&gt;similar to this model&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Create a framework for a modular approach. Say, having encoder models for fonts, one for color, another for layout and combine them with one decoder. A good start could be solid image features.&lt;/li&gt;
&lt;li&gt;Feed the network simple HTML components and teach it to generate animations using CSS. It would be fascinating to have an attention approach and visualize the focus on both input sources.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;Huge thanks to&lt;/strong&gt; Tony Beltramelli and Jon Gold for answering questions, their research, and all their ideas. Thanks to Jason Brownlee for his stellar Keras tutorials, I included a few snippets from his tutorial in the core Keras implementation, and Beltramelli for providing the data. Also thanks to Qingping Hou, Charlie Harrington, Sai Soundararaj, Jannes Klaas, Claudio Cabral, Alain Demenet and Dylan Djian for reading drafts of this.&lt;/p&gt;
&lt;hr/&gt;&lt;h2&gt;About Emil Wallner&lt;/h2&gt;
&lt;p&gt;This the fourth part of a multi-part blog series from Emil as he learns deep learning. Emil has spent a decade exploring human learning. He's worked for Oxford's business school, invested in education startups, and built an education technology business. Last year, he enrolled at &lt;a href=&quot;https://twitter.com/paulg/status/847844863727087616&quot;&gt;Ecole 42&lt;/a&gt; to apply his knowledge of human learning to machine learning.&lt;/p&gt;
&lt;p&gt;You can follow along with Emil on &lt;a href=&quot;https://twitter.com/EmilWallner&quot;&gt;Twitter&lt;/a&gt; and &lt;a href=&quot;https://medium.com/@emilwallner&quot;&gt;Medium&lt;/a&gt;.&lt;/p&gt;
</description>
<pubDate>Wed, 10 Jan 2018 15:03:42 +0000</pubDate>
<dc:creator>narenst</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.floydhub.com/turning-design-mockups-into-code-with-deep-learning/</dc:identifier>
</item>
<item>
<title>North Carolina Is Ordered to Redraw Its Congressional Map</title>
<link>https://www.nytimes.com/2018/01/09/us/north-carolina-gerrymander.html?_r=0</link>
<guid isPermaLink="true" >https://www.nytimes.com/2018/01/09/us/north-carolina-gerrymander.html?_r=0</guid>
<description>&lt;div&gt;
&lt;div id=&quot;top-wrapper&quot; class=&quot;ResponsiveAd-topAd--3uZAv&quot;&gt;
&lt;div id=&quot;top-slug&quot; class=&quot;ResponsiveAd-hide--3eu5-&quot;&gt;
&lt;p&gt;Advertisement&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;

&lt;/div&gt;&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;A panel of federal judges struck down North Carolina’s congressional map on Tuesday, condemning it as unconstitutional because Republicans had drawn the map seeking a political advantage.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;The ruling was the first time that a federal court had blocked a congressional map because of a partisan gerrymander, and it instantly endangered Republican seats in the coming elections.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;Judge James A. Wynn Jr., in a biting 191-page opinion, said that Republicans in North Carolina’s Legislature had been “motivated by invidious partisan intent” as they carried out their obligation in 2016 to divide the state into 13 congressional districts, 10 of which are held by Republicans. The result, Judge Wynn wrote, violated the 14th Amendment’s guarantee of equal protection.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;The ruling and its chief demand — that the Republican-dominated Legislature create a new landscape of congressional districts by Jan. 24 — infused new turmoil into the political chaos that has in recent years enveloped North Carolina. President Trump carried North Carolina in 2016, but the state elected a Democrat as its governor on the same day and in 2008 supported President Barack Obama.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;The unusually blunt decision by the panel could lend momentum to two other challenges on gerrymandering that are already before the Supreme Court — and that the North Carolina case could join if Republicans make good on their vow to appeal Tuesday’s ruling.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;In October, the &lt;a rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot; href=&quot;https://www.nytimes.com/2017/10/03/us/politics/gerrymandering-supreme-court-wisconsin.html&quot; title=&quot;&quot; class=&quot;styles-link--1Tap3&quot;&gt;court heard an appeal&lt;/a&gt; of another three-judge panel’s ruling that Republicans had unconstitutionally gerrymandered Wisconsin’s State Assembly in an attempt to relegate Democrats to a permanent minority. &lt;a rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot; href=&quot;https://www.nytimes.com/2017/12/08/us/politics/supreme-court-partisan-gerrymandering.html&quot; title=&quot;&quot; class=&quot;styles-link--1Tap3&quot;&gt;In the second case&lt;/a&gt;, the justices will hear arguments by Maryland Republicans that the Democratic-controlled Legislature redrew House districts to flip a Republican-held seat to Democratic control.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;The Supreme Court has &lt;a rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot; href=&quot;https://www.nytimes.com/2017/10/01/us/wisconsin-supreme-court-gerrymander.html&quot; title=&quot;&quot; class=&quot;styles-link--1Tap3&quot;&gt;struggled without success&lt;/a&gt; for decades to develop a legal standard for determining when a partisan gerrymander crosses constitutional lines. The court once came close to ruling that such cases were political matters beyond its jurisdiction. But the rise of extreme partisan gerrymanders in the last decade, powered by a growing ideological divide and powerful map-drawing software, has brought the question back to the justices with new urgency. A Supreme Court ruling outlawing at least some such gerrymanders could reshape the political landscape.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;Fights over voting rights and election procedures have often taken center stage in Raleigh, North Carolina’s capital, and Tuesday’s ruling noted that “partisan advantage” had been a criterion lawmakers used when mulling how to map the state.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;Republican officials in the General Assembly said Tuesday evening that they intended to appeal the ruling, which many elected officials and political strategists were still scrambling to digest. Dallas Woodhouse, the executive director of the North Carolina Republican Party, criticized Judge Wynn and accused him of “waging a personal, partisan war on North Carolina Republicans.”&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;In a separate &lt;a rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot; href=&quot;https://twitter.com/DallasWoodhouse/status/950878855321063425&quot; title=&quot;&quot; class=&quot;styles-link--1Tap3&quot;&gt;post&lt;/a&gt; on Twitter, Mr. Woodhouse argued that Judge Wynn had concluded that North Carolina’s Republicans “should not be allowed to draw election districts under any circumstances under any set of rules,” an effort he called “a hostile takeover” of the General Assembly and legislatures nationwide. Republicans could ask the Supreme Court to stay the decision and allow the disputed map to be used this year.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;But critics of the congressional map welcomed a decision that was notable for its tartness and urgency.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;“Clearly, the courts have realized that they do need to step in and police extreme partisan gerrymanders, and the court recognized that North Carolina’s gerrymander was one of the most extreme in history,” said Ruth Greenwood, senior legal counsel at the Campaign Legal Center and a lawyer representing some of the map’s challengers.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;The chairman of the North Carolina Democratic Party, Wayne Goodwin, said the decision was “a major victory for North Carolina and people across the state whose voices were silenced by Republicans’ unconstitutional attempts to rig the system to their partisan advantage.”&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;The judges issued their decision fewer than 24 hours before the General Assembly was to convene in Raleigh for a special session. The ruling unmistakably placed lawmakers on the clock, giving them two weeks to present a “remedial plan” and declaring that the court would institute its own map if it finds the new district lines unsatisfactory.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;“Politically, this gives hope to Democrats,” said J. Michael Bitzer, a professor of political science at Catawba College, which is near Charlotte. “I can imagine the Republicans being furious, but they have to see political reality, and it’s not just in the next two weeks: It’s come November.”&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;Professor Bitzer, though, cautioned that the ultimate political fallout would not become clearer until the courts settled what could be a cascade of appeals and injunctions.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;The ruling left little doubt about how the judges assessed the Legislature’s most recent map. Judge Wynn, who sits on the United States Court of Appeals for the Fourth Circuit and was a member of a special panel considering the congressional map, said that “a wealth of evidence proves the General Assembly’s intent to ‘subordinate’ the interests of non-Republican voters and ‘entrench’ Republican domination of the state’s congressional delegation.”&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;Most federal lawsuits are first heard by a district court, and later — if needed — by an appeals court and the Supreme Court. &lt;a rel=&quot;noopener noreferrer&quot; target=&quot;_blank&quot; href=&quot;https://www.law.cornell.edu/uscode/text/28/2284&quot; title=&quot;&quot; class=&quot;styles-link--1Tap3&quot;&gt;But under federal law&lt;/a&gt;, constitutional challenges to the apportionment of House districts or statewide legislative bodies are automatically heard by three-judge panels, and appeals are taken directly to the Supreme Court.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;In addition to Judge Wynn, an appointee of Mr. Obama’s, Senior Judge W. Earl Britt of the Federal District Court in Raleigh joined the opinion. Judge Britt was appointed by President Jimmy Carter.&lt;/p&gt;
&lt;p class=&quot;Paragraph-paragraph--2eXNE elementStyles-paragraph--3EIcW elementStyles-toneNews--sRTft&quot;&gt;Judge William L. Osteen Jr., who was appointed by President George W. Bush and sits on the federal bench in Greensboro, said he agreed that the existing map violated the 14th Amendment, but he disputed other parts of Judge Wynn’s opinion, including the decision to appoint an independent expert to begin preparing an alternative map.&lt;/p&gt;
&lt;div class=&quot;bottom-of-article&quot; readability=&quot;25.795918367347&quot;&gt;

&lt;div class=&quot;elementStyles-printInformation--2VtfI elementStyles-toneNews--sRTft&quot; readability=&quot;7.2551020408163&quot;&gt;A version of this article appears in print on , on Page A1 of the New York edition with the headline: North Carolina Told to Redraw ‘Partisan’ Map&lt;span&gt;. &lt;a href=&quot;http://www.nytreprints.com/&quot;&gt;Order Reprints&lt;/a&gt; | &lt;a href=&quot;http://www.nytimes.com/pages/todayspaper/index.html&quot;&gt;Today’s Paper&lt;/a&gt; | &lt;a href=&quot;https://www.nytimes.com/subscriptions/Multiproduct/lp8HYKU.html?campaignId=48JQY&quot;&gt;Subscribe&lt;/a&gt;&lt;/span&gt;&lt;/div&gt;

&lt;/div&gt;


&lt;div id=&quot;bottom-wrapper&quot; class=&quot;ResponsiveAd-bottomAd--1hHJW ResponsiveAd-storyBodyAd--35v2w&quot;&gt;
&lt;div id=&quot;bottom-slug&quot; class=&quot;ResponsiveAd-adSlug--3H3QM&quot;&gt;
&lt;p&gt;Advertisement&lt;/p&gt;
&lt;/div&gt;

&lt;/div&gt;
</description>
<pubDate>Wed, 10 Jan 2018 14:54:26 +0000</pubDate>
<dc:creator>kyleblarson</dc:creator>
<og:url>https://www.nytimes.com/2018/01/09/us/north-carolina-gerrymander.html</og:url>
<og:type>article</og:type>
<og:title>North Carolina Is Ordered to Redraw Its Congressional Map</og:title>
<og:image>https://static01.nyt.com/images/2018/01/10/us/10northcarolina/10northcarolina-facebookJumbo.jpg</og:image>
<og:description>The ruling was the first time that a federal court had blocked a congressional map because the judges believed it to be a partisan gerrymander.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/2018/01/09/us/north-carolina-gerrymander.html?_r=0</dc:identifier>
</item>
<item>
<title>WhatsApp Encryption Security Flaws Could Allow Snoops to Slide into Group Chats</title>
<link>https://www.wired.com/story/whatsapp-security-flaws-encryption-group-chats/</link>
<guid isPermaLink="true" >https://www.wired.com/story/whatsapp-security-flaws-encryption-group-chats/</guid>
<description>&lt;p&gt;When WhatsApp added &lt;a href=&quot;https://www.wired.com/2016/04/forget-apple-vs-fbi-whatsapp-just-switched-encryption-billion-people/&quot;&gt;end-to-end encryption to every conversation&lt;/a&gt; for its billion users two years ago, the mobile messaging giant significantly raised the bar for the privacy of digital communications worldwide. But one of the tricky elements of encryption—and even trickier in a group chat setting—has always been ensuring that a secure conversation reaches only the intended audience, rather than some impostor or infiltrator. And according to new research from one team of German cryptographers, flaws in WhatsApp make infiltrating the app's group chats much easier than ought to be possible.&lt;/p&gt;
&lt;p&gt;At the Real World Crypto security conference Wednesday in Zurich, Switzerland, a group of researchers from the Ruhr University Bochum in Germany plan to describe a series of flaws in encrypted messaging apps including WhatsApp, Signal, and Threema. The team argues their findings undermine each app's security claims for multi-person group conversations to varying degrees.&lt;/p&gt;
&lt;p&gt;But while the Signal and Threema flaws they found were relatively harmless, the researchers unearthed far more significant gaps in WhatsApp's security: They say that anyone who controls WhatsApp's servers could effortlessly insert new people into an otherwise private group, even without the permission of the administrator who ostensibly controls access to that conversation.&lt;/p&gt;
&lt;div class=&quot;inset-left-component inset-left-component--pullquote&quot; readability=&quot;9&quot;&gt;
&lt;blockquote name=&quot;inset-left&quot; class=&quot;inset-left-component__el&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;'It's just a total screwup. There's no excuse.'&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p name=&quot;inset-left&quot; class=&quot;inset-left-component__el&quot;&gt;Matthew Green, Johns Hopkins University&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&quot;The confidentiality of the group is broken as soon as the uninvited member can obtain all the new messages and read them,&quot; says Paul Rösler, one of the Ruhr University researchers who co-authored a &lt;a href=&quot;https://eprint.iacr.org/2017/713.pdf&quot; target=&quot;_blank&quot;&gt;paper on the group messaging vulnerabilities&lt;/a&gt;. &quot;If I hear there's end-to-end encryption for both groups and two-party communications, that means adding of new members should be protected against. And if not, the value of encryption is very little.&quot;&lt;/p&gt;

&lt;p&gt;That any would-be eavesdropper would have to control the WhatsApp server limits the spying method to sophisticated hackers who could compromise those servers, WhatsApp staffers, or governments who legally coerce WhatsApp to give them access. But the premise of so-called end-to-end encryption has always been that even a compromised server shouldn't expose secrets. Only people in a conversation should be able to read WhatsApp's messages, not the servers themselves.&lt;/p&gt;
&lt;p&gt;&quot;If you build a system where everything comes down to trusting the server, you might as well dispense with all the complexity and forget about end-to-end encryption,&quot; says Matthew Green, a cryptography professor at Johns Hopkins University who reviewed the Ruhr University researchers' work. &quot;It's just a total screwup. There's no excuse.&quot;&lt;/p&gt;
&lt;h3&gt;Group Threat&lt;/h3&gt;
&lt;p&gt;The German researchers say their WhatsApp attack takes advantage of a simple bug. Only an administrator of a WhatsApp group can invite new members, but WhatsApp doesn't use any authentication mechanism for that invitation that its own servers can't spoof. So the server can simply add a new member to a group with no interaction on the part of the administrator, and the phone of every participant in the group then automatically shares secret keys with that new member, giving him or her full access to any future messages. (Messages sent prior to an illicit invitation, fortunately, still can't be decrypted.)&lt;/p&gt;
&lt;p&gt;Everyone in the group would see a message that a new member had joined, seemingly at the invitation of the unwitting administrator. If the administrator is watching closely, he or she could warn the group's intended members about the interloper and the spoofed invitation message.&lt;/p&gt;


&lt;p&gt;But the Ruhr University researchers and Johns Hopkins' Green point out several tricks that could be used to delay detection. Once an attacker with control of the WhatsApp server had access to the conversation, he or she could also use the server to selectively block any messages in the group, including those that ask questions, or provide warnings about the new entrant.&lt;/p&gt;
&lt;p&gt;&quot;He can cache all the message and then decide which get sent to whom and which not,&quot; says Rösler. And in groups with multiple administrators, the hijacked server could spoof different messages to each administrator, making it appear that another one had invited the eavesdropper, so that none raises an alarm. It could even prevent any administrator's attempt to remove the eavesdropper from the group if discovered.&lt;/p&gt;
&lt;h3&gt;Some Limits&lt;/h3&gt;
&lt;p&gt;In a phone call with WIRED, a WhatsApp spokesperson confirmed the researchers' findings, but emphasized that no one can &lt;em&gt;secretly&lt;/em&gt; add a new member to a group—a notification does go through that a new, unknown member has joined the group. The staffer added that if an administrator spots a fishy new addition to a group, they can always tell other users via another group, or in one-to-one messages. And the WhatsApp spokesperson also noted that preventing the Ruhr University researchers' attack would likely break a popular WhatsApp feature known as a &quot;group invite link&quot; that allows anyone to join a group simply by clicking on a URL.&lt;/p&gt;
&lt;p&gt;“We've looked at this issue carefully,&quot; a WhatsApp spokesperson wrote in an email. &quot;Existing members are notified when new people are added to a WhatsApp group. We built WhatsApp so group messages cannot be sent to a hidden user. The privacy and security of our users is incredibly important to WhatsApp. It's why we collect very little information and all messages sent on WhatsApp are end-to-end encrypted.”&lt;/p&gt;
&lt;p&gt;To be fair, this technique wouldn't be a very stealthy strategy in the long run for government spying. Sooner or later, users would likely notice that unexpected strangers were showing up in their chats. But that possibility of detection isn't an adequate solution to WhatsApp's underlying problem, argues John Hopkins' Green. &quot;That's like leaving the front door of a bank unlocked and then saying no one will rob it because there’s a security camera,&quot; Green says. &quot;It's dumb.&quot;&lt;/p&gt;
&lt;p&gt;The Ruhr University researchers say they alerted WhatsApp to the problem with group messaging security last July. In response to their report, WhatsApp's staff say they fixed one problem with a feature of their encryption that made it harder to crack future messages even after an attacker obtained one decryption key. But they told the researchers the group invitation bug they'd found was merely &quot;theoretical&quot; and didn't even qualify for the so-called bug bounty program run by Facebook, WhatsApp's corporate owner, in which security researchers are paid for reporting hackable flaws in the company's software.&lt;/p&gt;

&lt;div class=&quot;inset-left-component inset-left-component--pullquote&quot; readability=&quot;10&quot;&gt;
&lt;blockquote name=&quot;inset-left&quot; class=&quot;inset-left-component__el&quot; readability=&quot;7&quot;&gt;
&lt;p&gt;'If I hear there's end-to-end encryption for both groups and two-party communications, that means adding of new members should be protected against.'&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p name=&quot;inset-left&quot; class=&quot;inset-left-component__el&quot;&gt;Paul Rösler, Ruhr University&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;For some of WhatsApp's users, the stakes of the app's security could be high. WhatsApp's convenient group messaging system, in combination with its encryption promises, have made it a popular tool for &quot;whisper networks&quot; of grassroots organizing around sensitive or dangerous topics. Victims of sexual abuse and harassment have &lt;a href=&quot;https://www.theguardian.com/global/2017/nov/12/whatsapp-inside-secret-world-of-group-chat-politics-sexual-harassment&quot; target=&quot;_blank&quot;&gt;used it to organize the campaign against abusers&lt;/a&gt;, for instance. So have political insiders and Syria's embattled White Helmets, volunteer rescue brigades in Syria who are often targeted by the ruling regime.&lt;/p&gt;
&lt;p&gt;But the shoddy security around WhatsApp's group chats should make its most sensitive users wary of interlopers, Rösler argues. If WhatsApp were to comply with a government request—in the US or abroad—agents could join any private group and listen along.&lt;/p&gt;
&lt;h3&gt;Smaller Problems&lt;/h3&gt;
&lt;p&gt;The researchers dug up less serious flaws in the more specialized secure messaging apps Signal and Threema, too. They warn that Signal allows the same group chat attack as WhatsApp, letting uninvited eavesdroppers join groups. But in Signal's case, that eavesdropper would have to not only control the Signal server, but also know a virtually unguessable number called the Group ID. That essentially blocks the attack, unless the Group ID can be obtained from one of the group member's phones—in which case the group is likely already compromised. The researchers say that Open Whisper Systems, the non-profit that runs and maintains Signal, nonetheless responded to their work, saying that it's currently redesigning how Signal handles group messaging. Open Whisper Systems declined to comment on the record to WIRED about the Ruhr researchers' findings.&lt;/p&gt;
&lt;p&gt;For Threema, the researchers found even smaller bugs: An attacker who controls the server can replay messages or add users back into a group who have been removed. The researchers say Threema responded to their findings with a fix in an earlier version of its software.&lt;/p&gt;
&lt;p&gt;As for WhatsApp, the researchers write that the company could fix its more egregious group chat flaw by adding an authentication mechanism for new group invitations. Using a secret key only the administrator possesses to sign those invitations could let the admin prove his or her identity and prevent the spoofed invites, locking out uninvited guests. WhatsApp has yet to take their advice.&lt;/p&gt;
&lt;p&gt;Until they do, WhatsApp's most sensitive users should consider sticking with one-to-one conversations, or switching to a more secure group messaging app like Signal. Otherwise, they'd be wise to keep a vigilant eye out for any new entrants sliding into their private conversations. Until an administrator actively vouches for that newcomer, there's a small chance he or she might just be something other than a new friend.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Updated 10:00pm EST with more information what WhatsApp.&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 10 Jan 2018 13:41:36 +0000</pubDate>
<dc:creator>uptown</dc:creator>
<og:type>article</og:type>
<og:title>WhatsApp Flaws Could Allow Snoops to Slide Into Group Chats</og:title>
<og:description>German researchers say that a flaw in the app's group-chat feature undermines its end-to-end encryption promises.</og:description>
<og:image>https://media.wired.com/photos/5a555100c6b8cf23abc74946/191:100/pass/whatsapp.jpg</og:image>
<og:url>https://www.wired.com/story/whatsapp-security-flaws-encryption-group-chats/</og:url>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.wired.com/story/whatsapp-security-flaws-encryption-group-chats/</dc:identifier>
</item>
</channel>
</rss>