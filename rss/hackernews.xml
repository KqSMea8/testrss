<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Show HN: Metaballs</title>
<link>http://varun.ca/metaballs</link>
<guid isPermaLink="true" >http://varun.ca/metaballs</guid>
<description>&lt;p data-height=&quot;400&quot; data-theme-id=&quot;26435&quot; data-slug-hash=&quot;RLyNEE&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;amoeba&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/RLyNEE/&quot;&gt;amoeba&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Metaballs, not to be confused with meatballs, are organic looking squishy gooey blobs. From a mathematical perspective they are an iso-surface. They are rendered using equations such as &lt;code class=&quot;dib b&quot;&gt;f(x,y,z) = r / ((x - x&lt;sub&gt;0&lt;/sub&gt;)&lt;sup&gt;2&lt;/sup&gt; + (y - y&lt;sub&gt;0&lt;/sub&gt;)&lt;sup&gt;2&lt;/sup&gt; + (z - z&lt;sub&gt;0&lt;/sub&gt;)&lt;sup&gt;2&lt;/sup&gt;)&lt;/code&gt;. Jamie Wong has a fantastic &lt;a href=&quot;http://jamie-wong.com/2014/08/19/metaballs-and-marching-squares&quot;&gt;tutorial&lt;/a&gt; on rendering metaballs with canvas.&lt;/p&gt;
&lt;p&gt;We can replicate the metaball effect using CSS &amp;amp; SVG by applying both &lt;a href=&quot;https://css-tricks.com/shape-blobbing-css/&quot;&gt;blur and contrast filters&lt;/a&gt; to an element. For example in Chris Gannon’s Bubble Slider below.&lt;/p&gt;
&lt;p data-height=&quot;300&quot; data-theme-id=&quot;26435&quot; data-slug-hash=&quot;GZNgLw&quot; data-default-tab=&quot;result&quot; data-user=&quot;chrisgannon&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;SVG Bubble Slider&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/chrisgannon/pen/GZNgLw/&quot;&gt;SVG Bubble Slider&lt;/a&gt; by Chris Gannon (&lt;a href=&quot;https://codepen.io/chrisgannon&quot;&gt;@chrisgannon&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I discovered another approach to creating this metaball effect from &lt;a href=&quot;http://paperjs.org/examples/meta-balls&quot;&gt;Paper.js examples&lt;/a&gt;. Back in the days of Scriptographer &lt;a href=&quot;http://shspage.com&quot;&gt;Hiroyuki Sato&lt;/a&gt; created a script for generating gooey blobs in Adobe Illustrator. Unlike the previous techniques this does not render pixels or rely on filters. Instead it connects two circles with a membrane. Which means that the we can generate the entire blob as a path. For the Amoeba CodePen I followed exactly this technique.&lt;/p&gt;
&lt;p data-height=&quot;320&quot; data-theme-id=&quot;26435&quot; data-slug-hash=&quot;NazWxg&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Meta balls Debug&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/NazWxg/&quot;&gt;Meta balls Debug&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In this blog post I am going break down the steps required to generate the metaball. We are going to go through a function called &lt;code class=&quot;highlighter-rouge&quot;&gt;metaball&lt;/code&gt; which generates the black shaded path that you see below. This consists of the connector plus a part of the second circle.&lt;/p&gt;
&lt;p data-height=&quot;200&quot; data-theme-id=&quot;8427&quot; data-slug-hash=&quot;qPQZPN&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Metaballs debug — the path&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/qPQZPN/&quot;&gt;Metaballs debug — the path&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To figure out where the connector touches the two circles we start by locating two tangents that touch both circles. This is the widest the connector can be. BTW I’m focusing on the case when the circles are not overlapping first.&lt;/p&gt;
&lt;p&gt;We can calculate the maximum angle of spread using:&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Why? This took me a while to figure out. I could attempt to explain here, but you are probably better of seeing the step-by-step illustration in this &lt;a href=&quot;http://www.mathopenref.com/consttangentsext.html&quot;&gt;external tangents to two given circles&lt;/a&gt; guide.&lt;/p&gt;
max-spread
&lt;p&gt;This is the maximum possible spread that the connector can have. We can control spread amount by multiplying it with a factor called &lt;code class=&quot;highlighter-rouge&quot;&gt;v&lt;/code&gt;. The Paper.js code has &lt;code class=&quot;highlighter-rouge&quot;&gt;v = 0.5&lt;/code&gt;. That seems to work well.&lt;/p&gt;
&lt;p data-height=&quot;200&quot; data-theme-id=&quot;8427&quot; data-slug-hash=&quot;aLQBdb&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Metaballs debug — spread&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/aLQBdb/&quot;&gt;Metaballs debug — spread&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The spread for the smaller circle is &lt;code class=&quot;highlighter-rouge&quot;&gt;(Math.PI - maxSpread) * v&lt;/code&gt;. This is because the sum of the opposite angles of a polygon is 180°.&lt;/p&gt;
&lt;p&gt;Next we need to find the location of those four points. We know the centre of the circles (&lt;code class=&quot;highlighter-rouge&quot;&gt;center1&lt;/code&gt; &amp;amp; &lt;code class=&quot;highlighter-rouge&quot;&gt;center2&lt;/code&gt;) and the radii (&lt;code class=&quot;highlighter-rouge&quot;&gt;radius1&lt;/code&gt; &amp;amp; &lt;code class=&quot;highlighter-rouge&quot;&gt;radius2&lt;/code&gt;). Therefore, we will only be dealing in terms of angles and then use polar coordinates to convert it into &lt;code&gt;(x, y)&lt;/code&gt; values later.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// Circle 1 (left)&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Circle 2 (right)&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The angles need to be measured clockwise. Therefore, for the second circle we take that into account by subtracting from &lt;code class=&quot;highlighter-rouge&quot;&gt;Math.PI&lt;/code&gt;. We add &lt;code class=&quot;highlighter-rouge&quot;&gt;angleBetweenCenters&lt;/code&gt; to all because the circles can be moving diagonally too. Then convert polar coords to cartesian.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;17&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Points&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To convert the trapezium shaped connector into a curved one we need to add handles to all four points. The next part of the process is to figure out the location of the handles.&lt;/p&gt;
&lt;p data-height=&quot;200&quot; data-theme-id=&quot;8427&quot; data-slug-hash=&quot;rGQyVJ&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Metaballs debug — handles&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/rGQyVJ/&quot;&gt;Metaballs debug — handles&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The handle for a particular point should be aligned to the tangent to the circle at that point. Again we’ll use polar coords to locate the handle. This time however, it will be relative to the point itself.&lt;/p&gt;
A B C angle 1
&lt;p&gt;The lines AB and BC are perpendicular because AB is radial and BC is a tangent to the circle. Therefore, the angle for the handle 1 is &lt;code class=&quot;highlighter-rouge&quot;&gt;angle1 - Math.PI / 2&lt;/code&gt;. Similarly we can calculate the angles for the other three handles.&lt;/p&gt;
&lt;p&gt;The length of the handle is relative to the radius of the circle they originate from times the factor &lt;code class=&quot;highlighter-rouge&quot;&gt;d2&lt;/code&gt;. For example, the length of handle 1 is &lt;code class=&quot;highlighter-rouge&quot;&gt;radius1 * d2&lt;/code&gt;. We can now calculate the location of the handles like so:&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;20&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;totalRadius&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Handle length scaling factor&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;totalRadius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Handle lengths&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We have all the points 🙌🏽 Time to construct the SVG path. The path is made of three sections: curve from &lt;code class=&quot;highlighter-rouge&quot;&gt;point 1&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;point 3&lt;/code&gt;, arc of &lt;code class=&quot;highlighter-rouge&quot;&gt;radius2&lt;/code&gt; from &lt;code class=&quot;highlighter-rouge&quot;&gt;point 3&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;point 4&lt;/code&gt; and curve from &lt;code class=&quot;highlighter-rouge&quot;&gt;point 4&lt;/code&gt; to &lt;code class=&quot;highlighter-rouge&quot;&gt;point 2&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;metaballToPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;escaped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'M'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;escaped&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;circle-overlap&quot;&gt;Circle Overlap&lt;/h3&gt;
&lt;p&gt;We have a gooey metaball! But you’ll notice that path gets all weird and twisty when the circles start to overlapping. We are going to fix this by expanding the spread in proportion to how much the circles are overlapping.&lt;/p&gt;
&lt;p data-height=&quot;200&quot; data-theme-id=&quot;8427&quot; data-slug-hash=&quot;boQadp&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Metaballs debug — no overlap&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/boQadp/&quot;&gt;Metaballs debug — no overlap&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The spread expansion will be controlled using the angles &lt;code class=&quot;highlighter-rouge&quot;&gt;u1&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;u2&lt;/code&gt;. We can calculate these using the &lt;a href=&quot;https://en.wikipedia.org/wiki/Law_of_cosines&quot;&gt;law of cosines&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;radius1 d radius2 u1 u2&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;But what shall we do with these 🤔 To be honest I’m not entirely sure how this works. What I do know is that it expands the spread as the circles get closer and then collapses it once circle 2 is completely inside circle 1.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p data-height=&quot;200&quot; data-theme-id=&quot;8427&quot; data-slug-hash=&quot;PJxQom&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Metaballs debug — overlap&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/PJxQom/&quot;&gt;Metaballs debug — overlap&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;And one final change to account for overlapping circles. The length of the handles will also be proportional to the distance between the circles.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// Define handle length by the distance between both ends of the curve&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;totalRadius&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2Base&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;totalRadius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;// Take into account when circles are overlapping&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2Base&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;And here is the final result and the entire code snippet for &lt;code class=&quot;highlighter-rouge&quot;&gt;metaball&lt;/code&gt;. Try forking it and playing around with different values of &lt;code class=&quot;highlighter-rouge&quot;&gt;handleSize&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;v&lt;/code&gt;. See how they impact the shape of the connector. There are so many amazing little details in these 70 lines of code. Fascinating work by Hiroyuki Sato. I learnt so much from it!&lt;/p&gt;
&lt;p data-height=&quot;300&quot; data-theme-id=&quot;26435&quot; data-slug-hash=&quot;pWQajO&quot; data-default-tab=&quot;result&quot; data-user=&quot;winkerVSbecks&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;Metaballs debug — final&quot; class=&quot;codepen&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/winkerVSbecks/pen/pWQajO/&quot;&gt;Metaballs debug — final&lt;/a&gt; by Varun Vachhar (&lt;a href=&quot;https://codepen.io/winkerVSbecks&quot;&gt;@winkerVSbecks&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;language-js highlighter-rouge&quot; readability=&quot;75&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;cm&quot;&gt;/**
 * Based on Metaball script by Hiroyuki Sato
 * http://shspage.com/aijs/en/#metaball
 */&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;metaball&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleSize&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxDist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;2.5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// No blob if a radius is 0&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// or if distance between the circles is larger than max-dist&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// or if circle2 is completely inside circle1&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxDist&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;abs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// Calculate u1 and u2 if the circles are overlapping&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Else set u1 and u2 to zero&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// Calculate the max spread&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;acos&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Angles for the points&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angleBetweenCenters&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PI&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;u2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;maxSpread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// Point locations&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;center2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// Define handle length by the distance between both ends of the curve&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;totalRadius&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2Base&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;handleSize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;dist&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;totalRadius&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// Take into account when circles are overlapping&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2Base&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Math&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;min&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// Length of the handles&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;d2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// Handle locations&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle3&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;kr&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getVector&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;angle4&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;HALF_PI&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

  &lt;span class=&quot;c1&quot;&gt;// Generate the connector path&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;metaballToPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;d&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;radius1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;radius2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;metaballToPath&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;escaped&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'M'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;escaped&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;s1&quot;&gt;'C'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;h3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;p4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
</description>
<pubDate>Tue, 17 Oct 2017 16:24:44 +0000</pubDate>
<dc:creator>winkerVSbecks</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>http://varun.ca/metaballs/</dc:identifier>
</item>
<item>
<title>Introducing Surface Book 2</title>
<link>https://blogs.windows.com/devices/2017/10/17/introducing-surface-book-2-the-most-powerful-surface-book-ever/</link>
<guid isPermaLink="true" >https://blogs.windows.com/devices/2017/10/17/introducing-surface-book-2-the-most-powerful-surface-book-ever/</guid>
<description>&lt;p&gt;&lt;img class=&quot;alignnone wp-image-260920&quot; src=&quot;https://winblogs.azureedge.net/devices/2017/10/0b8806b4751316a6f8f8f0260fd3da92.jpg&quot; alt=&quot;Microsoft Surface Book 2 13 inch and 15 inch pictured side by side&quot; width=&quot;1146&quot; height=&quot;764&quot;/&gt;&lt;/p&gt;&lt;p&gt;When you think about Microsoft and you hear our mission – to empower every person and every organization on the planet to achieve more – it’s powerful. As product makers, we have to believe in the reasons we build our products. From Office to Windows to Surface, this is a notion that drives us.&lt;/p&gt;
&lt;p&gt;As a team we work together to create products with seamless interactions from the silicon to the software. You see this across the entire Surface family – Pen, Dial, touch, voice – they opened so many doors to allow people to work and create in new ways.&lt;/p&gt;
&lt;p&gt;When we launched Surface Book two years ago we set out to build the most powerful and versatile laptop, to breakdown the boundaries between what you can imagine and what you can create, and we’ve been so inspired by how people have used Surface Book through their entire creative process.&lt;/p&gt;
&lt;p&gt;But people still want more, and creators continue to push the limits of what technology can do. So, we built the laptop of the future for the creators making the future. A laptop powerful enough to fuel the next wave of computing across mixed reality, artificial intelligence, machine learning, and immersive gaming.  A laptop that empowers the designers, developers, artists, and scientists to imagine and build without limits and without compromises. To achieve more.&lt;/p&gt;
&lt;p&gt;We can’t wait to see what you will do with Surface Book 2.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;embed-youtube&quot;&gt;&lt;iframe class=&quot;youtube-player&quot; type=&quot;text/html&quot; width=&quot;640&quot; height=&quot;390&quot; src=&quot;https://www.youtube.com/embed/4ck5RbTQj28?version=3&amp;amp;rel=1&amp;amp;fs=1&amp;amp;autohide=2&amp;amp;showsearch=0&amp;amp;showinfo=1&amp;amp;iv_load_policy=1&amp;amp;wmode=transparent&quot; allowfullscreen=&quot;true&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Surface Book 2 removes the barrier between the desktop and the laptop by giving mobile professionals the power of a desktop, the versatility of a tablet, and the freedom of a light and thin laptop in one beautifully designed device. Whether you’re a developer, a digital artist, a designer, or an accountant, you can bring your ideas to life anywhere, because Surface Book 2 is a portable powerhouse.&lt;/p&gt;
&lt;p&gt;We made no compromises building the most powerful Surface laptop ever. When the team talks about Surface Book 2 they call it Beauty &lt;em&gt;and&lt;/em&gt; the Beast. Gorgeous design meets unstoppable power in this laptop. With the latest 8th Gen Intel Core processors and NVIDIA GeForce GTX 1050 and 1060 discrete graphics options, Surface Book 2 is up to five times more powerful than the original and is twice as powerful as the latest MacBook Pro. All this power and Surface Book 2 still provides all-day battery life – up to 17 hours of video playback. That’s 70% more than the latest MacBook Pro.&lt;/p&gt;
&lt;p&gt;The new level of performance provided by Surface Book 2, along with the all-day battery life is what will continue to make this product perfect for product designers, gamers, architects, and developers who need the power of a desktop but crave the mobility of a laptop that doesn’t weigh 8-10lbs. Surface Book 2 with the 13” weighs 3.38lbs and the 15” Surface Book 2 at 4.2lbs, there has never been this much computational power in a mobile form factor this light. This is a product that can stay with you from the moment your inspiration strikes to making it a reality.&lt;/p&gt;
&lt;p&gt;You can show off your meticulously designed PowerPoint deck or complex Pivot tables in Excel with Surface Book 2’s stunningly vibrant and crisp PixelSense Display with multi-touch, Surface Pen, and Surface Dial on-screen support. You won’t believe how much the colors and 3D images will pop in PowerPoint on these machines. The 15” Surface Book 2 delivers almost seven million dazzling pixels – 45% more than the MacBook Pro – giving artists and professionals alike amazing pixel density on an even larger creative canvas.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone wp-image-260923&quot; src=&quot;https://winblogs.azureedge.net/devices/2017/10/737869c037b742b9eb0e7c58562d3aac.jpg&quot; alt=&quot;Microsoft Surface Book 2 13 inch and 15 inch pictured side by side&quot; width=&quot;1267&quot; height=&quot;484&quot;/&gt;&lt;/p&gt;
&lt;p&gt;In product making, we believe every detail matters. And you see that come to life in the detachable display and hinge of Surface Book 2, which has been redesigned to provide a smoother, faster detach into Tablet or Studio Mode. And when you detach to sketch an idea or watch a video, the Surface Book 2 turns into the world’s thinnest and lightest 8th Gen Intel Core i7 PC, giving customers a powerful portable studio for those who want a single, device that can follow you from concept to sketch to creation. Surface Book 2 brings you a full array of ports, including USB-A, USB-C, and full-size SD card reader which makes it easy to connect other devices, accessories and memory cards without the need for a bag full of dongles.&lt;/p&gt;

&lt;p&gt;Whether you’re a finance manager running Excel models with millions of rows of data, an animator using 3D and morph transitions to present in PowerPoint, or a writer using the Surface Pen and intelligent ink to edit in Word – we developed Surface Book 2 to remove the boundaries between your ideas and creation. Giving you the seamless integration you need to do even more extraordinary work.&lt;/p&gt;
&lt;p&gt;All that power and versatility also make this the ideal laptop for some of the most exciting features of the &lt;a href=&quot;https://blogs.windows.com/windowsexperience/?p=153727&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Windows 10 Fall Creators Update&lt;/a&gt;. The Photos app will give you new ways to personalize and share your visual stories. And a range of new experiences allows you to create and interact with 3D objects. Use them in PowerPoint, Word, Excel, or the Mixed Reality Viewer app to view 3D in the real world. The Fall Creators Update is also the best version of Windows for PC gamers, giving them the performance boost of Game Mode and access to faster streaming through &lt;a href=&quot;http://blogs.windows.com/windowsexperience/2017/05/25/introducing-mixer/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Mixer&lt;/a&gt;, experiences that show beautifully on Surface Book 2.&lt;/p&gt;
&lt;p class=&quot;jetpack-slideshow-noscript robots-nocontent&quot;&gt;This slideshow requires JavaScript.&lt;/p&gt;



&lt;p&gt;Surface Book 2 is designed to play as hard as it works. So when you’re done with work for the day and you want to game, Surface Book 2 is powerful enough to handle the most popular PC games at 1080p and 60 FPS – in some cases matching the graphics performance of game consoles like Xbox One. With built-in Xbox One Wireless support on the 15” you can pair your Xbox One controllers and compatible headsets to play with no cords or additional dongles required. And with so much innovation in the mixed reality space, we’re proud to share that Surface Book 2 is ready for &lt;a href=&quot;https://www.microsoft.com/en-us/windows/windows-mixed-reality&quot;&gt;Windows Mixed Reality&lt;/a&gt; Ultra. Connect a compatible headset and controller for apps and experiences with crisper visuals and a higher refresh rate (90 frames per second), including the highest-performance VR games.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;alignnone size-full wp-image-260938&quot; src=&quot;https://winblogs.azureedge.net/devices/2017/10/e1a109b0149aee0e01f42555985e2cf9.png&quot; alt=&quot;Woman wearing Windows Mixed Reality headset running on the new Surface Book 2&quot; width=&quot;1080&quot; height=&quot;720&quot;/&gt;&lt;/p&gt;

&lt;p&gt;From the early days of Surface Pro to the launch of the original Surface Book, we’ve had incredible feedback from photographers and artists who loved the ability to shoot tethered or draw on a super portable device that could also run &lt;a href=&quot;http://www.adobe.com/creativecloud.html&quot;&gt;Adobe Creative Cloud&lt;/a&gt; desktop applications. The power of Surface Book 2 will help artists and professionals across the creative spectrum take their work to the next level. More power means faster renders and effects so you can make quick edits and decisions to get you to your finished work. And a deeper partnership with Adobe means even better integration between Surface Book 2 and the &lt;a href=&quot;http://www.adobe.com/creativecloud.html&quot;&gt;Adobe Creative Cloud&lt;/a&gt;, including new Surface Dial functionality coming to Photoshop to keep you in your flow and let you easily access and modify your most frequently used brush settings.&lt;/p&gt;
&lt;p&gt;As a team, we believe that products are a reflection of the people who make them, and the people who use them. We put our heart and soul into building a laptop of the future, for people who want to create the future – creators who see no limits, data scientists designing deep neural networks, engineers, architects, movie makers, and gamers. Surface Book 2 is a tool for everyone who wants to achieve more.&lt;/p&gt;
&lt;p&gt;And I’m so pumped to get these products into customers’ hands. To see what you will do with the most powerful Surface laptop. Be the first to experience and pre-order the Surface Book 2 at a Microsoft Store or retailer near you. Surface Book 2 13” will be available for pre-order beginning November 9&lt;sup&gt;th&lt;/sup&gt; in the United States and additional markets around the world, along with Surface Book 2 15” in the United States at your &lt;a href=&quot;https://www.microsoft.com/en-us/store/locations/find-a-store?icid=en_US_Store_UH_FAS&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;local Microsoft Store&lt;/a&gt; and &lt;a href=&quot;https://www.microsoft.com/en-us/store/b/home&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Microsoft.com&lt;/a&gt;. Delivery will begin on November 16&lt;sup&gt;th&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;post-modified&quot;&gt;Updated October 17, 2017 9:26 am&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 17 Oct 2017 14:08:53 +0000</pubDate>
<dc:creator>AlexeyBrin</dc:creator>
<og:type>article</og:type>
<og:title>Introducing Surface Book 2, the most powerful Surface Book ever - Microsoft Devices Blog</og:title>
<og:description>Introducing the new Surface Book 2 – the most powerful Surface laptop yet</og:description>
<og:url>https://blogs.windows.com/devices/2017/10/17/introducing-surface-book-2-the-most-powerful-surface-book-ever/</og:url>
<og:image>https://winblogs.azureedge.net/devices/2017/10/cbbd096fe394cb273d388d670a04339f.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blogs.windows.com/devices/2017/10/17/introducing-surface-book-2-the-most-powerful-surface-book-ever/</dc:identifier>
</item>
<item>
<title>How to set up continuous deployment using free hosted tools</title>
<link>https://simonwillison.net/2017/Oct/17/free-continuous-deployment/</link>
<guid isPermaLink="true" >https://simonwillison.net/2017/Oct/17/free-continuous-deployment/</guid>
<description>&lt;p&gt;I’m going to describe a way to put together a world-class continuous deployment infrastructure for your side-project without spending any money.&lt;/p&gt;
&lt;p&gt;With &lt;a href=&quot;https://puppet.com/blog/continuous-delivery-vs-continuous-deployment-what-s-diff&quot;&gt;continuous deployment&lt;/a&gt; every code commit is tested against an automated test suite. If the tests pass it gets deployed directly to the production environment! How’s that for an incentive to write comprehensive tests?&lt;/p&gt;
&lt;p&gt;Each of the tools I’m using offers a free tier which is easily enough to handle most side-projects. And once you outgrow those free plans, you can solve those limitations in exchange for money!&lt;/p&gt;
&lt;p&gt;Here’s the magic combination:&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;Step_one_Publish_some_code_to_GitHub_with_some_tests_16&quot; name=&quot;Step_one_Publish_some_code_to_GitHub_with_some_tests_16&quot;&gt;I’ll be using the&lt;/a&gt; &lt;a href=&quot;https://github.com/simonw/simonwillisonblog&quot;&gt;code for my blog&lt;/a&gt; as an example. It’s a classic Django application, with a small (OK, tiny) suite of unit tests. The tests are run using the standard Django &lt;code&gt;./manage.py test&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;Writing a Django application with tests is outside the scope of this article. Thankfully the official Django tutorial &lt;a href=&quot;https://docs.djangoproject.com/en/1.11/intro/tutorial05/&quot;&gt;covers testing in some detail&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://travis-ci.org/&quot;&gt;Travis CI&lt;/a&gt; is an outstanding hosted platform for continuous integration. Given a small configuration file it can check out code from GitHub, set up an isolated test environment (including hefty dependencies like a PostgreSQL database server, Elasticsearch, Redis etc), run your test suite and report the resulting pass/fail grade back to GitHub.&lt;/p&gt;
&lt;p&gt;It’s free for publicly hosted GitHub projects. If you want to test code in a private repository you’ll have to pay them some money.&lt;/p&gt;
&lt;p&gt;Here’s &lt;a href=&quot;https://github.com/simonw/simonwillisonblog/blob/a5c2d2549f26dd2d75cbf863c8b36d617092c2a1/.travis.yml&quot;&gt;my .travis.yml configuration file&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;language: python

python:
  - 2.7

services: postgresql

addons:
  postgresql: &quot;9.6&quot;

install:
  - pip install -r requirements.txt

before_script:
  - psql -c &quot;CREATE DATABASE travisci;&quot; -U postgres
  - python manage.py migrate --noinput
  - python manage.py collectstatic

script:
  - python manage.py test
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;And here’s the resulting &lt;a href=&quot;https://travis-ci.org/simonw/simonwillisonblog&quot;&gt;Travis CI dashboard&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The integration of Travis with GitHub runs &lt;em&gt;deep&lt;/em&gt;. Once you’ve set up Travis, it will automatically test every push to every branch - driven by GitHub webhooks, so test runs are set off almost instantly. Travis will then report the test results back to GitHub, where they’ll show up in a bunch of different places - including these pleasing green ticks on &lt;a href=&quot;https://github.com/simonw/simonwillisonblog/branches&quot;&gt;the branches page&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;GitHub branches page showing CI results&quot; src=&quot;https://static.simonwillison.net/static/2017/github-branches-with-ci-small.png&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Travis will also run tests against any &lt;a href=&quot;https://github.com/simonw/simonwillisonblog/pull/3&quot;&gt;open pull requests&lt;/a&gt;. This is a great incentive to build new features in a pull request even if you aren’t using them for code review:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;GitHub pull request showing CI results&quot; src=&quot;https://static.simonwillison.net/static/2017/github-pull-request-with-ci-small.png&quot; /&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://circleci.com/&quot;&gt;Circle CI&lt;/a&gt; deserves a mention as an alternative to Travis. The two are close competitors and offer very similar feature sets, and Circle CI's free plan allows up to 1,500 build minutes of private repositories per month.&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;Step_3_Deploy_to_Heroku_and_turn_on_continuous_deployment_61&quot; name=&quot;Step_3_Deploy_to_Heroku_and_turn_on_continuous_deployment_61&quot;&gt;I’m a big fan of&lt;/a&gt; &lt;a href=&quot;https://heroku.com/&quot;&gt;Heroku&lt;/a&gt; for side projects, because it means not having to worry about ongoing server-maintenance. I’ve lost several side-projects to &lt;a href=&quot;https://blog.heroku.com/archives/2011/6/28/the_new_heroku_4_erosion_resistance_explicit_contracts/&quot;&gt;entropy and software erosion&lt;/a&gt; - getting an initial VPS set up may be pretty simple, but a year later security patches need applying and the OS needs upgrading and the log files have filled up the disk and you’ve forgotten how you set everything up in the first place…&lt;/p&gt;
&lt;p&gt;It turns out Heroku has basic support for continuous deployment baked in, and it’s trivially easy to set up. You can tell Heroku to deploy on every commit to GitHub, and then if you’ve attached a CI service like Travis that reports build health back you can check the box for “Wait for CI to pass before deploy”:&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Heroku deployment settings for continuous deployment&quot; src=&quot;https://static.simonwillison.net/static/2017/heroku-deploy-settings-small.png&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Since small dynos on Heroku are free, you can even set up a separate Heroku app as a staging environment. I started my continuous integration adventure just deploying automatically to my staging instance, then switched over to deploying to production once I gained some confidence in how it all fitted together.&lt;/p&gt;
&lt;p&gt;If you’re using continuous deployment with Heroku and Django, it’s a good idea to set up Heroku to automatically run your migrations for every deploy - otherwise you might merge a pull request with a model change and forget to run the migrations before the deploy goes out. You can do that using Heroku’s &lt;a href=&quot;https://devcenter.heroku.com/articles/release-phase&quot;&gt;release phase&lt;/a&gt; feature, by adding the line &lt;code&gt;release: python manage.py migrate --noinput&lt;/code&gt; to your Heroku &lt;code&gt;Procfile&lt;/code&gt; (&lt;a href=&quot;https://github.com/simonw/simonwillisonblog/blob/81f7e2ba19b84f572e8a546bcc28bbfb1e211eb6/Procfile&quot;&gt;here’s mine&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Once you go beyond Heroku’s free tier things get much more powerful: &lt;a href=&quot;https://www.heroku.com/flow&quot;&gt;Heroku Flow&lt;/a&gt; combines pipelines, review apps and their own CI solution to provide a comprehensive solution for much larger teams.&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;Step_4_Monitor_errors_with_Sentry_75&quot; name=&quot;Step_4_Monitor_errors_with_Sentry_75&quot;&gt;If you’re going to move fast and break things, you need to know when things have broken.&lt;/a&gt; &lt;a href=&quot;https://sentry.io/&quot;&gt;Sentry&lt;/a&gt; is a fantastic tool for collecting exceptions, aggregating them and spotting when something new crops up. It’s open source so you can host it yourself, but they also offer a robust hosted version with a free plan that can track up to 10,000 errors a month.&lt;/p&gt;
&lt;p&gt;My favourite feature of Sentry is that it gives each exception it sees a “signature” based on a MD5 hash of its traceback. This means it can tell if errors are the same underlying issue or something different, and can hence de-dupe them and only alert you the first time it spots an error it has not seen before.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Notifications from Travis CI and GitHub in Slack&quot; src=&quot;https://static.simonwillison.net/static/2017/sentry-small.png&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Sentry has integrations for most modern languages, but it’s particularly easy to use with Django. Just install &lt;a href=&quot;https://pypi.python.org/pypi/raven&quot;&gt;raven&lt;/a&gt; and add few extra lines to your &lt;a href=&quot;http://settings.py&quot;&gt;settings.py&lt;/a&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;SENTRY_DSN = os.environ.get('SENTRY_DSN')
if SENTRY_DSN:
    INSTALLED_APPS += (
        'raven.contrib.django.raven_compat',
    )
    RAVEN_CONFIG = {
        'dsn': SENTRY_DSN,
        'release': os.environ.get('HEROKU_SLUG_COMMIT', ''),
    }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Here I’m using the Heroku pattern of &lt;a href=&quot;https://devcenter.heroku.com/articles/config-vars&quot;&gt;keeping configuration in environment variables&lt;/a&gt;. &lt;code&gt;SENTRY_DSN&lt;/code&gt; is provided by Sentry when you create your project there - you just have to add it as a Heroku config variable.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;HEROKU_SLUG_COMMIT&lt;/code&gt; line causes the currently deployed git commit hash to be fed to Sentry so that it knows what version of your code was running when it reports an error. To enable that variable, you’ll need to &lt;a href=&quot;https://devcenter.heroku.com/articles/dyno-metadata&quot;&gt;enable Dyno Metadata&lt;/a&gt; by running &lt;code&gt;heroku labs:enable runtime-dyno-metadata&lt;/code&gt; against your application.&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;Step_5_Hook_it_all_together_with_Slack_97&quot; name=&quot;Step_5_Hook_it_all_together_with_Slack_97&quot;&gt;Would you like a push notification to your phone every time your site gets code committed / the tests pass or fail / a deploy goes out / a new error is detected? All of the above tools can report such things to&lt;/a&gt; &lt;a href=&quot;https://slack.com/&quot;&gt;Slack&lt;/a&gt;, and Slack’s free plan is easily enough to collect all of these notifications and push them to your phone via the free Slack &lt;a href=&quot;https://slack.com/downloads/ios&quot;&gt;iOS&lt;/a&gt; or &lt;a href=&quot;https://slack.com/downloads/android&quot;&gt;Android&lt;/a&gt; apps.&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;Notifications from Travis CI and GitHub in Slack&quot; src=&quot;https://static.simonwillison.net/static/2017/slack-github-ci-small.png&quot; /&gt;&lt;/p&gt;
&lt;p&gt;Here are instructions for setting up Slack with &lt;a href=&quot;https://get.slack.help/hc/en-us/articles/232289568-Use-GitHub-with-Slack&quot;&gt;GitHub&lt;/a&gt;, &lt;a href=&quot;https://docs.travis-ci.com/user/notifications/#Configuring-slack-notifications&quot;&gt;Travis CI&lt;/a&gt;, &lt;a href=&quot;https://slack.com/apps/A0F7VRF7E-heroku&quot;&gt;Heroku&lt;/a&gt; and &lt;a href=&quot;https://slack.com/apps/A0F814BEV-sentry&quot;&gt;Sentry&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a id=&quot;Need_more_Pay_for_it_105&quot; name=&quot;Need_more_Pay_for_it_105&quot;&gt;Having run much of this kind of infrastructure myself in the past I for one am delighted by the idea of outsourcing it, especially when the hosted options are of such high quality.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a id=&quot;Need_more_Pay_for_it_105&quot; name=&quot;Need_more_Pay_for_it_105&quot;&gt;Each of these tools offers a free tier which is generous enough to work great for small side projects. As you start scaling up, you can start paying for them - that’s why they gave you a free tier in the first place.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a id=&quot;Need_more_Pay_for_it_105&quot; name=&quot;Need_more_Pay_for_it_105&quot;&gt;Comments or suggestions? Join&lt;/a&gt; &lt;a href=&quot;https://news.ycombinator.com/item?id=15490935&quot;&gt;this thread on Hacker News&lt;/a&gt;.&lt;/p&gt;

</description>
<pubDate>Tue, 17 Oct 2017 14:01:22 +0000</pubDate>
<dc:creator>simonw</dc:creator>
<og:url>http://simonwillison.net/2017/Oct/17/free-continuous-deployment/</og:url>
<og:title>How to set up world-class continuous deployment using free hosted tools</og:title>
<og:image>https://avatars0.githubusercontent.com/u/9599?v=4&amp;s=200</og:image>
<og:type>article</og:type>
<og:description>I’m going to describe a way to put together a world-class continuous deployment infrastructure for your side-project without spending any money. With continuous deployment every code commit is tested against ...</og:description>
<dc:format>text/html</dc:format>
<dc:identifier>https://simonwillison.net/2017/Oct/17/free-continuous-deployment/</dc:identifier>
</item>
<item>
<title>Flatiron School settles for operating without license, employment/salary claims</title>
<link>https://ag.ny.gov/press-release/ag-schneiderman-announces-375000-settlement-flatiron-computer-coding-school-operating</link>
<guid isPermaLink="true" >https://ag.ny.gov/press-release/ag-schneiderman-announces-375000-settlement-flatiron-computer-coding-school-operating</guid>
<description>&lt;p&gt;&lt;em&gt;&lt;strong&gt;&lt;span&gt;News from Attorney General Eric T. Schneiderman&lt;/span&gt;&lt;/strong&gt;&lt;/em&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FOR IMMEDIATE RELEASE&lt;br/&gt;October 13, 2017&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Attorney General’s Press Office / 212-416-8060&lt;br/&gt;&lt;a href=&quot;mailto:nyag.pressoffice@ag.ny.gov&quot;&gt;nyag.pressoffice@ag.ny.gov&lt;br/&gt;&lt;/a&gt;Twitter: @AGSchneiderman&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;A.G. SCHNEIDERMAN ANNOUNCES $375,000 SETTLEMENT WITH FLATIRON COMPUTER CODING SCHOOL FOR OPERATING WITHOUT A LICENSE AND FOR ITS EMPLOYMENT AND SALARY CLAIMS&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;span&gt;A.G. Schneiderman Encourages New Yorkers To Report Deceptive Conduct At For-Profit Schools To His Office&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;NEW YORK--Attorney General Eric T. Schneiderman today announced a $375,000 settlement with Flatiron School, Inc. (“Flatiron”), a New York city-based coding school that operated without a license from the New York State Education Department (“SED”) and improperly marketed and promoted its job placement rate and the average starting salary of its graduates. Today’s settlement follows a series of groundbreaking actions taken by the Attorney General’s Office hold&lt;a href=&quot;https://ag.ny.gov/press-release/ag-schneiderman-announces-groundbreaking-1025-million-dollar-settlement-profit&quot;&gt; for-profit colleges&lt;/a&gt; accountable and to provide &lt;a href=&quot;https://ag.ny.gov/press-release/ag-schneiderman-announces-settlement-will-provide-24-million-loan-forgiveness-and-debt&quot;&gt;relief to victimized students&lt;/a&gt;. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Under today’s agreement, Flatiron will pay $375,000 in restitution to eligible graduates who file complaints against the coding school with the Attorney General’s Office within three months of the effective date. Affected Flatiron students and consumers who wish to report deceptive conduct at for-profit schools can &lt;a href=&quot;https://ag.ny.gov/complaint-forms&quot;&gt;file a complaint online at ag.ny.gov&lt;/a&gt; or by calling 1-800-771-7755.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“Coding boot camps have become popular as students seek careers in the tech industry, but for-profit coding schools must comply with state requirements, including obtaining a license before operating,” said &lt;strong&gt;Attorney General Schneiderman&lt;/strong&gt;. “Schools must also provide clear explanations of advertised job placement rates and salary claims of their graduates.” &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Flatiron, a for-profit career school doing business in New York City, offers web applications and computer coding classes at its Broadway location and online. The school, which has taught approximately 1,000 students, charges students between $12,000 and $15,000 for a 12 to 16 week in-person class and approximately $1,500 a month for online coding classes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;According to the Attorney General’s investigation, Flatiron operated without a license from SED and without authorization to provide online classes between October 2013 and September 2017.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;The Attorney General’s investigation also uncovered that Flatiron made inflated claims on its website concerning the percentage of its graduates who obtained employment after completing their courses and the average salaries of their graduates. For example, between January and June 2017, Flatiron claimed that 98.5% of its students received employment less than 180 days after graduation and that Flatiron graduates had an average salary of $74,447. However, Flatiron did not disclose clearly and conspicuously that the 98.5% employment rate included not only full time salaried employees but also apprentices, contract employees and self-employed freelance workers, some who were employed for less than twelve weeks. Similarly, Flatiron failed to clearly and conspicuously disclose that its $74,447 average salary claim included full time employed graduates only, which represent only 58% of classroom graduates and 39% of online graduates. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;In order to obtain a SED license, a non-degree granting career school must meet a number of criteria, including using an approved curriculum and employing a licensed director and teachers. The school must also demonstrate financial viability. These requirements help safeguard students who attend licensed schools.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;The Attorney General’s settlement provides that Flatiron:&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Not operate any educational institution without obtaining necessary licenses and complying with SED laws, rules and regulations&lt;/li&gt;
&lt;li&gt;Clearly and conspicuously disclose the method and categories by which its employment rate and average salaries were calculated in any advertising or oral or written disclosure to students&lt;/li&gt;
&lt;li&gt;Clearly and conspicuously disclose the population comprising the average salary, as well as the population comprising the employment rate calculation wherever it discloses both its employment rate and average starting salary of its graduates&lt;/li&gt;
&lt;li&gt;Not count nonpermanent graduates as employed unless they (1) receive compensation in return for services provided; (2) are anticipated to be employed for at least three months and (3) the position requires that the individual work at least 20 hours a week  &lt;/li&gt;
&lt;/ul&gt;&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Students can check whether a school is licensed on the SED website at http://eservices.nysed.gov/bpss/bpsspublic/BPSSPublicSearch.do. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;The case was handled by Assistant Attorney General Benjamin J. Lee under the supervision of Deputy Bureau Chief Laura J. Levine and Bureau Chief Jane M. Azia in the Consumer Frauds and Protection Bureau. The Consumer Frauds and Protection Bureau is overseen by Executive Deputy Attorney General of Economic Justice Manisha M. Sheth.&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 17 Oct 2017 13:12:38 +0000</pubDate>
<dc:creator>anaxag0ras</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://ag.ny.gov/press-release/ag-schneiderman-announces-375000-settlement-flatiron-computer-coding-school-operating</dc:identifier>
</item>
<item>
<title>Viking ‘Allah’ textile actually doesn&amp;#039;t have Allah on it</title>
<link>https://twitter.com/stephenniem/status/919897406031978496</link>
<guid isPermaLink="true" >https://twitter.com/stephenniem/status/919897406031978496</guid>
<description>[unable to retrieve full-text content]&lt;p&gt;Article URL: &lt;a href=&quot;https://twitter.com/stephenniem/status/919897406031978496&quot;&gt;https://twitter.com/stephenniem/status/919897406031978496&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=15490513&quot;&gt;https://news.ycombinator.com/item?id=15490513&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Points: 214&lt;/p&gt;&lt;p&gt;# Comments: 125&lt;/p&gt;</description>
<pubDate>Tue, 17 Oct 2017 12:57:55 +0000</pubDate>
<dc:creator>DanAndersen</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://mobile.twitter.com/stephenniem/status/919897406031978496</dc:identifier>
</item>
<item>
<title>Why I use Object Pascal</title>
<link>https://dubst3pp4.github.io/post/2017-10-03-why-i-use-object-pascal/</link>
<guid isPermaLink="true" >https://dubst3pp4.github.io/post/2017-10-03-why-i-use-object-pascal/</guid>
<description>&lt;p&gt;Pascal is considered by many programmers as an old language from the past. And although it is in fact one of the older programming languages, it has greatly evolved into a modern, full featured language over the last decades.&lt;/p&gt;&lt;p&gt;Pascal was initially developed in 1969 by Dr. Niklaus Wirth on the ETH of Zurich. It was used as a teaching language as well as a language for business applications. With the appearance of the Classic Mac OS, Pascal was the language of choice propagated by Apple for serious application development. As an example, the first version of Photoshop was made with Pascal.&lt;/p&gt;
&lt;p&gt;Pascal was standardized as an ISO standard in the early 90s. But unlike other languages, there were different Pascal dialects and compilers since the very beginning. One of the most favourite versions, which made Pascal one of the most well-known and widespread programming languages of the 80s and the early 90s, was Borlands &lt;em&gt;Turbo Pascal&lt;/em&gt;. Over time some object-oriented additions were added to the language by Apple and later by Borland, which has evolved into what we now call &lt;strong&gt;Object Pascal&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Today there are two major implementations: &lt;strong&gt;&lt;a href=&quot;https://www.embarcadero.com/products/delphi&quot;&gt;Delphi&lt;/a&gt;&lt;/strong&gt;, the official Turbo Pascal successor, and &lt;strong&gt;&lt;a href=&quot;http://www.freepascal.org&quot;&gt;Free Pascal&lt;/a&gt;&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Delphi is a commercial Rapid Application Development (RAD) environment, which consists of the Object Pascal language, a powerful and fast compiler, a large runtime-library (RTL) and a designer for crossplatform Graphical User Interfaces (GUI). Delphi runs only on Windows, but can compile programs for GNU/Linux, MacOS, Windows, iOS and Android, too.&lt;/p&gt;
&lt;p&gt;Free Pascal in contrast is a free, Open Source implementation of the Object Pascal language. It consists of the language, the compiler and a runtime-library - but does not include the RAD-tools which made Delphi famous. But thanks to some Free Pascal enthusiasts, the &lt;strong&gt;&lt;a href=&quot;http://www.lazarus-ide.org&quot;&gt;Lazarus IDE&lt;/a&gt;&lt;/strong&gt; was developed as a powerful RAD environment especially for Free Pascal. Both, Free Pascal &lt;em&gt;and&lt;/em&gt; Lazarus, are highly cross-platform and can run on and compile for different systems, among them are GNU/Linux, Windows, MacOS, BSD.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dubst3pp4.github.io/uploads/2017/10/lazarus-ide-1.6.4.png&quot; alt=&quot;The Lazarus IDE&quot;/&gt;&lt;/p&gt;
&lt;p&gt;But beside this historical excursion, what are the reasons that I use Free Pascal in my personal projects?&lt;/p&gt;
&lt;h2 id=&quot;pascal-focus-on-types&quot;&gt;Pascal focus on types&lt;/h2&gt;
&lt;p&gt;Pascal is a compiled, statically-typed language, which requires, that you define the types of all variables, parameters and functions in your code. The compiler will instantly raise an error when you’re trying to pass incompatible types to a variable or parameter. The type-safety has one big advantage: it forces you to think about &lt;em&gt;how to structure your data&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The language offers many predefined types, but you can also define your own types. For this task Pascal offers you &lt;em&gt;Enumerations&lt;/em&gt;, &lt;em&gt;Sets&lt;/em&gt;, &lt;em&gt;Arrays&lt;/em&gt;, &lt;em&gt;Records&lt;/em&gt; and &lt;em&gt;Classes&lt;/em&gt;. It is even possible to create sub-ranges of types or to rename existing ones.&lt;/p&gt;
&lt;p&gt;Pascal is very strict, so the programmer has to differ between subroutines that return values, in Pascal called &lt;em&gt;functions&lt;/em&gt;, and subroutines that does not return something, called &lt;em&gt;procedures&lt;/em&gt;. Functions and procedures can also be passed to variables or other functions thanks to &lt;em&gt;procedural types&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;It is possible to overload operators for specific types. With this feature, you have the power to define, let’s say, the result of the addition operation of two or more instances of the same class.&lt;/p&gt;
&lt;h2 id=&quot;object-pascal-has-full-support-for-oop&quot;&gt;Object Pascal has full support for OOP&lt;/h2&gt;
&lt;p&gt;Object Pascal provides you all the tools you need for modern Object Oriented Programming (OOP). Although the language is not fully object oriented in that sense like Smalltalk or Ruby, where even the most basic data types are instances of classes, you will find all the concepts that define OOP in the Object Pascal language: &lt;em&gt;encapsulation&lt;/em&gt;, &lt;em&gt;inheritance&lt;/em&gt; and &lt;em&gt;polymorphism&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;You can define complex types with the help of classes. A class can define &lt;em&gt;methods&lt;/em&gt;, which are procedures or functions, and &lt;em&gt;data&lt;/em&gt;, called fields in Object Pascal. It is also possible to define the way of &lt;em&gt;how&lt;/em&gt; data is accessed by a feature called &lt;em&gt;properties&lt;/em&gt;. Properties define which getter- or setter-methods are used to read or write a field. Classes can also inherit other classes, so you can build a hierarchical tree of the data and behaviour you have modelled within your application. The base class of all classes is &lt;code&gt;TObject&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Interfaces&lt;/em&gt; are also a part of Object Pascal as well as &lt;em&gt;Exceptions&lt;/em&gt;. You can use the build-in standard exceptions, but you have of course the freedom to define your own exceptions. &lt;em&gt;Class helpers&lt;/em&gt; are comparable with Extension Methods in C# or Smalltalks or PHPs traits (although not exactly the same) and let you add methods to existing classes without the need to derive a new class.&lt;/p&gt;
&lt;p&gt;Further features are &lt;em&gt;Generics&lt;/em&gt; to define classes that apply to a wide range of types, as well as many predefined classes for advanced data structures like lists, dictionaries, streams and many many more.&lt;/p&gt;
&lt;p&gt;For an in-depth overview of all the modern OOP features, I recommend an excellent article written by Michalis Kamburelis, which is called &lt;em&gt;Modern Object Pascal Introduction for Programmers&lt;/em&gt;.&lt;/p&gt;
&lt;h2 id=&quot;pascal-is-modular&quot;&gt;Pascal is modular&lt;/h2&gt;
&lt;p&gt;Pascal supports programming in a modular way. What is called &lt;em&gt;packages&lt;/em&gt; or &lt;em&gt;modules&lt;/em&gt; in other languages like Java or JavaScript, is called an &lt;code&gt;unit&lt;/code&gt; in Pascal.&lt;/p&gt;
&lt;p&gt;An unit can contain all the code that has a common relation. You can define which data, types or functions of this unit are visible to other parts of your program - this is called the &lt;code&gt;interface&lt;/code&gt;. And you can also define which parts are not visible to others and thus are private to the unit - this is called the &lt;code&gt;implementation&lt;/code&gt; part. You can even define code, which gets executed once when the unit is included into your program, the &lt;code&gt;initialization&lt;/code&gt; part of the unit, and code that gets executed when the program terminates, the &lt;code&gt;finalization&lt;/code&gt; part.&lt;/p&gt;
&lt;p&gt;Units have another advantage: they encapsulate the code in its own namespace. So you can have for example two or even more procedures with the same name in two different units without a name-collision.&lt;/p&gt;
&lt;h2 id=&quot;pascal-is-fast&quot;&gt;Pascal is fast&lt;/h2&gt;
&lt;p&gt;One of the reasons why the early Turbo Pascal was a huge success was the speed of the compiler. Even on older hardware code was compiled in a few seconds. In comparison to other compilers this is still true today.&lt;/p&gt;
&lt;p&gt;But despite the fast compilation of code, the compiled code itself is very competitive to applications developed in plain C, C++ or Java due to the highly optimization for different processor architectures, allowing the program to run at a very high speed and with little memory consumption.&lt;/p&gt;
&lt;h2 id=&quot;pascal-is-verbose&quot;&gt;Pascal is verbose&lt;/h2&gt;
&lt;p&gt;This is maybe the fact, that most developers are annoyed about: the absence of braces and the very verbose syntax of the language. As an example, instead of opening and closing braces, Pascal uses the &lt;code&gt;begin&lt;/code&gt; and &lt;code&gt;end&lt;/code&gt; keywords for blocks. The &lt;code&gt;if&lt;/code&gt; keyword is complemented by the word &lt;code&gt;then&lt;/code&gt;. As you can see, the whole syntax is readable like plain English. If you start to cry now, you should consider one important question by yourself: &lt;em&gt;What is more important?&lt;/em&gt; The ability to have a short syntax to write code fast &lt;em&gt;or&lt;/em&gt; the possibility to read and understand code that was written by other developers or even by you a year ago? I’m in favour of the second fact and I really enjoy that verboseness.&lt;/p&gt;
&lt;h2 id=&quot;pascal-has-good-documentation&quot;&gt;Pascal has good documentation&lt;/h2&gt;
&lt;p&gt;A language without a good documentation is only half the value. The team behind Free Pascal has done a very good job. You can browse the whole language documentation as well as the documention about the compiler itself, the &lt;em&gt;Runtime Library (RTL)&lt;/em&gt;, &lt;em&gt;Free Component Library (FCL)&lt;/em&gt; and the &lt;em&gt;Lazarus Component Library (LCL)&lt;/em&gt;. In addition to this you will find many examples in the &lt;em&gt;Free Pascal Wiki&lt;/em&gt;, but this takes us to the fact that…&lt;/p&gt;

&lt;p&gt;Beside the official wiki, there is also an official forum where Free Pascal and Lazarus users will answer your questions. If you’re active on Google+ you can have a look at the &lt;em&gt;Google+ Free Pascal / Lazarus IDE Community&lt;/em&gt;, too. There are several (althoug not many) Object Pascal related conferences as well as some local Free Pascal and Lazarus meetups. And with the &lt;em&gt;Blaise Pascal Magazine&lt;/em&gt; you will find a regular publication which offers a broad selection of articles about Delphi, Free Pascal, Lazarus and Object Pascal in general.&lt;/p&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;Object Pascal is really worth a look. Don’t let you discourage by people that tell you that Pascal is out of date. It is definetly not! There are many great projects out there that prove how strong the language is: from the Lazarus IDE itself to high performance 3D-Game engines like the &lt;em&gt;Castle Game Engine&lt;/em&gt;, which compiles your games for Android and iOS, too. If you’re interested in the path aside of the mainstream languages, have a look at some of the resources I mentioned. Or simply install Free Pascal and Lazarus and try out the language for yourself!&lt;/p&gt;

</description>
<pubDate>Tue, 17 Oct 2017 12:28:22 +0000</pubDate>
<dc:creator>samuell</dc:creator>
<og:title>Why I use Object Pascal</og:title>
<og:description>Reasons why I use the Object Pascal programming language and specifically Free Pascal</og:description>
<og:image>https://dubst3pp4.github.io/img/dubst3pp4-avatar.png</og:image>
<og:url>https://dubst3pp4.github.io/post/2017-10-03-why-i-use-object-pascal/</og:url>
<og:type>website</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://dubst3pp4.github.io/post/2017-10-03-why-i-use-object-pascal/</dc:identifier>
</item>
<item>
<title>Adding Kubernetes support to the Docker platform</title>
<link>https://www.docker.com/kubernetes</link>
<guid isPermaLink="true" >https://www.docker.com/kubernetes</guid>
<description>&lt;h2&gt;Adding Kubernetes support in the Docker platform&lt;/h2&gt;			&lt;p&gt;The Docker platform is getting support for Kubernetes. This means that developers and operators can build apps with Docker and seamlessly test and deploy them using both Docker Swarm and Kubernetes.&lt;/p&gt;

&lt;p&gt;We’re adding Kubernetes support in both Docker Community Edition on the desktop for developers using Windows and macOS, and in Docker Enterprise Edition. The bulk of the Kubernetes integration work happens in the open in the Moby Project.&lt;/p&gt;
											&lt;img class=&quot;image_simple&quot; src=&quot;https://www.docker.com/sites/default/files/dockercon-2017-eu.001.jpeg&quot; alt=&quot;infographic image&quot; title=&quot;infographic image&quot;/&gt;&lt;img class=&quot;retina&quot; src=&quot;https://www.docker.com/sites/default/files/dockercon-2017-eu.001.jpeg&quot; alt=&quot;infographic image&quot; title=&quot;infographic image&quot;/&gt;</description>
<pubDate>Tue, 17 Oct 2017 08:44:57 +0000</pubDate>
<dc:creator>sz4kerto</dc:creator>
<og:type>website</og:type>
<og:url>https://www.docker.com/kubernetes</og:url>
<og:title>Kubernetes</og:title>
<og:image>https://www.docker.com/sites/default/files/social/docker_facebook_share.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.docker.com/kubernetes</dc:identifier>
</item>
<item>
<title>Bomb kills journalist who exposed Malta&amp;#039;s ties to tax havens</title>
<link>https://apnews.com/eec3f8b5b9274e7e8e7545136b809c94/Bomb-kills-reporter-who-covered-Malta%27s-%27Panama-Papers%27-link?utm_campaign=SocialFlow&amp;utm_source=Twitter&amp;utm_medium=AP</link>
<guid isPermaLink="true" >https://apnews.com/eec3f8b5b9274e7e8e7545136b809c94/Bomb-kills-reporter-who-covered-Malta%27s-%27Panama-Papers%27-link?utm_campaign=SocialFlow&amp;utm_source=Twitter&amp;utm_medium=AP</guid>
<description>&lt;p&gt;VALLETTA, Malta (AP) — A Maltese investigative journalist who exposed the island nation's links to offshore tax havens through the leaked Panama Papers was killed Monday when a bomb exploded in her car, the prime minister said.&lt;/p&gt;
&lt;p&gt;Daphne Caruana Galizia, 53, had just driven away from her home in Mosta, a large town on Malta's main island, when the bomb went off, sending the vehicle's wreckage spiraling over a wall and into a field, Prime Minister Joseph Muscat said.&lt;/p&gt;

&lt;p&gt;Caruana Galizia's death resulted from a &quot;barbaric attack&quot; that also amounted to an assault on freedom of expression, Muscat said. He said the journalist &quot;was one of my harshest critics, on a political and personal level&quot; as he denounced her slaying.&lt;/p&gt;
&lt;p&gt;One of the topics she examined was the Maltese content in the Panama Papers leaked in 2016. She wrote that Muscat's wife, the country's energy minister and the government's chief-of-staff had offshore holdings in Panama to receive money from Azerbaijan.&lt;/p&gt;
&lt;p&gt;Muscat and his wife, Michelle, denied they had companies in Panama.&lt;/p&gt;
&lt;p&gt;Caruana Galizia filed a police report two weeks ago saying she was receiving threats, law enforcement officials told Malta news outlets on Monday.&lt;/p&gt;
&lt;p&gt;The slain journalist had written a twice-weekly column for The Malta Independent since 1996 and wrote a blog, &quot;Running Commentary.&quot;&lt;/p&gt;
&lt;p&gt;A half hour before she was killed, she posted to her website an item about a libel claim the prime minister's chief of staff had brought against a former opposition over comments the latter made about corruption.&lt;/p&gt;
&lt;p&gt;Caruana Galizia herself had been sued for libel over blog entries. Opposition leader Adrian Delia sued her over stories linking him to a prostitution racket in London. Economy Minister Chris Cardona claimed libel when she wrote that he visited a brothel while in Germany on government business.&lt;/p&gt;
&lt;p&gt;Monday evening's Parliament session was scrapped, except for briefings about the bombing given by Muscat and Delia, who called the reporter's slaying a &quot;political murder.&quot;&lt;/p&gt;
&lt;p&gt;Muscat said he has asked the U.S. government and the FBI for help investigating the car bombing.&lt;/p&gt;
&lt;p&gt;Caruana Galizia is survived by her husband and three sons. One son, Matthew, was on the International Consortium of Investigative Journalists team that won the Pulitzer Prize for its work on the Panama Papers scandal.&lt;/p&gt;
&lt;p&gt;The leak exposed the identities of rich and powerful people around the world who allegedly had offshore holdings in Panama.&lt;/p&gt;

&lt;p&gt;Caruana Galizia's family has asked the Courts of Malta to replace the magistrate assigned to conduct the inquiry into the journalist's death.&lt;/p&gt;
&lt;p&gt;The family said the magistrate, Consuelo Scerri Herrera, &quot;in her personal capacity, had launched judicial procedures against (Caruana Galizia) regarding comments she had written.&quot;&lt;/p&gt;
&lt;p&gt;Caruana Galizia for many years was a harsh critic of Malta's Labor party and government. More recently she had expanded her criticism to include the opposition Nationalist Party.&lt;/p&gt;
&lt;p&gt;Her slaying drew swift denunciations in the tiny EU nation.&lt;/p&gt;
&lt;p&gt;&quot;Daphne played a vitally important role in unearthing serious allegations of money laundering and corruption in Malta, including those involving senior figures in the Maltese government,&quot; said Sven Giegold, a Greens member in the European Parliament.&lt;/p&gt;
&lt;p&gt;Italian newsweekly L'Espresso, which has also written about alleged corruption linked to Malta, said the reporter's murder demonstrated that a well-documented expose' &quot;is perceived as a danger by the powerful and by organized crime.&quot;&lt;/p&gt;
&lt;p&gt;European Parliament President Antonio Tajani in a tweet called the development a &quot;tragic example of a journalist who sacrificed her life to search for the truth.&quot;&lt;/p&gt;
</description>
<pubDate>Tue, 17 Oct 2017 07:55:26 +0000</pubDate>
<dc:creator>djug</dc:creator>
<og:url>https://apnews.com/eec3f8b5b9274e7e8e7545136b809c94/Bomb-kills-reporter-who-covered-Malta%27s-%27Panama-Papers%27-link?utm_campaign=SocialFlow&amp;utm_source=Twitter&amp;utm_medium=AP</og:url>
<og:image>https://storage.googleapis.com/afs-prod/media/media:23b4aaa84ce44d60acf4b130e304885b/800.jpeg</og:image>
<og:type>article</og:type>
<og:title>Bomb kills journalist who exposed Malta's ties to tax havens</og:title>
<og:description> VALLETTA, Malta (AP) — A Maltese investigative journalist who exposed the island nation's links to offshore tax havens through the leaked Panama Papers was killed Monday when a bo</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://apnews.com/eec3f8b5b9274e7e8e7545136b809c94/Bomb-kills-reporter-who-covered-Malta%27s-%27Panama-Papers%27-link</dc:identifier>
</item>
<item>
<title>Creator of cURL wins Polhem Prize 2017</title>
<link>https://daniel.haxx.se/blog/2017/10/16/polhemspriset-2017/</link>
<guid isPermaLink="true" >https://daniel.haxx.se/blog/2017/10/16/polhemspriset-2017/</guid>
<description>&lt;p&gt;I’m awarded the Swedish &lt;a href=&quot;http://www.polhemspriset.se/&quot;&gt;Polhem Prize&lt;/a&gt; 2017. (Link to a Swedish-speaking site.)&lt;/p&gt;
&lt;p&gt;The Polhem Prize (Polhemspriset in Swedish), is awarded “&lt;em&gt;for a high-level technological innovation or an ingenious solution to a technical problem.&lt;/em&gt;” The Swedish innovation must be available and shown competitive on the open market.&lt;/p&gt;
&lt;p&gt;This award has been handed out in the name of the scientist and inventor &lt;a href=&quot;https://en.wikipedia.org/wiki/Christopher_Polhem&quot;&gt;Christopher Polhem&lt;/a&gt;, sometimes called &lt;em&gt;the father of Swedish engineering&lt;/em&gt;, since 1878. It is Sweden’s oldest and most prestigious award for technological innovation.&lt;/p&gt;
&lt;p&gt;I first got the news on the afternoon on September 24th and I don’t think I exaggerate much if I say that I got a mild shock. &lt;em&gt;Me? A prize? How did they even find me or figure out what I’ve done?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://curl.haxx.se/&quot;&gt;&lt;img class=&quot;alignright size-thumbnail wp-image-8943&quot; src=&quot;https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol-200x175.png&quot; alt=&quot;&quot; width=&quot;200&quot; height=&quot;175&quot; srcset=&quot;https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol-200x175.png 200w, https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol-450x394.png 450w, https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol-768x672.png 768w, https://daniel.haxx.se/blog/wp-content/uploads/2016/05/curl-symbol.png 789w&quot; sizes=&quot;(max-width: 200px) 100vw, 200px&quot;/&gt;&lt;/a&gt;I get this award for having worked on curl for a very long time, and by doing this having provided an Internet infrastructure of significant value to the world. I’ve never sold it nor earned much of commercial income from this hobby of mine, but my code now helps to power an almost unimaginable amount of devices, machines and other connected things in the world.&lt;/p&gt;
&lt;p&gt;I’m not used to getting noticed or getting awards. I’m used to sitting by myself working on bugs, merging patches and responding to user emails. I don’t expect outsiders to notice what I do much and I always have a hard time to explain to friends and “mortals” what it is I actually do.&lt;/p&gt;
&lt;p&gt;I accept this prize, not as a single inventor or brilliant mind of anything, but like the captain of a boat with a large and varying crew without whom I would never have reached this far. I’m excited that the nominee board found me and our merry project and that they were open-minded enough to see and realize the value and position of an open source project that is used literally &lt;em&gt;everywhere&lt;/em&gt;. I feel deeply honored.&lt;/p&gt;
&lt;p&gt;I’m fascinated the award nominee group found me and I think it is super cool that an open source project gets this attention and acknowledgement.&lt;/p&gt;
&lt;p&gt;Apart from the honor, the prize comes in form of a monetary part (250K SEK, about 31,000 USD) and a gold medal with Polhem’s image on. See this blog post’s featured image. The official award ceremony will take place in a few days at the Technical Museum in Stockholm. I’m then supposed to get the medal handed to me by his royal highness Carl Gustav XVI, the king of Sweden. An honor very few people get to experience. Especially very few open source hackers.&lt;/p&gt;
&lt;h2&gt;Thank you&lt;/h2&gt;
&lt;p&gt;While I have so many people to thank for having contributed to my (and curl’s) success, there are some that have been fundamental.&lt;/p&gt;
&lt;p&gt;I’d like to specifically highlight my wife Anja and my kids Agnes and Rex who are the ones I routinely steal time away from to instead spend on curl. They’re the ones who I drift away from when I respond to issues on the phones or run off to the computer to “just respond to something quickly”. They’re &lt;em&gt;the best&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I’d like to thank Björn, my brother, who chipped in half the amount of money for that first Commodore 64 we purchased back in 1985 and which was the first stepping stone to me being here.&lt;/p&gt;
&lt;p&gt;I’d like to thank all my friends and team mates in the curl project without whom curl would’ve died as an infant already in the 1990s. It is with honest communication, hard work and good will that good software is crafted. (Well, there might be some more components necessary too, but let’s keep it simple here.)&lt;/p&gt;
&lt;p&gt;I’d like to thank everyone who ever said thanks to me for curl and told me that what I did or brought to the world actually made a difference or served a purpose. Positive feedback is what drives me. It is the fuel that keeps me going.&lt;/p&gt;
&lt;h2&gt;How will this award affect me and the curl project going forward?&lt;/h2&gt;
&lt;p&gt;I hope the award will strengthen my spine even more in knowing that we’re going down the right path here. Not necessarily with every single decision or choice we do, but the general one: we do things open source, we do things together and we work long-term.&lt;/p&gt;
&lt;p&gt;I hope the award puts a little more light and attention on the world of open source and how this development model can produce the most stellar and robust software components you can think of – without a “best before” stamp.&lt;/p&gt;
&lt;p&gt;I would like the award to make one or two more people find and take a closer look at the curl project. To dive in and contribute, in one way or another. We always need more eyes and hands!&lt;/p&gt;
&lt;p&gt;Further, I realize that this award might bring some additional eyes on me who will watch how I act and behave. I intend to keep trying to do the right thing and act properly in every situation and I know my friends and community will help me stand straight – no matter how the winds blow.&lt;/p&gt;
&lt;h2&gt;What will I do with the money?&lt;/h2&gt;
&lt;p&gt;I intend to take my family with me on an extended vacation trip to New Zealand!&lt;/p&gt;
&lt;p&gt;Hopefully there will be some money left afterward, that I hope to at least in part spend on curl related activities such as birthday cakes on the pending curl 20th birthday celebrations in spring 2018…&lt;/p&gt;
&lt;h2&gt;But really, how many use curl?&lt;/h2&gt;
&lt;p&gt;Virtually every smart phone has one or more curl installs. Most modern cars and television sets do as well. Probably just about all Linux servers on the Internet run it. Almost all PHP sites on the Internet do. Portable devices and internet-connected machines use it extensively. curl sends crash-reports when your Chrome or Firefox browser fail. It is the underlying data transfer engine for countless systems, languages, programs, games and environments.&lt;/p&gt;
&lt;p&gt;Every single human in the connected world use something that runs curl every day. Probably more than once per day. Most have it installed in devices they carry around with them.&lt;/p&gt;
&lt;p&gt;It is installed and runs in &lt;strong&gt;tens of billions of instances&lt;/strong&gt;, as most modern-life rich people have numerous installations in their phones, with their web browsers, in their tablets, their cars, their TVs, their kitchen appliances etc.&lt;/p&gt;
&lt;p&gt;Most humans, of course, don’t know this. They use devices and apps that just work and are fine with that. curl is just a little piece in the engines of those systems.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://curl.haxx.se/&quot;&gt;&lt;img class=&quot;alignnone size-large wp-image-8936&quot; src=&quot;https://daniel.haxx.se/blog/wp-content/uploads/2016/04/good_curl_logo-1200x459.png&quot; alt=&quot;&quot; width=&quot;474&quot; height=&quot;181&quot; srcset=&quot;https://daniel.haxx.se/blog/wp-content/uploads/2016/04/good_curl_logo-1200x459.png 1200w, https://daniel.haxx.se/blog/wp-content/uploads/2016/04/good_curl_logo-200x76.png 200w, https://daniel.haxx.se/blog/wp-content/uploads/2016/04/good_curl_logo-450x172.png 450w, https://daniel.haxx.se/blog/wp-content/uploads/2016/04/good_curl_logo-768x294.png 768w&quot; sizes=&quot;(max-width: 474px) 100vw, 474px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 17 Oct 2017 05:33:38 +0000</pubDate>
<dc:creator>bkmn</dc:creator>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://daniel.haxx.se/blog/2017/10/16/polhemspriset-2017/</dc:identifier>
</item>
<item>
<title>The war to sell you a mattress</title>
<link>https://www.fastcompany.com/3065928/sleepopolis-casper-bloggers-lawsuits-underside-of-the-mattress-wars</link>
<guid isPermaLink="true" >https://www.fastcompany.com/3065928/sleepopolis-casper-bloggers-lawsuits-underside-of-the-mattress-wars</guid>
<description>&lt;div readability=&quot;8&quot;&gt;
&lt;p&gt;One day in the spring of 2016 I mentioned to a friend that I needed a new mattress. Mine was a sunken hand-me-down that had become about as comfortable as concrete.&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;ad-wrapper ad-wrapper--mobileparallax_1&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;39&quot;&gt;
&lt;p&gt;“I know a guy who can give you a &lt;em&gt;free&lt;/em&gt; mattress,” my friend said.&lt;/p&gt;
&lt;p&gt;This sounded too good to be believed, but my friend protested it was true: “This guy Kenny, he reviews mattresses online, and companies just send them to him. He can’t get rid of them fast enough.” Not long after came the email introduction: “David, meet Kenny.”&lt;/p&gt;
&lt;p&gt;Journalists aren’t supposed to accept freebies. But the one thing I was certain of was that I would never write an article about online mattress reviewing, a subject so self-evidently boring that I became a little sad just imagining it. So when Kenny replied that he expected to have a mattress to offload soon, I only asked him what sort of wine he liked.&lt;/p&gt;
&lt;p&gt;Kenny Kline turned out to live just blocks from me in Brooklyn, and I walked over a few days later with a nice bottle of red under one arm. Kenny buzzed me in and I stepped inside the entryway, where I found a queen-size mattress already waiting for me, ready to grab and go if I pleased. But I wanted to give Kenny his wine.&lt;/p&gt;
&lt;p&gt;I called up to Kenny, and he emerged from his apartment to greet me on the stairs. He was tall and good-looking, with a kind of brogrammer affability. Later I’d learn he had studied physics and finance at Washington University in St. Louis, where he rowed crew and was a Beta Theta Phi brother. I’d also look up some of his mattress reviewing videos.&lt;/p&gt;
&lt;p class=&quot;video-wrapper&quot;&gt;&lt;iframe width=&quot;525&quot; height=&quot;295&quot; src=&quot;https://www.youtube.com/embed/AD9lg11Yyv8?feature=oembed&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_1&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;54.889502762431&quot;&gt;
&lt;p&gt;I asked Kenny about his unusual hobby, figuring that reviewing mattresses was something he did for beer money. But he surprised me by saying that this was what he and his business partner, a guy named Joe Auer, did for a living; their two websites, Mattress Clarity and Slumber Sage, were exclusively dedicated to reviewing mattresses.&lt;/p&gt;
&lt;p&gt;Kenny told me that in the last few years, numerous mattress reviewing websites had sprung up. Then he made a strangely implausible claim: Just a few days before, the mattress e-commerce company Casper had sued three bloggers–competitors of Kenny’s–whose reviews Casper didn’t like. Kenny and his business partner, fortunately, had been spared.&lt;/p&gt;
&lt;img class=&quot;size-medium wp-image-40476458 lazyload&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;300&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-kenny-kline.jpg&quot;/&gt;&lt;strong&gt;Kenny Kline&lt;/strong&gt;
&lt;p&gt;I called an Uber and hauled my free mattress up to my third-floor walkup apartment. The mattress had a poofy marshmallowy top that I didn’t quite love, but you get what you pay for. I got used to it as the months went by.&lt;/p&gt;
&lt;p&gt;I might have forgotten about Casper’s rumored lawsuits altogether, if the mattress brand hadn’t kept following me everywhere I went. That summer and through the fall, Casper ads sprouted all over New York: beautiful ads, often lining subway cars, featuring cartoon creatures curled up together on mattresses. In Casper’s cartoons, even the big bad wolf slept peacefully next to three little pigs.&lt;/p&gt;
&lt;p&gt;In October I wrote Kenny to ask what became of those lawsuits. “One of the bloggers just publicized it,” Kenny wrote back, providing a link to a website, Sleepopolis.com.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-40475770 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;382&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-casper-ads.jpg&quot;/&gt;[Photo: Flickr user &lt;a href=&quot;https://www.flickr.com/photos/happyskrappy/16398482367&quot; rel=&quot;nofollow&quot;&gt;jenn&lt;/a&gt;]“Casper Sues Sleepopolis with Federal Lawsuit,” read the headline on the page I opened. The post was written by a guy named Derek Hales, the site’s proprietor. Derek’s photo showed a pale, skinny twentysomething with freckles and short red hair. I clicked around on his site. Derek Hales evidently took mattress reviewing seriously, rating the firmness of mattresses on a scale from one to 10, cutting them open to measure the exact thickness of the foam.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_2&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;49&quot;&gt;
&lt;p&gt;I returned to the page outlining the lawsuit.&lt;/p&gt;
&lt;p&gt;“From the very first day Sleepopolis launched I knew I wanted to build something different,” wrote Derek. “Reviews rooted in honesty, transparency, integrity, and clarity, without the marketing speak or fluff. Guided by these principles I feel like Sleepopolis readers have the right to know that Casper Sleep has filed a federal lawsuit in New York, suing both Sleepopolis and me, personally.”&lt;/p&gt;
&lt;p&gt;So it was true. I scratched my head. Casper was on its way to becoming a 750-million-dollar company. It was the hottest of the bed-in-a-box disruptors, with investments from celebrities like Ashton Kutcher and Nas. And it was picking on some skinny blogger from Arizona?&lt;/p&gt;
&lt;p&gt;I called my editor and confessed that in a moment of weakness I had accepted a free mattress from an online mattress reviewer named Kenny, and that I wanted to write about this bizarre industry and its even more bizarre David-and-Goliath legal battle.&lt;/p&gt;
&lt;p&gt;I couldn’t know it then, but the outcome of that battle would influence the purchase decisions of many thousands, if not millions, of people seeking a good night’s sleep. It would also reveal just how thoroughly the internet and the businesses that thrived there had blurred the lines between product reviews and advertisements. All I’d wanted was a mattress, but what I got was a look at a little-known and hugely lucrative annex of e-commerce, one where the relationships can often get a little too comfy—until they’re not.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;I wanted to learn&lt;/strong&gt; &lt;strong&gt;how&lt;/strong&gt; Derek Hales had gotten into mattress reviewing, so I called him up in Arizona. He had the nerdy intensity of a Jesse Eisenberg character. Derek told me he’d always been entrepreneurial; he’d helped pay his college tuition by creating a &lt;em&gt;World of Warcraft&lt;/em&gt; blog. After graduating from Kansas State in 2010 with a business degree, he spent the next few years working for a company outside Phoenix, doing search engine optimization, or SEO, the art of getting web pages to rank higher in Google searches.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobileparallax_2&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;58&quot;&gt;
&lt;p&gt;In 2012, Derek messaged Samantha Niezwaag, a math teacher, on ChristianMingle.com. “The emails soon turned into novels,” Samantha would later recall. Both had grown up in the Midwest and the South; both were obsessed with &lt;em&gt;Lord of the Rings&lt;/em&gt;. A flirty conversation turned to the question of whether they could squeeze 78 dates into 25 weeks, which Derek remarked would mean 3.12 dates per week.&lt;/p&gt;
&lt;p&gt;“When he gave me two decimal places,” said Samantha, “he had me hooked.” On their engagement website, Samantha called Derek “Godly, passionate, loyal, supportive, ambitious, intelligent, and funny”; they got married in May of 2014.&lt;/p&gt;
&lt;p&gt;The young husband and wife needed a new mattress, but were shocked by the prices at the local mattress store: the average queen-size was around $1,500, but as much as $5,000 for a fancy Tempur-Pedic. One of Derek’s coworkers told him about a two-year-old Phoenix-based company called Tuft &amp;amp; Needle, which sold its queen-size mattress directly to consumers online for just $600. Though buying such a large item online felt a little unusual, there was a 100-day trial period, so what was the risk?&lt;/p&gt;
&lt;p&gt;When it arrived, Derek and Samantha found the Tuft &amp;amp; Needle too firm for their tastes, so they organized a donation pickup and received their refund. Then they tried their luck with another online mattress company called Casper, which had just launched. When their Casper mattress arrived, Derek and Samantha found they liked it enough to keep it.&lt;/p&gt;
&lt;p&gt;A few weeks later, in September of 2014, Derek spotted an opportunity. He registered the domain Sleepopolis-Mattress-Reviews.com and threw together a quick website comparing his experiences with Tuft &amp;amp; Needle and Casper (he eventually migrated his content to Sleepopolis.com, which he had also registered). A week later, Derek and Samantha posted a positive video review of their Casper on YouTube.&lt;/p&gt;
&lt;p class=&quot;video-wrapper&quot;&gt;&lt;iframe width=&quot;525&quot; height=&quot;295&quot; src=&quot;https://www.youtube.com/embed/8WeoO3bwD1U?feature=oembed&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_3&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;55&quot;&gt;
&lt;p&gt;“Pretty quickly, it seemed I had struck a chord with a lot of people,” Derek recalled. The Casper video eventually racked up 25,000 views.&lt;/p&gt;
&lt;p&gt;From the beginning, Derek monetized his site and YouTube channel using what are called “referral links,” or “affiliate links.” These special links were embedded with a tracking code. If a consumer clicked from Derek’s site through to a mattress company’s website (like Casper.com) and made a purchase within 30 days or so, then that company would pay Derek a reward.&lt;/p&gt;
&lt;img class=&quot;size-large wp-image-40476837 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;295&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-derek-hales-horiz.jpg&quot;/&gt;&lt;strong&gt;Derek Hales&lt;/strong&gt;
&lt;p&gt;For each mattress he reviewed, Derek would either negotiate a commission structure directly with the mattress company, or accept an existing offer via an intermediary site like ShareASale.com (which has aggregated these so-called affiliate marketing opportunities since 2000). Then Derek would put the affiliate links at the bottom of his reviews. Sometimes these links took the form of a digital coupon users could click, which would apply a discount at checkout.&lt;/p&gt;
&lt;p&gt;Derek disclosed the nature of these affiliate relationships in a corner of his website, though not the exact terms. In those first months, he told me, Derek typically received a $50 digital Amazon gift card for every mattress sold (or 5% on a roughly $1,000 mattress, a commission rate that had become standard in affiliate marketing).&lt;/p&gt;
&lt;p&gt;Affiliate marketing is about as old as e-commerce, but the industry got a kick-start after Amazon.com launched an affiliate program in 1996. The industry has since ballooned, with around $4.5 billion changing hands in 2016 just in the U.S. Affiliate marketing is even becoming an important source of revenue for legacy publishers like &lt;em&gt;The New York Times&lt;/em&gt;: Last year the paper paid $30 million for two review sites, &lt;em&gt;The Wirecutter&lt;/em&gt; and &lt;em&gt;The Sweethome&lt;/em&gt;, which have built a bustling business around affiliate links. But a much larger share of the affiliate marketing economy is made up of people like Derek Hales, stray blogger-entrepreneurs who hunt for emerging categories of products that consumers are seeking guidance on, then jockey for top position in related Google searches (like “best mattresses” or “mattress reviews”).&lt;/p&gt;
&lt;p&gt;Derek was smart and talented, but he was also lucky. Through a series of coincidences–getting married in May 2014; living in Phoenix, where Tuft &amp;amp; Needle was based; disliking that mattress and trying a Casper instead; having some SEO savvy–he had stumbled into early-mover advantage in a category primed to explode.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_4&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;62&quot;&gt;
&lt;p&gt;“There was a waterfall of companies launching,” he recalled. Nipping at the heels of Casper and Tuft &amp;amp; Needle came other direct-to-consumer mattress companies like Leesa, Yogabed, Purple, and GhostBed; in time, over 100 brands in all. Most were new companies, while others were e-commerce divisions from legacy brands scrambling to make up lost ground amidst a tectonic shift in how consumers were beginning to buy mattresses. In the $14 billion U.S. mattress market, online mattresses only made up $300 million in sales two years ago; this year, sales may reach $1.2 billion. All of these emerging brands wanted Derek to review their products like he had the Casper–and all were willing to pay Derek a bounty. Like Kenny Kline in Brooklyn, Derek was soon handing out free mattresses he’d reviewed to his Phoenix friends and neighbors, and eventually had mattresses piling up in a spare room.&lt;/p&gt;
&lt;p&gt;In February 2015, Derek quit his day job to focus on Sleepopolis.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-medium wp-image-40475756 lazyload&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;300&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-sleepopolis-Logo.jpg&quot;/&gt;[Image: courtesy of Sleepopolis]It was a smart gamble. In the months and years that followed, Derek would build his site into the most-trafficked web destination for people seeking information on mattresses, beating out a raft of competitors. In total, his YouTube reviews have garnered 2.5 million views, while the site itself would grow to attract over half a million visits every month. If you happened to search for mattress reviews online in the last three years, odds are you landed on Sleepopolis. Derek built his site into the number-one Google hit for countless popular queries related to mattresses.&lt;/p&gt;
&lt;p&gt;Our phone call taught me a great deal about this strange backwater of the internet economy. But a mystery remained. Throughout those first, heady months, Derek maintained a good relationship with Casper. How, then, by late 2016, had it gone so sour?&lt;/p&gt;
&lt;p&gt;I asked Derek, but he couldn’t tell me. With Casper’s lawsuit against him pending, Derek’s lawyer forbade him from even mentioning the company by name. I would have to dive into a growing stack of mattress lawsuits to find out.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;As Casper flourished through&lt;/strong&gt; 2014 and early 2015, I learned, it enjoyed a mutually beneficial relationship with Sleepopolis and similar sites. For many bloggers, in fact, Casper was among the first mattress companies to offer affiliate commissions, leading its competitors to respond in turn. The reviews sites were key parts of what marketers call the “purchase funnel,” converting a vague interest in mattresses into awareness of a specific brand, and often the decision to buy it. Many consumers were Googling terms like “best mattress,” landing on sites like Sleepopolis, and learning about e-tailers like Casper for the first time.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_5&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;43&quot;&gt;
&lt;p&gt;&lt;img class=&quot;wp-image-40472580 size-medium lazyload&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;300&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-PhilipKrim-CEO.jpg&quot;/&gt;Casper CEO &lt;strong&gt;Phillip Krim&lt;/strong&gt; [Photo: Casper]Indeed, one would never have predicted looming lawsuits from a friendly 2015 email exchange, in which Casper CEO Philip Krim attempted to court an affiliate marketer named Jack Mitcham, who ran a Sleepopolis-like site called Mattress Nerd.&lt;/p&gt;
&lt;p&gt;In January 2015, Krim wrote Mitcham that while he supported objective reviews, “it pains us to see you (or anyone) recommend a competitor over us.”&lt;/p&gt;
&lt;p&gt;Krim went on: “As you know, we are much bigger than our newly formed competitors. I am confident we can offer you a much bigger commercial relationship because of that. How would you ideally want to structure the affiliate relationship? And also, what can we do to help to grow your business?”&lt;/p&gt;
&lt;p&gt;When Mitcham responded to say that he and his wife found the Casper mattress uncomfortable, Krim persisted:&lt;/p&gt;
&lt;p&gt;“Is there any way I could get you to spend more time on the Casper?…We would even be happy to fly you out to NYC to tell you more about the product or have you spend a long weekend on one. I’d also love to find ways to work more closely. We would love to become your biggest referral check.”&lt;/p&gt;
&lt;p&gt;Krim then upped his offer, promising to boost Mitcham’s payouts from $50 to $60 per sale, and offering his readers a $40 coupon. “I think that will move sales a little more in your direction,” replied Mitcham on March 25, 2015. In the months that followed, Mattress Nerd would become one of Casper’s leading reviews site partners. (The emails surfaced due to another mattress lawsuit, &lt;em&gt;GhostBed v. Krim&lt;/em&gt;; if similar correspondence exists with Derek Hales, it has not become public.)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_6&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;46.951194184839&quot;&gt;
&lt;p&gt;Just a few months later, in June 2015, something big happened that would ripple through the whole mattress ecosystem: Casper received $55 million in Series B investment at an implied half-billion-dollar valuation, making it the front-runner in the online mattress wars.&lt;/p&gt;
&lt;p&gt;The company started spending relentlessly on advertising, and soon just about everyone had heard of Casper, giving the startup a measure of escape velocity from its competitors. Casper’s sales topped $200 million last year, though it declines to say whether it is profitable. &lt;em&gt;Fortune&lt;/em&gt; has estimated Casper’s annual marketing budget to be $80 million.&lt;/p&gt;
&lt;p&gt;As Casper grew, more mattress reviews sites began mushrooming up in its shadow, earning quick commissions while creating little value for Casper. Casper decided to allow the contracts it held with affiliates to expire, “to reassess the situation,” Casper CEO Krim told me.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-40478520 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;295&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-5-why-is-casper-suing-mattress-bloggers.jpg&quot;/&gt;[Photo: Flickr user &lt;a href=&quot;https://www.flickr.com/photos/irisphotos/24466827686&quot; rel=&quot;nofollow&quot;&gt;sk&lt;/a&gt;]In July 2015–a month after the $55 million investment–Krim revived his email chain with Mattress Nerd’s Mitcham, informing him that while Casper had “decided to sunset” its affiliate relationships, it nevertheless would be interested in exploring “economic relationships beyond the affiliate program structure.”&lt;/p&gt;
&lt;p&gt;“Nothing would make us happier than to pay you a ton of money,” Krim elaborated in his next email, “but we need to do it in a context of being accretive to Casper. Currently you actively endorse a competing product on our review page. What can we do not to have you endorse another product as superior to ours? I am certain we can be a better partner to you than Leesa.”&lt;/p&gt;
&lt;p&gt;It appears that Krim’s dialogue with Mattress Nerd did not end in a comfortable place. Likewise for negotiations Krim may have been having with Sleepopolis or Sleep Sherpa. That summer, Casper declined to renew affiliate relationships with all mattress bloggers. (It eventually reinstated some.)&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_7&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;61.887732005432&quot;&gt;
&lt;p&gt;An antagonism set in between Casper and at least some of these reviewers, a few of whom conspicuously began to downgrade their assessment of the company’s mattress, and to more vocally favor competitors that did still pay commissions, like Leesa.&lt;/p&gt;
&lt;p&gt;By April 2016, Derek had updated his assessment of the Casper too, writing that, after 18 months of reviewing competing mattresses, he could no longer recommended the mattress. He even added a little yellow box near the top of that page, which read: “Thinking about buying a Casper? Do your homework! Check out these 4 mattress companies that Sleepopolis loves.”&lt;/p&gt;
&lt;img class=&quot;size-large wp-image-40478511 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;355&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-2-casper-mattress-review-Yellow-Box-highlight.jpg&quot;/&gt;Sleepopolis’s Casper review, as it appeared in June 2017, courtesy of archive.org View full size &lt;a href=&quot;https://assets.fastcompany.com/image/upload/v1507120834/fcweb/i-casper-mattress-review-close-up-Yellow-Box-copy-1_qjogyx.jpg&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.
&lt;p&gt;That little yellow box was a huge thorn in Casper’s side. If you Googled the search term “casper mattress review,” which about ten thousand people did per month, the first webpage Google served up was Derek’s review, with its poison box. Derek ranked first for that query, too.&lt;/p&gt;
&lt;p&gt;On April 29, 2016, Casper filed lawsuits against the owners of Mattress Nerd, Sleep Sherpa, and Sleepopolis (that is, Derek), alleging false advertising and deceptive practices.&lt;/p&gt;
&lt;p&gt;Mattress Nerd and Sleep Sherpa quickly settled their cases, and suddenly their negative Casper reviews disappeared from their sites, in what many onlookers speculated was a condition of the settlements. But by the end of 2016, when I started closely studying the lawsuits, Derek’s Casper review remained, defiantly, up on Sleepopolis. He was soldiering on in his legal battle with the mattress giant. People who knew him called Derek a fighter; one of his nicknames was “Halestorm.”&lt;/p&gt;
&lt;p&gt;Casper had another way of referring to him. Derek was “part of a surreptitious economy of affiliate scam operators who have become the online versions of the same commission-hungry mattress salesmen that online mattress shoppers have sought to avoid,” Casper’s lawsuit alleged. The company complained that Derek was not forthright enough about his affiliate relationships, noting his disclosures were buried in a remote corner of his site. This did violate recently issued FTC guidelines, and Derek updated his site to comply.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_8&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;41&quot;&gt;
&lt;p&gt;Casper wanted Derek’s behavior to be stopped, and it wanted monetary damages. “Casper estimates that Sleepopolis’s conduct has caused it millions of dollars of lost sales to date,” wrote Casper’s lawyers.&lt;/p&gt;
&lt;p&gt;In a motion to dismiss the case filed in July 2016, Derek blasted what he called Casper’s attempt at censorship. The statements on his site were fundamentally his honest opinions: He claimed he had become less enthusiastic about the Casper–which he still called a good mattress–only because equal or better mattresses had entered the market, sometimes at lower prices. (A Casper queen-size runs $950 today, a Leesa queen $940; Derek’s site also offered coupons that lowered the Leesa’s price.)&lt;/p&gt;
&lt;p&gt;In October 2016, after weighing both sides’ arguments, the judge agreed that while most of Derek’s statements were opinions, immune to a lawsuit, Derek had also made some statements of fact on his site: statements like “No review or content is paid for by any manufacturer or sleep company,” and “No member of Sleepopolis is employed by any mattress or sleep company.” If Casper could prove those statements false, it might have a claim for damages.&lt;/p&gt;
&lt;p&gt;The judge held that the case could proceed.&lt;/p&gt;
&lt;p&gt;The case would now move to the “discovery” phase, in which each side was entitled to acquire documents and deposition testimony from the other.&lt;/p&gt;
&lt;p&gt;Derek now faced the prospect of litigating for months, if not years, against a corporate behemoth in New York–a market where his lawyers’ fees were likely to top $750 an hour.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_9&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;50&quot;&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;At that rate,&lt;/strong&gt; how long could Derek afford to go on fighting?&lt;/p&gt;
&lt;p&gt;The question of just how much money Derek made off Sleepopolis interested everyone I spoke to. It had even been the subject of a gossipy, if rigorously argued, post on a site positioning itself as a gadfly of the mattress industry, HonestMattressReviews.com. (A court later determined that, despite the site’s name, the owner of Honest Mattress Reviews had concealed ties to the mattress company GhostBed.)&lt;/p&gt;
&lt;p&gt;According to the website analysis tool SimilarWeb, Derek referred 1.6 million visits to outside sites between February 2016 and July 2017. Much of this traffic went to Amazon.com (when Derek lacked a direct affiliate relationship, he was able to get at least some money as an affiliate of Amazon). A significant portion went to the mattress companies Purple, Loom &amp;amp; Leaf, and Nest Bedding.&lt;/p&gt;
&lt;p&gt;A Loom &amp;amp; Leaf executive told me they had paid Derek $100,000 in 2016; Nest Bedding’s CEO Joe Alexander said he had paid Derek a multiple of that. “My life changed because of Derek,” Alexander told me. “He made me a millionaire.”&lt;/p&gt;
&lt;p&gt;But by far the most traffic during that period–some 400,000 visits–was referred out to the website of Derek’s favorite mattress company, Leesa.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-medium wp-image-40476817 lazyload&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;289&quot; sizes=&quot;(max-width: 300px) 100vw, 300px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-joe-alexander-nest-bedding.jpg&quot;/&gt;Nest Bedding CEO &lt;strong&gt;Joe Alexander&lt;/strong&gt; [Photo: courtesy of Joe Alexander]Derek’s Leesa favoritism was no secret: he explicitly called it “Sleepopolis’s favorite mattress,” and a sidebar touting Leesa affiliate-link coupons graced nearly every page of the site. Mattress reviewers say their art entails recommending different mattresses to different types of sleepers, but in the 14 categories on his site for which the Leesa was eligible, Derek declared it first in seven of them, second or third in all but two of the rest. The Leesa was Sleepopolis’s best mattress for side sleepers, best mattress for kids, best mattress for back pain, and best mattress for sex.&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_10&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;292.906224996&quot;&gt;
&lt;p&gt;It was possible that Derek genuinely loved the Leesa above all other mattresses; he’d reviewed it favorably even before Casper cut off his payments. But many people I spoke to suggested that other things were possible, too. If most mattress companies paid around $50 per commission, other companies paid two or three times that, even as much as $250. In one email I saw, an unscrupulous mattress reviewer said companies regularly approached him offering to “buy” top placement on his site; so long as the reviewer liked the mattress, he’d happily negotiate a price. “Honestly, the FTC has to step in at some point and make review sites divulge what they are paid for each bed or brand,” Nest Bedding’s Joe Alexander, told me. “This industry is a freight train out of control.”&lt;/p&gt;
&lt;p&gt;Was Leesa playing this highest-bidder game with Sleepopolis? At first, I heard many rumors to that effect. I called Leesa’s CEO David Wolfe in February, in an effort to find out. The middle-aged Wolfe, though now a resident in Virginia Beach, retained a charming British accent, and was a former marketer himself. The mattress industry has long been attractive to marketers, I learned, even before the internet got involved. As a mattress industry analyst recently told Freakonomics Radio: “You have to be a strong marketer to be in the mattress industry, because they’re really selling identical, rectangular slabs.”&lt;/p&gt;
&lt;p&gt;Wolfe denied offering higher affiliate rates than competitors, saying he had always paid $50 per mattress, apart from one month when he had paid 60. He later repeated this assertion and had his lawyer call me to confirm it, and said he felt it was important for mattress companies and affiliates to operate on a level playing field.&lt;/p&gt;
&lt;p&gt;I asked Wolfe if he had ever offered Derek Hales a guaranteed income. Our friendly conversation took a swift turn. “The answer is no,” he said, adding, “You should leave this to the attorneys.” Later, he added, “I don’t want to say something that could affect a pending lawsuit where Leesa is not a party.”&lt;/p&gt;
&lt;p&gt;SimilarWeb suggested that Derek referred 400,000 visits to Leesa.com between February 2016 and July 2017. If you assumed that about one in 12 referred visits ultimately led to a purchase—a conservative estimate according to people in the mattress industry I interviewed—that would suggest Sleepopolis helped sell 33,000 mattresses. Even a $50 commission per mattress meant $1.6 million paid by Leesa to Derek over those 18 months. When I approached Leesa’s David Wolfe with these numbers, he called them inflated (SimilarWeb provides only estimates), but conceded that Derek was essentially Leesa’s top salesman, accounting for 18% of the brand’s total sales, which reached about $80 million last year.&lt;/p&gt;
&lt;p&gt;All told, these numbers suggested Derek may have been making as much as $2 million per year by 2016. And his site, in a hypothetical sale, would be worth a multiple of that. (A considerably less trafficked mattress-reviewing site recently went on the market for $1.4 million.)&lt;/p&gt;
&lt;p&gt;Derek had made millionaires among the new mattress entrepreneurs–and he himself was one of them. So while Derek’s pockets weren’t nearly so deep as Casper’s, they certainly weren’t shallow. He had stumbled into what was, outside of financial products, one of the more lucrative niches in affiliate marketing. If this was a David-and-Goliath battle, it was worth remembering that David became a king.&lt;/p&gt;
&lt;p&gt;Still, when his Manhattan lawyers first quoted their prices, Derek would have discovered that the cost of a fight to the bitter end–a trial by jury–could easily come to well over a million dollars itself.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;In February, Derek Hales faced&lt;/strong&gt; a new salvo: A letter from Casper’s attorney to the judge alleged that while Derek was reviewing Leesa’s mattresses enthusiastically, he was not only receiving affiliate commissions but also payments for SEO consulting he provided Leesa. Reading this, I suddenly understood David Wolfe’s skittishness about the last questions I had put to him over the phone.&lt;/p&gt;
&lt;p&gt;At a hearing in March, Derek’s lawyer conceded that the consulting relationship was real; the payments had totaled about $40,000 over 20 months. In a game of millions, though, this was hardly the smoking gun Casper was probably looking for. Ultimately, after months of searching, I was unable to find any major financial inducement for Derek to favor Leesa over other mattress companies that paid him commissions. When I asked Nest Bedding’s Joe Alexander why Derek preferred Leesa, he summed it up for me: “Derek just seemed like the kind of guy who left the dance with the girl he came with.”&lt;/p&gt;
&lt;p&gt;Still, even if $40,000 wasn’t tremendous, the mere fact of these side payments undermined some of Derek’s claims on his site, probably harming his case. Around this time, Alexander was speaking to Derek weekly; they’d gradually become friends. The suit was clearly weighing on Derek. “He’d try to keep a good face on things,” Alexander told me, “but you could tell–the hesitation in his voice, the contrived laugh. Things weren’t going along as he had anticipated.”&lt;/p&gt;
&lt;p&gt;In the March hearing transcript, there was discussion of momentum toward a settlement, one in which Derek might pay damages to Casper.&lt;/p&gt;
&lt;p&gt;But then, in the last days of April, Derek’s lawyer submitted a surprising counterclaim against the mattress giant.&lt;/p&gt;
&lt;p&gt;The claim added a dramatic early chapter to the story of Sleepopolis and Casper–right after Casper announced it would not be renewing its affiliate marketing contracts back in the summer of 2015.&lt;/p&gt;
&lt;p&gt;“Immediately after Casper announced this termination,” the claim alleged, “Casper approached Hales and offered to resume the relationship, on terms considerably more favorable to Hales, if Hales would agree to state a more positive opinion of Casper’s mattress on Sleepopolis. Hales refused.”&lt;/p&gt;
&lt;p&gt;Shortly after this refusal, alleged Derek’s lawyer, “Sleepopolis came under a massive negative SEO attack.” Tens of thousands of links to Sleepopolis began mysteriously cropping up on sites that Google’s algorithms deemed low-quality, he wrote. Since Google demotes websites that are linked to by low-quality sites, Sleepopolis’s esteem was hurt by association, and Google began demoting Sleepopolis in searches. Suspiciously, a large proportion of the toxic links pointed to Derek’s Casper content, particularly hurting him in Casper-related searches. (Derek eventually resolved his problem by hunting down the bad links and creating a “disavow” list for Google.)&lt;/p&gt;
&lt;p&gt;Derek’s lawyer, having learned that Casper contracted with a “reputation management firm” at just this time, alleged that Casper was behind the SEO attack on Sleepopolis. His lawyer was now insisting that &lt;em&gt;Derek&lt;/em&gt; was the wronged party in the suit, not Casper, and demanded that Derek be awarded damages instead.&lt;/p&gt;
&lt;p&gt;Casper’s lawyers soon fired back with a motion to dismiss Derek’s counterclaims–a “thinly spun tale,” they scoffed, with “no evidence linking Casper to the alleged SEO attack.” The newly escalated legal battle hurtled on.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;On one of the last days&lt;/strong&gt; of July, I opened my inbox to find an email from a correspondent, another close observer of Sleepopolis. “Did you see this???” ran the subject line. Inside was a link to Sleepopolis.&lt;/p&gt;
&lt;p&gt;The site still looked as it always had: the dark header, the elegant logo featuring a skyline nestled in a crescent moon. But in place of Derek’s smiling face, there was now someone else: a young man in a blue blazer who I didn’t recognize. “Welcome To The New Version Of Sleepopolis!” ran the header.&lt;/p&gt;
&lt;p&gt;“Hello!” ran the text beside the headshot. “My name is Dan Scalco and I’d like to personally welcome you to the brand new version of Sleepopolis. Here’s what’s up… On July 25th, 2017 our company acquired Sleepopolis.com …. Derek Hales and Samantha Hales are no longer associated with Sleepopolis.”&lt;/p&gt;
&lt;p&gt;An italicized note added:&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;em&gt;“In July 2017, a subsidiary of JAKK Media LLC acquired Sleepopolis.com. Casper provided financial support to allow JAKK Media to acquire Sleepopolis.”&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This was disorienting, to say the least. What was JAKK Media? It had bought Sleepopolis with a loan from Casper? I typed out a question to my correspondent: “Who is Dan Scalco?”&lt;/p&gt;
&lt;p&gt;The reply explained that Dan Scalco worked with someone named Joe Auer, who co-owned two mattress reviews sites. The name seemed vaguely familiar, and I figured his initials accounted for the JA in “JAKK Media.” But who was KK?&lt;/p&gt;
&lt;p&gt;Then it hit me.&lt;/p&gt;
&lt;p&gt;Kenny Kline, the guy who had given me my free mattress… now owned Sleepopolis.&lt;/p&gt;
&lt;p&gt;I called up Kenny, trying to make sense of this strange development. But whatever bond forms between men who have exchanged a bottle of wine for a mattress wasn’t enough for him to violate his NDA.&lt;/p&gt;
&lt;p&gt;“It’s kind of a mystery, what happened,” he said, keeping mum about details. “The website came up for sale, and I acquired it.” Kenny said he hoped to repay Casper soon and be able to remove the disclaimer, but for the time being he wanted to err on the side of transparency.&lt;/p&gt;
&lt;p&gt;Kenny Kline and Dan Scalco swore that Casper wouldn’t touch the site. Casper’s Philip Krim told me the same: “We exert no influence and have no influence over the site, other than that we lent them money.” A Casper spokesperson added that the company currently has no access to Sleepopolis’s data.&lt;/p&gt;
&lt;p&gt;The new owners of Sleepopolis did disclose on the site: “Until the loan is satisfied, Casper has the contractual right to repossess the assets and forgive the remaining value of the loan…yes, that was written by our lawyers ;).” &lt;em&gt;Repossess the assets&lt;/em&gt;: in other words, take over Sleepopolis, if it came to that. But Krim said this was just “lawyer language protecting our loan, so we get paid back.”&lt;/p&gt;
&lt;p&gt;On the same day in July that Kenny and I spoke, &lt;em&gt;Casper v. Hales&lt;/em&gt; was reaching its final stages of settlement, with both parties agreeing to drop the suit. On July 28, 2017, the court deemed the case resolved.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Derek wouldn’t answer my calls&lt;/strong&gt;. I wasn’t alone in that: Whatever NDA was in place was evidently ironclad. “I was an intimate friend with Derek,” Joe Alexander, the Nest Bedding CEO, told me, “and apparently I can never talk to him again.” His best guess was that Derek sold Sleepopolis in the end for about half what it was actually worth, but still something like $3 million to $5 million. “I’m going to venture to guess Derek is sipping margaritas somewhere, laughing at all of us,” said Alexander good-naturedly. Online, I found a Halloween picture of Derek and Samantha dressed as Neo and Trinity from &lt;em&gt;The Matrix&lt;/em&gt;, wearing sunglasses and brandishing toy guns. I imagined them buying a Corvette and speeding off into the sunset, the Bonnie and Clyde of affiliate marketing.&lt;/p&gt;
&lt;p&gt;Through August and September, I watched as Sleepopolis evolved under its new ownership: Dan Scalco’s face took the place of Derek’s in comment threads, and then Scalco disappeared too, quietly replaced by yet another editor. Various bedding advertisements began to crop up; the formerly ubiquitous Leesa-touting sidebar disappeared, and Sleepopolis began referring much less traffic to Leesa.com.&lt;/p&gt;
&lt;p&gt;But the most significant change to Sleepopolis came right away. From the first days of the site’s new management, that thorn in Casper’s side–Derek’s damning yellow box, pointing prospective buyers to competitors–disappeared from Sleepopolis’s Casper review. In its place there appeared a &lt;em&gt;green&lt;/em&gt; box, with a coupon linking straight to Casper.com:&lt;/p&gt;
&lt;img class=&quot;size-large wp-image-40478508 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;298&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/2016/11/i-2-casper-mattress-review-sleepopolis-green-box-highlight.jpg&quot;/&gt;Sleepopolis’s Casper review, as it appears today. View full size &lt;a href=&quot;https://assets.fastcompany.com/image/upload/v1507121217/fcweb/i-casper-mattress-close-up-review-sleepopolis-green-box-1_oxkjc5.jpg&quot; rel=&quot;nofollow&quot;&gt;here&lt;/a&gt;.
&lt;p&gt;By early September, the updated Casper review amounted to an endorsement. “Overall my experience with Casper was very positive,” the new review concluded.&lt;/p&gt;
&lt;p&gt;Casper’s battle had been hard fought, but it got what it wanted in the end. Now those who saw cute Casper ads on the subway and later Googled “casper mattress reviews” would no longer have their purchase momentum stymied by the first site they clicked on. They’d be waved along by Sleepopolis’s green light.&lt;/p&gt;
&lt;p&gt;Casper had finally hammered out the last, most troublesome kink in the yawning purchase funnel that lured ever more traffic to its billion-dollar online storefront. The company could indeed claim, as it did on its site, to have “the internet’s favorite mattress.”&lt;/p&gt;
&lt;p&gt;It had made very sure of that.&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Tue, 17 Oct 2017 04:13:38 +0000</pubDate>
<dc:creator>pastalex</dc:creator>
<og:type>article</og:type>
<og:title>The War To Sell You A Mattress Is An Internet Nightmare | Fast Company</og:title>
<og:url>https://www.fastcompany.com/3065928/sleepopolis-casper-bloggers-lawsuits-underside-of-the-mattress-wars</og:url>
<og:description>Why did Casper sue a mattress blogger? A closer look reveals a secret, multimillion-dollar battle to get you into bed.</og:description>
<og:image>https://assets.fastcompany.com/image/upload/w_1280,f_auto,q_auto,fl_lossy/wp-cms/uploads/2016/11/p-2-The-War-To-Sell-You-A-Mattress-Is-An-Internet-Nightmare.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.fastcompany.com/3065928/sleepopolis-casper-bloggers-lawsuits-underside-of-the-mattress-wars</dc:identifier>
</item>
</channel>
</rss>