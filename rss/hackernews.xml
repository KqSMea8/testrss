<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Video Games Are Destroying the People Who Make Them</title>
<link>https://www.nytimes.com/2017/10/25/opinion/work-culture-video-games-crunch.html</link>
<guid isPermaLink="true" >https://www.nytimes.com/2017/10/25/opinion/work-culture-video-games-crunch.html</guid>
<description>&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;403&quot; data-total-count=&quot;2491&quot; id=&quot;story-continues-3&quot;&gt;In a &lt;a href=&quot;http://www.igda.org/page/dss2016&quot;&gt;2016 survey&lt;/a&gt; by the International Game Developers Association, 65 percent of developers said they’d had to crunch, with 52 percent adding that they’d done it more than twice in the previous two years. (Of those who said they did not crunch, 32 percent noted “that their job did require periods of long hours, extended work hours or extended overtime that was just not called ‘crunch.’ ”)&lt;/p&gt;


&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;600&quot; data-total-count=&quot;3091&quot;&gt;While many jobs are demanding, the conditions in this industry are uniquely unforgiving. Most game developers in the United States do not receive extra compensation for extra hours. They may gaze with envy at their colleagues in the film industry, where unions help regulate hours and ensure overtime pay. Their income pales in comparison to what’s offered in other fields with reputations for brutal hours, like banking and law. The average American game developer earned $83,060 in 2013, according to &lt;a href=&quot;http://www.gamasutra.com/view/news/221533/Game_Developer_Salary_Survey_2014_The_results_are_in.php&quot;&gt;a Gamasutra survey&lt;/a&gt;, or less than half the pay of a first-year associate at a New York law firm.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;214&quot; data-total-count=&quot;3305&quot;&gt;While I was reporting for a &lt;a href=&quot;https://www.harpercollins.com/9780062651235/&quot;&gt;book&lt;/a&gt; on how video games are made, veteran game makers told me stories of lost family time, relationship strains and such severe burnout that they considered leaving for other industries.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;228&quot; data-total-count=&quot;3533&quot;&gt;“People think that making games is easy,” said Marcin Iwinski, a co-chief executive and co-founder of CD Projekt Red, the Polish developer of a 2015 game, The Witcher 3. “It’s hard-core work. It can destroy your life.”&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;333&quot; data-total-count=&quot;3866&quot;&gt;Mr. Iwinski, like many other top video game creators, sees crunch as a necessary evil. He and other developers say because of the rapid evolution of video game technology, among other reasons, the time it takes to complete basic tasks can vary drastically from project to project, which makes it difficult to plan accurate schedules.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;339&quot; data-total-count=&quot;4205&quot;&gt;A growing faction of game developers, however, argues that it’s possible to make good games without crunching. Tanya X. Short, a co-founder of the independent studio Kitfox Games, asked colleagues to sign an online pledge against excessive overtime. The pledge, which was &lt;a href=&quot;https://docs.google.com/forms/d/e/1FAIpQLSc2LGt1HOZN5G9dPS81qPxmY2f3TaqmBTMeVUvter50n5u_Lg/viewform?c=0&amp;amp;w=1&quot;&gt;published last year&lt;/a&gt;, has been signed by over 500 game developers.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;89&quot; data-total-count=&quot;4294&quot;&gt;“Crunch trades short-term gains for long-term suffering,” said Ms. Short in an email.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;331&quot; data-total-count=&quot;4625&quot;&gt;To avoid long-term deleterious effects, game developers must commit to stop facilitating a culture in which crunch is the norm. The occasional long night or weekend at the office can be useful and even exhilarating, but as a constant, it is damaging. No video game is worth burnout, brain damage or overnight stays at the hospital.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;388&quot; data-total-count=&quot;5013&quot;&gt;Those of us who cover the video game industry can see that the current conditions are unsustainable. Too many of the people who make games have left for more lucrative, less stressful industries. Too many who have stayed have suffered the physical and mental consequences. Game developers need to insist — to their bosses and, most important, to themselves — that health comes first.&lt;/p&gt;
&lt;a class=&quot;visually-hidden skip-to-text-link&quot; href=&quot;https://www.nytimes.com/2017/10/25/opinion/work-culture-video-games-crunch.html#whats-next&quot;&gt;Continue reading the main story&lt;/a&gt;</description>
<pubDate>Thu, 26 Oct 2017 00:28:22 +0000</pubDate>
<dc:creator>danso</dc:creator>
<og:url>https://www.nytimes.com/2017/10/25/opinion/work-culture-video-games-crunch.html</og:url>
<og:type>article</og:type>
<og:title>Opinion | Video Games Are Destroying the People Who Make Them</og:title>
<og:description>The industry’s infamous “crunch” culture is taking a serious toll on workers.</og:description>
<og:image>https://static01.nyt.com/images/2017/10/26/opinion/26schreier/26schreier-facebookJumbo.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/2017/10/25/opinion/work-culture-video-games-crunch.html</dc:identifier>
</item>
<item>
<title>I have no side code projects to show you</title>
<link>https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</link>
<guid isPermaLink="true" >https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</guid>
<description>&lt;p&gt;I know the exact moment in the interview I lost the job for a boutique app firm in downtown Austin. They wanted to see some of my code, and, of course, they understood I couldn't show them anything from my current or past companies. But that shouldn't be an issue, certainly I can demonstrate any one of my numerous side projects that I no-doubt have in progress.&lt;/p&gt;
&lt;p&gt;But I have no side projects. I have no presence on github. I have no open-source projects with which I whittle away my evenings. I have exactly zero pull requests for any of the latest sexy codebases all the cool coders are in on. I don't mess around with exercises in Haskel. And I loathe hackathons.&lt;/p&gt;
&lt;p&gt;And when I said I have no side projects to show, what they heard - what interviewers hear - is: I am not the best. I am not a passionate developer. I don't spend the necessary time to keep on top of my education and skills. That development is &quot;just a job.&quot; &lt;/p&gt;
&lt;p&gt;And to some degree this is true. I am not the best. I have met some of the best, and we are fundamentally different creatures. If I may make an analogy, back in my distance running days I could consistently get in the top 5-10% of finishers, but the differences between me and the elites was the difference between me and the bottom 1%. I was a passionate runner. I ran 50+ miles a week. I pushed myself to excel. To excel within the boundaries of the time and life-balance I had set for myself. To achieve elite status would take a life sacrifice that I wasn't willing to make. It would mean running at the expense of all other experiences. &lt;/p&gt;
&lt;p&gt;There is a small group of people for whom code speaks. They discovered more than a job, they discovered a calling. Code is a craft and they are artists. For every one of those folks there are thousands of amazing, solid developers that will write circles around 90% of the other CS graduates. But they aren't &quot;the best.&quot;&lt;/p&gt;
&lt;p&gt;When companies say they want &quot;passionate developers&quot; that are coding in their free time, when companies say they want &quot;the best,&quot; I get nervous. It's a myopic approach to team building. It's a subtle way of requesting human machines.&lt;/p&gt;
&lt;p&gt;I've made it a point to add to my resume and online profiles the other things about which I am passionate. The silly art project that I launched in Austin. My dog business. Running, painting, writing. It's important to me that these attributes be valued by my workplace. If they value it in me, then they value it in others, and that speaks volumes about the company culture. &lt;/p&gt;
&lt;p&gt;The world is catching up to this reality, bit by bit. The Bay Area, Seattle, NYC - these may be the hottest, hippest areas to have your startup or giant conglomerate, but you severely limit your pool of potential candidates to a tiny puddle of people that can live in these cities. I have four children. I own an entire separate dog playcare business with my wife. I am an active member of the local art community. There is no way I could ever live in one of these other cities. And while some companies are realizing that I am not an edge case - Facebook, Google, Amazon, they all have a significant presence in Austin specifically because they've drained the talent elsewhere - too many places are still convinced that &quot;the best&quot; lives to code. That &quot;the best&quot; is attracted to your company because you have a nap room, work 80 hour weeks and have a ping pong table. That &quot;the best&quot; is happy to drink into the Earth every Friday and has absolutely no evening or weekend plans. Ever.&lt;/p&gt;
&lt;p&gt;I did not get the job at the boutique app firm in downtown Austin. I have no code side projects to show you. On Thursday evenings I go to a life drawing studio and spend three hours with other artists sketching a variety of poses from our model. Most evenings after I've made dinner and spent time with the wife and kids, I sit down and knock out 2,000 words on my fifth novel (and like the four abominations that preceded, it will sit in my Pile of Shame, never to be seen by another human being.) Weekends I hike. I dive deep into art. I am a passionate developer because I am a passionate person. But I have no code here to show you.&lt;/p&gt;
</description>
<pubDate>Wed, 25 Oct 2017 19:15:39 +0000</pubDate>
<dc:creator>nnd</dc:creator>
<og:type>article</og:type>
<og:title>No, I have no side code projects to show you | Codementor</og:title>
<og:url>https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</og:url>
<og:image></og:image>
<og:description>I know the exact moment in the interview I lost the job for a boutique app firm in downtown Austin. They wanted to see some of my code, and, of</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</dc:identifier>
</item>
<item>
<title>The fight over preserving public land takes a twist in Montana’s mountains</title>
<link>https://www.bloomberg.com/news/features/2017-10-25/this-land-is-no-longer-your-land</link>
<guid isPermaLink="true" >https://www.bloomberg.com/news/features/2017-10-25/this-land-is-no-longer-your-land</guid>
<description>&lt;p class=&quot;section-break&quot;&gt;Brad Wilson is following a forest trail and scanning the dusky spaces between the fir trees for signs of movement. The black handle of a .44 Magnum juts prominently from his pack. If he stumbles on a startled bear at close range, the retired sheriff’s deputy wants to know the gun is within quick reach, in case something stronger than pepper spray is needed. Wilson isn’t the type who likes to take chances; he’s the type who plans ahead.&lt;/p&gt;

&lt;p&gt;Before setting foot on this path, he unfolded a huge &lt;a href=&quot;https://www.fs.fed.us/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;US Forest Service&quot; rel=&quot;nofollow noopener&quot;&gt;U.S. Forest Service&lt;/a&gt; map and reviewed the route, Trail 267. He put a finger at the trailhead, which was next to a ranger’s station, then traced its meandering path into the Crazy Mountains, a chain in south-central Montana that’s part of the northern Rockies. Like many of the trails and roads that lead into U.S. Forest Service land, Trail 267 twists in and out of private properties. These sorts of paths have been used as access points for decades, but “No Trespassing” signs are popping up on them with increasing frequency, along with visitors’ logs in which hikers, hunters, and Forest Service workers are instructed to sign their names, tacitly acknowledging that the trail is private and that permission for its use was granted at the private landowners’ discretion.&lt;/p&gt;

&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319537188&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iWzQ1Y9rO09M/v1/60x-1.jpg&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iWzQ1Y9rO09M/v1/-1x-1.jpg&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Retired lawman Wilson says ranchers have become more obstacles than neighbors.&lt;/p&gt;
&lt;p&gt;Photographer: Thomas Prior for Bloomberg Businessweek&lt;/p&gt;
&lt;p&gt;Wilson hates the signs and the logbooks, interpreting them as underhanded attempts by a handful of ranchers to dictate who gets to enter federal property adjacent to their own. Several of the owners operate commercial hunting businesses or rental cabins; by controlling the points of ingress to public wilderness, Wilson says, they could effectively turn tens of thousands of acres of federal land into extensions of their own ranches. That would allow them to charge thousands of dollars per day for exclusive access, while turning away anyone—hikers, anglers, bikers, hunters, locals like Wilson, or even forest rangers—who didn’t strike a deal.&lt;/p&gt;

&lt;p&gt;Wilson, 63, is out on the trail to show me how the paths weave through private plots before reaching a destination he loves, and to show me why he loves it: The pebbled trout streams are crystalline, the elk run rampant, and painterly snowcaps break the big sky. The ranches along the way are pretty great, too, the kind of real estate that inspires—and, if acquired, perhaps even satisfies—the hunger a lot of people feel for scenic refuge. Many of the landholders are newcomers from out of state, though some old-timers remain—families that earned their deeds generations ago, the principal paid by ancestors who shivered through pitiless winters in tar-paper shacks. Wilson has been hiking and hunting the Crazies since he was a little kid, but only in the past year or so, he says, have the private ranchers seemed more like obstacles than neighbors. “They could shut down pretty much the whole interior of the Crazy Mountains, as far as I can see,” he says.&lt;/p&gt;

&lt;p&gt;He trudges up a rooty slope and, after a blind bend, sees something straddling the trail that stops him cold. It’s a padlocked metal gate. He hiked this trail a couple of weeks before, and the fence wasn’t there. A sign on it reads, “Private Property: No Forest Service Access, No Trespassing.” It’s exactly the kind of sign he’d been bad-mouthing a few minutes earlier, but he wasn’t expecting to see one here. The locked gate feels like an escalation, a new weapon in an improvised war.&lt;/p&gt;

&lt;p&gt;The change in Wilson’s hiking plan is frustrating, but he’s getting used to the feeling. A year ago he was just a retired county lawman working as a trustee for the &lt;a href=&quot;http://montanacowboyfame.org/index.html&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Montana Cowboy Hall of Fame &amp;amp; Western Heritage Center - Home&quot; rel=&quot;nofollow noopener&quot;&gt;Montana Cowboy Hall of Fame&lt;/a&gt;, and he never would have guessed that, in a battle involving ranchers, he’d find himself on the side of dirt bikers and trail rats.&lt;/p&gt;
&lt;p&gt;A debate is taking place across the country over preserving land for recreational public use, but most of the attention is focused on vast swaths of historically or scientifically significant terrain that Presidents Barack Obama, Bill Clinton, and to a lesser extent George W. Bush protected under the &lt;a href=&quot;https://www.nps.gov/history/archeology/sites/antiquities/fullMap.htm&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;NPS Archeology Program: Antiquities Act Centennial&quot; rel=&quot;nofollow noopener&quot;&gt;national monument designation&lt;/a&gt;—for example, &lt;a href=&quot;https://www.fs.fed.us/visit/bears-ears-national-monument&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Bears Ears National Monument&quot; rel=&quot;nofollow noopener&quot;&gt;Bears Ears&lt;/a&gt; in Utah and &lt;a href=&quot;https://www.nps.gov/kaww/index.htm&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Katahdin Woods and Waters National Monument (U.S. National Park Service)&quot; rel=&quot;nofollow noopener&quot;&gt;Katahdin Woods and Waters&lt;/a&gt; in Maine. These disputed trails leading into the Crazy Mountains represent another front in the escalating battle over control of federal territory, and the fighting here is just as contentious as over the monuments. Historic settlement patterns in the American West created a checkerboard pattern of landownership: Public properties are often broken-up plots, resulting in numerous access disputes. According to a &lt;a href=&quot;http://westernpriorities.org/wp-content/uploads/2013/11/Landlocked-Measuring-Public-Land-Access.pdf&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Landlocked: Measuring Public Land Access in the West (.pdf)&quot; rel=&quot;nofollow noopener&quot;&gt;2013 study&lt;/a&gt; by the Center for Western Priorities, that dynamic has effectively locked the public out of about 4 million acres of land in Western states; almost half of that blocked public land, or about 2 million acres, is in Montana, according to the study. The push to end public thoroughfare is either an overdue reassertion of private property rights or an openly cynical land snatch, depending which side of the gate you’re standing on.&lt;/p&gt;
&lt;p&gt;Before Wilson turns around and walks back to the trailhead, he vows that he’ll be better prepared next time. Alongside the .44 he’ll pack a pair of super-heavy-duty bolt cutters, and he swears he’ll tear that gate down.&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319550570&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iJs_QuEUA_Zc/v7/60x-1.png&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iJs_QuEUA_Zc/v7/-1x-1.png&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p class=&quot;section-break&quot;&gt;Late last October, in the dying days of the Obama era, a U.S. district judge issued a verdict that seemed to set a precedent for paths like this one. The Texas-based owners of a Montana property called Wonder Ranch, about 100 miles southeast of the Crazy Mountains, had &lt;a href=&quot;http://billingsgazette.com/lifestyles/recreation/judge-to-tour-site-of-madison-valley-trail-dispute/article_35255ace-a09e-53f9-b16d-49ce002e9452.html&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Judge to tour site of Madison Valley trail dispute&quot; rel=&quot;nofollow noopener&quot;&gt;sued the Forest Service&lt;/a&gt; after the government filed a statement of interest claiming an easement—a legal agreement to use a portion of someone’s land for a specific purpose—on a trail that ran across the ranch’s property before reaching the Lee Metcalf Wilderness. The Forest Service said the trail had been routinely used as an access route to the forest by the government and the public for decades, and therefore it should be considered public because of historical use. The owners’ suit argued that the government had no right to an easement. The Department of Justice countersued, producing evidence dating back more than a century showing that the public and the government consistently used the trail for packhorses and hike-ins. The Forest Service &lt;a href=&quot;https://www.leagle.com/decision/infdco20161025g69&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;WONDER RANCH, LLC v. U.S.&quot; rel=&quot;nofollow noopener&quot;&gt;won the case&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Had the landowners been able to show that the trail had been used for at least five consecutive years only by those who’d received their permission, their claims of private control might have held. That helps explain why Alex Sienkiewicz, the forest ranger overseeing the district that includes the Crazy Mountains, every year sends an email to his staff reminding them never to ask landowners’ permission to use trails that the government already considers public. “By asking permission,” he wrote in last year’s reminder, “one undermines the public access rights and plays into their lawyers’ trap of establishing a history of permissive access.” That didn’t mean anyone could veer off the trail and slip onto the private property—that’s trespassing, no question about it—it just meant the trail itself should be considered a public throughway.&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319550558&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/ifDTgcIAthU8/v7/60x-1.png&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/ifDTgcIAthU8/v7/-1x-1.png&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Every trail leading to public land is different, and not all necessarily have a history of public use, but Sienkiewicz was echoing the government’s generally established position regarding such access points, the one argued by Justice Department attorneys in the Wonder Ranch LLC case. Obama himself outlined his administration’s overarching philosophy when he visited southern Montana during his first term to &lt;a href=&quot;http://flatheadbeacon.com/2009/09/02/white-house-photos-obama-fly-fishing-in-montana/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;White House Photos: Obama Fly Fishing in Montana&quot; rel=&quot;nofollow noopener&quot;&gt;try his hand at fly-fishing&lt;/a&gt;. “He said he felt really strongly that a key to getting kids to become adults that care about their natural surroundings is making sure they can get out to them in the first place,” says Dan Vermillion, a local fly-fishing outfitter and the chair of Montana’s &lt;a href=&quot;http://fwp.mt.gov/doingBusiness/insideFwp/commission/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Montana Fish, Wildlife &amp;amp; Parks :: Fish &amp;amp; Wildlife Commission&quot; rel=&quot;nofollow noopener&quot;&gt;Fish and Wildlife Commission&lt;/a&gt;, who waded into the Gallatin River with Obama. “Public access is one of those great equalizers that says whether you’re rich, poor, or otherwise, you still have access to public lands, and you can go out and enjoy them.”&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319537071&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iiNY7ApsmTto/v3/60x-1.jpg&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iiNY7ApsmTto/v3/-1x-1.jpg&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A disputed road leading to public land, blocked by the landowning Galt family, who sell self-guided hunts on their ranch.&lt;/p&gt;
&lt;p&gt;Photographer: Thomas Prior for Bloomberg Businessweek&lt;/p&gt;
&lt;p&gt;For a while, it seemed that attitude might be one of the rare Obama positions that President Donald Trump could live with. In a &lt;a href=&quot;https://www.fieldandstream.com/articles/hunting/2016/01/qa-donald-trump-on-guns-hunting-and-conservation&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Q&amp;amp;A: Donald Trump on Guns, Hunting, and Conservation&quot; rel=&quot;nofollow noopener&quot;&gt;pre-election interview&lt;/a&gt;, Trump told the magazine &lt;em&gt;Field &amp;amp; Stream&lt;/em&gt; he didn’t like the idea of transferring the land to the states, suggesting such transfers could erode public oversight of them: “I want to keep the lands great, and you don’t know what the state is going to do,” he said. “I mean, are they going to sell if they get into a little bit of trouble? And I don’t think it’s something that should be sold. We have to be great stewards of this land. This is magnificent land.”&lt;/p&gt;
&lt;p&gt;Public land advocates smelled a contradiction, since the new president was positioning himself elsewhere as a champion of private property rights. And regardless of what he said, Trump’s campaign had tapped into a very deep well of antigovernment sentiment, the sort that Nevada rancher &lt;a href=&quot;https://www.bloomberg.com/news/articles/2017-02-09/las-vegas-trial-starting-for-6-in-bundy-ranch-standoff&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Las Vegas Trial Starting for Six in Bundy Ranch Standoff&quot;&gt;Cliven Bundy&lt;/a&gt; appealed to when he occupied public territories and led armed standoffs against federal agents in 2014 and again in 2016. The co-chair of a state group called Veterans for Trump &lt;a href=&quot;http://www.guns.com/2016/03/07/veterans-for-trump-co-chair-arrested-with-bundy-crew/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;‘Veterans for Trump’ co-chair arrested with Bundy crew&quot; rel=&quot;nofollow noopener&quot;&gt;pleaded guilty&lt;/a&gt; to helping organize the ad hoc rebel militia, and Roger Stone, a longtime Trump adviser, has been one of Bundy’s &lt;a href=&quot;http://www.hcn.org/articles/politics-why-is-roger-stone-so-interested-in-cliven-bundy&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Why is a Trump operative so interested in Cliven Bundy?&quot; rel=&quot;nofollow noopener&quot;&gt;most vocal supporters&lt;/a&gt;. Immediately after the election, whether or not the results had anything to do with their actions, the Crazy Mountains landowners launched a collective blitz to take control of the trails leading to Forest Service property.&lt;/p&gt;

&lt;p class=&quot;section-break&quot;&gt;Rob Gregoire, an engineer from Bozeman, Mont., says he had little idea what awaited him when he marched up the Crazy Mountains on Nov. 23, 2016. He’d been granted a state tag allowing him to hunt bull elk on the eastern slopes, and before he set out for Forest Service land, he’d called Sienkiewicz, the district ranger, to double-check that the public trail marked on his map was indeed public. The ranger had explained agency policy to him, which indicated that the trail was public, but told Gregoire to use his own judgment if a landowner objected.&lt;/p&gt;
&lt;p&gt;Gregoire decided to go for it. When the trail veered through a private plot called the Hailstone Ranch, he spotted a No Trespassing sign that read, “The Forest Service Has No Easement Here.” He ignored it, consulting his GPS to make sure he never strayed from the path onto the private ranch land. The landowner somehow detected that he was using the trail (“I think he had an alarm or something,” Gregoire later speculated) and called a sheriff’s deputy, who was waiting for Gregoire to return at the end of the day. The deputy charged him with criminal trespassing.&lt;/p&gt;
&lt;p&gt;Shortly after that, the owners of nine ranches neighboring the Hailstone went after Sienkiewicz. Back on July 20, a volunteer at &lt;a href=&quot;http://plwa.org/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;PLWA - Public Land / Water Access Association, Inc&quot; rel=&quot;nofollow noopener&quot;&gt;Public Land/Water Access Association Inc.&lt;/a&gt;, a Montana nonprofit that supports open public access to federal lands and waterways, had gotten hold of, then posted on its Facebook page, Sienkiewicz’s most recent annual email reminder to his staff advising them never to sign visitor logs for trail access or ask permission. The property owners apparently assumed that Sienkiewicz had posted the item himself—proof that he was behaving as a political activist, not a public servant. The ranch owners sent a letter to U.S. Senator Steve Daines, a Republican representing Montana, saying in part, “As a direct result of this inflammatory Facebook post, we have many questions about the FS position regarding access across our private property.” Several of the ranchers who signed the letter have also been listed as &lt;a href=&quot;https://www.opensecrets.org/members-of-congress/contributors?cid=N00033054&amp;amp;cycle=2018&amp;amp;recs=100&amp;amp;type=I&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Sen. Steven Daines - Montana • OpenSecrets&quot; rel=&quot;nofollow noopener&quot;&gt;contributors&lt;/a&gt; to Daines’s political campaigns in the past five years.&lt;/p&gt;
&lt;p&gt;In May, Daines echoed the landowners’ complaints—and forwarded a screen shot of the Facebook post—in a letter to Thomas Tidwell, then the chief of the Forest Service, and to Agriculture Secretary Sonny Perdue, whose agency oversees the Forest Service. Less than two weeks later, Representative Pete Sessions (R-Texas) got involved, firing off a similar complaint to Perdue and Interior Secretary Ryan Zinke, who has a long history in Montana. An avid hunter and fisherman, he was born in Bozeman, about 40 miles from the Crazies. He was also a Montana congressman, filling the seat Daines had occupied before he moved to the Senate. (At least one of the ranchers donated to Zinke’s campaign.)&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319544164&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/ihwwOZUGgs7s/v1/60x-1.jpg&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/ihwwOZUGgs7s/v1/-1x-1.jpg&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A road leading toward the Crazy Mountains.&lt;/p&gt;
&lt;p&gt;Photographer: Thomas Prior for Bloomberg Businessweek&lt;/p&gt;
&lt;p&gt;In &lt;a href=&quot;http://www.emwh.org/public%20access/Crazy%20Mountains/Texas%20Representative%20Pete%20Sessions%20Letter%20to%20Secretary%20of%20Agriculture%20Sonny%20Purdue.pdf&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Texas Representative Pete Sessions' Letter to Secretary of Agriculture Sonny Purdue&quot; rel=&quot;nofollow noopener&quot;&gt;his letter&lt;/a&gt;, Sessions described the Forest Service’s approach to public access as part of “the war on private property owners conducted by the Obama administration.” The Wonder Ranch owners hadn’t been among the nine who signed the initial letter, but they were the link that got Sessions involved. One of the co-owners, a Texan named Chris Hudson, lives in Sessions’ district, and Sessions proposed that Hudson and Perdue meet. Sessions also recommended that the Forest Service issue a nationwide directive to prevent rangers or individual districts from declaring paths and roads public based on historic use.&lt;/p&gt;
&lt;p&gt;It’s not known if Perdue or Zinke took direct action after receiving the complaints (Perdue’s, Zinke’s, and Sessions’ offices didn’t return calls for this story, nor did Hudson’s attorney). But the week after Sessions’ letter was sent, Sienkiewicz was removed from his job as district ranger, pending an internal review, and moved to a desk job evaluating gold mining proposals in another part of Montana. The public controversy surrounding his suspension stretched on for more than four months and brought significant local criticism to the Forest Service. “Alex was just following the Forest Service manual,” says Bernard Lea, who spent 36 years in the Forest Service in Montana before retiring and becoming a leader of the Public Land/Water Access Association. The day before Sienkiewicz was told of his transfer, Gregoire agreed to settle his trespassing charge and pay a $500 fine. The county attorney overseeing the case happened to be the husband of one of the landowners who’d signed the letter to Perdue and Daines complaining about Sienkiewicz. “With him on board,” Gregoire says, “I didn’t think I could win.”&lt;/p&gt;
&lt;p&gt;Defenders of Sienkiewicz and Gregoire—a group that included land access advocates, proprietors of recreation businesses, wildlife groups, and individuals—cast the developments as evidence of an under-the-table assault on public lands that the Trump administration appeared to endorse, if not initiate. This spring, Trump requested that Zinke’s &lt;a href=&quot;https://www.doi.gov/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;U.S. Department of the Interior&quot; rel=&quot;nofollow noopener&quot;&gt;Department of the Interior&lt;/a&gt; review national monuments, &lt;a href=&quot;https://www.whitehouse.gov/the-press-office/2017/04/26/presidential-executive-order-review-designations-under-antiquities-act&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Presidential Executive Order on the Review of Designations Under the Antiquities Act&quot; rel=&quot;nofollow noopener&quot;&gt;designated or enlarged since 1996&lt;/a&gt;, and possibly downsize them, a step he said could rectify what he considered a “massive federal land grab.” Several politicians from Utah, such as Orrin Hatch, Rob Bishop, and Jason Chaffetz, had led the downsizing push, and for years they’d been advocating turning such lands over to the states—the strategy Trump had earlier declared would result in a selloff to the highest bidder. The department eventually suggested downsizing six of the 27 monuments under review, but the ultimate fate of those lands and waters remains in limbo; the matter will go to Congress, and the conservationists have said they will fight the new boundaries in court.&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319537068&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/ignbJl9Ykips/v2/60x-1.jpg&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/ignbJl9Ykips/v2/-1x-1.jpg&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;PERC’s Anderson says ranch owners serve nature better than government can.&lt;/p&gt;
&lt;p&gt;Photographer: Thomas Prior for Bloomberg Businessweek&lt;/p&gt;
&lt;p class=&quot;section-break&quot;&gt;“I absolutely hate the movie &lt;a href=&quot;http://www.imdb.com/title/tt0105265/?ref_=fn_al_tt_1&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;A River Runs Through It (1992) - IMDb&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;em&gt;A River Runs Through It&lt;/em&gt;&lt;/a&gt;,” says &lt;a href=&quot;https://www.perc.org/staff/terry-anderson&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Terry Anderson | PERC – The Property and Environment Research Center&quot; rel=&quot;nofollow noopener&quot;&gt;Terry Anderson&lt;/a&gt;, senior fellow and the former president and executive director of the Bozeman-based Property and Environment Research Center, commonly known as &lt;a href=&quot;https://www.perc.org/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;PERC – The Property and Environment Research Center |&quot; rel=&quot;nofollow noopener&quot;&gt;PERC&lt;/a&gt;. “It destroyed fly-fishing in Montana.” He’s referring to the wave of tourists in fresh-off-the-rack waders inspired by Brad Pitt in the film, who’s guided through life in leaf-filtered light by fraternal love and river sport. Anderson grew up in Montana, and he remembers when the Bozeman airport terminal was smaller than a coffee shop, and you could spend all day on a hike without seeing another soul. The unofficial state motto is “The Last Best Place,” and the feeling that untrammeled natural landscapes are becoming scarce has engendered a strain of possessiveness. At a gas station near the Crazy Mountains, you’ll find T-shirts that say “Montana Sucks—Now Go Home and Tell All Your Friends” and bumper stickers that read “Montana Is Full—I Hear North Dakota Is Nice.”&lt;/p&gt;
&lt;p&gt;Anderson has carved out a field for himself in something called free-market environmentalism. Along with his job at PERC, he’s a professor emeritus at Montana State University and a senior fellow at Stanford’s Hoover Institution, a libertarian-leaning think tank. In op-eds published across the country, he’s an evangelist for limited government and private property rights. He views many environmentalists with undisguised contempt, and they generally return the favor.&lt;/p&gt;
&lt;p&gt;Like many nonprofits, PERC doesn’t disclose its funding sources, but &lt;a href=&quot;http://www.greenpeace.org/international/en/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Greenpeace International Home | Greenpeace International&quot; rel=&quot;nofollow noopener&quot;&gt;Greenpeace International&lt;/a&gt; has posted records showing that they’ve included &lt;a href=&quot;https://www.bloomberg.com/quote/XOM:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot;&gt;Exxon Mobil Corp.&lt;/a&gt; and the industrialists &lt;a href=&quot;https://www.bloomberg.com/billionaires/id/1654748&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;Charles&lt;/a&gt; and &lt;a href=&quot;https://www.bloomberg.com/billionaires/id/1423900&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;David Koch&lt;/a&gt;. Anderson probably wouldn’t worry too much about how that looks: He believes the private sector, in most cases, is a better steward of nature than the government.&lt;/p&gt;

&lt;p&gt;He argues that public land access obeys a dynamic prevalent in vehicular traffic planning. When highway departments construct additional lanes to a highway to ease congestion, he says, it generally has the opposite effect, merely allowing more drivers to clog the road. In a similar way, encouraging the use of multiple pathways into public lands degrades the environment. Better, he maintains, would be to let private stakeholders control access and charge fees instead of burdening taxpayers with the job; fewer people would trample the trails, and those trails would be better kept.&lt;/p&gt;
&lt;p&gt;At the right place and the right time, the notion that the Crazies are being overrun by hordes of weekenders desperate for recreation is easy to conjure. It’s best done on a sun-shot Saturday morning in summer, close to Half Moon Campground, which is near the lone uncontested public entry point on the east side of the Crazies. Here, campers and hikers gather before dispersing into the relative solitude of the vast mountain wilderness. On one such morning in August, no fewer than 33 vehicles overfilled a parking area near the trailhead. “It’s like a Walmart parking lot,” grumbled Dario Quilici, a 35-year-old who was hiking in with Gino Mussolini, his German wirehaired pointer, for some camping and fishing.&lt;/p&gt;
&lt;p&gt;Quilici’s plan was seat-of-the-pants. He thought he might spend three or four days hiking to an exit point on the far side of the mountains, but he didn’t realize that the most direct trail was blocked by the gate Wilson had confronted. Other possible paths were also contested. When I told him this, he redirected his criticism away from the parking lot and toward the landowners. “I bet they have some lobbying power,” he said. “They just want to keep everything like it’s their own private reserve.”&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319537218&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iTU7v0x8fKXU/v2/60x-1.jpg&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iTU7v0x8fKXU/v2/-1x-1.jpg&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The town of Wilsall, at the foot of the Crazies.&lt;/p&gt;
&lt;p&gt;Photographer: Thomas Prior for Bloomberg Businessweek&lt;/p&gt;
&lt;p&gt;Herein lies the big challenge for the landowners and their defenders: Survey after survey has shown that the public hates the idea that someone can lock taxpayers out of public land, and that they’re suspicious of transferring control of such tracts to private enterprise. Nevertheless, Anderson and PERC deny that their position is out of step with public opinion, even casting it as pro-access. Their rationale is oblique: If the Forest Service insists the public has a right to use the trails, they say, private landowners will naturally rebel; numerous court battles will ensue, tying up the trails in years of litigation and costing the government millions of dollars. And as the cases proceed, the landowners will take steps to secure their property rights, blocking traffic on the trails until the mess is sorted out.&lt;/p&gt;
&lt;p&gt;“In the places where now there are signs,” Anderson predicts, “you’ll see a locked gate.” His comment is an informed one. He counts several of the landowners involved in the Crazy Mountains disputes as friends, including the owners of the &lt;a href=&quot;http://anchoroutfitting.com/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Hunt South Central Montana Anchor Outfitting Montana Outfitter Elk Hunting Montana Deer Hunting Montana Mountain Goat Hunt Crazy Mountains Antelope Hunt South Central Montana&quot; rel=&quot;nofollow noopener&quot;&gt;Rein Anchor Outfitting and Ranch&lt;/a&gt;, who operate a hunting lodge and signed the letter against Sienkiewicz. PERC’s affiliation with politically connected outfitters that stand to profit if trails are closed bolsters the sense, to Wilson and others confronting locked gates, that a void in coherent policy about public land management is being filled by cronyism that rewards wealth and connections above all else. Another co-owner of the Wonder Ranch, Frank-Paul King, a friend and former student of Anderson’s, served on PERC’s board. Hudson, the man who got Representative Sessions involved, is King’s brother-in-law, and he’s also a board member and the former president of the &lt;a href=&quot;https://www.biggame.org/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Dallas Safari Club | More Than A Club. A Way Of Life!&quot; rel=&quot;nofollow noopener&quot;&gt;Dallas Safari Club&lt;/a&gt;, a group that made national headlines in 2014 when it auctioned off a trip to Africa to hunt an endangered rhinoceros. (The &lt;a href=&quot;https://www.dallasnews.com/news/news/2015/05/21/texan-who-paid-350k-in-dallas-safari-club-auction-finally-bags-rhino&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Texan who paid $350K in Dallas Safari Club auction finally bags rhino | News | Dallas News&quot; rel=&quot;nofollow noopener&quot;&gt;winning bidder&lt;/a&gt;, who paid $350,000, traveled to Namibia and shot a black rhino bull, an animal the club said had threatened the rest of the herd.) The Dallas Safari Club has &lt;a href=&quot;https://www.dscf.org/grants/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Grants – Dallas Safari Club Foundation&quot; rel=&quot;nofollow noopener&quot;&gt;granted PERC funding&lt;/a&gt; for, among other things, a “Montana project to help ranchers preserve private land so that hunters and fishermen can have access to public lands,” according to its newsletter.&lt;/p&gt;
&lt;p&gt;In 2016 the Dallas Safari Club hosted a fundraiser featuring the big-game hunting enthusiast Donald Trump Jr. that netted $60,000 in campaign donations to the Republican National Committee. “The candidate’s family connection to hunting and its legacy gives DSC a huge opportunity to have the right people in place as advocates for our mission,” the club’s newsletter stated. After Trump was elected, Hudson was listed as an organizer for a post-inaugural fundraiser called “Opening Day 45,” which featured Eric and Donald Trump Jr. as co-chairs. It was canceled after TMZ published an &lt;a href=&quot;http://www.tmz.com/2016/12/16/donald-trump-inauguration-party/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Donald Trump &amp;amp; Family Celebrate Hunters and Fisherman at Inauguration Bash&quot; rel=&quot;nofollow noopener&quot;&gt;early draft of the invitation&lt;/a&gt; last December, promising personal access to President Trump, along with a multiday hunting excursion with his sons, to anyone who donated more than $500,000, sparking criticism that the sons planned to peddle access to their father.&lt;/p&gt;
&lt;p&gt;This circle of big-game hunters is relatively small, which means links among them are numerous enough to allow critics of the Trump administration to claim political malfeasance, and they’re tangential enough that defenders can argue that they’re coincidental and easily misconstrued. One person who has hunted with Trump Jr. is Senator Daines, of the anti-Sienkiewicz letters. The two men met last fall in a camp in Montana during an elk hunt. Daines later called on Trump Jr. to return to the state to campaign on behalf of Greg Gianforte, who was running for the congressional seat Zinke gave up to lead the Interior Department. This spring, Trump Jr. explained that he had grown to trust Daines unequivocally; when the senator told the president’s son that Gianforte was “an awesome guy,” he decided to get involved. “That vouching was enough for me,” Trump Jr. said at a rally in April.&lt;/p&gt;

&lt;p class=&quot;section-break&quot;&gt;On a Thursday evening in August, a couple dozen people gathered in an old schoolhouse in Livingston, Mont., to grill Mary Erickson, the Forest Service’s supervisor of the &lt;a href=&quot;https://www.nationalforests.org/our-forests/find-a-forest/custer-national-forest&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Custer National Forest - National Forest Foundation&quot; rel=&quot;nofollow noopener&quot;&gt;Custer Gallatin National Forest&lt;/a&gt;, about Sienkiewicz’s reassignment. Most of the people in the crowd viewed the case with skepticism or outrage, and Erickson appeared to be choosing her words carefully to avoid pushing anyone toward the angrier end of the scale.&lt;/p&gt;
&lt;p&gt;The trail access issue was extremely sensitive inside the Forest Service, she explained, and potentially costly, too. The Trump administration was &lt;a href=&quot;http://mtstandard.com/news/government-and-politics/trump-budget-proposes-big-changes-in-forest-service-interior-spending/article_6916ad68-6d66-5f2a-adc0-84d8b1ef813e.html&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Trump budget proposes big changes in Forest Service, Interior spending&quot; rel=&quot;nofollow noopener&quot;&gt;proposing&lt;/a&gt; a 73 percent cut in the Forest Service’s capital improvement and maintenance budget and an 84 percent reduction, from $77 million to $12 million, in its trail program budget. The Wonder Ranch case, she observed, had cost the government “in the millions of dollars,” and it wasn’t over yet—the landowners were appealing the decision, and it now sat with an appellate judge. “I’m not saying we’re never going to go to court, but the Forest Service is going to be careful about when we go to court and make sure we’re going to court on cases we can win,” she said.&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-319544171&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iBwjMY5L7304/v4/60x-1.jpg&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iBwjMY5L7304/v4/-1x-1.jpg&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A padlock on a gate blocking access to the Porcupine Lowline Trail.&lt;/p&gt;
&lt;p&gt;Photographer: Thomas Prior for Bloomberg Businessweek&lt;/p&gt;
&lt;p&gt;Erickson downplayed suggestions that any of the politicians involved in the Sienkiewicz case had been directly responsible for his removal, and she suggested that Sienkiewicz should have been more diplomatic when he dealt with the local landowners, to avoid the appearance of “pulling to this side or that side” regarding any questions of public access.&lt;/p&gt;
&lt;p&gt;That notion didn’t sit well with some in the audience, particularly those who believed that if the unfolding drama showed bias toward an interest group, it was toward the private landowners. Nick Gevock, the conservation director of the &lt;a href=&quot;https://montanawildlife.org/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Montana Wildlife Federation&quot; rel=&quot;nofollow noopener&quot;&gt;Montana Wildlife Federation&lt;/a&gt;, told Erickson that Sienkiewicz was a public servant and he’d simply taken the side of the general public.&lt;/p&gt;
&lt;p&gt;The agency in mid-October announced it was &lt;a href=&quot;https://www.bozemandailychronicle.com/news/environment/livingston-forest-service-ranger-to-be-reinstated-after-internal-review/article_5e6c8657-e61a-5fb4-95bd-f08d2c510c98.html&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Livingston Forest Service ranger to be reinstated after internal review&quot; rel=&quot;nofollow noopener&quot;&gt;giving Sienkiewicz his job back&lt;/a&gt;. But Gevock’s frustrations spoke to an unresolved question underlying all of the disputes: Who, exactly, is the Forest Service &lt;a href=&quot;https://www.fs.fed.us/about-agency/what-we-believe&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;What We Believe | US Forest Service&quot; rel=&quot;nofollow noopener&quot;&gt;supposed to serve&lt;/a&gt;? On the agency’s website, former Director Thomas Tidwell wrote that its guiding principles were clearly established by &lt;a href=&quot;http://foresthistory.org/research-explore/us-forest-service-history/people/chiefs/gifford-pinchot-1865-1946/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;4th Chief of the Division of Forestry, 1898-1905 &amp;amp; 1st Chief of the Forest Service, 1905-1910&quot; rel=&quot;nofollow noopener&quot;&gt;Gifford Pinchot&lt;/a&gt;, the service’s founding chief, during the Gilded Age—“a time when the nation’s resources were being exploited for the benefit of the wealthy few,” Tidwell stated. “The national forests were based on a notion that was just the opposite—that these lands belong to everyone.”&lt;/p&gt;
&lt;p&gt;The public access advocates say they’re not sure they trust the spirit of Pinchot’s original message has survived intact. The mixed signals coming from the Trump administration mean everything rests on how those sometimes conflicting messages are interpreted. Zinke has repeatedly insisted, without offering specifics, that he is pro-access, and on his first day in office he &lt;a href=&quot;https://www.courthousenews.com/zinke-expands-hunters-access-public-lands/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;Zinke Expands Hunters’ Access to Public Lands&quot; rel=&quot;nofollow noopener&quot;&gt;pledged&lt;/a&gt; to fight against the “dramatic decreases in access to public lands across the board” that he said were plaguing America. “It worries me to think about hunting and fishing becoming activities for the landowning elite,” he said.&lt;/p&gt;
&lt;p&gt;But this past July, while public land advocates were protesting the Interior Department’s pending move to downsize the national monuments and hikers were cursing the new No Trespassing signs in the Crazies, Zinke traveled to Denver to speak at the annual conference of the &lt;a href=&quot;https://www.alec.org/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;American Legislative Exchange Council&quot; rel=&quot;nofollow noopener&quot;&gt;American Legislative Exchange Council&lt;/a&gt;, or ALEC. The group, a conservative lobbying coalition that helps lawmakers draft legislative proposals, has energetically pushed for the potential &lt;a href=&quot;https://www.alec.org/model-policy/resolution-demanding-that-congress-convey-title-of-federal-public-lands-to-the-states/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; title=&quot;RESOLUTION DEMANDING THAT CONGRESS CONVEY TITLE OF FEDERAL PUBLIC LANDS TO THE STATES&quot; rel=&quot;nofollow noopener&quot;&gt;transfer of federal lands to the states&lt;/a&gt;. Whether Zinke’s speech clarified the government’s general, overarching philosophy on public-vs.-private control of lands that are currently federal, only members of the lobbying group can say for sure. Unlike several other speeches delivered at the conference, Zinke’s wasn’t transcribed or published, and it was closed to the general public.&lt;/p&gt;


</description>
<pubDate>Wed, 25 Oct 2017 18:12:21 +0000</pubDate>
<dc:creator>petethomas</dc:creator>
<og:description>The fight over preserving public land during the Trump era is taking a strange, angry twist in Montana’s Crazy Mountains.</og:description>
<og:image>https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iMY1pGDqIKzs/v0/1200x630.jpg</og:image>
<og:title>When This Land Is No Longer Your Land</og:title>
<og:type>article</og:type>
<og:url>https://www.bloomberg.com/news/features/2017-10-25/this-land-is-no-longer-your-land</og:url>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bloomberg.com/news/features/2017-10-25/this-land-is-no-longer-your-land</dc:identifier>
</item>
<item>
<title>Screen sharing in Slack, made interactive via Screenhero acquisition (YC W13)</title>
<link>https://slackhq.com/screen-sharing-in-slack-made-interactive-cf8816efaa01</link>
<guid isPermaLink="true" >https://slackhq.com/screen-sharing-in-slack-made-interactive-cf8816efaa01</guid>
<description>&lt;div class=&quot;section-inner sectionLayout--insetColumn&quot; readability=&quot;51.555784061697&quot;&gt;

&lt;h2 name=&quot;55b1&quot; id=&quot;55b1&quot; class=&quot;graf graf--h4 graf-after--h3 graf--subtitle&quot;&gt;The next best thing to working in the same room&lt;/h2&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*Q2v5NNgB-xfdMm9tNct0Tg@2x.png&quot; data-width=&quot;3000&quot; data-height=&quot;1676&quot; data-is-featured=&quot;true&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*Q2v5NNgB-xfdMm9tNct0Tg@2x.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*Q2v5NNgB-xfdMm9tNct0Tg@2x.png&quot;/&gt;&lt;/div&gt;
&lt;p name=&quot;0b3a&quot; id=&quot;0b3a&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Working with teammates in Slack, wherever they are, started with messaging. Then came voice and video calls, followed by screen sharing. And now, screen sharing from a Slack call has gone interactive: You can invite others to write, code, design — or whatever working together means to you — all directly from your shared screen.&lt;/p&gt;
&lt;h4 name=&quot;fb5c&quot; id=&quot;fb5c&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--h4-strong&quot;&gt;Invite others on the call to contribute&lt;/strong&gt;&lt;/h4&gt;
&lt;p name=&quot;665b&quot; id=&quot;665b&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;To begin, simply share your screen from a Slack call, and hit the “share control of your screen” button. Each participant will then receive their own cursor, along with the ability to type, edit, scroll, and click through the contents of the shared screen.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*rix6BFhNgGI3WM08tr7mwQ@2x.png&quot; data-width=&quot;3000&quot; data-height=&quot;1360&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*rix6BFhNgGI3WM08tr7mwQ@2x.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*rix6BFhNgGI3WM08tr7mwQ@2x.png&quot;/&gt;&lt;/div&gt;
&lt;p name=&quot;9e51&quot; id=&quot;9e51&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;And when not in control, viewing participants can temporarily draw over the shared screen, directing attention to particular cells in a spreadsheet, lines of a paragraph, or anything else they want to highlight. Along with the &lt;a href=&quot;http://slackhq.com/slack-calls-now-with-100-more-video-50bf365a0d98#a101&quot; data-href=&quot;http://slackhq.com/slack-calls-now-with-100-more-video-50bf365a0d98#a101&quot; class=&quot;markup--anchor markup--p-anchor&quot; target=&quot;_blank&quot;&gt;emoji reactions&lt;/a&gt; you can already send in Slack calls, the drawing tool can help make presentations feel like more like a two-way conversation.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*yf_z8vwx7QukWkduVsD5xQ@2x.png&quot; data-width=&quot;3000&quot; data-height=&quot;1360&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*yf_z8vwx7QukWkduVsD5xQ@2x.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*yf_z8vwx7QukWkduVsD5xQ@2x.png&quot;/&gt;&lt;/div&gt;
&lt;em class=&quot;markup--em markup--figure-em&quot;&gt;Viewers on the call can direct attention to specific parts of the screen&lt;/em&gt;
&lt;h4 name=&quot;44c8&quot; id=&quot;44c8&quot; class=&quot;graf graf--h4 graf-after--figure&quot;&gt;&lt;strong class=&quot;markup--strong markup--h4-strong&quot;&gt;How organizations are using it&lt;/strong&gt;&lt;/h4&gt;
&lt;p name=&quot;c248&quot; id=&quot;c248&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;Over the past months, customers helping beta test this feature have already found plenty of ways to use it. Some organizations share control of their screen for step-by-step IT troubleshooting, while others use it for pair programming. &lt;a href=&quot;https://slack.com/customer-stories/zapier&quot; data-href=&quot;https://slack.com/customer-stories/zapier&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Zapier&lt;/a&gt;, a software company with a fully distributed workforce, relies on interactive screen sharing so that two or more individuals can work together triaging bugs and responding to customer tickets.&lt;/p&gt;
&lt;p name=&quot;3df9&quot; id=&quot;3df9&quot; class=&quot;graf graf--p graf-after--p graf--trailing&quot;&gt;As always, native calls are only one way to work face-to-face or voice-to-voice in Slack — our many &lt;a href=&quot;https://get.slack.help/hc/en-us/articles/208492868-Voice-video-screen-sharing-apps&quot; data-href=&quot;https://get.slack.help/hc/en-us/articles/208492868-Voice-video-screen-sharing-apps&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;third-party calling integrations&lt;/a&gt; such as Zoom, Blue Jeans, Google Hangouts and others allow your team to choose what works best for you to move projects forward with teammates in faraway places.&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Wed, 25 Oct 2017 17:22:44 +0000</pubDate>
<dc:creator>jsherwani</dc:creator>
<og:title>Screen sharing in Slack, made interactive – Several People Are Typing — The Official Slack Blog</og:title>
<og:url>https://slackhq.com/screen-sharing-in-slack-made-interactive-cf8816efaa01</og:url>
<og:image>https://cdn-images-1.medium.com/max/1200/1*Q2v5NNgB-xfdMm9tNct0Tg@2x.png</og:image>
<og:description>The next best thing to working in the same room</og:description>
<og:type>article</og:type>
<dc:format>text/html</dc:format>
<dc:identifier>https://slackhq.com/screen-sharing-in-slack-made-interactive-cf8816efaa01?gi=ab1f2dc7891d</dc:identifier>
</item>
<item>
<title>Why Does the Neocortex Have Columns? A Theory of Learning Structure of the World [pdf]</title>
<link>https://www.biorxiv.org/content/biorxiv/early/2017/09/28/162263.full.pdf</link>
<guid isPermaLink="true" >https://www.biorxiv.org/content/biorxiv/early/2017/09/28/162263.full.pdf</guid>
<description>&lt;a href=&quot;https://www.biorxiv.org/content/biorxiv/early/2017/09/28/162263.full.pdf&quot;&gt;Download PDF&lt;/a&gt;</description>
<pubDate>Wed, 25 Oct 2017 15:13:33 +0000</pubDate>
<dc:creator>blacksmythe</dc:creator>
<og:title>Screen sharing in Slack, made interactive – Several People Are Typing — The Official Slack Blog</og:title>
<og:url>https://slackhq.com/screen-sharing-in-slack-made-interactive-cf8816efaa01</og:url>
<og:image>https://cdn-images-1.medium.com/max/1200/1*Q2v5NNgB-xfdMm9tNct0Tg@2x.png</og:image>
<og:description>The next best thing to working in the same room</og:description>
<og:type>article</og:type>
<dc:format>application/pdf</dc:format>
<dc:identifier>https://www.biorxiv.org/content/biorxiv/early/2017/09/28/162263.full.pdf</dc:identifier>
</item>
<item>
<title>Microsoft Has Stopped Manufacturing The Kinect</title>
<link>https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</link>
<guid isPermaLink="true" >https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</guid>
<description>&lt;div readability=&quot;16&quot;&gt;
&lt;p&gt;&lt;span&gt;Manufacturing of the Kinect &lt;/span&gt;&lt;span&gt;has shut down. Originally created for the Xbox 360, Microsoft’s watershed depth camera and voice recognition microphone sold ~35 million units since its debut in 2010, but Microsoft will no longer produce it when retailers sell off their existing stock. The company will continue to support Kinect for customers on Xbox, but ongoing developer tools remain unclear. &lt;/span&gt;&lt;span&gt;Microsoft shared the news with &lt;em&gt;Co.Design&lt;/em&gt; in exclusive interviews with Alex Kipman, creator of the Kinect, and Matthew Lapsen, GM of Xbox Devices Marketing.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;ad-wrapper ad-wrapper--mobileparallax_1&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;73.014804063861&quot;&gt;
&lt;p&gt;The Kinect had already been slowly de-emphasized by Microsoft, as the Xbox team anchored back around traditional gaming to counter the PS4, rather than take its more experimental approach to entertainment. Yet wh&lt;span&gt;ile the Kinect as a standalone product is off the market, its core sensor lives on. Kinect v4–and soon to be, v5–powers &lt;/span&gt;&lt;a href=&quot;https://www.fastcodesign.com/3041243/hololens-microsofts-sci-fi-glasses-that-make-you-see-holograms&quot;&gt;&lt;span&gt;Microsoft’s augmented reality Hololens&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, which Kipman also created. Meanwhile, Kinect’s team of specialists have gone on to build essential Microsoft technologies, including the Cortana voice assistant, the Windows Hello biometric facial ID system, and a context-aware user interface for the future that Microsoft dubs&lt;/span&gt; &lt;a href=&quot;https://developer.microsoft.com/en-us/windows/mixed-reality/voice_design&quot;&gt;&lt;span&gt;Gaze, Gesture, and Voice (GGV)&lt;/span&gt;&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148019 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_01-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;Launched in 2010 with a $500 million marketing campaign, the Kinect painted a room in a discoball of invisible, infrared dots, mapping it in 3D space and allowing unprecedented tracking of the human body. The Kinect seemed perfect for getting gamers off the couch. Why press a button to duck, when you can just duck? It also enabled handy voice commands, when they worked, like “Xbox On” to turn on the Xbox One console.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;As one of the first journalists&lt;/span&gt; &lt;a href=&quot;https://gizmodo.com/5565657/xbox-360-kinect-puts-play-back-in-gameplay&quot;&gt;&lt;span&gt;to try Kinect back in 2010&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, though, it was immediately apparent to me that Kinect was a lot more important than what was then popularly framed as Microsoft’s &lt;a href=&quot;https://gizmodo.com/5565628/nintendo-scopes-out-the-competition&quot;&gt;Nintendo Wii killer&lt;/a&gt;. (Remember the Nintendo Wii?!?) It was Microsoft’s greater attempt to blur the line between the human body and the human interface–beyond the existing limitations of keyboards, mice, and even touch screens.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;As&lt;/span&gt; &lt;a href=&quot;https://gizmodo.com/5565657/xbox-360-kinect-puts-play-back-in-gameplay&quot;&gt;&lt;span&gt;I wrote at the time&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, “There’s something very special about using Microsoft’s Kinect system, something that separates it from every other combination of software and hardware I’ve ever used. Kinect adapts and accommodates the user. I’m not learning it; it’s learning me . . . I’ve never felt that a computer understood me—a flesh-and-bone human—so well.”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148020 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_02-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;In the years since, I don’t believe it an exaggeration to say that Kinect has been the single most influential, or at least prescient, piece of hardware outside of the iPhone. Technologically, it was the first consumer-grade device to ship with machine learning at its core, according to Microsoft. Functionally, it’s been mimicked, too. Since 2010, Apple introduced the Siri voice assistant copying the speak-to-control functions of Kinect, and Google started its own 3D tracking system, called &lt;a href=&quot;https://www.fastcodesign.com/3060819/what-is-googles-project-tango-exactly-and-why-should-you-care&quot;&gt;Project Tango&lt;/a&gt; (which was founded and continues to be led by Johnny Lee, who helped on the original Kinect). Vision and voice systems have become nearly ubiquitous in smartphones, and they’re gradually taking over homes, too. Take Amazon Echo bringing voice assistants to our grandparents’ living rooms–or the newer, &lt;a href=&quot;https://www.fastcodesign.com/90112048/amazons-new-ai-selfie-machine-is-the-privacy-parable-for-our-time&quot;&gt;Echo Show upping the ante by adding a camera to Alexa&lt;/a&gt;. Even the networked Nest Cam owes a debt to the Kinect being first through the gate, and taking&lt;/span&gt; &lt;a href=&quot;https://kotaku.com/xbox-one-kinect-privacy-concerns-turn-it-off-511759241&quot;&gt;&lt;span&gt;the brunt of criticism on a whole new era of privacy concerns&lt;/span&gt;&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“Trust is something you earn in drops and lose in buckets,” says Kipman, alluding to industry-wide concern over consumer privacy. “I’d say Kinect started the process in 2010 in having to earn drops of trust. Any number of [bad] events in the world, each one, you lose a bucket.” But it wouldn’t be trust, or privacy, that would lose the Xbox consumer. It would be a fickle fanbase that thought innovation came at the price of fun. &lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_1&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;79.939291736931&quot;&gt;&lt;img class=&quot;size-large wp-image-90148021 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_03-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]
&lt;h2&gt;&lt;span&gt;Inventor Vs Consumer&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;“Oh my god. Jesus. There’s my reaction. You can quote me saying, ‘Oh, comma, shit, period.'”&lt;/p&gt;
&lt;p&gt;&lt;span&gt;That’s Golan Levin, director of the esteemed Studio for Creative Inquiry at CMU, when I broke the news that Kinect is being discontinued. His lab, and others like his, use Kinect for everything from experimental art, to creating next generation UI prototypes.  It’s been a vital tool to the greater research community.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“You know, we’re all at the whim of capital. And there’s no expectation that Microsoft should do something that doesn’t support their bottom line,” he continues, choosing the words of his swallowed rant very carefully. “But this is one of those times I’m sad to hear that a tool which is used for so many different applications, and is so ubiquitous, and has served crucially as a platform for so much creative experimentation, cultural progress, and secondary innovation, in so many different fields, isn’t supporting their core business.”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“Someone has made the decision that there aren’t enough games being sold that use it and it’s a shame,” he concludes. &lt;/span&gt;&lt;span&gt;To at least some extent, that’s true.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;If there’s one thing that went wrong with Kinect as a market success, you might call it “gamers.” While the device&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/3021828/the-xbox-one-is-microsofts-glitchy-vision-of-the-future&quot;&gt;&lt;span&gt;certainly had its functional flaws&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, including lag and occasional trouble hearing the user–it caught quick traction as an Xbox 360 accessory.  &lt;/span&gt;&lt;span&gt;The amazing games, however, never really arrived on the 360. There was no franchise with a $100 million budget developed for the Kinect, like a &lt;em&gt;Call of Duty&lt;/em&gt;, or a &lt;em&gt;Grand Theft Auto.&lt;/em&gt; In turn, Microsoft seems to have formulated a sensible plan. To ensure it was worthwhile for developers to invest heavily into Kinect games, it doubled down on Kinect, bundling it in every Xbox One it sold. That would ensure a larger market. However, Microsoft would also design the Xbox One to reserve a small part of its RAM and processing power, at all times, for the Kinect itself–meaning game developers couldn’t tap those resources for their own graphics and physics.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;As the Xbox One was announced, it promised a living room computer that could control your games, cable box, and even, one day,&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/1672641/microsofts-home-20-will-connect-xbox-one-to-the-internet-of-things&quot;&gt;&lt;span&gt;your entire home&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, in a combination of spoken words and gestures&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/3054927/microsofts-inspiring-bet-on-a-radical-new-type-of-design-thinking&quot;&gt;&lt;span&gt;that would be accessible to anyone&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. Amid innovative UI, Sony strategized the perfect counterpunch. On stage, at the E3 gaming convention just three weeks after the Xbox One’s announcement, then-CEO &lt;/span&gt;&lt;span&gt;Jack Tretton delivered &lt;a href=&quot;https://www.youtube.com/watch?v=_ufRev6mq7k&quot;&gt;a borderline quiet speech&lt;/a&gt;, stating in a slow cadence that Sony&lt;/span&gt; &lt;span&gt;“focused what gamers want most . . . for instance, PS4 won’t impose any new restrictions on the use of–” The discernibility of the quote cuts out there because the crowd is cheering so loud, knowing that the full system resources of the PS4 would be made available to developers. Tretton then hit on other concerns about the Xbox One, promising that Sony was a gamer’s first company, and announced a lower price for the PS4. Those sentiments echoed through message boards like Reddit, becoming something of a rallying cry to self-ascribed “hardcore gamers.” Years later, the&lt;/span&gt; &lt;a href=&quot;http://www.vgchartz.com/article/269453/ps4-vs-xbox-one-vs-switch-global-lifetime-salesjuly-2017-update/&quot;&gt;&lt;span&gt;PS4 is reported to have outsold the Xbox One by a factor of 2:1&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. And Microsoft, in an attempt to limbo the Xbox One’s price down and get more gaming performance out of its chipset, unbundled the Kinect and freed its dedicated system resources. The Kinect was no longer a mandatory purchase with the Xbox, diminishing any guaranteed market for Kinect game developers.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_2&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;62.920221426246&quot;&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148022 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_04-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;“When we introduced Xbox One, we designed it to have the best experience with the Kinect. That was our goal with the Xbox One launch,” says Lapsen. “And like all product launches, you monitor that over time, you learn and adjust.” In practice, the Xbox’s target demo cared more about a few extra polygons than some new paradigm in human-computer interaction. So Microsoft decided to invest its talents in other products.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;But Levin, and other researchers like him, adored the Kinect for its forward-looking technologies. “The important thing about Kinect is it showed you could have an inexpensive depth camera. And it supported the development of thousands of applications that used depth sensing,” Levin says. He points out that it was literally Microsoft Kinect hardware that made it possible for a startup like Faceshift to exist. Built to perform extremely 3D tracking of the human face that’s suitable for biometric security, &lt;/span&gt;&lt;a href=&quot;https://www.fastcompany.com/3054008/apple-acquired-faceshift-the-company-behind-the-motion-capture-in-star-wars&quot;&gt;&lt;span&gt;Apple acquired Faceshift to replace its thumbprint scans.&lt;/span&gt;&lt;/a&gt; And to take advantage of the technology, Apple essentially built a Kinect clone right into &lt;a href=&quot;https://www.fastcompany.com/40466451/apple-iphone-x-has-a-huge-screen-facial-recognition-and-ar-powers&quot;&gt;&lt;span&gt;the iPhone X&lt;/span&gt;&lt;/a&gt;, having &lt;a href=&quot;https://www.fastcompany.com/3022194/prepare-for-many-more-igestures-as-apple-buys-primesense&quot;&gt;acquired PrimeSense in 2013&lt;/a&gt;, the Israeli company that developed 3D tracking technology that Microsoft licensed for the first Kinect.&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“That’s one of thousands of applications Kinect made possible,” Levin continues. “Not to mention its immense impact on computer research, robotics research and interactive media arts, which is my field.” Some of Levin’s own students used Kinect to &lt;a href=&quot;https://www.fastcodesign.com/1671355/kickstarting-an-interactive-documentary-with-people-made-of-code&quot;&gt;make a documentary in pointillist 3D&lt;/a&gt;–and then, expanded the technique to &lt;a href=&quot;https://www.fastcodesign.com/3053634/blackout-takes-you-inside-the-minds-of-nyc-subway-commuters&quot;&gt;create an interactive film inside a real NYC subway car&lt;/a&gt;. Today, Levin points out that there are other depth-sensing cameras on the market, aside from the hackable, standalone Kinect. But he also adds that, to all the museums which feature Kinect-powered interactive art in their exhibitions? They might want to go on eBay and buy a few backups. (I suspect that Levin himself is making a trip to eBay today, too.)&lt;/span&gt;&lt;/p&gt;
&lt;img class=&quot;size-large wp-image-90148023 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_05-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]
&lt;h2&gt;&lt;span&gt;Kinect Evolved&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;The Kinect may be done for gamers and researchers, but it’s not disappearing entirely. The truth of development at major corporations is always more nuanced than the fate of any single product. And aside from the fact that key Microsoft technologies like Cortana were built from Kinect, Kinect is still a vital sensor platform in which the company will continue to invest.&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Skyping with Alex Kipman, he whiteboards out the last 10 years of his life–from developing the Kinect in 2007, to the Hololens products of tomorrow. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“We looked at the problem ahead of us. We were using technology more and more. So we said, ‘Look, if we’re spending more and more time with these [technologies], one of two things will occur,'” recounts Kipman. “Either we’re going to spend more time interacting with machines in machine ways, and dealing with what’s behind the screen. Or we’re going to have to teach machines to interact better in our world, the analog universe, and teach them to coexist.”&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobileparallax_2&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;57&quot;&gt;
&lt;p&gt;&lt;span&gt;“I choose path two for us, as humans,” he concludes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;To understand just how computers might one day understand the totality of human existence, his argument can be broken down into a 3×3 box. On the X axis, you have input, output, and haptics. On the Y axis, you have human, environment, and object. Each square is an order of magnitude harder than the last. So tracking a human? That’s hard. But tracking environments, with all their nuances is 10 times harder than tracking people. And tracking objects, with all their textures and variances in context? That’s 100 times harder than people.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148088 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;314&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_07b-kinect-tk.jpg&quot;/&gt;[Image: courtesy Alex Kipman]&lt;span&gt;So Kipman, being what he calls a “lazy” engineer, focused on the simplest square in his matrix to solve–the 1×1 problem, as he put it. Human input. That meant computers had to understand gestures and voice.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“People say I invented Kinect,” says Kipman. “I didn’t invent Kinect. I went through this table and identified the [easiest opportunity].”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Over time, Kinect got a lot better. It began to see more–from a mere 50-degree field of view, to 80 degrees, to 120 degrees in the V4 sensor used in the Hololens. It also, crucially, began to use less power: from 50W, to 25W, to a 1.5W peak today.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;These steady improvements allowed Kinect to be miniaturized into something small enough that we could wear it. And on that matrix? “We went to the right, and one down,” says Kipman. “We said, we kinda know how to do simple 1X1 problem, now it’s time to get more ambitious.” So in 2015, Microsoft announced the Hololens. The 10×10 problem: Environmental output. That means Hololens could see not just a person, but space. And it could not just recognize this space, but allow people to output things into that space–dragging and dropping holograms.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_3&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;28.105342362679&quot;&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148024 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_06-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;“And that’s essentially what Hololens does,” Kipman continues. “Understand everything in human input, best of breed, but also human from the output perspective. Now, I can put photons on the back of your eyes and see holograms. I can [also] make something float. It’s materially different to then pin it to the real world. It means we also understand the environment.”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Next up? Hololens R&amp;amp;D will continue mandating that the Kinect sensor gets even better. I’m told an unannounced V5 version for the Kinect will sip on less than 1.5W at its most active–making it around 50 times more power-efficient than the original Kinect. And with more help from AI–along with oodles of hardware yet to be dreamed up–Microsoft can continue its quest to fill the 100×100 problem. Object haptics. At its most extreme, this is the Star Trek Holodeck. No longer do we manipulate mere photons. We can manipulate matter. Much&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/3032463/what-is-google&quot;&gt;&lt;span&gt;as has been teased by Google&lt;/span&gt;&lt;/a&gt; &lt;span&gt;and the&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/video/mit-legend-hiroshi-ishii-urges-tech-to-think-beyond-the-iphone/hPj1HLTA&quot;&gt;&lt;span&gt;MIT Media Lab&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, data and objects become one.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“The vision here, the thing we’re infinitely patient about, and I’m personally going to spend the rest of my life working on, is the quest of making sure we fill out this table ever more pervasively,” says Kipman. “To empower people to work with technology from ever more human ways.”&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Wed, 25 Oct 2017 15:09:04 +0000</pubDate>
<dc:creator>tlarkworthy</dc:creator>
<og:type>article</og:type>
<og:title>Exclusive: Microsoft Has Stopped Manufacturing The Kinect | Co.Design</og:title>
<og:url>https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</og:url>
<og:description>But its influence, and core technology, lives on across the industry.</og:description>
<og:image>https://assets.fastcompany.com/image/upload/w_1280,f_auto,q_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/p-1-kinect-tk.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</dc:identifier>
</item>
<item>
<title>Reverse engineering of competitor’s software cost company big</title>
<link>http://blog.internetcases.com/2017/10/24/reverse-engineering-of-competitors-software-cost-company-big/</link>
<guid isPermaLink="true" >http://blog.internetcases.com/2017/10/24/reverse-engineering-of-competitors-software-cost-company-big/</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;Companies developing software to mimic the functionality of competitors’ products should beware the broad scope of what may constitute reverse engineering. A recent federal case from the Fourth Circuit underscores this idea.&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Background – the Development Process&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Plaintiff SAS and defendant WPL are competitors in the market for software used to manage and analyze large and complex sets of data. Plaintiff for many years has distributed its proprietary software applications (the SAS System) that run programs written in the eponymous language SAS. WPL sought to create an application to compete with the SAS System, namely, an application it could take to market that would run programs written in SAS. It successfully developed such an application (called the WPS), and customers began dropping the SAS System in favor of the WPS.&lt;/p&gt;
&lt;p&gt;As part of its efforts to develop the WPS, defendant obtained a license to use the “Learning Edition” provided by plaintiff – an environment designed for programmers to learn how to code in SAS. Among the provisions in the software license agreement for the Learning Edition was a restriction against reverse engineering the software.&lt;/p&gt;
&lt;p&gt;In developing the WPS, defendant did not try to decompile the Learning Edition, or otherwise “tear it down” or “look under the hood.” Instead, it would run SAS code through both the Learning Edition and the WPS, evaluate the outputs from both systems, and tweak the C++ code comprising the WPS to get the outputs to match.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Trial Court Litigation&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Plaintiff sued defendant in both U.S. federal court and the U.K. alleging a number of claims, including copyright infringement, breach of contract, deceptive trade practices, and fraud. Of particular importance was the breach of contract claim – plaintiff claimed that defendant’s method of developing the WPS, through adjusting the WPS code based on output compared with Learning Edition output – was reverse engineering prohibited under the terms of the Learning Edition license agreement.&lt;/p&gt;
&lt;p&gt;The lower court agreed with plaintiff, and found defendant liable for breach of contract due to reverse engineering, at the summary judgment stage. The case proceeded to trial on other issues where, along with the damages for breach of contract and for deceptive trade practices, the court awarded almost $80 million in damages to plaintiff. Defendant sought review with the Fourth Circuit. On appeal, the court affirmed the lower court’s decision on the reverse engineering issue.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Appellate Court: This Was Reverse Engineering&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;More specifically, defendant had argued on appeal that the lower court’s summary judgment on the breach of contract/reverse engineering claim was improper because the term “reverse engineering” in the license agreement was ambiguous. Plaintiff and defendant offered competing definitions for what they thought reverse engineering ought to mean. Defendant proposed a narrow definition – essentially, that reverse engineering must have as its objective the re-creation of source code. Plaintiff, however, offered a broader definition, encompassing other efforts to “analyze a product to learn the details of its design, construction, or production in order to produce a copy or improved version.”&lt;/p&gt;
&lt;p&gt;The differences in definitions were important – defendant had not sought to, nor did, access or copy the source code of the Learning Edition. If the definition of reverse engineering were limited to the re-creating of source code, then the development of the WPS should be okay.&lt;/p&gt;
&lt;p&gt;But the court did not agree with defendant. Finding the language in the software license agreement to be unambiguous, the court observed that “nontechnical words are to be given a meaning consistent with the sense in which they are used in ordinary speech, unless the context clearly requires otherwise.” The court then consulted dictionary definitions for the term “reverse engineer” and also evaluated the broad vs. narrow definitions proposed by the parties in light of other prohibitions (e.g., against “reverse assembly” and “decompilation”) in the same provision of the license agreement. Simply stated, the court found that the agreement was clear on what conduct constitutes reverse engineering, and defendant’s actions fit within that scope.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;SAS Institute, Inc. v. World Programming Ltd.&lt;/em&gt;, — F.3d —, 2017 WL 4781380 (4th Cir. October 24, 2017)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;See also:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;&lt;img class=&quot;alignleft&quot; src=&quot;http://udrptracker.com/wp-content/uploads/2016/03/Evan_Brown.jpg&quot; alt=&quot;Evan_Brown&quot; width=&quot;108&quot; height=&quot;108&quot;/&gt;About the Author:&lt;/strong&gt; &lt;a href=&quot;http://e74.us&quot;&gt;Evan Brown&lt;/a&gt; is a Chicago technology and intellectual property attorney. Call Evan at (630) 362-7237, send email to ebrown [at] internetcases.com, or follow him on Twitter &lt;a href=&quot;http://twitter.com/internetcases&quot;&gt;@internetcases&lt;/a&gt;. Read Evan’s other blog, UDRP Tracker, for information about &lt;a href=&quot;http://udrptracker.com&quot;&gt;domain name disputes&lt;/a&gt;.&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 25 Oct 2017 14:48:45 +0000</pubDate>
<dc:creator>sidcool</dc:creator>
<og:type>article</og:type>
<og:title>Reverse engineering of competitor’s software cost company big</og:title>
<og:url>http://blog.internetcases.com/2017/10/24/reverse-engineering-of-competitors-software-cost-company-big/</og:url>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://blog.internetcases.com/2017/10/24/reverse-engineering-of-competitors-software-cost-company-big/</dc:identifier>
</item>
<item>
<title>DOJ Subpoenas Twitter About Five Users Over a Smiley Emoji Tweet</title>
<link>https://www.techdirt.com/articles/20171023/18275838465/doj-subpoenas-twitter-about-popehat-dissent-doe-others-over-smiley-emoji-tweet.shtml</link>
<guid isPermaLink="true" >https://www.techdirt.com/articles/20171023/18275838465/doj-subpoenas-twitter-about-popehat-dissent-doe-others-over-smiley-emoji-tweet.shtml</guid>
<description>&lt;p&gt;So, here's a fun one. Back in May, the Justice Department -- apparently lacking anything better to do with its time -- sent a subpoena to Twitter, demanding a whole bunch of information on a five Twitter users, including a few names that regular Techdirt readers may be familiar with:&lt;/p&gt;
&lt;div class=&quot;centered&quot;&gt;&lt;a href=&quot;https://imgur.com/DTKUIMh&quot;&gt;&lt;img src=&quot;https://i.imgur.com/DTKUIMh.png&quot; width=&quot;500&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;If you can't see that, it's a subpoena asking for information on the following five Twitter users: &lt;a href=&quot;https://twitter.com/dawg8u&quot; target=&quot;_blank&quot;&gt;@dawg8u&lt;/a&gt; (&quot;Mike Honcho&quot;), &lt;a href=&quot;https://twitter.com/abtnatural&quot; target=&quot;_blank&quot;&gt;@abtnatural&lt;/a&gt; (&quot;Virgil&quot;), &lt;a href=&quot;https://twitter.com/Popehat&quot; target=&quot;_blank&quot;&gt;@Popehat&lt;/a&gt; (Ken White), &lt;a href=&quot;https://twitter.com/associatesmind&quot; target=&quot;_blank&quot;&gt;@associatesmind&lt;/a&gt; (Keith Lee) and &lt;a href=&quot;https://twitter.com/pogowasright&quot; target=&quot;_blank&quot;&gt;@PogoWasRight&lt;/a&gt; (Dissent Doe). I'm pretty sure we've talked about three of those five in previous Techdirt posts. Either way, they're folks who are quite active in legal/privacy issues on Twitter.&lt;/p&gt;
&lt;p&gt;And what info does the DOJ want on them? Well, basically everything:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;em&gt;Names (including subscriber names, user names, and screen names);&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Addresses (including mailing addresses, residential addresses, business addresses, and e-mail addresses);&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Records of session times and durations, and the temporarily assigned network addresses (such as Internet Protocol (&quot;IP&quot;) addresses) associated with those sessions;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Length of service (including start date) and types of service utilized;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Telephone or instrument numbers (including MAC addresses, Electronic Serial Numbers (&quot;ESN&quot;), Mobile Electronic Identity Numbers (&quot;MEIN&quot;), Mobile Equipment Identifier (&quot;MEID&quot;), Mobile Identification Numbers (&quot;MIN&quot;), Subscriber Identity Modules (&quot;SIM&quot;), Mobile Subscriber Integrated Services Digital Network Numbers (&quot;MSISDND&quot;), International Mobile Subscriber Identifier (&quot;IMSI&quot;), or International Mobile Equipment Identities (&quot;IMEI&quot;));&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Other subscriber numbers or identities, or associated accounts (including the registration Internet Protocol (&quot;IP&quot;) address);&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Means and source of payment for such service (including any credit card or bank account number) and billing records.&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;
That's a fair bit of information. Why the hell would the DOJ want all that? Would you believe it appears to be over a single tweet from someone to each of those five individuals that consists entirely of a smiley face? I &lt;em&gt;wish&lt;/em&gt; I was kidding. Here's &lt;a href=&quot;https://twitter.com/JShafer817/status/844206766145654784&quot; target=&quot;_blank&quot;&gt;the tweet&lt;/a&gt; and then I'll get into the somewhat convoluted back story. The tweet is up as I write this, but here's a screenshot in case it disappears:
&lt;div class=&quot;centered&quot;&gt;&lt;a href=&quot;https://imgur.com/Asvf2L7&quot;&gt;&lt;img src=&quot;https://i.imgur.com/Asvf2L7.png&quot; width=&quot;450&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;And, just to make it clear, here are all the users &quot;in the conversation&quot; on that tweet (since Twitter now buries at least some of that information):&lt;/p&gt;
&lt;div class=&quot;centered&quot;&gt;&lt;a href=&quot;https://imgur.com/UtYlKhP&quot;&gt;&lt;img src=&quot;https://i.imgur.com/UtYlKhP.png&quot; width=&quot;450&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;You'll note that all of the names are the same names as listed in the subpoena above (as a point of clarification, the four users listed below were already in the conversation, so their metadata gets swept along, and then the tweeter, Justin Shafer, is also adding in @PogoWasRight to the conversation).&lt;/p&gt;
&lt;p&gt;So, who is Justin Shafer, and what the hell is all of this about? Buckle up, because it'll take a bit of background to get around to this tweet (and, yes, it will still feel very, very, stupid that this subpoena was ever issued). First up: Justin Shafer is a security researcher, who has some history spotting bad encryption. Go back to 2013 and he had spotted a &lt;a href=&quot;http://www.kb.cert.org/vuls/id/900031&quot; target=&quot;_blank&quot;&gt;weak not really &quot;encryption&quot; standard&lt;/a&gt; put out by Faircom. Once it was called out as weak, vulnerable and not really encryption, Faircom rebranded it from the &quot;Faircom Standard Encryption&quot; to &quot;Data Camouflage&quot; since the reporting by Shafer showed that it wasn't really encryption at all -- but just a weak attempt at obfuscation.&lt;/p&gt;
&lt;p&gt;Fast forward to late 2013, when a dentist named Rob Meaglia &lt;a href=&quot;http://www.databreaches.net/wp-content/uploads/Meaglia.pdf&quot; target=&quot;_blank&quot;&gt;alerted some of his patients&lt;/a&gt; that a computer was stolen from his offices with &quot;medical records and dental insurance information.&quot; But, Dr. Meaglia told his patients that the records system they were using, Dentrix, made by a company called Henry Schein, Inc., had all of that data encrypted. Except it appeared that Dentrix was actually using &lt;a href=&quot;https://www.databreaches.net/dentrix-claims-it-encrypts-their-data-but-does-it/&quot; target=&quot;_blank&quot;&gt;Faircom's &quot;Data Camouflage&quot;&lt;/a&gt; and not actual encryption. And, as that link notes, Henry Schein, Inc. had been informed of this problem months earlier, around the time Faircom admitted it wasn't actual encryption.&lt;/p&gt;
&lt;p&gt;In May of 2016, the FTC &lt;a href=&quot;https://www.ftc.gov/news-events/press-releases/2016/05/ftc-approves-final-order-henry-schein-practice-solutions-case&quot; target=&quot;_blank&quot;&gt;announced a settlement&lt;/a&gt; with Henry Schein, Inc. over the claim that it &quot;falsely advertised the level of encryption it provided to protect patient data.&quot; Kudos to Justin Shafer.&lt;/p&gt;
&lt;p&gt;But, literally days later, &lt;a href=&quot;https://www.dailydot.com/g00/layer8/justin-shafer-fbi-raid/?i10c.encReferrer=&quot; target=&quot;_blank&quot;&gt;the FBI was raiding Justin Shafer's home&lt;/a&gt; and taking all of his computers. This was not specifically about the Harry Schein case, but since Shafer had continued to investigate poor data security practices involving dentists, he'd come across an FTP server operated by another dental software company, Patterson Dental, which makes &quot;Eaglesoft,&quot; a dental practice management software product. Shafer had discovered an openly available anonymous FTP server with patient data. Shafer did the right thing as a security researcher, and alerted Patterson. However, rather than thanking Shafer for discovering the server they had left with patient data exposed, Patterson Dental argued that Shafer had violated the CFAA in accessing the &lt;em&gt;open&lt;/em&gt; anonymous FTP server. Hence the FBI raid.&lt;/p&gt;
&lt;p&gt;Not surprisingly, Shafer was none too pleased with the FBI's decision to raid his home and take all of his electronics. In particular, it appears he was especially annoyed with FBI Special Agent Nathan Hopp (who he initially believed was actually Nathan &quot;Hawk.&quot;)&lt;/p&gt;
&lt;p&gt;Fast forward to March of this year, to an entirely different story: the FBI &lt;a href=&quot;https://www.techdirt.com/articles/20170320/23292336960/man-actually-arrested-assault-with-deadly-tweet.shtml&quot;&gt;arresting John Rivello&lt;/a&gt; for &quot;assaulting&quot; journalist Kurt Eichenwald with a tweet. If you follow Techdirt related stuff, you probably remember that whole story. Lots of people, including us, posted the criminal complaint that was put together by one Nathan Hopp, a special agent at the FBI.&lt;/p&gt;
&lt;p&gt;It appears that the Rivello arrest and subsequent news coverage suddenly alerted Shafer to the fact that &quot;Nathan Hawk&quot; was actually &quot;Nathan Hopp&quot; and Shafer began a bit of an open source &quot;investigation&quot; on Twitter. I wouldn't necessarily call the following tweets &quot;smart,&quot; but Shafer, finally aware of the FBI agent who lead the raid on his house, started trying to find any public info on Hopp -- and his family. Now, searching out his family isn't great. But it does appear that he was just looking up publicly available information:&lt;/p&gt;
&lt;div class=&quot;centered&quot;&gt;&lt;a href=&quot;https://imgur.com/iGXam7H&quot;&gt;&lt;img src=&quot;https://i.imgur.com/iGXam7H.png&quot; width=&quot;350&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;At this point, the FBI decided to start protecting its own. Seeing as the guy whose home the FBI had ridiculously raided a year earlier was now tweeting some info about one of its special agents, the FBI started putting together a new criminal complaint arguing that all of the tweets above amounted to &quot;Cyber Stalking&quot; under &lt;a href=&quot;https://www.law.cornell.edu/uscode/text/18/2261A&quot; target=&quot;_blank&quot;&gt;18 USC 2216A&lt;/a&gt;. This seems like a huge stretch, because that law requires &quot;intent to kill, injure, harass, intimidate, or place under surveillance....&quot;&lt;/p&gt;
&lt;p&gt;Either way, about the time all of &lt;em&gt;this&lt;/em&gt; was happening, Ken &quot;Popehat&quot; White had started another Twitter thread &lt;a href=&quot;https://twitter.com/Popehat/status/843842665036697600&quot; target=&quot;_blank&quot;&gt;about the Rivello arrest&lt;/a&gt;, leading Virgil and Keith Lee to respond about the criminal complaint, eventually leading &lt;a href=&quot;https://twitter.com/dawg8u/status/843886810195513347&quot; target=&quot;_blank&quot;&gt;Mike Honcho to note&lt;/a&gt; &quot;Nathan Hopp is the least busy FBI agent of all time.&quot; It is &lt;strong&gt;to that tweet&lt;/strong&gt; that Shafer replies with his smiley emoji and adds or cc's, Dissent Doe to the conversation:&lt;/p&gt;
&lt;div class=&quot;centered&quot;&gt;&lt;a href=&quot;https://imgur.com/f7202DZ&quot;&gt;&lt;img src=&quot;https://i.imgur.com/f7202DZ.png&quot; width=&quot;350&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;And that takes us to 10 days later, when a &lt;a href=&quot;https://assets.documentcloud.org/documents/4116064/Shafer-Complaint.pdf&quot; target=&quot;_blank&quot;&gt;new criminal complaint against Shafer&lt;/a&gt; is issued*, arguing that those tweets were criminal Cyber Stalking. And because part of that included his smiley emoji in response to the Popehat thread/Honcho tweet, the DOJ felt it necessary to issue a subpoena demanding basically all info on those 5 Twitter users (including Popehat, a former Assistant US Attorney whose info is pretty easy to find on Google). Perhaps the FBI somehow thinks that Shafer was really behind those other accounts or something -- but anyone with even the slightest level of competence should realize that's unlikely -- and that's got nothing to do with anything here anyway.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;* As an aside, look closely at that criminal complaint against Shafer. I have no idea why but it appears that the FBI/DOJ is so clueless that rather than submitting the final complaint, they actually submitted the copy showing the &quot;comments&quot; on the Word doc they were using to prepare the complaint -- which shows two comments that both suggest the FBI is well aware that this complaint is weak sauce and probably doesn't meet the standard under the law... but this story is crazy enough without spending too much time on &lt;strong&gt;that&lt;/strong&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Twitter is apparently &lt;a href=&quot;https://twitter.com/PogoWasRight/status/921363608558342144&quot; target=&quot;_blank&quot;&gt;fighting back against&lt;/a&gt; this subpoena. And even though it was issued back in May, a few days ago, the company alerted the individuals that the DOJ was demanding info on. Dissent Doe has already stated publicly a plan to move to quash the subpoena as well, and I wouldn't be surprised to see the others named take similar steps.&lt;/p&gt;
&lt;p&gt;But, really, take a step back and &lt;strong&gt;everything&lt;/strong&gt; about this situation is crazy. Going after Shafer the first time was crazy. Going after him again for supposed &quot;Cyber Stalking&quot; over a few harmless tweets was clearly just the FBI trying to protect its own from being embarrassed online. Then, to subpoena a ton of info on 5 totally unrelated Twitter users... just because Shafer tweeted a smiley face emoticon at them? What the fuck is the DOJ up to? Doesn't Assistant US Attorney Douglas Gardner, who signed the subpoena, have better things to do with his time, like going after actual criminals, rather than harassing people for tweeting?&lt;/p&gt;

</description>
<pubDate>Wed, 25 Oct 2017 12:56:03 +0000</pubDate>
<dc:creator>keithrl</dc:creator>
<og:title>DOJ Subpoenas Twitter About Popehat, Dissent Doe And Others Over A Smiley Emoji Tweet</og:title>
<og:description>So, here's a fun one. Back in May, the Justice Department -- apparently lacking anything better to do with its time -- sent a subpoena to Twitter, demanding a whole bunch of information on a five Twitter users, including a few names that regular...</og:description>
<og:type>article</og:type>
<og:url>https://www.techdirt.com/articles/20171023/18275838465/doj-subpoenas-twitter-about-popehat-dissent-doe-others-over-smiley-emoji-tweet.shtml</og:url>
<og:image>https://ii.techdirt.com/s/t/i/td_icon_300.png</og:image>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.techdirt.com/articles/20171023/18275838465/doj-subpoenas-twitter-about-popehat-dissent-doe-others-over-smiley-emoji-tweet.shtml</dc:identifier>
</item>
<item>
<title>Amazon Key is a new service that lets couriers unlock your front door</title>
<link>https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</link>
<guid isPermaLink="true" >https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</guid>
<description>&lt;p id=&quot;2qWAkF&quot;&gt;Twelve years ago, Amazon launched Prime, a subscription service that entitled members to free two-day shipping in the United States. Since then, it has added a number of options to make delivery faster and more convenient. Prime customers can get same-day delivery, and drop off with an hour or two on some items. Of course, customers aren’t always home to receive their packages. So Amazon started putting &lt;a href=&quot;https://www.theverge.com/2017/7/28/16054770/amazon-the-hub-delivery-locker-system&quot;&gt;lockers&lt;/a&gt; in nearby convenience stores and building lobbies. It even showed off drones that could drop the package right into your backyard. Today it’s taking the obvious next step and introducing a service that will allow Amazon couriers to open your front door and put your package safely inside your home.&lt;/p&gt;
&lt;p id=&quot;zxqMV0&quot;&gt;The service is called &lt;a href=&quot;https://go.redirectingat.com?id=66960X1514734&amp;amp;xs=1&amp;amp;url=http%3A%2F%2Fwww.amazon.com%2Fkey&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;Amazon Key&lt;/a&gt;, and it relies on a Amazon’s new &lt;a href=&quot;https://www.theverge.com/circuitbreaker/2017/10/25/16535002/amazon-cloud-cam-camera-alexa-key-in-home-delivery&quot;&gt;Cloud Cam&lt;/a&gt; and compatible smart lock. The camera is the hub, connected to the internet via your home Wi-Fi. The camera talks to the lock over Zigbee, a wireless protocol utilized by many smart home devices.&lt;/p&gt;
&lt;p id=&quot;QYBFgc&quot;&gt;When a courier arrives with a package for in-home delivery, they scan the barcode, sending a request to Amazon’s cloud. If everything checks out, the cloud grants permission by sending a message back to the camera, which starts recording. The courier then gets a prompt on their app, swipes the screen, and &lt;em&gt;v&lt;/em&gt;&lt;em&gt;oilà&lt;/em&gt;, your door unlocks. They drop off the package, relock the door with another swipe, and are on their way. The customer will get a notification that their delivery has arrived, along with a short video showing the drop-off to confirm everything was done properly.&lt;/p&gt;
&lt;span class=&quot;e-image__inner&quot;&gt;&lt;span class=&quot;e-image__image&quot; data-original=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9533691/bfarsace_171024_amazon_0001_2.jpg&quot;&gt;&lt;img class=&quot;c-dynamic-image&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs&quot; alt=&quot;&quot; data-chorus-optimize-field=&quot;main_image&quot; data-cid=&quot;site/dynamic_size_image-1509004601_331_43132&quot; data-cdata=&quot;{&amp;quot;asset_id&amp;quot;:9533691,&amp;quot;ratio&amp;quot;:&amp;quot;*&amp;quot;}&quot;/&gt;&lt;noscript&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9533691/bfarsace_171024_amazon_0001_2.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;/noscript&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;e-image__meta&quot;&gt;The Amazon Cloud Cam and compatible locks &lt;cite&gt;Photo by Becca Farsace / The Verge&lt;/cite&gt;&lt;/span&gt;
&lt;p id=&quot;32XLRO&quot;&gt;The system works with locks from Yale and Kwikset, two well-known brands. But the other piece, the connected camera, is made by Amazon, and that’s a really big deal. Amazon is pushing even further into the smart home space, a market it’s made big strides in, thanks to the huge popularity of its Alexa devices. &lt;a href=&quot;https://go.redirectingat.com?id=66960X1514734&amp;amp;xs=1&amp;amp;url=http%3A%2F%2Fwww.amazon.com%2FCloudCam&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;Amazon’s Cloud Cam&lt;/a&gt; is a central piece of its Key service, but it’s also just a straightforward home security camera, one that can respond to voice commands and integrates with other Alexa devices. Amazon is planning to sell them in bundles and offer a subscription service for customers who want video archives and advanced home monitoring, putting the product in direct competition with Alphabet’s Nest brand and others in the smart home space, like Ring and Logitech.&lt;/p&gt;
&lt;p id=&quot;VZMdZt&quot;&gt;Prime customers can preorder the camera today. The Key app and actual delivery service will become available November 8th.&lt;/p&gt;
&lt;div class=&quot;c-float-right&quot;&gt;
&lt;aside id=&quot;8ZAxzV&quot;&gt;&lt;q&gt;Will Prime customers trust Amazon with entry privileges?&lt;/q&gt;&lt;/aside&gt;&lt;/div&gt;
&lt;p id=&quot;CQR47V&quot;&gt;All this raises a big question, however: will Prime customers trust Amazon to monitor their homes around the clock, and to know when it’s okay to unlock their doors for a stranger? And will the benefit of having your packages delivered quickly and securely outweigh any concerns about privacy and security customers might have?&lt;/p&gt;
&lt;p id=&quot;znO4oa&quot;&gt;For $249.99, Amazon will sell you a bundle that includes a smart lock, the connected camera, and free installation. Once you have the system in place, in-home delivery will begin to appear as an option every time you order something on Amazon. There is no additional charge, and Amazon says the in-home delivery will be available on over 10 million items (anything that isn’t too big and bulky). The one caveat is that, for now, Amazon only trusts its own delivery team to handle this work. So Amazon Key is only available in 37 cities across the US where Amazon Logistics handles the drop-off. But the company says it hopes to expand the service more widely in the future. It will be interesting to see if it eventually allows third-party delivery companies to handle this sensitive process.&lt;/p&gt;
&lt;span class=&quot;e-image__inner&quot;&gt;&lt;span class=&quot;e-image__image&quot; data-original=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9527241/amazon_cloud_cam.jpeg&quot;&gt;&lt;img class=&quot;c-dynamic-image&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs&quot; alt=&quot;&quot; data-chorus-optimize-field=&quot;main_image&quot; data-cid=&quot;site/dynamic_size_image-1509004601_379_43133&quot; data-cdata=&quot;{&amp;quot;asset_id&amp;quot;:9527241,&amp;quot;ratio&amp;quot;:&amp;quot;*&amp;quot;}&quot;/&gt;&lt;noscript&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9527241/amazon_cloud_cam.jpeg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;/noscript&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;e-image__meta&quot;&gt;Cloud Cam streaming on an Echo Show &lt;cite&gt;Image: Amazon&lt;/cite&gt;&lt;/span&gt;
&lt;p id=&quot;ongDlA&quot;&gt;Amazon knows that it’s asking a lot of consumers with its new Key service. You have to really trust a company to let it record what’s going on inside your home at all times, and even more to unlock your door for strangers. So it tries to make sure the process is minimally invasive and totally transparent. Customers will get a notification the morning of a delivery, with a window of time when they should expect Amazon to arrive. They will get another notification when the delivery van shows up. That means you can start watching a live stream of the delivery on your camera if you want to keep an eye on things.&lt;/p&gt;
&lt;p id=&quot;4Rh0Xe&quot;&gt;Even if you choose in-home delivery, couriers are instructed to ring the bell or knock on the door first. That’s meant to let people inside know someone is entering, and also give the delivery person a chance to check for potential hazards like angry dogs. Couriers are instructed to open the door as little as possible, slide the packages in, and not enter the home if possible.&lt;/p&gt;
&lt;p id=&quot;8ZC7Df&quot;&gt;While Amazon isn’t going to allow any third-party delivery services to get inside your house with Key (at least not at launch), the company is hoping that you’ll use Key when ordering stuff like dog walking or kitchen cleaning from its Amazon Home Services division. In the coming months, it says Key will be integrated with over 1,200 service providers across 60 professions. You’ll log on to the website or app of a service like Rover.com or Merry Maids, and there will be a button offering the option for in-home service through Amazon Key.&lt;/p&gt;
&lt;div id=&quot;2kNsu5&quot;&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/wn7DBdaUNLA?rel=0&amp;amp;&quot; allowfullscreen=&quot;&quot; scrolling=&quot;no&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p id=&quot;TT4EDT&quot;&gt;Amazon’s Cloud Cam and a compatible smart lock are essential ingredients for in-home delivery. But the company is hoping you’ll use these devices for other things as well. The Key app is designed to make it simple for you to grant access to trusted friends and family. You can give permanent access, a one-time pass with a time limit, or recurring access that works on certain days and at certain times. You can grant access through the app or send permissions via a simple SMS message.&lt;/p&gt;
&lt;p id=&quot;215ssr&quot;&gt;Individual Cloud Cams cost $120, but Amazon says it will be much cheaper if you buy them in bulk. Its forthcoming subscription service will allow you to archive and review footage and activate high-end features like motion detection, people detection, and zone monitoring. It’s integrated with Alexa, so if you were down in the basement, you could ask Alexa to show you who’s at the front door. For now, it’s billed as an indoor security camera, and won’t work if left outside in the rain.&lt;/p&gt;
&lt;p id=&quot;VwZZfj&quot;&gt;While Amazon’s foray into smartphones flopped, it staged a coup with the introduction of Alexa, vaulting to the front of the pack when it comes to smart home gadgets. Alexa was the &lt;a href=&quot;https://www.theverge.com/ces/2017/1/7/14156770/verge-awards-ces-2017-best-of-las-vegas&quot;&gt;star of the show&lt;/a&gt; at CES for the past two years, finding its way into a wide range of products. Amazon has been aggressively pushing out more Alexa devices this year, everything from wardrobe assistants to alarm clocks. The &lt;a href=&quot;https://www.theverge.com/2017/7/6/15924120/amazon-echo-look-review-camera-clothes-style&quot;&gt;Amazon Look&lt;/a&gt; is probably its most daring product; a camera that’s meant to live in your closet and watch you change clothes requires a very high level of trust. But so far, Amazon has limited access to this device, which is still available for purchase by invitation only.&lt;/p&gt;
&lt;p id=&quot;OH7DSC&quot;&gt;That makes Amazon Key a crucial stepping stone in Amazon’s quest to manage your home life and integrate itself into your daily routine. Prime customers, of which there are now an &lt;a href=&quot;https://www.geekwire.com/2017/study-amazon-reaches-85-million-prime-members-u-s-35-last-year/&quot;&gt;estimated 85 million&lt;/a&gt;, may sign up for the service because they’re interested in the convenience and security of having their deliveries left inside their homes. But in the process, they would be positioning Amazon to know a lot more about their lives and habits, like when they leave the house in the morning, how often they go on vacation, and when they get back from work at night.&lt;/p&gt;
&lt;p id=&quot;ZMxhn7&quot;&gt;Amazon Key feels like a major test of how thoroughly the company has earned customers’ trust, and a harbinger of a future where tech companies mediate every aspect of our lives. Of course, if you’ve already got an &lt;a href=&quot;https://www.theverge.com/2017/9/28/16378472/amazons-echo-spot-camera-in-your-bedroom&quot;&gt;Alexa alarm clock&lt;/a&gt; keeping an eye on you at night, maybe it won’t seem like such a leap.&lt;/p&gt;

</description>
<pubDate>Wed, 25 Oct 2017 12:31:26 +0000</pubDate>
<dc:creator>stevekemp</dc:creator>
<og:description>You’ll need a smart lock and Amazon’s new Cloud Cam</og:description>
<og:image>https://cdn.vox-cdn.com/thumbor/N5bxVNDqdQ3aY1PGSshD7jTLYzo=/0x38:1920x1043/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/9529495/AMAZON_KEY_2.jpg</og:image>
<og:title>Amazon Key is a new service that lets couriers unlock your front door</og:title>
<og:type>article</og:type>
<og:url>https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</og:url>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</dc:identifier>
</item>
<item>
<title>Learn to use Awk with hundreds of examples</title>
<link>https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md</link>
<guid isPermaLink="true" >https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md</guid>
<description>&lt;h2&gt;GNU awk&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Table of Contents&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk --version &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; head -n1
GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0)

$ man awk
GAWK(1)                        Utility Commands                        GAWK(1)

NAME
       gawk - pattern scanning and processing language

SYNOPSIS
       gawk [ POSIX or GNU style options ] -f program-file [ -- ] file ...
       gawk [ POSIX or GNU style options ] [ -- ] program-text file ...

DESCRIPTION
       Gawk  is  the  GNU Project&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;s implementation of the AWK programming lan‐&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       guage.  It conforms to the definition of  the  language  in  the  POSIX&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       1003.1  Standard.   This version in turn is based on the description in&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       The AWK Programming Language, by Aho, Kernighan, and Weinberger.   Gawk&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       provides  the additional features found in the current version of Brian&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       Kernighan&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;s awk and a number of GNU-specific extensions.
...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Prerequisites and notes&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;familiarity with programming concepts like variables, printing, control structures, arrays, etc&lt;/li&gt;
&lt;li&gt;familiarity with regular expressions
&lt;/li&gt;
&lt;li&gt;this tutorial is primarily focussed on short programs that are easily usable from command line, similar to using &lt;code&gt;grep&lt;/code&gt;, &lt;code&gt;sed&lt;/code&gt;, etc&lt;/li&gt;
&lt;li&gt;see &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/&quot;&gt;Gawk: Effective AWK Programming&lt;/a&gt; manual for complete reference, has information on other &lt;code&gt;awk&lt;/code&gt; versions as well as notes on POSIX standard&lt;/li&gt;
&lt;/ul&gt;&lt;br/&gt;&lt;h2&gt;Field processing&lt;/h2&gt;
&lt;br/&gt;&lt;h4&gt;Default field separation&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;$0&lt;/code&gt; contains the entire input record
&lt;ul&gt;&lt;li&gt;default input record separator is newline character&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$1&lt;/code&gt; contains the first field text
&lt;ul&gt;&lt;li&gt;default input field separator is one or more of continuous space, tab or newline characters&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$2&lt;/code&gt; contains the second field text and so on&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$(2+3)&lt;/code&gt; result of expressions can be used, this one evaluates to &lt;code&gt;$5&lt;/code&gt; and hence gives fifth field
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NF&lt;/code&gt; is a built-in variable which contains number of fields in the current record
&lt;ul&gt;&lt;li&gt;so, &lt;code&gt;$NF&lt;/code&gt; will give last field&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$(NF-1)&lt;/code&gt; will give second last field and so on&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat fruits.txt 
fruit   qty
apple   42
banana  31
fig     90
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print only first field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
fruit
apple
banana
fig
guava

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print only second field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
qty
42
31
90
6
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Specifying different input field separator&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;by using &lt;code&gt;-F&lt;/code&gt; command line option&lt;/li&gt;
&lt;li&gt;by setting &lt;code&gt;FS&lt;/code&gt; variable&lt;/li&gt;
&lt;li&gt;See &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#fpat-and-fieldwidths&quot;&gt;FPAT and FIELDWIDTHS&lt;/a&gt; section for other ways of defining input fields&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; second field where input field separator is :&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; last field&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; first and last field&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note the use of , and space between output fields&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo 789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; second last field&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $(NF-1)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use quotes to avoid clashes with shell special characters&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;one;two;three;four&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
three
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Regular expressions based input field separator&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
string

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; first field will be empty as there is nothing before '{'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{foo}   bar=baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[{}= ]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{foo}   bar=baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[{}= ]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{foo}   bar=baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[{}= ]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;default input field separator is one or more of continuous space, tab or newline characters (will be termed as whitespace here on)
&lt;ul&gt;&lt;li&gt;exact same behavior if &lt;code&gt;FS&lt;/code&gt; is assigned single space character&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;in addition, leading and trailing whitespaces won't be considered when splitting the input record&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
 a    ate b     c
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same behavior if FS is assigned to single space character&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for anything else, leading/trailing whitespaces will be considered&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[ \t]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[ \t]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;assigning empty string to FS will split the input record character wise&lt;/li&gt;
&lt;li&gt;note the use of command line option &lt;code&gt;-v&lt;/code&gt; to set FS&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
p
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
e

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; detecting multibyte characters depends on locale&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hi👍 how are you?&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
👍
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;Specifying different output field separator&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;by setting &lt;code&gt;OFS&lt;/code&gt; variable&lt;/li&gt;
&lt;li&gt;also gets added between every argument to &lt;code&gt;print&lt;/code&gt; statement
&lt;/li&gt;
&lt;li&gt;default is single space&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; statements inside BEGIN are executed before processing any input text&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{FS=OFS=&quot;:&quot;} {print $1, $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:789
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also be set using command line option -v&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; changing a field will re-build contents of $0&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a      ate b   &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$2 = &quot;foo&quot;; print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; cat -A
a foo b$

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; $1=$1 is an idiomatic way to re-build when there is nothing else to change&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;-&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123:bar:789
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;-&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=$1; print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo-123-bar-789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; OFS is used to separate different arguments given to print&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\t&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo     bar

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=$1; print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample string with numbers
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Filtering&lt;/h2&gt;
&lt;br/&gt;&lt;h4&gt;Idiomatic print usage&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;print&lt;/code&gt; statement with no arguments will print contents of &lt;code&gt;$0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;if condition is specified without corresponding statements, contents of &lt;code&gt;$0&lt;/code&gt; is printed if condition evaluates to true&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1&lt;/code&gt; is typically used to represent always true condition and thus print contents of &lt;code&gt;$0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat poem.txt 
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; displaying contents of input file(s) similar to 'cat' command&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; equivalent to using awk '{print $0}' and awk '1'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Field comparison&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Each block of statements within &lt;code&gt;{}&lt;/code&gt; can be prefixed by an optional condition so that those statements will execute only if condition evaluates to true&lt;/li&gt;
&lt;li&gt;Condition specified without corresponding statements will lead to printing contents of &lt;code&gt;$0&lt;/code&gt; if condition evaluates to true&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field exactly matches the string 'apple'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==&quot;apple&quot;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print first field if second field &amp;gt; 35&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; NR&amp;gt;1 to avoid the header line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; NR built-in variable contains record number&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1 &amp;amp;&amp;amp; $2&amp;gt;35{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
apple
fig

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print header and lines with qty &amp;lt; 35&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1 || $2&amp;lt;35&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
banana  31
guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;If the above examples are too confusing, think of it as syntactical sugar&lt;/li&gt;
&lt;li&gt;Statements are grouped within &lt;code&gt;{}&lt;/code&gt;
&lt;ul&gt;&lt;li&gt;inside &lt;code&gt;{}&lt;/code&gt;, we have a &lt;code&gt;if&lt;/code&gt; control structure&lt;/li&gt;
&lt;li&gt;Like &lt;code&gt;C&lt;/code&gt; language, braces not needed for single statements within &lt;code&gt;if&lt;/code&gt;, but consider that &lt;code&gt;{}&lt;/code&gt; is used for clarity&lt;/li&gt;
&lt;li&gt;From this explicit syntax, remove the outer &lt;code&gt;{}&lt;/code&gt;, &lt;code&gt;if&lt;/code&gt; and &lt;code&gt;()&lt;/code&gt; used for &lt;code&gt;if&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;As we'll see later, this allows to mash up few lines of program compactly on command line itself
&lt;ul&gt;&lt;li&gt;Of course, for medium to large programs, it is better to put the code in separate file. See &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#awk-scripts&quot;&gt;awk scripts&lt;/a&gt; section&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; awk '$1==&quot;apple&quot;{print $2}' fruits.txt &lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         if($1 == &quot;apple&quot;){&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;            print $2&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         }&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       }&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; awk 'NR==1 || $2&amp;lt;35' fruits.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         if(NR==1 || $2&amp;lt;35){&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;            print $0&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         }&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       }&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
banana  31
guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;Regular expressions based filtering&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all lines containing the string 'are'&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep 'are' poem.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; negating REGEXP, same as: grep -v 'are' poem.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!/are/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Sugar is sweet,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep 'are' poem.txt | grep -v 'so'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/ &amp;amp;&amp;amp; !/so/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; lines starting with 'a' or 'b'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/^[ab]/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print last field of all lines containing 'are'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/{print $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
red,
blue,
you.
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;strings can be used as well, which will be interpreted as &lt;em&gt;REGEXP&lt;/em&gt; if necessary&lt;/li&gt;
&lt;li&gt;Allows &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#using-shell-variables&quot;&gt;using shell variables&lt;/a&gt; instead of hardcoded &lt;em&gt;REGEXP&lt;/em&gt;
&lt;ul&gt;&lt;li&gt;that section also notes difference between using &lt;code&gt;//&lt;/code&gt; and string&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 !~ &quot;are&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Sugar is sweet,

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 ~ &quot;^[ab]&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; also helpful if search strings have the / delimiter character&lt;/span&gt;
$ cat paths.txt
/foo/a/report.log
/foo/y/power.log
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/\/foo\/a\//&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; paths.txt
/foo/a/report.log
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 ~ &quot;/foo/a/&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; paths.txt
/foo/a/report.log
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;em&gt;REGEXP&lt;/em&gt; matching against specific field&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field contains 'a'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 ~ /a/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
apple   42
banana  31
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field contains 'a' and qty &amp;gt; 20&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 ~ /a/ &amp;amp;&amp;amp; $2 &amp;gt; 20&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
apple   42
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field does NOT contain 'a'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 !~ /a/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
fruit   qty
fig     90
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Fixed string matching&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;to search a string literally, &lt;code&gt;index&lt;/code&gt; function can be used instead of &lt;em&gt;REGEXP&lt;/em&gt;
&lt;ul&gt;&lt;li&gt;similar to &lt;code&gt;grep -F&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;the function returns the starting position and &lt;code&gt;0&lt;/code&gt; if no match found&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat eqns.txt
a=b,a+b=c,c&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;d
a+b,pi=3.14,5e12
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; no output since '+' is meta character, would need '/a\+b/'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/a+b/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -F 'a+b' eqns.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;a+b&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
a+b,pi=3.14,5e12
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; much easier than '/i\*\(t\+9-g\)/'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;i*(t+9-g)&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; check only last field&lt;/span&gt;
$ awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($NF,&quot;a+b&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; index not needed if entire field/line is being compared&lt;/span&gt;
$ awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==&quot;a+b&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
a+b,pi=3.14,5e12
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;return value is useful to match at specific position&lt;/li&gt;
&lt;li&gt;for ex: at start/end of line&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; start of line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;a+b&quot;)==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
a+b,pi=3.14,5e12

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; end of line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; length function returns number of characters, by default acts on $0&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;a+b&quot;)==length()-length(&quot;a+b&quot;)+1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to avoid repetitions, save the search string in variable&lt;/span&gt;
$ awk -v s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;a+b&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,s)==length()-length(s)+1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Line number based filtering&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Built-in variable &lt;code&gt;NR&lt;/code&gt; contains total records read so far&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;FNR&lt;/code&gt; if you need line numbers separately for &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#multiple-file-processing&quot;&gt;multiple file processing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: head -n2 poem.txt | tail -n1&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==2&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print 2nd and 4th line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==2 || NR==4&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: tail -n1 poem.txt&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; statements inside END are executed after processing all input text&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;END{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
And so are you.

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==4{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
90
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;for large input, use &lt;code&gt;exit&lt;/code&gt; to avoid unnecessary record processing&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 14323 14563435 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==234{print; exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14556

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; sample time comparison&lt;/span&gt;
$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; seq 14323 14563435 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==234{print; exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14556

real    0m0.004s
user    0m0.004s
sys     0m0.000s
$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; seq 14323 14563435 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==234{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14556

real    0m2.167s
user    0m2.280s
sys     0m0.092s
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Case Insensitive filtering&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -i 'rose' poem.txt &lt;/span&gt;
$ awk -v IGNORECASE=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/rose/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for small enough set, can also use REGEXP character class&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/[rR]ose/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; another way is to use built-in string function 'tolower'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;tolower($0) ~ /rose/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Changing record separators&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;RS&lt;/code&gt; to change input record separator&lt;/li&gt;
&lt;li&gt;default is newline character&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;this is a sample string&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; space as input record separator, printing all records&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR, $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 this
2 is
3 a
4 sample
5 string

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print all records containing 'a'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/a/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
sample
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;ORS&lt;/code&gt; to change output record separator&lt;/li&gt;
&lt;li&gt;gets added to every &lt;code&gt;print&lt;/code&gt; statement
&lt;/li&gt;
&lt;li&gt;default is newline character&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 3 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1
2
3
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that there is empty line after last record&lt;/span&gt;
$ seq 3 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1

2

3

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; dynamically changing ORS&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: seq 6 | awk '{ORS = NR%2 ? &quot; &quot; : RS} 1'&lt;/span&gt;
$ seq 6 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ORS = NR%2 ? &quot; &quot; : &quot;\n&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 2
3 4
5 6
$ seq 6 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ORS = NR%3 ? &quot;-&quot; : &quot;\n&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1-2-3
4-5-6
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Paragraph mode&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;When &lt;code&gt;RS&lt;/code&gt; is set to empty string, one or more consecutive empty lines is used as input record separator&lt;/li&gt;
&lt;li&gt;Can also use regular expression &lt;code&gt;RS=\n\n+&lt;/code&gt; but there are subtle differences, see &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Multiple-Line.html&quot;&gt;gawk manual - multiline records&lt;/a&gt;. Important points from that link quoted below&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote&gt;
&lt;p&gt;However, there is an important difference between ‘RS = &quot;&quot;’ and ‘RS = &quot;\n\n+&quot;’. In the first case, leading newlines in the input data file are ignored, and if a file ends without extra blank lines after the last record, the final newline is removed from the record. In the second case, this special processing is not done&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Now that the input is separated into records, the second step is to separate the fields in the records. One way to do this is to divide each of the lines into fields in the normal manner. This happens by default as the result of a special feature. When RS is set to the empty string and FS is set to a single character, the newline character always acts as a field separator. This is in addition to whatever field separations result from FS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;When FS is the null string (&quot;&quot;) or a regexp, this special feature of RS does not apply. It does apply to the default field separator of a single space: ‘FS = &quot; &quot;’&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Consider the below sample file&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat sample.txt
Hello World

Good day
How are you

Just do-it
Believe it

Today is sunny
Not a bit funny
No doubt you like it too

Much ado about nothing
He he he
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Filtering paragraphs&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print all paragraphs containing 'it'&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if extra newline at end is undesirable, can use&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; awk -v RS= '/it/{print c++ ? &quot;\n&quot; $0 : $0}' sample.txt&lt;/span&gt;
$ awk -v RS= -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/it/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Just do-it
Believe it

Today is sunny
Not a bit funny
No doubt you like it too

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; based on number of lines in each paragraph&lt;/span&gt;
$ awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v RS= -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Hello World

$ awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v RS= -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==2 &amp;amp;&amp;amp; /do/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Just do-it
Believe it

Much ado about nothing
He he he
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Re-structuring paragraphs&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; default FS is one or more of continuous space, tab or newline characters&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; default OFS is single space&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; so, $1=$1 will change it uniformly to single space between fields&lt;/span&gt;
$ awk -v RS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=$1} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Hello World
Good day How are you
Just do-it Believe it
Today is sunny Not a bit funny No doubt you like it too
Much ado about nothing He he he

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; a better usecase&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{FS=&quot;\n&quot;; OFS=&quot;. &quot;; RS=&quot;&quot;; ORS=&quot;\n\n&quot;} {$1=$1} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Hello World

Good day. How are you

Just do-it. Believe it

Today is sunny. Not a bit funny. No doubt you like it too

Much ado about nothing. He he he
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;Multicharacter RS&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Some marker like &lt;code&gt;Error&lt;/code&gt; or &lt;code&gt;Warning&lt;/code&gt; etc&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat report.log 
blah blah
Error: something went wrong
more blah
whatever
Error: something surely went wrong
some text
some more text
blah blah blah

$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;END{print NR-1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
2
$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
blah blah

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; filter 'Error:' block matching particular string&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to preserve formatting, use: '/whatever/{print RS $0}'&lt;/span&gt;
$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/whatever/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
 something went wrong
more blah
whatever

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; blocks with more than 3 lines&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; splitting string with 3 newlines will yield 4 fields&lt;/span&gt;
$ awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF&amp;gt;4{print RS $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
Error: something surely went wrong
some text
some more text
blah blah blah
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Regular expression based &lt;code&gt;RS&lt;/code&gt;
&lt;ul&gt;&lt;li&gt;the &lt;code&gt;RT&lt;/code&gt; variable will contain string matched by &lt;code&gt;RS&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Note that entire input is treated as single string, so &lt;code&gt;^&lt;/code&gt; and &lt;code&gt;$&lt;/code&gt; anchors will apply only once - not every line&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note the relationship between record and separators&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR &quot; : &quot; $0 &quot; - &quot; RT}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; Sample - 123
2 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; string - 54
3 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; with - 908
4 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; numbers - 

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; need to be careful of empty records&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123string54with908&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR &quot; : &quot; $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; 
2 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; string
3 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; with
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; and newline at end of input&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123string54with908\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR &quot; : &quot; $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; 
2 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; string
3 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; with
4 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Joining lines based on specific end of line condition&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat msg.txt
Hello there.
It will rain to-
day. Have a safe
and pleasant jou-
rney.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; join lines ending with - to next line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; by manipulating RS and ORS&lt;/span&gt;
$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;-\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v ORS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; msg.txt
Hello there.
It will rain today. Have a safe
and pleasant journey.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; by manipulating ORS alone, sub function covered in later sections&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ORS = sub(/-$/,&quot;&quot;) ? &quot;&quot; : &quot;\n&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; msg.txt
Hello there.
It will rain today. Have a safe
and pleasant journey.
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; easier: perl -pe 's/-\n//' msg.txt as newline is still part of input line&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;processing null terminated input&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo\0bar\0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; cat -A
foo^@bar^@$ 
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo\0bar\0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo
bar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Substitute functions&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Use &lt;code&gt;sub&lt;/code&gt; string function for replacing first occurrence&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;gsub&lt;/code&gt; for replacing all occurrences&lt;/li&gt;
&lt;li&gt;By default, &lt;code&gt;$0&lt;/code&gt; which contains input record is modified, can specify any other field or variable as needed&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing first occurrence&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sub(&quot;-&quot;, &quot;:&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1:2-3-4-5

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing all occurrences&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;-&quot;, &quot;:&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1:2:3:4:5

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; return value for sub/gsub is number of replacements made&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=gsub(&quot;-&quot;, &quot;:&quot;); print n} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
1:2:3:4:5

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; // format is better suited to specify search REGEXP&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(/[^-]+/, &quot;abc&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
abc-abc-abc-abc-abc

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing all occurrences only for third field&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;one;two;three;four&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;e&quot;, &quot;E&quot;, $3)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
one two thrEE four
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Use &lt;code&gt;gensub&lt;/code&gt; to return the modified string unlike &lt;code&gt;sub&lt;/code&gt; or &lt;code&gt;gsub&lt;/code&gt; which modifies inplace&lt;/li&gt;
&lt;li&gt;it also supports back-references and ability to modify specific match&lt;/li&gt;
&lt;li&gt;acts upon &lt;code&gt;$0&lt;/code&gt; if target is not specified&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace second occurrence&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(&quot;:&quot;, &quot;-&quot;, 2)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123-bar:baz
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use REGEXP as needed&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;XYZ&quot;, 2)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:XYZ:bar:baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or print the returned string directly&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print gensub(&quot;:&quot;, &quot;-&quot;, 2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123-bar:baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace third occurrence&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;XYZ&quot;, 3)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123:XYZ:baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace all occurrences, similar to gsub&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;XYZ&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
XYZ:XYZ:XYZ:XYZ

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; target other than $0&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=gensub(/o/, &quot;b&quot;, 2, $1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
fob:123:bar:baz
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;back-reference examples&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;\&quot;&lt;/code&gt; within double-quotes to represent &lt;code&gt;&quot;&lt;/code&gt; character in replacement string&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;\\1&lt;/code&gt; to represent &lt;code&gt;\1&lt;/code&gt; - the first captured group and so on&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;amp;&lt;/code&gt; or &lt;code&gt;\0&lt;/code&gt; will back-reference entire matched string&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing last occurrence without knowing how many occurrences are there&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*):/, &quot;\\1-&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123:bar-baz
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo and bar and baz land good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*)and/, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar and baz lXYZ good

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use word boundaries as necessary&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo and bar and baz land good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*)\&amp;lt;and\&amp;gt;/, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing last but one&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;456:foo:123:bar:789:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*):(.*:)/, &quot;\\1-\\2&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
456:foo:123:bar-789:baz

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\&quot;&amp;amp;\&quot;&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;saving quotes in variables - to avoid escaping double quotes or having to use octal code for single quotes&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\047&amp;amp;\047&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v sq=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;'&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, sq&quot;&amp;amp;&quot;sq, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\&quot;&amp;amp;\&quot;&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v dq=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, dq&quot;&amp;amp;&quot;dq, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Inplace file editing&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Use this option with caution, preferably after testing that the &lt;code&gt;awk&lt;/code&gt; code is working as intended&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat greeting.txt 
Hi there
Have a nice day

$ awk -i inplace &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;e&quot;, &quot;E&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; greeting.txt 
$ cat greeting.txt 
Hi thErE
HavE a nicE day
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Multiple input files are treated individually and changes are written back to respective files&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat f1
I ate 3 apples
$ cat f2
I bought two bananas and 3 mangoes

$ awk -i inplace &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;3&quot;, &quot;three&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; f1 f2
$ cat f1
I ate three apples
$ cat f2
I bought two bananas and three mangoes
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;to create backups of original file, set &lt;code&gt;INPLACE_SUFFIX&lt;/code&gt; variable&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk -i inplace -v INPLACE_SUFFIX=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;.bkp&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;three&quot;, &quot;3&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; f1
$ cat f1
I ate 3 apples
$ cat f1.bkp
I ate three apples
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Using shell variables&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;when &lt;code&gt;awk&lt;/code&gt; code is part of shell program and shell variable needs to be passed as input to &lt;code&gt;awk&lt;/code&gt; code&lt;/li&gt;
&lt;li&gt;for example:
&lt;ul&gt;&lt;li&gt;command line argument passed to shell script, which is in turn passed on to &lt;code&gt;awk&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;control structures in shell script calling &lt;code&gt;awk&lt;/code&gt; with different search strings&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://stackoverflow.com/questions/19075671/how-do-i-use-shell-variables-in-an-awk-script&quot;&gt;stackoverflow - How do I use shell variables in an awk script?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; examples tested with bash shell&lt;/span&gt;

$ f=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
$ f=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;fig&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fig     90

$ q=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;20&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ awk -v threshold=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1 || $2&amp;gt;threshold&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
fig     90
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;accessing shell environment variables&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; existing environment variable&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;PWD&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
/home/learnbyexample
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;SHELL&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
/bin/bash

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; defined along with awk code&lt;/span&gt;
$ word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hello world&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;word&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
hello world

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; using ENVIRON also prevents awk's interpretation of escape sequences&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;a\n=c&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ foo=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;foo&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;=c
$ awk -v foo=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print foo}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
=c
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;are&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for: awk '!/are/' poem.txt&lt;/span&gt;
$ awk -v s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 !~ s&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Sugar is sweet,
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for: awk '/are/ &amp;amp;&amp;amp; !/so/' poem.txt&lt;/span&gt;
$ awk -v s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 ~ s &amp;amp;&amp;amp; !/so/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,

$ r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[^-]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(r, &quot;abc&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
abc-abc-abc-abc-abc

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; escape sequence has to be doubled when string is interpreted as REGEXP&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo and bar and baz land good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(&quot;(.*)\\&amp;lt;and\\&amp;gt;&quot;, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; hence passing as variable should be&lt;/span&gt;
$ r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;(.*)\\&amp;lt;and\\&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(r, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or use ENVIRON&lt;/span&gt;
$ r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;(.*)\&amp;lt;and\&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(ENVIRON[&quot;r&quot;], &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Multiple file input&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Example to show difference between &lt;code&gt;NR&lt;/code&gt; and &lt;code&gt;FNR&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; NR for overall record number&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt 
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; FNR for individual file's record number&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: head -q -n1 poem.txt greeting.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt 
Roses are red,
Hi thErE
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Constructs to do some processing before starting each file as well as at the end&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BEGINFILE&lt;/code&gt; - to add code to be executed before start of each input file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ENDFILE&lt;/code&gt; - to add code to be executed after processing each input file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FILENAME&lt;/code&gt; - file name of current input file being processed&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similar to: tail -n1 poem.txt greeting.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{print &quot;file: &quot;FILENAME}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       ENDFILE{print $0&quot;\n------&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt
file: poem.txt
And so are you.
------
file: greeting.txt
HavE a nicE day
------
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;And of course, there can be usual &lt;code&gt;awk&lt;/code&gt; code&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{print &quot;file: &quot;FILENAME}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       FNR==1;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       ENDFILE{print &quot;------&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt
file: poem.txt
Roses are red,
------
file: greeting.txt
Hi thErE
------

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{c++; print &quot;file: &quot;FILENAME}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       FNR==2;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       END{print &quot;\nTotal input files: &quot;c}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt
file: poem.txt
Violets are blue,
file: greeting.txt
HavE a nicE day

Total input files: 2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Control Structures&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Syntax is similar to &lt;code&gt;C&lt;/code&gt; language and single statements inside control structures don't require to be grouped within &lt;code&gt;{}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;See &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Statements.html&quot;&gt;gawk manual - Control Statements&lt;/a&gt; for details&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Remember that by default there is a loop that goes over all input records and constructs like &lt;code&gt;BEGIN&lt;/code&gt; and &lt;code&gt;END&lt;/code&gt; fall outside that loop&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat nums.txt 
42
-2
10101
-3.14
-75
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; uninitialized variables will have empty string&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; so either add '0' or use unary '+' operator to convert to number&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print +sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
0
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;if-else and loops&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: sed -n '/are/ s/so/SO/p' poem.txt &lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; remember that sub/gsub returns number of substitutions made&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/{if(sub(&quot;so&quot;, &quot;SO&quot;)) print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
And SO are you.
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; of course, can also use&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/ &amp;amp;&amp;amp; sub(&quot;so&quot;, &quot;SO&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
And SO are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if-else example&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{if($2&amp;gt;40) $0=&quot;+&quot;$0; else $0=&quot;-&quot;$0} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
+apple   42
-banana  31
+fig     90
-guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat nums.txt 
42
-2
10101
-3.14
-75

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; changing -ve to +ve and vice versa&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: awk '{if($0 ~ /^-/) sub(/^-/,&quot;&quot;); else sub(/^/,&quot;-&quot;)} 1' nums.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0 ~ /^-/ ? sub(/^-/,&quot;&quot;) : sub(/^/,&quot;-&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
-42
2
-10101
3.14
75
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '!sub(/^-/,&quot;&quot;){sub(/^/,&quot;-&quot;)} 1' nums.txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{for(i=2; i&amp;lt;11; i+=2) print i}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
2
4
6
8
10

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; looping each field&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;scat:cat:no cat:abdicate:cater&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{for(i=1;i&amp;lt;=NF;i++) if($i==&quot;cat&quot;) $i=&quot;CAT&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
scat:CAT:no cat:abdicate:cater
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use sub function&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{for(i=1;i&amp;lt;=NF;i++) sub(/^cat$/,&quot;CAT&quot;,$i)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
scat:CAT:no cat:abdicate:cater
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;while loop&lt;/li&gt;
&lt;li&gt;do-while is also available&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{i=2; while(i&amp;lt;11){print i; i+=2}}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
2
4
6
8
10

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; recursive substitution&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; here again return value of sub/gsub is useful&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;titillate&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{while( gsub(/til/, &quot;&quot;) ) print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
tilate
ate
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;next and nextfile&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;next&lt;/code&gt; will skip rest of statements and start processing next line of current file being processed
&lt;ul&gt;&lt;li&gt;there is a loop by default which goes over all input records, &lt;code&gt;next&lt;/code&gt; is applicable for that&lt;/li&gt;
&lt;li&gt;it is similar to &lt;code&gt;continue&lt;/code&gt; statement within loops&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;it is often used in &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#two-file-processing&quot;&gt;Two file processing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; here 'next' is used to skip processing header line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1{print; next} /a.*a/{$0=&quot;*&quot;$0} /[eiou]/{$0=&quot;-&quot;$0} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
-apple   42
&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;banana  31
-fig     90
-&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;nextfile&lt;/code&gt; is useful to skip remaining lines from current file being processed and move on to next file&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: head -q -n1 poem.txt greeting.txt fruits.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR&amp;gt;1{nextfile} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt fruits.txt
Roses are red,
Hi thErE
fruit   qty

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; specific field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR&amp;gt;2{nextfile} {print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt fruits.txt
Roses
Violets
Hi
HavE
fruit
apple

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similar to 'grep -il'&lt;/span&gt;
$ awk -v IGNORECASE=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/red/{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
colors_1.txt
colors_2.txt
poem.txt
$ awk -v IGNORECASE=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 ~ /red/{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
colors_1.txt
colors_2.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Multiline processing&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Processing consecutive lines&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat poem.txt 
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; match two consecutive lines&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;p~/are/ &amp;amp;&amp;amp; /is/{print p ORS $0} {p=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,
Sugar is sweet,
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if only the second line is needed&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;p~/are/ &amp;amp;&amp;amp; /is/; {p=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Sugar is sweet,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; match three consecutive lines&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;p2~/red/ &amp;amp;&amp;amp; p1~/blue/ &amp;amp;&amp;amp; /is/{print p2} {p2=p1; p1=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; common mistake&lt;/span&gt;
$ sed -n &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/{N;/is/p}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; would need something like this and not practical to extend for other cases&lt;/span&gt;
$ sed &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$!N; /are.*\n.*is/p; D&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,
Sugar is sweet,
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Consider this sample input file&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat range.txt 
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
END
baz
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;extracting lines around matching line&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://stackoverflow.com/questions/17908555/printing-with-sed-or-awk-a-line-following-a-matching-pattern&quot;&gt;stackoverflow - lines around matching regexp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;how &lt;code&gt;n &amp;amp;&amp;amp; n--&lt;/code&gt; works:
&lt;ul&gt;&lt;li&gt;need to note that right hand side of &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; is processed only if left hand side is &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;so for example, if initially &lt;code&gt;n=2&lt;/code&gt;, then we get
&lt;ul&gt;&lt;li&gt;&lt;code&gt;2 &amp;amp;&amp;amp; 2; n=1&lt;/code&gt; - evaluates to &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1 &amp;amp;&amp;amp; 1; n=0&lt;/code&gt; - evaluates to &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0 &amp;amp;&amp;amp;&lt;/code&gt; - evaluates to &lt;code&gt;false&lt;/code&gt; ... no decrementing &lt;code&gt;n&lt;/code&gt; and hence will be &lt;code&gt;false&lt;/code&gt; until &lt;code&gt;n&lt;/code&gt; is re-assigned non-zero value&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similar to: grep --no-group-separator -A1 'BEGIN' range.txt &lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{n=2} n &amp;amp;&amp;amp; n--&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
1234
BEGIN
a

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; only print the line after matching line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '/BEGIN/{n=1; next} n &amp;amp;&amp;amp; n--' range.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;n &amp;amp;&amp;amp; n--; /BEGIN/{n=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt 
1234
a
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; generic case: print nth line after match&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;n &amp;amp;&amp;amp; !--n; /BEGIN/{n=3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
END
c

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print second line prior to matched line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{print p2} {p2=p1; p1=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
b
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; save all lines in an array for generic case&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{print a[NR-3]} {a[NR]=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
a
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or use the reversing trick&lt;/span&gt;
$ tac range.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;n &amp;amp;&amp;amp; !--n; /END/{n=3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
BEGIN
a
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Checking if multiple strings are present at least once in entire input file&lt;/li&gt;
&lt;li&gt;If there are lots of strings to check, use arrays&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use BEGINFILE instead of FNR==1&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR==1{s1=s2=0} /is/{s1=1} /are/{s2=1} s1&amp;amp;&amp;amp;s2{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
poem.txt
sample.txt

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR==1{s1=s2=0} /foo/{s1=1} /report/{s2=1} s1&amp;amp;&amp;amp;s2{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
paths.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Two file processing&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;We'll use awk's associative arrays (key-value pairs) here
&lt;/li&gt;
&lt;li&gt;Unlike &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/sorting_stuff.md#comm&quot;&gt;comm&lt;/a&gt; the input files need not be sorted and comparison can be done based on certain field(s) as well&lt;/li&gt;
&lt;/ul&gt;&lt;br/&gt;&lt;h4&gt;Comparing whole lines&lt;/h4&gt;
&lt;p&gt;Consider the following test files&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat colors_1.txt
Blue
Brown
Purple
Red
Teal
Yellow

$ cat colors_2.txt
Black
Blue
Green
Red
White
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;common lines and lines unique to one of the files&lt;/li&gt;
&lt;li&gt;For two files as input, &lt;code&gt;NR==FNR&lt;/code&gt; will be true only when first file is being processed&lt;/li&gt;
&lt;li&gt;Using &lt;code&gt;next&lt;/code&gt; will skip rest of code when first file is processed&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a[$0]&lt;/code&gt; will create unique keys (here entire line content is used as key) in array &lt;code&gt;a&lt;/code&gt;
&lt;ul&gt;&lt;li&gt;just referencing a key will create it if it doesn't already exist, with value as empty string (will also act as zero in numeric context)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$0 in a&lt;/code&gt; will be true if key already exists in array &lt;code&gt;a&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; common lines&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -Fxf colors_1.txt colors_2.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$0]; next} $0 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; colors_1.txt colors_2.txt
Blue
Red

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; lines from colors_2.txt not present in colors_1.txt&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -vFxf colors_1.txt colors_2.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$0]; next} !($0 in a)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; colors_1.txt colors_2.txt
Black
Green
White

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reversing the order of input files gives&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; lines from colors_1.txt not present in colors_2.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$0]; next} !($0 in a)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; colors_2.txt colors_1.txt
Brown
Purple
Teal
Yellow
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Comparing specific fields&lt;/h4&gt;
&lt;p&gt;Consider the sample input file&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59
ECE     Om      92
CSE     Amy     67
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;single field&lt;/li&gt;
&lt;li&gt;For ex: only first field comparison by using &lt;code&gt;$1&lt;/code&gt; instead of &lt;code&gt;$0&lt;/code&gt; as key&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list1
ECE
CSE

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; extract only lines matching first field specified in list1&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1]; next} $1 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list1 marks.txt
ECE     Raj     53
ECE     Joel    72
CSE     Surya   81
ECE     Om      92
CSE     Amy     67

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if header is needed as well&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1]; next} FNR==1 || $1 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list1 marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
CSE     Surya   81
ECE     Om      92
CSE     Amy     67
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;multiple fields&lt;/li&gt;
&lt;li&gt;create a string by adding some character between the fields to act as key
&lt;ul&gt;&lt;li&gt;for ex: to avoid matching two field values &lt;code&gt;abc&lt;/code&gt; and &lt;code&gt;123&lt;/code&gt; to match with two other field values &lt;code&gt;ab&lt;/code&gt; and &lt;code&gt;c123&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;by adding character, say &lt;code&gt;_&lt;/code&gt;, the key would be &lt;code&gt;abc_123&lt;/code&gt; for first case and &lt;code&gt;ab_c123&lt;/code&gt; for second case&lt;/li&gt;
&lt;li&gt;this can still lead to false match if input data has &lt;code&gt;_&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;there is also a built-in way to do this using &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Multidimensional.html#Multidimensional&quot;&gt;gawk manual - Multidimensional Arrays&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list2
EEE Moi
CSE Amy
ECE Raj

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; extract only lines matching both fields specified in list2&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1&quot;_&quot;$2]; next} $1&quot;_&quot;$2 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list2 marks.txt
ECE     Raj     53
EEE     Moi     68
CSE     Amy     67

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; uses SUBSEP as separator, whose default value is non-printing character \034&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1,$2]; next} ($1,$2) in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list2 marks.txt
ECE     Raj     53
EEE     Moi     68
CSE     Amy     67
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;field and value comparison&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list3
ECE 70
EEE 65
CSE 80

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; extract line matching Dept and minimum marks specified in list3&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{d[$1]; m[$1]=$2; next} $1 in d &amp;amp;&amp;amp; $3 &amp;gt;= m[$1]&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list3 marks.txt
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
ECE     Om      92
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;getline&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;If entire line (instead of fields) from one file is needed to change the other file, using &lt;code&gt;getline&lt;/code&gt; would be faster&lt;/li&gt;
&lt;li&gt;But use it with caution
&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace mth line in poem.txt with nth line from nums.txt&lt;/span&gt;
$ awk -v m=3 -v n=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{while(n-- &amp;gt; 0) getline s &amp;lt; &quot;nums.txt&quot;}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;                     FNR==m{$0=s} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,
-2
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; without getline, but slower due to NR==FNR check for every line processed&lt;/span&gt;
$ awk -v m=3 -v n=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{if(FNR==n){s=$0; nextfile} next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;                     FNR==m{$0=s} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt poem.txt
Roses are red,
Violets are blue,
-2
And so are you.
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Another use case is if two files are to be processed exactly for same line numbers&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print line from fruits.txt if corresponding line from nums.txt is +ve number&lt;/span&gt;
$ awk -v file=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;nums.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{getline num &amp;lt; file; if(num&amp;gt;0) print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; without getline, but has to save entire file in array&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{n[FNR]=$0; next} n[FNR]&amp;gt;0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt fruits.txt
fruit   qty
banana  31
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Creating new fields&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Number of fields in input record can be changed by simply manipulating &lt;code&gt;NF&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reducing fields&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,bar,123,baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, -v OFS=, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF=2} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo,bar

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; creating new empty field(s)&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,bar,123,baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, -v OFS=, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF=5} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo,bar,123,baz,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; assigning to field greater than NF will create empty fields as needed&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,bar,123,baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, -v OFS=, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$7=42} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo,bar,123,baz,,,42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; adding a new 'Grade' field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{OFS=&quot;\t&quot;; g[9]=&quot;S&quot;; g[8]=&quot;A&quot;; g[7]=&quot;B&quot;; g[6]=&quot;C&quot;; g[5]=&quot;D&quot;}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;      {NF++; if(NR==1)$NF=&quot;Grade&quot;; else $NF=g[int($(NF-1)/10)]} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
Dept    Name    Marks   Grade
ECE     Raj     53      D
ECE     Joel    72      B
EEE     Moi     68      C
CSE     Surya   81      A
EEE     Tia     59      D
ECE     Om      92      S
CSE     Amy     67      C
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;two file example&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list4
Raj class_rep
Amy sports_rep
Tia placement_rep

$ awk -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\t&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{r[$1]=$2; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         {NF++; if(FNR==1)$NF=&quot;Role&quot;; else $NF=r[$2]} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list4 marks.txt
Dept    Name    Marks   Role
ECE     Raj     53      class_rep
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59      placement_rep
ECE     Om      92
CSE     Amy     67      sports_rep
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Dealing with duplicates&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;default value of uninitialized variable is &lt;code&gt;0&lt;/code&gt; in numeric context and empty string in text context
&lt;ul&gt;&lt;li&gt;and evaluates to &lt;code&gt;false&lt;/code&gt; when used conditionally&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;em&gt;Illustration to show default numeric value and array in action&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;mad\n42\n42\ndam\n42\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
mad
42
42
dam
42

$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;mad\n42\n42\ndam\n42\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0 &quot;\t&quot; int(a[$0]); a[$0]++}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
mad     0
42      0
42      1
dam     0
42      2
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; only those entries with second column value zero will be retained&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;mad\n42\n42\ndam\n42\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!a[$0]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
mad
42
dam
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;first, examples that retain only first copy of duplicates&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
abc  7   4
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; whole line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$0]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; particular column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;For multiple fields, separate them using &lt;code&gt;,&lt;/code&gt; or form a string with some character in between
&lt;ul&gt;&lt;li&gt;choose a character unlikely to appear in input data, else there can be false matches&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2&quot;_&quot;$3]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use simulated multidimensional array&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; SUBSEP, whose default is \034 non-printing character, is used as separator&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2,$3]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;retaining specific numbered copy&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; second occurrence of duplicate&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;++seen[$2]==2&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; third occurrence of duplicate&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;++seen[$2]==3&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;retaining only last copy of duplicate&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reverse the input line-wise, retain first copy and then reverse again&lt;/span&gt;
$ tac duplicates.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
abc  7   4
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all duplicates based on 1st column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1]++; next} a[$1]&amp;gt;1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
abc  7   4
abc  7   4
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all duplicates based on 3rd column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$3]++; next} a[$3]&amp;gt;1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
abc  7   4
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; more than 2 duplicates based on 2nd column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$2]++; next} a[$2]&amp;gt;2&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; only unique lines based on 3rd column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$3]++; next} a[$3]==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Lines between two REGEXPs&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;This section deals with filtering lines bound by two &lt;em&gt;REGEXP&lt;/em&gt;s (referred to as blocks)&lt;/li&gt;
&lt;li&gt;For simplicity the two &lt;em&gt;REGEXP&lt;/em&gt;s usually used in below examples are the strings &lt;strong&gt;BEGIN&lt;/strong&gt; and &lt;strong&gt;END&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;br/&gt;&lt;h4&gt;All unbroken blocks&lt;/h4&gt;
&lt;p&gt;Consider the below sample input file, which doesn't have any unbroken blocks (i.e &lt;strong&gt;BEGIN&lt;/strong&gt; and &lt;strong&gt;END&lt;/strong&gt; are always present in pairs)&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat range.txt 
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
END
baz
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Extracting lines between starting and ending &lt;em&gt;REGEXP&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; include both starting/ending REGEXP&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '/BEGIN/,/END/' range.txt&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; which is similar to sed -n '/BEGIN/,/END/p'&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; but not suitable to extend for other cases&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} f; /END/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
1234
6789
END
BEGIN
a
b
c
END

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; exclude both starting/ending REGEXP&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '/BEGIN/{f=1; next} /END/{f=0} f' range.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=0} f; /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
6789
a
b
c
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Include only start or end &lt;em&gt;REGEXP&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; include only starting REGEXP&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} /END/{f=0} f&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
1234
6789
BEGIN
a
b
c

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; include only ending REGEXP&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;f; /END/{f=0} /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
6789
END
a
b
c
END
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Extracting lines other than lines between the two &lt;em&gt;REGEXP&lt;/em&gt;s&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} !f; /END/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
foo
bar
baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; the other three cases would be&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=0} !f; /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!f; /BEGIN/{f=1} /END/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt 
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} /END/{f=0} !f&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Specific blocks&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Getting first block&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} f; /END/{exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt 
BEGIN
1234
6789
END

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use other tricks discussed in previous section as needed&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{exit} f; /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
6789
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Getting last block&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reverse input linewise, change the order of REGEXPs, finally reverse again&lt;/span&gt;
$ tac range.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=1} f; /BEGIN/{exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
BEGIN
a
b
c
END

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or, save the blocks in a buffer and print the last one alone&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; ORS contains output record separator, which is newline by default&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{f=1; b=$0; next} f{b=b ORS $0} /6/{f=0} END{print b}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
24
25
26
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Getting blocks based on a counter&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all blocks&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; sed -n &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/,/6/p&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
5
6
14
15
16
24
25
26

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; get only 2nd block&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: seq 30 | awk -v b=2 '/4/{c++} c==b{print; if(/6/) exit}'&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v b=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{c++} c==b; /6/ &amp;amp;&amp;amp; c==b{exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14
15
16

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to get all blocks greater than 'b' blocks&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v b=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{f=1; c++} f &amp;amp;&amp;amp; c&amp;gt;b; /6/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14
15
16
24
25
26
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;excluding a particular block&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; excludes 2nd block&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v b=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{f=1; c++} f &amp;amp;&amp;amp; c!=b; /6/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
5
6
24
25
26
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Broken blocks&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;If there are blocks with ending &lt;em&gt;REGEXP&lt;/em&gt; but without corresponding start, &lt;code&gt;awk '/BEGIN/{f=1} f; /END/{f=0}'&lt;/code&gt; will suffice&lt;/li&gt;
&lt;li&gt;Consider the modified input file where starting &lt;em&gt;REGEXP&lt;/em&gt; doesn't have corresponding ending&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat broken_range.txt
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; the file reversing trick comes in handy here as well&lt;/span&gt;
$ tac broken_range.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=1} f; /BEGIN/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
BEGIN
1234
6789
END
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;But if both kinds of broken blocks are present, accumulate the records and print accordingly&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat multiple_broken.txt 
qqqqqqq
BEGIN
foo
BEGIN
1234
6789
END
bar
END
0-42-1
BEGIN
a
BEGIN
b
END
&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;as&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;s&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;sd&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1; buf=$0; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       f{buf=buf ORS $0}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       /END/{f=0; if(buf) print buf; buf=&quot;&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; multiple_broken.txt
BEGIN
1234
6789
END
BEGIN
b
END
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Arrays&lt;/h2&gt;
&lt;p&gt;We've already seen examples using arrays, some more examples discussed in this section&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;array looping&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; average marks for each department&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{d[$1]+=$3; c[$1]++} END{for(i in d)print i, d[i]/c[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
ECE 72.3333
EEE 63.5
CSE 74
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; by default, keys are traversed in random order&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{a[&quot;z&quot;]=1; a[&quot;x&quot;]=12; a[&quot;b&quot;]=42; for(i in a)print i, a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
x 12
z 1
b 42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; index sorted ascending order as strings&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{PROCINFO[&quot;sorted_in&quot;] = &quot;@ind_str_asc&quot;;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       a[&quot;z&quot;]=1; a[&quot;x&quot;]=12; a[&quot;b&quot;]=42; for(i in a)print i, a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
b 42
x 12
z 1

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; value sorted ascending order as numbers&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{PROCINFO[&quot;sorted_in&quot;] = &quot;@val_num_asc&quot;;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       a[&quot;z&quot;]=1; a[&quot;x&quot;]=12; a[&quot;b&quot;]=42; for(i in a)print i, a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
z 1
x 12
b 42
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;deleting array elements&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list5
CSE     Surya   75
EEE     Jai     69
ECE     Kal     83

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; update entry if a match is found&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; else append the new entries&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ky=$1&quot;_&quot;$2} NR==FNR{upd[ky]=$0; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;        ky in upd{$0=upd[ky]; delete upd[ky]} 1;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;        END{for(i in upd)print upd[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list5 marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
EEE     Moi     68
CSE     Surya   75
EEE     Tia     59
ECE     Om      92
CSE     Amy     67
ECE     Kal     83
EEE     Jai     69
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{d[$1][$2]=$3} END{for(i in d[&quot;ECE&quot;])print i}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
Joel
Raj
Om

$ awk -v f=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;CSE&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{d[$1][$2]=$3} END{for(i in d[f])print i, d[f][i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
Surya 81
Amy 67
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;awk scripts&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;For larger programs, save the code in a file and use &lt;code&gt;-f&lt;/code&gt; command line option&lt;/li&gt;
&lt;li&gt;&lt;code&gt;;&lt;/code&gt; is not needed to terminate a statement&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Options.html#Options&quot;&gt;gawk manual - Command-Line Options&lt;/a&gt; for other related options&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat buf.awk
/BEGIN/{
    f=1
    buf=&lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt;
    next
}

f{
    buf=buf ORS &lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt;
}

/END/{
    f=0
    if(buf)
        print buf
    buf=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}

$ awk -f buf.awk multiple_broken.txt 
BEGIN
1234
6789
END
BEGIN
b
END
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Another advantage is that single quotes can be freely used&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\047&amp;amp;\047&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ cat quotes.awk
{
    &lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt; = gensub(/[^:]+/, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;'&amp;amp;'&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;g&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
}

1

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -f quotes.awk
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;If the code has been first tried out on command line, add &lt;code&gt;-o&lt;/code&gt; option to get a pretty printed version&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk -o -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\t&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{r[$1]=$2; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         {NF++; if(FNR==1)$NF=&quot;Role&quot;; else $NF=r[$2]} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list4 marks.txt
Dept    Name    Marks   Role
ECE     Raj     53      class_rep
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59      placement_rep
ECE     Om      92
CSE     Amy     67      sports_rep
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;File name can be passed along &lt;code&gt;-o&lt;/code&gt; option, otherwise by default &lt;code&gt;awkprof.out&lt;/code&gt; will be used&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat awkprof.out
        &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; gawk profile, created Tue Oct 24 15:10:02 2017&lt;/span&gt;

        &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Rule(s)&lt;/span&gt;

        NR == FNR {
                r[&lt;span class=&quot;pl-smi&quot;&gt;$1&lt;/span&gt;] = &lt;span class=&quot;pl-smi&quot;&gt;$2&lt;/span&gt;
                next
        }

        {
                NF++
                &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; (FNR == 1) {
                        &lt;span class=&quot;pl-smi&quot;&gt;$NF&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Role&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
                } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
                        &lt;span class=&quot;pl-smi&quot;&gt;$NF&lt;/span&gt; = r[&lt;span class=&quot;pl-smi&quot;&gt;$2&lt;/span&gt;]
                }
        }

        1 {
                print &lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt;
        }

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that other command line options have to be provided as usual&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for ex: awk -v OFS='\t' -f awkprof.out list4 marks.txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Miscellaneous&lt;/h2&gt;
&lt;br/&gt;&lt;h4&gt;FPAT and FIELDWIDTHS&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; define fields to be one or more consecutive digits&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FPAT=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $2, $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
123 54 908
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; define fields to be one or more consecutive alphabets&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FPAT=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[a-zA-Z]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $2, $3, $4}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample string with numbers
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;For simpler &lt;strong&gt;csv&lt;/strong&gt; input having quoted strings if fields themselves have &lt;code&gt;,&lt;/code&gt; in them, using &lt;code&gt;FPAT&lt;/code&gt; is reasonable approach&lt;/li&gt;
&lt;li&gt;Use a proper parser if input can have other cases like newlines in fields
&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,&quot;bar,123&quot;,baz,abc&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;$ echo &lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt; | awk -v FPAT='&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;[^&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;]*&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt;[^,]&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;{print &lt;span class=&quot;pl-smi&quot;&gt;$2&lt;/span&gt;}&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&quot;bar,123&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;if input has well defined fields based on number of characters, &lt;code&gt;FIELDWIDTHS&lt;/code&gt; can be used to specify width of each field&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk -v FIELDWIDTHS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;8 3&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v OFS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/fig/{$2=35} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
fig     35
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; without FIELDWIDTHS&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/fig/{$2=35} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
fig 35
guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;String functions&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;length&lt;/code&gt; function - returns length of string, by default acts on &lt;code&gt;$0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 8 13 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;length()==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
8
9

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1 || length($1)&amp;gt;4&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; character count and not byte count is calculated, similar to 'wc -m'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hi👍&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print length()}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
3

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use -b option if number of bytes are needed&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hi👍&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -b &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print length()}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
6
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 1st argument is string to be split&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 2nd argument is array to save results, indexed from 1&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 3rd argument is separator, default is FS&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,1996-10-25,hello,good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{split($2,d,&quot;-&quot;); print &quot;Month is: &quot; d[2]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Month is: 10

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; using regular expression to define separator&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; return value is number of fields after splitting&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=split($0,s,/[0-9]+/); for(i=1;i&amp;lt;=n;i++)print s[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample
string
with
numbers
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use 4th argument if separators are needed as well&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=split($0,s,/[0-9]+/,seps); for(i=1;i&amp;lt;n;i++)print seps[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
123
54
908

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; single row to multiple rows based on splitting last field&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,baz,12:42:3&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=split($NF,a,&quot;:&quot;); NF--; for(i=1;i&amp;lt;=n;i++) print $0,a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo baz 12
foo baz 42
foo baz 3
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;substr&lt;/code&gt; function allows to extract specified number of characters from given string
&lt;ul&gt;&lt;li&gt;indexing starts with &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;See &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/gawk.html#index-substr_0028_0029-function&quot;&gt;gawk manual - substr function&lt;/a&gt; for corner cases and details&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 1st argument is string to be worked on&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 2nd argument is starting position&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 3rd argument is number of characters to be extracted&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,1,5)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
abcde
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,4,3)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
def
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if 3rd argument is not given, string is extracted until end&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,6)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
fghij

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,2,3), substr($0,6,3)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bcd:fgh

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if only few characters are needed from input line, can use empty FS&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
c
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3, $5}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
c e
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Executing external commands&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;External commands can be issued using &lt;code&gt;system&lt;/code&gt; function&lt;/li&gt;
&lt;li&gt;Output would be as usual on &lt;code&gt;stdout&lt;/code&gt; unless redirected while calling the command&lt;/li&gt;
&lt;li&gt;Return value of &lt;code&gt;system&lt;/code&gt; depends on &lt;code&gt;exit&lt;/code&gt; status of executed command, see &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/I_002fO-Functions.html&quot;&gt;gawk manual - Input/Output Functions&lt;/a&gt; for details&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{system(&quot;echo Hello World&quot;)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Hello World

$ wc poem.txt
 4 13 65 poem.txt
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{system(&quot;wc poem.txt&quot;)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
 4 13 65 poem.txt

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{system(&quot;seq 10 | paste -sd, &amp;gt; out.txt&quot;)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ cat out.txt
1,2,3,4,5,6,7,8,9,10

$ ls xyz.txt
ls: cannot access &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;xyz.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;: No such file or directory
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;$?&lt;/span&gt;
2
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{s=system(&quot;ls xyz.txt&quot;); print &quot;Status: &quot; s}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
ls: cannot access &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;xyz.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;: No such file or directory
Status: 2

$ cat f2
I bought two bananas and three mangoes
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;f1,f2,odd.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{system(&quot;cat &quot; $2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
I bought two bananas and three mangoes
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;printf formatting&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Similar to &lt;code&gt;printf&lt;/code&gt; function in &lt;code&gt;C&lt;/code&gt; and shell built-in command&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;sprintf&lt;/code&gt; function to save result in variable instead of printing&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Printf.html&quot;&gt;gawk manual - printf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that ORS is not appended and has to be added manually&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%.2f\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.86

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%10.2f\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
  10062.86

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%010.2f\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
0010062.86

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%d\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%+d\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
+10062

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%e\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
1.006286e+04
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;to refer argument by positional number (starts with 1), use &lt;code&gt;&amp;lt;num&amp;gt;$&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk 'BEGIN{printf &quot;hex=%x\noct=%o\ndec=%d\n&quot;, 15, 15, 15}'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;hex=%1$x\noct=%1$o\ndec=%1$d\n&quot;, 15}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
hex=f
oct=17
dec=15

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; adding prefix to hex/oct numbers&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;hex=%1$#x\noct=%1$#o\ndec=%1$d\n&quot;, 15}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
hex=0xf
oct=017
dec=15
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; prefix remaining width with spaces&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;%6s:%5s\n&quot;, &quot;foo&quot;, &quot;bar&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
   foo:  bar

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; suffix remaining width with spaces&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;%-6s:%-5s\n&quot;, &quot;foo&quot;, &quot;bar&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo   :bar  

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; truncate&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;%.2s\n&quot;, &quot;foobar&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
fo
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;avoid using &lt;code&gt;printf&lt;/code&gt; without format specifier&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{s=&quot;solve: 5 % x = 1&quot;; printf s}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
awk: cmd. line:1: fatal: not enough arguments to satisfy format string
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;`&lt;/span&gt;solve: 5 % x = 1&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;               ^ ran out for this one&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;$ awk &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;BEGIN{s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;solve: 5 % x = 1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;%s\n&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, s}&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;solve: 5 % x = 1&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Redirecting print output&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;redirecting to file instead of stdout using &lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;similar to behavior in shell, if file already exists it is overwritten
&lt;ul&gt;&lt;li&gt;use &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; to append to an existing file without deleting content&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;however, unlike shell, subsequent redirections to same file will append to it&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Close-Files-And-Pipes.html&quot;&gt;gawk manual - Closing Input and Output Redirections&lt;/a&gt; if you have too many redirections&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 6 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR%2{print &amp;gt; &quot;odd.txt&quot;; next} {print &amp;gt; &quot;even.txt&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ cat odd.txt
1
3
5
$ cat even.txt
2
4
6

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1{col1=$1&quot;.txt&quot;; col2=$2&quot;.txt&quot;; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       {print $1 &amp;gt; col1; print $2 &amp;gt; col2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
$ cat fruit.txt
apple
banana
fig
guava
$ cat qty.txt
42
31
90
6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;redirecting to shell command&lt;/li&gt;
&lt;li&gt;this is useful if you have different things to redirect to different commands, otherwise it can be done as usual in shell acting on &lt;code&gt;awk&lt;/code&gt;'s output&lt;/li&gt;
&lt;li&gt;all redirections to same command gets combined as single input to that command&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: echo 'foo good 123' | awk '{print $2}' | wc -c&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
5
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to avoid newline character being added to print&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v ORS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; assuming no format specifiers in input&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{printf $2 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: echo 'foo good 123' | awk '{printf $2 $3 | &quot;wc -c&quot;}'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{printf $2 | &quot;wc -c&quot;; printf $3 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
7
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Gotchas and Tips&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; wrong&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==$word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; right&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; no issue with unix style line ending&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo bar\n123 789\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2, $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar foo
789 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; dos style line ending causes trouble&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo bar\r\n123 789\r\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2, $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
 foo
 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; easy to deal by simply setting appropriate RS&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that ORS would still be newline character only&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo bar\r\n123 789\r\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\r\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2, $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar foo
789 123
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;relying on default intial value&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 1 - works for single file&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 2 - change to work for multiple file&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} ENDFILE{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
nums.txt 10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 3 - check with multiple file input&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; oops, default numerical value '0' for sum works only once&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} ENDFILE{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&amp;lt;(&lt;/span&gt;seq 3&lt;span class=&quot;pl-pds&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
nums.txt 10062.9
/dev/fd/63 10068.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 4 - correctly initialize variables&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{sum=0} {sum += $1} ENDFILE{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&amp;lt;(&lt;/span&gt;seq 3&lt;span class=&quot;pl-pds&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
nums.txt 10062.9
/dev/fd/63 6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;use unary operator &lt;code&gt;+&lt;/code&gt; to force numeric conversion&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
nums.txt 10062.9

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /dev/null
/dev/null 

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print FILENAME, +sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /dev/null
/dev/null 0
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;concatenate empty string to force string comparison&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;5 5.0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1==$2 ? &quot;same&quot; : &quot;different&quot;, &quot;string&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
same string

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;5 5.0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1&quot;&quot;==$2 ? &quot;same&quot; : &quot;different&quot;, &quot;string&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
different string
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;beware of expressions going -ve for field calculations&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat misc.txt
foo
good bad ugly
123 xyz
a b c d

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; trying to delete last two fields&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF -= 2} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt
awk: cmd. line:1: (FILENAME=misc.txt FNR=1) fatal: NF &lt;span class=&quot;pl-c1&quot;&gt;set&lt;/span&gt; to negative value
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; dynamically change it depending on number of fields&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF = (NF&amp;lt;=2) ? 0 : NF-2} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt

good

a b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similarly, trying to access 3rd field from end&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $(NF-2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt
awk: cmd. line:1: (FILENAME=misc.txt FNR=1) fatal: attempt to access field -1
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF&amp;gt;2{print $(NF-2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt
good
b
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;If input is ASCII alone, simple trick to improve speed&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all words containing exactly 3 lowercase a&lt;/span&gt;
$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==4{cnt++} END{print +cnt}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /usr/share/dict/words
1019

real    0m0.075s

$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; LC_ALL=C awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==4{cnt++} END{print +cnt}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /usr/share/dict/words
1019

real    0m0.045s
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Further Reading&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;man awk&lt;/code&gt; and &lt;code&gt;info awk&lt;/code&gt; for quick reference from command line&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/gawk/manual/gawk.html#SEC_Contents&quot;&gt;gawk manual&lt;/a&gt; for complete reference, extensions and more&lt;/li&gt;
&lt;li&gt;What's up with different &lt;code&gt;awk&lt;/code&gt; versions?
&lt;/li&gt;
&lt;li&gt;Tutorials and Q&amp;amp;A
&lt;/li&gt;
&lt;li&gt;Alternatives
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/datamash/alternatives/&quot;&gt;GNU datamash&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/lh3/bioawk&quot;&gt;bioawk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/gelisam/hawk/blob/master/doc/README.md&quot;&gt;hawk&lt;/a&gt; - based on Haskell&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/johnkerl/miller&quot;&gt;miller&lt;/a&gt; - similar to awk/sed/cut/join/sort for name-indexed data such as CSV, TSV, and tabular JSON
&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/303044/when-to-use-grep-less-awk-sed&quot;&gt;unix.stackexchange - When to use grep, sed, awk, perl, etc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/TheMozg/awk-raycaster&quot;&gt;awkaster&lt;/a&gt; - Pseudo-3D shooter written completely in awk using raycasting technique&lt;/li&gt;
&lt;li&gt;examples for some of the stuff not covered in this tutorial
&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Wed, 25 Oct 2017 12:00:07 +0000</pubDate>
<dc:creator>asicsp</dc:creator>
<og:image>https://avatars3.githubusercontent.com/u/17766317?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>learnbyexample/Command-line-text-processing</og:title>
<og:url>https://github.com/learnbyexample/Command-line-text-processing</og:url>
<og:description>Command-line-text-processing - From finding text to search and replace, from sorting to beautifying text and more</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md</dc:identifier>
</item>
</channel>
</rss>