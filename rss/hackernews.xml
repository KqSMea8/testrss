<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Google commits $1B in grants to train U.S. workers for high-tech jobs</title>
<link>https://techcrunch.com/2017/10/12/google-commits-1-billion-in-grants-to-train-u-s-workers-for-high-tech-jobs/</link>
<guid isPermaLink="true" >https://techcrunch.com/2017/10/12/google-commits-1-billion-in-grants-to-train-u-s-workers-for-high-tech-jobs/</guid>
<description>&lt;img src=&quot;https://tctechcrunch2011.files.wordpress.com/2015/08/464948948.jpg?w=738&quot; class=&quot;&quot;/&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;The nature of work is changing on a global level at a rapid pace. Sure, it’s not the first time work has been dramatically impacted by technology, but the growth of automation, robotics, AI and the like have the potential to displace jobs at an unprecedented rate. And Google will almost certainly be one of the driving forces behind that transformation.&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;The search giant has regularly expressed a desire to help stem some of that negative impact, and now it’s putting its money where its mouth is to the tune of $1 billion. CEO Sundar Pichai announced &lt;a target=&quot;_blank&quot; href=&quot;https://blog.google/topics/causes-community/opportunity-for-everyone/&quot; rel=&quot;noopener&quot;&gt;Grow with Google&lt;/a&gt; at an event earlier today in Pittsburgh, PA. Over the next five years, the initiative will commit $1 billion to nonprofits aimed at training American workers and helping build business.&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;The location of the event will not be lost on anyone who has followed Pittsburgh’s growth over the last few decades. The Steel City has long served as an ideal example of an economy that’s rebounded from the brink of disaster. In Pittsburgh’s case, technology was a primary driver, thanks to Carnegie Mellon, which has helped transform it from post-Rust Belt depression to one of the country’s leading tech hubs. These days, the walls of Pittsburgh’s former factories house cutting-edge innovations in fields like robotics and autonomous driving.&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Pichai noted in his address that the city also holds special meaning for him. “It was the first city I saw in America when I came here 24 years ago,” he explained. “I was here before the internet really took off, but the city was already changing. &lt;span class=&quot;s2&quot;&gt;The number of high-tech jobs had doubled&lt;/span&gt;.”&lt;/span&gt;&lt;/p&gt;

&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;The company is committing $10 million to Goodwill as part of the initiative — the largest G&lt;span class=&quot;s3&quot;&gt;oogle.org&lt;/span&gt; has committed to one organization. That money will be used to help launch the Goodwill Digital Career Accelerator, aimed at preparing the American workforce for high-tech jobs. Grow with Google also will take the form of a national tour hosted by libraries and community organizations aimed at bringing training and career advice directly to local towns and cities. That’s part of the company’s goal of committing one million hours to employee volunteering over the next five years.&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;“At Google, our mission is to make sure that information serves everyone, not just a few,” Pichai explained in the address. “A child in a school here in Pittsburgh can access the same information on Google as a professor at Carnegie Mellon. In the end, the internet is a powerful equalizer, capable of propelling new ideas and people forward.”&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;p1&quot;&gt;&lt;span class=&quot;s1&quot;&gt;Additional online training can be found at the &lt;a target=&quot;_blank&quot; href=&quot;https://grow.google/&quot; rel=&quot;noopener&quot;&gt;Grow with Google hub&lt;/a&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;small&gt;Featured Image: LLUIS GENE/AFP/Getty Images&lt;/small&gt;</description>
<pubDate>Thu, 12 Oct 2017 18:55:52 +0000</pubDate>
<dc:creator>thesanerguy</dc:creator>
<og:title>Google commits $1 billion in grants to train U.S. workers for high-tech jobs</og:title>
<og:description>The nature of work is changing on a global level at a rapid pace. Sure, it’s not the first time work has been dramatically impacted by technology, but the..</og:description>
<og:image>https://tctechcrunch2011.files.wordpress.com/2015/08/464948948.jpg</og:image>
<og:url>http://social.techcrunch.com/2017/10/12/google-commits-1-billion-in-grants-to-train-u-s-workers-for-high-tech-jobs/</og:url>
<og:type>article</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://techcrunch.com/2017/10/12/google-commits-1-billion-in-grants-to-train-u-s-workers-for-high-tech-jobs/</dc:identifier>
</item>
<item>
<title>John Carmack&amp;#039;s Keynote at Oculus 4 Live Stream [video]</title>
<link>https://www.facebook.com/oculusvr/videos/vb.270208243080697/1189602884474557/?type=3&amp;theater</link>
<guid isPermaLink="true" >https://www.facebook.com/oculusvr/videos/vb.270208243080697/1189602884474557/?type=3&amp;theater</guid>
<description>[unable to retrieve full-text content]&lt;p&gt;Article URL: &lt;a href=&quot;https://www.facebook.com/oculusvr/videos/vb.270208243080697/1189602884474557/?type=3&amp;theater&quot;&gt;https://www.facebook.com/oculusvr/videos/vb.270208243080697/1189602884474557/?type=3&amp;theater&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Comments URL: &lt;a href=&quot;https://news.ycombinator.com/item?id=15459506&quot;&gt;https://news.ycombinator.com/item?id=15459506&lt;/a&gt;&lt;/p&gt;&lt;p&gt;Points: 211&lt;/p&gt;&lt;p&gt;# Comments: 69&lt;/p&gt;
&lt;hr&gt;&lt;p&gt;hnrss is a labor of love, but if the project has made your job
or hobby project easier and you want to show some gratitude, &lt;a
href=&quot;https://donate.hnrss.org/&quot;&gt;donations are very much
appreciated&lt;/a&gt;. PayPal and Bitcoin both accepted. Thanks!&lt;/p&gt;
        </description>
<pubDate>Thu, 12 Oct 2017 17:11:32 +0000</pubDate>
<dc:creator>staunch</dc:creator>
<og:title>Log In or Sign Up to View</og:title>
<og:description>See posts, photos and more on Facebook.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.facebook.com/oculusvr/videos/vb.270208243080697/1189602884474557/?type=3&amp;theater&amp;_fb_noscript=1</dc:identifier>
</item>
<item>
<title>Rust 1.21</title>
<link>https://blog.rust-lang.org/2017/10/12/Rust-1.21.html</link>
<guid isPermaLink="true" >https://blog.rust-lang.org/2017/10/12/Rust-1.21.html</guid>
<description>&lt;p&gt;The Rust team is happy to announce the latest version of Rust, 1.21.0. Rust is a systems programming language focused on safety, speed, and concurrency.&lt;/p&gt;&lt;p&gt;If you have a previous version of Rust installed, getting Rust 1.21 is as easy as:&lt;/p&gt;
&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;gp&quot;&gt;$ &lt;/span&gt;rustup update stable
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you don’t have it already, you can &lt;a href=&quot;https://www.rust-lang.org/install.html&quot;&gt;get &lt;code class=&quot;highlighter-rouge&quot;&gt;rustup&lt;/code&gt;&lt;/a&gt; from the appropriate page on our website, and check out the &lt;a href=&quot;https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1210-2017-10-12&quot;&gt;detailed release notes for 1.21.0&lt;/a&gt; on GitHub.&lt;/p&gt;
&lt;h3 id=&quot;whats-in-1210-stable&quot;&gt;What’s in 1.21.0 stable&lt;/h3&gt;
&lt;p&gt;This release contains some very minor, but nice-to-have features, as well as some new documentation.&lt;/p&gt;
&lt;p&gt;First up, a small change to literals. Consider code like this:&lt;/p&gt;
&lt;div class=&quot;language-rust highlighter-rouge&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In Rust, this code is synonymous with:&lt;/p&gt;
&lt;div class=&quot;language-rust highlighter-rouge&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;_x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;That is, the &lt;code class=&quot;highlighter-rouge&quot;&gt;5&lt;/code&gt; here will be stored on the stack, or possibly in registers. &lt;code class=&quot;highlighter-rouge&quot;&gt;x&lt;/code&gt; will be a reference to it.&lt;/p&gt;
&lt;p&gt;However, given that it’s a literal integer, there’s no reason that it &lt;em&gt;has&lt;/em&gt; to be local like this. Imagine we had a function that took a &lt;code class=&quot;highlighter-rouge&quot;&gt;'static&lt;/code&gt; argument, like &lt;code class=&quot;highlighter-rouge&quot;&gt;std::thread::spawn&lt;/code&gt;. You might use &lt;code class=&quot;highlighter-rouge&quot;&gt;x&lt;/code&gt; like this:&lt;/p&gt;
&lt;div class=&quot;language-rust highlighter-rouge&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;k&quot;&gt;use&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;std&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;fn&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;nn&quot;&gt;thread&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;::&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;spawn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;move&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nd&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; 
    
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In previous versions of Rust, this would fail to compile:&lt;/p&gt;
&lt;div class=&quot;language-text highlighter-rouge&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;error[E0597]: borrowed value does not live long enough
  --&amp;gt; src/main.rs:4:14
   |
4  |     let x = &amp;amp;5;
   |              ^ does not live long enough
...
10 | }
   | - temporary value only lives until here
   |
   = note: borrowed value must be valid for the static lifetime...
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Because the &lt;code class=&quot;highlighter-rouge&quot;&gt;5&lt;/code&gt; is local, so is its borrow, which doesn’t satisfy the requirements for &lt;code class=&quot;highlighter-rouge&quot;&gt;spawn&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;However, if you compile this on Rust 1.21, it will work. Why? Well, if the thing being referred to is okay to put into a &lt;code class=&quot;highlighter-rouge&quot;&gt;static&lt;/code&gt;, we could instead de-sugar &lt;code class=&quot;highlighter-rouge&quot;&gt;let x = &amp;amp;5;&lt;/code&gt; like this:&lt;/p&gt;
&lt;div class=&quot;language-rust highlighter-rouge&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FIVE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;i32&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;FIVE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here, since the &lt;code class=&quot;highlighter-rouge&quot;&gt;FIVE&lt;/code&gt; is &lt;code class=&quot;highlighter-rouge&quot;&gt;static&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;x&lt;/code&gt; is a &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;amp;'static i32&lt;/code&gt;. And so this is what Rust will now do in this kind of case. For full details, see &lt;a href=&quot;https://github.com/rust-lang/rfcs/blob/master/text/1414-rvalue_static_promotion.md&quot;&gt;RFC 1414&lt;/a&gt;, which was accepted in January, but started in December of 2015!&lt;/p&gt;
&lt;p&gt;We &lt;a href=&quot;https://github.com/rust-lang/rust/pull/43506&quot;&gt;now run LLVM in parallel while generating code&lt;/a&gt;, which should reduce peak memory usage.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/rust-lang-nursery/rls/&quot;&gt;RLS&lt;/a&gt; can now be installed &lt;a href=&quot;https://github.com/rust-lang/rust/pull/44204&quot;&gt;through rustup&lt;/a&gt; by invoking &lt;code class=&quot;highlighter-rouge&quot;&gt;rustup component add rls-preview&lt;/code&gt;. In general, many useful Rust developer tools such as the RLS, Clippy, and &lt;code class=&quot;highlighter-rouge&quot;&gt;rustfmt&lt;/code&gt; need nightly Rust; this is the first steps toward having them work on stable Rust. Please check out the preview, and you’ll hear more about these plans in the future.&lt;/p&gt;
&lt;p&gt;Finally, a few documentation improvements. First up, if you visit &lt;a href=&quot;https://doc.rust-lang.org/stable/std/os/&quot;&gt;the docs for &lt;code class=&quot;highlighter-rouge&quot;&gt;std::os&lt;/code&gt;&lt;/a&gt;, which contains operating system specific functionality, you’ll now see more than just &lt;code class=&quot;highlighter-rouge&quot;&gt;linux&lt;/code&gt;, the platform we build the documentation on. We’ve long regretted that the hosted version of the documentation has been Linux-specific; this is a first step towards rectifying that. This is &lt;a href=&quot;https://github.com/rust-lang/rust/pull/43348&quot;&gt;specific to the standard library&lt;/a&gt; and not for general use; we hope to improve this further in the future.&lt;/p&gt;
&lt;p&gt;Next, &lt;a href=&quot;https://github.com/rust-lang/rust/pull/43916&quot;&gt;Cargo’s docs are moving!&lt;/a&gt; Historically, Cargo’s docs were hosted on doc.crates.io, which doesn’t follow the release train model, even though Cargo itself does. This led to situations where a feature would land in Cargo nightly, the docs would be updated, and then for up to twelve weeks, users would &lt;em&gt;think&lt;/em&gt; that it should work, but it wouldn’t yet. &lt;a href=&quot;https://doc.rust-lang.org/cargo&quot;&gt;https://doc.rust-lang.org/cargo&lt;/a&gt; will be the new home of Cargo’s docs, though for now, that URL is a redirect to doc.crates.io. Future releases will move Cargo’s docs over, and at that point, doc.crates.io will redirect to doc.rust-lang.org/cargo. Cargo’s docs have long needed a refreshing, so expect to hear more news about Cargo’s docs generally in the future!&lt;/p&gt;
&lt;p&gt;Finally, until now, &lt;code class=&quot;highlighter-rouge&quot;&gt;rustdoc&lt;/code&gt; did not have any documentation. This is now &lt;a href=&quot;https://github.com/rust-lang/rust/pull/43863&quot;&gt;fixed&lt;/a&gt;, with a new “&lt;code class=&quot;highlighter-rouge&quot;&gt;rustdoc&lt;/code&gt; Book,” located at &lt;a href=&quot;https://doc.rust-lang.org/rustdoc&quot;&gt;https://doc.rust-lang.org/rustdoc&lt;/a&gt;. These docs are fairly bare-bones at the moment, but we’ll be improving them over time.&lt;/p&gt;
&lt;p&gt;See the &lt;a href=&quot;https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1210-2017-10-12&quot;&gt;detailed release notes&lt;/a&gt; for more.&lt;/p&gt;
&lt;h4 id=&quot;library-stabilizations&quot;&gt;Library stabilizations&lt;/h4&gt;
&lt;p&gt;Not too many stabilizations this release, but there’s one really great quality of life change: due to the lack of type-level integers, arrays only supported various traits up to size 32. This &lt;a href=&quot;https://github.com/rust-lang/rust/pull/43690&quot;&gt;has now been fixed for the &lt;code class=&quot;highlighter-rouge&quot;&gt;Clone&lt;/code&gt; trait&lt;/a&gt;, which also caused a lot of ICEs at times, when a type would be &lt;code class=&quot;highlighter-rouge&quot;&gt;Copy&lt;/code&gt; but not &lt;code class=&quot;highlighter-rouge&quot;&gt;Clone&lt;/code&gt;. For other traits, &lt;a href=&quot;https://github.com/rust-lang/rfcs/blob/master/text/2000-const-generics.md&quot;&gt;an RFC for type-level integers was accepted recently&lt;/a&gt;, which may help with this situation. That change has yet to be implemented, however, though pre-requisite work is ongoing at the moment.&lt;/p&gt;
&lt;p&gt;Next, &lt;a href=&quot;https://github.com/rust-lang/rust/pull/44567&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Iterator::for_each&lt;/code&gt;&lt;/a&gt; has been stabilized, letting you consume an iterator for side effects without needing a &lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt; loop:&lt;/p&gt;
&lt;div class=&quot;language-rust highlighter-rouge&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// old&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// new&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.for_each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The correct one to use depends on your situation; in the sample above, the &lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt; loop is pretty straightforward. But when you’re chaining a number of iterators together, the &lt;code class=&quot;highlighter-rouge&quot;&gt;for_each&lt;/code&gt; version is sometimes clearer. Consider this:&lt;/p&gt;
&lt;div class=&quot;language-rust highlighter-rouge&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// old&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;.filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nd&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;// new&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;.map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;.filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nf&quot;&gt;.for_each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nd&quot;&gt;println!&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/rust-lang/rust/pull/42565&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Rc&amp;lt;T&amp;gt;&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;Arc&amp;lt;T&amp;gt;&lt;/code&gt; now implement &lt;code class=&quot;highlighter-rouge&quot;&gt;From&amp;lt;&amp;amp;[T]&amp;gt; where T: Clone&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;From&amp;lt;str&amp;gt;&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;From&amp;lt;String&amp;gt;&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;From&amp;lt;Box&amp;lt;T&amp;gt;&amp;gt; where T: ?Sized&lt;/code&gt;, and &lt;code class=&quot;highlighter-rouge&quot;&gt;From&amp;lt;Vec&amp;lt;T&amp;gt;&amp;gt;&lt;/code&gt;.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/rust-lang/rust/pull/44593&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;max&lt;/code&gt; and &lt;code class=&quot;highlighter-rouge&quot;&gt;min&lt;/code&gt; functions on the &lt;code class=&quot;highlighter-rouge&quot;&gt;Ord&lt;/code&gt; trait&lt;/a&gt; are now stable.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://github.com/rust-lang/rust/pull/44639&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;needs_drop&lt;/code&gt; intrinsic&lt;/a&gt; is now stable.&lt;/p&gt;
&lt;p&gt;Finally, &lt;a href=&quot;https://doc.rust-lang.org/std/mem/fn.discriminant.html&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;std::mem::discriminant&lt;/code&gt; has been stabilized&lt;/a&gt;, allowing you to see what variant an &lt;code class=&quot;highlighter-rouge&quot;&gt;enum&lt;/code&gt; instance is without a &lt;code class=&quot;highlighter-rouge&quot;&gt;match&lt;/code&gt; statement.&lt;/p&gt;
&lt;p&gt;See the &lt;a href=&quot;https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1210-2017-10-12&quot;&gt;detailed release notes&lt;/a&gt; for more.&lt;/p&gt;
&lt;h4 id=&quot;cargo-features&quot;&gt;Cargo features&lt;/h4&gt;
&lt;p&gt;Beyond the documentation features listed above, Cargo is gaining one major feature in this release: &lt;a href=&quot;https://github.com/rust-lang/cargo/pull/4123&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;[patch]&lt;/code&gt;&lt;/a&gt;. Designed in &lt;a href=&quot;https://github.com/rust-lang/rfcs/blob/master/text/1969-cargo-prepublish.md&quot;&gt;RFC 1969&lt;/a&gt;, the &lt;code class=&quot;highlighter-rouge&quot;&gt;[patch]&lt;/code&gt; section of your &lt;code class=&quot;highlighter-rouge&quot;&gt;Cargo.toml&lt;/code&gt; can be used when you want to override certain parts of your dependency graph. We also have a feature, &lt;code class=&quot;highlighter-rouge&quot;&gt;[replace]&lt;/code&gt; that has similar functionality. In many ways, &lt;code class=&quot;highlighter-rouge&quot;&gt;[patch]&lt;/code&gt; is the new &lt;code class=&quot;highlighter-rouge&quot;&gt;[replace]&lt;/code&gt;, and while we have no plans to deprecate or remove &lt;code class=&quot;highlighter-rouge&quot;&gt;[replace]&lt;/code&gt;, at this point, you should use &lt;code class=&quot;highlighter-rouge&quot;&gt;[patch]&lt;/code&gt; instead of &lt;code class=&quot;highlighter-rouge&quot;&gt;[replace]&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;So what’s it look like? Let’s say we have a &lt;code class=&quot;highlighter-rouge&quot;&gt;Cargo.toml&lt;/code&gt; that looks like this:&lt;/p&gt;
&lt;div class=&quot;language-toml highlighter-rouge&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;[dependencies]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;foo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1.2.3&quot;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In addition, our &lt;code class=&quot;highlighter-rouge&quot;&gt;foo&lt;/code&gt; crate depends on a &lt;code class=&quot;highlighter-rouge&quot;&gt;bar&lt;/code&gt; crate, and we find a bug in &lt;code class=&quot;highlighter-rouge&quot;&gt;bar&lt;/code&gt;. To test this out, we’d download the source code for &lt;code class=&quot;highlighter-rouge&quot;&gt;bar&lt;/code&gt;, and then update our &lt;code class=&quot;highlighter-rouge&quot;&gt;Cargo.toml&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-toml highlighter-rouge&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;highlight&quot;&gt;
&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;[dependencies]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;foo&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;1.2.3&quot;&lt;/span&gt;

&lt;span class=&quot;nn&quot;&gt;[patch.crates-io]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;bar&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;path&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;'/path/to/bar'&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, when you &lt;code class=&quot;highlighter-rouge&quot;&gt;cargo build&lt;/code&gt;, it will use the local version of &lt;code class=&quot;highlighter-rouge&quot;&gt;bar&lt;/code&gt;, rather than the one from &lt;code class=&quot;highlighter-rouge&quot;&gt;crates.io&lt;/code&gt; that &lt;code class=&quot;highlighter-rouge&quot;&gt;foo&lt;/code&gt; depends on.&lt;/p&gt;
&lt;p&gt;For more details, see the &lt;a href=&quot;http://doc.crates.io/manifest.html#the-patch-section&quot;&gt;documentation&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Additionally:&lt;/p&gt;
&lt;p&gt;See the &lt;a href=&quot;https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1210-2017-10-12&quot;&gt;detailed release notes&lt;/a&gt; for more.&lt;/p&gt;
&lt;h3 id=&quot;contributors-to-1210&quot;&gt;Contributors to 1.21.0&lt;/h3&gt;
&lt;p&gt;Many people came together to create Rust 1.21. We couldn’t have done it without all of you. &lt;a href=&quot;https://thanks.rust-lang.org/rust/1.21.0&quot;&gt;Thanks!&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 12 Oct 2017 15:59:10 +0000</pubDate>
<dc:creator>steveklabnik</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.rust-lang.org/2017/10/12/Rust-1.21.html</dc:identifier>
</item>
<item>
<title>Digging for treasure in Aladdin’s source code</title>
<link>https://gamehistory.org/aladdin-source-code/</link>
<guid isPermaLink="true" >https://gamehistory.org/aladdin-source-code/</guid>
<description>&lt;p&gt;When it was released back in 1993, &lt;a class=&quot;link primary-color&quot; href=&quot;http://en.wikipedia.org/wiki/Disney%27s_Aladdin_(Virgin_Games_video_game)&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Disney’s Aladdin&lt;/a&gt; for the Sega Genesis (or Mega Drive, depending on which side of the pond you lived on through the early 90’s) was really a visually striking game.&lt;/p&gt;
&lt;p&gt;Powered by what eventually became known as “Digicel” technology, along with a solid selection of middleware and some impressive talent, Aladdin managed to set itself apart from other Genesis titles of the era. Aladdin’s beautifully hand-crafted, surprisingly well-quantized artwork set new expectations for many in the realm of what could be accomplished on Genesis hardware. It did so not by leveraging any particularly fancy raster effects or obscure hardware techniques, but rather by pairing effective artwork and design with just the right technology.&lt;/p&gt;
&lt;p&gt;This unique blend of artwork and technology is a large part of what gives Aladdin a special place in video game history. It’s also a large part of what made it such a joy to discover an archive featuring the complete source code for the game in the &lt;a class=&quot;link primary-color&quot; href=&quot;http://gamehistory.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Video Game History Foundation&lt;/a&gt; collection! In addition to being a treasure trove of data, this archive represented a great opportunity for me to begin establishing standards for source code archival, curating practices, tool dependency tracking, and a lot of other process-oriented things at the VGHF.&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/genietiles.png&quot; rel=&quot;attachment wp-att-881&quot;&gt;&lt;img class=&quot;alignnone wp-image-1044 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/genietiles.png&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;Almost all of the development tools and materials were still intact in this archive. I quickly started piecing processes together, and began working on getting the source code (which is written entirely in &lt;a class=&quot;link primary-color&quot; href=&quot;http://en.wikipedia.org/wiki/Motorola_68000_series&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;M68K&lt;/a&gt; assembly) built into a working binary. I’m going to walk you through the journey and reveal my discoveries at each step of the way. That includes finding a plethora of unreleased material, and even re-implementing entire objects and enemies that had been removed by the time Aladdin saw its commercial release!&lt;/p&gt;
&lt;p&gt;Hopefully you like technical talk, because I’m not holding anything back. If not, well, there are pictures! (and you can skip straight to the &lt;a class=&quot;link primary-color&quot; href=&quot;https://gamehistory.org/aladdin-source-code/#sect_30&quot;&gt;cool section&lt;/a&gt;) You might also want a copy of &lt;a class=&quot;link primary-color&quot; href=&quot;http://www.richwhitehouse.com/index.php?content=inc_projects.php&amp;amp;showproject=91&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Noesis&lt;/a&gt; on hand to explore along with me. In case you aren’t familiar, in short summary, it’s a tool built on a framework to assist in reverse engineering and exploring all manner of data. It includes a script, &lt;em&gt;fmt_virginmd_chopper.py&lt;/em&gt;, which will allow you to dig all of the Chopper tile data out of any known (commercial or otherwise) Aladdin ROM image. The resulting data can then be viewed directly by Noesis. While it won’t give you access to the materials that didn’t actually make it to retail, it will allow you to flip through frames and observe tile usage in the finished product.&lt;/p&gt;
&lt;p&gt;It’s also worth noting that Noesis can dig the Chopper data back up out of the Aladdin &lt;a class=&quot;link primary-color&quot; href=&quot;http://hiddenpalace.org/Aladdin_(Chicago_C.E.S_demo)&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;CES demo build&lt;/a&gt;. This reveals a few interesting things exclusive to that build, including some additional sketch material that does not appear to be accessible in the build through normal gameplay.&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/cesrun-1.gif&quot; rel=&quot;attachment wp-att-887&quot;&gt;&lt;img class=&quot;alignnone wp-image-1037 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/cesrun-1.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;The CES demo build is labeled as a Chicago CES demo, but as noted in the build’s &lt;a class=&quot;link primary-color&quot; href=&quot;https://tcrf.net/Proto:Disney%27s_Aladdin_(Genesis)&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;TCRF article&lt;/a&gt;, the SNASM-generated timestamp reflects June 27th, 1993. This indicates that the build was produced several weeks after the show had taken place.&lt;/p&gt;
&lt;p&gt;Referencing our source archive, we can see that some source art was modified as late as mid June, and is already removed from ROM in the CES demo build. This is far from conclusive (we have no way of knowing if source art continued to be modified after being removed from the Chopper database), but supports the idea that the CES demo build may have been produced from an active development branch on June 27th, 1993, rather than being further developed on a branch of an earlier development snapshot. For simplicity’s sake, though, I’ll continue to refer to this build as the CES demo build when the material I’m discussing relates to the build in some way.&lt;/p&gt;
&lt;h3 class=&quot;pt3&quot;&gt;Contents&lt;/h3&gt;

&lt;h3 class=&quot;pt3&quot;&gt;1. Overview&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;41&quot;&gt;
&lt;p&gt;The archive containing Aladdin is laid out such that it looks to have been someone’s working copy of the game’s source code and data, as opposed to being a shared repository of any sort. A few of the data dependencies were missing in the archive, which was a little surprising, with the game having been built out of this very workspace at some point. However, I was able to reproduce the missing data without much trouble to get a usable binary building again.&lt;/p&gt;
&lt;p&gt;Although content otherwise seems to match the retail distributions of Aladdin, modified dates for some of the source files in this archive are as late as September 30, 1993. That’s 10 days later than the build date of the Japanese distribution, which is September 20, 1993. There are no apparent data changes, but a thorough byte to byte comparison is somewhat problematic due to the drastically different build circumstances.&lt;/p&gt;
&lt;p&gt;The really fun part here is that this archive includes a big chunk of source art material! That’s where the stuff that never made it into the game is hiding. That material is generally built into a more ideal/compact form by some other tool(s) before finally being included in the ROM itself. We’ll be taking a look at all of those tools and processes in this article.&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/?attachment_id=906&quot; rel=&quot;attachment wp-att-906&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-906&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/al_ching.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;br/&gt;&lt;span class=&quot;f6&quot;&gt;An example of animation sequence source data.&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;The other big discovery in this Aladdin archive is that there are large swaths of commented out code for prototyped and/or removed features. These days, if a programmer were to comment out hundreds of lines of newly-unused code instead of removing them outright, they’d probably get chewed out in their code review. But thanks to that wonderful practice, we get to enjoy true-to-intent features, enemies, and more, 24 years into the future! Take that, coding standards!&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;2. Tools&lt;/h3&gt;
&lt;p&gt;From building the code to creating and preparing the data for use, Aladdin leverages a pretty sizable toolset, all within the friendly confines of MS-DOS. This archive gives us an effective view into the actual content creation processes that were used at Virgin to bring this game to life. In this section, I’ll discuss what each tool is/does, and chronicle my experience in discovering and using it.&lt;/p&gt;
&lt;h3 class=&quot;pt3&quot;&gt;2.1. SNASM68K&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;76.596330275229&quot;&gt;
&lt;p&gt;An old log in the archive appeared to implicate version 1.29 (or 1.30, at odds with some code comments) of &lt;a class=&quot;link primary-color&quot; href=&quot;http://segaretro.org/SNASM68K&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;SNASM68K&lt;/a&gt; as the original assembler of choice for Aladdin. I was already somewhat familiar with SNASM, after a brief foray into Sega CD development many years ago, but I only had access to newer versions of the tool. That meant I had to make a few changes to get the source built again. The most unpleasant change there was due to the fact that SNASM decided to switch between “!” and “|” for the OR operator at some point, which led to some sweeping macro changes. A few branch relays were also required here and there, despite the fact that memory layout remains relatively faithful to the commercial binary.&lt;/p&gt;
&lt;p&gt;Assessing the code itself, it was readily apparent that a file called FOLDER.68K was intended to be the entrypoint for the assembler. This file defines a number of “build configuration”-esque variables, many of which conditionally include/exclude bits of code elsewhere, or determine whether PAL or NTSC data get pulled into ROM. After getting familiar with things and dealing with the assorted SNASM version-related issues, I tried booting up the resulting binary, and was delighted to see:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/boottext/&quot; rel=&quot;attachment wp-att-914&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-914&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/boottext.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;This is actually from the cheat screen that appears still enabled at retail, and it appears on startup by default in this archive’s code drop, with an updated SNASM-supplied timestamp. Its appearance at startup is contingent upon one of those “build configuration” variables as well.&lt;/p&gt;
&lt;p&gt;I happily proceeded further into the game, and was greeted with a hang when loading into the first level. Time to bust out the debugger! Oh wait, I don’t have a debugger. After a couple rounds of troubleshooting by way of inserting jump-to-selfs to narrow down the hang window, I decided to stop being a terrible person and go see if there were any Genesis emulators out there with built-in debuggers that didn’t require me to download 50 separate libraries in order to produce a custom debugger-enabled build. I came across a debugger-enabled build of &lt;a class=&quot;link primary-color&quot; href=&quot;http://segaretro.org/Regen&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Regen&lt;/a&gt; at this point, and away I went!&lt;/p&gt;
&lt;p&gt;Breaking in-place from an already-hung state in Regen, the program counter was off in no man’s land, the register states were generally hosed, and the stack was trashed, such that I could not determine what the last sane place of code execution was, even when attempting to employ Aladdin’s built-in exception handler. This is when you know you’re in for fun times.&lt;/p&gt;
&lt;p&gt;After producing an address map with SNASM to see what was actually going where, I got the address for a point in the code that looked about right for where things get kicked off for a level load. Set a PC breakpoint on that address and ran. Breakpoint hit, so I stepped through a bit, and determined it was diverging into oblivion somewhere within the &lt;a class=&quot;link primary-color&quot; href=&quot;https://gamehistory.org/aladdin-source-code/#sect_25&quot;&gt;ProPack&lt;/a&gt; decompress-to-RAM routine. Namely, when decompressing the level’s “FLOOR” data. This is what it sounds like, it’s a look-up table that defines the level’s floor tiles.&lt;/p&gt;
&lt;p&gt;I stepped through the decompression loop quite a bit, observing no problems, until I finally noticed the destination address. It was decompressing floor data all over the user stack. That didn’t seem right! I looked over to the labels that defined the location of the active floor in RAM, and it was indeed right above the user stack.&lt;/p&gt;
&lt;p&gt;As it turned out, there was some macro magic in there to get the maximum size of all the uncompressed floor files, and use that to determine the size of the floor region in RAM. Said macro magic was managing to wind up calculating a nice value of “0” in my version of SNASM. Fixed that, vetted for any other locations in the code using similar macro magic, and it was smooth sailing from there. No more apparent issues from a cursory run-through of the game.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;2.2. Chopper&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;89.534711964549&quot;&gt;
&lt;p&gt;Chopper is probably the unsung hero behind what Virgin referred to as “Digicel” technology. Unfortunately, I don’t really have any visibility over the process that was used to take hand-drawn art and digitize it, other than that it seems to, at some point, end up with the art being imported into &lt;a class=&quot;link primary-color&quot; href=&quot;http://en.wikipedia.org/wiki/Deluxe_Paint_Animation&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;DeluxePaint Animation&lt;/a&gt;. I don’t know whether it was largely driven by generic hardware/software solutions, or if Virgin introduced something proprietary into the mix. What I do know is that once something had made its way down to DeluxePaint Animation, Chopper took it from there.&lt;/p&gt;
&lt;p&gt;Chopper is a wholly-proprietary interface-driven tool, which works off of its own sprite database format. It was principally developed by Andy Astor, but looks to have been touched by quite a few hands. This includes David Perry, who specified the Genesis output format. Unfortunately, Chopper’s source code is not included in the archive, so our visibility into its development is limited to accompanying documentation.&lt;/p&gt;
&lt;p&gt;Chopper’s primary role is to chop imported animations up into tiles, varying in sizes from 1×1 to 4×4. (inclusive of rectangular dimensions, and where each tile is 8×8 pixels) It has a variety of chopping options, as well as options for how to default each animation frame’s collision box, and whether to consider frame, sequence, or whole database when deciding how to chop. The interface itself looks like this:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/chopper_cut_s/&quot; rel=&quot;attachment wp-att-918&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-918&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/chopper_cut_s.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;Above, I’ve imported the Prisoner, who was removed from the retail version of the game. We can see the distinct boundaries where the current frame has been chopped into groups of tiles. The yellow rectangle represents the collision box for the frame, and each number represents the number of times that tile group is reused.&lt;/p&gt;
&lt;p&gt;Although Chopper operates on its own proprietary database format, it’s capable of exporting tile data to a variety of ideal platform target formats, aimed primarily at the Genesis and SNES. In the case of Aladdin/Genesis, Chopper writes out a number of .SEG (Sega, rather than segment as the programmer or Doom mapper in you might initially suspect) files, which represents the whole of raw tile data for each 1×1 – 4×4 size. Chopper also generates a number of .68K files, which are meant to be assembled as code, and define additional properties for each frame. (part count, collision, and per-part properties like tile size, offset, and index) These files also define the intended order of data inclusion, reflecting the data’s final placement in ROM, and dictating any necessary alignment restrictions for the tile data itself.&lt;/p&gt;
&lt;p&gt;The Noesis script mentioned earlier in this article, &lt;em&gt;fmt_virginmd_chopper.py&lt;/em&gt;, will attempt to locate frame data in the expected Genesis form, and convert it back up into a series of .SEG files with a plain-text .68K file that references back into the .SEG files using the same naming conventions as native Chopper Sega data. You’re free to play around with the plain text file in order to observe how changing the properties affects use of the tiles, just as it would on hardware.&lt;/p&gt;
&lt;p&gt;Another interesting aspect of Chopper is that it’s set up to explicitly look for a single-pixel rectangle to define the desired bounds of an animation sequence. I’ve also coded up a parameter option to mimic this for the DeluxePaint Animation importer in Noesis. A lot of the animation sources therefore look something like this:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/al_run1_nochop/&quot; rel=&quot;attachment wp-att-921&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-921&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/AL_RUN1_nochop.gif&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;Many sources contain active image data outside of the desired rectangle, which was probably commonly used as a scratch pad and for reference. After Chopper imports the sequence with its default handling, it ends up looking like this:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/AL_RUN1_chop-1.gif&quot; rel=&quot;attachment wp-att-922&quot;&gt;&lt;img class=&quot;alignnone wp-image-1036 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/AL_RUN1_chop-1.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;Another tool was also written as part of Aladdin’s Chopper import process, which trivially digests Chopper’s native .68K output to spit out some additional per-frame tables/lists. This includes a linear list of pointers to each frame, probably born of a desire to be able to increment frames by jumping between pointers instead of dealing with the variable size (due to a variable number of parts) of each frame.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;2.3. tUME&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;44.893742621015&quot;&gt;
&lt;p&gt;Aladdin makes use of &lt;a class=&quot;link primary-color&quot; href=&quot;http://games.greggman.com/game/tume___the_universal_map_editor/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;tUME&lt;/a&gt;, which is a generic tile-based map editor. Like every other game of the era that used tUME, Aladdin has its very own custom tUME packer. The packer is a standalone tool, which exports data in a collection of formats ideally suited to the platform and to the particular title.&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/tume_cut/&quot; rel=&quot;attachment wp-att-925&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-925&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/tume_cut.jpg&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;In the case of Aladdin, the tUME packer is named “tPJungle”, presumably named after its intended use in The Jungle Book. tPJungle spits out a variety of files, including block/character data, contour data (which is typically shared between levels), floor look-up/tile data, a variety of room data types (depending on whether the level is a traditional room, or a picture room like the Genie bonus screen and other cameo screens seen in the game), palettes, and parallax files which allow multiple room layers to reference into the character/tile data.&lt;/p&gt;
&lt;p&gt;The output of the tUME packer tends to then be compressed as part of a separate batch process, and the compressed (or in some cases still not compressed) data is manually referenced within a .68K file.&lt;/p&gt;
&lt;p&gt;Enemies and objects are placed according to their tile number. This means that the following tile table bitmap corresponds directly to a table in code which triggers the appropriate object spawner/generator based on the tile index:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/object/&quot; rel=&quot;attachment wp-att-924&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-924&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/OBJECT.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;There are a good many unused slots, as well as slots that were previously referencing now-removed objects (like the Prisoner or Sword Swallower) which now direct to stub functions. Unfortunately, the removed enemies don’t look to be placed in any of the tUME sources, so outside of hints from the design document, we don’t get any free indicators of how/where these enemies were meant to be placed.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;2.4. GEMS&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;18.164294954722&quot;&gt;
&lt;p&gt;Aladdin uses the &lt;a class=&quot;link primary-color&quot; href=&quot;http://segaretro.org/GEMS&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;GEMS&lt;/a&gt; driver for sound, leveraging FM and PSG patches a good bit in its music playback. A separately generated data set is also provided for the PAL distribution. Our archive does not contain the GEMS intermediate sources, and the GEMS-generated code/data is accompanied by a batch file that shows it being copied locally from a network location. This means that anything we can divine from this archive, we can also divine from the retail game by digging the GEMS sequence/sample/patch/etc. data back up from the binary.&lt;/p&gt;
&lt;p&gt;What is present in this archive, however, is the actual Cakewalk MIDI source (used to feed the sequencer which fed GEMS) and linear PCM samples provided directly by &lt;a class=&quot;link primary-color&quot; href=&quot;https://en.wikipedia.org/wiki/Tommy_Tallarico&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Tommy Tallarico&lt;/a&gt;! You can read more about that over in &lt;a class=&quot;link primary-color&quot; href=&quot;https://gamehistory.org/aladdin-source-code/#sect_35&quot;&gt;Sound and Music&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;2.5. ProPack&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;27.732970027248&quot;&gt;
&lt;p&gt;Rob Northen’s &lt;a class=&quot;link primary-color&quot; href=&quot;http://segaretro.org/Rob_Northen_compression&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;ProPack&lt;/a&gt; is used pretty extensively in Aladdin on a variety of data types, including floor look-up tables and character (but not animated/chopped) tile data. Aladdin uses method 1, as outlined in the Sega Retro article I just linked, exclusively. Having plenty of decoder references (in 8086, M68K, and 6502 assembly to name a few) available, I also wrote an implementation of the decoder for Noesis.&lt;/p&gt;
&lt;p&gt;Numerous batch files are present in the Aladdin archive, which appear to have been manually maintained to convert and compress all of the relevant level data for direct inclusion in ROM. Presumably, the level design workflow here was something like “Modify in tUME, save, exit tUME, run batch, assemble, run game”.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.0. Buried Treasure&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;38.491580662683&quot;&gt;
&lt;p&gt;The most exciting thing about digging into this archive was unearthing the wealth of material present that hadn’t managed to make its way into the retail game. I was very surprised to find so much stuff still intact, and even more surprised to find out how much relevant code still existed (albeit not assembled into the retail ROM image) in the codebase.&lt;/p&gt;
&lt;p&gt;After getting familiar with Chopper and the rest of the tools, I set about re-importing some of the removed assets and re-adding various bits of code for things like old object generators, animations, and alien (more commonly known these days as actors, or entities if you’ve got Quake in your blood) logic. I bumped the ROM size up to 4MB (32Mbit), so that I’d have plenty of room to pile all of that glorious film back in straight from the cutting room floor, and not have to do any picking and choosing over what I wanted to bring back. Some of the code was ready to roll right out of the box, but in other cases I had to do some fixing up and tweaking to get things fully operational again.&lt;/p&gt;
&lt;p&gt;Another amazing bonus found within these files was a copy of the game’s &lt;a class=&quot;link primary-color&quot; href=&quot;https://gamehistory.org/aladdin-source-code/#sect_36&quot;&gt;original design document&lt;/a&gt;, version 3.3, dated from April 27, 1993. I’ve used this document as a reference to help me determine original intent for the incomplete code and features I’ve come across in my travels.&lt;/p&gt;
&lt;p&gt;I’m not even covering the whole body of extra material here, but these are the big highlights thus far. I’ve also found game-ready animations for the skeleton from the CES demo build, with the addition of a walking sequence. It appears there may have been some intent to have him stumble toward the player before exploding. There’s no related code in place, and I haven’t gotten around to writing up brand new animation/state logic for him, so that’s something else to look forward to.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.1. Bonus Round&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;40&quot;&gt;
&lt;p&gt;One of the first things I came across was a bunch of old Genie bonus round code. It explicitly sets up an “arm” alien which represents the slot machine lever, and uses some additional movement and state code. I brought the old Genie slot code back wholesale, and re-imported all of the animation dependencies through Chopper. I also noticed there was a spinning Genie coin animation in the source art, which made sense with this slot machine theme, so I brought that back in too. Here’s the result:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/?attachment_id=929&quot; rel=&quot;attachment wp-att-929&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-929&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/aladdin_oldslots.gif&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;You’ll notice the background doesn’t quite match up with the slot arm. Fortunately, I managed to locate the tUME map source for the background that it does belong to, buried in a “TRASH” directory. I exported the old tUME map with tPJungle, and got it plugged back into the game:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/aladdin_oldslots_bg/&quot; rel=&quot;attachment wp-att-930&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-930&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/aladdin_oldslots_bg.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;However, this background comes with its own issues. The foreground layer doesn’t appear to be set up quite correctly, and there’s no remaining logic in code that meshes with the idea of a 3-reel slot machine as the background itself would seem to indicate. It’s hard to say whether this background didn’t actually make its way into prototyping before being taken to the chopping block, or if the code related to it was completely removed. It’s also possible that this “TRASH” copy is not the final background that was used prior to the removal of this slot machine themed bonus round.&lt;/p&gt;
&lt;p&gt;We’d have to adjust quite a few things on our own to bring back this bonus game in a way that makes sense and meshes with the original slot machine theme. We do, however, still have all of the data we’d need to be able to faithfully reflect the original intent in a new implementation. The slot machine version of this bonus game is described in great detail in the game’s design document. A rock, paper, scissors bonus game is also described, but there is no trace of it in source code or art, so it seems that the idea never got off the ground.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.2. Enemies&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;104&quot;&gt;
&lt;p&gt;Numerous enemies were removed from the game prior to the retail distribution. The considerations for removal probably varied on a case-by-case basis, between design/appeal reasons, development time, and ROM space limitations. Given how tightly the retail game was butting up against the 2MB (16Mbit) ROM constraint, we can only speculate on the decision balance for each case. Some of these enemies were fully functional, while others required a bit of love and care to restore.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Sword Swallower&lt;/h4&gt;
&lt;p&gt;The Sword Swallower is a close design relative of the Knife Juggler, and was intended to be part of the marketplace enemy lineup. He sits in one location, and pulls an endless stream of swords out of his throat to toss across the screen. He needed his projectiles hooked back up as well, but was functional without additional modification, and appears to behave in keeping with his CES demo build implementation.&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/3VuXtbZaZW0?rel=0&amp;amp;showinfo=0&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
The Sword Swallower in action.
&lt;h4 class=&quot;nb2&quot;&gt;Prisoner&lt;/h4&gt;
&lt;p&gt;The Prisoner was intended to help populate the Sultan’s Dungeon, and comes complete with several separate animation sequences. He idly files away at the chain on his leg, and begins swinging the ball and chain around his leg when approached. He also has a pain/reaction sequence, which I had to implement from scratch, as no traces of related code remained. The Prisoner also appears in the CES demo build, but with an incorrect palette, and with no reaction sequence present in the ROM.&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/_dPIBDLlKJo?rel=0&amp;amp;showinfo=0&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
The cut Prisoner enemy, rebuilt and reborn!
&lt;h4 class=&quot;nb2&quot;&gt;Golden Monkey&lt;/h4&gt;
&lt;p&gt;Shown here in what’s certainly an inappropriate context (he’s intended for the Cave of Wonders), the Golden Monkey is a relatively simple enemy that just tosses an endless stream of jewels at the player. No other animations are provided for this guy, and no additional code was required to get him back up and running.&lt;/p&gt;
&lt;p&gt;The design document describes the Golden Monkey as behaving identically to the Shiva statue in the retail game. Likewise, the Shiva statue was intended to be a more involved encounter, triggered by Iago flying by and dropping a vial. It seems the decision was made, at some point, to simply drop the Golden Monkey and use the Shiva statue in its place.&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/G5LRtXflISs?rel=0&amp;amp;showinfo=0&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
The Golden Monkey, out of its element (it was meant to appear in the Cave of Wonders stage).
&lt;h4 class=&quot;nb2&quot;&gt;Flamingo Iago&lt;/h4&gt;
&lt;p&gt;In the Sultan’s Palace level, Iago was meant to make an appearance in a flamingo getup. He marches across the screen on stilts, and damages the player on contact.&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/glUora1hbY0?rel=0&amp;amp;showinfo=0&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
Flamingo Iago obviously would have walked on this level’s water sections, you’ll have to use your imagination a little bit here.
&lt;p&gt;Flamingo Iago’s animation sequence is also present in the CES demo build’s ROM, even though it does not appear to be used in the game.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Rolly Snake&lt;/h4&gt;
&lt;p&gt;While the snake did make his way into the retail version of the game, he was originally intended to roll. His internal name is, in fact, ROLLY_SNAKE. I came across some code that indicated he was meant to do a roll if he was close enough to the player after an attack. I hooked that code back up and was greeted by some curious behavior, where the direction of the roll was very random and occasionally would leave the snake stuck in “rolling” mode even after the animation had stopped. I had to do a bit of fixing up, but was able to get his roll attack back in a state that at least looked like it made some sense.&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/xQiXlkkNPa0?rel=0&amp;amp;showinfo=0&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;allowfullscreen&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
A simple implementation of the snake’s unused rolling animation.
&lt;p&gt;Interestingly, our copy of the design document outlines behavior quite different from what was indicated by the code:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;If the snake is hit by 2 throwable objects in a row, it will become a snake-wheel and roll to the right, over other enemies, killing them. The snake will roll fast enough so that Aladdin will not be able to catch up to it, and it will roll off the screen.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;There are no indications in the source code that this behavior ever made its way into the game. In speculation, this might be an indication that the present implementation of rolling was a test, compromising the feature while still attempting to utilize the animation work that had been done. The snake’s animations (including the roll sequence) are also present in the CES demo build’s ROM, even though the snake doesn’t make an appearance in the demo.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.3. Genie Parts&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;61.5&quot;&gt;
&lt;p&gt;Several environmental Genie objects were removed from the retail game, although none of them appear to have managed to get to the point of being fully polished. These objects were intended to be used on the “Inside the Lamp” level, and pertained to affecting player mobility throughout the map.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Genie Arm&lt;/h4&gt;
&lt;p&gt;The Genie Arm is a Genie hand connected to 6 orbs. It moves on a fixed path upon contact, carrying the player with it.&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/aladdin_geniearm/&quot; rel=&quot;attachment wp-att-942&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-942&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/aladdin_geniearm.gif&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;The Genie Arm was likely intended to supplement the existing hand platforms (which did make it into the retail game), as described in the design document:&lt;/p&gt;
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;14&quot;&gt;
&lt;p&gt;&lt;em&gt;These are the main ‘building blocks’ of the level and form the majority of the platforms that Aladdin moves on. Some of these platforms will shrink and grow back to their original size in regular patterns. Obviously the larger the hand, the easier it is to jump onto as it presents a larger target. The level design will use this timing mechanic to the full.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Other hand platforms will look slightly different and will be made out of tiles rather than sprites. This will enable us to avoid embarrassing sprite flicker.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Due to a quirk of the implementation, only one Genie Arm can exist at a time, because it’s effectively coded up as a singleton. When a new arm comes into the view, the previous arm becomes that arm, causing the previous arm to effectively disappear.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Genie Hands&lt;/h4&gt;
&lt;p&gt;The Genie Hands don’t seem to have a direct design correlation, and in what is left of the implementation, it’s just a pair of hands clapping. It can’t be interacted with.&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/aladdin_geniehands/&quot; rel=&quot;attachment wp-att-946&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-946&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/aladdin_geniehands.gif&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;It’s difficult to say whether this might’ve been some kind of hazard, or if it affected mobility in some other way. It’s possible that some vital/associated code was removed (rather than being left for reference) because it tied into other (player-related) logic.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Genie Ball&lt;/h4&gt;
&lt;p&gt;The Genie Ball pops into existence when the player approaches, then locks the player in place on top of it upon contact:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/aladdin_genieball/&quot; rel=&quot;attachment wp-att-947&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-947&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/aladdin_genieball.gif&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;The Genie Ball’s intended design is called out in the design document:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;These are a double-edged sword. If Aladdin can get on top of a rolling Genie ball, he can use it as a kind of moving elevator to get around various sections of the lamp. The ball also offers the additional height sometimes required to make a jump up to a bonus or secret area, but Aladdin may have to balance on the ball for a while before the ball is in the correct place from which to make the jump.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The Genie Ball code integrates pretty significantly into player movement code, so it wouldn’t be too surprising if something is very broken in its newly-resurrected form. The object may also have additional setup requirements that aren’t being fulfilled here, as indicated by its working behavior in the CES demo build.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.4. Sketches&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;54&quot;&gt;
&lt;p&gt;Within the source art, there are a few digitized pieces in sketch form. As an example, here’s a sketching of each frame of Aladdin’s falling animation:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/?attachment_id=949&quot; rel=&quot;attachment wp-att-949&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-949&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/al_fall1.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;We have more details provided in the sketch for Aladdin’s second falling animation. The image itself calls out specific frames for loops and holds:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/al_fall2/&quot; rel=&quot;attachment wp-att-950&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-950&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/al_fall2.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;This provides a tiny glimpse back upward into the actual art creation process. Of particular note is a game-ready Abu animation that I came across, which is still in sketch form:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/AB_LKBAG-1.gif&quot; rel=&quot;attachment wp-att-951&quot;&gt;&lt;img class=&quot;alignnone wp-image-1038 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/AB_LKBAG-1.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;This particular bit of art is for Abu looking into a bag, which doesn’t seem to be reflected by any particular game event or remaining prototype code. However, a related mechanic that would affect boss battles is called out in the design document:&lt;/p&gt;
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;39&quot;&gt;
&lt;p&gt;&lt;em&gt;Aladdin arrives at the boss, the scroll stops and the music changes to the boss music we will use for every boss. As the music changes, Abu will dart into view from off screen and place a magic bag of gems, which he is prepared to reluctantly lend to Aladdin, somewhere on the screen (in more inaccessible places in the later levels and also in the hard difficulty setting), in order to help him defeat the boss.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Abu then darts off screen again as he certainly doesn’t want to stay around for the ensuing ‘fun’! All Aladdin has to do is move over the bag (as he would to collect any other object or throwable) and the bag will disappear (into Aladdin’s inventory).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Abu’s bag is magic because it contains a never-ending supply of gems so Aladdin will never run out.  Abu, though, as we know, is partial to the odd gem and takes the bag back off of Aladdin after the defeat of each boss (the bag will automatically be thrown to one side of Aladdin after a boss has been defeated), Abu will dart back into view, once again, to retrieve the bag before disappearing off screen again.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;When he retrieves his magic bag, Abu’s reaction/behavior will depend on the number of gems used by Aladdin in defeating the boss. The more gems used, the more angry he will be in his gesticulation. If Aladdin uses no gems, Abu will show his pleasure in some Abu like way. There will probably be three different Abu reactions in the cartridge version (ecstatic, nonchalant and angry) and five in the CD one.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;In a similar vein, this fish animation, also present in the CES demo build, still lives alongside its completed version in the source art:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/FS_FISH-1.gif&quot; rel=&quot;attachment wp-att-952&quot;&gt;&lt;img class=&quot;alignnone wp-image-1039 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/FS_FISH-1.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;It may be a bit telling that we have masked, game-ready artwork still in sketch form and ready to go, and that some of it was even employed in the game for the CES demo build. It’s unlikely that this would occur if the process of getting art to this point weren’t already incredibly streamlined, and reveals a rather interesting workflow!&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.5. Sound and Music&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;34&quot;&gt;
&lt;p&gt;Although we don’t have any intermediary source/project data relating to GEMS, we have something even better hidden within this archive, which is the raw Cakewalk MIDI files and sample data provided by Tommy Tallarico. All of the digital samples were delivered in the form of raw 8-bit linear PCM blobs, such that Tommy calls out the sample frequencies in his accompanying letter:&lt;/p&gt;
&lt;p&gt;You might want to check the tempos for all the songs in case some weird PAL-NTSC thing happens. I’m sure by now you know the deal! All of the samples are at 10.4 khz except the following:jl87.vmd 8.7honk.vmd 5.2xplode2.vmd 5.8camel2.vmd 8.7finger.vmd 7.3feet2.vmd 7.3feet3.vmd 8.7cash2.vmd 7.3feet5.vmd 8.7&lt;/p&gt;
&lt;p&gt;Tommy also calls out the timing difference between NTSC and PAL here, which is a special consideration when using GEMS, as timing is effectively baked into the final sequence data that the GEMS driver digests. Aladdin does indeed take special care to include separate PAL audio data.&lt;/p&gt;
&lt;p&gt;The tools and hardware that were used to feed the Cakewalk sequencer data to GEMS are unknown, but the raw blobs of linear PCM are in keeping with the way GEMS expects to directly digest sample data. Loading up the Cakewalk project files gives us a bit of a cleaner glimpse (than digging back up from the binary targeted at the GEMS driver) into the original tracks as well.&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/?attachment_id=956&quot; rel=&quot;attachment wp-att-956&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-956&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/cakewalk_s.jpg&quot; alt=&quot;&quot; width=&quot;80%&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;It might be interesting to dig in further to draw more comparisons between the MIDI sources and the GEMS data that was cooked into the retail game, but we’ll have to save that for another day.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.6. The Design Document&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;153.1638621564&quot;&gt;
&lt;p&gt;I was shocked when I saw this thing buried down in a zip file within a zip file. There’s a massive wealth of information, and more what-could-have-beens than you can shake an apple at in here. The design document is specified as version 3.3, and the file is dated April 27, 1993. It has contributions from many individuals, with the doc itself attributing David Bishop, Seth Mendelsohn, Mike Dietz, and Mark Yamada, with a sanity check by David Perry.&lt;/p&gt;
&lt;p&gt;There are a great many disparities between what went into this design doc, and what ended up in the game. I could write an entire article on that material alone, but I am going to highlight some of the more interesting disparities in this section.&lt;/p&gt;
&lt;p&gt;On the whole, this document gives us a lot of material with which to resurrect old ideas and features, especially those that already had some degree of art put in place. It also gives us more clues about small one-off bits of art that are never referenced in the game/code, like this one:&lt;/p&gt;
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/AL_SCOOP-1.gif&quot; rel=&quot;attachment wp-att-972&quot;&gt;&lt;img class=&quot;alignnone wp-image-1040 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/AL_SCOOP-1.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;p&gt;The original design intent was that bananas would be collected, and actually trigger Abu to appear at random points on the level. This animation appears to have been crafted so that Abu could be scooped up during a carpet ride (hinted at by the posture and the hair movement), but no traces of Abu-scooping otherwise remain. It’s also quite interesting to note that this animation exists inside the CES demo build’s ROM, even though it doesn’t appear to be used in gameplay!&lt;/p&gt;
&lt;p&gt;Whatever we end up doing with this source code and data, this design document will be an exceptionally valuable resource.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;The Levels&lt;/h4&gt;
&lt;p&gt;We have a breakdown in the design doc of what was planned to be the original level layout:&lt;/p&gt;
&lt;div class=&quot;bg-black-10 pa3 f5 overflow-auto&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;ma0&quot;&gt;
Level                        Goal               Boss
------------------------------------------------------------
1.    Marketplace            Rescue Jasmine     Razoul
2.    Desert                 Find Scarab #1     None
3.    Marketplace rooftops   Find Scarab #2     Gazeem
4.    Prison                 Escape from prison None
5.    Cave of Wonders (gold) Reach lamp chamber Shiva monkey
6     Cave of Wonders (lamp) Get the lamp       None
7.    Fly out of cave        Escape from cave   None
8.    Inside the lamp        Find the Genie     None
9.    'Good' Palace          Capture Jafar      Iago
10.   Marketplace            Fight to palace    Razoul 2
11.   'Evil' Palace          Destroy Jafar      Jafar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There were also plans for different levels and bosses for the Sega CD version of the game, which we’ll get to in the &lt;a class=&quot;link primary-color&quot; href=&quot;https://gamehistory.org/aladdin-source-code/#sect_37&quot;&gt;Sega CD section&lt;/a&gt;. The level structure survived mostly intact, with a few notable changes:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Both Gazeem and Razoul appear on the rooftops, with level 1 having no boss.&lt;/li&gt;
&lt;li&gt;The Cave of Wonders sequences seems to have been streamlined a bit, into an on-foot escape sequence leading into the carpet escape sequence.&lt;/li&gt;
&lt;li&gt;The marketplace fight toward the palace is gone, transitioning straight from the Sultan’s Palace to Jafar’s Palace. There was also a second encounter planned with Razoul for this stage.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;No traces of the missing marketplace level remain, so it’s possible that it was never started, likely either due to development timeline constraints or ROM space constraints.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Player Mechanics&lt;/h4&gt;
&lt;p&gt;There were quite a few changes to player mechanics, in between this design doc revision and the final game. Some of the more interesting highlights include:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Aladdin was not intended to be able to attack or throw objects while falling, and rather only when jumping, presumably during the upward arc. This certainly would have resulted in a very different game!&lt;/li&gt;
&lt;li&gt;The design doc specifically calls out that Aladdin’s sword slash will &lt;strong&gt;not&lt;/strong&gt; be used to block hand to hand and sword attacks from enemies, but this seems to generally be the opposite of behavior at retail, and is often a vital part of avoiding damage from guards.&lt;/li&gt;
&lt;li&gt;Holding different directions on the pad was originally intended to allow Aladdin to target thrown objects in the directions of up-left, up, and up-right.&lt;/li&gt;
&lt;li&gt;The delay to shift the view up/down when holding up/down on the pad was originally specified as 3 seconds each.&lt;/li&gt;
&lt;li&gt;Even in the non-CD version of the game, melons and rocks were intended to be throwable objects for some levels in addition to apples. Although not mentioned in the document, lemon projectiles were also in the game at some point. Speculatively, with rocks being intended to show up on levels like the desert, the idea of stoning people and animals to death may have been received poorly by Disney!
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/ob_stone/&quot; rel=&quot;attachment wp-att-959&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-959&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/OB_STONE.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;a href=&quot;https://gamehistory.org/aladdin-source-code/ob_lemon/&quot; rel=&quot;attachment wp-att-967&quot;&gt;&lt;img class=&quot;alignnone size-full wp-image-967&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/09/OB_LEMON.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;Aladdin was to be dropped into some levels by the Genie. I’ve located a pair of animations that look like they were meant for this sequence.
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/al_strt1mrg.gif&quot; rel=&quot;attachment wp-att-962&quot;&gt;&lt;img class=&quot;alignnone wp-image-1041 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/al_strt1mrg.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li readability=&quot;1.5&quot;&gt;Additional idle animations were planned, even for the cartridge version of the game:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;14&quot;&gt;
&lt;p&gt;&lt;em&gt;Thought bubble appears above Aladdin containing a graphic of the princess (only after he knows the girl in the market place was Jasmine) to re-enforce that he wants to see her again.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Thought bubble appears above Aladdin containing a graphic of the girl he rescued in the market place. (only after he rescues her but before he finds out she is the princess – this may change depending on how Razoul is re-introduced into the game at the expense of the Apple Merchant)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Carpet flies in and gestures to the player to get with the program. (only after cave level)&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;It was planned that when Aladdin’s health lowered to a certain point, on outdoor maps, several vultures would appear in the parallax layer and “circle in anticipation of failure”.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;On the whole, things seem to have worked out for the best in the retail game, although directional throwing and extra throwables, as well as the pure aesthetic additions, could have been fun!&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Enemies&lt;/h4&gt;
&lt;p&gt;As indicated by the enemies that I &lt;a class=&quot;link primary-color&quot; href=&quot;https://gamehistory.org/aladdin-source-code/#sect_32&quot;&gt;found in the source art&lt;/a&gt;, there are quite a few differences between what was laid out in the design doc and what made it to retail. Rather than laying out a central list of enemies and specifying them by level, the document defines unique enemies within the scope of each level.&lt;/p&gt;
&lt;p&gt;The design effectively calls out completely different enemy characteristics and scenarios in a great many cases. Some of the highlights are:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The “short tubby round” guards were to intended to swing a stick as their attack, while the “tall thin lanky” guards were to throw knives. Attacks ended up being swapped between the two at retail.&lt;/li&gt;
&lt;li&gt;The larger guards, in addition to the taunts which survived to retail, were intended to mix up attacks between high and low. Aladdin was to be able to duck under or jump over these attacks.&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;Fat ladies were intended to make an appearance in the marketplace:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;em&gt;They run left/right being chased by a mouse, and will run over Aladdin if he doesn’t get out of the way (jump over). Fat ladies cannot be killed.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li readability=&quot;18&quot;&gt;The circumstances and pacing of the Razoul battle were originally quite different:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;47&quot;&gt;
&lt;p&gt;&lt;em&gt;Razoul will be standing on the roof of the prison building. The width of the building will take up about 1/2 of the screen, and Razoul will be seen behind a wall, so that only his upper torso will be visible, on either side of the roof will be a pile of barrels stacked in a pyramid.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Razoul will pace back and forth on top of the roof. Since the building will be in the center of the screen Aladdin will be able to climb up the sides by using a series of platforms on the sides of the building, and edges of the screen. The platforms will allow Aladdin to get below, and to the side of Razoul, or by jumping from the upper most platform, just above him. Aladdin will not be able to get on the roof.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;When Razoul gets to the edge of the roof, he will push a barrel off the edge. The barrel will roll downwards, from platform to platform, until it reaches the ground (like in Donkey Kong) and falls into a hole in the center. Razoul will push a barrel off every second or so. Razoul will continue to roll barrels until Aladdin runs to the opposite side of the roof, and then will run to the other side of the roof and start pushing barrels again.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Razoul can only be hit while he is running from side to side. When Aladdin is on the upper most platform, Razoul will throw knives at him. The knife throws will be between pushing off barrels, making sure Aladdin does not stay in one place for too long.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The barrels will damage Aladdin, and can not be destroyed expect for specially colored ones, which can be destroyed using a sword slash to revel bonus items (health, tries, etc..). In order for Aladdin to defeat Razoul, he will have to run from side to side, and up the platforms on both sides of the building. In the center of the ground will be a hole over which Aladdin will have jump or lose a try. Above the center of the ground will be a canopy that will prevent Aladdin from throwing any object directly up at Razoul.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;A “green with yellow hoops” variant of the snake was planned.&lt;/li&gt;
&lt;li readability=&quot;2.5&quot;&gt;Periodic attacks from Iago’s cousins (differing from Iago in the color of their plumage) were planned:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;16&quot;&gt;
&lt;p&gt;&lt;em&gt;Each of Iago’s cousins can carry one red vial in their claws. Red vials explode on impact with anything. They fly onto the screen, try to line themselves up above Aladdin and then drop their vial. They then fly off screen again (carry on in the direction they were heading when they dropped the vial).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The vials damage Aladdin if they land on him. Aladdin can also walk into the puff of smoke if a vial lands in front of him and he will still take damage, the puff of smoke will disappear after 0.5 seconds.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;Mirage enemies were planned for the desert level, which would shimmer in and out, taking the appearance of existing enemies. Mirages can both harm and be harmed by Aladdin.&lt;/li&gt;
&lt;li&gt;The Prisoner enemy that was unearthed from source art was originally intended to appear in robes with a black and white striped turban. He was also intended to be the size of Aladdin, rather than the very tall, lanky character we see now, and have an additional chain-swinging attack.&lt;/li&gt;
&lt;li&gt;Bats were originally outlined as having a special dive bomb attack.&lt;/li&gt;
&lt;li&gt;It was planned that one of Iago’s cousins would fly by and drop a vial on one of the skeletons in the Sultan’s Dungeon, as an initial encounter to help justify the fact that skeletons were coming back to life throughout the level.&lt;/li&gt;
&lt;li&gt;Golden Monkeys were originally planned for a different gold Cave of Wonders level, where the cave would be filled with golden coins, gems, and other treasures. The Golden Monkey was likely removed when it was decided to cut this level, with his behavior being appropriated over to the Shiva statue.&lt;/li&gt;
&lt;li&gt;Stone Monkeys were planned for the second Cave of Wonders level, which would have behavior identical to gold monkeys, but they would throw stones instead of coins/gold/jewels.&lt;/li&gt;
&lt;li readability=&quot;4.5&quot;&gt;The Shiva statue that appears in the Cave of Wonders with the Gold/Stone Monkey design was originally intended to appear in the palace, with the following design:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;20&quot;&gt;
&lt;p&gt;&lt;em&gt;Action:&lt;/em&gt;&lt;br/&gt;&lt;em&gt;Will remain still as most statues do, until Iago flies by and drops a vial on it. It will then magically come to life and begin to attack Aladdin&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Attack:&lt;/em&gt;&lt;br/&gt;&lt;em&gt;She will use her many arms to pull jewels from her headdress and throw them at Aladdin. When jewels come into contact with the ground they will magically burst into flames and burn for 2-3 seconds. Each time she is hit by Aladdin she will lose one of her arms.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Appearance:&lt;/em&gt;&lt;br/&gt;&lt;em&gt;About the same size as Aladdin, but with 8 arms. Dressed in harem pants, a halter top, and a headdress with many jewels set in it. She will still have the color and texture of a marble statue even after she has come to life.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;Flamingos in the Sultan’s Palace originally had a slightly more hostile mechanic:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;em&gt;If the player stands too long on a flamingo, it will turn around and peck at him. One of the flamingos will be Iago in disguise, and will always move out of the way just as the player is about to land on him.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;The Iago boss battle originally had an emphasis on having to use Abu’s precious gems to attack Iago, with that being the only means of pushing Iago further toward the cogs.&lt;/li&gt;
&lt;li&gt;Jafar in human form was intended to occasionally throw down red vials, which would create a lasting cloud of damaging smoke.
&lt;div class=&quot;tc&quot;&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/JH_THROW-1.gif&quot; rel=&quot;attachment wp-att-989&quot;&gt;&lt;img class=&quot;alignnone wp-image-1042 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/JH_THROW-1.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;Jafar in snake form was intended to have a tongue attack, and would smile when the attack succeeded, with quite a few other attack/behavioral variations.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;This doesn’t touch on everything, by any means, and there are still many other subtle differences between design and implementation throughout the game.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;Rock, Paper, Scissors&lt;/h4&gt;
&lt;p&gt;Although no backing code or data appears to remain, we have an entire outline of a Rock, Paper, Scissors game. It’s worth repeating in whole here:&lt;/p&gt;
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;77&quot;&gt;
&lt;p&gt;&lt;em&gt;Having entered this bonus screen, the player will see the carpet in the left center of the screen shaking its upper left tassel, Aladdin will be on the right center of the screen shaking his right hand. A Rock with the letter A below, a Paper with the letter B below, and a pair of Scissors with the letter C below will be displayed, centered along the top of the screen.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The rules are identical to the traditional game where each player picks Rock, Paper, or Scissors. Rock is represented by a fist, Paper by a flat hand, and Scissors by holding out the index and middle fingers in the shape of a V. The player will play Aladdin.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;While the carpet’s tassel and Aladdin’s hand are seen shaking back and forth (this will continue until the player makes a choice), the player must select one of the three buttons A, B, or C to chose which hand shape he wants to play. After selecting the desired shape, the carpet and Aladdin will both shake their tassel and fist two more times and then, on the third shake, display their choices. Whoever wins will celebrate, and the screen will display the winner.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;If Aladdin loses, then the game is over and he will be returned to the same spot he left on the map, and will be invincible for a few seconds (this sequences will also occur after the third play of the game regardless of who wins). If Aladdin wins, the screen will show in graphical (as seen if they were being picked up in the regular game) and/or text (if extra score) form, what he has won.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Then the player will be asked if they wish to play again for a chance to win more, or leave the game keeping the items they won. If the player plays again they may lose the game, and lose the item(s) previously won (i.e. if in the first game Aladdin wins a 1up, and wins 10 gems and another 2 1ups in the second game, then loses in the third game he will loose everything previously won: the 10 gems and the 2 1ups).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;A maximum of 3 games can be played during a single visit to this bonus game. Aladdin can only play the second game if he wins the first and can only play the third and final game if he wins both the first and second.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;In case of a tie the game will be played over until someone wins.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;u&gt;Rules&lt;/u&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;Rock beats Scissors&lt;/em&gt;&lt;br/&gt;&lt;em&gt;Paper beats Rock&lt;/em&gt;&lt;br/&gt;&lt;em&gt;Scissors beats Paper&lt;/em&gt;&lt;br/&gt;&lt;em&gt;If both positions are the same the game is a tie and is replayed.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;u&gt;Prizes&lt;/u&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;1st win: 1up&lt;/em&gt;&lt;br/&gt;&lt;em&gt;2nd win: 10 gems, and 2 1ups&lt;/em&gt;&lt;br/&gt;&lt;em&gt;3rd win: 1 Genie smart bomb, 15 gems, 3 1ups&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note: we may alter what Aladdin wins according to the difficulty setting in which the game is being played (better winnings for the easier settings). This will be decided during tuning.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Note: prizes are cumulative, if Aladdin wins all 3 games, he will receive 6 1ups, 25 gems, and 1 Genie smart bomb&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;This seems to have been a very early idea, as we can see where some elements of the description no longer mesh with other design and item mechanics.&lt;/p&gt;
&lt;h4 class=&quot;nb2&quot;&gt;ROM Breakdown&lt;/h4&gt;
&lt;p&gt;Although it doesn’t necessarily end up having a full basis in reality, an attempt was made in the design doc to break down the memory requirements of all of the characters, levels, and features ahead of time. This provides a pretty cool retrospective on how closely designers and artists used to have to pay attention to and respect the technical constraints of their target medium.&lt;/p&gt;
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;17&quot;&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;2048K&lt;/strong&gt; – Total Memory Available on Cartridge&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;u&gt;Proposed memory usage&lt;br/&gt;&lt;/u&gt;&lt;strong&gt;480K&lt;/strong&gt; – 8 Levels @ 60K per level (this covers tileset, triggers, contours…everything…)&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;132K&lt;/strong&gt; – 3 Levels with out tile sets @ 44K per level&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;175K&lt;/strong&gt; – Music and sound effects&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;64K&lt;/strong&gt; – Program,&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;64K&lt;/strong&gt; – Sprite tables&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;64K&lt;/strong&gt; – Control tables&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;120K&lt;/strong&gt; – Intro / interlude / outro / finale sequences (each interlude pic = 4K)&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;30K&lt;/strong&gt; – Sega, Disney, Aladdin and Virgin logos&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;491K&lt;/strong&gt; – Aladdin and all non level specific characters&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;369K&lt;/strong&gt; – Level specific sprites&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;241K&lt;/strong&gt; – Bosses&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;80K&lt;/strong&gt; – All bonus games&lt;/em&gt;&lt;br/&gt;&lt;em&gt;___________&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;2274K&lt;/strong&gt; Needed&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;2048K&lt;/strong&gt; -___________&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;226K&lt;/strong&gt; Over… Hmmmmm.&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;u&gt;&lt;strong&gt;&lt;br/&gt;60K&lt;/strong&gt; Per Level breakdown:&lt;br/&gt;&lt;/u&gt;&lt;strong&gt;11500&lt;/strong&gt; Bytes – Background Character Data (Compressed)&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;32768&lt;/strong&gt; Bytes – Background Block references and combinations&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;1200&lt;/strong&gt; Bytes – Floor and sprite trigger information (Compressed)&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;400&lt;/strong&gt; Bytes – Contour information&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;10699&lt;/strong&gt; Bytes – Map data (Compressed)&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;2171&lt;/strong&gt; Bytes – Parallax map data (Compressed)&lt;/em&gt;&lt;br/&gt;&lt;em&gt;___________&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;strong&gt;58738&lt;/strong&gt; Bytes Per Level roughly.[This figure will reduce if graphic style is more simplistic or if level sizes are smaller than the maximum size available]&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;This kind of careful coordination and planning is really a healthy exercise for many reasons, and it’s a far cry from the kind of disconnect we often seem to have between art, design, and programming in game development these days. I wish I could say I never had to yell at an artist for things like putting a giant 4096×4096 texture that is a single solid color into the game, or designers when they just assume everything will get fixed for them at some point when they find themselves creating 3 minute load times. I’ve used “your blank texture is larger than an entire game was 20 years ago” as my words of shame before.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.7. Sega CD&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;15&quot;&gt;
&lt;p&gt;A Sega CD version of the game seems to have been planned from the very beginning. Unfortunately, although the design document has many Sega CD callouts, they generally don’t seem to have survived to the source art in our Aladdin archive here. These are all of the CD-specific features and elements that I managed to parse from the design doc:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Aladdin in Prince Ali form was planned to appear in numerous additional Sega CD levels. The design doc calls out that Aladdin would only appear as Prince Ali in one level of the cartridge version, and is intentionally omitted to save ROM space.&lt;/li&gt;
&lt;li&gt;Jafar was planned to have a third Genie boss form in the CD version of the game. No traces of art for this stage exist in our archive.&lt;/li&gt;
&lt;li&gt;Had the Abu magic bag feature survived to retail, two additional Abu reactions to Aladdin’s use of Abu’s precious gems were planned for the CD version.&lt;/li&gt;
&lt;li&gt;An Apple Merchant boss was planned to be the marketplace boss in place of Razoul in the CD version, and Razoul would move over to become the boss of the prison stage instead.&lt;/li&gt;
&lt;li&gt;The desert was planned to have a Sand Scorpion boss in the CD version. No additional design information is provided on this boss.&lt;/li&gt;
&lt;li&gt;In the second marketplace stage leading up to the Jafar’s Palace (which didn’t make it to retail), a Fire Eater boss was planned for the CD version instead of a second Razoul encounter.&lt;/li&gt;
&lt;li&gt;An additional snowball throwable item was planned for the CD version.&lt;/li&gt;
&lt;li&gt;Even more idle animations were planned specifically for the CD version:
&lt;ul&gt;&lt;li&gt;&lt;em&gt;Genie floats into view and says one of a number of things. (only after cave level…CD version only)&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;Carpet flies in and taps Aladdin on the shoulder and flies off again. (only after cave level…CD version only)&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;A man would sometimes appear laying on a bed of nails obstacle in the CD version, allowing Aladdin to jump off of him once without being harmed. After being jumped on once, gets up “in disgust” and can no longer be used as a stepping stone.&lt;/li&gt;
&lt;li readability=&quot;6.5&quot;&gt;Quick sand was planned for the desert level in the CD version:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;24&quot;&gt;
&lt;p&gt;&lt;em&gt;As Aladdin walks over certain sections of sand, he will start to sink. Jumping continually will extract Aladdin from the sand and will allow him to traverse these areas without sinking. If the player leaves it too long, Aladdin will sink beneath the sand and loose a try (or end the game if he was on his final try). Quick sand will look slightly different from regular sand so the observant player will be able to anticipate this hazard.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;One particular patch of quick sand leads down into a secret area. To get there, Aladdin must overcome his natural inclination to save himself from sinking into the desert and stay where he is. If Aladdin drops beneath the surface of this particular patch of quicksand, the Scarabs will slide in and out to reveal him in a new area of the desert, probably cavelike (if we have the tiles available), where Aladdin will find an extra life and a continue and various other goodies.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The visual and gameplay mechanics we will use to get Aladdin back up onto the desert surface need to be specified but will use another Scarab wipe to maintain consistency.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li readability=&quot;4&quot;&gt;Cacti were also potentially planned for the CD version:
&lt;div class=&quot;b--purple bl bw2 pl3&quot; readability=&quot;19&quot;&gt;
&lt;p&gt;&lt;em&gt;These come in various shapes and sizes (probably two species). We will remove them from the game if we cannot make them feel like they ‘belong’ in Aladdin’s world. Contact with a cactus will damage Aladdin (1 point of damage per contact).&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;One type of cactus can be destroyed if an object is thrown at it or if hit be a sword slash. The other, more substantial looking, genus of cactus isn’t going anywhere and can only be avoided, not ‘removed’.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Both types of cactus will be designed graphically so that many different looking cactus tree can be created without a huge graphical and therefore memory overhead.&lt;/em&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;Swinging clotheslines (in addition to the rather static ropes that can be climbed across) were planned for the CD version of the marketplace.&lt;/li&gt;
&lt;li&gt;The carpet would have a special animation with flaming tassels after a close call with a fire jet.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;CD-based plans also occasionally tie into elements/features that were planned (but didn’t survive) for the cartridge version of the game.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;3.8. The Code&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;68.416361416361&quot;&gt;
&lt;p&gt;There’s a lot to talk about regarding the actual source code. One of the more interesting aspects of the game code itself is that it’s all driven by what is effectively an incredibly lightweight state machine. Things like animation sequences are defined in assembly as seen in this tiny snippet:&lt;/p&gt;
&lt;div class=&quot;bg-black-10 pa3 f5 overflow-auto&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;ma0&quot;&gt;
; Slither along
AN_ROLLY_SNAKE:
        dc.w SN_SLTHR_FRAME1
        mface_man

R_S:    dc.w SN_SLTHR_FRAME1
        dc.w SN_SLTHR_FRAME1
        dc.w SN_SLTHR_FRAME1

        mif_within_X 85,AN_ROLLY_SNAKE_BITE

        dc.w SN_SLTHR_FRAME2
        dc.w SN_SLTHR_FRAME2
        dc.w SN_SLTHR_FRAME2

        dc.w SN_SLTHR_FRAME3
        dc.w SN_SLTHR_FRAME3
        dc.w SN_SLTHR_FRAME3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is emitting bytes/words for each “command”. Each animation frame is specified by emitting a word, and that word is a pointer into a list of frame pointers near-ish the beginning of ROM. We then have a variety of macros for things like the mif_within_X conditional logic that you see there, which emits an appropriate command byte, with the command bytes conveniently falling outside the value range of the known frame pointer values. The result of that command may then be that the state data pointer is set to something else for the next execution cycle.&lt;/p&gt;
&lt;p&gt;Aliens (objects/actors) are driven, for the most part, by having code churn through state data like this. Movement is also handled in a similar fashion, where movement logic is defined by emitting bytes, and each alien is allowed to provide a pointer to its movement state data. It’s also fairly common for animation state data to swap out the pointer to movement state data, so there’s a specific macro used to emit the appropriate bytes to do this.&lt;/p&gt;
&lt;p&gt;There’s a sizable amount of code dedicated to running through these tiny state blocks, and managing the actual calculations for things like physics/collisions and even basic movement hierarchy. The player is, of course, his own special case. He makes use of state data just like standard aliens, but he has his own boilerplate assembly logic to handle a great deal of the more complicated state logic, which also takes care to often set the state pointers directly.&lt;/p&gt;
&lt;p&gt;Doing things this way simplifies the work involved in adding new objects, and it helps keep memory costs down by minimizing the amount of new code needed for each object and by packing logic into reasonably efficient state commands. Combined with the fact that the actual state logic is kept very simple and there are special-case macros for all of the reasonably complex logic cases, this is a great system for a game of Aladdin’s scope.&lt;/p&gt;
&lt;p&gt;Beyond that, we have a lot of boilerplate code to handle system-level things like DMA transfers to VRAM, with a routine named “DMA_IT” being the heart of where all of those Chopper tiles we looked at earlier end up getting &lt;a href=&quot;https://segaretro.org/Blast_processing&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;blasted&lt;/a&gt; into VRAM. Chopper has been designed to minimize the cost of this pretty effectively, avoiding CPU decompression costs while still trying to cut down on the number of unique tiles per frame of animation. I haven’t actually profiled Aladdin to see how many cycles are typically spent where, but based on the end result, I’d say it’s doing its job well enough.&lt;/p&gt;
&lt;p&gt;We could deep-dive into countless systems here, but without going into too much detail, these are the more notable high-level goings-on in the Aladdin codebase.&lt;/p&gt;
&lt;p&gt;With all of that said, here are some other random points of interest that I took note of as I was exploring:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;There’s a MAKEDEMO assembly-time variable that can be set to on, to record demos. When recording, the game actually writes controller commands at each frame into VRAM. You can see the background tiles gradually corrupting as the demo records, which is fun. Once the designated VRAM buffer is full, the game copies the data back out of VRAM over to main RAM, then spins in place (because it’s just demolished main memory) forever so that you can attach a debugger and dump the demo data from a known address. I created a custom demo this way, just for fun.&lt;/li&gt;
&lt;li&gt;More demo fun facts: The demo data itself is just a raw stream of controller inputs for each frame, and both demo recording and playback force a random seed of “12345678” to ensure deterministic results.&lt;/li&gt;
&lt;li&gt;There’s also a MASTER assembly-time variable, which looks like it was actually set to OFF for the retail distribution. When set to ON, it disables parts of the cheat screen that survived at retail, but the code does not assemble without modifications when it’s enabled. One might therefore speculate that the cheat screen (still containing phone and fax numbers) wasn’t actually intended to be left on for the retail distribution.&lt;/li&gt;
&lt;li&gt;Cheat codes are listed out among a lot of other static data in a file called TABLES.68K, and are read one byte at a time with the cheat code logic incrementing a pointer to the appropriate cheat code table and resetting it back to the beginning when the wrong input is pressed. There are no additional (beyond what’s already known/documented) hidden/disabled-at-retail cheat codes residing in the source.&lt;/li&gt;
&lt;li&gt;When recording video for this article, I wanted to disable the high-frequency flicker that occurs when Aladdin gets hurt, to avoid having him disappear entirely for multiple frames when downsampling video to lower framerates. Locating the bit of code in question, I discovered an “IF TO_DEMO=OFF” assembler check around it. Apparently I wasn’t the first person to encounter this problem when recording promo footage! TO_DEMO appears to have been left off for the CES demo build, or this particular bit came as a later addition, based on the fact that the flicker still occurs in that build. (when invincibility is not enabled)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;I don’t know about you, but this stuff sure makes me miss the golden days of game development.&lt;/p&gt;
&lt;/div&gt;
&lt;h3 class=&quot;pt3&quot;&gt;4.0. What’s Next?&lt;/h3&gt;
&lt;div class=&quot;pl4&quot; readability=&quot;24&quot;&gt;
&lt;p&gt;Every game has a story, and sometimes binary speaks louder than words. But source code usually speaks even louder! We’ve already lost a lot of fascinating video game history to cancelled prototypes, discarded demos, and hardware failures. Unless we start considering preservation and archival more seriously in the video game industry, especially when it comes to hardware-based DRM technologies, we stand to lose even more than we’ve already lost.&lt;/p&gt;
&lt;p&gt;I started this project with a mind toward wrapping up the Aladdin archive in question for proper preservation, taking the first steps toward standardizing source curating and archival at the VGHF. That meant documenting the source code from a high level, in order to establish its intended target(s) and any external dependencies on other tools and/or data so that we could also start tracking those dependencies in a standardized way. In doing this, it became quickly apparent that Aladdin had quite a story to tell. I expect it’s the first story of many, and I can’t wait to see what pops up next!&lt;/p&gt;
&lt;p&gt;Until next time…&lt;br/&gt;&lt;a href=&quot;https://gamehistory.org/wp-content/uploads/2017/10/GN_CHEER.gif&quot; rel=&quot;attachment wp-att-965&quot;&gt;&lt;img class=&quot;alignnone wp-image-1043 size-full&quot; src=&quot;https://gamehistory.org/wp-content/uploads/2017/10/GN_CHEER.gif&quot; alt=&quot;&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Thu, 12 Oct 2017 14:30:58 +0000</pubDate>
<dc:creator>j_s</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://gamehistory.org/aladdin-source-code/</dc:identifier>
</item>
<item>
<title>Hyperloop One Becomes ‘Virgin Hyperloop One’</title>
<link>https://techcrunch.com/2017/10/12/hyperloop-one-becomes-virgin-hyperloop-one-with-virgin-group-investment/</link>
<guid isPermaLink="true" >https://techcrunch.com/2017/10/12/hyperloop-one-becomes-virgin-hyperloop-one-with-virgin-group-investment/</guid>
<description>&lt;img src=&quot;https://tctechcrunch2011.files.wordpress.com/2017/10/img_1105_cropped_0.jpg?w=738&quot; class=&quot;&quot;/&gt;&lt;p id=&quot;speakable-summary&quot;&gt;Hyperloop One has received a &lt;a target=&quot;_blank&quot; href=&quot;https://www.virgin.com/richard-branson/introducing-virgin-hyperloop-one-worlds-most-revolutionary-train-service&quot; rel=&quot;noopener&quot;&gt;significant investment in Hyperloop One&lt;/a&gt; — the official figure hasn’t been revealed, but it’s enough that the Hyperloop tech startup, which aims to create networks of high-speed transportation tunnels to various locales across the globe, has changed its name. Virgin Hyperloop One is the entity’s official moniker going forward, which is quite a mouthful.&lt;/p&gt;&lt;p&gt;Virgin Hyperloop One’s rebrand will mean it gains from association with Virgin Group founder Richard Branson, whose high-tech transportation exploits include Virgin Galactic and other space-based ventures. The goal of the company under the rebrand remains the same, and it’ll continue to explore the best places and partners for deploying its high-speed transportation tech, which will zoom pods at high speed down extremely low-pressure tubes to reduce trip times over land from hours to minutes.&lt;/p&gt;
&lt;p&gt;The money isn’t the only connection between Hyperloop One and Virgin; the Hyperloop company’s president of engineering, Josh Giegel, is a former Virgin employee. Branson noted in a blog post that he also visited Hyperloop One earlier this summer to view its technology first-hand, at the Hyperloop One DevLoop test track site in Nevada, outside Las Vegas.&lt;/p&gt;

&lt;p&gt;Recently, Hyperloop One (sorry, Virgin Hyperloop One — that’s going to take some getting used to) announced that it had selected a range of finalists for its global competition to identify potential routes, and it has announced a few public-private partnerships to undertake feasibility studies.&lt;/p&gt;
&lt;p&gt;Right now it appears that Hyperloop One’s business will remain on track with the rebrand, and it’s probably a good thing to have a close billionaire friend with a passion for future modes of transport when you’re trying to build a brand new type of high-speed ground transit.&lt;/p&gt;
</description>
<pubDate>Thu, 12 Oct 2017 13:29:02 +0000</pubDate>
<dc:creator>mpweiher</dc:creator>
<og:title>Hyperloop One becomes ‘Virgin Hyperloop One’ with Virgin Group investment</og:title>
<og:description>Hyperloop One has received a significant investment -- the official figure hasn't been revealed, but it's enough that the Hyperloop tech startup, which aims..</og:description>
<og:image>https://tctechcrunch2011.files.wordpress.com/2017/10/img_1105_cropped_0.jpg</og:image>
<og:url>http://social.techcrunch.com/2017/10/12/hyperloop-one-becomes-virgin-hyperloop-one-with-virgin-group-investment/</og:url>
<og:type>article</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://techcrunch.com/2017/10/12/hyperloop-one-becomes-virgin-hyperloop-one-with-virgin-group-investment/</dc:identifier>
</item>
<item>
<title>Go Python, Go: Stream Processing for Python</title>
<link>https://blog.wallaroolabs.com/2017/10/go-python-go-stream-processing-for-python/</link>
<guid isPermaLink="true" >https://blog.wallaroolabs.com/2017/10/go-python-go-stream-processing-for-python/</guid>
<description>&lt;p&gt;We’ve been hard at work for 18 months on &lt;a href=&quot;https://github.com/wallaroolabs/wallaroo/tree/release&quot;&gt;a new processing engine called Wallaroo&lt;/a&gt; for deploying and operating big data, fast data, and machine learning applications. We designed Wallaroo to make the infrastructure virtually disappear, so you get rapid deployment and easy-to-operate applications. It provides a simple model for building fast applications that scale automatically across any number of workers.&lt;/p&gt;&lt;p&gt;With Wallaroo, you focus on your business algorithms, not your infrastructure, and you can use the Python libraries you’re already familiar with. Wallaroo uses an embedded Python interpreter to run your code rather than calling out to a separate Python process, which makes your application run faster. Wallaroo isn’t built on the JVM, which provides advantages that we will cover in a later blog post. And finally, &lt;a href=&quot;https://blog.wallaroolabs.com/2017/09/open-sourcing-wallaroo/&quot;&gt;Wallaroo is open-source&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This blog post will show you how to use &lt;a href=&quot;https://docs.wallaroolabs.com/book/python/api.html&quot;&gt;Wallaroo’s Python API&lt;/a&gt; to build elastic event-by-event processing applications.&lt;/p&gt;
&lt;h2 id=&quot;the-python-api&quot;&gt;The Python API&lt;/h2&gt;
&lt;h3 id=&quot;a-motivating-example&quot;&gt;A Motivating Example&lt;/h3&gt;
&lt;p&gt;The canonical streaming data processing application is Word Count, in which a stream of input text is analyzed and the total number of times each word has been seen is reported. This description is broad enough to allow developers to make different design tradeoffs in their implementations. You can find &lt;a href=&quot;https://github.com/WallarooLabs/wallaroo/blob/release/examples/python/word_count/word_count.py&quot;&gt;this example&lt;/a&gt; in it’s entirety in our &lt;a href=&quot;https://github.com/WallarooLabs/wallaroo/tree/release&quot;&gt;GitHub repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For this example we will make the following assumptions:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Incoming messages will come from a TCP connection and be sent to another TCP connection.&lt;/li&gt;
&lt;li&gt;Words are sent to the system in messages that can contain zero or more words.&lt;/li&gt;
&lt;li&gt;Incoming messages consist of a string.&lt;/li&gt;
&lt;li&gt;Outgoing messages consist of a word and the number of times that word has been seen in the event stream.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://d33wubrfki0l68.cloudfront.net/4a6439c1e232f12cf563211a79d3b24b389cdee1/dd970/images/post/python-api/word-count-diagram.png&quot; alt=&quot;Word Count Diagram&quot;/&gt;&lt;/p&gt;
&lt;p&gt;In our example, we will also split the state (the number of times each word has been seen) into 26 partitions, where each partition handles words that start with different letters. For example “acorn” and “among” would go to the “a” partition, while “bacon” would go to the “b” partition.&lt;/p&gt;
&lt;p&gt;This application will process messages as they arrive. This contrasts with some other streaming data processing systems that are designed around processing messages in micro-batches. This results in lower latencies because message processing is not delayed.&lt;/p&gt;
&lt;h3 id=&quot;wallaroo-s-core-abstractions&quot;&gt;Wallaroo’s Core Abstractions&lt;/h3&gt;
&lt;p&gt;In order to understand the Python API, it is important to understand Wallaroo’s core abstractions:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;State – Accumulated result of data stored over the course of time.&lt;/li&gt;
&lt;li&gt;Computation – Code that transforms an input to an output.&lt;/li&gt;
&lt;li&gt;State Computation – Code that takes an input and a state object, operates on that input and state (possibly making state updates), and optionally produces an output.&lt;/li&gt;
&lt;li&gt;Source – Input point for data from external systems into an application.&lt;/li&gt;
&lt;li&gt;Sink – Output point from an application to external systems.&lt;/li&gt;
&lt;li&gt;Decoder – Code that transforms a stream of bytes from an external system into a series of application input types.&lt;/li&gt;
&lt;li&gt;Encoder – Code that transforms an application output type into bytes for sending to an external system.&lt;/li&gt;
&lt;li&gt;Pipeline – A sequence of computations and/or state computations originating from a source and optionally terminating in a sink.&lt;/li&gt;
&lt;li&gt;Application – A collection of pipelines.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;These abstractions will be described later.&lt;/p&gt;
&lt;h3 id=&quot;application-setup&quot;&gt;Application Setup&lt;/h3&gt;
&lt;p&gt;Wallaroo calls the &lt;code&gt;application_setup&lt;/code&gt; function to create a data structure that represents the application.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;def application_setup(args):
    in_host, in_port = wallaroo.tcp_parse_input_addrs(args)[0]
    out_host, out_port = wallaroo.tcp_parse_output_addrs(args)[0]

    word_partitions = list(string.ascii_lowercase)
    word_partitions.append(&quot;!&quot;)

    ab = wallaroo.ApplicationBuilder(&quot;Word Count Application&quot;)
    ab.new_pipeline(&quot;Split and Count&quot;,
                    wallaroo.TCPSourceConfig(in_host, in_port, 
                                             Decoder()))
    ab.to_parallel(Split)
    ab.to_state_partition(CountWord(), WordTotalsBuilder(), 
        &quot;word totals&quot;, WordPartitionFunction(), word_partitions)
    ab.to_sink(wallaroo.TCPSinkConfig(out_host, out_port, Encoder()))
    return ab.build()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This code creates an application with the topology that was described earlier. It represents one pipeline that consists of a stateless computation called &lt;code&gt;Split&lt;/code&gt; that splits a string of words into individual words and a state computation called &lt;code&gt;CountWord&lt;/code&gt; that updates the state of the application and creates outgoing messages that represent the word count. The classes used here will be described more in the following sections.&lt;/p&gt;
&lt;h4 id=&quot;state-and-state-partitions&quot;&gt;State and State Partitions&lt;/h4&gt;
&lt;p&gt;In this example, the state is the number of times each word has been seen. The easiest way to do this would be with a dictionary where the key is a word, and the value associated with that key is the number of times that word has been seen in the event stream.&lt;/p&gt;
&lt;p&gt;Wallaroo lets you divide state into pieces called state partitions. State partitions are pieces of state that are uniquely identified by a key of some sort. A state can be divided into any number of partitions. The only restriction is that these partitions must be independent of each other in terms of how they will be accessed, because only one state partition can be accessed at a time.&lt;/p&gt;
&lt;p&gt;When a message is sent, Wallaroo applies a partition function to the message to determine which state partition to send it to. Different state partitions may live on different workers, and a partition may move from one worker to another when workers are added or removed from the cluster. This makes it easy to scale the application up and down as the number of workers in the cluster increases and decreases.&lt;/p&gt;
&lt;p&gt;This example represents the state as a dictionary that is wrapped in an object that knows how to update it and has a method that returns an outgoing message object representing a given word’s count.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class WordTotals(object):
    def __init__(self):
        self.word_totals = {}

    def update(self, word):
        if self.word_totals.has_key(word):
            self.word_totals[word] = self.word_totals[word] + 1
        else:
            self.word_totals[word] = 1

    def get_count(self, word):
        return WordCount(word, self.word_totals[word])
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;There also needs to be a class that can build these state partition objects. In this example, the class is &lt;code&gt;WordTotalsBuilder&lt;/code&gt;.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class WordTotalsBuilder(object):
    def build(self):
        return WordTotals()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;WordPartitionFunction&lt;/code&gt; is a partition function takes a string and returns the first character if the first character is a lowercase letter, or a &lt;code&gt;&quot;!&quot;&lt;/code&gt; if it is not.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class WordPartitionFunction(object):
    def partition(self, data):
        if data[0] &amp;gt;= 'a' or data[0] &amp;lt;= 'z':
          return data[0]
        else:
          return &quot;!&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;incoming-messages-and-the-decoder&quot;&gt;Incoming Messages and the Decoder&lt;/h4&gt;
&lt;p&gt;The &lt;code&gt;Decoder&lt;/code&gt; contains the logic for interpreting incoming bytes from a TCP stream into an object that represents the message within the application. In this example, incoming messages are represented as strings.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class Decoder(object):
    def header_length(self):
        return 4

    def payload_length(self, bs):
        return struct.unpack(&quot;&amp;gt;I&quot;, bs)[0]

    def decode(self, bs):
        return bs.decode(&quot;utf-8&quot;)
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This decoder is specific to TCP sources. Wallaroo also has support for Kafka sources, and other source types will be added in the future.&lt;/p&gt;
&lt;h4 id=&quot;stateless-computation&quot;&gt;Stateless Computation&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;Split&lt;/code&gt; is a stateless computation. It takes a string and splits it into a list of strings where each string in the list represents a word.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&quot;why hello world&quot; -&amp;gt; Split -&amp;gt; [&quot;why&quot;, &quot;hello&quot;, &quot;world&quot;]
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Here’s what the &lt;code&gt;Split&lt;/code&gt; computation looks like:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class Split(object):
    def name(self):
        return &quot;split into words&quot;

    def compute_multi(self, data):
        punctuation = &quot; !\&quot;#$%&amp;amp;'()*+,-./:;&amp;lt;=&amp;gt;?@[\]^_`{|}~&quot;

        words = []

        for line in data.split(&quot;\n&quot;):
            clean_line = line.lower().strip(punctuation)
            for word in clean_line.split(' '):
                clean_word = word.strip(punctuation)
                words.append(clean_word)

        return words
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;Split&lt;/code&gt; computation returns a list of individual words that the Wallaroo framework sends along as messages to the next step in the pipeline. Wallaroo takes care of making sure that each message gets delivered to the correct partition. Your application does not need to know how the data is partitioned or which machine holds that partition.&lt;/p&gt;
&lt;h4 id=&quot;stateful-computation&quot;&gt;Stateful Computation&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;CountWord&lt;/code&gt; is a stateful computation; it uses an incoming message and a state to update the word count for the new word and returns a message for Wallaroo to send on its behalf.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class CountWord(object):
    def name(self):
        return &quot;Count Word&quot;

    def compute(self, word, word_totals):
        word_totals.update(word)
        return (word_totals.get_count(word), True)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;outgoing-messages-and-the-encoder&quot;&gt;Outgoing Messages and the Encoder&lt;/h4&gt;
&lt;p&gt;In our example, the outgoing message is represented within the application as an object that stores the word and the count of the number of times that word has been seen in the event stream.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;class WordCount(object):
    def __init__(self, word, count):
        self.word = word
        self.count = count
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;Encoder&lt;/code&gt; contains the logic for transforming this object into a list of bytes that will then be sent on the outgoing TCP connection. In the example, outgoing messages are strings of &lt;code&gt;WORD =&amp;gt; COUNT\n&lt;/code&gt; where &lt;code&gt;WORD&lt;/code&gt; is the word being counted and &lt;code&gt;COUNT&lt;/code&gt; is the count.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-python&quot;&gt;class Encoder(object):
    def encode(self, data):
        return data.word + &quot; =&amp;gt; &quot; + str(data.count) + &quot;\n&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This example uses a TCP sink, but Wallaroo also supports Kafka sinks. Other types of sinks will be added in the future.&lt;/p&gt;
&lt;h2 id=&quot;a-scalable-event-processing-application&quot;&gt;A Scalable Event Processing Application&lt;/h2&gt;
&lt;p&gt;This application can run on one worker and can scale horizontally by adding more and more workers. Wallaroo’s flexibility makes it easy to adapt to whatever partitioning strategy your application requires. Take a look at our documentation for &lt;a href=&quot;https://docs.wallaroolabs.com/book/core-concepts/clustering.html&quot;&gt;information about how to run a Wallaroo cluster&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;check-it-out&quot;&gt;Check It Out&lt;/h2&gt;
&lt;p&gt;If you’re interested in running this application yourself, take a look at the the &lt;a href=&quot;https://docs.wallaroolabs.com&quot;&gt;Wallaroo documentation&lt;/a&gt; and the &lt;a href=&quot;https://github.com/WallarooLabs/wallaroo/tree/release/examples/python/word_count&quot;&gt;word count example application&lt;/a&gt; that we’ve built. You’ll find instructions on setting up Wallaroo and running applications. And take a look at our &lt;a href=&quot;https://www.wallaroolabs.com/community&quot;&gt;community page&lt;/a&gt; to sign up for our mailing list or join our IRC channel to ask any question you may have.&lt;/p&gt;
&lt;p&gt;You can also watch this video to see Wallaroo in action. Our VP of Engineering walks you through the concepts that were covered in this blog post and then shows the word count application scaling by adding new workers to the cluster.&lt;/p&gt;
&lt;iframe src=&quot;https://player.vimeo.com/video/234753585&quot; width=&quot;640&quot; height=&quot;360&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;
&lt;p&gt;Our API is new, and we are looking at ways to improve it. We have a lot of ideas of our own, but if you have any ideas, we would love to hear from you. Please don’t hesitate to get in touch with us through &lt;a href=&quot;https://groups.io/g/wallaroo&quot;&gt;our mailing list&lt;/a&gt; or &lt;a href=&quot;https://webchat.oftc.net/?channels=wallaroo&quot;&gt;our IRC channel&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;We built Wallaroo to help people create applications without getting bogged down in the hard parts of distributed systems. We hope you’ll take a look at our &lt;a href=&quot;https://github.com/wallaroolabs/wallaroo&quot;&gt;GitHub repository&lt;/a&gt; and get to know Wallaroo to see if it can help you with the problems you’re trying to solve. And we hope to hear back from you about the great things you’ve done with it.&lt;/p&gt;
</description>
<pubDate>Thu, 12 Oct 2017 12:06:42 +0000</pubDate>
<dc:creator>spooneybarger</dc:creator>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.wallaroolabs.com/2017/10/go-python-go-stream-processing-for-python/</dc:identifier>
</item>
<item>
<title>Exploding Git Repositories</title>
<link>https://kate.io/blog/git-bomb/</link>
<guid isPermaLink="true" >https://kate.io/blog/git-bomb/</guid>
<description>&lt;p&gt;If you are an adventurous sort (and can handle a potential reboot) I invite you to clone this &lt;a href=&quot;https://github.com/Katee/git-bomb&quot; target=&quot;_blank&quot;&gt;tiny repo&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;$ git clone https://github.com/Katee/git-bomb.git
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Were you able to clone it? Unless you have quite a lot of memory (both RAM and storage) git was killed, ran out of memory, or you had to reboot. Why is this? It is a perfectly formed repo made of only &lt;a href=&quot;https://gist.github.com/Katee/5fb430ca4e13d3b7c0baf844a71246db&quot; target=&quot;_blank&quot;&gt;12 objects&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;How do such a tiny repo cause git to run out of memory? The secret is that git de-duplicates “blobs” (which are used to store files) to make repositories smaller and allow using the same blob when a file remains unchanged between commits. Git also allows de-duplication of “tree” objects (which define the directory structure in a repository). &lt;code&gt;git-bomb&lt;/code&gt; tries to make a billion files, however it only has 10 references to the file blob and only has 10 tree objects in all.&lt;/p&gt;
&lt;p&gt;This is extremely similar to the “billion laughs” (aka “XML bomb”) hence the name “git bomb”.&lt;/p&gt;
&lt;h2 id=&quot;structure&quot;&gt;Structure&lt;/h2&gt;
&lt;h3 id=&quot;bottom&quot;&gt;Bottom&lt;/h3&gt;
&lt;p&gt;At the bottom there is a file blob containing “one laugh”:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;$ git show 5faa3895522087022ba6fc9e64b02653bd7c4283
one laugh
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There is one tree object that refers to this blob 10 times&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;$ git ls-tree 6961ae061a9b89b91162c00d55425b39a19c9f90
&lt;span class=&quot;m&quot;&gt;100644&lt;/span&gt; blob 5faa3895522087022ba6fc9e64b02653bd7c4283     f0
&lt;span class=&quot;m&quot;&gt;100644&lt;/span&gt; blob 5faa3895522087022ba6fc9e64b02653bd7c4283     f1
&lt;span class=&quot;c1&quot;&gt;# … snipped&lt;/span&gt;
&lt;span class=&quot;m&quot;&gt;100644&lt;/span&gt; blob 5faa3895522087022ba6fc9e64b02653bd7c4283     f9
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;middle&quot;&gt;Middle&lt;/h3&gt;
&lt;p&gt;Then 9 layers of tree objects that refer to the tree object below them (here is the top tree object):&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;$ git ls-tree 106d3b1c00034193bbe91194eb8a90fc45006377
&lt;span class=&quot;m&quot;&gt;040000&lt;/span&gt; tree 8d106ebc17b2de80acefd454825d394b9bc47fe6     d0
&lt;span class=&quot;m&quot;&gt;040000&lt;/span&gt; tree 8d106ebc17b2de80acefd454825d394b9bc47fe6     d1
&lt;span class=&quot;c1&quot;&gt;# … snipped&lt;/span&gt;
&lt;span class=&quot;m&quot;&gt;040000&lt;/span&gt; tree 8d106ebc17b2de80acefd454825d394b9bc47fe6     d9
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3 id=&quot;top&quot;&gt;Top&lt;/h3&gt;
&lt;p&gt;The master ref just points to the top-most tree object:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;$ git log --pretty&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;format:&lt;span class=&quot;s2&quot;&gt;&quot;%s | tree: %T&quot;&lt;/span&gt;
Create a git bomb &lt;span class=&quot;p&quot;&gt;|&lt;/span&gt; tree: 106d3b1c00034193bbe91194eb8a90fc45006377
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Trying to interact with this repo using anything that has to walk the tree (&lt;code&gt;git status&lt;/code&gt;, &lt;code&gt;git checkout&lt;/code&gt;) runs into memory issues because git builds the tree in memory before writing files to disk. That means the process is killed instead of filling up your disk space.&lt;/p&gt;
&lt;h2 id=&quot;other-git-bombs&quot;&gt;Other Git Bombs&lt;/h2&gt;
&lt;p&gt;Here is a slightly different version of the same idea. This repo has 15,000 nested tree objects. On my laptop this ends up blowing up the stack and causing a segfault.&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sh&quot; data-lang=&quot;sh&quot;&gt;$ git clone https://github.com/Katee/git-bomb-segfault.git
&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you’d like to make your own git bombs read the next post &lt;a href=&quot;https://kate.io/blog/making-your-own-exploding-git-repos/&quot; target=&quot;_blank&quot;&gt;Making Your Own Git Bombs&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;updates&quot;&gt;Updates&lt;/h3&gt;
&lt;p&gt;2017-10-11: Got a go-ahead from Github on Hackerone to post this&lt;br/&gt;2017-10-12: Was awarded a bounty by Github on Hackerone&lt;/p&gt;
&lt;p&gt;Thank you &lt;a href=&quot;http://blog.wesleyac.com/&quot; target=&quot;_blank&quot;&gt;Wesley&lt;/a&gt; for pairing on many weird git repos. He is currently looking for a job, and I can say from experience paring with him is fantastic. If you are hiring get in touch with him &lt;a href=&quot;mailto:w.aptekar@gmail.com&quot; target=&quot;_blank&quot;&gt;w.aptekar@gmail.com&lt;/a&gt;.&lt;/p&gt;



</description>
<pubDate>Thu, 12 Oct 2017 11:01:41 +0000</pubDate>
<dc:creator>ingve</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://kate.io/blog/git-bomb/</dc:identifier>
</item>
<item>
<title>Equifax website hacked again, this time to redirect to fake Flash update</title>
<link>https://arstechnica.com/information-technology/2017/10/equifax-website-hacked-again-this-time-to-redirect-to-fake-flash-update/</link>
<guid isPermaLink="true" >https://arstechnica.com/information-technology/2017/10/equifax-website-hacked-again-this-time-to-redirect-to-fake-flash-update/</guid>
<description>&lt;img src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/flash-download2-800x498.jpg&quot;/&gt;&lt;div class=&quot;caption-credit&quot;&gt;Randy Abrams&lt;/div&gt;
&lt;aside id=&quot;social-left&quot;&gt;&lt;a title=&quot;101 posters participating&quot; class=&quot;comment-count icon-comment-bubble-down&quot; href=&quot;https://arstechnica.com/information-technology/2017/10/equifax-website-hacked-again-this-time-to-redirect-to-fake-flash-update/?comments=1&quot;&gt;&lt;span class=&quot;comment-count-before&quot;&gt;reader comments&lt;/span&gt; &lt;span class=&quot;comment-count-number&quot;&gt;137&lt;/span&gt;&lt;/a&gt;
&lt;div class=&quot;share-links&quot;&gt;&lt;span&gt;Share this story&lt;/span&gt;    &lt;/div&gt;
&lt;/aside&gt;&lt;p&gt;In May credit reporting service Equifax's website was breached by &lt;a href=&quot;https://arstechnica.com/information-technology/2017/09/equifax-website-hack-exposes-data-for-143-million-us-consumers/&quot;&gt;attackers who eventually made off with&lt;/a&gt; &lt;a href=&quot;https://arstechnica.com/information-technology/2017/09/equifax-website-hack-exposes-data-for-143-million-us-consumers/&quot;&gt;Social Security numbers, names, and a dizzying amount of other details&lt;/a&gt; for some 145.5 million US consumers. For several hours on Wednesday, and again early Thursday morning, the site was maliciously manipulated again, this time to deliver fraudulent Adobe Flash updates, which when clicked, infected visitors' computers with adware that was detected by only three of 65 antivirus providers.&lt;/p&gt;
&lt;p&gt;Randy Abrams, an independent security analyst by day, happened to visit the site Wednesday evening to check what he said was false information he had just found on his credit report. Eventually, his browser opened up a page on the domain hxxp//:centerbluray.info that looked like this:&lt;/p&gt;
&lt;a href=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/first-flash.jpg&quot; class=&quot;enlarge&quot; data-height=&quot;415&quot; data-width=&quot;653&quot;&gt;&lt;img src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/first-flash-640x407.jpg&quot; width=&quot;640&quot; height=&quot;407&quot; srcset=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/first-flash.jpg 2x&quot;/&gt;&lt;/a&gt;

&lt;div class=&quot;caption-credit&quot;&gt;Randy Abrams&lt;/div&gt;
&lt;aside class=&quot;pullbox sidebar story-sidebar right&quot;&gt;
&lt;/aside&gt;
He was understandably incredulous. The site that previously gave up personal data for virtually every US person with a credit history was once again under the influence of attackers, this time trying to trick Equifax visitors into installing crapware Symantec calls &lt;a href=&quot;https://www.symantec.com/security_response/writeup.jsp?docid=2012-061213-2441-99&quot;&gt;Adware.Eorezo&lt;/a&gt;. Knowing a thing or two about drive-by campaigns, Abrams figured the chances were slim he'd see the download on follow-on visits. To fly under the radar, attackers frequently serve the downloads to only a select number of visitors, and then only once.
&lt;p&gt;Abrams tried anyway, and to his amazement, he encountered the bogus Flash download links on at least three subsequent visits. The picture above this post is the higher-resolution screenshot he captured during one visit. He also provided the video below. It shows an Equifax page redirecting the browser to at least four domains before finally opening the Flash download at the same centerbluray.info page.&lt;/p&gt;
&lt;div class=&quot;wrapper&quot;&gt;&lt;iframe type=&quot;text/html&quot; width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/XzyDR7f7Wm0?rel=0?start=0&amp;amp;wmode=transparent&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/div&gt;
&lt;div class=&quot;caption-text&quot;&gt;Equifax Flash Download&lt;/div&gt;
&lt;p&gt;The file that got delivered when Abrams clicked through is called MediaDownloaderIron.exe. This &lt;a href=&quot;https://www.virustotal.com/en/file/6153f429c0cedc721846e60255834ae0f43829cc6a387b766de6f301dab54eca/analysis/1506995209/&quot;&gt;VirusTotal entry&lt;/a&gt; shows only Panda, Symantec, and Webroot detecting the file as adware. This &lt;a href=&quot;https://www.hybrid-analysis.com/sample/6153f429c0cedc721846e60255834ae0f43829cc6a387b766de6f301dab54eca?environmentId=100&quot;&gt;separate malware analysis&lt;/a&gt; from Payload Security shows the code is highly obfuscated and takes pains to conceal itself from reverse engineering. Malwarebytes &lt;a href=&quot;https://www.virustotal.com/#/url/f66a103e2df039c7f0b918dec692546d84d516321d5367f6b03c8c79f9251cc7/detection&quot;&gt;flagged the centerbluray.info site as one that pushes malware&lt;/a&gt;, while both Eset and Avira provided similar malware warnings for one of the intermediate domains, newcyclevaults.com.&lt;/p&gt;
&lt;a href=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/site-blocked.png&quot; class=&quot;enlarge&quot; data-height=&quot;310&quot; data-width=&quot;1023&quot;&gt;&lt;img src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/site-blocked-640x194.png&quot; width=&quot;640&quot; height=&quot;194&quot; srcset=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/site-blocked.png 2x&quot;/&gt;&lt;/a&gt;

&lt;div class=&quot;caption-credit&quot;&gt;Randy Abrams&lt;/div&gt;
&lt;h2&gt;Malvertising, analytics?&lt;/h2&gt;
&lt;p&gt;It's not yet clear precisely how the Flash download page got displayed. The &lt;a href=&quot;https://news.ycombinator.com/item?id=15456221&quot;&gt;group-sourced analysis here&lt;/a&gt; and this &lt;a href=&quot;https://twitter.com/GossiTheDog/status/918477549671473152&quot;&gt;independent assessment&lt;/a&gt; from researcher Kevin Beaumont—both submitted in the hours after this post went live—make a strong case that Equifax was working with a third-party ad network or analytics provider that's responsible for the redirects. In that case, the breach, technically speaking, isn't on the Equifax website and may be affecting other sites as well. But even if that's true, the net result is that the Equifax site was arguably compromised in some way, since administrators couldn't control the pages visitors saw when trying to use key functions, some which require visitors to enter Social Security numbers.&lt;/p&gt;
&lt;p&gt;Several hours after this post went live, an Ars reader e-mailed to say he recently encountered a sketchy ad when putting a temporary fraud alert on his Equifax file. The reader wrote:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When I clicked it (from Gmail on Android) I was redirected to a spam page shortly after seeing the Equifax credit file form. I thought maybe it was an anomaly because it didn't happen again. But after reading your article about how sometimes hacks will redirect randomly I tried the link again just now and sure enough I got a spam page again (lucksupply.club saying I won an iPhone X). This is Chrome-in-a-tab from Gmail so i don't believe there's any extensions or other malware on my device that could have caused this redirect.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a href=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/screenshot1.png&quot; class=&quot;enlarge&quot; data-height=&quot;2560&quot; data-width=&quot;1440&quot;&gt;&lt;img src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/screenshot1-640x1138.png&quot; width=&quot;640&quot; height=&quot;1138&quot; srcset=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/screenshot1-1280x2276.png 2x&quot;/&gt;&lt;/a&gt;

&lt;a href=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/screenshot2.png&quot; class=&quot;enlarge&quot; data-height=&quot;2560&quot; data-width=&quot;1440&quot;&gt;&lt;img src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/screenshot2-640x1138.png&quot; width=&quot;640&quot; height=&quot;1138&quot; srcset=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/screenshot2-1280x2276.png 2x&quot;/&gt;&lt;/a&gt;

&lt;p&gt;In the hour this post was being reported and written, Abrams was unable to reproduce the redirects leading to the malicious download, but he said they returned early Thursday morning. Shortly after that, a section of the site was taken down. In an e-mail sent mid Thursday morning, an Equifax represesentative wrote:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We are aware of the situation identified on the equifax.com website in the credit report assistance link. Our IT and Security teams are looking into this matter, and out of an abundance of caution have temporarily taken this page offline. When it becomes available or we have more information to share, we will.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;em&gt;Post updated at several times on the morning of 10/12/2017 Pacific time to discuss ad networks and add details of ad served on reader. The word &quot;hacked&quot; was removed from the headline to reflect the possibility the redirects are the result of a third-party malvertising campaign.&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 12 Oct 2017 07:13:33 +0000</pubDate>
<dc:creator>Larrikin</dc:creator>
<og:url>https://arstechnica.com/information-technology/2017/10/equifax-website-hacked-again-this-time-to-redirect-to-fake-flash-update/</og:url>
<og:title>Equifax website borked again, this time to redirect to fake Flash update</og:title>
<og:image>https://cdn.arstechnica.net/wp-content/uploads/2017/10/flash-download2-760x380.jpg</og:image>
<og:description>Malware researcher encounters bogus download links during multiple visits.</og:description>
<og:type>article</og:type>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://arstechnica.com/information-technology/2017/10/equifax-website-hacked-again-this-time-to-redirect-to-fake-flash-update/</dc:identifier>
</item>
<item>
<title>Containers and Distributed Systems: Where They Came from and Where They’re Going</title>
<link>https://mesosphere.com/blog/containers-distributed-systems/</link>
<guid isPermaLink="true" >https://mesosphere.com/blog/containers-distributed-systems/</guid>
<description>&lt;p&gt;Florian Leibert, CEO of Mesosphere, recently sat down with &lt;a href=&quot;https://www.linkedin.com/in/cmcmanis&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Chuck McManis&lt;/a&gt; to talk about the challenges he faced developing early distributed systems, the origins of container technology, and the future of computing. If you’re on &lt;a href=&quot;https://news.ycombinator.com/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Hacker News&lt;/a&gt;, you probably already know Chuck, who is active under his handle, &lt;a href=&quot;https://news.ycombinator.com/user?id=ChuckMcM&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ChuckMcM&lt;/a&gt;. This fascinating conversation delves into the early problems Chuck and his teams had to solve when building distributed systems, the lessons they learned, and how they’ve shaped the present – and probably the future of computing.&lt;/p&gt;&lt;h4&gt;Finding the Mechanism Within the Mechanism&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;Florian Leibert (FL):&lt;/strong&gt; Hi Chuck, can you give us a background of your engineering career, which is as long as it is impressive. You’ve really worked in the lower layers of the stack for a very long time, and maybe you can just tell us a little bit about that.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chuck McManis (CM):&lt;/strong&gt; I came to the Bay Area in the mid ’80s and I went to work for Intel. Then I was recruited out of Intel by a startup called Sun Microsystems. I joined in ’86, the day after they went public, in the kernel group. It was a very fun place to be, with a lot of smart people, and a lot of people a lot smarter than I was, so I could learn from day-to-day there. We were working very closely with Berkeley on the &lt;a href=&quot;https://en.wikipedia.org/wiki/Berkeley_Software_Distribution&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;BSD distribution of Unix&lt;/a&gt;. I was part of the Basic Open Network Computing (BONC) group that was doing networking for the kernel. We had just come up with a distributed file system format called &lt;a href=&quot;https://tools.ietf.org/html/rfc1094&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Network File System&lt;/a&gt;, and were implementing &lt;a href=&quot;https://en.wikipedia.org/wiki/Open_Network_Computing_Remote_Procedure_Call&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;remote procedure calls&lt;/a&gt;. The explosion of networking was very exciting. Sun was bringing its entire company onto a network and we might have had over 1,500 machines. It was a huge number, impossible to recreate elsewhere, but today it would be trivial.&lt;/p&gt;
&lt;p&gt;This was all new ground, and we started running into complications when we built these systems and distributed them, and how we made that possible. Kernel programming was exciting to me because there was no room for error. Then I discovered the most exciting role of all, network programmer. If the network programmer makes a mistake in their code, they could bring the entire network down and crash 1,500 kernels. I was drawn to that level of complexity because I’ve always enjoyed solving really complex problems and finding the mechanism within the mechanism. I designed a very complicated service called &lt;a href=&quot;https://en.wikipedia.org/wiki/NIS%2B&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;NIS+&lt;/a&gt;, the first service that didn’t exist on a single machine. It was actually a collection of machines, presenting as a single service.&lt;/p&gt;
&lt;p&gt;We ran into a lot of problems that plague distributed systems even today, about naming, time synchronization, logging, and making new transactions. This was around the time that Leslie Lamport published a &lt;a href=&quot;https://www.microsoft.com/en-us/research/publication/byzantine-generals-problem/&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;groundbreaking paper on the Byzantine general problem&lt;/a&gt; that influenced us. I re-read that paper a little while ago, because &lt;a href=&quot;https://news.ycombinator.com/item?id=8697029&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;it was on Hacker News&lt;/a&gt;, and I think it still does a great job of providing the core, basic understanding you have to have to build distributed systems. Distributed systems evolved very rapidly in the late ’80s and early ’90s. There was a tremendous effort to make procedure calls go across machines and to make them transparent so that a program could be written with a procedure, and the procedures could be distributed across multiple machines, and would just run as it always had.&lt;/p&gt;
&lt;h4&gt;Making Distributed Computing Easier&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;FL:&lt;/strong&gt; Chuck, you’re probably familiar with Mesos by now, and you know that the idea of Mesos was to really make it super easy to write distributed systems. Of course, now with Kubernetes, as well, you have something similar. People want to make distributed programming much easier. That’s still as true today as it was back then.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CM:&lt;/strong&gt; Yes, absolutely. Early on there was a war between multiprocessing and distributing processing, supercomputing versus network computing, and this has been an ongoing battle even to today. A distributed system requires a network fabric between nodes and this is always much, much less bandwidth than what’s internal to a single node. After Sun Microsystems, I did a couple of startups, then went to &lt;a href=&quot;http://www.netapp.com/us/index.aspx&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Network Appliance&lt;/a&gt; which was building filers. At that point I started to focus on distributed systems from the angle of scaling client storage independent of the architecture of the processor scaling and building distributed RAID arrays. The thing with distributed file systems is that they’re very state dependent. You can’t have a bunch of people changing and moving files without properly managing state. So one of the things we discovered was that you have a lot of metadata that has to be true across all nodes before you can finalize a transaction. The metadata and how fast you could move it around the network was the constraint on how fast you could run these transactions.&lt;/p&gt;
&lt;h4&gt;Origins of Container Technology&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;FL:&lt;/strong&gt; At Sun Microsystems back in the day, you guys were already working in the kernel, on the operating system side on isolation and packaging, right? You basically came up with Docker before Docker was around, or at least with things like Solaris zones and C groups. From your experience, what actually motivated that work at Solaris, and why did it take so long for the world to really pick up this topic? And why are so many today hyping a technology that’s old?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CM:&lt;/strong&gt; So that’s a really good question, and it relates to this battle between parallel processing systems and distributed systems. Within Sun Microsystems there were two efforts: &lt;a href=&quot;https://ntrs.nasa.gov/search.jsp?R=20150001285&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Beowulf clusters&lt;/a&gt; and typical multiprocessing machines. In the Beowulf cluster, which was inexpensive, one of the features it brought to the table was that you could take out a node and use it in the cluster and it would not affect the bandwidth, it would not affect the resource utilization on other nodes. This made Beowulf clusters desirable, but the parallel processing guys didn’t have the same luxury, so they really wanted to develop architectures where dedicated servers ran specific tasks using a kernel that could isolate the parallel processes. Each server would be sized to the appropriate task, and when the mission changed for the server, it was basically useless junk. There was a tremendous demand from customers who said, “I don’t want to buy a new machine every year. I want to be able to reuse the same hardware in different ways. I want to be able to reconfigure it.”&lt;/p&gt;
&lt;p&gt;The key needs were better resource utilization, process isolation, and the need to prevent information leakage. It turned out that about twenty years earlier IBM did sort of solve that problem with partition isolation, but they did that on custom mainframe hardware and architecture. It turned out that everyone wanted that too, but on low-cost commodity hardware. And it was at that particular insight that Google had internalized in early 2000 and gotten really good at.&lt;/p&gt;
&lt;p&gt;And right about that time, I got recruited to work at Google in their platforms group to scale storage. And that was a tremendous opportunity because I was developing extremely large network storage systems. I realized a very important point about distributed systems, that there’s a point where the metadata between the systems overwhelms the actual service.&lt;/p&gt;
&lt;p&gt;The amount of network bandwidth available to support the service actually becomes the factor that decides how much data you can get in and out of the system. Google was very famous for having a policy where every node was uniformly the same, so that you could just schedule things on top of them. I brought in a somewhat heretical notion that perhaps storage can be a first-class service running on equipment that did nothing but provided a storage API to the network.&lt;/p&gt;
&lt;h4&gt;Containers Go Mainstream&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;FL:&lt;/strong&gt; So it looks like a lot your work, throughout your career, has been around isolation, has been around making resources shared more efficiently. We’ve talked a little bit about the early origins of container technology at Sun Microsystems. Just to double-click on container technology, why do you think it took so long for this technology that was built into Solaris to become mainstream with Docker?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CM:&lt;/strong&gt; The reason is because computer performance improved faster than the need for process isolation and greater system efficiency so people could just solve their problems with more hardware. That held us for a while, but then having more and more hardware started to create its own set of problems. Computers are so fast today, disks are so dense, memory is so cheap, that it takes a fairly big problem for you to actually want to partition it. Most people buy cheap hardware and if it’s only utilized by 20 percent, they don’t care because they don’t have a lot of money invested in it. That was not the case for AWS, Azure, Google, or Facebook. If you look at the early work in containers, it came from the ability for these companies to simplify and manage their infrastructure and run the most efficient operation they could.&lt;/p&gt;
&lt;p&gt;They started offering these things as a service, and their customers started to see the benefits of being able to deploy standardized configurations quickly. Then those customer started to want that infrastructure in their own datacenter to gain the efficiency and functionality of a Google or Amazon. Plus, when employees from Amazon and Google left those companies and went elsewhere, they wanted these tools so they started to recreate them. What started as a resource utilization problem inside very large companies became a lot of open source tools that the rest of the world could use.&lt;/p&gt;
&lt;h4&gt;What’s Next for Containers?&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;FL:&lt;/strong&gt; Based on your experience with distributed systems, do you think that we’re going to have a similar path where some of these companies like Google, where you’ve really solved hard networking problems, the solutions there will actually trickle into mainstream maybe even with initiatives such as the &lt;a href=&quot;https://github.com/containernetworking/cni&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Container Network Interface&lt;/a&gt; and other projects that are out there?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CM:&lt;/strong&gt; Yes, and I think this is a big data problem. Plus, it’s all the rage today for you to take very large data sets and apply algorithms that are collectively known as machine learning or correlation algorithms, and you can extract insights from the data that were not previously visible. That’s being done by distributed systems because they’re more cost effective to scale and this exacerbates the network bandwidth problem.&lt;/p&gt;
&lt;h4&gt;The Future of Distributed Computing&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;FL:&lt;/strong&gt; It sounds like you’re saying that you believe there’s going to be a future where there are a lot more clouds than just the three or four centralized clouds we currently have and there are going to be clouds at the edge.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;CM:&lt;/strong&gt; Yes. Much of this revolves around how cheap processors have gotten. We can build clouds of cheap processors connected to very inexpensive sensors and readers at the edge. They’ll be a self-contained cloud. You could have tens of thousands of these in a single location. They may not even need to be connected to the Internet as they can function on their own. They’re their own cloud. It’s similar to the technology we were building at the very beginning of distributed computing.&lt;/p&gt;
&lt;p&gt;Please follow Chuck on &lt;a href=&quot;https://twitter.com/chuckmcmanis&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Twitter&lt;/a&gt; and &lt;a href=&quot;https://news.ycombinator.com/user?id=ChuckMcM&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Hacker News&lt;/a&gt;.&lt;/p&gt;
</description>
<pubDate>Thu, 12 Oct 2017 05:46:45 +0000</pubDate>
<dc:creator>florianleibert</dc:creator>
<og:type>article</og:type>
<og:title>Containers and Distributed Systems: Where They Came From and Where They’re Going - Mesosphere</og:title>
<og:description>Florian Liebert, CEO of Mesosphere, and Chuck McManis discuss the origins and future of containers and distributed systems.</og:description>
<og:url>https://mesosphere.com/blog/containers-distributed-systems/</og:url>
<og:image>https://mesosphere.com/wp-content/uploads/2015/06/facebook-share-default.png</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://mesosphere.com/blog/containers-distributed-systems/</dc:identifier>
</item>
<item>
<title>A Little Story About the `yes` Unix Command</title>
<link>https://matthias-endler.de/2017/yes/</link>
<guid isPermaLink="true" >https://matthias-endler.de/2017/yes/</guid>
<description>&lt;head&gt;&lt;link rel=&quot;dns-prefetch&quot; href=&quot;//www.google-analytics.com/&quot;/&gt;&lt;link rel=&quot;apple-touch-icon&quot; sizes=&quot;180x180&quot; href=&quot;/apple-touch-icon.png?v=m2llJQPQq8&quot;/&gt;&lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; sizes=&quot;32x32&quot; href=&quot;/favicon-32x32.png?v=m2llJQPQq8&quot;/&gt;&lt;link rel=&quot;icon&quot; type=&quot;image/png&quot; sizes=&quot;16x16&quot; href=&quot;/favicon-16x16.png?v=m2llJQPQq8&quot;/&gt;&lt;link rel=&quot;manifest&quot; href=&quot;/manifest.json?v=m2llJQPQq8&quot;/&gt;&lt;link rel=&quot;mask-icon&quot; href=&quot;/safari-pinned-tab.svg?v=m2llJQPQq8&quot; color=&quot;#5BBAD5&quot;/&gt;&lt;link rel=&quot;shortcut icon&quot; href=&quot;/favicon.ico?v=m2llJQPQq8&quot;/&gt;&lt;meta charset=&quot;utf-8&quot;/&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,initial-scale=1&quot;/&gt;&lt;meta name=&quot;theme-color&quot; content=&quot;#ffffff&quot;/&gt;&lt;meta property=&quot;og:title&quot; content=&quot;A Little Story About the `yes` Unix Command&quot;/&gt;&lt;meta property=&quot;og:type&quot; content=&quot;website&quot;/&gt;&lt;meta property=&quot;og:description&quot; content=&quot;What's the simplest Unix command you know?&amp;lt;b...&quot;/&gt;&lt;meta property=&quot;og:url&quot; content=&quot;https://matthias-endler.de/2017/yes&quot;/&gt;&lt;meta property=&quot;og:image&quot; content=&quot;https://matthias-endler.de/img/social/default.png&quot;/&gt;&lt;meta name=&quot;twitter:title&quot; content=&quot;A Little Story About the `yes` Unix Command&quot;/&gt;&lt;meta name=&quot;twitter:description&quot; content=&quot;What's the simplest Unix command you know?&amp;lt;b...&quot;/&gt;&lt;meta name=&quot;twitter:card&quot; content=&quot;summary_large_image&quot;/&gt;&lt;meta name=&quot;twitter:site&quot; content=&quot;@matthiasendler&quot;/&gt;&lt;meta name=&quot;twitter:creator&quot; content=&quot;@matthiasendler&quot;/&gt;&lt;meta name=&quot;twitter:image&quot; content=&quot;https://matthias-endler.de/img/social/default.png&quot;/&gt;&lt;title&gt;A Little Story About the `yes` Unix Command | Matthias Endler&lt;/title&gt;&lt;meta name=&quot;author&quot; content=&quot;Matthias Endler&quot;/&gt;&lt;meta name=&quot;description&quot; content=&quot;Personal website of Matthias Endler, a Software Engineer interested in low-level programming and backend development. PHP, Python, Go, Rust.&quot;/&gt;&lt;/head&gt;&lt;body id=&quot;readabilityBody&quot; readability=&quot;146.84949655538&quot;&gt;
&lt;header readability=&quot;1.5686274509804&quot;&gt;&lt;a class=&quot;logo&quot; href=&quot;https://matthias-endler.de/&quot;&gt;&lt;img alt=&quot;Home&quot; src=&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3OTAuMiA2OTIuNiI+PGNpcmNsZSBjeD0iMzk1LjEiIGN5PSIyMjcuNyIgcj0iMjE5LjciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMCIgc3Ryb2tlLXdpZHRoPSIxNiIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIi8+PGcgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2U9IiNhMTYyMDAiIHN0cm9rZS13aWR0aD0iMiIgZm9udC13ZWlnaHQ9IjQwMCIgbGV0dGVyLXNwYWNpbmc9IjAiIHdvcmQtc3BhY2luZz0iMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiPjxwYXRoIGZpbGw9IiMzMzFmMDAiIGQ9Ik00NjUuNiAyNjUuN2wtNjcgNDAuMi03NC4zLTQwIDE0MS4zLTF6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JSIvPjxwYXRoIGZpbGw9IiNlZmJhMDAiIGQ9Ik00NjguNSAyNjZsLTcwLjIgMzQtNzctMzRoMTQ3LjJ6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JSIvPjwvZz48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxNTAuNTEgMi45MTQpIHNjYWxlKC42NTc5NSkiIHN0eWxlPSJsaW5lLWhlaWdodDoxMjUlIiBmb250LXdlaWdodD0iNDAwIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiI+PGVsbGlwc2UgY3g9Ii02MDguOCIgY3k9Ii0xNjMuMSIgdHJhbnNmb3JtPSJtYXRyaXgoMS4yNDg5NyAtLjExMzcgLjEwNyAxLjE3NTE3IDEwOTUuODcgNDY2LjcpIiByeD0iMjUuMyIgcnk9IjI4Ii8+PGVsbGlwc2UgY3g9IjMzMS40IiBjeT0iMzQ4IiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09Im1hdHJpeCguNTIyMTMgMCAwIC41NDc0NSAxNTguNzU3IDEzNi40MzIpIiByeD0iMTUuMSIgcnk9IjE3Ii8+PC9nPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDE1MC41MSAyLjkxNCkgc2NhbGUoLjY1Nzk1KSIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIj48ZWxsaXBzZSBjeD0iLTYwOC44IiBjeT0iLTE2My4xIiB0cmFuc2Zvcm09Im1hdHJpeCgxLjI0ODk3IC0uMTEzNyAuMTA3IDEuMTc1MTcgMTIwMy4yIDQ2Ny42NDYpIiByeD0iMjUuMyIgcnk9IjI4Ii8+PGVsbGlwc2UgY3g9IjMzMS40IiBjeT0iMzQ4IiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09Im1hdHJpeCguNTIyMTMgMCAwIC41NDc0NSAyNjUuMzU4IDEzNi45OTMpIiByeD0iMTUuMSIgcnk9IjE3Ii8+PC9nPjxnIGZpbGwtcnVsZT0iZXZlbm9kZCIgc3Ryb2tlPSIjMDAwIj48cGF0aCBkPSJNMzQ4LjMgMTAwLjZjMTguNS0xMSAzNi41LTIyLjUgNDctNDAuNyAxLjMgMTItLjIgMjgtMTEgNDMiLz48cGF0aCBkPSJNMzcxLjMgMTAwLjZjMTguNS0xMSAzNi41LTIyLjUgNDctNDAuNyAxLjMgMTItLjIgMjgtMTEgNDMiLz48cGF0aCBkPSJNMzk0LjQgMTAwLjZDNDEzIDg5LjYgNDMxIDc4IDQ0MS40IDYwYzEuMiAxMi4yLS4yIDI4LjMtMTEgNDMuNCIvPjwvZz48cGF0aCBkPSJNMzkxIDg3Yy04MS43LjMtMTU2LjMgMTA0LjUtMTgwLjQgMjE2LjVhMTk5LjYgMTk5LjYuMCAwIDAgNTIgNzNjNy44LTE1Ny44IDQ0LjYtMjY3IDExMi40LTIwNy44IDEwIDkgMTUuMiAxMyAyMCAxMi42IDUgLjMgMTAtMy43IDIwLjItMTIuNiA2Ny44LTU5IDEwNC43IDUwIDExMi42IDIwNy44YTE5OS42IDE5OS42LjAgMCAwIDUxLjgtNzNjLTI0LTExMi05OC42LTIxNi0xODAuNi0yMTYuMyIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSUiIGZvbnQtd2VpZ2h0PSI0MDAiIGxldHRlci1zcGFjaW5nPSIwIiB3b3JkLXNwYWNpbmc9IjAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIi8+PHBhdGggZmlsbD0iIzk1OTU5NSIgZD0iTTEzMS4zIDY4OS4zaDExLjRsLTIxLTEzOC4zaC0xMi4ybC0yMSAxMzguM0gxZTJsNi00NS44aDE5bDYgNDUuOHptLTI0LjItNTUgOS02NC4zIDkgNjQuM2gtMTd6bTgyLTgzLjNoLTQxdjEwLjdoMTV2MTI3LjZoMTJWNTYxLjdoMTR6IiB3b3JkLXNwYWNpbmc9IjAiIGxldHRlci1zcGFjaW5nPSIwIiBmb250LXdlaWdodD0iNDAwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidFdmVyIEFmdGVyLCBOb3JtYWwnO3RleHQtYWxpZ246c3RhcnQiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIi8+PHBhdGggZmlsbD0iIzk1OTU5NSIgZD0iTTIyOC42IDU1MWgtNDF2MTAuN2gxNC44djEyNy42aDExLjRWNTYxLjdoMTQuOHptNDUgMHY2MS4zSDI0NVY1NTFoLTExLjR2MTM4LjNIMjQ1VjYyM2gyOC4zdjY2LjNoMTEuM1Y1NTF6bTM3LjggMTM4LjNIM2UyVjU1MWgxMS40djEzOC4zem01Ny42LjBoMTEuNGwtMjEtMTM4LjNoLTEyLjJsLTIxIDEzOC4zaDExLjVsNi00NS44SDM2M2w2IDQ1Ljh6bS0yNC4yLTU1IDguNS02NC4zIDguNCA2NC4zaC0xN3ptNjAuNC0xNC4yYy0yNi40LTMyLTE2LjctNTcgMTAuNy03MGw2IDEwYy0yNSA5LTI3IDMxLTE0IDQ3IDMgNSA2IDkgMTAgMTMgOCAxMiAxMiAyMyAxMiAzMy44LTEgNi0yIDEyLTQgMTctNSAxMi0xNCAxOS0yNyAyMmwtNi0xMGMxMC0xIDE4LTYuMyAyMi0xNiAyLTQgMy05IDMtMTQuMy4wLTEwLTUtMjAtMTQtMzF6IiB3b3JkLXNwYWNpbmc9IjAiIGxldHRlci1zcGFjaW5nPSIwIiBmb250LXdlaWdodD0iNDAwIiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidFdmVyIEFmdGVyLCBOb3JtYWwnO3RleHQtYWxpZ246c3RhcnQiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIi8+PHBhdGggZD0iTTQ4NS42IDU1MXYxMzguM2gzMS43di0xMC44SDQ5N1Y2MjNoMTl2LTEwLjdoLTE5di01MC42aDIwLjNWNTUxem00MyAwdjEzOC4zSDU0MFY1NTF6bTM5LjcuMHYxMzguM2gxMS4yVjU1MXptMjYuNC4wdjEzOC4zaDEzLjhjMTUgMCAyNC43LTcuNSAyOS42LTIyLjUgMy05IDUtMjQuNCA1LTQ2LjcuMC0yMi0xLTM3LTQtNDYtNS0xNS0xNS0yMi0yOS0yMnptNjEuNC4wdjEzOC4zaDMydi0xMC44aC0yMFY1NTF6bTQyIDB2MTM4LjNoMzJ2LTEwLjhoLTIwVjYyM2gxOXYtMTAuN2gtMTl2LTUwLjZoMjBWNTUxem00MyAwdjEzOC4zaDEydi02N2MyLS40IDQgMSA3IDBsMTkgNjdoMTJMNzcwIDYxN2MyNy0yMC4yIDE2LTY3LjQtMTMuMy02NnptLTEzNSAxMC43aDJjMTEgMCAxOCA2LjIgMjEgMTguNSAyIDcuNCAzIDIwLjcgMyA0MCAwIDE5LjItMSAzMi41LTMgNDAtMyAxMi4yLTEwIDE4LjMtMjAgMTguM2gtMnptMTQ3IDBjMTMtMi43IDE5IDEwLjYgMTkgMjEuMy4wIDEyLTIgMjgtMTYgMjguMy0xIDAtMS40LS4yLTItLjV6IiBzdHlsZT0ibGluZS1oZWlnaHQ6MTI1JTstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOidFdmVyIEFmdGVyLCBOb3JtYWwnO3RleHQtYWxpZ246c3RhcnQiIGZvbnQtd2VpZ2h0PSI0MDAiIGZvbnQtZmFtaWx5PSJFdmVyIEFmdGVyIiBsZXR0ZXItc3BhY2luZz0iMCIgd29yZC1zcGFjaW5nPSIwIi8+PHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEwIiBkPSJNNTM1IDU1Mi40IDU3MyA2ODgiLz48cGF0aCBmaWxsPSIjOTU5NTk1IiBkPSJNMCA1NTF2MTM4aDExLjVWNTcyLjNjNi42IDEyLjcgMTMuOCAyNiAxOS43IDM2LjdsNS43IDEwIDUtMTBjNi0xMiAxMy0yNS4zIDIwLTM2Ljh2MTE3aDExVjU1MUg2MmwtMjEgMzkuOC00IDcuNGMtOS4yLTE3LTE3LjQtMzItMjUuNS00Ny4zeiIgd29yZC1zcGFjaW5nPSIwIiBsZXR0ZXItc3BhY2luZz0iMCIgZm9udC1zaXplPSIxNzIuNSIgZm9udC13ZWlnaHQ9IjQwMCIgc3R5bGU9ImxpbmUtaGVpZ2h0OjEyNSU7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjonRXZlciBBZnRlciwgTm9ybWFsJzt0ZXh0LWFsaWduOnN0YXJ0IiBmb250LWZhbWlseT0iRXZlciBBZnRlciIvPjwvc3ZnPg==&quot;/&gt;&lt;/a&gt;
&lt;p&gt;Backend Engineer at trivago. Likes just-in-time compilers and hot chocolate. &lt;a href=&quot;https://matthias-endler.de/about&quot;&gt;About me.&lt;/a&gt;&lt;/p&gt;
&lt;nav/&gt;&lt;/header&gt;
&lt;p&gt;&lt;em&gt;Published on 10th of October 2017&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;What's the simplest Unix command you know?&lt;br/&gt;There's &lt;code&gt;echo&lt;/code&gt;, which prints a string to stdout and &lt;code&gt;true&lt;/code&gt;, which always terminates with an exit code of 0.&lt;/p&gt;
&lt;p&gt;Among the rows of simple Unix commands, there's also &lt;code&gt;yes&lt;/code&gt;. If you run it without arguments, you get an infinite stream of y's, separated by a newline:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;y
&lt;/span&gt;&lt;span&gt;y
&lt;/span&gt;&lt;span&gt;y
&lt;/span&gt;&lt;span&gt;y
&lt;/span&gt;&lt;span&gt;(...you get the idea)
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;What seems to be pointless in the beginning turns out to be pretty helpful :&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;yes | sh boring_installation.sh
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Ever installed a program, which required you to type &quot;y&quot; and hit enter to keep going? &lt;code&gt;yes&lt;/code&gt; to the rescue! It will carefully fulfill this duty, so you can keep watching &lt;a href=&quot;https://www.youtube.com/watch?v=yhBExhldRXQ&quot;&gt;Pootie Tang&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Writing yes&lt;/h3&gt;
&lt;p&gt;Here's a basic version in... uhm... BASIC.&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;10 PRINT &quot;y&quot;
&lt;/span&gt;&lt;span&gt;20 GOTO 10
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;And here's the same thing in Python:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;while&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;True&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Simple, eh? Not so quick!&lt;br/&gt;Turns out, that program is quite slow.&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;python yes.py | pv -r &amp;gt; /dev/null
&lt;/span&gt;&lt;span&gt;[4.17MiB/s]
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Compare that with the built-in version on my Mac:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;yes | pv -r &amp;gt; /dev/null
&lt;/span&gt;&lt;span&gt;[34.2MiB/s]
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;So I tried to write a quicker version in Rust. Here's my first attempt:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; expletive &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;env::&lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;nth&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;unwrap_or&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;into&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;println!&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; expletive&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Some explanations:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The string we want to print in a loop is the first command line parameter and is named &lt;em&gt;expletive&lt;/em&gt;. I learned this word from the &lt;code&gt;yes&lt;/code&gt; manpage.&lt;/li&gt;
&lt;li&gt;I use &lt;code&gt;unwrap_or&lt;/code&gt; to get the &lt;em&gt;expletive&lt;/em&gt; from the parameters. In case the parameter is not set, we use &quot;y&quot; as a default.&lt;/li&gt;
&lt;li&gt;The default parameter gets converted from a string slice (&lt;code&gt;&amp;amp;str&lt;/code&gt;) into an &lt;em&gt;owned&lt;/em&gt; string on the heap (&lt;code&gt;String&lt;/code&gt;) using &lt;code&gt;into()&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Let's test it.&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;cargo run --release | pv -r &amp;gt; /dev/null
&lt;/span&gt;&lt;span&gt;   &lt;/span&gt;&lt;span&gt;Compiling yes v0.1.0
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Finished release [optimized] target(s) in 1.0 secs
&lt;/span&gt;&lt;span&gt;     &lt;/span&gt;&lt;span&gt;Running `target/release/yes`
&lt;/span&gt;&lt;span&gt;[2.35MiB/s] 
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Whoops, that doesn't look any better. It's even slower than the Python version! That caught my attention, so I looked around for the source code of a C implementation.&lt;/p&gt;
&lt;p&gt;Here's the &lt;a href=&quot;https://github.com/dspinellis/unix-history-repo/blob/4c37048d6dd7b8f65481c8c86ef8cede2e782bb3/usr/src/cmd/yes.c&quot;&gt;very first version of the program&lt;/a&gt;, released with Version 7 Unix and famously authored by Ken Thompson on &lt;nobr&gt;Jan 10, 1979&lt;/nobr&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;argc&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; argv&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;char&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;argv&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;printf&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%s&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; argc&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;?&lt;/span&gt;&lt;span&gt; argv&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;No magic here.&lt;/p&gt;
&lt;p&gt;Compare that to the &lt;a href=&quot;https://github.com/coreutils/coreutils/blame/master/src/yes.c&quot;&gt;128-line-version from the GNU coreutils, which is mirrored on Github&lt;/a&gt;. After 25 years, &lt;em&gt;it is still under active development!&lt;/em&gt; The last code change happened around a &lt;a href=&quot;https://github.com/coreutils/coreutils/commit/4cdb1703aff044de44d27e0558714542197f6dad&quot;&gt;year ago&lt;/a&gt;. That's quite fast:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;# brew install coreutils
&lt;/span&gt;&lt;span&gt;gyes | pv -r &amp;gt; /dev/null 
&lt;/span&gt;&lt;span&gt;[854MiB/s]
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The important part is at the end:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Repeatedly output the buffer until there is a write error; then fail.  &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;full_write&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;STDOUT_FILENO&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; buf&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; bufused&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;==&lt;/span&gt;&lt;span&gt; bufused&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;continue&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Aha! So they simply use a buffer to make write operations faster. The buffer size is defined by a constant named &lt;code&gt;BUFSIZ&lt;/code&gt;, which gets chosen on each system so as to make I/O efficient (see &lt;a href=&quot;https://www.gnu.org/software/libc/manual/html_node/Controlling-Buffering.html&quot;&gt;here&lt;/a&gt;). On my system, that was defined as 1024 bytes. I actually had better performance with 8192 bytes.&lt;/p&gt;
&lt;p&gt;I've extended my Rust program:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;io::&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; Write&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;BUFSIZE&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usize&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;8192&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; expletive &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;env::&lt;/span&gt;&lt;span&gt;args&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;nth&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;unwrap_or&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;into&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; writer &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;BufWriter::&lt;/span&gt;&lt;span&gt;with_capacity&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;BUFSIZE&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;io::&lt;/span&gt;&lt;span&gt;stdout&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;loop&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;writeln!&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;writer,&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; expletive&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;unwrap&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The important part is, that the buffer size is a multiple of four, to ensure &lt;a href=&quot;https://stackoverflow.com/a/381368/270334&quot;&gt;memory alignment&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Running that gave me 51.3MiB/s. Faster than the version, which comes with my system, but still way slower than the results from &lt;a href=&quot;https://www.reddit.com/r/unix/comments/6gxduc/how_is_gnu_yes_so_fast/&quot;&gt;this Reddit post&lt;/a&gt; that I found, where the author talks about 10.2GiB/s.&lt;/p&gt;
&lt;h3&gt;Update&lt;/h3&gt;
&lt;p&gt;Once again, the Rust community did not disappoint.&lt;br/&gt;As soon as this post &lt;a href=&quot;https://www.reddit.com/r/rust/comments/75fll1/a_little_story_about_the_yes_unix_command/&quot;&gt;hit the Rust subreddit&lt;/a&gt;, user &lt;a href=&quot;https://www.reddit.com/user/nwydo&quot;&gt;nwydo&lt;/a&gt; pointed out a &lt;a href=&quot;https://www.reddit.com/r/rust/comments/4wde08/optimising_yes_any_further_ideas/&quot;&gt;previous discussion&lt;/a&gt; on the same topic. Here's their optimized code, that breaks the 3GB/s mark on my machine:&lt;/p&gt;
&lt;pre&gt;
&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;env&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;io::&lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;self&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; Write&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;process&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;borrow::&lt;/span&gt;&lt;span&gt;Cow&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;ffi::&lt;/span&gt;&lt;span&gt;OsString&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;BUFFER_CAPACITY&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;usize&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;64&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;1024&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;pub&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;to_bytes&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;os_str&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; OsString&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;Vec&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;u8&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;std::&lt;/span&gt;&lt;span&gt;os::&lt;/span&gt;&lt;span&gt;unix::&lt;/span&gt;&lt;span&gt;ffi::&lt;/span&gt;&lt;span&gt;OsStringExt&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;os_str.&lt;/span&gt;&lt;span&gt;into_vec&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fill_up_buffer&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;'a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;buffer&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;'a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; [&lt;/span&gt;&lt;span&gt;u8&lt;/span&gt;&lt;span&gt;], &lt;/span&gt;&lt;span&gt;output&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;'a&lt;/span&gt;&lt;span&gt; [&lt;/span&gt;&lt;span&gt;u8&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;-&amp;gt;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;'a&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;u8&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; output.&lt;/span&gt;&lt;span&gt;len&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt; buffer.&lt;/span&gt;&lt;span&gt;len&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; output&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; buffer_size &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; output.&lt;/span&gt;&lt;span&gt;len&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;buffer&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;..&lt;/span&gt;&lt;span&gt;buffer_size&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;clone_from_slice&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;output&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; buffer_size &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt; buffer.&lt;/span&gt;&lt;span&gt;len&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;left&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; right&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; buffer.&lt;/span&gt;&lt;span&gt;split_at_mut&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;buffer_size&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;right&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;..&lt;/span&gt;&lt;span&gt;buffer_size&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;clone_from_slice&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;left&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;buffer_size &lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;buffer&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;..&lt;/span&gt;&lt;span&gt;buffer_size&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;write&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;output&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;u8&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; stdout &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;io::&lt;/span&gt;&lt;span&gt;stdout&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; locked &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; stdout.&lt;/span&gt;&lt;span&gt;lock&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; buffer &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;u8&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;BUFFER_CAPACITY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;let&lt;/span&gt;&lt;span&gt; filled &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;fill_up_buffer&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; buffer&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt; output&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; locked.&lt;/span&gt;&lt;span&gt;write_all&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;filled&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;is_ok&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;fn&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;main&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;write&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;env::&lt;/span&gt;&lt;span&gt;args_os&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;nth&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;map&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;to_bytes&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;map_or&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;Cow::&lt;/span&gt;&lt;span&gt;Borrowed&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;&amp;amp;&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;y&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;..&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt;mut&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;arg&lt;/span&gt;&lt;span&gt;|&lt;/span&gt;&lt;span&gt; &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;arg.&lt;/span&gt;&lt;span&gt;push&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;      &lt;/span&gt;&lt;span&gt;Cow::&lt;/span&gt;&lt;span&gt;Owned&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;arg&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;    &lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;  &lt;/span&gt;&lt;span&gt;process::&lt;/span&gt;&lt;span&gt;exit&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;&lt;span&gt;}&lt;/span&gt;&lt;span&gt;
&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Now that's a whole different ballgame!&lt;/p&gt;
&lt;p&gt;The only thing, that I could contribute was &lt;a href=&quot;https://github.com/cgati/yes/pull/3/files&quot;&gt;removing an unnecessary &lt;code&gt;mut&lt;/code&gt;&lt;/a&gt;. 😅&lt;/p&gt;
&lt;h3&gt;Lessons learned&lt;/h3&gt;
&lt;p&gt;The trivial program &lt;code&gt;yes&lt;/code&gt; turns out not to be so trivial after all. It uses output buffering and memory alignment to improve performance. Re-implementing Unix tools is fun and makes me appreciate the nifty tricks, which make our computers fast.&lt;/p&gt;
&lt;footer&gt;❤️ &lt;a href=&quot;https://twitter.com/matthiasendler&quot;&gt;Follow me on Twitter&lt;/a&gt; and never miss a post again.&lt;br/&gt;🎁 &lt;a href=&quot;https://tinyletter.com/mre&quot;&gt;Subscribe to new articles.&lt;/a&gt;&lt;br/&gt;💬 Comments available on &lt;a href=&quot;https://www.reddit.com/r/rust/comments/75fll1/a_little_story_about_the_yes_unix_command/&quot;&gt;Reddit &lt;/a&gt;&lt;/footer&gt;&lt;/body&gt;</description>
<pubDate>Wed, 11 Oct 2017 23:08:39 +0000</pubDate>
<dc:creator>omn1</dc:creator>
<og:title>A Little Story About the `yes` Unix Command</og:title>
<og:type>website</og:type>
<og:description>What's the simplest Unix command you know?&lt;b...</og:description>
<og:url>https://matthias-endler.de/2017/yes</og:url>
<og:image>https://matthias-endler.de/img/social/default.png</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://matthias-endler.de/2017/yes/</dc:identifier>
</item>
</channel>
</rss>