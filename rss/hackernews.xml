<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Intel Has a Big Problem</title>
<link>https://www.bloomberg.com/news/features/2018-01-18/intel-has-a-big-problem-it-needs-to-act-like-it</link>
<guid isPermaLink="true" >https://www.bloomberg.com/news/features/2018-01-18/intel-has-a-big-problem-it-needs-to-act-like-it</guid>
<description>&lt;p class=&quot;section-break&quot;&gt;Even without the aid of Hunter S. Thompson’s favorite drugs, &lt;a href=&quot;https://www.bloomberg.com/topics/ces&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;CES&lt;/a&gt;, held in Las Vegas each January, has always been a little surreal. This year’s bacchanal was crammed with &lt;a href=&quot;https://www.bloomberg.com/news/photo-essays/2017-01-04/shiny-visions-of-the-future-from-superchaged-chips-to-self-driving-cars&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;drones&lt;/a&gt;, &lt;a href=&quot;https://www.bloomberg.com/news/articles/2018-01-02/lyft-aptiv-to-partner-on-driverless-ride-hailing-at-vegas-show&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;self-driving cars&lt;/a&gt;, and &lt;a href=&quot;https://www.bloomberg.com/news/articles/2018-01-09/u-by-moen-brings-smart-home-digital-assistants-into-the-bathroom&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;internet-connected toilet seats&lt;/a&gt;—and the opening keynote speech was stranger than any of that. On Jan. 8, 5,000 ticket holders made their way through a sea of hired models and ultra-high-definition TVs to the Monte Carlo Resort and Casino on the Strip, where they squeezed into a theater to watch a two-hour psychedelic variety show. The opening act, a Blue Man Group-style quartet called Algorithm ’n Blues, pantomimed a performance of &lt;em&gt;Human&lt;/em&gt; by the Killers, backed up by a digital bassist on a giant LCD screen, flying drones that played keys on a giant piano, and a trio of acrobats, dressed like extras from &lt;em&gt;Tron&lt;/em&gt;, who performed a trampoline routine. And that’s not the weird part.&lt;/p&gt;


&lt;p&gt;After the music came Brian Krzanich, chief executive of &lt;a href=&quot;https://www.bloomberg.com/quote/INTC:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Intel Corp.&lt;/a&gt;, doing about the best Willy Wonka impression one can do in a button-down blue dress shirt and jeans. “I’d love nothing more than to simply put my phone away and take this evening to truly celebrate innovation with you,” the 57-year-old CES regular said, bragging about his company’s advances in &lt;a href=&quot;https://www.bloomberg.com/news/articles/2018-01-09/new-google-headset-camera-aim-to-spread-vr-beyond-gaming&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;virtual reality&lt;/a&gt; and new partnerships with autonomous-vehicle technology companies. Former NFL quarterback Tony Romo appeared onstage to talk up Intel’s work in 3D video, and Krzanich showed off a full-size pilotless helicopter before capping the evening by suggesting they head outside to see a light show over the famous Bellagio fountains involving hundreds of drones—all, of course, either made by Intel or running on Intel chips.&lt;/p&gt;


&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-322676350&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/i3OohSMYBylo/v3/60x-1.jpg&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/i3OohSMYBylo/v3/-1x-1.jpg&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;CEO Krzanich holds Intel’s latest drone, the Shooting Star Mini, as he speaks at CES in Las Vegas on Jan. 8.  &lt;/p&gt;
&lt;p&gt;Photographer: Rick Wilking/Reuters&lt;/p&gt;
&lt;p&gt;The whole thing was a dizzying reminder that although Intel isn’t the household name it was during the PC boom of the 1990s, it can still put on a show. The company makes about 90 percent of the world’s computer processors and 99 percent of the server chips in the data centers that effectively run the internet. While the world’s largest chipmaker has struggled to expand beyond those core businesses, it reported $60 billion in 2017 revenue at a gross margin of 63 percent, an unimaginable profit for most factory owners.&lt;/p&gt;


&lt;p&gt;What made the Intel keynote so surreal was that Krzanich barely mentioned the potentially catastrophic news that was on everyone’s mind. The previous week, the &lt;em&gt;Register&lt;/em&gt;, a British technology journal, reported that independent researchers had &lt;a href=&quot;https://www.theregister.co.uk/2018/01/02/intel_cpu_design_flaw/&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;discovered flaws in Intel’s chip designs&lt;/a&gt; that hackers could exploit to steal data thought to be the most secure. These vulnerabilities, known as Meltdown and Spectre, are a very, very big deal, allowing hackers to peek at the part of the computer where companies and individuals store passwords, encryption keys, and most anything sensitive. The flaws are &lt;a href=&quot;https://www.bloomberg.com/news/articles/2018-01-08/-it-can-t-be-true-inside-the-semiconductor-industry-s-meltdown&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;unprecedented&lt;/a&gt;. Every PC, every smartphone, and every server in the world is exposed. The episode has already led to lawsuits and calls for investigations, and undermines more than a decade of Intel’s technical wizardry.&lt;/p&gt;


&lt;p&gt;For the past few years, major cloud providers have sought ways to reduce their dependence on Intel’s server chip monopoly, quietly developing &lt;a href=&quot;https://www.bloomberg.com/news/articles/2017-05-17/google-to-sell-new-ai-supercomputer-chip-via-cloud-business&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;their own models&lt;/a&gt; or funding nascent competitors. And just days before Krzanich took the stage in Vegas, Intel gave those companies—and everybody else—a massive incentive to accelerate those efforts.&lt;/p&gt;

&lt;p&gt;Even the researchers who discovered Meltdown and Spectre initially didn’t believe what they were seeing. “That would have been such a major f--- -up by Intel that it can’t be possible,” researcher Michael Schwarz recalls thinking. Spectre affects all modern chips, including those made by competitors, but the easier hack, Meltdown, applies almost exclusively to chips made by Intel.&lt;/p&gt;
&lt;p&gt;The flaws can be patched, but those patches could slow the Intel chips by as much as 30 percent, the equivalent of turning a state-of-the-art server chip into one from 2013. “There is no playbook for something like this,” says Charles Carmakal, a vice president at &lt;a href=&quot;https://www.bloomberg.com/quote/7600875Z:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Mandiant&lt;/a&gt;, the arm of security company &lt;a href=&quot;https://www.bloomberg.com/quote/FEYE:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;FireEye&lt;/a&gt; that consults on high-profile hacks. “I don’t think I’ve ever seen a vulnerability that worked across so many different operating systems and devices.”&lt;/p&gt;
&lt;p&gt;If the slowdown turns out to be anywhere near as bad as some think it could be, it’ll amount to a major price increase for data center owners, who could in turn demand that Intel cover the cost. (So far, the big cloud providers have said their customers won’t be affected. Their plans, and the costs, remain unclear.) And because Intel is so reliant on chip revenue, there’d be no easy way to make up those losses. Intel’s stock is down 5 percent since the &lt;em&gt;Register&lt;/em&gt; report; shares of Advanced Micro Devices Inc., its only real competitor for PC and server chips, are up 11 percent.&lt;/p&gt;
&lt;p&gt;During the six months Intel was quietly working to try to fix the vulnerabilities, Krzanich sold $24 million in company shares. Intel says the stock sale was part of a plan that had been in place before anyone there knew about Meltdown or Spectre, but the day after Krzanich’s CES speech, two U.S. senators sent letters to the Securities and Exchange Commission and the Department of Justice demanding investigations. Consumer and shareholder lawyers have filed a dozen class actions against Intel, and there are few signs the pressure will let up on Krzanich anytime soon. In a research note, an analyst for &lt;a href=&quot;https://www.bloomberg.com/quote/4080071Z:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Sanford C. Bernstein &amp;amp; Co.&lt;/a&gt; called the stock sale “indefensible.”&lt;/p&gt;
&lt;aside class=&quot;pullquote&quot; data-align=&quot;center&quot; readability=&quot;3&quot;&gt;&lt;p class=&quot;passage&quot;&gt;“I don’t think I’ve ever seen a vulnerability that worked across so many different operating systems and devices”&lt;/p&gt;
&lt;/aside&gt;&lt;p&gt;Intel, which declined to make Krzanich available for comment, has treated Meltdown and Spectre as something close to a nonstory. In its initial statement, issued on Jan. 3, the company disputed that Spectre and Meltdown represented “flaws,” describing them as merely a new field of “research” into an industrywide phenomenon. It said any slowdowns would be minimal, close to zero for most people, and that the episode would have no impact on Intel’s business. At CES, after Algorithm ’n Blues but before Romo, Krzanich briefly addressed the not-flaw by thanking Intel’s peers for “coming together” to “address the recent security findings.”&lt;/p&gt;
&lt;p&gt;Intel’s clients, including the biggest companies in the technology industry, have mostly kept quiet. They have no alternative supplier. Privately, some are seething. The day after Krzanich’s big show, &lt;a href=&quot;https://www.bloomberg.com/quote/MSFT:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Microsoft Corp.&lt;/a&gt; published a blog post disputing Intel’s earlier assertion that users wouldn’t notice the slowdowns. Navin Shenoy, an Intel executive vice president, said in a statement that customer security is “a critical priority” for the company. In private conversations with clients, Intel’s top managers haven’t always acted that way, treating a disaster that threatens the security of every computer user and the profits of a whole category of businesses as no big deal, according to an executive at one of Intel’s large customers. The potential fallout isn’t an academic concern, the executive says, “it’s f---ing scary.”&lt;/p&gt;
&lt;p class=&quot;section-break&quot;&gt;Part of what makes Meltdown and Spectre so terrifying is that they upend more than a decade of conventional wisdom about information security. Starting in the mid-2000s, Intel added a layer of security within its chips and began encouraging developers to store users’ most sensitive information in the walled-off area rather than in regular software memory. Only about two years ago did researchers first notice, and begin trying to crack, a feature called speculative execution that Intel uses to speed up its chips. It essentially allows a chip to access any data it guesses a user is about to ask for, even if it’s inside the secure area, before checking whether the user is allowed to access it. This is a big reason computers and smartphones have kept getting faster year after year. It also left a gaping security hole.&lt;/p&gt;
&lt;p&gt;The feature’s vulnerabilities were discussed at conferences and in academic papers but were considered merely theoretical until last spring, when &lt;a href=&quot;https://www.bloomberg.com/news/articles/2018-01-17/how-a-22-year-old-discovered-the-worst-chip-flaws-in-history&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;Jann Horn&lt;/a&gt;, a 22-year-old researcher in &lt;a href=&quot;https://www.bloomberg.com/quote/GOOGL:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Google&lt;/a&gt;’s elite cybersecurity division, succeeded in reading private data from the secure area. Horn informed Intel in June, beating out three other research teams that discovered the flaw later in 2017. Together, they began working with Intel to patch the flaws; until the &lt;em&gt;Register&lt;/em&gt; report, they’d planned to disclose their findings on Jan. 9. As Google pointed out in a blog post about the discovery, the security flaws could allow a cloud user to covertly snoop on another customer’s machine. Anyone with an Amazon Web Services account could, in theory, steal another AWS user’s login data and access their files, though that would often require physical access to the target machine.&lt;/p&gt;
&lt;div class=&quot;image&quot;&gt;
&lt;div id=&quot;lazy-img-322675778&quot; class=&quot;lazy-img&quot;&gt;&lt;img src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/issCSnoNtDnI/v0/60x-1.png&quot; data-native-src=&quot;https://assets.bwbx.io/images/users/iqjWHBFdfxIU/issCSnoNtDnI/v0/-1x-1.png&quot; class=&quot;lazy-img__image&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In interviews, Intel executives dispute suggestions that the company’s focus on chip speeds led it to overlook obvious vulnerabilities. Intel says it’s already provided software fixes for 90 percent of its chips and that this is nothing out of the ordinary. “We have an ongoing process to make our products better,” says Stephen Smith, general manager of the company’s data center group. “We just happen to be doing it under a spotlight now.” At CES, Krzanich told the crowd that “as of now” Intel had “not received any information that these exploits have been used to obtain customer data.”&lt;/p&gt;
&lt;p&gt;This sounds more comforting than it probably should. Security analysts say that if four groups of researchers independently figured out the exploits, then some number of governments with sophisticated cyberweapons programs (China, Russia, the U.S.) likely did, too. An intelligence agency armed with Spectre or Meltdown would likely aim big, according to Mandiant’s Carmakal. “A government wouldn’t use this to break into Target,” he says. “They’d use it to get into the Department of Defense.”&lt;/p&gt;

&lt;p class=&quot;section-break&quot;&gt;So far, Meltdown and Spectre probably pose less risk to the average person than, say, a simple phishing attack in which a hacker tries to send you to a malicious website. They won’t lead to the kind of widespread panic that resulted from the 2017 hack of Equifax’s customer database.&lt;/p&gt;
&lt;p&gt;But that could change. Hackers who hadn’t tried to break into Intel’s hardware, believing there was no way it would leave a side door open, are now seeking ways in. “You’re going to be looking for other things like this,” says Jeff Pollard, an analyst with the research firm Forrester. “This is a new kind of attack. This is going to linger.”&lt;/p&gt;
&lt;p&gt;And long-term fixes won’t be easy. While coders can pull a few all-nighters to close holes in software, a chip takes years to design, test, and mass-produce. Each model can cost tens of millions of dollars to develop. For now, computer owners and data center operators will have to make an unsavory choice: Use Intel’s software patches and accept &lt;a href=&quot;https://www.bloomberg.com/news/articles/2018-01-09/microsoft-says-chip-flaw-fix-may-significantly-slow-some-servers&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;slower speeds&lt;/a&gt;, or skip the patches and remain at risk. (Intel has &lt;a href=&quot;https://www.bloomberg.com/news/articles/2018-01-09/intel-ceo-says-patch-to-fix-chip-security-will-slow-computers&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;already said&lt;/a&gt; patches are causing some machines to reboot more often than usual.) Future designs will include hard-wired fixes that speed things up, but the first versions of those won’t appear until later this year, the company says.&lt;/p&gt;
&lt;p&gt;All of this puts Intel in a tough spot. The company is a nonfactor in the smartphone-chips business dominated by &lt;a href=&quot;https://www.bloomberg.com/quote/005930:KS&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Samsung&lt;/a&gt;, &lt;a href=&quot;https://www.bloomberg.com/news/articles/2017-11-08/qualcomm-begins-selling-server-chip-it-says-beats-rival-intel-s&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; target=&quot;_blank&quot;&gt;Qualcomm&lt;/a&gt;, and &lt;a href=&quot;https://www.bloomberg.com/quote/ARM:LN&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;ARM&lt;/a&gt;, and rival &lt;a href=&quot;https://www.bloomberg.com/quote/NVDA:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Nvidia&lt;/a&gt; has taken a commanding lead in the fast-growing market for graphics chips used in artificial intelligence applications. Now, Meltdown and Spectre threaten the core of Intel’s business. The company has no competitor in server chips at the moment, but this episode could change that. Microsoft and Google have publicly praised &lt;a href=&quot;https://www.bloomberg.com/quote/QCOM:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Qualcomm Inc.&lt;/a&gt;’s first server chip, which went on sale in November, and &lt;a href=&quot;https://www.bloomberg.com/quote/AAPL:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Apple&lt;/a&gt;, Google, Microsoft, &lt;a href=&quot;https://www.bloomberg.com/quote/AMZN:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Amazon&lt;/a&gt;, and &lt;a href=&quot;https://www.bloomberg.com/quote/FB:US&quot; itemprop=&quot;StoryLink&quot; itemscope=&quot;itemscope&quot; rel=&quot;nofollow noopener&quot;&gt;Facebook&lt;/a&gt; all have internal divisions working on chip designs.&lt;/p&gt;

&lt;p&gt;Intel’s more immediate threat is political. It’ll almost certainly have to withstand criticism from lawmakers at a time when governments around the world are increasingly skeptical of tech companies with de facto monopolies. “This hyper-dependence on one chipmaker, indeed one technology, although billed as a way to lower prices, has had the effect also of greatly increasing society’s exposure not only to hackers but also to ‘shock events’ that disrupt entire systems,” the Open Markets Institute, a Washington think tank that advocates for controls on market concentration, wrote in its weekly newsletter on Jan. 11. For now, Intel’s big problem is Krzanich’s stock sales, but if it becomes clear that customers have been harmed by hacking or higher costs, regulators will likely seek recourse through consumer protection suits, antitrust investigations, or both.&lt;/p&gt;
&lt;p&gt;Intel has faced this kind of public pressure before. In 1994 the company was heavily criticized for trying to ignore evidence that its Pentium chips were generating errors for certain obscure calculations. The crisis caused IBM to announce that it would no longer ship machines that used the flawed chips. Intel’s meticulously constructed brand, Intel Inside, which had served as a sort of Good Housekeeping Seal for computer buyers, suddenly looked questionable. As part of Intel’s extensive mea culpa, then-CEO Andy Grove offered to replace all the buggy chips and took an inventory writedown of $475 million, about half its annual R&amp;amp;D budget at the time.&lt;/p&gt;
&lt;p&gt;Grove’s lesson, as he recounted in his business-advice book &lt;em&gt;Only the Paranoid Survive&lt;/em&gt;, was that Intel had been caught out. Even a quarter-century into its existence, the massive company still saw itself as a scrappy tech startup. With its size and influence, he acknowledged, came new responsibilities. “The trouble was,” Grove wrote, “not only didn’t we realize that the rules had changed, but what was worse, we didn’t know what rules we now had to abide by.”&lt;/p&gt;
&lt;p&gt;Intel has been the top chipmaker for the past 25 years, but Meltdown and Spectre could turn out to be much worse than the Pentium bug. If the company wants to maintain its position, it’ll need real humility, not cheap theatrics.&lt;br/&gt;—&lt;em&gt;With Dina Bass, Mark Bergen, Alex Webb, and Dune Lawrence&lt;/em&gt;&lt;/p&gt;


</description>
<pubDate>Sat, 20 Jan 2018 16:46:40 +0000</pubDate>
<dc:creator>MilnerRoute</dc:creator>
<og:description>Meltdown and Spectre have opened up new hacking threats, sparked class actions, and enraged longtime partners.</og:description>
<og:image>https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iM.QiZ_Yfsio/v0/1200x630.jpg</og:image>
<og:title>Intel Has a Big Problem and It Needs to Act Like It</og:title>
<og:type>article</og:type>
<og:url>https://www.bloomberg.com/news/features/2018-01-18/intel-has-a-big-problem-it-needs-to-act-like-it</og:url>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bloomberg.com/news/features/2018-01-18/intel-has-a-big-problem-it-needs-to-act-like-it</dc:identifier>
</item>
<item>
<title>JS things I didn’t know existed</title>
<link>https://air.ghost.io/js-things-i-never-knew-existed/</link>
<guid isPermaLink="true" >https://air.ghost.io/js-things-i-never-knew-existed/</guid>
<description>&lt;p&gt;I was reading through the MDN docs the other day and found these JS features and APIs I never knew existed. So here is a short list of those things, useful or not - learning JS seemingly never ends.&lt;/p&gt;

&lt;p&gt;You can name &lt;code&gt;for&lt;/code&gt; loops and blocks in JS... who knew (not me)! You can then refer to that name and use &lt;code&gt;break&lt;/code&gt; or &lt;code&gt;continue&lt;/code&gt; in &lt;code&gt;for&lt;/code&gt; loops and &lt;code&gt;break&lt;/code&gt; in blocks.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;loop1: // labeling &quot;loop1&quot; 
for (let i = 0; i &amp;lt; 3; i++) { // &quot;loop1&quot;
   loop2: // labeling &quot;loop2&quot;
   for (let j = 0; j &amp;lt; 3; j++) { // &quot;loop2&quot;
      if (i === 1) {
         continue loop1; // continues upper &quot;loop1&quot;
         // break loop1; // breaks out of upper &quot;loop1&quot;
      }
      console.log(`i = ${i}, j = ${j}`);
   }
}

/* 
 * # Output
 * i = 0, j = 0
 * i = 0, j = 1
 * i = 0, j = 2
 * i = 2, j = 0
 * i = 2, j = 1
 * i = 2, j = 2
 */
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Here is an example of block naming, you can only use &lt;code&gt;break&lt;/code&gt; in blocks.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;foo: {
  console.log('one');
  break foo;
  console.log('this log will not be executed');
}
console.log('two');

/*
 * # Output
 * one
 * two
 */
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;I thought I knew all the operators until I saw this one which has been in &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/New_in_JavaScript/1.1&quot;&gt;JS since 1996&lt;/a&gt;. It's supported by all browers and its pretty easy to understand, quote from MDN:&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;The void operator evaluates the given expression and then returns undefined.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This allow you to write an alternative IIFE like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;void function iife() {
        console.log('hello');
}();

// is the same as...

(function iife() {
    console.log('hello');
})()
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;One cavaet with &lt;code&gt;void&lt;/code&gt; is the evaluation of the expression is... void (undefined)!&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;const word = void function iife() {
        return 'hello';
}();

// word is &quot;undefined&quot;

const word = (function iife() {
        return 'hello';
})();

// word is &quot;hello&quot;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;You can also use &lt;code&gt;void&lt;/code&gt; with &lt;code&gt;async&lt;/code&gt;, you could then use it as an asynchronous entry point to your code:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;void async function() { 
    try {
        const response = await fetch('air.ghost.io'); 
        const text = await response.text();
        console.log(text);
    } catch(e) {
        console.error(e);
    }
}()

// or just stick to this :)

(async () =&amp;gt; {
    try {
        const response = await fetch('air.ghost.io'); 
        const text = await response.text();
        console.log(text);
    } catch(e) {
        console.error(e);
    }
})();
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;After reading about the comma operator, I realised I was not fully aware of how it works. Here is a good quote from MDN:&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;The comma operator evaluates each of its operands (from left to right) and returns the value of the last operand.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;function myFunc() {
  let x = 0;
  return (x += 1, x); // same as return ++x;
}

y = false, true; // returns true in console
console.log(y); // false (left-most)

z = (false, true); // returns true in console
console.log(z); // true (right-most)
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;withconditionaloperator&quot;&gt;With &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator&quot;&gt;Conditional Operator&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The last value in the comma operator becomes the return value for the conditional. So you can put any number of expressions before it, in the example below I put a console log before the returned boolean value.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;const type = 'man';

const isMale = type === 'man' ? (
    console.log('Hi Man!'),
    true
) : (
    console.log('Hi Lady!'),
    false
);

console.log(`isMale is &quot;${isMale}&quot;`);
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;Internationalization is difficult to get right at the best of times, luckily there is a &lt;a href=&quot;https://caniuse.com/#feat=internationalization&quot;&gt;well supported&lt;/a&gt; API for it now in most browsers. One of my favourite features from it is the date formatter, see example below.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;const date = new Date();

const options = {
  year: 'numeric', 
  month: 'long', 
  day: 'numeric'
};

const formatter1 = new Intl.DateTimeFormat('es-es', options);
console.log(formatter1.format(date)); // 22 de diciembre de 2017

const formatter2 = new Intl.DateTimeFormat('en-us', options);
console.log(formatter2.format(date)); // December 22, 2017
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;At time of writing this is only supported in Firefox 58+ behind a flag, however Babel does already have a proposal plugin for it &lt;a href=&quot;https://github.com/babel/babel/tree/master/packages/babel-plugin-proposal-pipeline-operator&quot;&gt;here&lt;/a&gt;. It looks very bash inspired and I like it!&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;const square = (n) =&amp;gt; n * n;
const increment = (n) =&amp;gt; n + 1;

// without pipeline operator
square(increment(square(2))); // 25

// with pipeline operator
2 |&amp;gt; square |&amp;gt; increment |&amp;gt; square; // 25
&lt;/code&gt;
&lt;/pre&gt;


&lt;p&gt;Atomic operations give predictable read and write values when data is shared between the multiple threads, waiting for other operations to finish before the next one is executed. Useful for keeping data in sync between things like the main thread and another WebWorker.&lt;/p&gt;
&lt;p&gt;I really like Atomics in other languages like Java. I feel these will be used more in JS when more of us use WebWorkers to move operations away from the main thread.&lt;/p&gt;

&lt;p&gt;Ok, I've never seen this used because its basically &lt;code&gt;Array.prototype.reduce()&lt;/code&gt; + &lt;code&gt;Array.prototype.reverse()&lt;/code&gt; and its quite rare you need to do that. If you do... then &lt;code&gt;reduceRight&lt;/code&gt; is perfect!&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;const flattened = [[0, 1], [2, 3], [4, 5]].reduceRight(function(a, b) {
    return a.concat(b);
}, []);

// flattened array is [4, 5, 2, 3, 0, 1]
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;I could of probably saved myself a &lt;code&gt;.bind(...)&lt;/code&gt; or two by knowing this - and it's been around forever.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;setTimeout(alert, 1000, 'Hello world!');

/*
 * # Output (alert)
 * Hello World!
 */

function log(text, textTwo) {
    console.log(text, textTwo);
}

setTimeout(log, 1000, 'Hello World!', 'And Mars!');

/*
 * # Output
 * Hello World! And Mars!
 */
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;I had used custom data attributes &lt;code&gt;data-*&lt;/code&gt; on HTML elements before now but I blissfully was unaware there was an API to query them easily. Apart from a few naming restrictions (see link above) it's essentially dash-case naming for attributes and camelCase when querying them in JS. So attribute &lt;code&gt;data-birth-planet&lt;/code&gt; would become &lt;code&gt;birthPlanet&lt;/code&gt; in JS.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-html&quot;&gt;&amp;lt;div id='person' data-name='john' data-birth-planet='earth'&amp;gt;&amp;lt;/div&amp;gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Query:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-javascript&quot;&gt;let personEl = document.querySelector('#person');

console.log(person.dataset) // DOMStringMap {name: &quot;john&quot;, birthPlanet: &quot;earth&quot;}
console.log(personEl.dataset.name) // john
console.log(personEl.dataset.birthPlanet) // earth

// you can programmatically add more too
personEl.dataset.foo = 'bar';
console.log(personEl.dataset.foo); // bar
&lt;/code&gt;
&lt;/pre&gt;

&lt;p&gt;Hope you discovered something new in the list for JS like I did. Shout out to Mozilla for the new MDN site, looks much nicer in my opinion - I spent way longer than I thought reading through it.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Edit: Fixed some naming and added &lt;code&gt;try&lt;/code&gt;, &lt;code&gt;catch&lt;/code&gt; to &lt;code&gt;async&lt;/code&gt; functions. Thanks Reddit!&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Happy New 2018!&lt;/p&gt;
</description>
<pubDate>Sat, 20 Jan 2018 10:40:01 +0000</pubDate>
<dc:creator>fagnerbrack</dc:creator>
<og:type>article</og:type>
<og:title>JS things I never knew existed</og:title>
<og:description>I was reading through the MDN docs the other day and found these JS features and APIs I never knew existed. So here is a short list of those things, useful or not - learning JS seemingly never ends. Label Statements You can name for loops and blocks in JS.</og:description>
<og:url>http://air.ghost.io/js-things-i-never-knew-existed/</og:url>
<og:image>http://air.ghost.io/content/images/2017/12/holidays-2017.png</og:image>
<dc:format>text/html</dc:format>
<dc:identifier>https://air.ghost.io/js-things-i-never-knew-existed/</dc:identifier>
</item>
<item>
<title>Learn FFmpeg the hard way</title>
<link>https://github.com/leandromoreira/ffmpeg-libav-tutorial#learn-ffmpeg-libav-the-hard-way</link>
<guid isPermaLink="true" >https://github.com/leandromoreira/ffmpeg-libav-tutorial#learn-ffmpeg-libav-the-hard-way</guid>
<description>&lt;h3&gt;README.md&lt;/h3&gt;
&lt;article class=&quot;markdown-body entry-content&quot; itemprop=&quot;text&quot;&gt;&lt;p&gt;&lt;a href=&quot;https://img.shields.io/badge/license-BSD--3--Clause-blue.svg&quot; rel=&quot;nofollow&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/274d07206c413193cf01e32de7f897d98da66ca2/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d4253442d2d332d2d436c617573652d626c75652e737667&quot; alt=&quot;license&quot; data-canonical-src=&quot;https://img.shields.io/badge/license-BSD--3--Clause-blue.svg&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I was looking for a tutorial/book that would teach me how to start to use &lt;a href=&quot;https://www.ffmpeg.org/&quot; rel=&quot;nofollow&quot;&gt;FFmpeg&lt;/a&gt; as a library (a.k.a. libav) and then I found the &lt;a href=&quot;http://dranger.com/ffmpeg/&quot; rel=&quot;nofollow&quot;&gt;&quot;How to write a video player in less than 1k lines&quot;&lt;/a&gt; tutorial. Unfortunately it was deprecated, so I decided to write this one.&lt;/p&gt;
&lt;p&gt;Most of the code in here will be in c &lt;strong&gt;but don't worry&lt;/strong&gt;: you can easily understand and apply it to your preferred language. FFmpeg libav has lots of bindings for many languages like &lt;a href=&quot;https://mikeboers.github.io/PyAV/&quot; rel=&quot;nofollow&quot;&gt;python&lt;/a&gt;, &lt;a href=&quot;https://github.com/imkira/go-libav&quot;&gt;go&lt;/a&gt; and even if your language doesn't have it, you can still support it through the &lt;code&gt;ffi&lt;/code&gt; (here's an example with &lt;a href=&quot;https://github.com/daurnimator/ffmpeg-lua-ffi/blob/master/init.lua&quot;&gt;Lua&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;We'll start with a quick lesson about what is video, audio, codec and container and then we'll go to a crash course on how to use &lt;code&gt;FFmpeg&lt;/code&gt; command line and finally we'll write code, feel free to skip directly to the section &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial#learn-ffmpeg-libav-the-hard-way&quot;&gt;Learn FFmpeg libav the Hard Way.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Some people used to say that the Internet video streaming is the future of the traditional TV, in any case, the FFmpeg is something that is worth studying.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Table of Contents&lt;/strong&gt;&lt;/p&gt;

&lt;h2&gt;video - what you see!&lt;/h2&gt;
&lt;p&gt;If you have a sequence series of images and change them at a given frequency (let's say &lt;a href=&quot;https://www.filmindependent.org/blog/hacking-film-24-frames-per-second/&quot; rel=&quot;nofollow&quot;&gt;24 images per second&lt;/a&gt;), you will create an &lt;a href=&quot;https://en.wikipedia.org/wiki/Persistence_of_vision&quot; rel=&quot;nofollow&quot;&gt;illusion of movement&lt;/a&gt;. In summary this is the very basic idea behind a video: &lt;strong&gt;a series of pictures / frames running at a given rate&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://camo.githubusercontent.com/966d1f292c623eb0714881944f7c089025bbb049/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f312f31662f4c696e6e65745f6b696e656f67726170685f313838362e6a7067&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/966d1f292c623eb0714881944f7c089025bbb049/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f312f31662f4c696e6e65745f6b696e656f67726170685f313838362e6a7067&quot; title=&quot;flip book&quot; height=&quot;280&quot; data-canonical-src=&quot;https://upload.wikimedia.org/wikipedia/commons/1/1f/Linnet_kineograph_1886.jpg&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Zeitgenössische Illustration (1886)&lt;/p&gt;
&lt;h2&gt;audio - what you listen!&lt;/h2&gt;
&lt;p&gt;Although a muted video can express a variety of feelings, adding sound to it brings more pleasure to the experience.&lt;/p&gt;
&lt;p&gt;Sound is the vibration that propagates as a wave of pressure, through the air or any other transmission medium, such as a gas, liquid or solid.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In a digital audio system, a microphone converts sound to an analog electrical signal, then an analog-to-digital converter (ADC)—typically using &lt;a href=&quot;https://en.wikipedia.org/wiki/Pulse-code_modulation&quot; rel=&quot;nofollow&quot;&gt;pulse-code modulation—converts (PCM)&lt;/a&gt; the analog signal into a digital signal.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://camo.githubusercontent.com/0ba780b908e6545646bc84e7ccd149f42c505517/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f7468756d622f632f63372f4350542d536f756e642d4144432d4441432e7376672f36343070782d4350542d536f756e642d4144432d4441432e7376672e706e67&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://camo.githubusercontent.com/0ba780b908e6545646bc84e7ccd149f42c505517/68747470733a2f2f75706c6f61642e77696b696d656469612e6f72672f77696b6970656469612f636f6d6d6f6e732f7468756d622f632f63372f4350542d536f756e642d4144432d4441432e7376672f36343070782d4350542d536f756e642d4144432d4441432e7376672e706e67&quot; alt=&quot;audio analog to digital&quot; title=&quot;audio analog to digital&quot; data-canonical-src=&quot;https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/CPT-Sound-ADC-DAC.svg/640px-CPT-Sound-ADC-DAC.svg.png&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://commons.wikimedia.org/wiki/File:CPT-Sound-ADC-DAC.svg&quot; rel=&quot;nofollow&quot;&gt;https://commons.wikimedia.org/wiki/File:CPT-Sound-ADC-DAC.svg&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;codec - shrinking data&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;CODEC is an electronic circuit or software that &lt;strong&gt;compresses or decompresses digital audio/video.&lt;/strong&gt; It converts raw (uncompressed) digital audio/video to a compressed format or vice versa. &lt;a href=&quot;https://en.wikipedia.org/wiki/Video_codec&quot; rel=&quot;nofollow&quot;&gt;https://en.wikipedia.org/wiki/Video_codec&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But if we chose to pack millions of images in a single file and called it a movie, we might end up with a huge file. Let's do the math:&lt;/p&gt;
&lt;p&gt;Suppose we are creating a video with a resolution of &lt;code&gt;1080 x 1920&lt;/code&gt; (height x width) and that we'll spend &lt;code&gt;3 bytes&lt;/code&gt; per pixel (the minimal point at a screen) to encode the color (or &lt;a href=&quot;https://en.wikipedia.org/wiki/Color_depth#True_color_.2824-bit.29&quot; rel=&quot;nofollow&quot;&gt;24 bit color&lt;/a&gt;, what gives us 16,777,216 different colors) and this video runs at &lt;code&gt;24 frames per second&lt;/code&gt; and it is &lt;code&gt;30 minutes&lt;/code&gt; long.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
toppf = &lt;span class=&quot;pl-c1&quot;&gt;1080&lt;/span&gt; * &lt;span class=&quot;pl-c1&quot;&gt;1920&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;total_of_pixels_per_frame&lt;/span&gt;
cpp = &lt;span class=&quot;pl-c1&quot;&gt;3&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;cost_per_pixel&lt;/span&gt;
tis = &lt;span class=&quot;pl-c1&quot;&gt;30&lt;/span&gt; * &lt;span class=&quot;pl-c1&quot;&gt;60&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;time_in_seconds&lt;/span&gt;
fps = &lt;span class=&quot;pl-c1&quot;&gt;24&lt;/span&gt; &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;frames_per_second&lt;/span&gt;

required_storage = tis * fps * toppf * cpp
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This video would require approximately &lt;code&gt;250.28GB&lt;/code&gt; of storage or &lt;code&gt;1.11Gbps&lt;/code&gt; of bandwidth! That's why we need to use a &lt;a href=&quot;https://github.com/leandromoreira/digital_video_introduction#how-does-a-video-codec-work&quot;&gt;CODEC&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;container - a comfy place for audio and video&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;A container or wrapper format is a metafile format whose specification describes how different elements of data and metadata coexist in a computer file. &lt;a href=&quot;https://en.wikipedia.org/wiki/Digital_container_format&quot; rel=&quot;nofollow&quot;&gt;https://en.wikipedia.org/wiki/Digital_container_format&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A &lt;strong&gt;single file that contains all the streams&lt;/strong&gt; (mostly the audio and video) and it also provides &lt;strong&gt;synchronization and general metadata&lt;/strong&gt;, such as title, resolution and etc.&lt;/p&gt;
&lt;p&gt;Usually we can infer the format of a file by looking at its extension: for instance a &lt;code&gt;video.webm&lt;/code&gt; is probably a video using the container &lt;a href=&quot;https://www.webmproject.org/&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;webm&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/container.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/container.png&quot; alt=&quot;container&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;A complete, cross-platform solution to record, convert and stream audio and video.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;To work with multimedia we can use the AMAZING tool/library called &lt;a href=&quot;https://www.ffmpeg.org/&quot; rel=&quot;nofollow&quot;&gt;FFmpeg&lt;/a&gt;. Chances are you already know/use it directly or indirectly (do you use &lt;a href=&quot;https://www.chromium.org/developers/design-documents/video&quot; rel=&quot;nofollow&quot;&gt;Chrome?&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;It has a command line program called &lt;code&gt;ffmpeg&lt;/code&gt;, a very simple yet powerful binary. For instance, you can convert from &lt;code&gt;mp4&lt;/code&gt; to the container &lt;code&gt;avi&lt;/code&gt; just by typing the follow command:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ ffmpeg -i input.mp4 output.avi
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We just made a &lt;strong&gt;remuxing&lt;/strong&gt; here, which is converting from one container to another one. Technically FFmpeg could also be doing a transcoding but we'll talk about that later.&lt;/p&gt;
&lt;h2&gt;FFmpeg command line tool 101&lt;/h2&gt;
&lt;p&gt;FFmpeg does have a &lt;a href=&quot;https://www.ffmpeg.org/ffmpeg.html&quot; rel=&quot;nofollow&quot;&gt;documentation&lt;/a&gt; that does a great job of explaining how it works.&lt;/p&gt;
&lt;p&gt;To make things short, the FFmpeg command line program expects the following argument format to perform its actions &lt;code&gt;ffmpeg {1} {2} -i {3} {4} {5}&lt;/code&gt;, where:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;global options&lt;/li&gt;
&lt;li&gt;input file options&lt;/li&gt;
&lt;li&gt;input url&lt;/li&gt;
&lt;li&gt;output file options&lt;/li&gt;
&lt;li&gt;output url&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;The parts 2, 3, 4 and 5 can be as many as you need. It's easier to understand this argument format in action:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ wget -O bunny_1080p_60fps.mp4 http://distribution.bbb3d.renderfarming.net/video/mp4/bbb_sunflower_1080p_60fps_normal.mp4

$ ffmpeg \
-y &lt;span class=&quot;pl-cce&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; global options&lt;/span&gt;
-c:a libfdk_aac -c:v libx264 &lt;span class=&quot;pl-cce&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; input options&lt;/span&gt;
-i bunny_1080p_60fps.mp4 &lt;span class=&quot;pl-cce&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; input url&lt;/span&gt;
-c:v libvpx-vp9 -c:a libvorbis &lt;span class=&quot;pl-cce&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; output options&lt;/span&gt;
bunny_1080p_60fps_vp9.webm &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; output url&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This command takes an input file &lt;code&gt;mp4&lt;/code&gt; containing two streams (an audio encoded with &lt;code&gt;aac&lt;/code&gt; CODEC and a video encoded using &lt;code&gt;h264&lt;/code&gt; CODEC) and convert it to &lt;code&gt;webm&lt;/code&gt;, changing its audio and video CODECs too.&lt;/p&gt;
&lt;p&gt;We could simplify the command above but then be aware that FFmpeg will adopt or guess the default values for you. For instance when you just type &lt;code&gt;ffmpeg -i input.avi output.mp4&lt;/code&gt; what audio/video CODEC does it use to produce the &lt;code&gt;output.mp4&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;Werner Robitza wrote a must read/execute &lt;a href=&quot;http://slhck.info/ffmpeg-encoding-course/#/&quot; rel=&quot;nofollow&quot;&gt;tutorial about encoding and editing with FFmpeg&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;While working with audio/video we usually do a set of tasks with the media.&lt;/p&gt;
&lt;h2&gt;Transcoding&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/transcoding.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/transcoding.png&quot; alt=&quot;transcoding&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What?&lt;/strong&gt; the act of converting one of the streams (audio or video) from one CODEC to another one.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why?&lt;/strong&gt; sometimes some devices (TVs, smartphones, console and etc) doesn't support X but Y and newer CODECs provide better compression rate.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How?&lt;/strong&gt; converting an &lt;code&gt;H264&lt;/code&gt; (AVC) video to an &lt;code&gt;H265&lt;/code&gt; (HEVC).&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ ffmpeg \
-i bunny_1080p_60fps.mp4 \
-c:v libx265 \
bunny_1080p_60fps_h265.mp4
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Transmuxing&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/transmuxing.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/transmuxing.png&quot; alt=&quot;transmuxing&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What?&lt;/strong&gt; the act of converting from one format (container) to another one.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why?&lt;/strong&gt; sometimes some devices (TVs, smartphones, console and etc) doesn't support X but Y and sometimes newer containers provide modern required features.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How?&lt;/strong&gt; converting a &lt;code&gt;mp4&lt;/code&gt; to a &lt;code&gt;webm&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ ffmpeg \
-i bunny_1080p_60fps.mp4 \
-c copy &lt;span class=&quot;pl-cce&quot;&gt;\ &lt;/span&gt;&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; just saying to ffmpeg to skip encoding&lt;/span&gt;
bunny_1080p_60fps.webm
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Transrating&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/transrating.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/transrating.png&quot; alt=&quot;transrating&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What?&lt;/strong&gt; the act of changing the bit rate, or producing other renditions.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why?&lt;/strong&gt; people will try to watch your video in a &lt;code&gt;2G&lt;/code&gt; (edge) connection using a less powerful smartphone or in a &lt;code&gt;fiber&lt;/code&gt; Internet connection on their 4K TVs therefore you should offer more than on rendition of the same video with different bit rate.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How?&lt;/strong&gt; producing a rendition with bit rate between 3856K and 2000K.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ ffmpeg \
-i bunny_1080p_60fps.mp4 \
-minrate 964K -maxrate 3856K -bufsize 2000K \
bunny_1080p_60fps_transrating_964_3856.mp4
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Usually we'll be using transrating with transsizing. Werner Robitza wrote another must read/execute &lt;a href=&quot;http://slhck.info/posts/&quot; rel=&quot;nofollow&quot;&gt;series of posts about FFmpeg rate control&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Transsizing&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/transsizing.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/transsizing.png&quot; alt=&quot;transsizing&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What?&lt;/strong&gt; the act of converting from one resolution to another one. As said before transsizing is often used with transrating.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why?&lt;/strong&gt; reasons are about the same as for the transrating.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How?&lt;/strong&gt; converting a &lt;code&gt;1080p&lt;/code&gt; to a &lt;code&gt;480p&lt;/code&gt; resolution.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ ffmpeg \
-i bunny_1080p_60fps.mp4 \
-vf scale=480:-1 \
bunny_1080p_60fps_transsizing_480.mp4
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;Bonus Round: Adaptive Streaming&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/adaptive-streaming.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/adaptive-streaming.png&quot; alt=&quot;adaptive streaming&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What?&lt;/strong&gt; the act of producing many resolutions (bit rates) and split the media into chunks and serve them via http.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Why?&lt;/strong&gt; to provide a flexible media that can be watched on a low end smartphone or on a 4K TV, it's also easy to scale and deploy but it can add latency.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;How?&lt;/strong&gt; creating an adaptive WebM using DASH.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; video streams&lt;/span&gt;
$ ffmpeg -i bunny_1080p_60fps.mp4 -c:v libvpx-vp9 -s 160x90 -b:v 250k -keyint_min 150 -g 150 -an -f webm -dash 1 video_160x90_250k.webm

$ ffmpeg -i bunny_1080p_60fps.mp4 -c:v libvpx-vp9 -s 320x180 -b:v 500k -keyint_min 150 -g 150 -an -f webm -dash 1 video_320x180_500k.webm

$ ffmpeg -i bunny_1080p_60fps.mp4 -c:v libvpx-vp9 -s 640x360 -b:v 750k -keyint_min 150 -g 150 -an -f webm -dash 1 video_640x360_750k.webm

$ ffmpeg -i bunny_1080p_60fps.mp4 -c:v libvpx-vp9 -s 640x360 -b:v 1000k -keyint_min 150 -g 150 -an -f webm -dash 1 video_640x360_1000k.webm

$ ffmpeg -i bunny_1080p_60fps.mp4 -c:v libvpx-vp9 -s 1280x720 -b:v 1500k -keyint_min 150 -g 150 -an -f webm -dash 1 video_1280x720_1500k.webm

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; audio streams&lt;/span&gt;
$ ffmpeg -i bunny_1080p_60fps.mp4 -c:a libvorbis -b:a 128k -vn -f webm -dash 1 audio_128k.webm

&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; the DASH manifest&lt;/span&gt;
$ ffmpeg \
 -f webm_dash_manifest -i video_160x90_250k.webm \
 -f webm_dash_manifest -i video_320x180_500k.webm \
 -f webm_dash_manifest -i video_640x360_750k.webm \
 -f webm_dash_manifest -i video_640x360_1000k.webm \
 -f webm_dash_manifest -i video_1280x720_500k.webm \
 -f webm_dash_manifest -i audio_128k.webm \
 -c copy -map 0 -map 1 -map 2 -map 3 -map 4 -map 5 \
 -f webm_dash_manifest \
 -adaptation_sets &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;id=0,streams=0,1,2,3,4 id=1,streams=5&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; \
 manifest.mpd
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;PS: I stole this example from the &lt;a href=&quot;http://wiki.webmproject.org/adaptive-streaming/instructions-to-playback-adaptive-webm-using-dash&quot; rel=&quot;nofollow&quot;&gt;Instructions to playback Adaptive WebM using DASH&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Going beyond&lt;/h2&gt;
&lt;p&gt;There are &lt;a href=&quot;https://github.com/leandromoreira/digital_video_introduction/blob/master/encoding_pratical_examples.md#split-and-merge-smoothly&quot;&gt;many and many other usages for FFmpeg&lt;/a&gt;. I use it in conjunction with &lt;em&gt;iMovie&lt;/em&gt; to produce/edit some videos for YouTube and you can certainly use it professionally.&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Don't you wonder sometimes 'bout sound and vision? &lt;strong&gt;David Robert Jones&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Since the &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial#ffmpeg---command-line&quot;&gt;FFmpeg&lt;/a&gt; is so useful as a command line tool to do essential tasks over the media files, how can we use it in our programs?&lt;/p&gt;
&lt;p&gt;FFmpeg is &lt;a href=&quot;https://www.ffmpeg.org/doxygen/trunk/index.html&quot; rel=&quot;nofollow&quot;&gt;composed by several libraries&lt;/a&gt; that can be integrated into our own programs. Usually, when you install FFmpeg, it installs automatically all these libraries. I'll be referring to the set of these libraries as &lt;strong&gt;FFmpeg libav&lt;/strong&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This title is a homage to Zed Shaw's series &lt;a href=&quot;https://learncodethehardway.org/&quot; rel=&quot;nofollow&quot;&gt;Learn X the Hard Way&lt;/a&gt;, particularly his book Learn C the Hard Way.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Chapter 0 - The infamous hello world&lt;/h2&gt;
&lt;p&gt;This hello world actually won't show the message &lt;code&gt;&quot;hello world&quot;&lt;/code&gt; in the terminal 👅 Instead we're going to &lt;strong&gt;print out information about the video&lt;/strong&gt;, things like its format (container), duration, resolution, audio channels and, in the end, we'll &lt;strong&gt;decode some frames and save them as image files&lt;/strong&gt;.&lt;/p&gt;
&lt;h3&gt;FFmpeg libav architecture&lt;/h3&gt;
&lt;p&gt;But before we start to code, let's learn how &lt;strong&gt;FFmpeg libav architecture&lt;/strong&gt; works and how its components communicate with others.&lt;/p&gt;
&lt;p&gt;Here's a diagram of the process of decoding a video:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/decoding.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/decoding.png&quot; alt=&quot;ffmpeg libav architecture - decoding process&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;You'll first need to load your media file into a component called &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVFormatContext.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVFormatContext&lt;/code&gt;&lt;/a&gt; (the video container is also known as format). It actually doesn't fully load the whole file: it often only reads the header.&lt;/p&gt;
&lt;p&gt;Once we loaded the minimal &lt;strong&gt;header of our container&lt;/strong&gt;, we can access its streams (think of them as a rudimentary audio and video data). Each stream will be available in a component called &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVStream.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVStream&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Stream is a fancy name for a continuous flow of data.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Suppose our video has two streams: an audio encoded with &lt;a href=&quot;https://en.wikipedia.org/wiki/Advanced_Audio_Coding&quot; rel=&quot;nofollow&quot;&gt;AAC CODEC&lt;/a&gt; and a video encoded with &lt;a href=&quot;https://en.wikipedia.org/wiki/H.264/MPEG-4_AVC&quot; rel=&quot;nofollow&quot;&gt;H264 (AVC) CODEC&lt;/a&gt;. From each stream we can extract &lt;strong&gt;pieces (slices) of data&lt;/strong&gt; called packets that will be loaded into components named &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVPacket.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVPacket&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;strong&gt;data inside the packets are still coded&lt;/strong&gt; (compressed) and in order to decode the packets, we need to pass them to a specific &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVCodec.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVCodec&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;AVCodec&lt;/code&gt; will decode them into &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVFrame.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVFrame&lt;/code&gt;&lt;/a&gt; and finally, this component gives us &lt;strong&gt;the uncompressed frame&lt;/strong&gt;. Noticed that the same terminology/process is used either by audio and video stream.&lt;/p&gt;
&lt;h3&gt;Chapter 0 - code walkthrough&lt;/h3&gt;
&lt;blockquote&gt;
&lt;h4&gt;TLDR; show me the &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/0_hello_world.c&quot;&gt;code&lt;/a&gt; and execution.&lt;/h4&gt;

&lt;/blockquote&gt;
&lt;p&gt;We'll skip some details, but don't worry: the &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/0_hello_world.c&quot;&gt;source code is available at github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The first thing we need to do is to register all the codecs, formats and protocols. To do it, we just need to call the function &lt;a href=&quot;http://ffmpeg.org/doxygen/trunk/group__lavf__core.html#ga917265caec45ef5a0646356ed1a507e3&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;av_register_all&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;av_register_all&lt;/span&gt;();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we're going to allocate memory to the component &lt;a href=&quot;http://ffmpeg.org/doxygen/trunk/structAVFormatContext.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVFormatContext&lt;/code&gt;&lt;/a&gt; that will hold information about the format (container).&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
AVFormatContext *pFormatContext = avformat_alloc_context();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we're going to open the file and read its header and fill the &lt;code&gt;AVFormatContext&lt;/code&gt; with minimal information about the format (notice that usually the codecs are not opened). The function used to do this is &lt;a href=&quot;http://ffmpeg.org/doxygen/trunk/group__lavf__decoding.html#ga31d601155e9035d5b0e7efedc894ee49&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;avformat_open_input&lt;/code&gt;&lt;/a&gt;. It expects an &lt;code&gt;AVFormatContext&lt;/code&gt;, a &lt;code&gt;filename&lt;/code&gt; and two optional arguments: the &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVInputFormat.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVInputFormat&lt;/code&gt;&lt;/a&gt; (if you pass &lt;code&gt;NULL&lt;/code&gt;, FFmpeg will guess the format) and the &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVDictionary.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVDictionary&lt;/code&gt;&lt;/a&gt; (which are the options to the demuxer).&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;avformat_open_input&lt;/span&gt;(&amp;amp;pFormatContext, filename, &lt;span class=&quot;pl-c1&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;pl-c1&quot;&gt;NULL&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can print the format name and the media duration:&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Format &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt;, duration &lt;span class=&quot;pl-c1&quot;&gt;%lld&lt;/span&gt; us&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, pFormatContext-&amp;gt;iformat-&amp;gt;long_name, pFormatContext-&amp;gt;duration);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To access the &lt;code&gt;streams&lt;/code&gt;, we need to read data from the media. The function &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/group__lavf__decoding.html#gad42172e27cddafb81096939783b157bb&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;avformat_find_stream_info&lt;/code&gt;&lt;/a&gt; does that. Now, the &lt;code&gt;pFormatContext-&amp;gt;nb_streams&lt;/code&gt; will hold the amount of streams and the &lt;code&gt;pFormatContext-&amp;gt;streams[i]&lt;/code&gt; will give us the &lt;code&gt;i&lt;/code&gt; stream (an &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVStream.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVStream&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;avformat_find_stream_info&lt;/span&gt;(pFormatContext,  &lt;span class=&quot;pl-c1&quot;&gt;NULL&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we'll loop through all the streams.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; pFormatContext-&amp;gt;nb_streams; i++)
{
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For each stream, we're going to keep the &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVCodecParameters.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVCodecParameters&lt;/code&gt;&lt;/a&gt;, which describes the properties of a codec used by the stream &lt;code&gt;i&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
AVCodecParameters *pLocalCodecParameters = pFormatContext-&amp;gt;streams[i]-&amp;gt;codecpar;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With the codec properties we can look up the proper CODEC querying the function &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/group__lavc__decoding.html#ga19a0ca553277f019dd5b0fec6e1f9dca&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;avcodec_find_decoder&lt;/code&gt;&lt;/a&gt; and find the registered decoder for the codec id and return an &lt;a href=&quot;http://ffmpeg.org/doxygen/trunk/structAVCodec.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVCodec&lt;/code&gt;&lt;/a&gt;, the component that knows how to en&lt;strong&gt;CO&lt;/strong&gt;de and &lt;strong&gt;DEC&lt;/strong&gt;ode the stream.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
AVCodec *pLocalCodec = avcodec_find_decoder(pLocalCodecParameters-&amp;gt;codec_id);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we can print information about the codecs.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; specific for video and audio&lt;/span&gt;
&lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; (pLocalCodecParameters-&amp;gt;codec_type == AVMEDIA_TYPE_VIDEO) {
  &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Video Codec: resolution &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt; x &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, pLocalCodecParameters-&amp;gt;width, pLocalCodecParameters-&amp;gt;height);
} &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; (pLocalCodecParameters-&amp;gt;codec_type == AVMEDIA_TYPE_AUDIO) {
  &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Audio Codec: &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt; channels, sample rate &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, pLocalCodecParameters-&amp;gt;channels, pLocalCodecParameters-&amp;gt;sample_rate);
}
&lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; general&lt;/span&gt;
&lt;span class=&quot;pl-en&quot;&gt;printf&lt;/span&gt;(&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-cce&quot;&gt;\t&lt;/span&gt;Codec &lt;span class=&quot;pl-c1&quot;&gt;%s&lt;/span&gt; ID &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt; bit_rate &lt;span class=&quot;pl-c1&quot;&gt;%lld&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, pLocalCodec-&amp;gt;long_name, pLocalCodec-&amp;gt;id, pCodecParameters-&amp;gt;bit_rate);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;With the codec, we can allocate memory for the &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVCodecContext.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVCodecContext&lt;/code&gt;&lt;/a&gt;, which will hold the context for our decode/encode process, but then we need to fill this codec context with CODEC parameters; we do that with &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/group__lavc__core.html#gac7b282f51540ca7a99416a3ba6ee0d16&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;avcodec_parameters_to_context&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Once we filled the codec context, we need to open the codec. We call the function &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/group__lavc__core.html#ga11f785a188d7d9df71621001465b0f1d&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;avcodec_open2&lt;/code&gt;&lt;/a&gt; and then we can use it.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
AVCodecContext *pCodecContext = avcodec_alloc_context3(pCodec);
&lt;span class=&quot;pl-en&quot;&gt;avcodec_parameters_to_context&lt;/span&gt;(pCodecContext, pCodecParameters);
&lt;span class=&quot;pl-en&quot;&gt;avcodec_open2&lt;/span&gt;(pCodecContext, pCodec, &lt;span class=&quot;pl-c1&quot;&gt;NULL&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we're going to read the packets from the stream and decode them into frames but first, we need to allocate memory for both components, the &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVPacket.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVPacket&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/structAVFrame.html&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;AVFrame&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
AVPacket *pPacket = av_packet_alloc();
AVFrame *pFrame = av_frame_alloc();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let's feed our packets from the streams with the function &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/group__lavf__decoding.html#ga4fdb3084415a82e3810de6ee60e46a61&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;av_read_frame&lt;/code&gt;&lt;/a&gt; while it has packets.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-k&quot;&gt;while&lt;/span&gt; (av_read_frame(pFormatContext, pPacket) &amp;gt;= &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;) {
  &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt;...&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Let's &lt;strong&gt;send the raw data packet&lt;/strong&gt; (compressed frame) to the decoder, through the codec context, using the function &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/group__lavc__decoding.html#ga58bc4bf1e0ac59e27362597e467efff3&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;avcodec_send_packet&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;avcodec_send_packet&lt;/span&gt;(pCodecContext, pPacket);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And let's &lt;strong&gt;receive the raw data frame&lt;/strong&gt; (uncompressed frame) from the decoder, through the same codec context, using the function &lt;a href=&quot;https://ffmpeg.org/doxygen/trunk/group__lavc__decoding.html#ga11e6542c4e66d3028668788a1a74217c&quot; rel=&quot;nofollow&quot;&gt;&lt;code&gt;avcodec_receive_frame&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;avcodec_receive_frame&lt;/span&gt;(pCodecContext, pFrame);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We can print the frame number, the &lt;a href=&quot;https://en.wikipedia.org/wiki/Presentation_timestamp&quot; rel=&quot;nofollow&quot;&gt;PTS&lt;/a&gt;, DTS, &lt;a href=&quot;https://en.wikipedia.org/wiki/Video_compression_picture_types&quot; rel=&quot;nofollow&quot;&gt;frame type&lt;/a&gt; and etc.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;printf&lt;/span&gt;(
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Frame &lt;span class=&quot;pl-c1&quot;&gt;%c&lt;/span&gt; (&lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt;) pts &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt; dts &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt; key_frame &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt; [coded_picture_number &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt;, display_picture_number &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt;]&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;,
    &lt;span class=&quot;pl-en&quot;&gt;av_get_picture_type_char&lt;/span&gt;(pFrame-&amp;gt;pict_type),
    pCodecContext-&amp;gt;frame_number,
    pFrame-&amp;gt;pts,
    pFrame-&amp;gt;pkt_dts,
    pFrame-&amp;gt;key_frame,
    pFrame-&amp;gt;coded_picture_number,
    pFrame-&amp;gt;display_picture_number
);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Finally we can save our decoded frame into a &lt;a href=&quot;https://en.wikipedia.org/wiki/Netpbm_format#PGM_example&quot; rel=&quot;nofollow&quot;&gt;simple gray image&lt;/a&gt;. The process is very simple, we'll use the &lt;code&gt;pFrame-&amp;gt;data&lt;/code&gt; where the index is related to the &lt;a href=&quot;https://en.wikipedia.org/wiki/YCbCr&quot; rel=&quot;nofollow&quot;&gt;planes Y, Cb and Cr&lt;/a&gt;, we just picked &lt;code&gt;0&lt;/code&gt; (Y) to save our gray image.&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-c&quot;&gt;
&lt;pre&gt;
&lt;span class=&quot;pl-en&quot;&gt;save_gray_frame&lt;/span&gt;(pFrame-&amp;gt;data[&lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;], pFrame-&amp;gt;linesize[&lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;], pFrame-&amp;gt;width, pFrame-&amp;gt;height, frame_filename);

&lt;span class=&quot;pl-k&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;pl-en&quot;&gt;save_gray_frame&lt;/span&gt;(&lt;span class=&quot;pl-k&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;char&lt;/span&gt; *buf, &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt; wrap, &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt; xsize, &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt; ysize, &lt;span class=&quot;pl-k&quot;&gt;char&lt;/span&gt; *filename)
{
    &lt;span class=&quot;pl-c1&quot;&gt;FILE&lt;/span&gt; *f;
    &lt;span class=&quot;pl-k&quot;&gt;int&lt;/span&gt; i;
    f = &lt;span class=&quot;pl-c1&quot;&gt;fopen&lt;/span&gt;(filename,&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;w&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;);
    &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; writing the minimal required header for a pgm file format&lt;/span&gt;
    &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; portable graymap format -&amp;gt; https://en.wikipedia.org/wiki/Netpbm_format#PGM_example&lt;/span&gt;
    &lt;span class=&quot;pl-c1&quot;&gt;fprintf&lt;/span&gt;(f, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;P5&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt;&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;pl-c1&quot;&gt;%d&lt;/span&gt;&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, xsize, ysize, &lt;span class=&quot;pl-c1&quot;&gt;255&lt;/span&gt;);

    &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;//&lt;/span&gt; writing line by line&lt;/span&gt;
    &lt;span class=&quot;pl-k&quot;&gt;for&lt;/span&gt; (i = &lt;span class=&quot;pl-c1&quot;&gt;0&lt;/span&gt;; i &amp;lt; ysize; i++)
        &lt;span class=&quot;pl-c1&quot;&gt;fwrite&lt;/span&gt;(buf + i * wrap, &lt;span class=&quot;pl-c1&quot;&gt;1&lt;/span&gt;, xsize, f);
    &lt;span class=&quot;pl-c1&quot;&gt;fclose&lt;/span&gt;(f);
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And voilà! Now we have a gray scale image with 2MB:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/generated_frame.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/generated_frame.png&quot; alt=&quot;saved frame&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Chapter 1 - syncing audio and video&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Be the player&lt;/strong&gt; - a young JS developer writing a new MSE video player.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Before we move to &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial#chapter-2---transcoding&quot;&gt;code a transcoding example&lt;/a&gt; let's talk about &lt;strong&gt;timing&lt;/strong&gt;, or how a video player knows the right time to play a frame.&lt;/p&gt;
&lt;p&gt;In the last example, we saved some frames that can be seen here:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/hello_world_frames/frame0.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/hello_world_frames/frame0.png&quot; alt=&quot;frame 0&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/hello_world_frames/frame1.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/hello_world_frames/frame1.png&quot; alt=&quot;frame 1&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/hello_world_frames/frame2.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/hello_world_frames/frame2.png&quot; alt=&quot;frame 2&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/hello_world_frames/frame3.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/hello_world_frames/frame3.png&quot; alt=&quot;frame 3&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/hello_world_frames/frame4.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/hello_world_frames/frame4.png&quot; alt=&quot;frame 4&quot;/&gt;&lt;/a&gt; &lt;a href=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/blob/master/img/hello_world_frames/frame5.png&quot; target=&quot;_blank&quot;&gt;&lt;img src=&quot;https://github.com/leandromoreira/ffmpeg-libav-tutorial/raw/master/img/hello_world_frames/frame5.png&quot; alt=&quot;frame 5&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;When we're designing a video player we need to &lt;strong&gt;play each frame at a given pace&lt;/strong&gt;, otherwise it would be hard to pleasantly see the video either because it's playing so fast or so slow.&lt;/p&gt;
&lt;p&gt;Therefore we need to introduce some logic to play each frame smoothly. For that matter, each frame has a &lt;strong&gt;presentation timestamp&lt;/strong&gt; (PTS) which is an increasing number factored in a &lt;strong&gt;timebase&lt;/strong&gt; that is a rational number (where the denominator is known as &lt;strong&gt;timescale&lt;/strong&gt;) divisible by the &lt;strong&gt;frame rate (fps)&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;It's easier to understand when we look at some examples, let's simulate some scenarios.&lt;/p&gt;
&lt;p&gt;For a &lt;code&gt;fps=60/1&lt;/code&gt; and &lt;code&gt;timebase=1/60000&lt;/code&gt; each PTS will increase &lt;code&gt;timescale / fps = 1000&lt;/code&gt; therefore the &lt;strong&gt;PTS real time&lt;/strong&gt; for each frame could be (supposing it started at 0):&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;frame=0, PTS = 0, PTS_TIME = 0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=1, PTS = 1000, PTS_TIME = PTS * timebase = 0.016&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=2, PTS = 2000, PTS_TIME = PTS * timebase = 0.033&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;For almost the same scenario but with a timebase equal to &lt;code&gt;1/60&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;frame=0, PTS = 0, PTS_TIME = 0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=1, PTS = 1, PTS_TIME = PTS * timebase = 0.016&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=2, PTS = 2, PTS_TIME = PTS * timebase = 0.033&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=3, PTS = 3, PTS_TIME = PTS * timebase = 0.050&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;For a &lt;code&gt;fps=25/1&lt;/code&gt; and &lt;code&gt;timebase=1/75&lt;/code&gt; each PTS will increase &lt;code&gt;timescale / fps = 3&lt;/code&gt; and the PTS time could be:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;frame=0, PTS = 0, PTS_TIME = 0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=1, PTS = 3, PTS_TIME = PTS * timebase = 0.04&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=2, PTS = 6, PTS_TIME = PTS * timebase = 0.08&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=3, PTS = 9, PTS_TIME = PTS * timebase = 0.12&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=24, PTS = 72, PTS_TIME = PTS * timebase = 0.96&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;li&gt;&lt;code&gt;frame=4064, PTS = 12192, PTS_TIME = PTS * timebase = 162.56&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Now with the &lt;code&gt;pts_time&lt;/code&gt; we can find a way to render this synched with audio &lt;code&gt;pts_time&lt;/code&gt; or with a system clock. The FFmpeg libav provides these info through its API:&lt;/p&gt;
&lt;p&gt;Just out of curiosity, the frames we saved were sent in a DTS order (frames: 1,6,4,2,3,5) but played at a PTS order (frames: 1,2,3,4,5). Also, notice how cheap are B-Frames in comparison to P or I-Frames.&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;LOG: AVStream-&amp;gt;r_frame_rate 60/1
LOG: AVStream-&amp;gt;time_base 1/60000
...
LOG: Frame 1 (type=I, size=153797 bytes) pts 6000 key_frame 1 [DTS 0]
LOG: Frame 2 (type=B, size=8117 bytes) pts 7000 key_frame 0 [DTS 3]
LOG: Frame 3 (type=B, size=8226 bytes) pts 8000 key_frame 0 [DTS 4]
LOG: Frame 4 (type=B, size=17699 bytes) pts 9000 key_frame 0 [DTS 2]
LOG: Frame 5 (type=B, size=6253 bytes) pts 10000 key_frame 0 [DTS 5]
LOG: Frame 6 (type=P, size=34992 bytes) pts 11000 key_frame 0 [DTS 1]
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2&gt;Chapter 2 - transcoding&lt;/h2&gt;
&lt;/article&gt;</description>
<pubDate>Sat, 20 Jan 2018 09:58:42 +0000</pubDate>
<dc:creator>dreampeppers99</dc:creator>
<og:image>https://avatars3.githubusercontent.com/u/55913?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>leandromoreira/ffmpeg-libav-tutorial</og:title>
<og:url>https://github.com/leandromoreira/ffmpeg-libav-tutorial</og:url>
<og:description>ffmpeg-libav-tutorial - [WIP] Learn FFmpeg libav the Hard Way</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/leandromoreira/ffmpeg-libav-tutorial</dc:identifier>
</item>
<item>
<title>A prime number whose binary representation looks like a giraffe</title>
<link>https://www.reddit.com/r/math/comments/7qpfls/does_there_exist_a_prime_number_whose/</link>
<guid isPermaLink="true" >https://www.reddit.com/r/math/comments/7qpfls/does_there_exist_a_prime_number_whose/</guid>
<description>&lt;p&gt;This subreddit is for discussion of mathematical links and questions. &lt;strong&gt;Please read the &lt;a href=&quot;http://www.reddit.com/r/math/wiki/faq&quot;&gt;FAQ&lt;/a&gt; before posting.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Homework problems, practice problems, and similar questions should be directed to &lt;a href=&quot;https://www.reddit.com/r/learnmath&quot;&gt;/r/learnmath&lt;/a&gt;, &lt;a href=&quot;https://www.reddit.com/r/homeworkhelp&quot;&gt;/r/homeworkhelp&lt;/a&gt; or &lt;a href=&quot;https://www.reddit.com/r/cheatatmathhomework&quot;&gt;/r/cheatatmathhomework&lt;/a&gt;. Do not &lt;strong&gt;ask or answer&lt;/strong&gt; this type of question in &lt;a href=&quot;https://www.reddit.com/r/math&quot;&gt;/r/math&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you're asking for help learning/understanding something mathematical, post in the &lt;em&gt;&lt;a href=&quot;http://www.reddit.com/r/math/search?q=Simple+Questions+author%3Aautomoderator+&amp;amp;restrict_sr=on&amp;amp;sort=new&amp;amp;t=all&quot;&gt;Simple Questions&lt;/a&gt;&lt;/em&gt; thread or &lt;a href=&quot;https://www.reddit.com/r/learnmath&quot;&gt;/r/learnmath&lt;/a&gt;. &lt;strong&gt;This includes reference requests&lt;/strong&gt; - also see our lists of recommended &lt;a href=&quot;https://www.reddit.com/r/math/wiki/faq#wiki_what_are_some_good_books_on_topic_x.3F&quot;&gt;books&lt;/a&gt; and &lt;a href=&quot;http://redd.it/2mkmk0&quot;&gt;free online resources&lt;/a&gt;. &lt;a href=&quot;https://www.reddit.com/r/math/comments/7i9t5y/book_recommendation_thread/&quot;&gt;Here&lt;/a&gt; is a more recent thread with book recommendations.&lt;/p&gt;
&lt;p&gt;If you are asking for a calculation to be made, please post to &lt;a href=&quot;https://www.reddit.com/r/askmath&quot;&gt;/r/askmath&lt;/a&gt; or &lt;a href=&quot;https://www.reddit.com/r/learnmath&quot;&gt;/r/learnmath&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you are asking for advice on choosing classes or career prospects, please post in the stickied Career &amp;amp; Education Questions thread.&lt;/p&gt;
&lt;p&gt;Image-only posts should be on-topic and should promote discussion; &lt;strong&gt;please do not post memes or similar content here&lt;/strong&gt;. Please be polite and civil when commenting, and always follow &lt;a href=&quot;http://www.reddit.com/help/reddiquette&quot;&gt;reddiquette&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;All posts and comments should be directly related to mathematics. &lt;strong&gt;General political debate is not permitted&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Filters: &lt;a href=&quot;http://ni.reddit.com/r/math/#ni&quot;&gt;Hide Image Posts&lt;/a&gt; &lt;a href=&quot;http://reddit.com/r/math/#nofilter&quot;&gt;Show All Posts&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Recurring Threads and Resources&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.reddit.com/r/math/wiki/everythingaboutx&quot;&gt;&lt;em&gt;Everything about X&lt;/em&gt;&lt;/a&gt; - every Wednesday&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&quot;http://www.reddit.com/r/math/search?q=what+are+you+working+on%3F+author%3Aautomoderator+&amp;amp;sort=new&amp;amp;restrict_sr=on&amp;amp;t=all&quot;&gt;What Are You Working On?&lt;/a&gt;&lt;/em&gt; - posted Mondays&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&quot;http://www.reddit.com/r/math/search?q=Career+and+Education+Questions+author%3Aautomoderator+&amp;amp;restrict_sr=on&amp;amp;sort=new&amp;amp;t=all&quot;&gt;Career and Education Q&amp;amp;A&lt;/a&gt;&lt;/em&gt; - Every other Thursday&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&quot;http://www.reddit.com/r/math/search?q=Simple+Questions+author%3Aautomoderator+&amp;amp;restrict_sr=on&amp;amp;sort=new&amp;amp;t=all&quot;&gt;Simple Questions&lt;/a&gt;&lt;/em&gt; - Posted Fridays&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&quot;http://redd.it/2mkmk0&quot;&gt;A Compilation of Free, Online Math Resources&lt;/a&gt;&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;a href=&quot;https://kiwiirc.com/client/irc.snoonet.org/math&quot;&gt;Click here to chat with us on IRC!&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Using LaTeX&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;To view LaTeX on reddit, install &lt;em&gt;one&lt;/em&gt; of the following:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://a.carapetis.com/mathjax_for_reddit.user.js&quot;&gt;MathJax userscript&lt;/a&gt; (install Greasemonkey or Tampermonkey first)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://chrome.google.com/webstore/detail/mbfninnbhfepghkkcgdnmfmhhbjmhggn&quot;&gt;TeXtheWorld Chrome extension&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://thewe.net/tex/textheworld7.user.js&quot;&gt;TeXtheWorld userscript&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;[; e^{\pi i} + 1 = 0 ;]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Post the equation above like this:&lt;/p&gt;
&lt;p&gt;`[&lt;em&gt;;&lt;/em&gt; e^{\pi i}+1=0 &lt;em&gt;;&lt;/em&gt;]`&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Using Superscripts and Subscripts&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;x*_sub_* makes x&lt;em&gt;&lt;em&gt;sub&lt;/em&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;x*`sup`* and x^(sup) both make x&lt;sup&gt;sup&lt;/sup&gt;&lt;/p&gt;
&lt;p&gt;x*_sub_`sup`* makes x&lt;em&gt;&lt;em&gt;sub&lt;/em&gt;&lt;code&gt;sup&lt;/code&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;x*`sup`_sub_* makes x&lt;em&gt;&lt;code&gt;sup&lt;/code&gt;&lt;em&gt;sub&lt;/em&gt;&lt;/em&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Useful Symbols&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Basic Math Symbols&lt;/p&gt;
&lt;p&gt;≠ ± ∓ ÷ × ∙ – √ ‰ ⊗ ⊕ ⊖ ⊘ ⊙ ≤ ≥ ≦ ≧ ≨ ≩ ≺ ≻ ≼ ≽ ⊏ ⊐ ⊑ ⊒ ² ³ °&lt;/p&gt;
&lt;p&gt;Geometry Symbols&lt;/p&gt;
&lt;p&gt;∠ ∟ ° ≅ ~ ‖ ⟂ ⫛&lt;/p&gt;
&lt;p&gt;Algebra Symbols&lt;/p&gt;
&lt;p&gt;≡ ≜ ≈ ∝ ∞ ≪ ≫ ⌊⌋ ⌈⌉ ∘∏ ∐ ∑ ⋀ ⋁ ⋂ ⋃ ⨀ ⨁ ⨂ 𝖕 𝖖 𝖗&lt;/p&gt;
&lt;p&gt;Set Theory Symbols&lt;/p&gt;
&lt;p&gt;∅ ∖ ∁ ↦ ↣ ∩ ∪ ⊆ ⊂ ⊄ ⊊ ⊇ ⊃ ⊅ ⊋ ⊖ ∈ ∉ ∋ ∌ ℕ ℤ ℚ ℝ ℂ ℵ ℶ ℷ ℸ 𝓟&lt;/p&gt;
&lt;p&gt;Logic Symbols&lt;/p&gt;
&lt;p&gt;¬ ∨ ∧ ⊕ → ← ⇒ ⇐ ↔ ⇔ ∀ ∃ ∄ ∴ ∵ ⊤ ⊥ ⊢ ⊨ ⫤ ⊣&lt;/p&gt;
&lt;p&gt;Calculus and Analysis Symbols&lt;/p&gt;
&lt;p&gt;∫ ∬ ∭ ∮ ∯ ∰ ∇ ∆ δ ∂ ℱ ℒ ℓ&lt;/p&gt;
&lt;p&gt;Greek Letters&lt;/p&gt;
&lt;h2&gt;𝛢𝛼 𝛣𝛽 𝛤𝛾 𝛥𝛿 𝛦𝜀𝜖 𝛧𝜁 𝛨𝜂 𝛩𝜃𝜗 𝛪𝜄 𝛫𝜅 𝛬𝜆 𝛭𝜇 𝛮𝜈 𝛯𝜉 𝛰𝜊 𝛱𝜋 𝛲𝜌 𝛴𝜎 𝛵𝜏 𝛶𝜐 𝛷𝜙𝜑 𝛸𝜒 𝛹𝜓 𝛺𝜔&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Other Subreddits&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Math&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tools&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Related fields&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 20 Jan 2018 08:28:43 +0000</pubDate>
<dc:creator>svenfaw</dc:creator>
<og:image>https://www.redditstatic.com/icon.png</og:image>
<og:description>669 points and 104 comments so far on reddit</og:description>
<og:title>Does there exist a prime number whose representation on a phone screen looks like a giraffe? • r/math</og:title>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.reddit.com/r/math/comments/7qpfls/does_there_exist_a_prime_number_whose/</dc:identifier>
</item>
<item>
<title>NSA deleted surveillance data it pledged to preserve</title>
<link>https://www.politico.com/story/2018/01/19/nsa-deletes-surveillance-data-351730</link>
<guid isPermaLink="true" >https://www.politico.com/story/2018/01/19/nsa-deletes-surveillance-data-351730</guid>
<description>&lt;div class=&quot; story-intro format-s&quot; itemscope=&quot;&quot; itemprop=&quot;mainEntityOfPage&quot; itemtype=&quot;http://schema.org/Article&quot; readability=&quot;32.564935064935&quot;&gt;

&lt;span itemprop=&quot;image&quot; itemscope=&quot;&quot; itemtype=&quot;https://schema.org/ImageObject&quot;/&gt;
&lt;div class=&quot;fig-graphic&quot;&gt;&lt;img src=&quot;https://static.politico.com/dims4/default/a9770ff/2147483647/resize/1160x%3E/quality/90/?url=https%3A%2F%2Fstatic.politico.com%2F47%2F05%2F7c9c962c4d479d0b52e18c9413b7%2F180119-nsa-1160.jpg&quot; alt=&quot;NSA headquarters is pictured. | Getty Images &quot; title=&quot;NSA headquarters is pictured. | Getty Images &quot;/&gt;&lt;/div&gt;
&lt;p&gt;Since 2007, the NSA has been under court orders to preserve data about some of its surveillance efforts. | Getty Images&lt;/p&gt;
&lt;div class=&quot;summary&quot; readability=&quot;5.5851063829787&quot;&gt;
&lt;header class=&quot;&quot; readability=&quot;2&quot;&gt;
&lt;p class=&quot;subhead&quot;&gt;The agency tells a federal judge that it is investigating and 'sincerely regrets its failure.'&lt;/p&gt;
&lt;/header&gt;&lt;footer class=&quot;meta&quot;&gt;
&lt;p class=&quot;byline&quot;&gt;By &lt;a href=&quot;https://www.politico.com/staff/josh-gerstein&quot; rel=&quot;author&quot; class=&quot;url fn&quot; target=&quot;_top&quot;&gt;JOSH GERSTEIN&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;timestamp&quot;&gt;&lt;time itemprop=&quot;datePublished&quot; datetime=&quot;2018-01-19 19:39:25&quot;&gt;01/19/2018 07:39 PM EST&lt;/time&gt;&lt;/p&gt;
&lt;/footer&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;The National Security Agency destroyed surveillance data it pledged to preserve in connection with pending lawsuits and apparently never took some of the steps it told a federal court it had taken to make sure the information wasn’t destroyed, according to recent court filings.&lt;/p&gt;
&lt;p&gt;Word of the NSA’s foul-up is emerging just as Congress has extended for six years the legal authority the agency uses for much of its surveillance work conducted through U.S. internet providers and tech firms. President Donald Trump signed that measure into law Friday.&lt;/p&gt;
&lt;p class=&quot;story-continued&quot;&gt;Story Continued Below&lt;/p&gt;

&lt;p&gt;Since 2007, the NSA has been under court orders to preserve data about certain of its surveillance efforts that came under legal attack following disclosures that President George W. Bush ordered warrantless wiretapping of international communications after the 2001 terrorist attacks on the U.S. In addition, the agency has made a series of representations in court over the years about how it is complying with its duties.&lt;/p&gt;
&lt;p&gt;However, the NSA told U.S. District Court Judge Jeffrey White in a filing on Thursday night and another little-noticed submission last year that the agency did not preserve the content of internet communications intercepted between 2001 and 2007 under the program Bush ordered. To make matters worse, backup tapes that might have mitigated the failure were erased in 2009, 2011 and 2016, the NSA said.&lt;/p&gt;
&lt;aside class=&quot;story-related cl-l db&quot;&gt;&lt;aside class=&quot;content-group inline-module-playbook&quot;&gt;&lt;section class=&quot;speedbump layout-bi&quot;&gt;&lt;div class=&quot;speedbump-item pos-alpha&quot;&gt;
&lt;div class=&quot;spotlight spotlight--flex&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;summary link-alt fx1&quot; readability=&quot;8&quot;&gt;
&lt;h2&gt;The most reliable politics newsletter.&lt;/h2&gt;
&lt;p&gt;Sign up for POLITICO Playbook and get the latest news, every morning — in your inbox.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;speedbump-item pos-beta&quot;&gt;
&lt;div class=&quot;js-tealium-newsletter&quot; data-subscription-module=&quot;newsletter_inline_standard_Playbook - POLITICO&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;dari-frame dari-frame-loaded&quot; name=&quot;inline-module-playbook-full-0000014f-1646-d88f-a1cf-5f46b7bd0000&quot; data-insertion-mode=&quot;replace&quot; data-extra-form-data=&quot;_frame.path=5c388a2e37218b65f1db610df3d5c42a&amp;amp;_frame.name=inline-module-playbook-full-0000014f-1646-d88f-a1cf-5f46b7bd0000&quot; readability=&quot;8&quot;&gt;

&lt;p class=&quot;legal-disclaimer&quot;&gt;By signing up you agree to receive email newsletters or alerts from POLITICO. You can unsubscribe at any time.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;/aside&gt;&lt;/aside&gt;&lt;p&gt;“The NSA sincerely regrets its failure to prevent the deletion of this data,” NSA’s deputy director of capabilities, identified publicly as “Elizabeth B.,” wrote in &lt;a href=&quot;https://www.politico.com/f/?id=00000161-10d3-d990-af71-f8f7a0010001&quot; target=&quot;_blank&quot;&gt;&lt;u&gt;a declaration filed in October&lt;/u&gt;&lt;/a&gt;. “NSA senior management is fully aware of this failure, and the Agency is committed to taking swift action to respond to the loss of this data.”&lt;/p&gt;
&lt;p&gt;In &lt;a href=&quot;https://www.politico.com/f/?id=00000161-10d4-d990-af71-f8f547280001&quot; target=&quot;_blank&quot;&gt;&lt;u&gt;the update Thursday&lt;/u&gt;&lt;/a&gt;, another NSA official said the data were deleted during a broad, housecleaning effort aimed at making space for incoming information.&lt;/p&gt;
&lt;p&gt;“The NSA’s review to date reveals that this [Presidential Surveillance Program] Internet content data was not specifically targeted for deletion,” wrote the official, identified as “Dr. Mark O,” “but rather the PSP Internet content data matched criteria that were broadly used to delete data of a certain type … in response to mission requirements to free-up space and improve performance of the [redacted] back-up system. The NSA is still investigating how these deletions came about given the preservation obligations extant at the time. The NSA, however, has no reason to believe at this time that PSP Internet content data was specifically targeted for deletion.”&lt;/p&gt;
&lt;p&gt;An NSA spokesman declined to comment on Friday.&lt;/p&gt;
&lt;p&gt;Defiance of a court order can result in civil or criminal contempt charges, as well as sanctions against the party responsible. So far, no one involved appears to have asked White to impose any punishment or sanction on the NSA over the newly disclosed episodes, although the details of what happened are still emerging.&lt;/p&gt;
&lt;p&gt;“It’s really disappointing,” said David Greene, an attorney with the Electronic Frontier Foundation, which has been leading the prolonged litigation over the program in federal court in San Francisco. “The obligation’s been in place for a really long time now. … We had a major dust-up about it just a few years ago. This is definitely something that should’ve been found sooner.”&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.politico.com/blogs/under-the-radar/2014/03/judge-orders-nsa-to-preserve-call-data-184873&quot; target=&quot;_blank&quot;&gt;&lt;u&gt;The last legal showdown over the issue&lt;/u&gt;&lt;/a&gt; may have actually compounded the NSA’s problems. In May 2014, an NSA official known as “Miriam P.” assured the court that the data were safe.&lt;/p&gt;
&lt;p&gt;The NSA is “preserving magnetic/digital tapes of the Internet content intercepted under the [PSP] since the inception of the program,” she wrote, adding that “the NSA has stored these tapes in the offices of its General Counsel.”&lt;/p&gt;
&lt;p&gt;The agency now says, “regrettably,” that the statement “may have been only partially accurate when made.”&lt;/p&gt;
&lt;p&gt;The latest NSA filing says the ongoing investigation indicates that officials did a “physical inspection” in 2014 to confirm the tapes’ presence in the counsel’s office storage space. However, “those tapes largely concerned metadata,” not the content of communications the NSA intercepted.&lt;/p&gt;
&lt;aside class=&quot;story-related&quot;&gt;&lt;article class=&quot;story-frag format-sm&quot;&gt;&lt;div class=&quot;fig-graphic&quot;&gt;&lt;a href=&quot;https://www.politico.com/story/2018/01/19/twitter-users-russian-trolls-437247&quot; target=&quot;_top&quot; data-tracking=&quot;mpos=inside-body&amp;amp;mid=parentheticalmodule&amp;amp;lindex=Unknown&amp;amp;lcol=Unknown&quot; class=&quot;js-tealium-tracking&quot;&gt;&lt;img data-lazy-img=&quot;https://static.politico.com/dims4/default/9ac1a69/2147483647/legacy_thumbnail/90x49%3E/quality/90/?url=http%3A%2F%2Fs3-origin-images.politico.com%2F2013%2F09%2F13%2F130913_twitter_rtr_605.jpg&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==&quot; alt=&quot;The Twitter logo is pictured. | AP Photo &quot; data-size=&quot;promo_xsmall_rectangle&quot;/&gt;&lt;/a&gt;&lt;/div&gt;

&lt;/article&gt;&lt;/aside&gt;&lt;p&gt;The NSA says the impact of the misstatement and the deletion on the litigation should be “limited” because it has found back-ups of some content from about four months in 2003 and because it has a larger set of metadata from 2004 to 2007. That metadata should give a strong indication of whether the plaintiffs in the suits had their communications captured by the NSA, even if the communications themselves may be lost, the filings indicate. The NSA is also using “extraordinary” efforts to recover the data from tapes that were reused, it said.&lt;/p&gt;
&lt;p&gt;Asked why the Electronic Frontier Foundation hasn’t publicized the episode, Greene said his group was waiting for the NSA to turn over data that the plaintiffs in the suits have demanded before considering next steps regarding the spy agency’s failure to maintain the records it said it was keeping.&lt;/p&gt;
&lt;p&gt;“We don't know exactly how bad it is,” the lawyer said, adding: “Even if you take them at their word that this was just an honest mistake, what it shows is despite your best intention to comply with important restrictions, it can be really difficult to implement. … It shows that with the really tremendous volume of information they’re vacuuming up, it is impossible to be meticulous.”&lt;br/&gt;&lt;/p&gt;

&lt;div class=&quot;story-supplement&quot;&gt;
&lt;aside class=&quot;content-categories&quot;&gt;&lt;h6&gt;This article tagged under:&lt;/h6&gt;
&lt;/aside&gt;&lt;/div&gt;
&lt;div class=&quot;&quot;&gt;
&lt;aside class=&quot;content-group&quot;&gt;&lt;div class=&quot;story-supplement&quot;&gt;
&lt;div class=&quot;spotlight&quot; readability=&quot;6.0165289256198&quot;&gt;
&lt;div class=&quot;summary fs-i&quot; readability=&quot;7.7355371900826&quot;&gt;
&lt;p&gt;Missing out on the latest scoops? Sign up for &lt;a href=&quot;http://www.politico.com/subscribe/playbook?cid=su_stft_pb&quot; target=&quot;_blank&quot;&gt;POLITICO Playbook&lt;/a&gt; and get the latest news, every morning — in your inbox.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/aside&gt;&lt;/div&gt;


</description>
<pubDate>Sat, 20 Jan 2018 04:10:45 +0000</pubDate>
<dc:creator>tonyztan</dc:creator>
<og:title>NSA deleted surveillance data it pledged to preserve</og:title>
<og:description>The agency tells a federal judge that it is investigating and 'sincerely regrets its failure.'</og:description>
<og:type>article</og:type>
<og:url>http://politi.co/2BfbiXW</og:url>
<og:image>https://static.politico.com/47/05/7c9c962c4d479d0b52e18c9413b7/180119-nsa-1160.jpg</og:image>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.politico.com/story/2018/01/19/nsa-deletes-surveillance-data-351730</dc:identifier>
</item>
<item>
<title>Blockchains from a Distributed Computing Perspective [pdf]</title>
<link>http://cs.brown.edu/courses/csci2952-a/papers/perspective.pdf</link>
<guid isPermaLink="true" >http://cs.brown.edu/courses/csci2952-a/papers/perspective.pdf</guid>
<description>&lt;a href=&quot;http://cs.brown.edu/courses/csci2952-a/papers/perspective.pdf&quot;&gt;Download PDF&lt;/a&gt;</description>
<pubDate>Sat, 20 Jan 2018 01:32:51 +0000</pubDate>
<dc:creator>rejectedalot</dc:creator>
<og:title>NSA deleted surveillance data it pledged to preserve</og:title>
<og:description>The agency tells a federal judge that it is investigating and 'sincerely regrets its failure.'</og:description>
<og:type>article</og:type>
<og:url>http://politi.co/2BfbiXW</og:url>
<og:image>https://static.politico.com/47/05/7c9c962c4d479d0b52e18c9413b7/180119-nsa-1160.jpg</og:image>
<dc:format>application/pdf</dc:format>
<dc:identifier>http://cs.brown.edu/courses/csci2952-a/papers/perspective.pdf</dc:identifier>
</item>
<item>
<title>Atari Tempest: Dave Theurer’s Masterpiece</title>
<link>https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/</link>
<guid isPermaLink="true" >https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/</guid>
<description>&lt;p&gt;It’s a brave man who tries to criticize Atari’s seminal groundbreaking game &lt;em&gt;Tempest&lt;/em&gt;. More than any other classic arcade game, &lt;em&gt;Tempest&lt;/em&gt; hit the arcade scene like a juggernaut. Nothing like it had been seen before, and arguably, nothing has come close since.&lt;/p&gt;
&lt;p&gt;As Atari’s first full colour vector game, &lt;em&gt;Tempest&lt;/em&gt; not only broke new technical ground, reinforcing Atari’s position at the top of the arcade development scene, but also threw something completely new at the playing public.&lt;/p&gt;
&lt;p&gt;&lt;img data-attachment-id=&quot;24435&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/tempest-attract-mode/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg?w=1000&quot; data-orig-size=&quot;837,536&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;tempest attract mode&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg?w=1000?w=300&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg?w=1000?w=837&quot; class=&quot; size-full wp-image-24435 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg?w=1000&quot; alt=&quot;tempest attract mode&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg 837w, https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg?w=128 128w, https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg?w=300 300w, https://missilecommand.files.wordpress.com/2018/01/tempest-attract-mode.jpg?w=768 768w&quot; sizes=&quot;(max-width: 837px) 100vw, 837px&quot;/&gt;&lt;/p&gt;
&lt;p&gt;This week, I wanted to take a more detailed look at how the game was made. Its creator, Dave Theurer had just finished up &lt;em&gt;Missile Command&lt;/em&gt;, having previously worked on Atari’s &lt;em&gt;Four Player Soccer&lt;/em&gt; game. Now highly respected internally at the company, he had very quickly been catapulted to Superstar Programmer status.&lt;/p&gt;
&lt;p&gt;So much so that Atari’s arcade division had an unwritten rule known as Theurer’s Law, which stated that “No designer gets his/her first game published”. It was named after Theurer (rather perversely), as he was the only designer up to that point to have his first game released – something normally unheard of, as most programmers would stumble at their first attempt. That game was none other than the illustrious &lt;em&gt;Missile Command&lt;/em&gt;, a huge hit for Atari, eventually selling over 14,000 upright units.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24485&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/dave-theurer-2/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg?w=404&amp;amp;h=548&quot; data-orig-size=&quot;632,857&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;Tony T&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;1516366378&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Dave Theurer 2&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg?w=404&amp;amp;h=548?w=221&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg?w=404&amp;amp;h=548?w=632&quot; class=&quot; wp-image-24485 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg?w=404&amp;amp;h=548&quot; alt=&quot;Dave Theurer 2&quot; width=&quot;404&quot; height=&quot;548&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg?w=404&amp;amp;h=548 404w, https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg?w=71&amp;amp;h=96 71w, https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg?w=221&amp;amp;h=300 221w, https://missilecommand.files.wordpress.com/2018/01/dave-theurer-2.jpg 632w&quot; sizes=&quot;(max-width: 404px) 100vw, 404px&quot;/&gt;Dave Theurer
&lt;p&gt;Probably more from his own sense of drive and desire to succeed, Dave found himself under pressure to produce another hit game. After the success of &lt;em&gt;Missile Command&lt;/em&gt;, and its rise to cult status amongst the playing public and internally at Atari, what was going to be next? Deciding on what to work on would be largely his own decision, and at Atari, there were two ways of going about choosing an idea for a game:&lt;/p&gt;
&lt;p&gt;Programmers could either come up with their own scope for a game, and literally pitch it to the management of Atari’s Coin Operated Division for approval; or pick an idea from an already-approved catalogue of ideas. This catalogue was an actual physical book, full of generic ideas that came out of regular brainstorming sessions, where the whole coin-op team would camp down someplace away from the office, and discuss new proposals for upcoming games that they thought might work.&lt;/p&gt;
&lt;p&gt;Dave recalls a place an hour away from Atari’s Sunnyvale offices in Santa Cruz County called &lt;em&gt;Pajero Dunes&lt;/em&gt; as being a particularly favourite location for these away-day sessions.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24477&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/atari-brainstorming-session/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=546&amp;amp;h=431&quot; data-orig-size=&quot;2000,1581&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Atari Brainstorming session&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=546&amp;amp;h=431?w=300&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=546&amp;amp;h=431?w=2000&quot; class=&quot; wp-image-24477 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=546&amp;amp;h=431&quot; alt=&quot;Atari Brainstorming session&quot; width=&quot;546&quot; height=&quot;431&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=546&amp;amp;h=431 546w, https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=1090&amp;amp;h=862 1090w, https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=121&amp;amp;h=96 121w, https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=300&amp;amp;h=237 300w, https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=768&amp;amp;h=607 768w, https://missilecommand.files.wordpress.com/2018/01/atari-brainstorming-session.jpg?w=1024&amp;amp;h=809 1024w&quot; sizes=&quot;(max-width: 546px) 100vw, 546px&quot;/&gt;An Atari CoinOp brainstroming session. Photo: Ed Rotberg
&lt;p&gt;Dave picked an idea from the catalogue simply titled “first person space invaders”. After a couple of weeks intensive programming, he had built a demo which was indeed a first person shooter. After presenting it to management, the resounding feedback was that the game wasn’t much fun. Dave recounts:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The initial gameplay was to be simply a ‘First Person Space Invaders’. I got it up and running, but it wasn’t much fun. Too much like Space Invaders (surprise surprise). So after the review they said do you want to kill it? Or have you got any other ideas? I said ‘I’ve got this nightmare I have, where monsters are coming out of a hole in the ground and I’ve got to kill them before they get to the surface and kill me. Let me just take the first person space invader game and wrap them onto the surface of a hole (tube) in the ground’.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Trusting his judgement, management gave Theurer the green light he was looking for. But there were further problems with his next iteration, once he’d tweaked the original brief:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I first tried rotating the tube instead of the flipper, but that made everybody want to puke.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Clearly not an ideal situation for a video game intended for public release! Having the whole tube rotating was also a lot of work to program, and put a lot of stress on the code. Thinking laterally, Theurer came up with a simple solution: create the tube shapes as a static playfield, and have the player’s yellow “flipper” character move around the upper edge of the vector tube structure. The mechanic turned out to be fun and the feeling of induced nausea was no longer an issue.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24531&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/tempest-screens/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=607&amp;amp;h=629&quot; data-orig-size=&quot;1131,1173&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;Tony T&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;1516369172&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Tempest Screens&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=607&amp;amp;h=629?w=289&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=607&amp;amp;h=629?w=1131&quot; class=&quot; wp-image-24531 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=607&amp;amp;h=629&quot; alt=&quot;Tempest Screens&quot; width=&quot;607&quot; height=&quot;629&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=607&amp;amp;h=629 607w, https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=93&amp;amp;h=96 93w, https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=289&amp;amp;h=300 289w, https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=768&amp;amp;h=797 768w, https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg?w=1024&amp;amp;h=1062 1024w, https://missilecommand.files.wordpress.com/2018/01/tempest-screens.jpg 1131w&quot; sizes=&quot;(max-width: 607px) 100vw, 607px&quot;/&gt;Tempest’s intricate colour wireframe designs were like nothing before
&lt;p&gt;With that problem solved, he knuckled down to building the guts of the game. Working at Atari coin-op was both fun and incredibly pressurised. Dress-code was as informal as it coud possibly be (shorts and t-shirts were usually the order of the day), and, there were opportunities to relax during regular Friday night parties and get-togethers.&lt;/p&gt;
&lt;p&gt;But the hedonistic lifestyle of an early 80s Atari programmer had many downsides. Huge amounts of overtime were not unusual to meet to continuing demand from management who had an eye on release schedules and sales targets. Dave often referenced the intense nature of the work back then, often citing sleeping at the office and working through the night to get his game to where he felt it needed to be. Prior to having a game ready for a field test, Theurer describes times where he would go three or four days without sleep. A normal 24 hour day would simply go out the window. The impact on personal lives, Dave’s included, was sometimes catastrophic.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24484&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/dave-theurer-1/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg?w=421&amp;amp;h=520&quot; data-orig-size=&quot;657,811&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;Tony T&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;1516366316&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Dave Theurer 1&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg?w=421&amp;amp;h=520?w=243&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg?w=421&amp;amp;h=520?w=657&quot; class=&quot; wp-image-24484 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg?w=421&amp;amp;h=520&quot; alt=&quot;Dave Theurer 1&quot; width=&quot;421&quot; height=&quot;520&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg?w=421&amp;amp;h=520 421w, https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg?w=78&amp;amp;h=96 78w, https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg?w=243&amp;amp;h=300 243w, https://missilecommand.files.wordpress.com/2018/01/dave-theurer-1.jpg 657w&quot; sizes=&quot;(max-width: 421px) 100vw, 421px&quot;/&gt;Dave Theurer sporting “Atari casual wear”. Photo: GDC Awards
&lt;p&gt;The culture within Atari Coin-Op was one of intense competition – competition for your game to be “hot” and ready to roll within the time pressures imposed by the company.&lt;/p&gt;
&lt;p&gt;The hardware he was trying to use, and the constraints of the creative process did little to ease matters. Theurer had to work within what seems now a very antiquated and disjointed programming work stream.&lt;/p&gt;
&lt;p&gt;As the main programmer, Theurer was ultimately responsible for the design of the game. In the case of &lt;em&gt;Tempest&lt;/em&gt;, that meant everything from the graphics, sounds, and the way the game actually played – this was a far cry from the hundreds of people who will work on a single video game today. Alongside him would be a hardware specialist who would design a unique new piece of hardware the game (a vector generator and mathbox for &lt;em&gt;Tempest&lt;/em&gt;), and under him would be a technician, whose primary job would be to keep the hardware working as it was being developed. Attached to the team would be a project manager who would take care of general internal red tape and co-ordinate cabinet designs, manuals, artwork and field tests with the other departments.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24505&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/tempest-promo-shot/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg?w=422&amp;amp;h=556&quot; data-orig-size=&quot;755,995&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;Tony T&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;1516367116&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Tempest Promo Shot&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg?w=422&amp;amp;h=556?w=228&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg?w=422&amp;amp;h=556?w=755&quot; class=&quot; wp-image-24505 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg?w=422&amp;amp;h=556&quot; alt=&quot;Tempest Promo Shot&quot; width=&quot;422&quot; height=&quot;556&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg?w=422&amp;amp;h=556 422w, https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg?w=73&amp;amp;h=96 73w, https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg?w=228&amp;amp;h=300 228w, https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg 755w&quot; sizes=&quot;(max-width: 422px) 100vw, 422px&quot;/&gt;Atari promotional material for Tempest. Image courtesy of Strong Museum, Rochester, NY
&lt;p&gt;So armed with nothing more than a vision of a game Theurer would lock himself away in his office and program for hours on end:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The programmer had to do everything: Write the whole operating system from scratch, design all the graphics, write the tools to do the graphics, create sound tools, and do the sound design – everything from scratch for every game….I’d write the code on programming sheets and turn it in to the typists who’d type them in to a DEC computer, then give us a tape with the resulting compiled/linked program. We’d then take that to a blue box [which used the FORTH programming language] for debugging. We’d mark changes to the code on a listing, give it back to the typists who’d edit our files and give us a new tape. Repeat ad infinitum.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I guess the technicalities of what he describes are not important here, but even to a layman, that process is hardly what you would call slick. The debugging process was done at the cabinet itself, leaving desks clear for actual writing of code – with pencil and paper. But its worth remembering that despite itself, this way of working created some of the most iconic arcade games ever released.&lt;/p&gt;
&lt;a href=&quot;http://arcarc.xmission.com/Web%20Archives/Andys%20Arcade%20(Sep-09-2003)/arc/atari/tempest/tempest_game_specifications.pdf&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;img data-attachment-id=&quot;24463&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/tempest-design-document/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=477&amp;amp;h=609&quot; data-orig-size=&quot;810,1034&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;Tony T&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;1516364711&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Tempest Design Document&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=477&amp;amp;h=609?w=235&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=477&amp;amp;h=609?w=810&quot; class=&quot; wp-image-24463 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=477&amp;amp;h=609&quot; alt=&quot;Tempest Design Document&quot; width=&quot;477&quot; height=&quot;609&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=477&amp;amp;h=609 477w, https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=75&amp;amp;h=96 75w, https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=235&amp;amp;h=300 235w, https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg?w=768&amp;amp;h=980 768w, https://missilecommand.files.wordpress.com/2018/01/tempest-design-document.jpg 810w&quot; sizes=&quot;(max-width: 477px) 100vw, 477px&quot;/&gt;&lt;/a&gt;Dave Theurer’s original Specification document for Tempest. Click the image to view the whole thing
&lt;p&gt;The hardware in particular caused many headaches along the way. &lt;em&gt;Tempest&lt;/em&gt; was using brand new components, especially in the new Wells Gardner Quadra-Scan 6100 vector monitor – a world’s first that was capable of producing vector graphics that were multi-coloured. Theurer recalls some of the issues involved in working with what was essentially prototype hardware:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I remember one time in the lab, the monitor stopped working and we looked up under the [chassis] circuit board and it had got so hot, that four of five of the components had de-soldered themselves and fallen out onto the table.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Aware that he was programming routines never seen before in video games, Theurer had to be conscious of the demands he was placing on the 6100 hardware. His tech guy kept up as best he could, but as any arcade operator or collector will tell you, the reliability of Tempest’s hardware leaves a lot to be desired.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Tempest was the first game to use the color vector generator. I’m sure there were things they discovered in production after doing Tempest and a few other games that enabled them to protect the monitors and make them last longer. Maybe the monitor was vulnerable to being destroyed by the software, and I did things to it that the other programs didn’t, like when you blast down the tube, and vectors get drawn all the way out past the edge. Perhaps that fried it!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hardware challenges aside, Theurer knew his game was going to be “hot” before it was even field-tested. Hoards of staff would converge on his lab to play the game. The feedback was irrelevant – everyone wanted to play the game, which told him everything he needed to know, and he often had to shepherd people out just to get to back to work on &lt;em&gt;Tempest&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;A footnote of sorts here; we know the game as &lt;em&gt;Tempest&lt;/em&gt;, but it was initially code-named &lt;em&gt;Aliens Vector&lt;/em&gt;, and then went by a different name for some time – &lt;em&gt;Vortex&lt;/em&gt;. &lt;a href=&quot;http://arcarc.xmission.com/Web%20Archives/Andys%20Arcade%20(Sep-09-2003)/arc/atari/meetings/08.jpg&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Internal documents from Atari make reference to &lt;em&gt;Vortex&lt;/em&gt; as late as June 1981&lt;/a&gt; – just four months before its final release date. The Vortex ROM has been released as an add-on kit to the main Tempest code – &lt;a href=&quot;https://www.youtube.com/watch?v=CFY4Zsv7_bA&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;video here&lt;/a&gt;. Although largely identical to the final game, it’s still interesting to watch.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24437&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/vortex-art/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=514&amp;amp;h=520&quot; data-orig-size=&quot;1064,1077&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;Tony T&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;1516360655&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Vortex Art&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=514&amp;amp;h=520?w=296&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=514&amp;amp;h=520?w=1064&quot; class=&quot; wp-image-24437 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=514&amp;amp;h=520&quot; alt=&quot;Vortex Art&quot; width=&quot;514&quot; height=&quot;520&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=514&amp;amp;h=520 514w, https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=1028&amp;amp;h=1040 1028w, https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=95&amp;amp;h=96 95w, https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=296&amp;amp;h=300 296w, https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=768&amp;amp;h=777 768w, https://missilecommand.files.wordpress.com/2018/01/vortex-art.jpg?w=1024&amp;amp;h=1037 1024w&quot; sizes=&quot;(max-width: 514px) 100vw, 514px&quot;/&gt;The original Tempest artwork showing Vortex as the working title
&lt;p&gt;With the game almost ready by fall 1981, the creative artists at Atari designed the concept artwork that we now know and love. The monster characters add to the feel of the game and give the player another hook upon which to latch on to – adding to the futuristic looking bespoke angular upright cabinet, the result was something special:&lt;/p&gt;
&lt;img data-attachment-id=&quot;24455&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/tempest-cabinet/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=531&amp;amp;h=531&quot; data-orig-size=&quot;800,800&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Tempest Cabinet&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=531&amp;amp;h=531?w=300&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=531&amp;amp;h=531?w=800&quot; class=&quot; wp-image-24455 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=531&amp;amp;h=531&quot; alt=&quot;Tempest Cabinet&quot; width=&quot;531&quot; height=&quot;531&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=531&amp;amp;h=531 531w, https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=96&amp;amp;h=96 96w, https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=300&amp;amp;h=300 300w, https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg?w=768&amp;amp;h=768 768w, https://missilecommand.files.wordpress.com/2018/01/tempest-cabinet.jpg 800w&quot; sizes=&quot;(max-width: 531px) 100vw, 531px&quot;/&gt;The upright Tempest cabinet with 19″ colour vector monitor
&lt;p&gt;Although known for his ability to overcome complex software problems, and create cutting edge video games, it’s important to remember that Theurer still kept his eyes on the prize; which was Atari’s mantra of creating great games that were fun to play:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It was just so exciting working on these new games. All my life I loved explosions. When I went to college I was a chemistry major because I wanted to do something where I could make explosions. When I was a kid I had a chemistry set and I’d blow stuff up all the time. Eventually, you learn that you can’t really do that in real life, so the next best thing is to do it on the screen, so here I was blowing stuff up on the screen. Simulating real life is fun too. It’s almost like you can create your own universe. Well, you are creating your own universe. That’s rewarding, to see something come alive.&lt;/p&gt;
&lt;p&gt;I want to design [games] for a guy who’s totally frazzled by his job and needs a way to temporarily escape. There’s a certain class of games . . . where you just get into a trance when you’re playing them. As long as you’re in this trance you’ll do fine.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Demand for the game was unprecedented, and although it suffered from hardware issues (and a software bug inadvertently created by Theurer, where a 12% chance of 40 credits being obtained by a player scoring 170,000 points in one game can occur), &lt;em&gt;Tempest&lt;/em&gt; turned out to be a bigger success than &lt;em&gt;Missile Command&lt;/em&gt;. Over 25,000 uprights, 2,000 cabarets and 1,600 cocktail machines were produced.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24451&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/tempest-flyer-3/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=507&amp;amp;h=654&quot; data-orig-size=&quot;850,1097&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Tempest Flyer 3&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=507&amp;amp;h=654?w=232&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=507&amp;amp;h=654?w=850&quot; class=&quot;alignnone wp-image-24451&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=507&amp;amp;h=654&quot; alt=&quot;Tempest Flyer 3&quot; width=&quot;507&quot; height=&quot;654&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=507&amp;amp;h=654 507w, https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=74&amp;amp;h=96 74w, https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=232&amp;amp;h=300 232w, https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg?w=768&amp;amp;h=991 768w, https://missilecommand.files.wordpress.com/2018/01/tempest-flyer-3.jpg 850w&quot; sizes=&quot;(max-width: 507px) 100vw, 507px&quot;/&gt;Atari hyped up the new technology found in Tempest – this would be the forebearer of other colour vector titles to follow – Gravitar, Black Widow, Space Duel and Major Havoc
&lt;p&gt;Today, &lt;em&gt;Tempest&lt;/em&gt; remains a stunning achievement. Collectors are able to add reliability to the monitor with newly designed hardware housing updated parts. The game is a jolt to the senses, and the glow of the vectors produced are hypnotic after extended play.&lt;/p&gt;
&lt;p&gt;And the original arcade version still has active players. As recently as last year, people are still breaking world records on &lt;em&gt;Tempest&lt;/em&gt;. Some great footage here showing the long standing WR being taken down:&lt;/p&gt;
&lt;div class=&quot;jetpack-video-wrapper&quot;&gt;&lt;span class=&quot;embed-youtube&quot;&gt;&lt;iframe class=&quot;youtube-player&quot; type=&quot;text/html&quot; width=&quot;1000&quot; height=&quot;593&quot; src=&quot;https://www.youtube.com/embed/TgZc7G8AtVU?version=3&amp;amp;rel=1&amp;amp;fs=1&amp;amp;autohide=2&amp;amp;showsearch=0&amp;amp;showinfo=1&amp;amp;iv_load_policy=1&amp;amp;wmode=transparent&quot; allowfullscreen=&quot;true&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;That it is able to hold one’s attention even today, lays testament to Theurer’s uncanny ability to take hardware that no one had ever used before, and create a game with depth and a unique beauty that is actually fun to play.&lt;/p&gt;
&lt;img data-attachment-id=&quot;24514&quot; data-permalink=&quot;https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/play-tempest-flyer/&quot; data-orig-file=&quot;https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=507&amp;amp;h=656&quot; data-orig-size=&quot;850,1100&quot; data-comments-opened=&quot;1&quot; data-image-meta=&quot;{&amp;quot;aperture&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;credit&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;camera&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;caption&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;created_timestamp&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;copyright&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;focal_length&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;iso&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;shutter_speed&amp;quot;:&amp;quot;0&amp;quot;,&amp;quot;title&amp;quot;:&amp;quot;&amp;quot;,&amp;quot;orientation&amp;quot;:&amp;quot;0&amp;quot;}&quot; data-image-title=&quot;Play Tempest Flyer&quot; data-image-description=&quot;&quot; data-medium-file=&quot;https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=507&amp;amp;h=656?w=232&quot; data-large-file=&quot;https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=507&amp;amp;h=656?w=850&quot; class=&quot; wp-image-24514 aligncenter&quot; src=&quot;https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=507&amp;amp;h=656&quot; alt=&quot;Play Tempest Flyer&quot; width=&quot;507&quot; height=&quot;656&quot; srcset=&quot;https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=507&amp;amp;h=656 507w, https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=74&amp;amp;h=96 74w, https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=232&amp;amp;h=300 232w, https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg?w=768&amp;amp;h=994 768w, https://missilecommand.files.wordpress.com/2018/01/play-tempest-flyer.jpg 850w&quot; sizes=&quot;(max-width: 507px) 100vw, 507px&quot;/&gt;Lots of fanfare for Tempest at launch
&lt;p&gt;Thanks for reading this week. If you like what you see, I’d appreciate it if you could share this article using the social media buttons below.&lt;/p&gt;
&lt;p&gt;See you next time.&lt;/p&gt;
&lt;p&gt;Tony&lt;/p&gt;

&lt;p&gt;More reading/viewing:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://arcadeblogger.com/tag/Tempest-Restoration/?order=asc&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;My restoration of an Atari Tempest cabaret cabinet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://arcadeblogger.com/2016/07/15/atari-tempest-photography/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Atari Tempest Time Lapse Photography&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://youtu.be/RqIfnK0c1DI?t=3365&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Dave Theurer accepting the GDC “Pioneer Award” in 2012&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=41TbGi7u598&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Dave Theurer talks Tempest&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.andysarcade.de/tempest.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Andy’s Arcade Tempest Page&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://flyers.arcade-museum.com/?page=thumbs&amp;amp;db=videodb&amp;amp;id=1185&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Atari Tempest Sales Flyer&lt;/a&gt;&lt;/p&gt;
&lt;div id=&quot;jp-post-flair&quot; class=&quot;sharedaddy sd-like-enabled sd-sharing-enabled&quot;&gt;
&lt;div class=&quot;sharedaddy sd-sharing-enabled&quot;&gt;
&lt;div class=&quot;robots-nocontent sd-block sd-social sd-social-official sd-sharing&quot;&gt;
&lt;h3 class=&quot;sd-title&quot;&gt;Share this article!&lt;/h3&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;sharedaddy sd-block sd-like jetpack-likes-widget-wrapper jetpack-likes-widget-unloaded&quot; id=&quot;like-post-wrapper-3810034-24225-5a63d85f4f6cc&quot; data-src=&quot;//widgets.wp.com/likes/#blog_id=3810034&amp;amp;post_id=24225&amp;amp;origin=missilecommand.wordpress.com&amp;amp;obj_id=3810034-24225-5a63d85f4f6cc&quot; data-name=&quot;like-post-frame-3810034-24225-5a63d85f4f6cc&quot;&gt;
&lt;h3 class=&quot;sd-title&quot;&gt;Like this:&lt;/h3&gt;
&lt;div class=&quot;likes-widget-placeholder post-likes-widget-placeholder&quot;&gt;&lt;span class=&quot;button&quot;&gt;&lt;span&gt;Like&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;loading&quot;&gt;Loading...&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Fri, 19 Jan 2018 23:54:35 +0000</pubDate>
<dc:creator>videotopia</dc:creator>
<og:type>article</og:type>
<og:title>Atari Tempest: Dave Theurer’s Masterpiece</og:title>
<og:url>https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/</og:url>
<og:description>It’s a brave man who tries to criticize Atari’s seminal groundbreaking game Tempest. More than any other classic arcade game, Tempest hit the arcade scene like a juggernaut. Nothing lik…</og:description>
<og:image>https://missilecommand.files.wordpress.com/2018/01/tempest-promo-shot.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://arcadeblogger.com/2018/01/19/atari-tempest-dave-theurers-masterpiece/</dc:identifier>
</item>
<item>
<title>The US is the most expensive nation in which to have a baby</title>
<link>https://www.theguardian.com/us-news/2018/jan/16/why-does-it-cost-32093-just-to-give-birth-in-america</link>
<guid isPermaLink="true" >https://www.theguardian.com/us-news/2018/jan/16/why-does-it-cost-32093-just-to-give-birth-in-america</guid>
<description>&lt;header class=&quot;content__head content__head--article tonal__head tonal__head--tone-news&quot;&gt;
&lt;div class=&quot;content__labels content__labels--not-immersive&quot;&gt;
&lt;div class=&quot;content__section-label&quot;&gt;&lt;a class=&quot;content__section-label__link&quot; data-link-name=&quot;article section&quot; href=&quot;https://www.theguardian.com/lifeandstyle/childbirth&quot;&gt;Childbirth&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;content__series-label&quot;&gt;&lt;a class=&quot;content__series-label__link&quot; href=&quot;https://www.theguardian.com/us-news/series/the-mother-load&quot;&gt;The Mother Load&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;content__headline-standfirst-wrapper&quot;&gt;

&lt;div class=&quot;tonal__standfirst u-cf&quot;&gt;
&lt;div class=&quot;content__standfirst&quot; data-link-name=&quot;standfirst&quot; data-component=&quot;standfirst&quot;&gt;
&lt;p&gt;The US is the most expensive nation in the world in which to have a baby – and it may factor into thousands of bankruptcies each year&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;


&lt;div class=&quot;u-responsive-ratio&quot;&gt;&lt;img class=&quot;maxed responsive-img&quot; itemprop=&quot;contentUrl&quot; alt=&quot;Stella Apo Osae-Twum and her three sons.&quot; src=&quot;https://i.guim.co.uk/img/media/7cca1b3ee32c874d12469667bf5b8c8e8f6d6acd/0_693_1128_676/master/1128.jpg?w=300&amp;amp;q=55&amp;amp;auto=format&amp;amp;usm=12&amp;amp;fit=max&amp;amp;s=116e98910c729d358692f9608659ac12&quot;/&gt;&lt;/div&gt;
&lt;input type=&quot;checkbox&quot; id=&quot;show-caption&quot; class=&quot;mobile-only u-h reveal-caption__checkbox&quot;/&gt; Stella Apo Osae-Twum and her three sons. Photograph: Handout&lt;/header&gt;&lt;p&gt;Stella Apo Osae-Twum and her husband did everything by the book. They went to a hospital covered by insurance, saw an obstetrician in their plan, but when her three sons – triplets – were born prematurely, bills started rolling in.&lt;/p&gt;
&lt;p&gt;The hospital charged her family $877,000 in total.&lt;/p&gt;
&lt;a href=&quot;https://interactive.guim.co.uk/embed/2017/12/the-mother-load/embed.html&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;embed&lt;/a&gt;
&lt;p&gt;“When the bills started coming, to be very honest, I was an emotional wreck,” said Apo Osae-Twum. “And this is in the midst of trying to take care of three babies who were premature.”&lt;/p&gt;
&lt;p&gt;America is the most expensive nation in the world to give birth. When things go wrong – from pre-eclampsia to premature birth – costs can quickly spiral into the hundreds of thousands of dollars. While the data is limited, experts in medical debt say the costs of childbirth factor into thousands of family bankruptcies in America each year.&lt;/p&gt;
&lt;p&gt;It’s nearly impossible to put a price tag on giving birth in America, since costs vary dramatically by state and hospital. But one 2013 study by the the advocacy group Childbirth Connection found that, on average, hospitals charged &lt;a href=&quot;http://transform.childbirthconnection.org/wp-content/uploads/2013/01/Cost-of-Having-a-Baby-Executive-Summary.pdf&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;$32,093&lt;/a&gt; for an uncomplicated vaginal birth and newborn care, and $51,125 for a standard caesarean section and newborn care. Insurance typically covers a large chunk of those costs, but families are still often on the hook for thousands of dollars.&lt;/p&gt;
&lt;p&gt;Another estimate from the International Federation of Health Plans put the average amount insurers paid for a vaginal birth in the US at $10,808 in 2015. That is quintuple the IFHP estimate for another industrialized nation, Spain, where it costs $1,950 to deliver a child. The amount insurers pay for births in America is lower than the amount billed by hospitals because insurers negotiate lower prices.&lt;/p&gt;
&lt;p&gt;Even the luxurious accommodations provided to the Duchess of Cambridge for the birth of the royal family’s daughter Princess Charlotte – believed to have cost up to &lt;a href=&quot;https://qz.com/383406/the-british-royal-baby-will-have-a-lower-hospital-bill-than-an-uninsured-american-baby/&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;$18,000&lt;/a&gt; – were cheaper than many births in America.&lt;/p&gt;
&lt;a href=&quot;https://interactive.guim.co.uk/charts/embed/jan/2018-01-16T20:04:07/embed.html&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;Graphic&lt;/a&gt;
&lt;p&gt;Despite these high costs, the US consistently ranks poorly in health outcomes for mothers and infants. The US rate of &lt;a href=&quot;https://www.cdc.gov/nchs/data/nvsr/nvsr63/nvsr63_05.pdf&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;infant mortality&lt;/a&gt; is 6.1 for every 1,000 live births, higher than Slovakia and Hungary, and nearly three times the rate of Japan and Finland. The US also has the &lt;a href=&quot;https://www.npr.org/2017/05/12/528098789/u-s-has-the-worst-rate-of-maternal-deaths-in-the-developed-world&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;worst rate&lt;/a&gt; of maternal mortality in the developed world. That means America is simultaneously the most expensive and one of the riskiest industrialized nations in which to have children.&lt;/p&gt;
&lt;p&gt;American families rarely shoulder the full costs of childbirth on their own – but still pay far more than in other industrialized nations. Nearly half of American mothers are covered by Medicaid, a program available to low income households that covers nearly all birth costs. But people with private insurance still regularly pay thousands of dollars in co-pays, deductibles and partially reimbursed services when they give birth. &lt;a href=&quot;https://www.theguardian.com/lifeandstyle/childbirth&quot; data-link-name=&quot;auto-linked-tag&quot; data-component=&quot;auto-linked-tag&quot; class=&quot;u-underline&quot;&gt;Childbirth&lt;/a&gt; Connection put the average out of pocket childbirth costs for mothers with insurance at $3,400 in 2013.&lt;/p&gt;
&lt;p&gt;In Apo Osae-Twum’s case, private insurance covered most of the $877,000 bill, but her family was responsible for $51,000.&lt;/p&gt;
&lt;p&gt;Apo Osae-Twum was the victim of what is called “surprise billing”. In these cases, patients have no way of knowing whether an &lt;a href=&quot;https://khn.org/news/taken-for-a-ride-ambulances-stick-patients-with-surprise-bills/&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;ambulance company&lt;/a&gt;, emergency room physician, &lt;a href=&quot;http://guides.wsj.com/health/health-costs/how-to-avoid-surprise-medical-bills/&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;anesthesiologist&lt;/a&gt; – or, in her case, a half-dozen neonatologists – are members of the patient’s insurance plan.&lt;/p&gt;
&lt;p&gt;Even though Apo Osae-Twum went to a hospital covered by her insurance, none of the neonatologists who attended to her sons were “in-network”. Therefore the insurance reimbursed far less of their bills.&lt;/p&gt;
&lt;details data-snippet-id=&quot;2f2c3edd-f58e-4882-b38c-ba2866f53c03&quot; data-snippet-type=&quot;qanda&quot; class=&quot;atom atom--snippet atom--snippet--qanda&quot;&gt;&lt;span class=&quot;atom--snippet__label&quot;&gt;Q&amp;amp;A&lt;/span&gt;
&lt;h4 class=&quot;atom--snippet__headline&quot;&gt;Did you receive an unexpected or unmanageable bill after giving birth?&lt;/h4&gt;
&lt;button class=&quot;atom__button atom__button--large atom__button--rounded atom--snippet__handle&quot; aria-hidden=&quot;true&quot;&gt;&lt;span class=&quot;is-on&quot;&gt; Show&lt;/span&gt; &lt;span class=&quot;is-off&quot;&gt; Hide&lt;/span&gt;&lt;/button&gt;
&lt;div class=&quot;atom--snippet__body&quot;&gt;
&lt;p&gt;We want to tell stories of women who received unexpected or unmanageable bills after giving birth. If this affects you, you can tell us about it using &lt;a href=&quot;https://guardiannewsandmedia.formstack.com/forms/baby_medical_bills&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;our encrypted form&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Your stories will help our journalists and we will use some of them in our reporting.&lt;/p&gt;
&lt;/div&gt;
&lt;footer class=&quot;atom--snippet__footer&quot;&gt;&lt;div class=&quot;atom--snippet__feedback&quot;&gt;
&lt;div&gt;Was this helpful?&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;atom--snippet__ack&quot; hidden=&quot;&quot; aria-role=&quot;alert&quot; aria-live=&quot;polite&quot;&gt;Thank you for your feedback.&lt;/div&gt;
&lt;/footer&gt;&lt;/details&gt;&lt;p&gt;There are few studies that estimate the number of families who go bankrupt from this type of unexpected expense. One of the best estimates is now outdated – conducted 10 years ago. But one of the authors of that research, Dr Steffie Woolhandler, estimates as many as 56,000 families each year still go bankrupt from adding a new family member through birth or adoption.&lt;/p&gt;
&lt;p&gt;“Why any society should let anyone be bankrupted by medical bills is beyond me, frankly,” said Woolhandler. “It just doesn’t happen in other western democracies.”&lt;/p&gt;
&lt;p&gt;Since Woolhandler conducted that research in 2007, 20 million Americans gained health insurance through the Affordable Care Act health reform law, and consumer protections were added for pregnant women. But Republicans and the Trump administration have pledged to repeal these consumer protections.&lt;/p&gt;
&lt;p&gt;“People face a double whammy when they’re faced with a medical condition,” said Woolhandler. Bankruptcy is often “the combined effect of medical bills and the need to take time off work”.&lt;/p&gt;
&lt;p&gt;There is no nationwide law that provides paid family leave in the US, meaning &lt;a href=&quot;http://www.pewresearch.org/fact-tank/2017/03/23/access-to-paid-family-leave-varies-widely-across-employers-industries/ft_17-03-20_familyleave_420px/&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;most families&lt;/a&gt; forgo income to have a child.&lt;/p&gt;
&lt;aside class=&quot;element element-rich-link element--thumbnail element-rich-link--not-upgraded&quot; data-component=&quot;rich-link&quot; data-link-name=&quot;rich-link-1 | 1&quot;&gt;
&lt;/aside&gt;&lt;p&gt;And although childbirth is one of the most common hospital procedures in the nation, prices are completely opaque. That means Americans don’t know how much a birth will cost in advance.&lt;/p&gt;
&lt;p&gt;Dr Renee Hsia, an emergency department physician at the University of California San Francisco and a health policy expert likened the experience to buying a car, but not knowing whether the dealership sells Fords or Lamborghinis. “You don’t know, are you going to have a complication that is a lot more expensive? And is it going to be financially ruinous?”&lt;/p&gt;
&lt;p&gt;According to Hsia’s &lt;a href=&quot;http://bmjopen.bmj.com/content/4/1/e004017.info&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;2013 study&lt;/a&gt;, a “California woman could be charged as little as $3,296 or as much as $37,227 for a vaginal delivery, and $8,312 to $70,908 for a caesarean section, depending on which hospital she was admitted to.”&lt;/p&gt;
&lt;p&gt;Apo Osae-Twum and her family only found relief after a professional medical billing advocate agreed to take their case. Medical Cost Advocate in New Jersey, where Derek Fitteron is CEO, negotiated with doctors to lower the charges to $1,300.&lt;/p&gt;
&lt;p&gt;“This is why people are scared to go to the doctor, why they go bankrupt, and why they forgo other things to get care from their kids,” said Hsia. “I find it heartbreaking when patients say … ‘How much does this cost?’”&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Did you receive an unexpected or unmanageable bill after giving birth? Share your story using &lt;a href=&quot;https://guardiannewsandmedia.formstack.com/forms/baby_medical_bills&quot; data-link-name=&quot;in body link&quot; class=&quot;u-underline&quot;&gt;our encrypted form&lt;/a&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;This article was amended on 16 January 2018 to correct a misspelling of Stella Apo Osae-Twum’s name.&lt;/li&gt;
&lt;/ul&gt;

</description>
<pubDate>Fri, 19 Jan 2018 21:20:52 +0000</pubDate>
<dc:creator>koolba</dc:creator>
<og:url>http://www.theguardian.com/us-news/2018/jan/16/why-does-it-cost-32093-just-to-give-birth-in-america</og:url>
<og:description>The US is the most expensive nation in the world in which to have a baby – and it may factor into thousands of bankruptcies each year</og:description>
<og:image>https://i.guim.co.uk/img/media/7cca1b3ee32c874d12469667bf5b8c8e8f6d6acd/0_693_1128_676/master/1128.jpg?w=1200&amp;h=630&amp;q=55&amp;auto=format&amp;usm=12&amp;fit=crop&amp;crop=faces%2Centropy&amp;bm=normal&amp;ba=bottom%2Cleft&amp;blend64=aHR0cHM6Ly91cGxvYWRzLmd1aW0uY28udWsvMjAxOC8wMS8xOC9mYWNlYm9va19kZWZhdWx0LnBuZw&amp;s=0e18feb1b86d23a21209a57ed88acd22</og:image>
<og:type>article</og:type>
<og:title>Why does it cost $32,093 just to give birth in America?</og:title>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.theguardian.com/us-news/2018/jan/16/why-does-it-cost-32093-just-to-give-birth-in-america</dc:identifier>
</item>
<item>
<title>Whole Foods employees reveal why stores are facing a crisis of food shortages</title>
<link>http://www.businessinsider.com/whole-foods-employees-reveal-why-stores-are-facing-a-crisis-of-food-shortages-2018-1</link>
<guid isPermaLink="true" >http://www.businessinsider.com/whole-foods-employees-reveal-why-stores-are-facing-a-crisis-of-food-shortages-2018-1</guid>
<description>&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static6.businessinsider.com/image/5a5e7482f4214929008b52d6-2000/all%20photos%20-%202%20of%203.jpg&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Bettina Elias Siegel&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Whole Foods store in Houston.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Bettina Elias Siegel&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;Whole Foods employees say stores are suffering from food shortages because of a newly implemented inventory-management system called order-to-shelf, or OTS.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Whole Foods says the system reduces unnecessary inventory, lowers costs, and frees up employees to focus on customer service.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Employees acknowledge that less food is spoiling in storage rooms, but they describe OTS as a &quot;militaristic&quot; system that crushes morale and leads to many items being out of stock.&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&quot;Last week, we ran out of onions and potatoes twice,&quot; an employee of a Brooklyn Whole Foods store said. &quot;Entire aisles are empty at times.&quot;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&quot;It has for weeks had empty shelves, and I shop there twice a week,&quot; one customer told Business Insider. &quot;The prepared-food section is not refreshed, and food looks stale.&quot;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;p&gt;&lt;br/&gt;Whole Foods is facing a crush of food shortages in stores that's leading to empty shelves, furious customers, and frustrated employees.&lt;/p&gt;
&lt;p&gt;Many customers are blaming &lt;a href=&quot;http://markets.businessinsider.com/stock/AMZN-Quote&quot;&gt;Amazon&lt;/a&gt;, which bought Whole Foods in August for $13.7 billion. Analysts have speculated that the shortages could be due to a &lt;a href=&quot;http://www.businessinsider.com/whole-foods-out-of-stock-problems-and-deteriorating-produce-2018-1&quot;&gt;spike in shopper traffic in the wake of the acquisition&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;But Whole Foods employees say the problems began before the acquisition. They blame the shortages on a buying system called order-to-shelf that Whole Foods implemented across its stores early last year.&lt;/p&gt;
&lt;p&gt;Business Insider spoke with seven Whole Foods employees, from cashiers to department managers, who asked to remain anonymous for fear of retribution.&lt;/p&gt;
&lt;p&gt;Order-to-shelf, or OTS, is a tightly controlled system designed to streamline and track product purchases, displays, storage, and sales. Under OTS, employees largely bypass stock rooms and carry products directly from delivery trucks to store shelves. It is meant to help Whole Foods cut costs, better manage inventory, reduce waste, and clear out storage.&lt;/p&gt;
&lt;p&gt;But its strict procedures are leading to storewide stocking issues, according to several employees. Angry responses from customers are crushing morale, they say. (Many of the photographs in this story were provided to Business Insider by customers.)&lt;/p&gt;
&lt;p&gt;&quot;At my store, we are constantly running out of products in every department, including mine,&quot; an assistant department manager of an Illinois Whole Foods told Business Insider. &quot;Regional and upper store management know about this. We all know we are losing sales and pissing off customers. It's not that we don't care — we do. But our hands are tied.&quot;&lt;/p&gt;
&lt;p&gt;Whole Foods did not respond to several requests for comment on this story. The company's executives have described the changes as cost-saving, and employees acknowledge that they have helped reduce food spoilage in stock rooms.&lt;/p&gt;
&lt;p&gt;But even those who agree the company needed a better system to reduce losses and waste say it has gone too far.&lt;/p&gt;
&lt;h2&gt;How order-to-shelf is leading to food shortages&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static2.businessinsider.com/image/5a578db125954cad388b4a54-1090/screen%20shot%202018-01-11%20at%20111245%20am.png&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Derek Beere&quot; data-mce-caption=&quot;A Whole Foods store in West Hartford, Connecticut&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Whole Foods store in West Hartford, Connecticut.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Derek Beere&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;OTS operates under a strict set of requirements, mandated by Whole Foods' corporate office in Austin, for purchasing, storing, and displaying products on store shelves, employees said.&lt;/p&gt;
&lt;p&gt;One of those requirements, they say, has led to a dramatic reduction in Whole Foods stores' so-called back stock, the products stored in back rooms until they are needed on store shelves.&lt;/p&gt;
&lt;p&gt;&quot;The system is now set up to pretty much only have enough product to keep the shelf full and no extra,&quot; an employee of a store in Sacramento, California, told Business Insider. She said her department's back-stock area was now 25% of the size it was before the implementation of OTS.&lt;/p&gt;
&lt;p&gt;An employee of another store said the seafood department, which once had a giant freezer to store extra inventory, was now sharing one with the meat department.&lt;/p&gt;
&lt;p&gt;&quot;Last week, we ran out of onions and potatoes twice,&quot; an employee of a Brooklyn Whole Foods store said. &quot;Entire aisles are empty at times.&quot;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static4.businessinsider.com/image/5a566806a75e20c5378b4755-2400/img20180103191744067.jpg&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Paul Fantoni&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Whole Foods store in Boston.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Paul Fantoni&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;A reduced back stock means that any unexpected increase in shopper demand or a product-shipment delay can result in out-of-stock items across every department, multiple employees said.&lt;/p&gt;
&lt;p&gt;&quot;If a truck breaks down and you don't get a delivery, then you have empty shelves,&quot; an assistant manager of a Chicago-area Whole Foods said.&lt;/p&gt;
&lt;p&gt;An employee of a Texas Whole Foods store told Business Insider that stocking issues were &quot;horrible&quot; over the holidays and that the produce department &quot;looked embarrassing.&quot;&lt;/p&gt;
&lt;p&gt;&quot;I get constant and consistent complaints from customers for continuously being out of staple [products],&quot; the Sacramento employee said. &quot;It's frustrating as an employee and also as a shopper.&quot;&lt;/p&gt;
&lt;h2&gt;Employees say the system has 'crushed' morale&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static4.businessinsider.com/image/5a5f8540f42149a3018b5553-1104/screen%20shot%202018-01-17%20at%20121610%20pm.png&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Jennifer Irwin&quot; data-mce-caption=&quot;A Whole Foods store in New York, New York.&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Whole Foods store in New York City.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Jennifer Irwin&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Whole Foods gets stores to comply with OTS by instructing managers to regularly walk through store aisles and storage rooms with checklists to make sure every item is in its right place and there is no excess stock. If anything is amiss, or if there is too much inventory in storage, the manager in charge of that area of the store is written up. After three write-ups, they can lose their job.&lt;/p&gt;
&lt;p&gt;&quot;Out of 400 boxes in your cooler, if you have one of those boxes facing the wrong way, you are penalized,&quot; said one employee, who described the system as &quot;militaristic.&quot;&lt;/p&gt;
&lt;p&gt;&quot;It's like taking a really high-stakes exam with 100 questions every day, and if you miss a single question you fail,&quot; they added.&lt;/p&gt;
&lt;p&gt;Multiple employees said these tests had &quot;crushed&quot; morale in stores because workers are terrified of getting &quot;walked&quot; and missing some small detail.&lt;/p&gt;
&lt;p&gt;&quot;You are so concerned about passing this military-like test that you actually start to lose your department's operational conditions,&quot; an employee said.&lt;/p&gt;
&lt;p&gt;Another worker explained: &quot;We think of it as punishment. They think of it as a way to correct errors.&quot;&lt;/p&gt;
&lt;h2&gt;Whole Foods is streamlining food-buying to cut costs&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static6.businessinsider.com/image/5a577aa225954c610f8b4bb7-2400/img20180110180503812hdr.jpg&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Business Insider&quot; data-mce-caption=&quot;A Whole Foods store in Boston.&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Whole Foods store in Boston.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Business Insider&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;OTS shifted some power from local buyers to Whole Foods' corporate headquarters in Austin, which the company calls its global office, employees.&lt;/p&gt;
&lt;p&gt;Before OTS, &quot;buyers were more in control of what to bring in and how much to bring in,&quot; a Whole Foods employee said. &quot;Now everything is mandated at the global level, and while each store is different due to location and logistics, buyers must comply with the new system. This creates out-of-stocks, frustrations, and stress on all levels.&quot;&lt;/p&gt;
&lt;p&gt;Whole Foods has called it a cost-saving approach and says it has improved stocking issues.&lt;/p&gt;
&lt;p&gt;&quot;We're moving basically from a federated system of purchasing to a unified system of purchasing, and we expect to see a lot of cost savings there,&quot; Glenda Flanagan, a Whole Foods executive vice president, said on an earnings call in May.&lt;/p&gt;
&lt;p&gt;The company has also said OTS frees up employees to focus on customer service.&lt;/p&gt;
&lt;p&gt;Order-to-shelf &quot;has transformed the inventory levels that we have in the back room, essentially clearing them out so that we're mainly focusing on what we call our never-outs, the key items that we need to have in stock all the time in our stores,&quot; Whole Foods' vice president of operations, Ken Meyer, said on an earnings call in February. &quot;So it's creating a really strong, efficient process from the way the goods are received in the back door to bring them right out to the shelf. And it's really improving and helping our out-of-stocks as well — dramatically.&quot;&lt;/p&gt;
&lt;p&gt;Every employee who spoke to Business Insider agreed that the system had been effective in reducing extra inventory. Stores' back rooms and freezers that were once cluttered with unsold items — which could spoil before they were sold — are now nearly empty.&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static3.businessinsider.com/image/5a5f844728eecc980d8b53ce-1200/dsqc02jxcaajkpc.jpg&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Twitter/@firstmate_kate&quot; data-mce-caption=&quot;A Chicago Whole Foods store.&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Chicago Whole Foods store.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Twitter/@firstmate_kate&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Multiple employees also said that before OTS, Whole Foods needed a more organized buying system.&lt;/p&gt;
&lt;p&gt;&quot;We had an outside company grade us on our inventory and our back stock&quot; shortly before OTS's implementation, one assistant department manager recalled. &quot;We failed. We had millions of dollars in inventory just sitting around, hurting our bottom line.&quot;&lt;/p&gt;
&lt;p&gt;But now, the manager said, Whole Foods has gone to the opposite extreme.&lt;/p&gt;
&lt;p&gt;&quot;On paper, things look good — our spoilage is in check, and I don't have a lot of back stock,&quot; he said. &quot;But I have never seen so many empty shelves in my store.&quot;&lt;/p&gt;
&lt;h2&gt;Whole Foods workers are hoping Amazon will restock shelves&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static4.businessinsider.com/image/5a5f85e928eecc120f8b53a9-1085/screen%20shot%202018-01-11%20at%20111328%20am.png&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Derek Beere&quot; data-mce-caption=&quot;A Whole Foods store in West Hartford, Connecticut&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Whole Foods store in West Hartford, Connecticut.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Derek Beere&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Some employees are hoping Amazon fixes Whole Foods' out-of-stock problems.&lt;/p&gt;
&lt;p&gt;&quot;A lot of team members are hoping Amazon saves us, saying, 'I can't wait until Amazon learns how much money Whole Foods is losing with order-to-shelf,'&quot; one employee said. &lt;/p&gt;
&lt;p&gt;&quot;You would think that with Amazon's reputation for being a brutal employer that they would be behind the system,&quot; he added. &quot;But they are not. This is an entirely Whole Foods-driven problem.&quot;&lt;/p&gt;
&lt;p&gt;One employee at a Texas Whole Foods store said that when Amazon representatives at a recent question-and-answer session were asked about stocking issues, they indicated they weren't aware of the problems and said they would have to be addressed with Whole Foods' leadership.&lt;/p&gt;
&lt;p&gt;Whole Foods said in May that accelerating its rollout of order-to-shelf had helped put the company on track to achieve $300 million in cost savings by 2020. &lt;/p&gt;
&lt;h2&gt;Some customers are turning away&lt;/h2&gt;
&lt;p&gt;Some Whole Foods customers who have noticed stocking problems say they are looking to shop elsewhere.&lt;/p&gt;
&lt;p&gt;&quot;My regular Whole Foods store is in Oxnard, California. It has for weeks had empty shelves, and I shop there twice a week,&quot; Duane Palm told Business Insider. &quot;The prepared-food section is not refreshed, and food looks stale. The bread is stale. Everything has turned downward since Amazon took over.&quot;&lt;/p&gt;
&lt;p&gt;&quot;Something has gone terribly wrong with control and management at this store,&quot; he added. &quot;I found the same sad story at the Hillcrest store in San Diego.&quot;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;KonaFilter image-container display-table image on-image&quot; data-post-image=&quot;&quot;&gt;&lt;img src=&quot;http://static5.businessinsider.com/image/5a5f836028eecc6d0f8b535b-1200/dsqcjt2v4aa3w0b.jpg&quot; alt=&quot;Whole Foods&quot; data-mce-source=&quot;Tommy Wiles&quot; data-mce-caption=&quot;A Whole Foods store in San Francisco.&quot;/&gt;&lt;span class=&quot;caption-source&quot;&gt;&lt;span class=&quot;caption&quot;&gt;A Whole Foods store in San Francisco.&lt;/span&gt; &lt;span class=&quot;source&quot;&gt;Tommy Wiles&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Patricia Brook said she found the same problems at a store in Fort Collins, Colorado, mentioning its stock of products from Whole Foods' value brand, 365.&lt;/p&gt;
&lt;p&gt;&quot;No 365 cottage cheese, no 365 plain nonfat organic yogurt, no Brat Hans chicken breakfast sausage, no Norwegian salmon, no 365 brown eggs — shelves are bare!&quot; she said. &quot;So I come back once. Still bare! I come back twice. Still bare!&quot;&lt;/p&gt;
&lt;p&gt;She added: &quot;Something has dramatically changed.&quot;&lt;/p&gt;
&lt;p&gt;Adrienne Elias said that she and her husband had for years been loyal to Whole Foods but that in the past year she had noticed constant out-of-stocks, poorly stocked shelves, and &quot;limp, brown, soggy&quot; produce.&lt;/p&gt;
&lt;p&gt;&quot;We found ourselves thrilled at the news that Amazon was assuming ownership, hoping that they would be able to fix the problems, a lot of which we believed to be the result of very incompetent staff,&quot; she told Business Insider. &quot;We thought that perhaps it would simply take more time.&quot;&lt;/p&gt;
&lt;p&gt;&quot;Last week, after a totally frustrating shopping experience, we decided that they could not fix it or, most likely, they did not want to fix it,&quot; she said. &quot;Regretfully, we will begin shopping elsewhere.&quot;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;If you work for Whole Foods and have a story to share, reach out to this reporter at hpeterson@businessinsider.com.&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 19 Jan 2018 20:22:40 +0000</pubDate>
<dc:creator>deegles</dc:creator>
<og:title>'Entire aisles are empty': Whole Foods employees reveal why stores are facing a crisis of food shortages</og:title>
<og:description>Whole Foods employees say stores are suffering from food shortages because of a newly implemented inventory-management system called order-to-shelf.</og:description>
<og:type>article</og:type>
<og:url>http://www.businessinsider.com/whole-foods-employees-reveal-why-stores-are-facing-a-crisis-of-food-shortages-2018-1</og:url>
<og:image>http://static1.businessinsider.com/image/5a5f883bf4214948008b55f7-1190-625/entire-aisles-are-empty-whole-foods-employees-reveal-why-stores-are-facing-a-crisis-of-food-shortages.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.businessinsider.com/whole-foods-employees-reveal-why-stores-are-facing-a-crisis-of-food-shortages-2018-1</dc:identifier>
</item>
<item>
<title>Embedded in Rust: Brave new I/O</title>
<link>http://blog.japaric.io/brave-new-io/</link>
<guid isPermaLink="true" >http://blog.japaric.io/brave-new-io/</guid>
<description>&lt;p&gt;Hey there! It’s been a while. I’ve been working on some cool stuff for you. Now that’s in more or less good shape I can blog about it!&lt;/p&gt;
&lt;p&gt;This blog post introduces our new approach to I/O in embedded contexts.&lt;/p&gt;

&lt;p&gt;First some background information&lt;/p&gt;
&lt;p&gt;In microcontrollers all external I/O requires interacting with &lt;em&gt;peripherals&lt;/em&gt;. Peripherals are additional pieces of electronics that sit in the same chip / package as the core processor.&lt;/p&gt;
&lt;p&gt;Communication between the processor and peripherals occurs through a shared memory region. This memory region is logically split in &lt;em&gt;registers&lt;/em&gt;. Each register is usually machine word sized (e.g. 32 bits on ARMv7-M), to guarantee atomic (single instruction) memory accesses to it. All registers associated to a single peripheral are usually located in a contiguous memory location; this group of registers is referred to as register block.&lt;/p&gt;
&lt;p&gt;Thus all I/O boils down to memory operations on these registers.&lt;/p&gt;

&lt;p&gt;The old approach follows the C model of having peripherals’ register blocks as global (read: globally visible and accessible) resources.&lt;/p&gt;
&lt;p&gt;In C, this model has the issue that two execution contexts (e.g. threads / interrupts) may perform non atomic operations (e.g. a read-modify-write operation) on the same register leading to a &lt;em&gt;race condition&lt;/em&gt; (*). See below:&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;(*) not a UB triggering data race. AFAIS UB (torn reads / write and misoptimization) can’t really occur because operations on registers are marked as volatile and they are atomic (single instruction); microcontrollers are (usually) single core; and the memory model of the register memory region is non-weak.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;code class=&quot;language-c&quot;&gt;// defined elsewhere
static volatile int* GPIOA_ODR = 0x48000014;

void main() {
  while (1) {
    *GPIOA_ODR += 1;
  }
}

// can preempt `main`
void interrupt_handler() {
  *GPIOA_ODR *= 2;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Here &lt;code&gt;main&lt;/code&gt; and &lt;code&gt;interrupt_handler&lt;/code&gt; race each other and this can cause the effects of &lt;code&gt;interrupt_handler&lt;/code&gt; to sometimes be lost.&lt;/p&gt;
&lt;p&gt;In Rust, we improved this situation by making the register blocks not &lt;em&gt;directly&lt;/em&gt; accessible. Instead you had to use a critical section (or, in &lt;a href=&quot;https://docs.rs/cortex-m-rtfm/0.3.0/cortex_m_rtfm/&quot;&gt;Real Time For the Masses&lt;/a&gt; (RTFM), prove the compiler that no preemption was possible) to access the register block. We also made register manipulation fully type safe by generating an API from vendor provided &lt;a href=&quot;https://www.keil.com/pack/doc/CMSIS/SVD/html/index.html&quot;&gt;System View Description&lt;/a&gt; (SVD) files using a tool called &lt;a href=&quot;https://docs.rs/svd2rust/0.12.0/svd2rust/&quot;&gt;&lt;code&gt;svd2rust&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Here’s the previous C example ported to the old Rust model.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// generated by svd2rust
const GPIOA: Peripheral&amp;lt;GPIOA&amp;gt; = unsafe { Peripheral::new(0x4800_0000) };
// also generated by svd2rust
#[repr(C)]
struct GPIOA {
    moder: MODER, otyper: OTYPER, ospeedr: OSPEEDR, pupdr: PUPDR, idr: IDR,
    odr: ODR, /* .. */
}

fn main() {
    loop {
        // critical section: `interrupt_handler` can't preempt this closure
        interrupt::free(|cs| {
            GPIOA.borrow(cs).odr.modify(|r, w| w.bits(r.bits() + 1));
        });
    }
}

// can preempt `main`
fn interrupt_handler() {
    interrupt::free(|cs| {
        GPIOA.borrow(cs).odr.modify(|r, w| w.bits(r.bits() * 2));
    });
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The Rust version doesn’t have the race condition that the C version had. That coupled with the type safe API, which prevents you from misusing the registers (i.e. writing to the reserved portions of it), was a great improvement but was not enough for creating solid higher level abstractions.&lt;/p&gt;
&lt;h2 id=&quot;the-hole-in-the-old-model&quot;&gt;The hole in the old model&lt;/h2&gt;
&lt;p&gt;The Achilles heel of this model, and the C model, is the &lt;em&gt;global access&lt;/em&gt; property of peripherals. That simply breaks all abstractions. Here’s an example:&lt;/p&gt;
&lt;p&gt;Correct clock configuration (there are several clocks running at different frequencies in a microcontroller) is important for the correct operation of peripherals, like the USART, that deal with asynchronous communication protocols, like serial communication. In asynchronous communication protocols both sides of the communication channel have to agree on some baud rate (bit rate) before the communication takes place. The communication only works if both sides operate at the agreed upon baud rate.&lt;/p&gt;
&lt;p&gt;Say you create a &lt;code&gt;Serial&lt;/code&gt; abstraction that reads the RCC peripheral, which controls the clock configuration, during initialization to configure the USART1 peripheral to operate at the right baud rate:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;struct Serial&amp;lt;'a&amp;gt; {
    usart: &amp;amp;'a mut USART1,
}

impl&amp;lt;'a&amp;gt; Serial&amp;lt;'a&amp;gt; {
    pub fn new(usart1: &amp;amp;'a mut USART1) -&amp;gt; Self { /* .. */ }
    pub fn init(&amp;amp;mut self, rcc: &amp;amp;RCC, baud_rate: u32) { /* .. */ }
    pub fn write(&amp;amp;mut self, byte: u8) -&amp;gt; Result&amp;lt;(), Error&amp;gt; { /* .. */ }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;You use the abstraction in some RTFM application where a task has exclusive access to the USART1 peripheral and you are able to use the &lt;code&gt;Serial&lt;/code&gt; abstraction without locks.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// rtfm: v0.2.0

app! { .. }

fn init(p: init::Peripherals, r: init::Resources) {
    Serial(p.USART1).init(p.RCC, 115_200);
    // ..
}

fn task(t: &amp;amp;mut Threshold, r: EXTI0::Resources) {
    let mut serial = Serial(r.USART1);
    // do stuff with `serial`
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;All seems good. Except that there’s &lt;em&gt;no&lt;/em&gt; guarantee that RCC will not be modified by some other task thus there’s no guarantee that the clock configuration will remain the same for all the executions of &lt;code&gt;task&lt;/code&gt;. The other task doesn’t even have to name the RCC as one of its resources because the RCC has global visibility so any task can always access it (this is actually &lt;a href=&quot;https://github.com/japaric/cortex-m-rtfm/issues/13&quot;&gt;an old RTFM bug&lt;/a&gt; that’s only occurs with the old I/O model):&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn foo() {
    interrupt::free(|cs| {
        let rcc: &amp;amp;RCC = RCC.borrow(cs);
        // modify `RCC` to tweak the clock configuration to, say, halve all the
        // clock frequencies
    });
}

fn some_other_task(t: &amp;amp;mut Threshold, r: EXTI1::Resources) {
    foo();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;If this happens then the serial communication will fail: the hardware will raise some “framing” error flag to signal the baud rate mismatch.&lt;/p&gt;
&lt;p&gt;(Some of you may be thinking “but then you should store a reference to &lt;code&gt;RCC&lt;/code&gt; in &lt;code&gt;Serial&lt;/code&gt; to make sure the clock configuration can’t change”. Unfortunately that’s not enough because &lt;code&gt;Serial&lt;/code&gt; has to be &lt;em&gt;re-constructed&lt;/em&gt; every time the task starts so RCC can still be modified by other task between the end of &lt;code&gt;task&lt;/code&gt; and the next time it’s invoked)&lt;/p&gt;
&lt;p&gt;Once you know about this hole then you conclude that no abstraction around the &lt;code&gt;svd2rust&lt;/code&gt; API can hold their invariants because &lt;em&gt;peripherals are always open to modification, even by crates created by a third party&lt;/em&gt;. Yikes!&lt;/p&gt;

&lt;p&gt;The new I/O model (&lt;code&gt;svd2rust&lt;/code&gt; v0.12.x) removes the root of the problem: it no longer provides global access to peripherals. Instead peripherals need to be &lt;code&gt;take&lt;/code&gt;n (read: moved) &lt;em&gt;into&lt;/em&gt; the current execution context. See below:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// stm32f30x was generated using `svd2rust`
extern crate stm32f30x;

use stm32f30x::{GPIOA, Peripherals};

fn main() {
    let p = stm32f30x::Peripherals::take().unwrap();

    // difference: this is now an *owned* value, not a reference
    let gpioa: GPIOA = p.GPIOA;

    // same register manipulation API as before
    gpioa.odr.modify(|r, w| w.bits(r.bits() * 2));
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The peripherals can only be &lt;code&gt;take&lt;/code&gt;n once. &lt;code&gt;Peripherals::take&lt;/code&gt; returns an &lt;code&gt;Option&lt;/code&gt; that will only be &lt;code&gt;Some&lt;/code&gt; the first time the method is called; subsequent calls to &lt;code&gt;Peripheral::take&lt;/code&gt; will return the &lt;code&gt;None&lt;/code&gt; variant.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn main() {
    let ok = Peripherals::take().unwrap();
    let panics = Peripherals::take().unwrap();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This effectively makes each peripheral a singleton because there can only ever be at most one instance of them at any point in time. In the old model peripherals were also singletons but they were &lt;em&gt;global&lt;/em&gt; singletons: singletons accessible by anyone. In the new model peripherals are &lt;em&gt;scoped&lt;/em&gt; singletons that are &lt;em&gt;owned&lt;/em&gt; by the execution context (task / thread) from where &lt;code&gt;Peripherals::take&lt;/code&gt; was called. A peripheral is not, forever, tied to a single execution context, though; it can be &lt;em&gt;moved&lt;/em&gt; into another execution context if desired because every peripheral is &lt;code&gt;Send&lt;/code&gt;able.&lt;/p&gt;
&lt;p&gt;How does this new ownership based model affect the way we create higher level abstractions? Let’s see.&lt;/p&gt;
&lt;h2 id=&quot;freezing-the-clock-configuration&quot;&gt;Freezing the clock configuration&lt;/h2&gt;
&lt;p&gt;Before I showed that changing the clock configuration can be problematic as it can affect the operation of peripherals like the USART. Now that we have ownership over peripherals, making sure that the clock configuration never changes is very easy: you simply &lt;code&gt;drop&lt;/code&gt; the &lt;code&gt;RCC&lt;/code&gt; peripheral. Once &lt;code&gt;RCC&lt;/code&gt; is gone the RCC registers can no longer be modified thus the clock configuration will remain unchanged from that point and on.&lt;/p&gt;
&lt;p&gt;RCC stands for Reset and Clock Control and controls not only the clock configuration but it’s responsible for enabling, resetting and disabling other peripherals. Dropping the whole thing would mean that we can no longer enable other peripherals and most peripherals start disabled at boot time to save power so maybe it’s not the best of ideas.&lt;/p&gt;
&lt;p&gt;What we can do instead is &lt;em&gt;split&lt;/em&gt; RCC into parts in charge of different functionalities:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;struct Parts { ahb: AHB, apb1: APB1, apb2: APB2, cfgr: CFGR }

trait RccExt {
    /// Constrains RCC functionality by splitting it in parts
    fn constrain(self) -&amp;gt; Parts;
}

impl RccExt for RCC { .. }
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;CFGR&lt;/code&gt; controls the clock configuration and the other parts are in charge of enabling and disabling peripherals. Note that &lt;code&gt;constrain&lt;/code&gt; &lt;em&gt;consumes&lt;/em&gt; the original &lt;code&gt;RCC&lt;/code&gt; which granted &lt;em&gt;full access&lt;/em&gt; to every RCC register; this effectively &lt;em&gt;constrains&lt;/em&gt; the operations that can be performed on RCC registers to only the ones exposed by the members of &lt;code&gt;Parts&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;With a bit more of work we can achieve something like this:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn main() {
    let p = Peripherals::take().unwrap();
    let rcc = p.RCC.split();

    let clocks: Clocks = rcc.cfgr.sysclk(64.mhz()).pclk1(32.mhz()).freeze();

    assert_eq!(clocks.sysclk(), 64.mhz());
    assert_eq!(clocks.hclk(), 64.mhz());
    assert_eq!(clocks.pclk1(), 32.mhz());
    assert_eq!(clocks.pclk2(), 32.mhz());

    // can still use `rcc.{ahb,apb1,apb2}` over here
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;CFGR&lt;/code&gt; exposes a builder-like API to pick the frequency of each clock. The final &lt;code&gt;freeze&lt;/code&gt; method makes the configuration effective, consumes &lt;code&gt;CFGR&lt;/code&gt; and returns a &lt;code&gt;Clocks&lt;/code&gt; value. &lt;code&gt;Clocks&lt;/code&gt; is a &lt;code&gt;Copy&lt;/code&gt;-able struct that contains the &lt;em&gt;frozen&lt;/em&gt; clock configuration. &lt;code&gt;Clocks&lt;/code&gt; can be used in the initialization of abstractions like &lt;code&gt;Serial&lt;/code&gt;; its very existence holds the invariant that the clock configuration will not change.&lt;/p&gt;
&lt;h2 id=&quot;typed-configuration&quot;&gt;Typed configuration&lt;/h2&gt;
&lt;p&gt;Physical pins on a microcontroller can be configured as digital inputs, as digital outputs or as peripheral pins (pins associated to peripherals like the USART). We can encode this configuration in the &lt;em&gt;type&lt;/em&gt; of a pin to enforce at compile time that a pin has a certain configuration. We can think of the different configurations as the different states the pin can be in. This pattern of encoding states in the type system is known as &lt;em&gt;type state&lt;/em&gt; (some people also call it &lt;em&gt;session types&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;Let’s see how this would apply in practice:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn main() {
    let p = Peripherals::take().unwrap();

    let mut rcc = p.RCC.constrain();

    // splits the GPIOA peripheral into 16 independent pins + registers
    let mut gpioa = p.GPIOA.split(&amp;amp;mut rcc.ahb);
    // all pins start as floating inputs
    let pa9: PA9&amp;lt;Input&amp;lt;Floating&amp;gt;&amp;gt; = gpioa.pa9;

    // API available in the `Input&amp;lt;_&amp;gt;` state
    if pa9.is_low() {
        // ..
    } else if pa9.is_high() {
        // ..
    }

    // configure the pin PA9 as an output
    // this operation consumes the original `pa9` value
    let mut pa9: PA9&amp;lt;Output&amp;lt;PushPull&amp;gt;&amp;gt; =
        pa9.into_push_pull_output(&amp;amp;mut gpioa.moder, &amp;amp;mut gpioa.otyper);

    // API available in the `Output&amp;lt;_&amp;gt;` state
    pa9.set_low();
    pa9.set_high();
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The &lt;code&gt;gpioa.moder&lt;/code&gt; and &lt;code&gt;gpioa.otyper&lt;/code&gt; values are proxies for the MODER and OTYPER registers. The API requires explicitly passing them to avoid a race condition in the rare case that you want to configure GPIOA pins from different execution contexts that can preempt each other; in that scenario the API will force you to use a critical section to access the proxies.&lt;/p&gt;
&lt;p&gt;It may seem redundant to be explicit about these registers when all the configuration is done in a single execution context, but by having these explicit proxies you can be sure that once they are destroyed the configuration of the GPIOA pins can’t be changed anymore.&lt;/p&gt;
&lt;h2 id=&quot;no-pin-overlap&quot;&gt;No pin overlap&lt;/h2&gt;
&lt;p&gt;Modern microcontrollers pack lots of peripherals in a single package– sometimes so many peripherals that not all of them can be used at the same time. This is actually normal because most applications won’t use all of them; instead each application will use different kinds of peripherals and different number of instances of each kind.&lt;/p&gt;
&lt;p&gt;For maximum flexibility vendors don’t hardwire peripherals to physical pins (mainly because there’s not enough physical pins in the first place) instead one can configure the function of a pin at &lt;em&gt;runtime&lt;/em&gt; – this effectively associates the pin to a particular peripheral. But it’s definitively an error to associate a single pin to more than one peripheral. With move semantics we can reject such misconfigurations at compile time:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn main() {
    let p = Peripherals::take().unwrap();

    let mut flash = p.FLASH.constrain();
    let mut rcc = p.RCC.constrain();

    let mut gpioa = p.GPIOA.split(&amp;amp;mut rcc.ahb);
    let clocks = rcc.cfgr.freeze(&amp;amp;mut flash.acr);

    // use pins PA9 and PA10 with USART1
    // the `Serial::usart1` constructor requires the pins to be configured with
    // the right Alternate Function (AF); it also consumes the pins
    let tx = gpioa.pa9.into_af7(&amp;amp;mut gpioa.moder, &amp;amp;mut gpioa.afrh);
    let rx = gpioa.pa10.into_af7(&amp;amp;mut gpioa.moder, &amp;amp;mut gpioa.afrh);
    let serial =
        Serial::usart1(p.USART1, (tx, rx), 9_600.bps(), clocks, &amp;amp;mut rcc.apb2);

    // try to use PA9 and PA10 with I2C2
    let scl = gpioa.pa9.into_af4(&amp;amp;mut gpioa.moder, &amp;amp;mut gpioa.afrh);
    //~^ error: use of move value: `gpioa.pa9`
    let sda = gpioa.pa10.into_af4(&amp;amp;mut gpioa.moder, &amp;amp;mut gpioa.afrh);
    //~^ error: use of move value: `gpioa.pa10`
    let i2c = I2c::i2c2(p.I2C2, (scl, sda), 400.khz(), clocks, &amp;amp;mut rcc.apb1);
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;p&gt;And this is just the tip of iceberg of the things you can do with the new I/O model.&lt;/p&gt;

&lt;p&gt;Let’s now look at another aspect of the I/O story: code reuse.&lt;/p&gt;
&lt;p&gt;The API that &lt;code&gt;svd2rust&lt;/code&gt; generates serves as the lowest abstraction layer sitting very close to the hardware and providing an API for directly manipulating registers. Most people will want to program with higher level abstractions that map closer to actions like “read this sensor”, “send data through this interface”, etc.&lt;/p&gt;
&lt;p&gt;This section covers my plan for building those higher level abstractions with minimal code duplication.&lt;/p&gt;
&lt;h2 id=&quot;thou-shalt-not-block&quot;&gt;Thou shalt not block&lt;/h2&gt;
&lt;p&gt;I/O can be performed in a blocking fashion or in an asynchronous fashion. And there’s more than one way to do asynchronous I/O: there’s the callback model (“run this function when data is ready”), the futures model (“a future represents an I/O action that will be completed some time in the future; poll to see if the I/O has completed or not”) and the generators model (“yield control, instead of blocking, when no more progress can be made”).&lt;/p&gt;
&lt;p&gt;We can implement a blocking API on top of the &lt;code&gt;svd2rust&lt;/code&gt; API; we can implement a futures based version of the API on top of the &lt;code&gt;svd2rust&lt;/code&gt; API; and we can implement a generator based version of the API on top of the &lt;code&gt;svd2rust&lt;/code&gt; API. The implementations of those three flavors of the same API will look very similar. The question is: can we implement some intermediate API to avoid &lt;em&gt;writing register manipulation&lt;/em&gt; code in those three implementations? The answer is the &lt;a href=&quot;https://docs.rs/nb/0.1.1/nb/&quot;&gt;&lt;code&gt;nb&lt;/code&gt;&lt;/a&gt; crate.&lt;/p&gt;
&lt;p&gt;I pulled a solution out of the Tokio book, or maybe it’s actually from the *nix book. The solution I chose was to implement the intermediate API as a non blocking API that returns a &lt;code&gt;WouldBlock&lt;/code&gt; error variant to signal that the operation can &lt;em&gt;not&lt;/em&gt; be completed right now. This non fatal error variant has a different meaning depending on the (a)synchronous model is used in:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;In a blocking API, &lt;code&gt;WouldBlock&lt;/code&gt; means try again i.e. busy wait (or maybe do something more elaborated if you have a threading system).&lt;/li&gt;
&lt;li&gt;In a futures based API, &lt;code&gt;WouldBlock&lt;/code&gt; means &lt;code&gt;Async::NotReady&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;In a generator based API, &lt;code&gt;WouldBlock&lt;/code&gt; means &lt;code&gt;yield&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;async-your-way&quot;&gt;Async, your way&lt;/h3&gt;
&lt;p&gt;Let’s look at an example. Below is shown the &lt;code&gt;nb&lt;/code&gt; API for reading a single byte from a serial interface. &lt;code&gt;Serial::read&lt;/code&gt; will return &lt;code&gt;Ok(byte)&lt;/code&gt; if new data is available to be read; it will return &lt;code&gt;Err(nb::Error::WouldBlock)&lt;/code&gt; if no new data is available at the moment; and it will return e.g. &lt;code&gt;Err(nb::Error::Other(Error::Overrun))&lt;/code&gt; if some fatal error occurred.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;enum Error {
    Noise,
    Framing,
    Overrun,
    // ..
}

impl Serial {
    pub fn read(&amp;amp;mut self) -&amp;gt; nb::Result&amp;lt;u8, Error&amp;gt; { /* .. */ }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The &lt;a href=&quot;https://docs.rs/nb/0.1.1/nb/&quot;&gt;&lt;code&gt;nb&lt;/code&gt;&lt;/a&gt; crate provides macros to easily transform this intermediate API into the (a)synchronous models I mentioned:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/japaric/nb/blob/v0.1.1/src/lib.rs#L428-L456&quot;&gt;&lt;code&gt;block!&lt;/code&gt;&lt;/a&gt; is used to implement blocking APIs by busy waiting.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn blocking_read(serial: &amp;amp;mut Serial) -&amp;gt; Result&amp;lt;u8, Error&amp;gt; {
    block!(serial.read())
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/japaric/nb/blob/v0.1.1/src/lib.rs#L458-L495&quot;&gt;&lt;code&gt;try_nb!&lt;/code&gt;&lt;/a&gt; is used to implement futures based APIs.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn futures_read(serial: Serial) -&amp;gt; impl Future&amp;lt;(Serial, u8), Error&amp;gt; {
    let mut serial = Some(serial);
    futures::poll_fn(move || {
        let byte = try_nb!(serial.as_mut().unwrap().read());
        Ok(Async::Ready((serial.take().unwrap(), byte)))
    })
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/japaric/nb/blob/v0.1.1/src/lib.rs#L389-L426&quot;&gt;&lt;code&gt;await!&lt;/code&gt;&lt;/a&gt; is used to implement generator based APIs.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;fn generator_read(
    mut serial: Serial,
) -&amp;gt; impl Generator&amp;lt;Return = Result&amp;lt;(Serial, u8), Error&amp;gt;, Yield = ()&amp;gt; {
    let byte = await!(serial.read())?;
    Ok((serial, byte))
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;None of these higher level APIs required writing any register manipulation code and the functions could even have been made generic if &lt;code&gt;Serial::read&lt;/code&gt; was a trait method instead of an inherent method. Which brings me to the next topic.&lt;/p&gt;
&lt;h2 id=&quot;hal-traits&quot;&gt;HAL traits&lt;/h2&gt;
&lt;p&gt;The &lt;code&gt;nb&lt;/code&gt; crate provides an easy transition from the svd2rust API to the different (a)synchronous models but for code reuse we have to write generic code and this means that we have to establish a set of traits to build that generic code upon.&lt;/p&gt;
&lt;p&gt;Enter the &lt;a href=&quot;https://docs.rs/embedded-hal/0.1.0&quot;&gt;&lt;code&gt;embedded-hal&lt;/code&gt;&lt;/a&gt; crate.&lt;/p&gt;
&lt;p&gt;This crate is basically a collection of traits that provides interfaces for the different peripherals available on a embedded device. These traits form a Hardware Abstraction Layer, an abstraction that hides device specific details like registers.&lt;/p&gt;
&lt;p&gt;At the center of this crate we have &lt;code&gt;nb&lt;/code&gt; based traits that make functions like the &lt;code&gt;Serial::read&lt;/code&gt; method we saw before more generic:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;pub mod serial {
    pub trait Read&amp;lt;Word&amp;gt; {
        type Error;

        /// Reads a single word from the serial interface
        fn read(&amp;amp;mut self) -&amp;gt; nb::Result&amp;lt;Word, Self::Error&amp;gt;;
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Then we have slightly higher level traits that actually pick an (a)synchronous model. Where possible opt-in default implementations on top of the &lt;code&gt;nb&lt;/code&gt; traits are provided.&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;/// Blocking API
pub mod blocking {
    /// Blocking SPI API
    pub mod spi {
        /// Blocking transfer
        pub trait Transfer&amp;lt;Word&amp;gt; {
            type Error;

            /// Sends `words` to the slave. Returns the `words` received from
            /// the slave
            fn transfer&amp;lt;'w&amp;gt;(
                &amp;amp;mut self,
                words: &amp;amp;'w mut [Word],
            ) -&amp;gt; Result&amp;lt;&amp;amp;'w [Word], Self::Error&amp;gt;;
        }

        /// Blocking transfer
        pub mod transfer {
            /// Marker trait to opt into a default implementation of
            /// `blocking::spi::Transfer&amp;lt;W&amp;gt;`
            pub trait Default&amp;lt;W&amp;gt;: ::spi::FullDuplex&amp;lt;W&amp;gt; {}

            impl&amp;lt;W, S&amp;gt; blocking::spi::Transfer&amp;lt;W&amp;gt; for S
            where
                S: Default&amp;lt;W&amp;gt;,
                W: Clone,
            {
                type Error = S::Error;

                fn transfer(
                    &amp;amp;mut self,
                    words: &amp;amp;'w mut [Word],
                ) -&amp;gt; Result&amp;lt;&amp;amp;'w [Word], S::Error&amp;gt; {
                    for word in words.iter_mut() {
                        block!(self.send(word.clone()))?;
                        *word = block!(self.read())?;
                    }

                    Ok(words)
                }
            }
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;write-once-run-everywhere&quot;&gt;Write once, run everywhere&lt;/h3&gt;
&lt;p&gt;The end goal of having these traits is writing &lt;em&gt;generic&lt;/em&gt; drivers: library crates that let you interface external components but that – thanks to the HAL – whose implementation is oblivious to the hardware details of the platform they are running on.&lt;/p&gt;
&lt;p&gt;SPI and I2C are two widely used communication protocols and there are several external components, like digital sensors, out there that can be interfaced using one of these two communication protocols. The &lt;code&gt;embedded-hal&lt;/code&gt; crate contains blocking traits for these two communication protocols and, as a proof of concept, I have developed a few &lt;em&gt;no_std&lt;/em&gt; generic drivers on top of those traits:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://docs.rs/l3gd20/0.1.0/l3gd20/&quot;&gt;&lt;code&gt;l3gd20&lt;/code&gt;&lt;/a&gt;, gyroscope found on the STM32F3DISCOVERY board&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.rs/lsm303dlhc/0.1.0/lsm303dlhc/&quot;&gt;&lt;code&gt;lsm303dlhc&lt;/code&gt;&lt;/a&gt;, accelerometer + compass found on the STM32F3DISCOVERY board&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/japaric/mfrc522&quot;&gt;&lt;code&gt;mfrc522&lt;/code&gt;&lt;/a&gt;, RFID tag reader / writer&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/japaric/mpu9250&quot;&gt;&lt;code&gt;mpu9250&lt;/code&gt;&lt;/a&gt;, Nine-Axis (Gyro + Accelerometer + Compass) MEMS MotionTracking Device&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;As an example, let’s look at the &lt;code&gt;mfrc522&lt;/code&gt; driver:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;#![no_std]

extern crate embedded_hal as hal;

/// MFRC522 driver
struct Mfrc522&amp;lt;SPI, NSS&amp;gt; where
    SPI: hal::blocking::spi::Transfer&amp;lt;u8&amp;gt; + hal::blocking::spi::Write&amp;lt;u8&amp;gt;,
    NSS: hal::digital::OutputPin,
{
    spi: SPI,
    nss: NSS,
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;The driver uses a SPI bus and a NSS (slave select) pin to interface with a MFRC522. The driver is generic over both the SPI bus and the NSS pin; this means any abstraction that implements the required traits can be used here. For instance, the &lt;a href=&quot;https://crates.io/crates/linux-embedded-hal&quot;&gt;&lt;code&gt;linux-embedded-hal&lt;/code&gt;&lt;/a&gt; crate which implements the &lt;code&gt;embedded-hal&lt;/code&gt; traits for the &lt;a href=&quot;https://crates.io/crates/spidev&quot;&gt;&lt;code&gt;spidev&lt;/code&gt;&lt;/a&gt; and &lt;a href=&quot;https://crates.io/crates/sysfs_gpio&quot;&gt;&lt;code&gt;sysfs_gpio&lt;/code&gt;&lt;/a&gt; crates can be used with this driver to build a &lt;a href=&quot;https://github.com/japaric/mfrc522/blob/v0.1.0/examples/rpi.rs#L68&quot;&gt;program that targets a platform running Linux&lt;/a&gt;, like the Raspeberry Pi.&lt;/p&gt;

&lt;p align=&quot;center&quot;&gt;&lt;em&gt;The blue RFID tag turns the green LED (see bottom right corner) on while the RFID card turns it off.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Since the crate is a &lt;code&gt;no_std&lt;/code&gt; crate it can also be used to build a &lt;code&gt;no_std&lt;/code&gt; program that targets an ARM Cortex-M microcontroller. (The source for this second program will be in the &lt;a href=&quot;https://github.com/japaric/blue-pill&quot;&gt;&lt;code&gt;blue-pill&lt;/code&gt;&lt;/a&gt; repository once I finish cleaning it up.)&lt;/p&gt;

&lt;p&gt;So, by using the &lt;code&gt;embedded-hal&lt;/code&gt; traits driver authors can effortlessly support a bunch of diverse platforms (AVR, ARM Cortex-M, MSP430, RISC-V microcontrollers; ARM Cortex-A single board computers; etc.) in a single crate. Whereas application developers, by implementing the &lt;code&gt;embedded-hal&lt;/code&gt; traits for their platform, can unlock a bunch of drivers at zero extra effort.&lt;/p&gt;
&lt;h2 id=&quot;crate-hierarchy-for-cortex-m&quot;&gt;Crate hierarchy for Cortex-M&lt;/h2&gt;
&lt;p&gt;Here’s the whole I/O picture for the Cortex-M ecosystem.&lt;/p&gt;
&lt;p&gt;At the lowest level we have the device crates generated by &lt;code&gt;svd2rust&lt;/code&gt;. These expose type safe APIs for directly manipulating registers. Depending on the source SVD file a device crate can support a single device or several device families. For example, the &lt;code&gt;stm32f30x&lt;/code&gt; crate supports device families STM32F301xx, STM32F302xx and STM32F303xx.&lt;/p&gt;
&lt;p&gt;At the next level you have &lt;em&gt;HAL implementation&lt;/em&gt; crates like the &lt;a href=&quot;https://crates.io/crates/stm32f30x-hal&quot;&gt;&lt;code&gt;stm32f30x-hal&lt;/code&gt;&lt;/a&gt; that implement the &lt;code&gt;embedded-hal&lt;/code&gt; traits for a single device crate. These crates expose higher level APIs for &lt;code&gt;Serial&lt;/code&gt; interfaces, &lt;code&gt;SPI&lt;/code&gt; interfaces, clock configuration, etc. and it’s what most people will be using. These crates let you use generic drivers to interface external components.&lt;/p&gt;
&lt;p&gt;There’s one more level: &lt;em&gt;board support&lt;/em&gt; crates.&lt;/p&gt;
&lt;p&gt;HAL impl crates are highly generic: they let you configure peripherals to work with any valid pin configuration. This is reflected in the types exposed by the crate:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// crate: stm32f30x-hal

// `Serial` is generic over
// - the USART peripheral, which can be USART1, USART2, etc.
// - the TX and RX pins, which can be PA9 and PA10 or PB7 and PB8 for USART1, etc.
struct Serial&amp;lt;USART, TX, RX&amp;gt; where
    TX: TxPin&amp;lt;USART&amp;gt;,
    RX: RxPin&amp;lt;USART&amp;gt;,
    ..
{ .. }

impl&amp;lt;TX, RX&amp;gt; Serial&amp;lt;USART1, TX, RX&amp;gt; where .. {
    pub fn usart1(usart: USART1, (tx, rx): (TX, RX), ..) -&amp;gt; Self { .. }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;But PCBs already have their microcontroller’s pins routed to external components; this means that some peripherals / pins &lt;em&gt;have&lt;/em&gt; to be configured in a certain way. Thus board support crates should narrow down the possible configurations of a peripheral to a single configuration to avoid misconfigurations. Board support crates can achieve that by exposing type aliases that turn the generic types from HAL impl crates into concrete types:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// crate: f3 (board support crate for the STM32F3DISCOVERY)

// driver crate that exposes a generic `Lsm303dlhc&amp;lt;I2C&amp;gt; where I2C: ..` type
extern crate lsm303dlhc;

// Pins PA9 and PA10 have been routed to e.g. an UART &amp;lt;-&amp;gt; USB adapter so they
// can only be used for serial communication
// `Serial1` represents that serial interface
pub type Serial1 = stm32f30x_hal::Serial&amp;lt;USART1, PA9&amp;lt;AF7&amp;gt;, PA10&amp;lt;AF7&amp;gt;&amp;gt;;

// LSM303DLHC is connected to the microcontroller via the I2C1 bus lines: PB6
// and PB7
pub type Lsm303dlhc = lsm303dlhc::Lsm303dlhc&amp;lt;I2c&amp;lt;I2C1, (PB6&amp;lt;AF4&amp;gt;, PB7&amp;lt;AF4&amp;gt;)&amp;gt;&amp;gt;;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;This means that we can &lt;em&gt;specify board connections at the type level&lt;/em&gt; and have them enforced by the compiler: if, for example, you try to construct a &lt;code&gt;f3::Lsm303dlhc&lt;/code&gt; value using pins other than PB6 and PB7 you’ll get a compiler error.&lt;/p&gt;

&lt;p&gt;The new I/O model brings move semantics to the table which lets us exploit the type system (mainly using the type state pattern) to check configurations at compile time and have to compiler reject wrong configurations.&lt;/p&gt;
&lt;p&gt;The new model also serves as a solid foundation on top of which we can build generic drivers using the &lt;code&gt;embedded-hal&lt;/code&gt; traits.&lt;/p&gt;
&lt;p&gt;The best part is that these two advantages are orthogonal. Perhaps you are not too crazy about the type state stuff and think it’s too much work for little gain. That’s totally OK! You can still benefit from the generic driver crates if you implement the &lt;code&gt;embedde-hal&lt;/code&gt; traits; type state is not a requirement for using generic driver crates.&lt;/p&gt;

&lt;h2 id=&quot;async-hal&quot;&gt;Async HAL&lt;/h2&gt;
&lt;p&gt;All my proof of concept driver crates expose a blocking API. We want to explore writing asynchronous driver crates using futures / generators. We are kind of blocked on that front though because to write truly generic async driver code we would need HAL traits whose methods return futures or generators and &lt;code&gt;impl Trait&lt;/code&gt; doesn’t work in that position yet:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// I2C async write
trait Write {
    type Error;

    fn write(
        self,
        addr: u8,
        bytes: [u8; 16], // NOTE should be generic over the size
    ) -&amp;gt; impl Generator&amp;lt;Return = Result&amp;lt;(Self, [u8; 16]), Self::Error&amp;gt;, Yield = ()&amp;gt;;
    //~^ error: `impl Trait` not allowed outside of function and inherent method return types
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Using boxed trait objects is not really an option as some applications will prefer to leave out the memory allocator. It might be possible to walk down the futures route right now if we are OK with using really long (lasagna) types that implement the &lt;code&gt;Future&lt;/code&gt; trait as the return types …&lt;/p&gt;
&lt;h2 id=&quot;reduce-implementation-work&quot;&gt;Reduce implementation work&lt;/h2&gt;
&lt;p&gt;With the crate hierarchy I described before &lt;code&gt;svd2rust&lt;/code&gt; does 90% of the work by generating the device crates for us. Writing those by hand would be extremely tedious and error prone; it would also take lots of human hours to completely write a single device crate.&lt;/p&gt;
&lt;p&gt;The next level of the hierarchy, the HAL impl crates, need to be written by a human because semantics need to be understood (“what does this register do?”) and tools can’t do those for us. However, the way &lt;code&gt;svd2rust&lt;/code&gt; currently works will let us to write a bunch of duplicated code. Let me elaborate:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;svd2rust&lt;/code&gt; produces a single device crate per input SVD file. The SVD file can be generic like the STM32F30X.svd which covers &lt;em&gt;three&lt;/em&gt; device families: STM32F301xx, STM32F302xx and STM32F303xx; or less generic like the STM32F301X.svd, STM32F302X and STM32F303X.svd where each one targets &lt;em&gt;one&lt;/em&gt; of the device families mentioned before.&lt;/p&gt;
&lt;p&gt;You may already see where this is going. If we generated &lt;em&gt;three&lt;/em&gt; device crates and implemented &lt;em&gt;three&lt;/em&gt; HAL impl crates we would have ended with three very similar looking crates. By, instead, implementing the HAL for the more generic device crate we reduce the amount of required work by 66%.&lt;/p&gt;
&lt;p&gt;Vendors may not always provide these more generic SVD files but there are many similarities between devices from the same vendor, even if they are from different product lines. If we can make &lt;code&gt;svd2rust&lt;/code&gt; find those similarities to produce &lt;em&gt;shared&lt;/em&gt; crates (see below) for us we could make it do 99% of the implementation work.&lt;/p&gt;
&lt;p&gt;Ideally &lt;code&gt;svd2rust -i *.svd&lt;/code&gt; should generate crates like these:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// crate: stm32_common
pub struct GPIOA { .. }
// ..
pub struct USART1 { .. }
pub struct USART2 { .. }
pub struct USART3 { .. }
// ..
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// crate: stm32f10x
extern crate stm32_common;

// NOTE no USART3 here
pub use stm32_common::{GPIOA, .., USART1, USART2, ..};
&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// crate: stm32f20x
extern crate stm32_common;

pub use stm32_common::{GPIOA, .., USART1, USART2, USART3, ..};
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;Then the HAL implementation only needs to be done for the &lt;code&gt;stm32_common&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-rust&quot;&gt;// crate: stm32_common_hal

extern crate stm32_common;

use stm32_common::USART1;

pub struct Serial&amp;lt;USART, ..&amp;gt; { .. }

// this implementation supports devices from the STM32F10x, STM32F20x, etc. families
impl hal::serial::Write for Serial&amp;lt;USART1, ..&amp;gt; { .. }
&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;making-more-batteries&quot;&gt;Making more batteries&lt;/h2&gt;
&lt;p&gt;To encourage the use of the &lt;code&gt;embedded-hal&lt;/code&gt; traits and to grow the no-std crates.io ecosystem I’m starting &lt;a href=&quot;https://github.com/rust-embedded/rfcs/issues/39&quot;&gt;the weekly driver initiative&lt;/a&gt; 🎉.&lt;/p&gt;
&lt;p&gt;The goal is to release one generic, &lt;code&gt;no_std&lt;/code&gt;, &lt;code&gt;embedded-hal&lt;/code&gt; based driver crate every one or maybe two weeks. I can probably implement ~20 of these crates in a year on my own (I don’t think I have more than 30 external components with me in any case) so I hope others will join in so we can get way more crates published. A short blog post will accompany each driver release describing its functionality.&lt;/p&gt;
&lt;p&gt;That’s it for this post. Until next time.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;strong&gt;Thank you patrons! ❤️&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I want to wholeheartedly thank:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.sharebrained.com/&quot;&gt;&lt;img alt=&quot;ShareBrained Technology&quot; src=&quot;http://blog.japaric.io/logo/sharebrained.png&quot; width=&quot;200&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Razican&quot;&gt;Iban Eguia&lt;/a&gt;, &lt;a href=&quot;https://github.com/aturon&quot;&gt;Aaron Turon&lt;/a&gt;, &lt;a href=&quot;https://github.com/archaelus&quot;&gt;Geoff Cant&lt;/a&gt;, &lt;a href=&quot;http://www.harrisonchin.com/&quot;&gt;Harrison Chin&lt;/a&gt;, &lt;a href=&quot;https://github.com/brandonedens&quot;&gt;Brandon Edens&lt;/a&gt;, &lt;a href=&quot;https://github.com/whitequark&quot;&gt;whitequark&lt;/a&gt;, &lt;a href=&quot;https://jamesmunns.com/&quot;&gt;James Munns&lt;/a&gt;, &lt;a href=&quot;https://github.com/flundstrom2&quot;&gt;Fredrik Lundström&lt;/a&gt;, &lt;a href=&quot;https://github.com/kjetilkjeka&quot;&gt;Kjetil Kjeka&lt;/a&gt;, Kor Nielsen and 34 more people for &lt;a href=&quot;https://goo.gl/DZtACV&quot;&gt;supporting my work on Patreon&lt;/a&gt;.&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;Let’s discuss on &lt;a href=&quot;https://www.reddit.com/r/rust/comments/7r5jqw/eir_brave_new_io/&quot;&gt;reddit&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Enjoyed this post? Like my work on embedded stuff? Consider supporting my work on &lt;a href=&quot;https://goo.gl/DZtACV&quot;&gt;Patreon&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Follow me on &lt;a href=&quot;https://twitter.com/japaricious&quot;&gt;twitter&lt;/a&gt; for even more embedded stuff.&lt;/p&gt;
&lt;p&gt;The embedded Rust community gathers on the #rust-embedded IRC channel (irc.mozilla.org). Join us!&lt;/p&gt;
</description>
<pubDate>Fri, 19 Jan 2018 19:41:59 +0000</pubDate>
<dc:creator>kartD</dc:creator>
<og:title>Brave new I/O - Embedded in Rust</og:title>
<og:url>http://blog.japaric.io/brave-new-io/</og:url>
<og:description>A blog about Rust and embedded stuff</og:description>
<og:type>website</og:type>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://blog.japaric.io/brave-new-io/</dc:identifier>
</item>
</channel>
</rss>