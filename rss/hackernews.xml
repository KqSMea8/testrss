<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>H-1B furor: Canada smooths the way for techies</title>
<link>https://www.mercurynews.com/2018/10/08/h-1b-as-immigration-furor-roils-silicon-valley-canada-smoothes-way-for-techies/</link>
<guid isPermaLink="true" >https://www.mercurynews.com/2018/10/08/h-1b-as-immigration-furor-roils-silicon-valley-canada-smoothes-way-for-techies/</guid>
<description>&lt;p&gt;Two weeks: That’s how quickly a foreign technology worker in Silicon Valley can get an employment permit from Canada. In the U.S., that process takes months.&lt;/p&gt;
&lt;p&gt;As the administration of President Donald Trump has &lt;a href=&quot;https://www.mercurynews.com/2018/02/23/trump-administration-announces-more-h-1b-restrictions/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;increased scrutiny of H-1B visas&lt;/a&gt; for skilled foreign workers and plans to &lt;a href=&quot;https://www.mercurynews.com/2018/09/24/h-1b-spouses-work-ban-rule-coming-within-three-months-feds-say/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;ban their spouses&lt;/a&gt; from holding jobs in the U.S., Canada has been moving aggressively to suck top foreign talent out of Silicon Valley and other technology-rich regions of the U.S.&lt;/p&gt;
&lt;p&gt;The Canadian government won’t say if it’s leveraging the tumultuous and uncertain immigration climate in the U.S. But experts say Canada’s year-old “Global Skills Strategy” program, which offers work permits similar to America’s H-1B visa, is ideally structured to attract highly skilled foreign tech workers to Toronto, Montreal or Vancouver. Though immigrants make up just 20 percent of Canada’s population, they hold about half of the science, technology, engineering and math degrees at the bachelor’s level and above,  government figures show.&lt;/p&gt;

&lt;p&gt;Before the program launched, Canada’s employment permit process for skilled workers took months.&lt;/p&gt;
&lt;p&gt;“It captures all of the Silicon Valley people, and it captures them quickly,” said Asha Kaushal, a professor at the University of British Columbia law school who studies immigration law.&lt;/p&gt;
&lt;p&gt;Trump’s plan to overhaul the H-1B — a visa intended for the kind of skilled workers Silicon Valley companies rely on but attacked by critics as a tool to replace American workers with cheaper foreign labor — has ratcheted up anxiety levels and created uncertainty for many skilled foreign tech workers in the U.S.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[&lt;a href=&quot;https://www.mercurynews.com/2018/09/14/h-1b-spouses-bay-area-tech-workers-fear-theyll-have-to-leave/&quot;&gt;Work ban for H1-B spouses: ‘It is coming, it is inevitable.”&lt;/a&gt;]&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Former Bay Area software developer and Indian citizen Shobhit Khandelwal has already moved to Toronto. He came to work for note-taking app firm Evernote in Redwood City in February 2017, with a master’s in operations research from Columbia University, experience at Citibank and e-commerce company Jet.com, and an H-1B visa. Eighteen months later, he left.&lt;/p&gt;
&lt;p&gt;“I wanted to work on my own startup and I didn’t want to wait another 20 years or 30 years to get a green card,” said Khandelwal, 28, who acknowledged that the uncertain climate for immigrants in the U.S.&lt;strong&gt; &lt;/strong&gt;also played a role in his decision. “I thought about, if I do a startup (in the U.S.), if I can’t get the right kind of talent, how can I build a company?”&lt;/p&gt;

&lt;p&gt;Rather than simply get a work permit, Khandelwal opted to obtain permanent residence in Canada — the equivalent of a U.S. green card. It took about six months. In the U.S., Indian H-1B workers like him wait years, if not decades, for a green card. Later this month, Khandelwal plans to launch his startup’s artificial-intelligence-based parking-technology product.&lt;/p&gt;
&lt;p&gt;“I don’t have to worry about my visa, I don’t have to worry about am I going to be able to come back in if I leave the country,” he said.&lt;/p&gt;
&lt;p&gt;Uncertainty about U.S. visas and long waits for green cards were causing a brain drain in Silicon Valley long before Trump’s election. Canada has been working for years to grow its technology hubs, putting up recruiting billboards along Bay Area freeways as far back as 2013.&lt;/p&gt;
&lt;p&gt;But experts say the current climate has made Canada more appealing for some foreign workers&lt;span&gt;. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Matthew Kolken, a New York immigration lawyer whose firm helps clients immigrate to both Canada and the U.S., said he’s had about a dozen foreign-citizen clients decide to move to Canada even though they were already in the midst of official proceedings to come to the U.S.&lt;/p&gt;
&lt;p&gt;“They gave up on their American dream,” Kolken said. “You want to be able to plan your career and your future. Why would you put your entire career potentially on hold if you have a viable opportunity in a country that has open arms to you?”&lt;/p&gt;
&lt;img class=&quot;lazyautosizes lazyload&quot; src=&quot;https://i1.wp.com/www.mercurynews.com/wp-content/uploads/2018/10/SJM-L-CANADA-00002.jpg?fit=620%2C9999px&amp;amp;ssl=1&quot; width=&quot;908&quot;/&gt;Former LinkedIn software engineer Vikram Rangnekar, who moved from SiliconValley to Canada (Courtesy of Vikram Rangnekar) 
&lt;p&gt;Two years ago, software engineer Vikram Rangnekar, an Indian citizen, emigrated from the Bay Area to Canada with his wife and two small children. He left behind a region, and a job, he loved.&lt;/p&gt;
&lt;p&gt;“We would go to Santa Cruz all the time,” recalled Rangnekar, 36, who lived in Saratoga. “I used to love to drive Highway 17. It was like a racetrack. We were one of the few families who would drive up to San Francisco every weekend.” Working at LinkedIn, he said, was “the best thing ever.”&lt;/p&gt;
&lt;p&gt;But even though he had spent six years on an H-1B visa, a green card seemed no closer. And the H-1B locks employees to the company that obtained the visa. Rangnekar wanted both a sense of permanence in his life and flexibility in his career. The family moved to Toronto, where he now works for a tech startup and in his spare time runs the Mov North web forum for people interested in relocating to Canada.&lt;/p&gt;
&lt;p&gt;Hugo O’Doherty, co-founder of Moving2Canada.com, believes his country’s government and employers see the U.S. immigration climate as a boon.&lt;/p&gt;

&lt;p&gt;“There’s been like an all-out effort for capitalizing on the opportunity,” said O’Doherty. “You’re going to see even more people moving from the Bay Area to Canada in coming months and years.”&lt;/p&gt;
&lt;p&gt;O’Doherty, who saw U.S.-based traffic to his site more than double so far this year, said most Moving2Canada.com users are tech workers. On forums connected to the site, “You get people who are quite clear that Donald Trump is the reason they’re leaving the U.S. but you also get people who might’ve made the move anyway,” O’Doherty said.&lt;/p&gt;
&lt;p&gt;Google software engineer Karthik Ravindran, in Silicon Valley on an H-1B, applied for permanent residence in Canada late last year with his wife after the Trump administration first proposed banning foreign spouses from working. He received residence in four months.&lt;/p&gt;
&lt;p&gt;“It seems like a lot fairer system than in the U.S., unfortunately,” said Ravindran.&lt;/p&gt;
&lt;img class=&quot;lazyautosizes lazyload&quot; src=&quot;https://i1.wp.com/www.mercurynews.com/wp-content/uploads/2018/06/AFP_14Y2JU.jpg?fit=620%2C9999px&amp;amp;ssl=1&quot; alt=&quot;&quot; width=&quot;3000&quot; height=&quot;376&quot;/&gt;U.S. President Donald Trump (R) welcomes Canadian Prime Minister Justin Trudeau at the White House in Washington, DC. on October 11, 2017 (Saul Loeb/AFP/Getty Images) 
&lt;p&gt;When Canadian Prime Minister &lt;a href=&quot;https://www.mercurynews.com/2018/02/08/canadian-pm-justin-trudeau-talks-business-with-bay-area-tech-leaders/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Justin Trudeau visited the Bay Area earlier this year&lt;/a&gt; he declined to say whether Trump’s immigration policies were helping Canada attract skilled workers. Instead, Trudeau pointed to U.S. firms’ investments in Canada, including Salesforce’s $2 billion investment in its business there and a plan by AppDirect, another San Francisco tech company, to add 300 jobs in Canada over the next five years. Google and Facebook have established outposts in Canada, along with Amazon and Microsoft.&lt;/p&gt;
&lt;p&gt;A spokeswoman for the Canadian government also declined to address the impact of the current U.S. administration’s policies, saying only that Canada selects permanent residents for their “positive impact” on the country’s economy.&lt;/p&gt;
&lt;p&gt;“Immigration will continue to play a crucial role in keeping our country at the forefront of the global economy,” according to the government’s statement. “Thanks to immigration, Canada is in a strong position to face future labor-force challenges arising from our aging population.”&lt;/p&gt;
&lt;p&gt;[&lt;strong&gt;&lt;a href=&quot;https://www.mercurynews.com/2018/08/13/h-1b-use-skyrocketed-among-bay-area-tech-giants/&quot;&gt;The government cracked down on H1-B visas. It didn’t stop tech giants from hiring.&lt;/a&gt;&lt;/strong&gt;]&lt;/p&gt;
&lt;p&gt;Despite disruptions arising from Trump’s approach to immigration, the tech industry in Silicon Valley — where outrageous housing costs and horrific commutes are the norm — has more to worry about than Canada, said Harj Taggar, CEO of San Francisco-based Triplebyte, a jobs platform for software engineers.&lt;/p&gt;
&lt;aside class=&quot;related left&quot;&gt;
&lt;/aside&gt;
“The biggest threat to Silicon Valley is not so much from another country. I think it’s other locations in the U.S.,” Taggar said. “I am seeing more people leaving Silicon Valley for Seattle or Portland or, crazy as it sounds, to L.A.”
&lt;p&gt;But Michael Tippett, a prominent Vancouver technology entrepreneur who travels regularly to Silicon Valley to help foreign tech workers move to Canada and launch startups, believes the U.S. immigration climate under Trump will produce broad, long-term effects.&lt;/p&gt;
&lt;p&gt;“The brand of America as the land of the free and the place of opportunity has really taken a hit,” Tippett said. “It’s no longer the default go-to place for people who have world-class talent.”&lt;/p&gt;


</description>
<pubDate>Mon, 08 Oct 2018 17:53:34 +0000</pubDate>
<dc:creator>muzz</dc:creator>
<og:type>article</og:type>
<og:title>H-1B: As immigration furor roils Silicon Valley, Canada smooths way for techies</og:title>
<og:url>https://www.mercurynews.com/2018/10/08/h-1b-as-immigration-furor-roils-silicon-valley-canada-smoothes-way-for-techies/</og:url>
<og:description>“They gave up on their American dream,” says immigration lawyer.</og:description>
<og:image>https://www.mercurynews.com/wp-content/uploads/2018/10/SJM-L-CANADA-0000.jpg?w=1024&amp;h=768</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.mercurynews.com/2018/10/08/h-1b-as-immigration-furor-roils-silicon-valley-canada-smoothes-way-for-techies/</dc:identifier>
</item>
<item>
<title>Shutting Down Google+ for Consumers</title>
<link>https://blog.google/technology/safety-security/project-strobe/</link>
<guid isPermaLink="true" >https://blog.google/technology/safety-security/project-strobe/</guid>
<description>&lt;p&gt;Many third-party apps, services and websites build on top of our various services to improve everyone’s phones, working life, and online experience. We strongly support this active ecosystem. But increasingly, its success depends on users knowing that their data is secure, and on developers having clear rules of the road.&lt;/p&gt;
&lt;p&gt;Over the years we’ve continually &lt;a href=&quot;https://developers.googleblog.com/2017/05/updating-developer-identity-guidelines.html&quot;&gt;strengthened&lt;/a&gt; &lt;a href=&quot;https://android-developers.googleblog.com/2017/12/improving-app-security-and-performance.html&quot;&gt;our&lt;/a&gt; &lt;a href=&quot;https://myaccount.google.com/security-checkup&quot;&gt;controls and policies&lt;/a&gt; in response to regular internal reviews, user feedback and evolving expectations about data privacy and security.&lt;/p&gt;
&lt;p&gt;At the beginning of this year, we started an effort called Project Strobe—a root-and-branch review of third-party developer access to Google account and Android device data and of our philosophy around apps’ data access. This project looked at the operation of our privacy controls, platforms where users were not engaging with our APIs because of concerns around data privacy, areas where developers may have been granted overly broad access, and other areas in which our policies should be tightened.  &lt;/p&gt;
&lt;p&gt;We’re announcing the first four findings and actions from this review today.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Finding 1: There are significant challenges in creating and maintaining a successful Google+ product that meets consumers’ expectations.&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Action 1: We are shutting down Google+ for consumers.&lt;/strong&gt;&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;Over the years we’ve received feedback that people want to better understand how to control the data they choose to share with apps on Google+. So as part of Project Strobe, one of our first priorities was to closely review all the APIs associated with Google+.  &lt;/p&gt;
&lt;p&gt;This review crystallized what we’ve known for a while: that while our engineering teams have put a lot of effort and dedication into building Google+ over the years, it has not achieved broad consumer or developer adoption, and has seen limited user interaction with apps. The consumer version of Google+ currently has low usage and engagement: 90 percent of Google+ user sessions are less than five seconds.&lt;/p&gt;
&lt;p&gt;Our review showed that our Google+ APIs, and the associated controls for consumers, are challenging to develop and maintain. Underlining this, as part of our Project Strobe audit, we discovered a bug in one of the Google+ People APIs:&lt;/p&gt;
&lt;ul readability=&quot;16.732784431138&quot;&gt;&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;Users can grant access to their Profile data, and the public Profile information of their friends, to Google+ apps, via the API.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;The bug meant that apps also had access to Profile fields that were shared with the user, but not marked as public.  &lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;9.4017094017094&quot;&gt;
&lt;p&gt;This data is limited to static, optional Google+ Profile fields including name, email address, occupation, gender and age. (See the full list &lt;a href=&quot;https://developers.google.com/+/web/api/rest/latest/people&quot;&gt;on our developer site&lt;/a&gt;.) It &lt;strong&gt;does not&lt;/strong&gt; include &lt;strong&gt;any other data&lt;/strong&gt; you may have posted or connected to Google+ or any other service, like Google+ posts, messages, Google account data, phone numbers or G Suite content.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;We discovered and immediately patched this bug in March 2018. We believe it occurred after launch as a result of the API’s interaction with a subsequent Google+ code change.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;6&quot;&gt;
&lt;p&gt;We made Google+ with privacy in mind and therefore keep this API’s log data for only two weeks. That means we cannot confirm which users were impacted by this bug. However, we ran a detailed analysis over the two weeks prior to patching the bug, and from that analysis, the Profiles of up to 500,000 Google+ accounts were potentially affected. Our analysis showed that up to 438 applications may have used this API.&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;We found &lt;strong&gt;no evidence&lt;/strong&gt; that any developer was aware of this bug, or abusing the API, and we found &lt;strong&gt;no evidence&lt;/strong&gt; that any Profile data was misused.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Every year, we send millions of notifications to users about privacy and security bugs and issues. Whenever user data may have been affected, we go beyond our legal requirements and apply several criteria focused on our users in determining whether to provide notice.&lt;/p&gt;
&lt;p&gt;Our Privacy &amp;amp; Data Protection Office reviewed this issue, looking at the type of data involved, whether we could accurately identify the users to inform, whether there was any evidence of misuse, and whether there were any actions a developer or user could take in response. None of these thresholds were met in this instance.&lt;/p&gt;
&lt;p&gt;The review did highlight the significant challenges in creating and maintaining a successful Google+ that meets consumers’ expectations. Given these challenges and the very low usage of the consumer version of Google+, we decided to sunset the consumer version of Google+.&lt;/p&gt;
&lt;p&gt;To give people a full opportunity to transition, we will implement this wind-down over a 10-month period, slated for completion by the end of next August. Over the coming months, we will provide consumers with additional information, including ways they can download and migrate their data.&lt;/p&gt;
&lt;p&gt;At the same time, we have many enterprise customers who are finding great value in using Google+ within their companies. Our review showed that Google+ is better suited as an enterprise product where co-workers can engage in internal discussions on a secure corporate social network. Enterprise customers can set common access rules, and use central controls, for their entire organization. We’ve decided to focus on our enterprise efforts and will be launching new features purpose-built for businesses. We will share more information in the coming days.  &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Finding 2: People want fine-grained controls over the data they share with apps.&lt;br/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Action 2: We are launching more granular Google Account permissions that will show in individual dialog boxes.&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;When an app prompts you for access to your Google account data, we always require that you see what data it has asked for, and you must grant it explicit permission.&lt;/p&gt;
&lt;p&gt;Going forward, consumers will get more fine-grained control over what account data they choose to share with each app. Instead of seeing all requested permissions in a single screen, apps will have to show you each requested permission, one at a time, within its own dialog box.  For example, if a developer requests access to both calendar entries and Drive documents, you will be able to choose to share one but not the other. Developers can read more on the &lt;a href=&quot;https://developers.googleblog.com/2018/10/more-granular-google-account.html&quot;&gt;Google Developer Blog&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This is what the process looks like today when an app requests access to any data in your consumer Google account (you've always been able to choose whether to grant that permission request):&lt;/p&gt;
</description>
<pubDate>Mon, 08 Oct 2018 17:14:39 +0000</pubDate>
<dc:creator>Nemant</dc:creator>
<og:type>article</og:type>
<og:title>Project Strobe: Protecting your data, improving our third-party APIs, and sunsetting consumer Google+</og:title>
<og:description>Findings and actions from Project Strobe—a root-and-branch review of third-party developer access to Google account and Android device data and of our philosophy around apps’ data access.</og:description>
<og:image>https://www.blog.google/static/blogv2/images/google-200x200.7714256da16f.png</og:image>
<og:url>https://www.blog.google/technology/safety-security/project-strobe/</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.google/technology/safety-security/project-strobe/</dc:identifier>
</item>
<item>
<title>Google Exposed User Data, Feared Repercussions of Disclosing to Public</title>
<link>https://www.wsj.com/articles/google-exposed-user-data-feared-repercussions-of-disclosing-to-public-1539017194</link>
<guid isPermaLink="true" >https://www.wsj.com/articles/google-exposed-user-data-feared-repercussions-of-disclosing-to-public-1539017194</guid>
<description>&lt;p&gt;Google exposed the private data of hundreds of thousands of users of the Google+ social network and then opted not to disclose the issue this past spring, in part because of fears that doing so would draw regulatory scrutiny and cause reputational damage, according to people briefed on the incident and documents reviewed by The Wall Street Journal.&lt;/p&gt; &lt;p&gt;As part of its response to the incident, the Alphabet Inc. unit on Monday announced a sweeping set of data privacy measures that include permanently shutting down all consumer functionality...
  &lt;/p&gt;</description>
<pubDate>Mon, 08 Oct 2018 16:49:47 +0000</pubDate>
<dc:creator>tysone</dc:creator>
<og:title>Google Exposed User Data, Feared Repercussions of Disclosing to Public</og:title>
<og:description>Google exposed the private data of hundreds of thousands of users of the Google+ social network, though it didn’t find evidence of misuse. The company opted not to disclose the issue this past spring, in part because of fears doing so would draw regulatory scrutiny.</og:description>
<og:url>https://www.wsj.com/articles/google-exposed-user-data-feared-repercussions-of-disclosing-to-public-1539017194</og:url>
<og:image>https://images.wsj.net/im-29785/social</og:image>
<og:type>article</og:type>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.wsj.com/articles/google-exposed-user-data-feared-repercussions-of-disclosing-to-public-1539017194</dc:identifier>
</item>
<item>
<title>Today Is My Wife’s First Birthday Since She Died</title>
<link>https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec</link>
<guid isPermaLink="true" >https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec</guid>
<description>&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*n62yO14ZXx7B4nAkrWgsIw.jpeg&quot; data-width=&quot;1609&quot; data-height=&quot;1261&quot; data-is-featured=&quot;true&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*n62yO14ZXx7B4nAkrWgsIw.jpeg&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*n62yO14ZXx7B4nAkrWgsIw.jpeg&quot;/&gt;&lt;/div&gt;
Alex a few months after we started dated on the left. A pretty recent photo (in Thailand) on the right.
&lt;ol class=&quot;postList&quot;&gt;&lt;li name=&quot;b639&quot; id=&quot;b639&quot; class=&quot;graf graf--li graf-after--figure&quot;&gt;&lt;a href=&quot;https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec#bed9&quot; data-href=&quot;#bed9&quot; class=&quot;markup--anchor markup--li-anchor&quot;&gt;Quickly Catching you Up: Alex’s Death &amp;amp; memorials&lt;/a&gt;&lt;/li&gt;
&lt;li name=&quot;0b02&quot; id=&quot;0b02&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;&lt;a href=&quot;https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec#0263&quot; data-href=&quot;#0263&quot; class=&quot;markup--anchor markup--li-anchor&quot;&gt;3 pieces of advice about Death and Love&lt;/a&gt;&lt;/li&gt;
&lt;li name=&quot;13ad&quot; id=&quot;13ad&quot; class=&quot;graf graf--li graf--startsWithDoubleQuote graf-after--li&quot;&gt;&lt;a href=&quot;https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec#8834&quot; data-href=&quot;#8834&quot; class=&quot;markup--anchor markup--li-anchor&quot;&gt;“How is Tony doing?”&lt;/a&gt;&lt;/li&gt;
&lt;li name=&quot;2c09&quot; id=&quot;2c09&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;&lt;a href=&quot;https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec#b9e1&quot; data-href=&quot;#b9e1&quot; class=&quot;markup--anchor markup--li-anchor&quot;&gt;Get to know Alex (better)&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h3 name=&quot;bed9&quot; id=&quot;bed9&quot; class=&quot;graf graf--h3 graf-after--li&quot;&gt;Alex’s Death and Memorials&lt;/h3&gt;
&lt;p name=&quot;2982&quot; id=&quot;2982&quot; class=&quot;graf graf--p graf-after--h3&quot;&gt;To catch you up: Alex died on July 17th. She was fishing in Alaska at the mouth of the Kenai River — one of her favorite places in the world. She went to this fishery each of the 20 years we were together, even after we moved away from Alaska. She was with one of her best friends. The fish were just starting to run after crappy fishing the day before and I’ll bet Alex was grinning ear to ear.&lt;/p&gt;
&lt;p name=&quot;41ef&quot; id=&quot;41ef&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;The medical examiner said that her heart just stopped — so I think we can safely hope that she died painlessly. There were EMTs fishing a few feet away and they did CPR for more than 90 minutes, but she was never responsive after she collapsed.&lt;/p&gt;
&lt;p name=&quot;366d&quot; id=&quot;366d&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Turns out the EMTs were heroes for keeping her blood flowing until they could get her body hooked up to life support. The hospital kept her body alive for a few days to allow some of her organs to heal — as an organ donor, she helped dozens of people in death — giving people years of life, sight, mobility, and more.&lt;/p&gt;
&lt;p name=&quot;fb28&quot; id=&quot;fb28&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;We had a small memorial with her family in Alaska up in Hatcher Pass (near the trailhead of our favorite hike in the world).&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*fZ3nuoJGgQq_8X2qEIz9Cw.jpeg&quot; data-width=&quot;3036&quot; data-height=&quot;4048&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*fZ3nuoJGgQq_8X2qEIz9Cw.jpeg&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*fZ3nuoJGgQq_8X2qEIz9Cw.jpeg&quot;/&gt;&lt;/div&gt;
Reed Lakes — a hike a few miles where we had our Alaska Memorial for Alex.
&lt;p name=&quot;d452&quot; id=&quot;d452&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;We had an amazing memorial here in Seattle where hundreds came together. A whole mess of us of jumped in a lake together, which I think Alex would’ve gotten a kick out of.&lt;/p&gt;

&lt;h3 name=&quot;0263&quot; id=&quot;0263&quot; class=&quot;graf graf--h3 graf-after--figure&quot;&gt;3 pieces of Advice about Death and Love&lt;/h3&gt;
&lt;p name=&quot;a47c&quot; id=&quot;a47c&quot; class=&quot;graf graf--p graf-after--h3&quot;&gt;People say that events like this give you perspective, and they are sure as hell right about that. The stuff that you &lt;em class=&quot;markup--em markup--p-em&quot;&gt;thought&lt;/em&gt; was important melts away and what’s left is what really matters. I don’t know how transferable this perspective is, but I’m going to do my best. Below is the advice I wish someone had given to me years ago. I’m unsure if I would’ve listened. I’m not sure if you will either, but here goes.&lt;/p&gt;
&lt;p name=&quot;34d9&quot; id=&quot;34d9&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;#1: Imagine the sudden death of people you love most&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;9c97&quot; id=&quot;9c97&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I can tell you a bit about how it feels to lose your partner after 20 years of being together. There are the obvious emotions — sadness, anger, and a bit of gratitude for the time we did have. The overwhelming thing for me is regret and a wish for a chance to redo our last years together. Don’t get me wrong — our last years were pretty damn good. I think we did marriage better than 95% of couples do at this stage. But it doesn’t matter how good your relationship is — I promise you’ll be buried in regrets like these when the time comes.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*MKmlqKnhV39IhDuQ68Oz8Q.png&quot; data-width=&quot;1184&quot; data-height=&quot;1160&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*MKmlqKnhV39IhDuQ68Oz8Q.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*MKmlqKnhV39IhDuQ68Oz8Q.png&quot;/&gt;&lt;/div&gt;
The last picture of Alex and I together (on Whidbey Island)
&lt;p name=&quot;0181&quot; id=&quot;0181&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;This feels like a particular awful thing to ask someone to do, but I believe if everyone &lt;em class=&quot;markup--em markup--p-em&quot;&gt;truly&lt;/em&gt; were able to imagine the sudden death of the folks they love, it would change how they live.&lt;/p&gt;
&lt;p name=&quot;a2f6&quot; id=&quot;a2f6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;With all of the demands of life, we can’t give (much) more time to the people we love without taking it away from other love-worthy people/things… But we can easily change is how we treat people with the time that we have. We can say “I love you” more, and more earnestly. We can tell people when we’re proud of them. That we admire them. That they are important to us. We can say the things we’re leaving unsaid because they are hard or because they make us feel weak. We can put our phones away and listen better. And when the warmth leaks out of our relationships, we can pro-actively try to get it back.&lt;/p&gt;
&lt;p name=&quot;1aad&quot; id=&quot;1aad&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;So please: imagine your closest relationships, and imagine losing them in an instant. Figure out what would be left unsaid and say it. Think about how you’d wish you treated them, and… just treat them that way. Don’t take people for granted. Don’t let a month go by without thinking about this.&lt;/p&gt;
&lt;p name=&quot;148f&quot; id=&quot;148f&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;#2: Read the love letters (or equivalent)&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;bd68&quot; id=&quot;bd68&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I have oceans of “Widower Homework” to do — one such task is wading through the storage rooms. Alex and I were pretty good at living light, but she saved a big tote of pre-digital photos. In this tote I found a collection of letters and cards she had saved that we sent each other over the years (which had sadly trickled to a stop 10ish years into our relationship). I’ve read them dozens of times in the last few weeks.&lt;/p&gt;
&lt;p name=&quot;4623&quot; id=&quot;4623&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Relationships evolve, and I suppose we can can never get the head-over-heels feelings of the first months back… I certainly wouldn’t trade the feelings of comfort, trust, and companionship in our 20th year for the anxious puppy love of the first month.&lt;/p&gt;
&lt;p name=&quot;a4e6&quot; id=&quot;a4e6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;But it’s worth trying to hold onto some of that stuff, I think. I’ve run across very few relationships that still seem sweet/loving after 10 years, many that feel downright perfunctory, and plenty that feel snippy. If this is the natural (d)evolution of marriage, how can we fight that? Maybe one answer lies with one of the weapons we’ve found in the fight against depression.&lt;/p&gt;
&lt;p name=&quot;f651&quot; id=&quot;f651&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Humans have done a miserable job of figuring out how to treat depression. Broadly, science &lt;a href=&quot;https://www.thelancet.com/journals/lancet/article/PIIS0140-6736%2816%2930385-3/abstract&quot; data-href=&quot;https://www.thelancet.com/journals/lancet/article/PIIS0140-6736(16)30385-3/abstract&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;says anti-depressants don’t work&lt;/a&gt;. Most &lt;a href=&quot;https://well.blogs.nytimes.com/2013/03/25/looking-for-evidence-that-therapy-works/&quot; data-href=&quot;https://well.blogs.nytimes.com/2013/03/25/looking-for-evidence-that-therapy-works/&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;therapy doesn’t work and most therapists don’t follow evidence-based methodologies&lt;/a&gt;. One thing that actually seems to work is &lt;a href=&quot;https://www.health.harvard.edu/newsletter_article/in-praise-of-gratitude&quot; data-href=&quot;https://www.health.harvard.edu/newsletter_article/in-praise-of-gratitude&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;gratitude journaling&lt;/a&gt; — just thinking about and writing down stuff that you’re grateful for on a daily basis.&lt;/p&gt;
&lt;p name=&quot;19c7&quot; id=&quot;19c7&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;People who are depressed can always find the negative side of any situation. The paths of your brain get deep ruts that are hard to break out of. Repeatedly thinking/writing thoughts that might not be entirely natural for you carve new ruts that make it easier to think positive thoughts… I believe it’s actually rewiring your brain.&lt;/p&gt;
&lt;p name=&quot;4264&quot; id=&quot;4264&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;So perhaps having little monthly celebrations where you read old letters with each other, look at old photos together, talk about your gratitude towards each other, etc — can help keep your brain wired for love.&lt;/p&gt;
&lt;p name=&quot;71a3&quot; id=&quot;71a3&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Alex and I didn’t do this, and I think we did better than many couples. But as much as I loved her, as much as I admired her, and as good as we were as partners — I often was a little sad about the state of our relationship. It wasn’t what I hoped our marriage would be and I think we’d both given up on changing that. What a fucking idiot I was.&lt;/p&gt;
&lt;p name=&quot;e7e3&quot; id=&quot;e7e3&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;There’s a lot of struggle at times like these between guilt and regret. When I say stuff like this, people naturally say, “stop beating yourself up — you guys were great!”. Guilt is something you feel when you knew better but you did the wrong/selfish thing. I don’t feel (much) guilt about this — I just didn’t have this perspective. Instead, I mostly feel regret. It turns out that regret hurts plenty too… I’m hoping that I can spare some folks that.&lt;/p&gt;
&lt;p name=&quot;ee1d&quot; id=&quot;ee1d&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;Advice #3: What to do with a friend, acquaintance, or stranger who is grieving?&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;2f3e&quot; id=&quot;2f3e&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;A year before Alex died, my friend (and co-founder at RescueTime) Joe died after a multi-year struggle with cancer. I look back at how I treated him in these years with a lot of regret (and a little guilt).&lt;/p&gt;
&lt;p name=&quot;54e9&quot; id=&quot;54e9&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;For most of this time, I would often say “In Joe’s shoes, I wouldn’t want people to see me like that.” and “My job is to respect Joe’s wishes and his space”. So I’d (less frequently than I should) send Joe emails or texts with something like this:&lt;/p&gt;
&lt;blockquote name=&quot;acb1&quot; id=&quot;acb1&quot; class=&quot;graf graf--blockquote graf-after--p&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;Hey Man- How are things going? I would love to see you and would drop everything anytime you feel up for it. We could go see a movie, rent a movie, play a board game, or just hang out and stare at the wall. Whatever you want…. Just say the word! -T&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p name=&quot;20ce&quot; id=&quot;20ce&quot; class=&quot;graf graf--p graf-after--blockquote&quot;&gt;Just say the word. He never did say the word much. He did host a birthday BBQ every year where his friends would gather and he always seemed to enjoy the heck out of it.&lt;/p&gt;
&lt;p name=&quot;b0a6&quot; id=&quot;b0a6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;When I saw people I knew less well grieving about some sort of horrible life event, I often wouldn’t do so much as send a note. “I don’t know them well enough” , I’d say to myself, “It’d feel fake/forced for me to reach out now.”&lt;/p&gt;
&lt;p name=&quot;21eb&quot; id=&quot;21eb&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;When stuff like this happens, communication from friends and strangers is like oxygen. Even the little “thinking of you, sorry for your loss” notes from near strangers help.&lt;/p&gt;
&lt;p name=&quot;cf02&quot; id=&quot;cf02&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I’m grateful for my friends/family who didn’t ask — they showed up. They’d email or call, and if they didn’t hear back, they’d email or call some more. My people (and many near-strangers) have been better at supporting me than I’ve been in the past at supporting others. But I won’t make that mistake again.&lt;/p&gt;
&lt;p name=&quot;76ac&quot; id=&quot;76ac&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Once more — regret, not guilt. I didn’t know any better but I sure as hell do now.&lt;/p&gt;
&lt;p name=&quot;11a2&quot; id=&quot;11a2&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;So what can you do to help the grieving? Here are some of the things that have helped me:&lt;/p&gt;
&lt;ol class=&quot;postList&quot;&gt;&lt;li name=&quot;7aac&quot; id=&quot;7aac&quot; class=&quot;graf graf--li graf-after--p&quot;&gt;Just send a note saying you’re thinking of them — even if you don’t know them well. They need these notes as munch a month in as the do in the first days, so don’t be shy about sending more than one.&lt;/li&gt;
&lt;li name=&quot;85bb&quot; id=&quot;85bb&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;If the person who died impacted you in some way, however small, tell the survivors about it. When life rubs your nose in the impermanence of all of this, the idea that the person you’ve lost is impacting another human helps.&lt;/li&gt;
&lt;li name=&quot;2895&quot; id=&quot;2895&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;If you’re close enough to the survivors (or if they don’t seem like they have a lot of support), spend time with them. Don’t put the ball in their court. It’s a very rational feeling for grieving folks to say, “No one REALLY wants to be around someone in my state of mind — so I’ll spare them that.” You have to be pushy, which feels a bit unnatural when you’re trying to be respectful.&lt;/li&gt;
&lt;li name=&quot;8f94&quot; id=&quot;8f94&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;After a week or two, keep friends busy with “normal” stuff. Yes, grieving people need to talk about their loss. But it’s also great to take hikes, play games, watch movies, and otherwise learn how to have fun again.&lt;/li&gt;
&lt;li name=&quot;277c&quot; id=&quot;277c&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;If you’ve gone through something like this and navigated to a happy life, tell them about the journey and the destination. Don’t stretch too far for this (“I lost a dog when I was 12” isn’t terribly comforting). One woman I went to college with (but didn’t know very well) reached out and told me her fiancee was murdered when she was 25. She said she still cries about it from time to time. But she also told me that she’d married, had kids, and found happiness. Hearing that helps.&lt;/li&gt;
&lt;li name=&quot;bbd5&quot; id=&quot;bbd5&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Donate to causes on behalf of the person who died and tell the grieving folks about (I wrote about Alex’s causes &lt;a href=&quot;https://medium.com/@webwright/my-wife-died-suddenly-a-week-ago-in-lieu-of-flowers-29ab403686d0&quot; data-href=&quot;https://medium.com/@webwright/my-wife-died-suddenly-a-week-ago-in-lieu-of-flowers-29ab403686d0&quot; class=&quot;markup--anchor markup--li-anchor&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;). There’s a (very rational) fear that the world will forget and that her impact will dissipate. I guess it will someday, but fighting against that helps. People have sent me hundreds of notes about donations to Alex’s causes that I’ve been keeping on the counter.&lt;/li&gt;
&lt;li name=&quot;e168&quot; id=&quot;e168&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;If you worked with someone who died and were close to them, reach out to their spouse (a lot) — even if you didn’t know them well (or at all!). Some of the most important support in the last few months has come from Alex’s coworkers. Before this, I didn’t know many of them very well. But, aside from me, these are people who spent more time with Alex than anyone over the last four years. And because they were in a non-profit, I think those bonds were especially close — they were brothers and sisters-in-arms fighting to make the world a little better. So it stands to reason that they are grieving as much as I am.&lt;/li&gt;
&lt;/ol&gt;&lt;h3 name=&quot;8834&quot; id=&quot;8834&quot; class=&quot;graf graf--h3 graf-after--li&quot;&gt;How is Tony doing?&lt;/h3&gt;
&lt;p name=&quot;360f&quot; id=&quot;360f&quot; class=&quot;graf graf--p graf--startsWithDoubleQuote graf-after--h3&quot;&gt;“How’s it going?” I can watch people cringe when they say this automatically at the beginning of conversations.&lt;/p&gt;
&lt;p name=&quot;55a3&quot; id=&quot;55a3&quot; class=&quot;graf graf--p graf--startsWithDoubleQuote graf-after--p&quot;&gt;“Oh fuck, that was probably the worst question I could ask him,” I imagine them saying to themselves.&lt;/p&gt;
&lt;p name=&quot;dca1&quot; id=&quot;dca1&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;First, it’s a fine question to ask — it allows me to gush if I need to or say something light if I don’t.&lt;/p&gt;
&lt;p name=&quot;defe&quot; id=&quot;defe&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;But here’s the answer, since it’s definitely a FAQ: &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;It’s going as well as could be expected.&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;ac35&quot; id=&quot;ac35&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;This is an empty-sounding phrase, but it’s not an empty sentiment.&lt;/p&gt;
&lt;p name=&quot;d786&quot; id=&quot;d786&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I am ridiculously well-supported. When people reach out to me to spend time, I joke that my comfort calendar is full and that perhaps I could squeeze them in for 30 minutes of comfort next Tuesday. I apologize to folks who I’ve accidentally ghosted — my inbox and calendar are a tornado.&lt;/p&gt;
&lt;p name=&quot;a1fe&quot; id=&quot;a1fe&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I’m staying healthy. I’m exercising every day, eating well, and drinking less than I used to. My instincts are telling me to blow off exercise, be alone, do shots of whiskey, and eat donuts, but I’m not doing any of that… Alex wouldn’t want me to and she’s in charge right now.&lt;/p&gt;
&lt;p name=&quot;14e9&quot; id=&quot;14e9&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I have a lot to be grateful for. A lot of people in these situations have hate/anger mixed into the grief (hate for a reckless driver, an ineffective health care system, etc). Alex died instantly/painlessly. Or they feel tons of guilt for being a crappy spouse/friend. Alex and I had an pretty amazing life and I was on sabbatical for the last 9 months… so was more present than I otherwise would’ve been. We had a better marriage than most that I’ve come across. I still feel a ton of regret — even if I was pretty solid as a husband, it would have been &lt;em class=&quot;markup--em markup--p-em&quot;&gt;so easy to be a kinder, more loving, more generous partner.&lt;/em&gt; But mostly I manage to keep the regret in check.&lt;/p&gt;
&lt;p name=&quot;e480&quot; id=&quot;e480&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Lots of people in these situations have kids. I can’t imagine trying to go through this while simultaneously trying to help kids through it. I have a dog, and he seems oblivious to her absence.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*WcJZfG5XF_6Jt8rtcO06rA.jpeg&quot; data-width=&quot;2848&quot; data-height=&quot;4288&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*WcJZfG5XF_6Jt8rtcO06rA.jpeg&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*WcJZfG5XF_6Jt8rtcO06rA.jpeg&quot;/&gt;&lt;/div&gt;
Here, have a Pim picture, complete with side-tongue. (photo credit to Addy Wright)
&lt;p name=&quot;ff9e&quot; id=&quot;ff9e&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Tons of people who go through this have financial woes — because they were hammered by medical bills because of a prolonged illness, they lack savings, or because they just lost half (or all) of their family’s income. I have plenty of money — not enough where I can retire in style… But I was already in sabbatical-mode, and don’t have to worry about going back to work for a years if I didn’t feel like it (despite this, I’m actually eager to figure out what’s next professionally!).&lt;/p&gt;
&lt;p name=&quot;fec2&quot; id=&quot;fec2&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;So I kinda have this in easy mode. It turns out easy mode is still unimaginably hard. I cry every day at some point, and for every time I cry, I feel like I’m on the verge of crying half a dozen times. From what other people who’ve lost loved ones have told me, this is just how it is. It does slow down a bit but it never goes away — you just learn to live with it.&lt;/p&gt;
&lt;p name=&quot;e0df&quot; id=&quot;e0df&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I’m able to have fun, be with friends, tell jokes, think about work. I can talk about Alex without falling apart. Sometimes I feel like I’m just going through the motions of living, but most of the time I’m just living.&lt;/p&gt;
&lt;p name=&quot;d7a4&quot; id=&quot;d7a4&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;It’s hard to know what a grieving person is supposed to &lt;em class=&quot;markup--em markup--p-em&quot;&gt;do.&lt;/em&gt; I know that Alex would want me to go have an awesome life as soon as possible, but she’d also want me to do whatever I needed to do to grieve.&lt;/p&gt;
&lt;p name=&quot;3559&quot; id=&quot;3559&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;So what &lt;em class=&quot;markup--em markup--p-em&quot;&gt;should&lt;/em&gt; I do? Am I crying enough? Not enough? Should I talk about her more or less? Think about her more or less? I often listen to emotional songs and go through the same photos and letters over and over again. Is that processing or masochism?&lt;/p&gt;

This is my current favorite masochism music.
&lt;p name=&quot;5878&quot; id=&quot;5878&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;I think my grieving playbook for the next year or so is:&lt;/p&gt;
&lt;ul class=&quot;postList&quot;&gt;&lt;li name=&quot;7499&quot; id=&quot;7499&quot; class=&quot;graf graf--li graf-after--p&quot;&gt;Do what comes naturally and don’t feel guilty about it.&lt;/li&gt;
&lt;li name=&quot;21c1&quot; id=&quot;21c1&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Avoid the temptation to wallow/suffer needlessly — seeking out pain doesn’t honor her — living a better life and being a better person as a result of this does.&lt;/li&gt;
&lt;li name=&quot;aa00&quot; id=&quot;aa00&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Ask “what would Alex want” and “what would Alex do” at every fork in the road.&lt;/li&gt;
&lt;/ul&gt;&lt;h3 name=&quot;b9e1&quot; id=&quot;b9e1&quot; class=&quot;graf graf--h3 graf-after--li&quot;&gt;Get to Know Alex&lt;/h3&gt;
&lt;p name=&quot;9def&quot; id=&quot;9def&quot; class=&quot;graf graf--p graf-after--h3&quot;&gt;Have you seen those memorial decals people put on the back of car windows? “Theresa Smith — 1976–2018 RIP”. I’ve always found those strange, but I understand them now. It’s the same urge that drives us to plant tombstones or little memorials by the road where people have died. As I write these words, the torrent of emails and Facebook messages have slowed to a trickle and I find myself saying, “No. You can’t forget her yet.” We’re so good at not seeing the impermanence of all of this. When someone you love dies, you &lt;em class=&quot;markup--em markup--p-em&quot;&gt;see the impermanence.&lt;/em&gt; You can’t stop seeing it. You feel compelled to fight against it.&lt;/p&gt;
&lt;p name=&quot;7a7d&quot; id=&quot;7a7d&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;You can’t, of course. On our year traveling the world, Alex and I would often look at gravestones near old decrepit churches. At some point in history, these gravestones were new and people would perhaps lay flowers on them. Years later, maybe a relative or two would come by on an anniversary or birthday. Decades later, maybe some stranger from the same village would recognize the name and smile slightly. But soon, the marker is anonymous. When we saw many of them, the march of nature had worn them into illegibility. Tombstones are a shout in the dark, but eventually the echoes subside.&lt;/p&gt;
&lt;p name=&quot;f83b&quot; id=&quot;f83b&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;So this post is my digital tombstone for Alex. I like to think it’s better because it’ll help me remember her. And maybe help you know her a little better so you can remember her as well.&lt;/p&gt;
&lt;p name=&quot;60d5&quot; id=&quot;60d5&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;For those who never met her — Alex lived life in a way that was just downright dazzling. She was fearless — she could fish, lead a team at work, keep bees, raise chickens, cook a gourmet meal, grow veggies, replace a toilet, knit a hat, eat termites right out of a hive, make jewelry, behead a turkey, do carpentry, raise millions of dollars for a non-profit, travel anywhere in the world, throw on a ball gown for a formal event, tile a floor, make bread, storm up a mountain without breaking a sweat, wrangle a snowmachine, run a marathon, fly an airplane, troubleshoot an outboard motor, eat a tarantula, cross country ski, and fillet 100 salmon in record time.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*FgyTGmku3rzB59YAkDbKvw.jpeg&quot; data-width=&quot;960&quot; data-height=&quot;960&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*FgyTGmku3rzB59YAkDbKvw.jpeg&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*FgyTGmku3rzB59YAkDbKvw.jpeg&quot;/&gt;&lt;/div&gt;
A few months before she died, Alex posted this. The caption was “&lt;a href=&quot;https://www.facebook.com/tony.wright?__tn__=%2CdK%2AF-R&amp;amp;eid=ARAHy3f0wPZs-tgc1Po3OwoIxe6Etpq2azkTxk-j0MmpC28KMrqNC3p6vI8pUpCmWzwoJyB433xl9Igp&quot; data-href=&quot;https://www.facebook.com/tony.wright?__tn__=%2CdK%2AF-R&amp;amp;eid=ARAHy3f0wPZs-tgc1Po3OwoIxe6Etpq2azkTxk-j0MmpC28KMrqNC3p6vI8pUpCmWzwoJyB433xl9Igp&quot; class=&quot;markup--anchor markup--figure-anchor&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;Tony&lt;/a&gt; had plans tonight so I did this.&lt;a href=&quot;https://www.facebook.com/hashtag/fridaynightplumbing&quot; data-href=&quot;https://www.facebook.com/hashtag/fridaynightplumbing&quot; class=&quot;markup--anchor markup--figure-anchor&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;#fridaynightplumbing&lt;/a&gt;”
&lt;p name=&quot;2a34&quot; id=&quot;2a34&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;When Alex and I started dating, I was in awe of her. I’d recently moved up to Alaska and was in love with the place. As a guy who had grown up in landscraped suburbia, Alaska was magical. The mountains, the wilderness, the animals, the winters, the lifestyle, the people. It was all wondrous to me and Alex was Alaska personified. She’d grown up flying around in her parents float plane and spending much of her summers at their remote cabin. She’d fished and hiked and hunted all around the state. During the Iditarod, she’d snowmachine out to the early checkpoints and hand out candy bars to the mushers as they raced by. She was a competitive cross country skier. She knew how it all worked.&lt;/p&gt;
&lt;p name=&quot;04ec&quot; id=&quot;04ec&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I, on the other hand, was an Fresh-off-the-boat Alaskan Idiot. I carried a 5 pound .44 magnum on heavily trafficked day-hikes with me for bear protection. I was in terrible physical shape. I had no idea how to coax a fish out of a river or where to find them. I had no idea what to do with a fish once you had one. I didn’t know how to camp. I didn’t know where the hikes were.&lt;/p&gt;
&lt;p name=&quot;bb5a&quot; id=&quot;bb5a&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Alex was this fearless expert in all of the things I wanted to learn.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*rIMLb6CDUnsAbkQD9DCuIA.jpeg&quot; data-width=&quot;800&quot; data-height=&quot;600&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*rIMLb6CDUnsAbkQD9DCuIA.jpeg&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*rIMLb6CDUnsAbkQD9DCuIA.jpeg&quot;/&gt;&lt;/div&gt;
Alex took me all around Alaska and taught me to love the outdoors.
&lt;p name=&quot;0184&quot; id=&quot;0184&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Despite Alex and I being pretty over-rationale people, we were only dating for a few months before we started talking openly about wanting to spend the rest of our lives together. This was good, given that she moved away for a PhD program in Chicago 3 months into our relationship. We tried the long distance relationship thing for a bit (not a cheap thing for a guy making $11/hr working a graveyard shift), but eventually I bit the bullet and moved to Chicago to be with her for a year before we returned to Alaska.&lt;/p&gt;
&lt;p name=&quot;b885&quot; id=&quot;b885&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Many people knew Alex as strong and composed but she could be incredibly sweet. Her soft moments were rare but precious to me. She wrote beautiful love letters in the first decade of our relationship. We fell out of that habit, but I wish we didn’t.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*0JScpFmcDVq2A5jVvI_oWg.png&quot; data-width=&quot;4048&quot; data-height=&quot;2468&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*0JScpFmcDVq2A5jVvI_oWg.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*0JScpFmcDVq2A5jVvI_oWg.png&quot;/&gt;&lt;/div&gt;
&lt;p name=&quot;6e9f&quot; id=&quot;6e9f&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;I remember when we finally realized that my friend Joe was probably going to die of cancer. We were both kind of stunned. Alex really didn’t know him well, but knew he was a good man and that I respected him a lot. The next night we were walking to a dinner in downtown Seattle and Alex burst into tears about it walking across first avenue.&lt;/p&gt;
&lt;p name=&quot;8ce7&quot; id=&quot;8ce7&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;She was ridiculously proud. When in Alaska, my friends and I got into rock climbing. I didn’t know it at the time, but she had always had a dream of rock climbing in Grand Teton National Park. I kept trying to get her to come climb with me when I learned this, but she hated the notion of being 6 months behind me in skill/strength and never did. I think her pride (and mine) made our relationship harder than it had to be. Life is too damn short — be vulnerable to the people you love.&lt;/p&gt;
&lt;p name=&quot;4648&quot; id=&quot;4648&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I never heard her sing (I think this is because she was too proud).&lt;/p&gt;
&lt;p name=&quot;f67b&quot; id=&quot;f67b&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;She was thrifty with clothes and jewelry. She thought diamonds and fashion were wastes of energy.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*80XUw_q1dAv6d_hRpLn8Zg.jpeg&quot; data-width=&quot;1936&quot; data-height=&quot;2592&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*80XUw_q1dAv6d_hRpLn8Zg.jpeg&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*80XUw_q1dAv6d_hRpLn8Zg.jpeg&quot;/&gt;&lt;/div&gt;
Despite the fact that she didn’t care much for fashion or jewelry, she cleaned up pretty well.
&lt;p name=&quot;ce67&quot; id=&quot;ce67&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;She kept trophies for “most inspirational runner” from High School.&lt;/p&gt;
&lt;p name=&quot;a6a5&quot; id=&quot;a6a5&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Despite making it look easy, she was a little vain. She had oceans of products for her hair, skin, teeth, eyelashes, etc.&lt;/p&gt;
&lt;p name=&quot;1be6&quot; id=&quot;1be6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;She was afraid of slugs and driving up steep hills, but almost nothing else.&lt;/p&gt;
&lt;p name=&quot;412a&quot; id=&quot;412a&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;She loved taking power naps and taking 2-hour baths.&lt;/p&gt;
&lt;p name=&quot;2f73&quot; id=&quot;2f73&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Love is supposed to be this thing where you care as much (or more?) about someone’s happiness than your own, but that seldom seems to be the case when I look at most relationships. For Alex, I suspect it might have been. When I wanted or needed a thing, she wanted me to have it and worked to make it happen. When I was depressed and lost in our final year in Alaska, she moved with me to Seattle despite her love of her home state. She could’ve been resentful of that sacrifice, but she never was.&lt;/p&gt;
&lt;p name=&quot;680e&quot; id=&quot;680e&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;In the year before her death, I’d been taking some time off of working. I recently asked her “Hey, when I start hunting for a new opportunity in earnest, what’s your appetite for moving to a new neighborhood or even a new city?” Her response was, “I love our home and our city and don’t want to leave. But if you find something you love, we’ll make it work wherever it is in the world.” Saying something like that requires a lot of trust — certainly I could abuse that sentiment and have Alex in a constant state of adapting to my needs/goals.&lt;/p&gt;
&lt;p name=&quot;e349&quot; id=&quot;e349&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Her trust and faith in me was complete and unshakable.&lt;/p&gt;
&lt;p name=&quot;a835&quot; id=&quot;a835&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Not once did she ever express jealousy.&lt;/p&gt;
&lt;p name=&quot;a110&quot; id=&quot;a110&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;In our 20 years together, I’ve had a few times where I had no idea what to do with my life — sometimes for many months. She was always confident that I’d figure it out.&lt;/p&gt;
&lt;p name=&quot;8b06&quot; id=&quot;8b06&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;When I spent time with away from her, she never said, “But I wanted to spend time together tonight” — she was happy that I was doing something rewarding, even if I wasn’t with her.&lt;/p&gt;
&lt;p name=&quot;ec89&quot; id=&quot;ec89&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;When we disagreed, she’d almost always approach my viewpoints with reason and charity.&lt;/p&gt;
&lt;p name=&quot;16c6&quot; id=&quot;16c6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;In the tech industry there is an awakening to how we are treating people — especially women and minorities. I remember reading a particularly awful article about a woman being systematically harassed at work and realizing that Alex had never — not once — mentioned experiencing anything resembling harassment to me. Not at work, not on the street, nothing. So I asked her, “Have you ever been harassed?”. She thought about it for a second and said, “Not that I’ve noticed.” Trying to harass Alex would be like a tiny wave trying to adjust the course of a cruise ship. If you had to courage to try it, you’d just kind of bounce off.&lt;/p&gt;
&lt;p name=&quot;1d35&quot; id=&quot;1d35&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;When we returned from traveling for a year, a common question was “what was your favorite place?” Alex’s answer was not what you’d expect. We’d seen mountains in Nepal, Cathedrals in Spain, magical waterfalls in Croatia, the headwaters of the Ganges, the sunrise over the Sahara, and a zillion other breathtaking things. But her favorite time was in a beautiful-but-unassuming seaside town in Morocco where we were taken in by a retired group of friends we didn’t know. They had a vacation home there and knew and loved the town — they showed us around, took us to the beach to haggle with fishermen for dinner, drank wine with us, and swapped stories.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*CpGG8XE7jeaRey9WDRLuxQ.png&quot; data-width=&quot;1584&quot; data-height=&quot;1052&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*CpGG8XE7jeaRey9WDRLuxQ.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*CpGG8XE7jeaRey9WDRLuxQ.png&quot;/&gt;&lt;/div&gt;
In the mornings, Alex would walk down to the beach with our hostess Anna and watch her haggle with the fishermen for that night’s feast.
&lt;p name=&quot;dd3c&quot; id=&quot;dd3c&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;We were headed to Spain after and one couple took us with them across the strait of Gibraltar and put us up in their house. I spoke to them recently and learned that Alex is the third person in our group that has died since 2013. I’m not religious, but if there’s a heaven, they’ll get together up there and eat oysters together — and sea urchins right out of the shell.&lt;/p&gt;
&lt;p name=&quot;db8b&quot; id=&quot;db8b&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Alex dedicated her life to raising money for non-profits, and finished her life as Chief Development Officer of Washington STEM. She worked in for schools, for women’s health and reproductive rights, for land conservation, and more.&lt;/p&gt;
&lt;p name=&quot;a9e3&quot; id=&quot;a9e3&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;She was so positive about work. So many people come home from work with a laundry list of of things they hate about their job. Alex wasn’t like this at all. Alex spoke with unwashed admiration for the people she worked with. It’s not that she didn’t see flaws or have frustrations — but everyone was seen through the default lens of “these people are good at what they do and these people are good human beings.”&lt;/p&gt;
&lt;p name=&quot;ebec&quot; id=&quot;ebec&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Years ago I was very surprised when the first in a long line of coworkers and bosses told me how exceptional Alex was to work with. I was especially surprised to hear this from people who worked FOR Alex. People generally hate their bosses — that’s just understood (fun fact- 75% of people say their direct supervisor is the worst thing about their job).&lt;/p&gt;
&lt;p name=&quot;3dee&quot; id=&quot;3dee&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;And Alex had some pretty sharp edges — I’d seen plenty of people have trouble warming up to her. I prided myself on being a bit of an “Alex Whisperer” — a person who could get through these edges to the hard-to-reach person inside. So I was a little annoyed — these people were near-strangers to me and they get a delightful Alex without all of the work?!&lt;/p&gt;
&lt;p name=&quot;523e&quot; id=&quot;523e&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;It was always obvious to me that Alex would be fiercely competent at her job, but it never occurred to me that she would be beloved. It didn’t take her death for people to tell me that she was.&lt;/p&gt;
&lt;p name=&quot;aa47&quot; id=&quot;aa47&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Alex had no time for introspection. People who know me know that I’m fairly constantly pondering the nature of ethics, work, friendship, love, etc. Whenever I tried to talk to Alex about these things, she’d humor me but rarely had much interest in the discussion. To her, the right thing didn’t need to be deliberate/thoughtful — it was obvious and natural.&lt;/p&gt;
&lt;p name=&quot;195f&quot; id=&quot;195f&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I’m maintaining videos and photos of Alex &lt;a href=&quot;http://tonywright.com/alexphotos/&quot; data-href=&quot;http://tonywright.com/alexphotos/&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;here&lt;/strong&gt;&lt;/a&gt;. I’ve sent away the pre-digital photos of her to get scanned and expect to add those in a week or two.&lt;/p&gt;
&lt;p name=&quot;28f3&quot; id=&quot;28f3&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;It’s hard to know how to finish a post like this. I’d give anything to have her back. Hell, I’d give anything to have 10 minutes to tell her the stuff I didn’t say enough.&lt;/p&gt;
&lt;p name=&quot;e016&quot; id=&quot;e016&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;I can’t get any more life &lt;em class=&quot;markup--em markup--p-em&quot;&gt;with&lt;/em&gt; Alex, but I can try to lead a better life &lt;em class=&quot;markup--em markup--p-em&quot;&gt;because&lt;/em&gt; of her and I can try to make her proud, so that’s what I’m going to try to do.&lt;/p&gt;
&lt;p name=&quot;a80f&quot; id=&quot;a80f&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Happy Birthday, love.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*LF5cpZev1-ituqVWm-PjsA.png&quot; data-width=&quot;1196&quot; data-height=&quot;1196&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*LF5cpZev1-ituqVWm-PjsA.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*LF5cpZev1-ituqVWm-PjsA.png&quot;/&gt;&lt;/div&gt;
</description>
<pubDate>Mon, 08 Oct 2018 16:15:11 +0000</pubDate>
<dc:creator>troydavis</dc:creator>
<og:title>Today is My wife’s First Birthday Since She Died. – Tony Wright – Medium</og:title>
<og:url>https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec</og:url>
<og:image>https://cdn-images-1.medium.com/max/1200/1*n62yO14ZXx7B4nAkrWgsIw.jpeg</og:image>
<og:description>Some advice about love &amp; death followed by a meandering eulogy.</og:description>
<og:type>article</og:type>
<dc:format>text/html</dc:format>
<dc:identifier>https://medium.com/@webwright/today-is-my-wifes-first-birthday-since-she-died-7369944c43ec</dc:identifier>
</item>
<item>
<title>Calls between JavaScript and WebAssembly are finally fast</title>
<link>https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-%f0%9f%8e%89/</link>
<guid isPermaLink="true" >https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-%f0%9f%8e%89/</guid>
<description>&lt;p&gt;At Mozilla, we want WebAssembly to be as fast as it can be.&lt;/p&gt;&lt;p&gt;This started with its design, which gives it &lt;a href=&quot;https://hacks.mozilla.org/2017/02/what-makes-webassembly-fast&quot;&gt;great throughput&lt;/a&gt;. Then we improved load times with a &lt;a href=&quot;https://hacks.mozilla.org/2018/01/making-webassembly-even-faster-firefoxs-new-streaming-and-tiering-compiler/&quot;&gt;streaming baseline compiler&lt;/a&gt;. With this, we compile code faster than it comes over the network.&lt;/p&gt;
&lt;p&gt;So what’s next?&lt;/p&gt;
&lt;p&gt;One of our big priorities is making it easy to combine JS and WebAssembly. But function calls between the two languages haven’t always been fast. In fact, they’ve had a reputation for being slow, as I talked about in my &lt;a href=&quot;https://hacks.mozilla.org/2017/02/where-is-webassembly-now-and-whats-next/&quot;&gt;first series on WebAssembly&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;That’s changing, &lt;a href=&quot;https://bnjbvr.github.io/perf-wasm-calls/&quot;&gt;as you can see&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;This means that in the latest version of Firefox Beta, calls between JS and WebAssembly are faster than non-inlined JS to JS function calls. Hooray! 🎉&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/01-02.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/01-02-500x503.png&quot; alt=&quot;Performance chart showing time for 100 million calls. wasm-to-js before: about 750ms. wasm-to-js after: about 450ms. JS-to-wasm before: about 5500ms. JS-to-wasm after: about 450ms. monomorphic JS-to-wasm before: about 5250ms. monomorphic JS-to-wasm before: about 250ms. wasm-to-builtin before: about 6000ms. wasm-to-builtin before: about 650ms.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32719&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/01-02-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/01-02-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/01-02-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So these calls are fast in Firefox now. But, as always, I don’t just want to tell you that these calls are fast. I want to explain how we made them fast. So let’s look at how we improved each of the different kinds of calls in Firefox (and by how much).&lt;/p&gt;
&lt;p&gt;But first, let’s look at how engines do these calls in the first place. (And if you already know how the engine handles function calls, you can skip to &lt;a href=&quot;https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-🎉/#optimizations&quot;&gt;the optimizations&lt;/a&gt;.)&lt;/p&gt;
&lt;h3&gt;How do function calls work?&lt;/h3&gt;
&lt;p&gt;Functions are a big part of JavaScript code. A function can do lots of things, such as:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;assign variables which are scoped to the function (called local variables)&lt;/li&gt;
&lt;li&gt;use functions that are built-in to the browser, like &lt;code&gt;Math.random&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;call other functions you’ve defined in your code&lt;/li&gt;
&lt;li&gt;return a value&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-01-1.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-01-1-500x248.png&quot; alt=&quot;A function with 4 lines of code: assigning a local variable with let w = 8; calling a built-in function with Math.random(); calling a user-defined function named randGrid(); and returning a value.&quot; width=&quot;500&quot; height=&quot;248&quot; class=&quot;alignnone size-large wp-image-32745&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/02-01-1-500x248.png 500w, https://hacks.mozilla.org/files/2018/10/02-01-1-250x124.png 250w, https://hacks.mozilla.org/files/2018/10/02-01-1-768x380.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;But how does this actually work? How does writing this function make the machine do what you actually want? &lt;/p&gt;
&lt;p&gt;As I explained in my &lt;a href=&quot;https://hacks.mozilla.org/2017/02/a-crash-course-in-just-in-time-jit-compilers/&quot;&gt;first WebAssembly article series&lt;/a&gt;, the languages that programmers use — like JavaScript — are very different than the language the computer understands. To run the code, the JavaScript we download in the .js file needs to be translated to the machine language that the machine understands. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2017/02/02-01-alien03.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2017/02/02-01-alien03-500x286.png&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;286&quot; class=&quot;alignnone size-large wp-image-30493&quot; srcset=&quot;https://hacks.mozilla.org/files/2017/02/02-01-alien03-500x286.png 500w, https://hacks.mozilla.org/files/2017/02/02-01-alien03-220x125.png 220w, https://hacks.mozilla.org/files/2017/02/02-01-alien03-250x143.png 250w, https://hacks.mozilla.org/files/2017/02/02-01-alien03-768x440.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Each browser has a built-in translator. This translator is sometimes called the JavaScript engine or JS runtime. However, these engines now handle WebAssembly too, so that terminology can be confusing. In this article, I’ll just call it the engine.&lt;/p&gt;
&lt;p&gt;Each browser has its own engine:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Chrome has V8&lt;/li&gt;
&lt;li&gt;Safari has JavaScriptCore (JSC)&lt;/li&gt;
&lt;li&gt;Edge has Chakra&lt;/li&gt;
&lt;li&gt;and in Firefox, we have SpiderMonkey&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Even though each engine is different, many of the general ideas apply to all of them. &lt;/p&gt;
&lt;p&gt;When the browser comes across some JavaScript code, it will fire up the engine to run that code. The engine needs to work its way through the code, going to all of the functions that need to be called until it gets to the end.&lt;/p&gt;
&lt;p&gt;I think of this like a character going on a quest in a videogame.&lt;/p&gt;
&lt;p&gt;Let’s say we want to play Conway’s Game of Life. The engine’s quest is to render the Game of Life board for us. But it turns out that it’s not so simple…&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-02.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-02-500x218.png&quot; alt=&quot;Engine asking Sir Conway function to explain life. Sir Conway sends the engine to the Universum Neu function to get a Universe.&quot; width=&quot;500&quot; height=&quot;218&quot; class=&quot;alignnone size-large wp-image-32721&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/02-02-500x218.png 500w, https://hacks.mozilla.org/files/2018/10/02-02-250x109.png 250w, https://hacks.mozilla.org/files/2018/10/02-02-768x334.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So the engine goes over to the next function. But the next function will send the engine on more quests by calling more functions.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-03.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-03-500x218.png&quot; alt=&quot;Engine going to Universum Neu to ask for a universe. Universum Neu sends the engine to Randgrid.&quot; width=&quot;500&quot; height=&quot;218&quot; class=&quot;alignnone size-large wp-image-32722&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/02-03-500x218.png 500w, https://hacks.mozilla.org/files/2018/10/02-03-250x109.png 250w, https://hacks.mozilla.org/files/2018/10/02-03-768x334.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The engine keeps having to go on these nested quests until it gets to a function that just gives it a result. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-04.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-04-500x218.png&quot; alt=&quot;Rnadgrid giving the engine a grid.&quot; width=&quot;500&quot; height=&quot;218&quot; class=&quot;alignnone size-large wp-image-32723&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/02-04-500x218.png 500w, https://hacks.mozilla.org/files/2018/10/02-04-250x109.png 250w, https://hacks.mozilla.org/files/2018/10/02-04-768x334.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Then it can come back to each of the functions that it spoke to, in reverse order.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-05.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-05-500x218.png&quot; alt=&quot;The engine returning through all of the functions.&quot; width=&quot;500&quot; height=&quot;218&quot; class=&quot;alignnone size-large wp-image-32724&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/02-05-500x218.png 500w, https://hacks.mozilla.org/files/2018/10/02-05-250x109.png 250w, https://hacks.mozilla.org/files/2018/10/02-05-768x334.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;If the engine is going to do this correctly — if it’s going to give the right parameters to the right function and be able to make its way all the way back to the starting function — it needs to keep track of some information. &lt;/p&gt;
&lt;p&gt;It does this using something called a stack frame (or a call frame). It’s basically like a sheet of paper that has the arguments to go into the function, says where the return value should go, and also keeps track of any of the local variables that the function creates. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-06.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-06-500x311.png&quot; alt=&quot;A stack frame, which is basically a form with lines for arguments, locals, a return value, and more.&quot; width=&quot;500&quot; height=&quot;311&quot; class=&quot;alignnone size-large wp-image-32746&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/02-06-500x311.png 500w, https://hacks.mozilla.org/files/2018/10/02-06-250x156.png 250w, https://hacks.mozilla.org/files/2018/10/02-06-768x478.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The way it keeps track of all of these slips of paper is by putting them in a stack. The slip of paper for the function that it is currently working with is on top. When it finishes that quest, it throws out the slip of paper. Because it’s a stack, there’s a slip of paper underneath (which has now been revealed by throwing away the old one). That’s where we need to return to. &lt;/p&gt;
&lt;p&gt;This stack of frames is called the call stack.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-07.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/02-07-500x230.png&quot; alt=&quot;a stack of stack frames, which is basically a pile of papers&quot; width=&quot;500&quot; height=&quot;230&quot; class=&quot;alignnone size-large wp-image-32747&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/02-07-500x230.png 500w, https://hacks.mozilla.org/files/2018/10/02-07-250x115.png 250w, https://hacks.mozilla.org/files/2018/10/02-07-768x354.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The engine builds up this call stack as it goes. As functions are called, frames are added to the stack. As functions return, frames are popped off of the stack. This keeps happening until we get all the way back down and have popped everything out of the stack.&lt;/p&gt;
&lt;p&gt;So that’s the basics of how function calls work. Now, let’s look at what made function calls between JavaScript and WebAssembly slow, and talk about how we’ve made this faster in Firefox.&lt;/p&gt;
&lt;h3 id=&quot;optimizations&quot;&gt;How we made WebAssembly function calls fast&lt;/h3&gt;
&lt;p&gt;With recent work in Firefox Nightly, we’ve optimized calls in both directions — both JavaScript to WebAssembly and WebAssembly to JavaScript. We’ve also made calls from WebAssembly to built-ins faster.&lt;/p&gt;
&lt;p&gt;All of the optimizations that we’ve done are about making the engine’s work easier. The improvements fall into two groups:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Reducing bookkeeping —which means getting rid of unnecessary work to organize stack frames&lt;/li&gt;
&lt;li&gt;Cutting out intermediaries — which means taking the most direct path between functions&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Let’s look at where each of these came into play.&lt;/p&gt;
&lt;h3&gt;Optimizing WebAssembly » JavaScript calls&lt;/h3&gt;
&lt;p&gt;When the engine is going through your code, it has to deal with functions that are speaking two different kinds of language—even if your code is all written in JavaScript. &lt;/p&gt;
&lt;p&gt;Some of them—the ones that are running in the interpreter—have been turned into something called byte code. This is closer to machine code than JavaScript source code, but it isn’t quite machine code (and the interpreter does the work). This is pretty fast to run, but not as fast as it can possibly be.&lt;/p&gt;
&lt;p&gt;Other functions — those which are being called a lot — are turned into machine code directly by the &lt;a href=&quot;https://hacks.mozilla.org/2017/02/a-crash-course-in-just-in-time-jit-compilers/&quot;&gt;just-in-time compiler&lt;/a&gt; (JIT). When this happens, the code doesn’t run through the interpreter anymore.&lt;/p&gt;
&lt;p&gt;So we have functions speaking two languages; byte code and machine code.&lt;/p&gt;
&lt;p&gt;I think of these different functions which speak these different languages as being on different continents in our videogame. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-01.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-01-500x503.png&quot; alt=&quot;A game map with two continents—One with a country called The Interpreter Kingdom, and the other with a country called JITland&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32727&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/03-01-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/03-01-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/03-01-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The engine needs to be able to go back and forth between these continents. But when it does this jump between the different continents, it needs to have some information, like the place it left from on the other continent (which it will need to go back to). The engine also wants to separate the frames that it needs. &lt;/p&gt;
&lt;p&gt;To organize its work, the engine gets a folder and puts the information it needs for its trip in one pocket — for example, where it entered the continent from. &lt;/p&gt;
&lt;p&gt; It will use the other pocket to store the stack frames. That pocket will expand as the engine accrues more and more stack frames on this continent.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-02.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-02-500x340.png&quot; alt=&quot;A folder with a map on the left side, and the stack of frames on the right.&quot; width=&quot;500&quot; height=&quot;340&quot; class=&quot;alignnone size-large wp-image-32728&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/03-02-500x340.png 500w, https://hacks.mozilla.org/files/2018/10/03-02-250x170.png 250w, https://hacks.mozilla.org/files/2018/10/03-02-768x522.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Sidenote: if you’re looking through the code in SpiderMonkey, these “folders” are called activations.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Each time it switches to a different continent, the engine will start a new folder. The only problem is that to start a folder, it has to go through C++. And going through C++ adds significant cost.&lt;/p&gt;
&lt;p&gt;This is the trampolining that I talked about in my first series on WebAssembly. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2017/02/06-02-trampoline01.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2017/02/06-02-trampoline01-500x399.png&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;399&quot; class=&quot;alignnone size-large wp-image-30534&quot; srcset=&quot;https://hacks.mozilla.org/files/2017/02/06-02-trampoline01-500x399.png 500w, https://hacks.mozilla.org/files/2017/02/06-02-trampoline01-250x200.png 250w, https://hacks.mozilla.org/files/2017/02/06-02-trampoline01-768x613.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Every time you have to use one of these trampolines, you lose time. &lt;/p&gt;
&lt;p&gt;In our continent metaphor, it would be like having to do a mandatory layover on Trampoline Point for every single trip between two continents.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-04.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-04-500x503.png&quot; alt=&quot;Same map as before, with a new Trampoline country on the same continent as The Interpreter Kingdom. An arrow goes from The Interpreter Kingdom, to Trampoline, to JITland.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32730&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/03-04-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/03-04-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/03-04-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So how did this make things slower when working with WebAssembly? &lt;/p&gt;
&lt;p&gt;When we first added WebAssembly support, we had a different type of folder for it. So even though JIT-ed JavaScript code and WebAssembly code were both compiled and speaking machine language, we treated them as if they were speaking different languages. We were treating them as if they were on separate continents.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-05.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-05-500x503.png&quot; alt=&quot;Same map with Wasmania island next to JITland. There is an arrow going from JITland to Trampoline to Wasmania. On Trampoline, the engine asks a shopkeeper for folders.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32731&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/03-05-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/03-05-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/03-05-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This was unnecessarily costly in two ways:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;it creates an unnecessary folder, with the setup and teardown costs that come from that&lt;/li&gt;
&lt;li&gt;it requires that trampolining through C++ (to create the folder and do other setup)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;We fixed this by generalizing the code to use the same folder for both JIT-ed JavaScript and WebAssembly. It’s kind of like we pushed the two continents together, making it so you don’t need to leave the continent at all.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-06.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-06-500x503.png&quot; alt=&quot;SpiderMonkey engineer Benjamin Bouvier pushing Wasmania and JITland together&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32732&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/03-06-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/03-06-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/03-06-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;With this, calls from WebAssembly to JS were almost as fast as JS to JS calls.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-03.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/03-03-500x503.png&quot; alt=&quot;Same perf graph as above with wasm-to-JS circled.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32729&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/03-03-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/03-03-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/03-03-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We still had a little work to do to speed up calls going the other way, though.&lt;/p&gt;
&lt;h3&gt;Optimizing JavaScript » WebAssembly calls&lt;/h3&gt;
&lt;p&gt;Even though JIT-ed JavaScript and WebAssembly speak the same language, they have different customs. They have different ways of doing things.&lt;/p&gt;
&lt;p&gt;Even in the case of JIT-ed JavaScript code, where JavaScript and WebAssembly are speaking the same language, they still use different customs. &lt;/p&gt;
&lt;p&gt;For example, to handle dynamic types, JavaScript uses something called boxing.&lt;/p&gt;
&lt;p&gt;Because JavaScript doesn’t have explicit types, types need to be figured out at runtime. The engine keeps track of the types of values by attaching a tag to the value. &lt;/p&gt;
&lt;p&gt;It’s as if the JS engine put a box around this value. The box contains that tag indicating what type this value is. For example, the zero at the end would mean integer.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-01.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-01-500x103.png&quot; alt=&quot;Two binary numbers with a box around them, with a 0 label on the box.&quot; width=&quot;500&quot; height=&quot;103&quot; class=&quot;alignnone size-large wp-image-32748&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/boxing-01-500x103.png 500w, https://hacks.mozilla.org/files/2018/10/boxing-01-250x52.png 250w, https://hacks.mozilla.org/files/2018/10/boxing-01-768x158.png 768w, https://hacks.mozilla.org/files/2018/10/boxing-01.png 800w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;In order to compute the sum of these two integers, the system needs to remove that box. It removes the box for a and then removes the box for b.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-02.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-02-500x150.png&quot; alt=&quot;Two lines, the first with boxed numbers from the last image. The second with unboxed numbers.&quot; width=&quot;500&quot; height=&quot;150&quot; class=&quot;alignnone size-large wp-image-32749&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/boxing-02-500x150.png 500w, https://hacks.mozilla.org/files/2018/10/boxing-02-250x75.png 250w, https://hacks.mozilla.org/files/2018/10/boxing-02-768x230.png 768w, https://hacks.mozilla.org/files/2018/10/boxing-02.png 800w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Then it adds the unboxed values together.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-03.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-03-500x191.png&quot; alt=&quot;Three lines, with the third line being the two numbers added together&quot; width=&quot;500&quot; height=&quot;191&quot; class=&quot;alignnone size-large wp-image-32750&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/boxing-03-500x191.png 500w, https://hacks.mozilla.org/files/2018/10/boxing-03-250x95.png 250w, https://hacks.mozilla.org/files/2018/10/boxing-03-768x293.png 768w, https://hacks.mozilla.org/files/2018/10/boxing-03.png 800w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Then it needs to add that box back around the results so that the system knows the result’s type.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-04.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/boxing-04-500x258.png&quot; alt=&quot;Four lines, with the fourth line being the numbers added together with a box around it.&quot; width=&quot;500&quot; height=&quot;258&quot; class=&quot;alignnone size-large wp-image-32751&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/boxing-04-500x258.png 500w, https://hacks.mozilla.org/files/2018/10/boxing-04-250x129.png 250w, https://hacks.mozilla.org/files/2018/10/boxing-04-768x396.png 768w, https://hacks.mozilla.org/files/2018/10/boxing-04.png 800w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This turns what you expect to be 1 operation into 4 operations… so in cases where you don’t need to box (like statically typed languages) you don’t want to add this overhead.&lt;/p&gt;
&lt;p&gt;Sidenote: JavaScript JITs can avoid these extra boxing/unboxing operations in many cases, but in the general case, like function calls, JS needs to fall back to boxing.&lt;/p&gt;
&lt;p&gt;This is why WebAssembly expects parameters to be unboxed, and why it doesn’t box its return values. WebAssembly is statically typed, so it doesn’t need to add this overhead. WebAssembly also expects values to be passed in at a certain place — in registers rather than the stack that JavaScript usually uses. &lt;/p&gt;
&lt;p&gt;If the engine takes a parameter that it got from JavaScript, wrapped inside of a box, and gives it to a WebAssembly function, the WebAssembly function wouldn’t know how to use it. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-01.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-01-500x503.png&quot; alt=&quot;Engine giving a wasm function boxed values, and the wasm function being confused.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32733&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/04-01-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/04-01-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/04-01-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So, before it gives the parameters to the WebAssembly function, the engine needs to unbox the values and put them in registers.&lt;/p&gt;
&lt;p&gt;To do this, it would go through C++ again. So even though we didn’t need to trampoline through C++ to set up the activation, we still needed to do it to prepare the values (when going from JS to WebAssembly).&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-02.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-02-500x503.png&quot; alt=&quot;The engine going to Trampoline to get the numbers unboxed before going to Wasmania&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32734&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/04-02-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/04-02-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/04-02-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Going to this intermediary is a huge cost, especially for something that’s not that complicated. So it would be better if we could cut the middleman out altogether.&lt;/p&gt;
&lt;p&gt;That’s what we did. We took the code that C++ was running — the entry stub — and made it directly callable from JIT code. When the engine goes from JavaScript to WebAssembly, the entry stub un-boxes the values and places them in the right place. With this, we got rid of the C++ trampolining.&lt;/p&gt;
&lt;p&gt;I think of this as a cheat sheet. The engine uses it so that it doesn’t have to go to the C++. Instead, it can unbox the values when it’s right there, going between the calling JavaScript function and the WebAssembly callee.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-03.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-03-500x503.png&quot; alt=&quot;The engine looking at a cheat sheet for how to unbox values on its way from JITland to Wasmania.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32735&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/04-03-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/04-03-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/04-03-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;So that makes calls from JavaScript to WebAssembly fast. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-04.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/04-04-500x503.png&quot; alt=&quot;Perf chart with JS to wasm circled.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32736&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/04-04-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/04-04-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/04-04-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;But in some cases, we can make it even faster. In fact, we can make these calls even faster than JavaScript » JavaScript calls in many cases.&lt;/p&gt;
&lt;h3&gt;Even faster JavaScript » WebAssembly: Monomorphic calls&lt;/h3&gt;
&lt;p&gt;When a JavaScript function calls another function, it doesn’t know what the other function expects. So it defaults to putting things in boxes.&lt;/p&gt;
&lt;p&gt;But what about when the JS function knows that it is calling a particular function with the same types of arguments every single time? Then that calling function can know in advance how to package up the arguments in the way that the callee wants them. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/05-01.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/05-01-500x503.png&quot; alt=&quot;JS function not boxing values&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32737&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/05-01-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/05-01-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/05-01-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is an instance of the general JS JIT optimization known as “type specialization”. When a function is specialized, it knows exactly what the function it is calling expects. This means it can prepare the arguments exactly how that other function wants them… which means that the engine doesn’t need that cheat sheet and spend extra work on unboxing.&lt;/p&gt;
&lt;p&gt;This kind of call — where you call the same function every time — is called a monomorphic call. In JavaScript, for a call to be monomorphic, you need to call the function with the exact same types of arguments each time. But because WebAssembly functions have explicit types, calling code doesn’t need to worry about whether the types are exactly the same — they will be coerced on the way in.&lt;/p&gt;
&lt;p&gt;If you can write your code so that JavaScript is always passing the same types to the same WebAssembly exported function, then your calls are going to be very fast. In fact, these calls are faster than many JavaScript to JavaScript calls.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/05-04.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/05-04-500x503.png&quot; alt=&quot;Perf chart with monomorphic JS to wasm circled&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32740&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/05-04-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/05-04-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/05-04-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;Future work&lt;/h4&gt;
&lt;p&gt;There’s only one case where an optimized call from JavaScript » WebAssembly is not faster than JavaScript » JavaScript. That is when JavaScript has in-lined a function.&lt;/p&gt;
&lt;p&gt;The basic idea behind in-lining is that when you have a function that calls the same function over and over again, you can take an even bigger shortcut. Instead of having the engine go off to talk to that other function, the compiler can just copy that function into the calling function. This means that the engine doesn’t have to go anywhere — it can just stay in place and keep computing. &lt;/p&gt;
&lt;p&gt;I think of this as the callee function teaching its skills to the calling function.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/05-03.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/05-03-500x503.png&quot; alt=&quot;Wasm function teaching the JS function how to do what it does.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32739&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/05-03-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/05-03-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/05-03-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This is an optimization that JavaScript engines make when a function is being run a lot — when it’s “hot” — and when the function it’s calling is relatively small. &lt;/p&gt;
&lt;p&gt;We can definitely add support for in-lining WebAssembly into JavaScript at some point in the future, and this is a reason why it’s nice to have both of these languages working in the same engine. This means that they can use the same JIT backend and the same compiler intermediate representation, so it’s possible for them to interoperate in a way that wouldn’t be possible if they were split across different engines. &lt;/p&gt;
&lt;h3&gt;Optimizing WebAssembly » Built-in function calls&lt;/h3&gt;
&lt;p&gt;There was one more kind of call that was slower than it needed to be: when WebAssembly functions were calling built-ins. &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects&quot;&gt;Built-ins&lt;/a&gt; are functions that the browser gives you, like &lt;code&gt;Math.random&lt;/code&gt;. It’s easy to forget that these are just functions that are called like any other function.&lt;/p&gt;
&lt;p&gt;Sometimes the built-ins are implemented in JavaScript itself, in which case they are called self-hosted. This can make them faster because it means that you don’t have to go through C++: everything is just running in JavaScript. But some functions are just faster when they’re implemented in C++.&lt;/p&gt;
&lt;p&gt;Different engines have made different decisions about which built-ins should be written in self-hosted JavaScript and which should be written in C++. And engines often use a mix of both for a single built-in.&lt;/p&gt;
&lt;p&gt;In the case where a built-in is written in JavaScript, it will benefit from all of the optimizations that we have talked about above. But when that function is written in C++, we are back to having to trampoline.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-01.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-01-500x503.png&quot; alt=&quot;Engine going from wasmania to trampoline to built-in&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32741&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/06-01-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/06-01-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/06-01-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;These functions are called a lot, so you do want calls to them to be optimized. To make it faster, we’ve added a fast path specific to built-ins. When you pass a built-in into WebAssembly, the engine sees that what you’ve passed it is one of the built-ins, at which point it knows how to take the fast-path. This means you don’t have to go through that trampoline that you would otherwise.&lt;/p&gt;
&lt;p&gt;It’s kind of like we built a bridge over to the built-in continent. You can use that bridge if you’re going from WebAssembly to the built-in. (&lt;em&gt;Sidenote: The JIT already did have optimizations for this case, even though it’s not shown in the drawing.&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-02.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-02-500x503.png&quot; alt=&quot;A bridge added between wasmania and built-in&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32742&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/06-02-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/06-02-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/06-02-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;With this, calls to these built-ins are much faster than they used to be.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-03.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-03-500x503.png&quot; alt=&quot;Perf chart with wasm to built-in circled.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32743&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/06-03-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/06-03-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/06-03-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;Future work&lt;/h4&gt;
&lt;p&gt;Currently the only built-ins that we support this for are mostly limited to the math built-ins. That’s because WebAssembly currently only has support for integers and floats as value types. &lt;/p&gt;
&lt;p&gt;That works well for the math functions because they work with numbers, but it doesn’t work out so well for other things like the DOM built-ins. So currently when you want to call one of those functions, you have to go through JavaScript. That’s what &lt;a href=&quot;https://hacks.mozilla.org/2018/03/making-webassembly-better-for-rust-for-all-languages/#wasm-bindgen&quot;&gt;wasm-bindgen&lt;/a&gt; does for you.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-04.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/06-04-500x503.png&quot; alt=&quot;Engine going from wasmania to the JS Data Marshall Islands to built-in&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32744&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/06-04-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/06-04-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/06-04-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;But WebAssembly is getting &lt;a href=&quot;https://github.com/WebAssembly/reference-types&quot;&gt;more flexible types very soon&lt;/a&gt;. Experimental support for the current proposal is already landed in Firefox Nightly behind the pref &lt;code&gt;javascript.options.wasm_gc&lt;/code&gt;. Once these types are in place, you will be able to call these other built-ins directly from WebAssembly without having to go through JS.&lt;/p&gt;
&lt;p&gt;The infrastructure we’ve put in place to optimize the Math built-ins can be extended to work for these other built-ins, too. This will ensure many built-ins are as fast as they can be.&lt;/p&gt;
&lt;p&gt;But there are still a couple of built-ins where you will need to go through JavaScript. For example, if those built-ins are called as if they were using &lt;code&gt;new&lt;/code&gt; or if they’re using a getter or setter. These remaining built-ins will be addressed with the &lt;a href=&quot;https://github.com/WebAssembly/host-bindings&quot;&gt;host-bindings proposal&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;So that’s how we’ve made calls between JavaScript and WebAssembly fast in Firefox, and you can expect other browsers to do the same soon.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/01-02.png&quot;&gt;&lt;img src=&quot;https://2r4s9p1yi1fa2jd7j43zph8r-wpengine.netdna-ssl.com/files/2018/10/01-02-500x503.png&quot; alt=&quot;Performance chart showing time for 100 million calls. wasm-to-js before: about 750ms. wasm-to-js after: about 450ms. JS-to-wasm before: about 5500ms. JS-to-wasm after: about 450ms. monomorphic JS-to-wasm before: about 5250ms. monomorphic JS-to-wasm before: about 250ms. wasm-to-builtin before: about 6000ms. wasm-to-builtin before: about 650ms.&quot; width=&quot;500&quot; height=&quot;503&quot; class=&quot;alignnone size-large wp-image-32719&quot; srcset=&quot;https://hacks.mozilla.org/files/2018/10/01-02-500x503.png 500w, https://hacks.mozilla.org/files/2018/10/01-02-250x251.png 250w, https://hacks.mozilla.org/files/2018/10/01-02-768x772.png 768w&quot; sizes=&quot;(max-width: 500px) 100vw, 500px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Thank you&lt;/h3&gt;
&lt;p&gt;Thank you to Benjamin Bouvier, Luke Wagner, and Till Schneidereit for their input and feedback.&lt;/p&gt;
&lt;section class=&quot;about&quot; readability=&quot;6.5970873786408&quot;&gt;
&lt;p&gt;Lin is an engineer on the Mozilla Developer Relations team. She tinkers with JavaScript, WebAssembly, Rust, and Servo, and also draws code cartoons.&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;url&quot; href=&quot;https://hacks.mozilla.org/author/lclarkmozilla-com/&quot;&gt;More articles by Lin Clark…&lt;/a&gt;&lt;/p&gt;
&lt;/section&gt;</description>
<pubDate>Mon, 08 Oct 2018 15:37:42 +0000</pubDate>
<dc:creator>lainon</dc:creator>
<og:url>https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-%f0%9f%8e%89</og:url>
<og:title>Calls between JavaScript and WebAssembly are finally fast 🎉 – Mozilla Hacks - the Web developer blog</og:title>
<og:description>At Mozilla, we want WebAssembly to be as fast as it can be. This started with its design, which gives it great throughput. Then we improved load times with a ...</og:description>
<og:image>https://hacks.mozilla.org/files/2018/10/call_opts_featured_image.png</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://hacks.mozilla.org/2018/10/calls-between-javascript-and-webassembly-are-finally-fast-%f0%9f%8e%89/</dc:identifier>
</item>
<item>
<title>Bpftrace for Linux 2018</title>
<link>http://www.brendangregg.com/blog/2018-10-08/dtrace-for-linux-2018.html</link>
<guid isPermaLink="true" >http://www.brendangregg.com/blog/2018-10-08/dtrace-for-linux-2018.html</guid>
<description>&lt;div readability=&quot;423.84615384615&quot;&gt;
&lt;p&gt;The private bpftrace repository has just been made public, which is big news for DTrace fans. Created by &lt;a href=&quot;http://ajor.co.uk/projects/&quot;&gt;Alastair Robertson&lt;/a&gt;, bpftrace is an open source high-level tracing front-end that lets you analyze systems in custom ways. It's shaping up to be a DTrace version 2.0: more capable, and built from the ground up for the modern era of the eBPF virtual machine. eBPF (extended Berkeley Packet Filter) is in the Linux kernel and is the new hotness in systems engineering. It is being developed for BSD, too, where BPF originated.&lt;/p&gt;
&lt;p&gt;Screenshot: tracing read latency for PID 181:&lt;/p&gt;
&lt;pre&gt;
# &lt;strong&gt;bpftrace -e 'kprobe:vfs_read /pid == 30153/ { @start[tid] = nsecs; }
kretprobe:vfs_read /@start[tid]/ { @ns = hist(nsecs - @start[tid]); delete(@start[tid]); }'&lt;/strong&gt;
Attaching 2 probes...
^C

@ns:
[256, 512)         10900 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                      |
[512, 1k)          18291 |@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@|
[1k, 2k)            4998 |@@@@@@@@@@@@@@                                      |
[2k, 4k)              57 |                                                    |
[4k, 8k)             117 |                                                    |
[8k, 16k)             48 |                                                    |
[16k, 32k)           109 |                                                    |
[32k, 64k)             3 |                                                    |
&lt;/pre&gt;
&lt;p&gt;Some one-liners:&lt;/p&gt;
&lt;pre&gt;
# New processes with arguments
&lt;strong&gt;bpftrace -e 'tracepoint:syscalls:sys_enter_execve { join(args-&amp;gt;argv); }'&lt;/strong&gt;

# Files opened by process
&lt;strong&gt;bpftrace -e 'tracepoint:syscalls:sys_enter_open { printf(&quot;%s %s\n&quot;, comm, str(args-&amp;gt;filename)); }'&lt;/strong&gt;

# Syscall count by program
&lt;strong&gt;bpftrace -e 'tracepoint:raw_syscalls:sys_enter { @[comm] = count(); }'&lt;/strong&gt;

# Syscall count by syscall
&lt;strong&gt;bpftrace -e 'tracepoint:syscalls:sys_enter_* { @[name] = count(); }'&lt;/strong&gt;

# Syscall count by process
&lt;strong&gt;bpftrace -e 'tracepoint:raw_syscalls:sys_enter { @[pid, comm] = count(); }'&lt;/strong&gt;

# Read bytes by process:
&lt;strong&gt;bpftrace -e 'tracepoint:syscalls:sys_exit_read /args-&amp;gt;ret/ { @[comm] = sum(args-&amp;gt;ret); }'&lt;/strong&gt;

# Read size distribution by process:
&lt;strong&gt;bpftrace -e 'tracepoint:syscalls:sys_exit_read { @[comm] = hist(args-&amp;gt;ret); }'&lt;/strong&gt;

# Disk size by process
&lt;strong&gt;bpftrace -e 'tracepoint:block:block_rq_issue { printf(&quot;%d %s %d\n&quot;, pid, comm, args-&amp;gt;bytes); }'&lt;/strong&gt;

# Pages paged in by process
&lt;strong&gt;bpftrace -e 'software:major-faults:1 { @[comm] = count(); }'&lt;/strong&gt;

# Page faults by process
&lt;strong&gt;bpftrace -e 'software:faults:1 { @[comm] = count(); }'&lt;/strong&gt;

# Profile user-level stacks at 99 Hertz, for PID 189:
&lt;strong&gt;bpftrace -e 'profile:hz:99 /pid == 189/ { @[ustack] = count(); }'&lt;/strong&gt;
&lt;/pre&gt;
&lt;p&gt;If they look familiar, they are from my old &lt;a href=&quot;http://www.brendangregg.com/dtrace.html#OneLiners&quot;&gt;DTrace one-liners&lt;/a&gt; that I switched to bpftrace. It's also been a milestone to see these all work in bpftrace, which they now do! bpftrace has most of DTrace's capabilities and more.&lt;/p&gt;
&lt;h2&gt;bpftrace&lt;/h2&gt;
&lt;p&gt;The prior work that led to &lt;a href=&quot;https://github.com/iovisor/bpftrace&quot;&gt;bpftrace&lt;/a&gt; (aka BPFtrace) is discussed my earlier &lt;a href=&quot;http://www.brendangregg.com/blog/2016-10-27/dtrace-for-linux-2016.html&quot;&gt;DTrace for Linux 2016&lt;/a&gt; post, which explains how the Linux kernel gained &lt;a href=&quot;http://www.brendangregg.com/ebpf.html&quot;&gt;eBPF&lt;/a&gt;: the virtual machine that we're using to run tracing programs. That post covered the &lt;a href=&quot;https://github.com/iovisor/bcc&quot;&gt;bcc&lt;/a&gt; front end (BPF Complier Collection), which has let me rewrite my DTraceToolkit tools. bcc is powerful but laborious to program. bpftrace is a complimentary addition that provides a high-level language for one-liners and short scripts.&lt;/p&gt;
&lt;p&gt;Alastair recently developed struct support, and applied it to tracepoints (which is used by the above one-liners), and applied it to kprobes yesterday. That was the last major missing piece! Here's an example:&lt;/p&gt;
&lt;pre&gt;
# &lt;strong&gt;cat path.bt&lt;/strong&gt;
#include &amp;lt;linux/path.h&amp;gt;
#include &amp;lt;linux/dcache.h&amp;gt;

kprobe:vfs_open
{
    printf(&quot;open path: %s\n&quot;, str(((path *)arg0)-&amp;gt;dentry-&amp;gt;d_name.name));
}

# &lt;strong&gt;bpftrace path.bt&lt;/strong&gt;
Attaching 1 probe...
open path: dev
open path: if_inet6
open path: retrans_time_ms
&lt;/pre&gt;
&lt;p&gt;Myself, &lt;a href=&quot;https://github.com/williangaspar&quot;&gt;Willian Gaspar&lt;/a&gt;, and &lt;a href=&quot;https://twitter.com/mmarkini&quot;&gt;Matheus Marchini&lt;/a&gt;, have been contributing other capabilities and bug fixes. For a list of the minor work left to do, see the &lt;a href=&quot;https://github.com/iovisor/bpftrace/issues&quot;&gt;issue list&lt;/a&gt;, and for what is done, see the &lt;a href=&quot;https://github.com/iovisor/bpftrace/blob/master/docs/reference_guide.md&quot;&gt;reference guide&lt;/a&gt; and &lt;a href=&quot;https://github.com/iovisor/bpftrace/commits/master&quot;&gt;prior commits&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;bpftrace uses existing Linux kernel facilities (eBPF, kprobes, uprobes, tracepoints, perf_events), as well as bcc libraries. Internally, bpftrace uses a lex/yacc parser to convert programs to AST, then llvm IR actions, then BPF.&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;http://www.brendangregg.com/blog/images/2018/bpftrace_internals_2018.png&quot;&gt;&lt;img src=&quot;http://www.brendangregg.com/blog/images/2018/bpftrace_internals_2018.png&quot; border=&quot;0&quot; width=&quot;600&quot;/&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p&gt;To learn bpftrace, I've created a couple of references:&lt;/p&gt;
&lt;p&gt;The one-liners tutorial is based on my &lt;a href=&quot;https://wiki.freebsd.org/DTrace/Tutorial&quot;&gt;FreeBSD DTrace Tutorial&lt;/a&gt;, and I think is a time-efficient way to learn bpftrace (as well as DTrace on FreeBSD).&lt;/p&gt;
&lt;p&gt;Since I helped developed bpftrace, I'm aware of how fresh my own code is and how likely I introduced bugs. Might bpftrace SIGSEGV and coredump? Probably, let us know, we already fixed plenty of these. Might bpftrace spew incomprehensible LLVM or BPF verifier errors (with -v)? Probably, let us know. Might bpftrace panic the kernel? That's much less likely, since that component is eBPF which is now years old. What I'd expect is some user-level bugs where the bpftrace process crashes or gets stuck and needs to be killed. Lets us know on github, and if you can, please help fix them and the other issues. bpftrace has a test suite with over 200 tests.&lt;/p&gt;
&lt;h2&gt;bpftrace/eBPF vs DTrace equivalency&lt;/h2&gt;
&lt;p&gt;I'll show examples of bpftrace/eBPF vs DTrace in the sections that follow, but it's important to note that the eBPF engine was not created as a Linux version of DTrace. eBPF does more.&lt;/p&gt;
&lt;p&gt;eBPF was created by Alexei Starovoitov while at PLUMgrid (he's now at Facebook) as a generic in-kernel virtual machine, with software defined networks as the primary use case. Observability is one of many other use cases, as is &lt;a href=&quot;https://lwn.net/Kernel/Index/#Networking-eXpress_Data_Path_XDP&quot;&gt;eXpress Data Path&lt;/a&gt;, &lt;a href=&quot;https://github.com/cilium/cilium&quot;&gt;container security and networking&lt;/a&gt;, &lt;a href=&quot;https://cilium.io/blog/2018/04/17/why-is-the-kernel-community-replacing-iptables/&quot;&gt;iptables&lt;/a&gt;, &lt;a href=&quot;https://lwn.net/Articles/759188/&quot;&gt;infrared decoding&lt;/a&gt;, &lt;a href=&quot;https://www.slideshare.net/AlexMaestretti/security-monitoring-with-ebpf&quot;&gt;intrusion detection&lt;/a&gt;, &lt;a href=&quot;https://www.usenix.org/conference/atc18/presentation/amit&quot;&gt;hyperupcalls&lt;/a&gt;, and &lt;a href=&quot;https://ossna18.sched.com/event/FAPa/when-ebpf-meets-fuse-improving-performance-of-user-file-systems-ashish-bijlani-georgia-tech&quot;&gt;FUSE performance&lt;/a&gt;. eBPF is hard to use directly, so bcc was created as a Python front-end.&lt;/p&gt;
&lt;p&gt;bpftrace was created as an even &lt;em&gt;higher&lt;/em&gt;-level front end for custom ad-hoc tracing, and can serve a similar role as DTrace. We've been adding bpftrace features as we need them, not just because DTrace had them. I can think of over a dozen things that DTrace can do that bpftrace currently cannot, including custom aggregation printing, shell arguments, translators, sizeof(), speculative tracing, and forced panics. Some we may add as the need arises, but so far I haven't really needed them. And in some cases it's best left to bcc, rather than cluttering up bpftrace with niche functionality.&lt;/p&gt;
&lt;p&gt;DTrace, too, lacked functionality like argument processing that I implemented elsewhere, in shell wrappers. Instead of augmenting bpftrace with shell wrappers, we can just switch to bcc, which can make use of any Python library (including argparse). This makes bpftrace and bcc complimentary. Visualizing this:&lt;/p&gt;
&lt;center&gt;&lt;a href=&quot;http://www.brendangregg.com/blog/images/2018/dtrace_bpftrace_bcc_ebpf_comparison.png&quot;&gt;&lt;img src=&quot;http://www.brendangregg.com/blog/images/2018/dtrace_bpftrace_bcc_ebpf_comparison.png&quot; width=&quot;400&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/center&gt;
&lt;p&gt;There's also a number of things that eBPF can do that DTrace can't, but one I want to mention is the ability to &lt;strong&gt;save and retrieve stack traces&lt;/strong&gt; as variables. I've already used it with bpftrace to debug file descriptor leaks. Here's a tool that does this (fdleak.bt):&lt;/p&gt;
&lt;pre&gt;
kretprobe:__alloc_fd
{
    $fd = retval;
    @alloc_stack[comm, pid, $fd] = ustack;
}

kprobe:__close_fd
{
    $fd = arg1;
    delete(@alloc_stack[comm, pid, $fd]);
}
&lt;/pre&gt;
&lt;p&gt;The output shows user-level stacks that were allocated but not freed. It works by saving the stack on allocation, then deleting it on free. When bpftrace exits, it prints the left-overs in @alloc_stack: the stacks that weren't freed. I wrote a longer version that includes timestamps, so I can find the longer-term survivors. You can apply this technique to any object allocation, and whip up your own leak detection tools on the fly. With DTrace, this required dumping all stacks to a file and post-processing, which involved much higher overhead. eBPF can do it all in-kernel, and filter out potentially millions of objects that were allocated and freed quickly.&lt;/p&gt;
&lt;p&gt;There's an even more important use case, which I showed in my &lt;a href=&quot;http://www.brendangregg.com/blog/2016-02-01/linux-wakeup-offwake-profiling.html&quot;&gt;off-wake time&lt;/a&gt; post, prior to bpftrace: saving waker stacks and associating them with sleeper stacks. It's hard to overstate how important this is. It makes off-CPU analysis effective, which is the counterpart to CPU analysis. The combination of CPU and off-CPU analysis means we have a way to attack any performance issue: a performance engineer's dream.&lt;/p&gt;
&lt;h2&gt;DTrace to bpftrace Cheatsheet&lt;/h2&gt;
&lt;p&gt;If you already know DTrace, it should take you ten minutes to learn the equivalents in bpftrace. Here's key differences as of August 2018:&lt;/p&gt;
&lt;div&gt;
&lt;table border=&quot;1&quot; readability=&quot;6&quot;&gt;&lt;tr&gt;&lt;th&gt;Type&lt;/th&gt;
&lt;th&gt;DTrace&lt;/th&gt;
&lt;th&gt;bpftrace&lt;/th&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;function&lt;/td&gt;
&lt;td&gt;@ = quantize(value)&lt;/td&gt;
&lt;td&gt;@ = hist(value)&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;10&quot;&gt;&lt;td&gt;function&lt;/td&gt;
&lt;td&gt;@ = lquantize(value, min, max, step)&lt;/td&gt;
&lt;td&gt;@ = lhist(value, min, max, step)&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;variable&lt;/td&gt;
&lt;td&gt;this-&amp;gt;name&lt;/td&gt;
&lt;td&gt;$name&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;variable&lt;/td&gt;
&lt;td&gt;self-&amp;gt;name&lt;/td&gt;
&lt;td&gt;@name[tid]&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;variable&lt;/td&gt;
&lt;td&gt;name[key]&lt;/td&gt;
&lt;td&gt;@name[key]&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;variable&lt;/td&gt;
&lt;td&gt;global_name&lt;/td&gt;
&lt;td&gt;@global_name&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;variable&lt;/td&gt;
&lt;td&gt;self-&amp;gt;name = 0&lt;/td&gt;
&lt;td&gt;delete(@name[tid])&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;variable&lt;/td&gt;
&lt;td&gt;curthread&lt;/td&gt;
&lt;td&gt;curtask&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;variable&lt;/td&gt;
&lt;td&gt;probeprov probemod probename&lt;/td&gt;
&lt;td&gt;name&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;provider&lt;/td&gt;
&lt;td&gt;fbt::func:entry&lt;/td&gt;
&lt;td&gt;kprobe:func&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;provider&lt;/td&gt;
&lt;td&gt;fbt::func:return&lt;/td&gt;
&lt;td&gt;kretprobe:func&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;provider&lt;/td&gt;
&lt;td&gt;pid$target::func:entry&lt;/td&gt;
&lt;td&gt;uprobe:func&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;provider&lt;/td&gt;
&lt;td&gt;pid$target::func:return&lt;/td&gt;
&lt;td&gt;uretprobe:func&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;provider&lt;/td&gt;
&lt;td&gt;profile:::99&lt;/td&gt;
&lt;td&gt;profile:hz:99&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;provider&lt;/td&gt;
&lt;td&gt;profile:::tick-1sec&lt;/td&gt;
&lt;td&gt;interval:s:1&lt;/td&gt;
&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;
&lt;p&gt;This list doesn't cover the extra things that bpftrace can do, like access aggregation elements, do user-level tracing system wide, save stacks as variables, etc. See the &lt;a href=&quot;https://github.com/iovisor/bpftrace/blob/master/docs/reference_guide.md&quot;&gt;reference guide&lt;/a&gt; for more details.&lt;/p&gt;
&lt;h2&gt;Script Comparison&lt;/h2&gt;
&lt;p&gt;I could pick scripts that minimize or maximize the differences, but either would be misleading. Here's a comparison for an average-sized DTraceToolkit script (seeksize.d) that uses common functionality.&lt;/p&gt;
&lt;pre&gt;
&lt;strong&gt;DTrace&lt;/strong&gt;

#pragma D option quiet

/*
 * Print header
 */
dtrace:::BEGIN
{
    printf(&quot;Tracing... Hit Ctrl-C to end.\n&quot;);
}

self int last[dev_t];

/*
 * Process io start
 */
io:genunix::start
/self-&amp;gt;last[args[0]-&amp;gt;b_edev] != 0/
{
    /* calculate seek distance */
    this-&amp;gt;last = self-&amp;gt;last[args[0]-&amp;gt;b_edev];
    this-&amp;gt;dist = (int)(args[0]-&amp;gt;b_blkno - this-&amp;gt;last) &amp;gt; 0 ?
        args[0]-&amp;gt;b_blkno - this-&amp;gt;last : this-&amp;gt;last - args[0]-&amp;gt;b_blkno;

    /* store details */
    @Size[pid, curpsinfo-&amp;gt;pr_psargs] = quantize(this-&amp;gt;dist);
}

io:genunix::start
{
    /* save last position of disk head */
    self-&amp;gt;last[args[0]-&amp;gt;b_edev] = args[0]-&amp;gt;b_blkno +
        args[0]-&amp;gt;b_bcount / 512;
}

/*
 * Print final report
 */
dtrace:::END
{
    printf(&quot;\n%8s  %s\n&quot;, &quot;PID&quot;, &quot;CMD&quot;);
    printa(&quot;%8d  %S\n%@d\n&quot;, @Size);
}
&lt;/pre&gt;
&lt;pre&gt;
&lt;strong&gt;bpftrace&lt;/strong&gt;

/*
 * Print header
 */
BEGIN
{
    printf(&quot;Tracing... Hit Ctrl-C to end.\n&quot;);
}

/*
 * Process io start
 */
tracepoint:block:block_rq_insert
/@last[args-&amp;gt;dev]/
{
    // calculate seek distance
    $last = @last[args-&amp;gt;dev];
    $dist = (args-&amp;gt;sector - $last) &amp;gt; 0 ?
        args-&amp;gt;sector - $last : $last - args-&amp;gt;sector;

    // store details
    @size[pid, comm] = hist($dist);
}

tracepoint:block:block_rq_insert
{
    // save last position of disk head
    @last[args-&amp;gt;dev] = args-&amp;gt;sector + args-&amp;gt;nr_sector;
}

/*
 * Print final report
 */
END
{
    printf(&quot;\n@[PID, COMM]:\n&quot;);
    print(@size);
    clear(@size);
    clear(@last);
}

&lt;/pre&gt;
&lt;p&gt;This example shows that the overall script is similar. The major work in porting these scripts to Linux is not the syntax, but is the research and testing to find equivalent Linux tracepoints and their arguments. And that major work is irrespective of the tracing language.&lt;/p&gt;
&lt;p&gt;Now that I ported it, I've found it little odd. I would have guessed that this answers the question: are the disks seeking? But it's really answering a tricker question: is an application causing the disks to seek? I wrote seeksize.d in 2004, so I have to think back to that time to understand it. Back then I could already tell if disks were seeking by interpreting &lt;tt&gt;iostat(1)&lt;/tt&gt; output: seeing high disk latency but small I/O. What &lt;tt&gt;iostat(1)&lt;/tt&gt; couldn't tell me is if it was due to competing applications using the disks, or if an application itself was applying a random workload. That's what I wrote seeksize.d to answer, an answer that directs further tuning: whether you need to separate applications on different disks, or tune one application's disk workload.&lt;/p&gt;
&lt;h2&gt;Why did this take so long?&lt;/h2&gt;
&lt;p&gt;I've spoken to many engineers and companies about finishing a high-level tracer for Linux. It's been an interesting case study of Linux vs commercial development. In summary, the reasons this took so long were:&lt;/p&gt;
&lt;h3&gt;1. Linux isn't a company&lt;/h3&gt;
&lt;p&gt;Scott McNealy, CEO of Sun Microsystems when DTrace was developed, was fond of the saying &quot;all the wood behind one arrow&quot;. So much so, that staff once installed a &lt;a href=&quot;https://www.slideshare.net/brendangregg/from-dtrace-to-linux/34&quot;&gt;giant arrow&lt;/a&gt; through his office window as an April fool's joke. In Linux, all effort hasn't been behind one tracing arrow, but split among 14 (SystemTap, LTTng, ftrace, perf_events, dtrace4linux, OEL DTrace, ktap, sysdig, Intel PIN, bcc, shark, ply, and bpftrace). If Linux was a company, management could consolidate overlapping projects and focus on one or two tracers. But it isn't.&lt;/p&gt;
&lt;h3&gt;2. Linux won&lt;/h3&gt;
&lt;p&gt;Linux dropped the ball on its own dynamic tracing implementation (DProbes in 2000), creating an opportunity for Sun to develop its own as a competitive feature. Sun had billions in revenue, and countless staff worked on making DTrace successful (including sales, marketing, educational services, etc.) That circumstance doesn't exist for Linux. Linux has already won, and there's no company offering any real resources to build a competitive tracer, with one exception: Red Hat.&lt;/p&gt;
&lt;h3&gt;3. Most funding went into SystemTap&lt;/h3&gt;
&lt;p&gt;Ask a RHEL customer about DTrace, and they may say they had it years ago: SystemTap. However, SystemTap never fully merged into the Linux kernel (parts did, like uprobes), so as an out-of-tree project it required maintenance to work at all, and Red Hat only did this for RHEL. Try complaining to Red Hat about this as an Ubuntu user: they'll often say &quot;switch to RHEL&quot;. Can you blame them? Problem is, this was the only real money on the table to build a Linux DTrace (especially since Red Hat picked up the big ex-Sun accounts, who wanted DTrace), and it went into SystemTap.&lt;/p&gt;
&lt;h3&gt;4. Good-enough solutions&lt;/h3&gt;
&lt;p&gt;Another impediment has been good-enough solutions. Some companies have figured out how to get SystemTap (or LTTng or ftrace or perf) to work well enough, and are happy. Would they like eBPF/bcc/bpftrace finished? Sure. But they aren't going to help develop them, as they already have a good-enough solution. Some companies are happy enough using my ftrace perf-tools, or my bcc tools – so my own prior engineering work gives them a reason not to help build something better.&lt;/p&gt;
&lt;h3&gt;5. CTF/BTF&lt;/h3&gt;
&lt;p&gt;DTrace was built on Solaris, which already had Compact Type Format to provide the struct information it needed. Linux had DWARF and debuginfo, which unlike CTF, is not commonly installed. That has hindered developing a real DTrace-like tracer. Only recently, in the Linux 4.18 release, do we now have a CTF technology in Linux: BPF Type Format (BTF).&lt;/p&gt;
&lt;h2&gt;Default Install&lt;/h2&gt;
&lt;p&gt;It's worth mentioning that DTrace was a default install on Solaris. That really aided adoption, as customers didn't have a choice! Now imagine what it would take to make bpftrace a default install on &lt;em&gt;all&lt;/em&gt; Linux distros. I think it's a long shot, which means that Linux may never have the same experience as DTrace on Solaris. But this is an area where you can help: ask your distro maintainer to include bpftrace (plus bcc and sysstat) by default. These are &lt;strong&gt;crisis tools&lt;/strong&gt;, often used to analyze a system suffering an urgent performance issue, and the time to install them (&quot;apt-get update; apt-get install ...&quot;) can mean the issue disappears before you've had a chance to see it.&lt;/p&gt;
&lt;h2&gt;What about DTrace?&lt;/h2&gt;
&lt;p&gt;Just because Linux got eBPF, doesn't make DTrace a terrible tool overnight. It will still be useful on OSes that have it, and any that does is well positioned for a future upgrade to eBPF, which can reuse internals like provider instrumentation. Work has already began to bring eBPF to BSD, where BPF originated.&lt;/p&gt;
&lt;p&gt;It may be worth reassuring people who have invested time into learning DTrace that I don't think that time is wasted. The hardest part of using DTrace or bpftrace is knowing what to do with it, following a methodology to approach problems. Once you get into the guts of some complex software for a pressing production issue, whether you type quantize() or hist() is really the least of your problems. Any time you've spent debugging problems with DTrace is going to help with bpftrace as well.&lt;/p&gt;
&lt;h2&gt;What about ply?&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/iovisor/ply&quot;&gt;ply&lt;/a&gt;, by Tobais Waldekranz, is another front-end to BPF. I like it. It isn't complete yet, but has some interesting differences to bpftrace: ply emits instructions directly, whereas bpftrace uses llvm's IR API (which can be fairly difficult to code in). ply is also C, whereas bpftrace is C++.&lt;/p&gt;
&lt;pre&gt;
# &lt;strong&gt;ply -A -c 'kprobe:SyS_read { @start[tid()] = nsecs(); }
    kretprobe:SyS_read /@start[tid()]/ { @ns.quantize(nsecs() - @start[tid()]);
        @start[tid()] = nil; }'&lt;/strong&gt;
2 probes active
^Cde-activating probes
[...]
@ns:
        
    [ 512,   1k)           3 |########                        |
    [  1k,   2k)           7 |###################             |
    [  2k,   4k)          12 |################################|
    [  4k,   8k)           3 |########                        |
    [  8k,  16k)           2 |#####                           |
    [ 16k,  32k)           0 |                                |
    [ 32k,  64k)           0 |                                |
    [ 64k, 128k)           3 |########                        |
    [128k, 256k)           1 |###                             |
    [256k, 512k)           1 |###                             |
    [512k,   1M)           2 |#####                           |
[...]
&lt;/pre&gt;
&lt;p&gt;It's possible that ply will find its users on embedded Linux and minimal environments, whereas bpftrace will be popular for large server Linux. Note that Tobais currently has been developing many new ply features (a ply 2.0) in his own &lt;a href=&quot;https://github.com/wkz/ply&quot;&gt;ply repo&lt;/a&gt;, that isn't reflected in the iovisor repo yet.&lt;/p&gt;
&lt;h2&gt;Acknowledgements&lt;/h2&gt;
&lt;p&gt;bpftrace was created by Alastair Robertson, and builds upon eBPF and bcc that has had many contributors. See the Acknowledgemets section in my &lt;a href=&quot;http://www.brendangregg.com/blog/2016-10-27/dtrace-for-linux-2016.html&quot;&gt;DTrace for Linux 2016&lt;/a&gt; post which lists DTrace and earlier tracing work. In particular, if you're using bpftrace, you're also using a lot of code developed by Alexei Starovoitov (eBPF), Brendan Blanco (libbpf), myself, Sasha Goldshtein (USDT), and others. See the &lt;a href=&quot;https://github.com/iovisor/bcc&quot;&gt;bcc&lt;/a&gt; repo for the library components we're using. Facebook also have many engineers working on BPF and bcc, who have made it the mature technology it is today.&lt;/p&gt;
&lt;p&gt;bpftrace itself has a language similar to DTrace, as well as awk and C. This wasn't the first attempt at a high-level language on eBPF: the first was Shark, by Jovi Zangwei, then ply by Tobais Waldekranz, then bpftrace by Alastair Robertson. At some point Richard Henderson was developing eBPF as a backend for SystemTap. Thanks to everyone who worked on these, and all the other technologies that we use.&lt;/p&gt;
&lt;p&gt;Finally, thanks to Netflix, who provide a great supportive environment for me to work on and contribute to different technologies, including BPF.&lt;/p&gt;
&lt;h2&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;eBPF changed the landscape of Linux tracing since it began merging into the kernel four years ago. We now have libraries, tools, and a high-level front-end built from scratch for eBPF that is nearing completion: bpftrace. bpftrace gives you the power to analyze the system in custom detail, and find performance wins that other tools cannot. It is complementary to bcc: bcc is great for complex tools, and bpftrace is great for ad hoc one-liners. In this post I described bpftrace and how it compares to DTrace. In my next post, I'll focus more on bpftrace.&lt;/p&gt;
&lt;p&gt;More reading:&lt;/p&gt;
&lt;p&gt;Alastair's first talk on bpftrace is at the &lt;a href=&quot;https://tracingsummit.org/wiki/TracingSummit2018#Schedule&quot;&gt;Tracing Summit&lt;/a&gt; in Edinburgh, Oct 25th.&lt;/p&gt;
&lt;p&gt;To get started with bpftrace, you need a newer Linux kernel version (4.9 or newer is better), and follow the INSTALL.md in the repo, eg: &lt;a href=&quot;https://github.com/iovisor/bpftrace/blob/master/INSTALL.md#ubuntu&quot;&gt;Ubuntu bpftrace install instructions&lt;/a&gt;, which will improve once we have packages. (If you work at Netflix, there's a nflx-bpftrace package for the Bionic BaseAMI, which will become a default install.) What cool thing will you build with bpftrace?&lt;/p&gt;
&lt;/div&gt;&lt;p&gt;&lt;em&gt;You can comment here, but I can't guarantee your comment will remain here forever: I might switch comment systems at some point (eg, if disqus add advertisements).&lt;/em&gt;&lt;/p&gt;</description>
<pubDate>Mon, 08 Oct 2018 15:10:49 +0000</pubDate>
<dc:creator>deirdres</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.brendangregg.com/blog/2018-10-08/dtrace-for-linux-2018.html</dc:identifier>
</item>
<item>
<title>Show HN: Introducing the Alan low-code platform</title>
<link>https://alan-platform.com/pages/tuts/introducing.html</link>
<guid isPermaLink="true" >https://alan-platform.com/pages/tuts/introducing.html</guid>
<description>&lt;p&gt;Today I’d like to introduce you to Alan. We’ve been working on it, in some capacity or other, for more than a decade. What took us so long? Well it turns out that this particular rabbit hole is kinda deep. Let me give you the short version.&lt;/p&gt;&lt;h2 id=&quot;what-is-it&quot;&gt;What is it?&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://alan-platform.com/pages/tuts/alan.png&quot; alt=&quot;Alan logo&quot; width=&quot;128&quot; height=&quot;128&quot;/&gt;Alan is a &lt;a href=&quot;https://en.wikipedia.org/wiki/Low-code_development_platforms&quot;&gt;low code platform&lt;/a&gt;, enabling efficient and low cost development of tailor-made software applications. However, unlike typical low code platforms, you don’t wire together ready-made blocks of functionality. Instead, Alan achieves low-code-ness by letting you write a different, more purposeful kind of code. It’s declarative and not &lt;a href=&quot;https://en.wikipedia.org/wiki/Turing_completeness&quot;&gt;Turing complete&lt;/a&gt;, and in a way you might think of it more as configuration than programming.&lt;/p&gt;
&lt;p&gt;In Alan &lt;a href=&quot;https://alan-platform.com/pages/docs/model/36/application/grammar.html&quot;&gt;your code&lt;/a&gt; specifies the data structure of your application. This specification defines all possible states of the data, and in effect all possible states of your application. A few lines of specification take the place of thousands of lines of code, and you will never have to touch or go near the underlying runtime code (you can’t actually).&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://alan-platform.com/pages/tuts/intro1.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;It’s easy enough to work with for “citizen developers”, so that anyone can build tools to support their activities without needing IT or external developer support. Having a small effective code base also means that Alan scales up to large enterprise applications without the cost and risk involved with traditional solutions.&lt;/p&gt;
&lt;h2 id=&quot;but-how&quot;&gt;But how?&lt;/h2&gt;
&lt;p&gt;It all started with a desire to close the gap between requirement and implementation. What if we could specify requirements in a way that computers can understand and automatically translate into software? There would be no more need for separate, error-prone implementation efforts. Applications would by definition adhere to their specification, and they would be easy to adjust and maintain.&lt;/p&gt;
&lt;p&gt;Furthermore, applications would be easier to use, because they would be generated with excellent UX baked in, and implementations cannot introduce magical or unintended behavior. People would also never need training for new applications: they would already know how to use them.&lt;/p&gt;
&lt;p&gt;It’s nice to dream isn’t it?&lt;/p&gt;
&lt;h2 id=&quot;a-data-spec-for-the-ages&quot;&gt;A data spec for the ages&lt;/h2&gt;
&lt;p&gt;We discovered that for data centric applications (which is essentially most software you use from day to day), all application-specific state and all possible state transitions could be represented as a data structure. We no longer looked at data as something to put into a database, query and then transform into what an application actually needs. In fact, a comprehensive specification of all data that an application deals with should be sufficient for solving most typical data management problems.&lt;/p&gt;
&lt;p&gt;Alan is the realization of this idea: at its heart it’s a data modeling language that enables detailed specification of data. With Alan you can specify all possible states of an application, and all possible state transitions. In addition, you can describe calculations, access control, and data transformations to share data with external systems.&lt;/p&gt;
&lt;h2 id=&quot;fully-generated-push-architecture&quot;&gt;Fully generated push architecture&lt;/h2&gt;
&lt;p&gt;A data model is all you need for generating a full software stack. This includes a &lt;a href=&quot;https://en.wikipedia.org/wiki/Graph_database&quot;&gt;graph database&lt;/a&gt; with a 100% push architecture and a responsive web-based user interface, Excel and CSV export features, and real time syncing with a SQL database.&lt;/p&gt;
&lt;p&gt;If you need custom logic or data wrangling, Alan employs what we call “side apps”. These are small utilities that run alongside your core application. You specify what what data is available to such apps, and the operations they can perform. This ensures data security and removes the risk of inadvertently breaking side apps when modifying the core application.&lt;/p&gt;
&lt;p&gt;Updating Alan software through new insights, or simply to add new features, is super easy. You modify the data model, specify data migration rules between the two versions, and deploy it with only a minute or two downtime and the guarantee that you won’t lose any data. If you have a brilliant idea you can have it built and deployed before your coffee gets cold.&lt;/p&gt;
&lt;h2 id=&quot;well--thatll-never-work&quot;&gt;Well , that’ll never work…&lt;/h2&gt;
&lt;p&gt;Actually, it kinda already does.&lt;/p&gt;
&lt;p&gt;Solutions built with Alan include everything from &lt;a href=&quot;https://github.com/M-industries/Hours&quot;&gt;small accounting systems&lt;/a&gt; you can build in an afternoon, to large ERP solutions. &lt;a href=&quot;https://www.m-industries.com&quot;&gt;M-industries&lt;/a&gt; and &lt;a href=&quot;https://www.kjerner.com/ssn/&quot;&gt;Kjerner&lt;/a&gt; have been using Alan for several years, to provide solutions for customers like &lt;a href=&quot;https://www.tatasteel.com&quot;&gt;Tata Steel&lt;/a&gt; and &lt;a href=&quot;https://www.hydro.com&quot;&gt;Hydro&lt;/a&gt;. Alan software is being used as an integral part of day-to-day operations at large manufacturing plants, running stand-alone or as part of an infrastructure with legacy software, relational databases, and other third party systems. It includes both fully generated and custom built graphical user interfaces and dashboards, running on desktops, touch terminals, hand-held devices etc.&lt;/p&gt;
&lt;p&gt;In practice, Alan picks up right where Excel starts to cause more problems than it solves, or where you can’t find an off-the-shelf application fitting your needs. If you need multiple users and access control, care about data quality, or want to incrementally develop an application without breaking everything all the time, Alan is what you’re looking for.&lt;/p&gt;
&lt;h2 id=&quot;see-it-with-your-own-eyes&quot;&gt;See it with your own eyes&lt;/h2&gt;
&lt;p&gt;We understand it’s pretty unbelievable, so that’s why you can try it for yourself right now. Start from scratch by following &lt;a href=&quot;https://alan-platform.com/pages/tuts/getting-started.html&quot;&gt;our tutorial&lt;/a&gt;, or take our &lt;a href=&quot;https://github.com/M-industries/Hours&quot;&gt;Hours application&lt;/a&gt; for a spin. Feel free to use Alan for personal projects or tools for your team. It’s still heavily under development (we still have &lt;em&gt;so&lt;/em&gt; many cool ideas!), so new releases aren’t guaranteed to be backwards compatible, but stability is usually pretty good.&lt;/p&gt;
&lt;p&gt;Want to know more about enterprise level systems, our integration tools, or about building custom UI’s with Alan? &lt;a href=&quot;https://alan-platform.com/about/#m-industries&quot;&gt;Get in touch&lt;/a&gt; and ask for a demo.&lt;/p&gt;
&lt;p&gt;Let us know what you think on the &lt;a href=&quot;https://forum.alan-platform.com&quot;&gt;forum&lt;/a&gt; and don’t be afraid to ask questions.&lt;/p&gt;
&lt;p&gt;We’re super excited to see what you build with Alan.&lt;/p&gt;
</description>
<pubDate>Mon, 08 Oct 2018 11:50:38 +0000</pubDate>
<dc:creator>klageveen</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://alan-platform.com/pages/tuts/introducing.html</dc:identifier>
</item>
<item>
<title>Model 3 achieves the lowest probability of injury of any car tested by NHTS</title>
<link>https://www.tesla.com/blog/model-3-lowest-probability-injury-any-vehicle-ever-tested-nhtsa</link>
<guid isPermaLink="true" >https://www.tesla.com/blog/model-3-lowest-probability-injury-any-vehicle-ever-tested-nhtsa</guid>
<description>&lt;p&gt;Based on the advanced architecture of Model S and Model X, which were previously found by the National Highway Traffic Safety Administration (NHTSA) to have the lowest and second lowest probabilities of injury of all cars ever tested, we engineered Model 3 to be the safest car ever built. Now, not only has Model 3 achieved a perfect 5-star safety rating in every category and sub-category, but NHTSA’s tests also show that it has the lowest probability of injury of all cars the safety agency has ever tested.&lt;/p&gt;
&lt;p&gt;NHTSA tested Model 3 Long Range Rear-Wheel Drive as part of its New Car Assessment Program, a series of crash tests used to calculate the likelihood of serious bodily injury for front, side and rollover crashes. The agency’s data shows that vehicle occupants are less likely to get seriously hurt in these types of crashes when in a Model 3 than in any other car. NHTSA’s previous tests of Model S and Model X still hold the record for the second and third lowest probabilities of injury, making Tesla vehicles the best ever rated by NHTSA. We expect similar results for other Model 3 variants, including our dual-motor vehicles, when they are rated.&lt;/p&gt;
&lt;img src=&quot;https://www.tesla.com/sites/default/files/blog/m3-nhtsa-blog-09272018.jpg&quot;/&gt;&lt;p&gt;&lt;strong&gt;What makes Model 3 safe?&lt;/strong&gt;&lt;br/&gt;In addition to its near 50/50 weight distribution, Model 3 was also designed with an extremely low polar moment of inertia, which means that its heaviest components are located closer to the car’s center of gravity. Even though Model 3 has no engine, its performance is similar to what’s described as a “mid-engine car” due to its centered battery pack (the heaviest component of the car) and the fact that Model 3’s rear motor is placed slightly in front of the rear axle rather than behind it. Not only does this architecture add to the overall agility and handling of the car, it also improves the capability of stability control by minimizing rotational kinetic energy.&lt;/p&gt;
&lt;p&gt;Like Model S and Model X, Model 3 benefits from its all-electric architecture and powertrain design, which consists of a strong, rigid passenger compartment, fortified battery pack, and overall low center of gravity. These safety fundamentals help to prevent intrusion into the cabin and battery modules, reduce rollover risk, and distribute crash forces systematically away from the cabin – all while providing the foundation for our superior front crumple zone that is optimized to absorb energy and crush more efficiently. Here, you can see how the orange internal combustion engine block is thrust towards the cabin during a frontal impact test:&lt;/p&gt;
&lt;iframe src=&quot;https://player.vimeo.com/video/291143444?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-desk&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt; &lt;iframe src=&quot;https://player.vimeo.com/video/291143444?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-mobile&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;
&lt;p&gt;We also added state of the art features and new innovations in crash structure design, restraints and airbags, and battery safety to the core of Model 3’s design:&lt;/p&gt;
&lt;p&gt;In frontal crashes, Model 3’s efficient front crumple zone carefully controls the deceleration of occupants, while its advanced restraint system complements this with pre-tensioners and load-limiters that keep occupants safely in place. Specially designed passenger airbags are shaped to protect an occupant’s head in angled or offset crashes, and active vents dynamically adjust the internal pressure of the frontal airbags to optimize protection based on the unique characteristics of the crash. Front and knee airbags and a collapsible steering column work to further reduce injury, all contributing to Model 3’s 5-star rating in frontal impact.&lt;/p&gt;
&lt;iframe src=&quot;https://player.vimeo.com/video/292177900?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-desk&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt; &lt;iframe src=&quot;https://player.vimeo.com/video/292177900?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-mobile&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;
&lt;p&gt;In pole impact crashes, in which a narrow obstruction impacts the car between the main crash rails, energy-absorbing lateral and diagonal beam structures work to mitigate the impact. This includes a high-strength aluminum bumper beam, a sway bar placed low and forward in the front of the car, cross-members at the front of the steel subframe that are connected to the main crash rails, and additional diagonal beams in the subframe that distribute energy back to the crash rails when they aren’t directly impacted. An ultra-high strength martensitic steel beam is also attached to the top of the front suspension to further absorb crash energy from severe impacts, and the rear part of the subframe is shaped like a “U” and buckles down when impacted. These structures continue to be effective even when a front motor is added for Model 3 Dual-Motor All-Wheel Drive, due to the fact that the subframe is designed to pull the nose of the motor down and out of the way.&lt;/p&gt;
&lt;iframe src=&quot;https://player.vimeo.com/video/292172363?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-desk&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt; &lt;iframe src=&quot;https://player.vimeo.com/video/292172363?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-mobile&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;
&lt;p&gt;Model 3 also has the lowest intrusion from side pole impact of any vehicle tested by NHTSA. Unlike frontal crashes, there is little room for crumple zone in a side impact, so we patented our own pillar structures and side sills to absorb as much energy as possible in a very short distance. These structures work alongside the vehicle’s rigid body and fortified battery architecture to further reduce and prevent compartment intrusion. With less intrusion into the cabin, our side airbags have more space to inflate and cushion the occupants inside.&lt;/p&gt;
&lt;iframe src=&quot;https://player.vimeo.com/video/291143316?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-desk&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt; &lt;iframe src=&quot;https://player.vimeo.com/video/291143316?color=cc0000&amp;amp;title=0&amp;amp;byline=0&amp;amp;portrait=0&quot; class=&quot;hide-on-mobile&quot; frameborder=&quot;0&quot; webkitallowfullscreen=&quot;&quot; mozallowfullscreen=&quot;&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;
&lt;p&gt;Rollover accidents are a significant contributor to injuries and deaths on U.S. roads. Tesla’s vehicle architecture is fundamentally designed to have a very low center of gravity, which is accomplished by placing the heavy battery pack and electric motors as close to the ground as possible. In the event that a rollover does occur, our internal tests show that the Model 3 body structure can withstand roof-crush loads equivalent to more than four times its own weight and with very little structural deformation. NHTSA’s standards only require that cars withstand loads of three times their own weight.&lt;/p&gt;
&lt;p&gt;Many companies try to build cars that perform well in crash tests, and every car company claims their vehicles are safe. But when a crash happens in real life, these test results show that if you are driving a Tesla, you have the best chance of avoiding serious injury.&lt;/p&gt;
</description>
<pubDate>Mon, 08 Oct 2018 10:02:13 +0000</pubDate>
<dc:creator>sahin-boydas</dc:creator>
<og:title>Model 3 achieves the lowest probability of injury of any vehicle ever tested by NHTSA</og:title>
<og:description>Based on the advanced architecture of Model S and Model X, which were previously found by the National Highway Traffic Safety Administration (NHTSA) to have the lowest and second lowest probabilities of injury of all cars ever tested, we engineered Model 3 to be the safest car ever built. Now, not only has Model 3 achieved a perfect 5-star safety rating in every category and sub-category, but NHTSA’s tests also show that it has the lowest probability of injury of all cars the safety agency has ever tested.</og:description>
<og:image>https://www.tesla.com/sites/default/files/blog_images/tesla_announcement_social.jpg</og:image>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.tesla.com/blog/model-3-lowest-probability-injury-any-vehicle-ever-tested-nhtsa</dc:identifier>
</item>
<item>
<title>French intelligence officer caught selling confidential data on the dark web</title>
<link>https://www.zdnet.com/article/french-police-officer-caught-selling-confidential-police-data-on-the-dark-web</link>
<guid isPermaLink="true" >https://www.zdnet.com/article/french-police-officer-caught-selling-confidential-police-data-on-the-dark-web</guid>
<description>&lt;p&gt;A French police officer has been charged and arrested last week for selling confidential data on the dark web in exchange for Bitcoin.&lt;/p&gt;

&lt;div class=&quot;relatedContent alignRight&quot;&gt;
&lt;h3 class=&quot;heading&quot;&gt;&lt;span class=&quot;int&quot;&gt;More security news&lt;/span&gt;&lt;/h3&gt;
&lt;/div&gt;
&lt;p&gt;The officer worked for Direction Générale de la Sécurité Intérieure (DGSI, translated to General Directorate for Internal Security), a French intelligence agency charged with counter-espionage, counter-terrorism, countering cybercrime and surveillance of potentially threatening groups, organizations, and social phenomena.&lt;/p&gt;
&lt;p&gt;French authorities did not release the officer's name but said he operated using the pseudonym Haurus on a dark web market known as Black Hand.&lt;/p&gt;
&lt;p&gt;The officer stands accused of selling confidential information such as sensitive documents that made their way into the hands of cyber-criminals, &lt;a href=&quot;http://www.leparisien.fr/faits-divers/un-policier-de-la-dgsi-ecroue-pour-vente-d-informations-confidentielles-28-09-2018-7906275.php&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;Le Parisien&lt;/a&gt; reported last week. Investigators believe the criminals to whom Haurus sold the confidential files used them to create forged documents.&lt;/p&gt;
&lt;p&gt;French authorities also say the officer advertised a service to track the location of mobile devices based on a supplied phone number. He advertised the system as a way to track spouses or members of competing criminal gangs. Investigators believe Haurus was using the French police resources designed with the intention to track criminals for this service.&lt;/p&gt;

&lt;p&gt;He also advertised a service that told buyers if they were tracked by French police and what information officers had on them.&lt;/p&gt;
&lt;p&gt;Officials said they tracked down the real-life identity of Haurus after they &lt;a href=&quot;https://www.scribd.com/document/389982835/304-Gerald-DARMANIN-Felicite-La-Douane-Pour-Le-Demantelement-Du-Forum-Black-Hand-Ou-La-Main-Noire-l-Une-Des-Plus-Importantes-Places-de-Marche&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;seized and shut down the Black Hand portal&lt;/a&gt; on June 12, earlier this year. They were also able to track down some of the documents put up for sale on the market based on an individual-specific code that's added to official documents and tracks their history.&lt;/p&gt;
&lt;section class=&quot;sharethrough-top&quot; data-component=&quot;medusaContentRecommendation&quot; data-medusa-content-recommendation-options=&quot;{&amp;quot;promo&amp;quot;:&amp;quot;promo_ZD_recommendation_sharethrough_top_in_article_desktop&amp;quot;,&amp;quot;spot&amp;quot;:&amp;quot;dfp-in-article&amp;quot;}&quot;&gt;
&lt;/section&gt;&lt;p&gt;Haurus was charged on September 26 and arrested two days later in Nanterre, Hauts-de-Seine. He faces up to seven years in prison and a fine of up to a fine of €100,000 / $115,000.&lt;/p&gt;
&lt;p&gt;All sorts of goods are available for sale on the dark web, such as &lt;a href=&quot;https://www.zdnet.com/article/chinese-police-arrest-hacker-who-sold-data-of-millions-of-hotel-guests-on-the-dark-web/&quot; target=&quot;_blank&quot;&gt;hotel guest data&lt;/a&gt;, &lt;a href=&quot;https://www.zdnet.com/article/hacker-advertising-huge-health-insurance-database/&quot; target=&quot;_blank&quot;&gt;health records&lt;/a&gt;, &lt;a href=&quot;https://www.zdnet.com/article/former-nso-employee-steals-flogs-phone-hacking-tools-for-50-million/&quot; target=&quot;_blank&quot;&gt;government spyware&lt;/a&gt;, &lt;a href=&quot;https://www.cnet.com/news/researchers-found-stolen-military-secrets-for-sale-on-the-dark-web/&quot; target=&quot;_blank&quot; rel=&quot;noopener noreferrer&quot;&gt;US military drone data&lt;/a&gt;, and backdoors into &lt;a href=&quot;https://www.zdnet.com/article/hackers-are-selling-backdoors-into-pcs-for-just-10/&quot; target=&quot;_blank&quot;&gt;PCs&lt;/a&gt; and &lt;a href=&quot;https://www.zdnet.com/article/access-to-over-3000-backdoored-sites-sold-on-russian-hacking-forum/&quot; target=&quot;_blank&quot;&gt;servers&lt;/a&gt;. This case stands out because it's usually hackers and cyber-criminals who sell this data and not police officers.&lt;/p&gt;

&lt;h3&gt;&lt;strong&gt;READ MORE ON CYBER CRIME&lt;/strong&gt;&lt;/h3&gt;
</description>
<pubDate>Mon, 08 Oct 2018 10:01:19 +0000</pubDate>
<dc:creator>reacweb</dc:creator>
<og:type>article</og:type>
<og:url>https://www.zdnet.com/article/french-police-officer-caught-selling-confidential-police-data-on-the-dark-web/</og:url>
<og:title>French police officer caught selling confidential police data on the dark web | ZDNet</og:title>
<og:description>Police officer also advertised a system to track the location of buyers' gang rivals or spouses based on the telephone numbers.</og:description>
<og:image>https://zdnet2.cbsistatic.com/hub/i/r/2016/05/05/998f23c4-af4b-49ed-b6fc-25bc36bc8c9d/thumbnail/770x578/bd820e64e033108603be9d23f42fee91/dark-web-dark-net.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.zdnet.com/article/french-police-officer-caught-selling-confidential-police-data-on-the-dark-web/</dc:identifier>
</item>
<item>
<title>Tech Workers Now Want to Know: What Are We Building This For?</title>
<link>https://www.nytimes.com/2018/10/07/technology/tech-workers-ask-censorship-surveillance.html</link>
<guid isPermaLink="true" >https://www.nytimes.com/2018/10/07/technology/tech-workers-ask-censorship-surveillance.html</guid>
<description>&lt;p class=&quot;css-1xl4flh e2kc3sl0&quot;&gt;“What people are looking for — not just employees — they are looking for some clarity,” said Frank Shaw, a Microsoft spokesman. “Are there principles that get applied? Even if you don’t agree with the decision that gets made, if you understand the thinking behind it, it helps a lot.”&lt;/p&gt;
&lt;p class=&quot;css-1xl4flh e2kc3sl0&quot;&gt;Amazon did not respond to a request for comment.&lt;/p&gt;
&lt;p class=&quot;css-1xl4flh e2kc3sl0&quot;&gt;The lack of information about what tech employees are working on was recently evident at Clarifai, an artificial intelligence start-up in New York City.&lt;/p&gt;
&lt;p class=&quot;css-1xl4flh e2kc3sl0&quot;&gt;Last year, a small team of Clarifai engineers began working on a project inside a private room at its downtown New York office, said three people with knowledge of the matter, who spoke on the condition that they not be identified for fear of retaliation. Paper covered the windows, and employees called the room “The Chamber of Secrets,” in a sly reference to the second Harry Potter novel. Even the eight engineers and researchers working inside the room did not entirely realize the nature of the project, the people said.&lt;/p&gt;
&lt;p class=&quot;css-1xl4flh e2kc3sl0&quot;&gt;When employees asked about the project in meetings, Clarifai’s chief executive, Matt Zeiler, said it was a government project related to “analytics” or “surveillance” and would “save lives,” according to the people.&lt;/p&gt;
&lt;p class=&quot;css-1xl4flh e2kc3sl0&quot;&gt;After employees read documents posted to Clarifai’s internal systems, it became clear that the company had won a contract for Project Maven and that workers were creating something for the Defense Department, the people said. One engineer quit the project immediately after a meeting with the Defense Department where killing was discussed in frank terms, they said.&lt;/p&gt;
&lt;p class=&quot;css-1xl4flh e2kc3sl0&quot;&gt;A Clarifai spokesman said that at the very beginning of the project, the company sat down with those chosen for it to brief them on the nature of the work, and one employee quit the project then. “Every member of Clarifai’s Project Maven team agreed to work on the project, and the two people who chose not to participate were assigned to different efforts across the company,” the spokesman said.&lt;/p&gt;
</description>
<pubDate>Mon, 08 Oct 2018 08:32:51 +0000</pubDate>
<dc:creator>siscia</dc:creator>
<og:url>https://www.nytimes.com/2018/10/07/technology/tech-workers-ask-censorship-surveillance.html</og:url>
<og:type>article</og:type>
<og:title>Tech Workers Now Want to Know: What Are We Building This For?</og:title>
<og:image>https://static01.nyt.com/images/2018/10/06/business/06valleyworkers-01/06valleyworkers-01-facebookJumbo.jpg</og:image>
<og:description>Tech employees concerned their products are being deployed for government surveillance or censorship are increasingly asking their employers how the technology is being used.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/2018/10/07/technology/tech-workers-ask-censorship-surveillance.html</dc:identifier>
</item>
</channel>
</rss>