<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>Burger King Has an Opinion on Net Neutrality</title>
<link>https://www.bloomberg.com/news/articles/2018-01-24/net-neutrality-movement-finds-a-fast-food-friend-in-burger-king</link>
<guid isPermaLink="true" >https://www.bloomberg.com/news/articles/2018-01-24/net-neutrality-movement-finds-a-fast-food-friend-in-burger-king</guid>
<description>&lt;p&gt;An unlikely voice has joined the passionate debate over internet regulation known as net neutrality: Burger King.&lt;/p&gt;


&lt;p&gt;The fast-food chain released a nearly 3 minute &lt;a itemscope=&quot;itemscope&quot; itemprop=&quot;StoryLink&quot; href=&quot;https://www.youtube.com/watch?v=ltzy5vRmN8Q&quot; title=&quot;Whopper net neutrality ad&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;video&lt;/a&gt; on YouTube that portrays the downside of being asked to pay more for speedier service. In it, customers at a Los Angeles restaurant impatiently wait at the counter for Whoppers while others who, they are told, had paid more, received faster service.&lt;/p&gt;


&lt;div class=&quot;thirdparty-embed&quot;&gt;
&lt;div class=&quot;thirdparty-embed__container&quot;&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/ltzy5vRmN8Q?rel=0&amp;amp;showinfo=0&quot; allowfullscreen=&quot;&quot; scrolling=&quot;no&quot; data-embed-id=&quot;https://www.youtube.com/watch?v=ltzy5vRmN8Q&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The customers are baffled, such as the hungry diner waiting for what turns out to be a slow-access Whopper. &quot;Wait. What?&quot; he exclaims.&lt;/p&gt;



&lt;p&gt;&quot;Whopper neutrality was repealed,” a counter worker explains.&lt;/p&gt;



&lt;p&gt;“We believe the internet should be like Burger King restaurants, a place that doesn’t prioritize and welcomes everyone,” Fernando Machado, Burger King’s global chief marketing officer, said in a statement. &quot;That is why we created this experiment, to call attention to the potential effects of net neutrality.”&lt;/p&gt;
&lt;p&gt;Burger King restaurants are independent franchisees but the brand is owned by &lt;a itemscope=&quot;itemscope&quot; itemprop=&quot;StoryLink&quot; href=&quot;https://www.bloomberg.com/quote/QSR:US&quot; title=&quot;Company Overview&quot; rel=&quot;nofollow noopener&quot;&gt;Restaurant Brands International&lt;/a&gt;, based in Ontario, Canada.&lt;/p&gt;
&lt;p&gt;Wonks and politicians perked up.&lt;/p&gt;
&lt;p&gt;“Must watch,” &lt;a itemscope=&quot;itemscope&quot; itemprop=&quot;StoryLink&quot; href=&quot;https://twitter.com/brianschatz/status/956220724573700096&quot; title=&quot;Schatz tweet&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;tweeted&lt;/a&gt; Hawaii Democratic Senator Brian Schatz, who has criticized &lt;a itemscope=&quot;itemscope&quot; itemprop=&quot;StoryLink&quot; href=&quot;https://www.bloomberg.com/quote/0244544Z:US&quot; title=&quot;Company Overview&quot; rel=&quot;nofollow noopener&quot;&gt;Federal Communications Commission&lt;/a&gt; Republicans for their December vote to eliminate rules forbidding broadband providers such as AT&amp;amp;T Inc. and Comcast Corp. from blocking or slowing web traffic.&lt;/p&gt;

&lt;p&gt;“When it comes to the internet, consumers and innovators deserve to have it their way -- not big corporations,” Connecticut’s Richard Blumenthal, another Democratic senator, said in &lt;a itemscope=&quot;itemscope&quot; itemprop=&quot;StoryLink&quot; href=&quot;https://twitter.com/SenBlumenthal/status/956220708593553410&quot; title=&quot;Blumenthal tweet&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a tweet&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Some panned the ad.&lt;/p&gt;
&lt;p&gt;&lt;a itemscope=&quot;itemscope&quot; itemprop=&quot;StoryLink&quot; href=&quot;https://twitter.com/BurgerKing&quot; title=&quot;Click to view webpage.&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;“Burger King&lt;/a&gt; understands net neutrality even less than their people-on-the-street, who at least know they are ignorant,” tweeted Phil Kerpen, president of the group American Commitment, which backed the Republican proposal to roll back Obama-era rules.&lt;/p&gt;
&lt;p&gt;At the end of the video, the chain’s King mascot sips from a giant mug bearing the logo of Reese’s candy. It’s an unmistakable reference to U.S. Federal Communications Commission chairman Ajit Pai, who wields a large mug emblazoned with the Reese’s image at agency meetings.&lt;/p&gt;
&lt;p&gt;Pai steered the agency in December to a party line vote that eliminated Obama-era rules on net neutrality.&lt;/p&gt;
</description>
<pubDate>Wed, 24 Jan 2018 22:10:55 +0000</pubDate>
<dc:creator>Dangeranger</dc:creator>
<og:description>An unlikely voice has joined the passionate debate over internet regulation known as net neutrality: Burger King.</og:description>
<og:image>https://assets.bwbx.io/images/users/iqjWHBFdfxIU/iOfOTgc6Yx0g/v0/1200x798.jpg</og:image>
<og:title>Burger King Has an Opinion on Net Neutrality</og:title>
<og:type>article</og:type>
<og:url>https://www.bloomberg.com/news/articles/2018-01-24/net-neutrality-movement-finds-a-fast-food-friend-in-burger-king</og:url>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bloomberg.com/news/articles/2018-01-24/net-neutrality-movement-finds-a-fast-food-friend-in-burger-king</dc:identifier>
</item>
<item>
<title>Scientists In Alaska Find Mammoth Amounts Of Carbon In The Warming Permafrost</title>
<link>https://www.npr.org/sections/goatsandsoda/2018/01/24/575220206/is-there-a-ticking-time-bomb-under-the-arctic</link>
<guid isPermaLink="true" >https://www.npr.org/sections/goatsandsoda/2018/01/24/575220206/is-there-a-ticking-time-bomb-under-the-arctic</guid>
<description>&lt;div id=&quot;res580099004&quot; class=&quot;bucketwrap image large&quot;&gt;
&lt;div class=&quot;imagewrap&quot; data-crop-type=&quot;&quot;&gt;&lt;img src=&quot;https://media.npr.org/assets/img/2018/01/23/permafrost_custom-cfbc8ea7ebc5f88959f2892c2d688a9dfa46af74-s1100-c15.jpg&quot; data-original=&quot;https://media.npr.org/assets/img/2018/01/23/permafrost_custom-cfbc8ea7ebc5f88959f2892c2d688a9dfa46af74-s1100.jpg&quot; class=&quot;img lazyOnLoad&quot; alt=&quot;&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;credit-caption&quot;&gt;
&lt;div class=&quot;caption-wrap&quot; readability=&quot;7.5&quot;&gt;
&lt;div class=&quot;caption&quot; aria-label=&quot;Image caption&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;The Permafrost Tunnel Research Facility, dug in the mid-1960s, allows scientists a three-dimensional look at frozen ground. &lt;strong class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/strong&gt; &lt;strong class=&quot;hide-caption&quot;&gt;hide caption&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;strong class=&quot;toggle-caption&quot;&gt;toggle caption&lt;/strong&gt;&lt;/div&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;enlarge_measure&quot;&gt;
&lt;div class=&quot;img_wrap&quot;&gt;&lt;img data-original=&quot;https://media.npr.org/assets/img/2018/01/23/permafrost_custom-cfbc8ea7ebc5f88959f2892c2d688a9dfa46af74-s1200.jpg&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;enlarge_html&quot; readability=&quot;7.5&quot;&gt;
&lt;div class=&quot;image_data&quot; readability=&quot;10&quot;&gt;
&lt;p class=&quot;caption&quot;&gt;The Permafrost Tunnel Research Facility, dug in the mid-1960s, allows scientists a three-dimensional look at frozen ground.&lt;/p&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A short drive north of Fairbanks, Alaska, there's a red shed stuck right up against a hillside. The shed looks unremarkable, except for the door. It looks like a door to a walk-in freezer, with thick insulation and a heavy latch. Whatever is behind that door needs to stay very cold.&lt;/p&gt;
&lt;p&gt;&quot;Are you ready to go inside?&quot; asks Dr. Thomas Douglas, a geochemist at the U.S. Army Corps of Engineers.&lt;/p&gt;
&lt;p&gt;Behind the door is a geological time bomb, scientists say. No one knows exactly how big the bomb is. It may even be a dud that barely detonates. But the fallout could be so large that it's felt all around the world. Now there's evidence that, in the past few years, the bomb's timer has started ticking.&lt;/p&gt;
&lt;p&gt;Douglas opens the shed door, and we step inside. Immediately, we're standing 40 feet below ground, inside a tunnel carved into the hillside.&lt;/p&gt;
&lt;p&gt;&quot;That's a mammoth leg right there,&quot; Douglas says as he points to a giant femur protruding from the tunnel wall.&lt;/p&gt;
&lt;aside id=&quot;ad-backstage-wrap&quot; aria-label=&quot;advertisement&quot;&gt;
&lt;/aside&gt;&lt;aside id=&quot;ad-mobilebackfill-wrap&quot; aria-label=&quot;advertisement&quot;&gt;
&lt;/aside&gt;&lt;p&gt;All around are signs of extinct creatures. Tusks poke out of the ceiling and skulls stick up from the floor. But it's the material between the bones that interests Douglas the most: the permafrost.&lt;/p&gt;
&lt;p&gt;In the 1960s, the Army dug the tunnel so it could study this unique surface, which covers about a quarter of the Northern Hemisphere. In some places, the frozen soil extends downward more than 1,000 feet, or about the height of the Empire State Building.&lt;/p&gt;
&lt;div id=&quot;res580099343&quot; class=&quot;bucketwrap image large&quot;&gt;
&lt;div class=&quot;imagewrap&quot; data-crop-type=&quot;&quot;&gt;&lt;img src=&quot;https://media.npr.org/assets/img/2018/01/23/bonewall_custom-a96d6398fb16b237959f7758d37be7ab20831fda-s1100-c15.jpg&quot; data-original=&quot;https://media.npr.org/assets/img/2018/01/23/bonewall_custom-a96d6398fb16b237959f7758d37be7ab20831fda-s1100.jpg&quot; class=&quot;img lazyOnLoad&quot; alt=&quot;&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;credit-caption&quot;&gt;
&lt;div class=&quot;caption-wrap&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;caption&quot; aria-label=&quot;Image caption&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;A mammoth bone sticks out of the wall of the tunnel in the permafrost. &lt;strong class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/strong&gt; &lt;strong class=&quot;hide-caption&quot;&gt;hide caption&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;strong class=&quot;toggle-caption&quot;&gt;toggle caption&lt;/strong&gt;&lt;/div&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;enlarge_measure&quot;&gt;
&lt;div class=&quot;img_wrap&quot;&gt;&lt;img data-original=&quot;https://media.npr.org/assets/img/2018/01/23/bonewall_custom-a96d6398fb16b237959f7758d37be7ab20831fda-s1200.jpg&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;enlarge_html&quot; readability=&quot;6&quot;&gt;
&lt;div class=&quot;image_data&quot; readability=&quot;7&quot;&gt;
&lt;p class=&quot;caption&quot;&gt;A mammoth bone sticks out of the wall of the tunnel in the permafrost.&lt;/p&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Technically, permafrost is frozen soil. But it's helpful to think of it in terms of chocolate cake. Typically, cake is soft, moist and spongy. Now if you take that cake, dip it into water and freeze it, the cake becomes hard or stiff. That's exactly what happens to soil when you freeze it: Moist, soft soil turns hard and stiff. That's permafrost.&lt;/p&gt;
&lt;p&gt;For the first time in centuries, the Arctic permafrost is beginning to change — rapidly. It's warming up. Some places are softening like a stick of butter left out on the kitchen counter.&lt;/p&gt;
&lt;p&gt;In northern Alaska, the temperature at some permafrost sites has risen by more than 4 degrees Fahrenheit since the 1980s, the National Oceanic and Atmospheric Administration &lt;a href=&quot;http://www.arctic.noaa.gov/Report-Card/Report-Card-2017/ArtMID/7798/ArticleID/694/Terrestrial-Permafrost&quot;&gt;reported&lt;/a&gt; in November. And in recent years, many spots have reached record temperatures.&lt;/p&gt;
&lt;p&gt;&quot;Arctic shows no sign of returning to reliably frozen region of recent past decades,&quot; NOAA &lt;a href=&quot;http://www.arctic.noaa.gov/Report-Card/Report-Card-2017&quot;&gt;wrote&lt;/a&gt; in its annual Arctic Report Card last year.&lt;/p&gt;
&lt;p&gt;The consequences of this warming could have ripple effects around the world. To explain why, Douglas takes me deeper down into the tunnel.&lt;/p&gt;
&lt;p&gt;&quot;This is really an amazing feature,&quot; he says, shining his flashlight up to the ceiling. Crispy grass is dangling upside-down above our heads.&lt;/p&gt;
&lt;p&gt;&quot;It's green grass — from 25,000 years ago,&quot; he exclaims. &quot;It has been preserved that way for 25,000 years.&quot;&lt;/p&gt;
&lt;p&gt;The permafrost is packed with the remains of ancient life. From prehistoric grass and trees to woolly mammoths and woolly rhinoceroses, just about every creature that lived on the tundra over the past 100,000 years is buried and preserved down in the permafrost.&lt;/p&gt;
&lt;p&gt;And all this life is made of carbon. So there's a massive amount of carbon buried down here. &quot;The permafrost contains twice as much carbon as is currently in Earth's atmosphere,&quot; Douglas says. &quot;That's 1,600 billion metric tons.&quot;&lt;/p&gt;
&lt;p&gt;In fact, there's more carbon in the permafrost, Douglas says, than all the carbon humans have spewed into the atmosphere since the Industrial Revolution — first with steam trains, then with coal plants, cars and planes.&lt;/p&gt;
&lt;div id=&quot;res580100066&quot; class=&quot;bucketwrap image large&quot;&gt;
&lt;div class=&quot;imagewrap&quot; data-crop-type=&quot;&quot;&gt;&lt;img src=&quot;https://media.npr.org/assets/img/2018/01/23/wedge-36ab4ee5f692d79c7328db3f37274da547c3951c-s1100-c15.jpg&quot; data-original=&quot;https://media.npr.org/assets/img/2018/01/23/wedge-36ab4ee5f692d79c7328db3f37274da547c3951c-s1100.jpg&quot; class=&quot;img lazyOnLoad&quot; alt=&quot;&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;credit-caption&quot;&gt;
&lt;div class=&quot;caption-wrap&quot; readability=&quot;7&quot;&gt;
&lt;div class=&quot;caption&quot; aria-label=&quot;Image caption&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;Ice wedges form over centuries, creating polygonal patterns in the permafrost. &lt;strong class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/strong&gt; &lt;strong class=&quot;hide-caption&quot;&gt;hide caption&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;strong class=&quot;toggle-caption&quot;&gt;toggle caption&lt;/strong&gt;&lt;/div&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;enlarge_measure&quot;&gt;
&lt;div class=&quot;img_wrap&quot;&gt;&lt;img data-original=&quot;https://media.npr.org/assets/img/2018/01/23/wedge-36ab4ee5f692d79c7328db3f37274da547c3951c-s1200.jpg&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;enlarge_html&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;image_data&quot; readability=&quot;8&quot;&gt;
&lt;p class=&quot;caption&quot;&gt;Ice wedges form over centuries, creating polygonal patterns in the permafrost.&lt;/p&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Right now the permafrost carbon is inert and trapped in the frozen soil. But what happens when the soil thaws? That's the question Douglas and his colleagues are trying to figure out.&lt;/p&gt;
&lt;p&gt;A few years ago, they ran a simple experiment. They brought big drills into the tunnel and cut out chunks of ice. &quot;We collected pieces about the size of Coca-Cola cans,&quot; he says, as he points out holes in the tunnel's wall.&lt;/p&gt;
&lt;p&gt;They took the ice back to the lab and let it slowly come up to room temperature. Then they looked for signs of life. A few days later, something started growing — slowly at first, but then like gangbusters.&lt;/p&gt;
&lt;div id=&quot;res580099765&quot; class=&quot;bucketwrap image large&quot;&gt;
&lt;div class=&quot;imagewrap&quot; data-crop-type=&quot;&quot;&gt;&lt;img src=&quot;https://media.npr.org/assets/img/2018/01/23/bones-2158991f0c8d58c3072ab18f721db87717e29e8e-s1100-c15.jpg&quot; data-original=&quot;https://media.npr.org/assets/img/2018/01/23/bones-2158991f0c8d58c3072ab18f721db87717e29e8e-s1100.jpg&quot; class=&quot;img lazyOnLoad&quot; alt=&quot;&quot;/&gt;
&lt;/div&gt;
&lt;div class=&quot;credit-caption&quot;&gt;
&lt;div class=&quot;caption-wrap&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;caption&quot; aria-label=&quot;Image caption&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;The tunnel turned up a variety of ice age mammal bones — including the giant leg bone of a mammoth. &lt;strong class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/strong&gt; &lt;strong class=&quot;hide-caption&quot;&gt;hide caption&lt;/strong&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;strong class=&quot;toggle-caption&quot;&gt;toggle caption&lt;/strong&gt;&lt;/div&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;enlarge_measure&quot;&gt;
&lt;div class=&quot;img_wrap&quot;&gt;&lt;img data-original=&quot;https://media.npr.org/assets/img/2018/01/23/bones-2158991f0c8d58c3072ab18f721db87717e29e8e-s1200.jpg&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;enlarge_html&quot; readability=&quot;6.5&quot;&gt;
&lt;div class=&quot;image_data&quot; readability=&quot;8&quot;&gt;
&lt;p class=&quot;caption&quot;&gt;The tunnel turned up a variety of ice age mammal bones — including the giant leg bone of a mammoth.&lt;/p&gt;
&lt;span class=&quot;credit&quot; aria-label=&quot;Image credit&quot;&gt;Kate Ramsayer/NASA&lt;/span&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&quot;This is material that stayed frozen for 25,000 years,&quot; Douglas says. &quot;And given the right environmental conditions, it came back alive again vigorously.&quot;&lt;/p&gt;
&lt;p&gt;They were ancient bacteria. And once they warmed up, they were hungry. The bacteria started converting the carbon that's in dead plants and animals into gases that cause climate change: carbon dioxide and methane.&lt;/p&gt;
&lt;p&gt;That experiment was in the lab. But imagine these bacteria waking up, all around the Arctic, across Canada, Greenland and Russia. Last year, scientists &lt;a href=&quot;http://www.pnas.org/content/114/21/5361&quot;&gt;started&lt;/a&gt; seeing signs of this happening in northern Alaska.&lt;/p&gt;
&lt;p&gt;&quot;We have evidence that Alaska has changed from being a net absorber of carbon dioxide out of the atmosphere to a net exporter of the gas back to the atmosphere,&quot; says Charles Miller, a chemist at NASA's Jet Propulsion Laboratory who measures gas emissions from Arctic permafrost.&lt;/p&gt;
&lt;p&gt;Scientists don't know yet how much carbon will get released from thawing permafrost or how fast it will happen. Some of the carbon — maybe a big percentage of it — will get washed into the ocean by erosion. Some of the carbon will also get sucked back into the ground by new trees and plants popping up across the warming tundra.&lt;/p&gt;
&lt;p&gt;But once carbon begins to percolate up through the thawing soil, it could form a feedback loop &quot;over which we would have zero control,&quot; Miller says. The gas, coming from the ground, warms the Earth, which in turn causes more gas to be released and more warming to occur.&lt;/p&gt;
&lt;p&gt;Thawing permafrost is a big wild card of climate change.&lt;/p&gt;
</description>
<pubDate>Wed, 24 Jan 2018 20:59:34 +0000</pubDate>
<dc:creator>marchenko</dc:creator>
<og:title>Is There A Ticking Time Bomb Under The Arctic?</og:title>
<og:url>https://www.npr.org/sections/goatsandsoda/2018/01/24/575220206/is-there-a-ticking-time-bomb-under-the-arctic</og:url>
<og:type>article</og:type>
<og:description>Just what exactly is permafrost? And what is happening now that it's warming up? To find out, we enter the Arctic Circle's secret world of ice and frozen history.</og:description>
<og:image>https://media.npr.org/assets/img/2018/01/23/permafrost_wide-55001b7cd09c0567b7d8feeb389af4fa3bda2da7.jpg?s=1400</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.npr.org/sections/goatsandsoda/2018/01/24/575220206/is-there-a-ticking-time-bomb-under-the-arctic</dc:identifier>
</item>
<item>
<title>Curry spice turmeric boosts memory by nearly 30%, eases depression, study finds</title>
<link>https://ac.els-cdn.com/S1064748117305110/1-s2.0-S1064748117305110-main.pdf?_tid=55b0e2e0-013c-11e8-b35b-00000aab0f01&amp;acdnat=1516822117_7ded3d2cd7f5c27fedf6a8992e549857</link>
<guid isPermaLink="true" >https://ac.els-cdn.com/S1064748117305110/1-s2.0-S1064748117305110-main.pdf?_tid=55b0e2e0-013c-11e8-b35b-00000aab0f01&amp;acdnat=1516822117_7ded3d2cd7f5c27fedf6a8992e549857</guid>
<description>&lt;article class=&quot;cl-m-3-3 cl-t-6-9 cl-l-6-12 pad-left pad-right&quot; role=&quot;main&quot; lang=&quot;en&quot; readability=&quot;9.1636844758065&quot;&gt;&lt;noscript readability=&quot;3&quot;&gt;
&lt;p&gt;JavaScript is disabled on your browser. Please enable JavaScript to use all the features on this page.&lt;/p&gt;
&lt;/noscript&gt;
&lt;div class=&quot;Publication&quot; readability=&quot;1.4890510948905&quot;&gt;
&lt;div class=&quot;publication-brand&quot;&gt;&lt;a href=&quot;https://www.sciencedirect.com/science/journal/10647481&quot;&gt;&lt;img class=&quot;publication-brand-image hide-m&quot; src=&quot;https://sdfestaticassets-us-west-2.sciencedirectassets.com/prod/cd3cfc3b8013cf9e3b615987c46d004e12cb8ba3/image/elsevier-non-solus.png&quot; alt=&quot;Elsevier&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;publication-volume&quot; readability=&quot;1.7372262773723&quot;&gt;

&lt;p&gt;&lt;span class=&quot;size-m&quot;&gt;Available online 27 October 2017&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;div class=&quot;publication-cover&quot;&gt;&lt;a href=&quot;https://www.sciencedirect.com/science/journal/10647481&quot;&gt;&lt;img class=&quot;publication-cover-image hide-m&quot; src=&quot;https://ars.els-cdn.com/content/image/S10647481.gif&quot; alt=&quot;The American Journal of Geriatric Psychiatry&quot;/&gt;&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;



&lt;div class=&quot;LicenseInfo&quot;&gt;

&lt;p&gt;open access&lt;/p&gt;
&lt;/div&gt;
&lt;section class=&quot;ReferencedArticles&quot;/&gt;&lt;section class=&quot;ReferencedArticles&quot;/&gt;
&lt;div class=&quot;Abstracts&quot;&gt;
&lt;div class=&quot;abstract author-highlights&quot; id=&quot;ab0010&quot; lang=&quot;en&quot;&gt;
&lt;h2 class=&quot;section-title&quot;&gt;Highlights&lt;/h2&gt;
&lt;div id=&quot;abs0010&quot;&gt;

&lt;dl class=&quot;list&quot; readability=&quot;3.5&quot;&gt;&lt;dt class=&quot;list-label&quot;&gt;•&lt;/dt&gt;
&lt;dd class=&quot;list-description&quot; readability=&quot;1&quot;&gt;
&lt;p id=&quot;p0010&quot;&gt;This is the first long-term (18 months) double-blind, placebo controlled trial of a bioavailable form of curcumin (Theracurmin® containing 90 mg of curcumin twice daily) in non-demented adults.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt class=&quot;list-label&quot;&gt;•&lt;/dt&gt;
&lt;dd class=&quot;list-description&quot; readability=&quot;-1&quot;&gt;
&lt;p id=&quot;p0015&quot;&gt;We found that daily oral Theracurmin led to significant memory and attention benefits.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt class=&quot;list-label&quot;&gt;•&lt;/dt&gt;
&lt;dd class=&quot;list-description&quot; readability=&quot;1&quot;&gt;
&lt;p id=&quot;p0020&quot;&gt;FDDNP-PET scans performed pre- and post-treatment suggested that behavioral and cognitive benefits are associated with decreases in plaque and tangle accumulation in brain regions modulating mood and memory.&lt;/p&gt;
&lt;/dd&gt;
&lt;dt class=&quot;list-label&quot;&gt;•&lt;/dt&gt;
&lt;dd class=&quot;list-description&quot; readability=&quot;0&quot;&gt;
&lt;p id=&quot;p8015&quot;&gt;Curcumin's cognitive benefits may stem from its anti-inflammatory and/or anti-amyloid brain effects.&lt;/p&gt;
&lt;/dd&gt;
&lt;/dl&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;abstract author&quot; id=&quot;ab0015&quot; lang=&quot;en&quot; readability=&quot;29&quot;&gt;
&lt;div id=&quot;abs0015&quot; readability=&quot;11&quot;&gt;
&lt;h3 id=&quot;st0015&quot;&gt;Objective&lt;/h3&gt;
&lt;p id=&quot;sp0015&quot;&gt;Because curcumin's anti-inflammatory properties may protect the brain from neurodegeneration, we studied its effect on memory in non-demented adults and explored its impact on brain amyloid and tau accumulation using 2-(1-{6-[(2-[F-18]fluoroethyl)(methyl)amino]-2-naphthyl}ethylidene)malononitrile positron emission tomography (FDDNP-PET).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&quot;abs0020&quot; readability=&quot;19&quot;&gt;
&lt;h3 id=&quot;st0020&quot;&gt;Methods&lt;/h3&gt;
&lt;p id=&quot;sp0020&quot;&gt;Forty subjects (age 51–84 years) were randomized to a bioavailable form of curcumin (Theracurmin® containing 90 mg of curcumin twice daily [N = 21]) or placebo (N = 19) for 18 months. Primary outcomes were verbal (Buschke Selective Reminding Test [SRT]) and visual (Brief Visual Memory Test-Revised [BVMT-R]) memory, and attention (Trail Making A) was a secondary outcome. FDDNP-PET signals (15 curcumin, 15 placebo) were determined in amygdala, hypothalamus, medial and lateral temporal, posterior cingulate, parietal, frontal, and motor (reference) regions. Mixed effects general linear models controlling for age and education, and effect sizes (ES; Cohen's d) were estimated.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&quot;abs0025&quot; readability=&quot;29&quot;&gt;
&lt;h3 id=&quot;st0025&quot;&gt;Results&lt;/h3&gt;
&lt;p id=&quot;sp0025&quot;&gt;SRT Consistent Long-Term Retrieval improved with curcumin (ES = 0.63, p = 0.002) but not with placebo (ES = 0.06, p = 0.8; between-group: ES = 0.68, p = 0.05). Curcumin also improved SRT Total (ES = 0.53, p = 0.002), visual memory (BVMT-R Recall: ES = 0.50, p = 0.01; BVMT-R Delay: ES = 0.51, p = 0.006), and attention (ES = 0.96, p &amp;lt; 0.0001) compared with placebo (ES = 0.28, p = 0.1; between-group: ES = 0.67, p = 0.04). FDDNP binding decreased significantly in the amygdala with curcumin (ES = −0.41, p = 0.04) compared with placebo (ES = 0.08, p = 0.6; between-group: ES = 0.48, p = 0.07). In the hypothalamus, FDDNP binding did not change with curcumin (ES = −0.30, p = 0.2), but increased with placebo (ES = 0.26, p = 0.05; between-group: ES = 0.55, p = 0.02).&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&quot;abs0030&quot; readability=&quot;9&quot;&gt;
&lt;h3 id=&quot;st0030&quot;&gt;Conclusions&lt;/h3&gt;
&lt;p id=&quot;sp0030&quot;&gt;Daily oral Theracurmin may lead to improved memory and attention in non-demented adults. The FDDNP-PET findings suggest that symptom benefits are associated with decreases in amyloid and tau accumulation in brain regions modulating mood and memory.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class=&quot;Keywords&quot; readability=&quot;6&quot;&gt;
&lt;div id=&quot;kwd0010&quot; class=&quot;keywords-section&quot; readability=&quot;7&quot;&gt;
&lt;h2 class=&quot;section-title&quot;&gt;Key Words&lt;/h2&gt;
&lt;p&gt;&lt;span id=&quot;te0015&quot;&gt;Bioavailable curcumin&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;te0020&quot;&gt;normal aging&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;te0025&quot;&gt;memory&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;te0030&quot;&gt;cognition&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span id=&quot;te0035&quot;&gt;positron emission tomography&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;button class=&quot;button button-anchor&quot; disabled=&quot;disabled&quot; type=&quot;button&quot;&gt;&lt;span class=&quot;button-text&quot;&gt;Recommended articles&lt;/span&gt;&lt;/button&gt;&lt;button class=&quot;button button-anchor&quot; disabled=&quot;disabled&quot; type=&quot;button&quot;&gt;&lt;span class=&quot;button-text&quot;&gt;Citing articles (0)&lt;/span&gt;&lt;/button&gt;&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;copyright-line&quot;&gt;© 2017 The Authors. Published by Elsevier Inc. on behalf of American Association for Geriatric Psychiatry.&lt;/span&gt;&lt;/p&gt;
&lt;/article&gt;&lt;div class=&quot;hide-m hide-t-s cl-t-3-9 cl-l-3-12 pad-right&quot;&gt;
&lt;aside class=&quot;RelatedContent&quot; aria-label=&quot;Related content&quot;&gt;&lt;section class=&quot;SidePanel&quot;&gt;&lt;header class=&quot;side-panel-header&quot; id=&quot;recommended-articles-header&quot;&gt;&lt;h2 class=&quot;section-title&quot;&gt;Recommended articles&lt;/h2&gt;
&lt;/header&gt;
&lt;/section&gt;&lt;section class=&quot;SidePanel&quot;&gt;&lt;header class=&quot;side-panel-header&quot; id=&quot;citing-articles-header&quot;&gt;&lt;h2 class=&quot;section-title&quot;&gt;Citing articles&lt;/h2&gt;
&lt;/header&gt;

&lt;/section&gt;&lt;section class=&quot;SidePanel hidden&quot;&gt;

&lt;/section&gt;&lt;/aside&gt;&lt;/div&gt;
</description>
<pubDate>Wed, 24 Jan 2018 19:27:01 +0000</pubDate>
<dc:creator>bcaulfield</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.sciencedirect.com/science/article/pii/S1064748117305110</dc:identifier>
</item>
<item>
<title>Apple, in Sign of Health Ambitions, Adds Medical Records Feature for iPhone</title>
<link>https://www.nytimes.com/2018/01/24/technology/Apple-iPhone-medical-records.html</link>
<guid isPermaLink="true" >https://www.nytimes.com/2018/01/24/technology/Apple-iPhone-medical-records.html</guid>
<description>&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;299&quot; data-total-count=&quot;1901&quot; id=&quot;story-continues-3&quot;&gt;Apple, more than the others, has been reticent to publicize its long-term vision for health technology. But recent product introductions, like the new health records feature, highlight how focused Apple is on using its iPhone, Apple Watch and apps to give people more control over their health care.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;457&quot; data-total-count=&quot;2358&quot;&gt;In addition to the iPhone Health app, Apple has developed ResearchKit, software to help researchers develop iPhone apps to conduct health studies, and HealthKit, a platform that allows consumers to share health data on their iPhone or Apple Watch with health and fitness apps. Apple is also sponsoring clinical research, called the &lt;a href=&quot;https://clinicaltrials.gov/ct2/show/NCT03335800?term=apple+heart&amp;amp;rank=1&quot; title=&quot;Information about the study&quot;&gt;Apple Heart Study&lt;/a&gt;, at Stanford University to determine whether an app for the Apple Watch can detect irregular heart rhythms.&lt;/p&gt;
&lt;span class=&quot;visually-hidden&quot;&gt;Photo&lt;/span&gt;
&lt;div class=&quot;image&quot;&gt;&lt;img src=&quot;https://static01.nyt.com/images/2018/01/24/business/24applehealth-2/24applehealth-2-blog427.jpg&quot; alt=&quot;&quot; class=&quot;media-viewer-candidate&quot; data-mediaviewer-src=&quot;https://static01.nyt.com/images/2018/01/24/business/24applehealth-2/24applehealth-2-superJumbo.jpg&quot; data-mediaviewer-caption=&quot;Part of the Apple Health app, the new health records feature can transfer medical data like immunization records and prescriptions.&quot; data-mediaviewer-credit=&quot;Apple&quot; itemprop=&quot;url&quot; itemid=&quot;https://static01.nyt.com/images/2018/01/24/business/24applehealth-2/24applehealth-2-blog427.jpg&quot;/&gt;&lt;/div&gt;
&lt;span class=&quot;caption-text&quot;&gt;Part of the Apple Health app, the new health records feature can transfer medical data like immunization records and prescriptions.&lt;/span&gt; &lt;span class=&quot;credit&quot; itemprop=&quot;copyrightHolder&quot;&gt;&lt;span class=&quot;visually-hidden&quot;&gt;Credit&lt;/span&gt; Apple&lt;/span&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;124&quot; data-total-count=&quot;2482&quot;&gt;A review of Apple’s current job openings also gives clues about the company’s wider ambitions in the health care sector.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;547&quot; data-total-count=&quot;3029&quot;&gt;According to the company’s site, Apple is seeking a hardware engineer to develop “next-generation” health sensors for products like the iPhone and iPad; software engineers for the company’s “health special projects team” to join “an exciting new project at an early stage”; an engineering manager for the company’s motion technologies team “to help shape the next set of groundbreaking features” in fitness and health; and a biomedical scientist to help design studies for health, wellness and physiological measurement apps.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;255&quot; data-total-count=&quot;3284&quot;&gt;“We will empower you to engage with a variety of internal teams and external partners to continually question the limitations of technology implemented in health products,” says an Apple job description for a health tech hardware development engineer.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;268&quot; data-total-count=&quot;3552&quot;&gt;Apple’s personal medical record feature is hardly a new idea. With much fanfare about a decade ago, both Google and Microsoft introduced free services — called &lt;a href=&quot;http://www.nytimes.com/2008/05/20/technology/20google.html&quot; title=&quot;Times story on the topic.&quot;&gt;Google Health&lt;/a&gt; and &lt;a href=&quot;http://www.nytimes.com/2007/10/05/technology/05soft.html&quot; title=&quot;Times' story on the topic.&quot;&gt;Microsoft HealthVault&lt;/a&gt; — that helped consumers centralize their personal health data.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;249&quot; data-total-count=&quot;3801&quot;&gt;But the concept of the personal medical record did not generate widespread adoption in that era, which predated the popularization of the iPhone and mobile apps. Google &lt;a href=&quot;http://www.nytimes.com/2011/06/25/technology/25health.html&quot; title=&quot;Times' story on the topic.&quot;&gt;shut down Google Health&lt;/a&gt; in 2011. Microsoft still offers its &lt;a href=&quot;https://www.healthvault.com/en-us/healthvault-for-consumers/&quot; title=&quot;The Microsoft service&quot;&gt;HealthVault service&lt;/a&gt;.&lt;/p&gt;
&lt;div id=&quot;addenda&quot; class=&quot;addenda&quot; readability=&quot;8&quot;&gt;
&lt;div class=&quot;story-addendum story-content theme-correction&quot; readability=&quot;36&quot;&gt;&lt;strong&gt;Correction: January 24, 2018&lt;/strong&gt;&lt;p&gt;An earlier version of this article misstated when Apple plans to allow consumers to try testing the new Health app feature that allows users to automatically download and see parts of their medical records on their iPhones. Consumers will be allowed to test a beta version of the feature on Thursday, not Friday.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;a class=&quot;visually-hidden skip-to-text-link&quot; href=&quot;https://www.nytimes.com/2018/01/24/technology/Apple-iPhone-medical-records.html#whats-next&quot;&gt;Continue reading the main story&lt;/a&gt;</description>
<pubDate>Wed, 24 Jan 2018 17:25:44 +0000</pubDate>
<dc:creator>alwillis</dc:creator>
<og:url>https://www.nytimes.com/2018/01/24/technology/Apple-iPhone-medical-records.html</og:url>
<og:type>article</og:type>
<og:title>Apple, in Sign of Health Ambitions, Adds Medical Records Feature for iPhone</og:title>
<og:description>A new feature on the iPhone Health app will allow users to automatically download blood test results and other data from their health care providers.</og:description>
<og:image>https://static01.nyt.com/images/2018/01/24/business/24applehealth-1/24applehealth-1-facebookJumbo.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/2018/01/24/technology/Apple-iPhone-medical-records.html</dc:identifier>
</item>
<item>
<title>How to solve most NLP problems: a step-by-step guide</title>
<link>https://blog.insightdatascience.com/how-to-solve-90-of-nlp-problems-a-step-by-step-guide-fda605278e4e</link>
<guid isPermaLink="true" >https://blog.insightdatascience.com/how-to-solve-90-of-nlp-problems-a-step-by-step-guide-fda605278e4e</guid>
<description>&lt;p name=&quot;e097&quot; id=&quot;e097&quot; class=&quot;graf graf--p graf--leading&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;&lt;em class=&quot;markup--em markup--p-em&quot;&gt;This post is accompanied by&lt;/em&gt;&lt;/strong&gt; &lt;a href=&quot;https://github.com/hundredblocks/concrete_NLP_tutorial/blob/master/NLP_notebook.ipynb&quot; data-href=&quot;https://github.com/hundredblocks/concrete_NLP_tutorial/blob/master/NLP_notebook.ipynb&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;&lt;em class=&quot;markup--em markup--p-em&quot;&gt;an interactive notebook&lt;/em&gt;&lt;/strong&gt;&lt;/a&gt; &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;&lt;em class=&quot;markup--em markup--p-em&quot;&gt;demonstrating and applying all these techniques. Feel free to run the code and follow along!&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h3 name=&quot;3693&quot; id=&quot;3693&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;Step 1: Gather your data&lt;/h3&gt;
&lt;h4 name=&quot;faf5&quot; id=&quot;faf5&quot; class=&quot;graf graf--h4 graf-after--h3&quot;&gt;Example data sources&lt;/h4&gt;
&lt;p name=&quot;f3e1&quot; id=&quot;f3e1&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;Every Machine Learning problem starts with data, such as a list of emails, posts, or tweets. Common sources of textual information include:&lt;/p&gt;
&lt;ul class=&quot;postList&quot;&gt;&lt;li name=&quot;8e91&quot; id=&quot;8e91&quot; class=&quot;graf graf--li graf-after--p&quot;&gt;Product reviews (on Amazon, Yelp, and various App Stores)&lt;/li&gt;
&lt;li name=&quot;cadd&quot; id=&quot;cadd&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;User-generated content (Tweets, Facebook posts, StackOverflow questions)&lt;/li&gt;
&lt;li name=&quot;e017&quot; id=&quot;e017&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Troubleshooting (customer requests, support tickets, chat logs)&lt;/li&gt;
&lt;/ul&gt;&lt;p name=&quot;bb40&quot; id=&quot;bb40&quot; class=&quot;graf graf--p graf--startsWithDoubleQuote graf-after--li&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;“Disasters on Social Media” dataset&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;851c&quot; id=&quot;851c&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;For this post, we will use a dataset generously provided by &lt;a href=&quot;https://www.crowdflower.com/data-for-everyone/&quot; data-href=&quot;https://www.crowdflower.com/data-for-everyone/&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;CrowdFlower&lt;/a&gt;, called “Disasters on Social Media”, where:&lt;/p&gt;
&lt;blockquote name=&quot;eca3&quot; id=&quot;eca3&quot; class=&quot;graf graf--blockquote graf-after--p&quot; readability=&quot;11&quot;&gt;
&lt;p&gt;Contributors looked at over 10,000 tweets culled with a variety of searches like “ablaze”, “quarantine”, and “pandemonium”, then noted whether the tweet referred to a disaster event (as opposed to a joke with the word or a movie review or something non-disastrous).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p name=&quot;82a2&quot; id=&quot;82a2&quot; class=&quot;graf graf--p graf-after--blockquote&quot;&gt;Our task will be to detect which tweets are about a &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;disastrous event&lt;/strong&gt; as opposed to an &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;irrelevant topic&lt;/strong&gt; such as a movie. Why? A potential application would be to exclusively notify law enforcement officials about urgent emergencies while ignoring reviews of the most recent Adam Sandler film. A particular challenge with this task is that both classes contain the same search terms used to find the tweets, so we will have to use subtler differences to distinguish between them.&lt;/p&gt;
&lt;p name=&quot;d7ec&quot; id=&quot;d7ec&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;In the rest of this post, we will refer to tweets that are about disasters as “&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;disaster&lt;/strong&gt;”, and tweets about anything else as “&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;irrelevant&lt;/strong&gt;”.&lt;/p&gt;
&lt;h4 name=&quot;7fb7&quot; id=&quot;7fb7&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;Labels&lt;/h4&gt;
&lt;p name=&quot;e2d8&quot; id=&quot;e2d8&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;We have labeled data and so we know which tweets belong to which categories. As Richard Socher outlines below, it is usually faster, simpler, and cheaper to &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;find and label enough data&lt;/strong&gt; to train a model on, rather than trying to optimize a complex unsupervised method.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*CdnxyA_fMXxEcEQ1kUTFRg.png&quot; data-width=&quot;1232&quot; data-height=&quot;634&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*CdnxyA_fMXxEcEQ1kUTFRg.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*CdnxyA_fMXxEcEQ1kUTFRg.png&quot;/&gt;&lt;/div&gt;
Richard Socher’s pro-tip
&lt;h3 name=&quot;2a98&quot; id=&quot;2a98&quot; class=&quot;graf graf--h3 graf-after--figure&quot;&gt;Step 2: Clean your data&lt;/h3&gt;
&lt;blockquote name=&quot;4a39&quot; id=&quot;4a39&quot; class=&quot;graf graf--blockquote graf-after--h3&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;The number one rule we follow is: “Your model will only ever be as good as your data.”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p name=&quot;05a8&quot; id=&quot;05a8&quot; class=&quot;graf graf--p graf-after--blockquote&quot;&gt;One of the key skills of a data scientist is knowing whether the next step should be working on the model or the data. A good rule of thumb is to look at the data first and then clean it up. &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;A clean dataset will allow a model to learn meaningful features and not overfit on irrelevant noise.&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;ed00&quot; id=&quot;ed00&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Here is a checklist to use to clean your data: (see the &lt;a href=&quot;https://github.com/hundredblocks/concrete_NLP_tutorial/blob/master/NLP_notebook.ipynb&quot; data-href=&quot;https://github.com/hundredblocks/concrete_NLP_tutorial/blob/master/NLP_notebook.ipynb&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;code&lt;/a&gt; for more details):&lt;/p&gt;
&lt;ol class=&quot;postList&quot;&gt;&lt;li name=&quot;4f9b&quot; id=&quot;4f9b&quot; class=&quot;graf graf--li graf-after--p&quot;&gt;Remove all irrelevant characters such as any non alphanumeric characters&lt;/li&gt;
&lt;li name=&quot;9b14&quot; id=&quot;9b14&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;&lt;a href=&quot;https://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html&quot; data-href=&quot;https://nlp.stanford.edu/IR-book/html/htmledition/tokenization-1.html&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Tokenize&lt;/a&gt; your text by separating it into individual words&lt;/li&gt;
&lt;li name=&quot;e441&quot; id=&quot;e441&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Remove words that are not relevant, such as “@” twitter mentions or urls&lt;/li&gt;
&lt;li name=&quot;3b94&quot; id=&quot;3b94&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Convert all characters to lowercase, in order to treat words such as “hello”, “Hello”, and “HELLO” the same&lt;/li&gt;
&lt;li name=&quot;61d0&quot; id=&quot;61d0&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Consider combining misspelled or alternately spelled words to a single representation (e.g. “cool”/”kewl”/”cooool”)&lt;/li&gt;
&lt;li name=&quot;5ebc&quot; id=&quot;5ebc&quot; class=&quot;graf graf--li graf-after--li&quot;&gt;Consider &lt;a href=&quot;https://nlp.stanford.edu/IR-book/html/htmledition/stemming-and-lemmatization-1.html&quot; data-href=&quot;https://nlp.stanford.edu/IR-book/html/htmledition/stemming-and-lemmatization-1.html&quot; class=&quot;markup--anchor markup--li-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;lemmatization&lt;/a&gt; (reduce words such as “am”, “are”, and “is” to a common form such as “be”)&lt;/li&gt;
&lt;/ol&gt;&lt;p name=&quot;6c30&quot; id=&quot;6c30&quot; class=&quot;graf graf--p graf-after--li&quot;&gt;After following these steps and checking for additional errors, we can start using the clean, labelled data to train models!&lt;/p&gt;
&lt;h3 name=&quot;4808&quot; id=&quot;4808&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;Step 3: Find a good data representation&lt;/h3&gt;
&lt;p name=&quot;bf8a&quot; id=&quot;bf8a&quot; class=&quot;graf graf--p graf-after--h3&quot;&gt;Machine Learning models take numerical values as input. Models working on images, for example, take in a matrix representing the intensity of each pixel in each color channel.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*6pW5mPAxYhYBZxkc-hKf0A.png&quot; data-width=&quot;1050&quot; data-height=&quot;410&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*6pW5mPAxYhYBZxkc-hKf0A.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*6pW5mPAxYhYBZxkc-hKf0A.png&quot;/&gt;&lt;/div&gt;
A smiling face represented as a matrix of numbers.
&lt;p name=&quot;a538&quot; id=&quot;a538&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Our dataset is a list of sentences, so in order for our algorithm to extract patterns from the data, we first need to find a way to represent it in a way that our algorithm can understand, i.e. as a list of numbers.&lt;/p&gt;
&lt;h4 name=&quot;8d9f&quot; id=&quot;8d9f&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;One-hot encoding (Bag of Words)&lt;/h4&gt;
&lt;p name=&quot;09e0&quot; id=&quot;09e0&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;A natural way to represent text for computers is to encode each character individually as a number (&lt;a href=&quot;https://en.wikipedia.org/wiki/ASCII&quot; data-href=&quot;https://en.wikipedia.org/wiki/ASCII&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;ASCII&lt;/a&gt; for example). If we were to feed this simple representation into a classifier, it would have to learn the structure of words from scratch based only on our data, which is impossible for most datasets. We need to use a higher level approach.&lt;/p&gt;
&lt;p name=&quot;4c10&quot; id=&quot;4c10&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;For example, we can build a &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;vocabulary&lt;/strong&gt; of all the unique words in our dataset, and associate a unique index to each word in the vocabulary. Each sentence is then represented as a list that is as long as the number of distinct words in our vocabulary. At each index in this list, we mark how many times the given word appears in our sentence. This is called a &lt;a href=&quot;https://en.wikipedia.org/wiki/Bag-of-words_model&quot; data-href=&quot;https://en.wikipedia.org/wiki/Bag-of-words_model&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;Bag of Words&lt;/strong&gt;&lt;/a&gt; &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;model&lt;/strong&gt;, since it is a representation that completely ignores the order of words in our sentence. This is illustrated below.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*oQ3suk0Ayc8z8i1QIl5Big.png&quot; data-width=&quot;2356&quot; data-height=&quot;566&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*oQ3suk0Ayc8z8i1QIl5Big.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*oQ3suk0Ayc8z8i1QIl5Big.png&quot;/&gt;&lt;/div&gt;
Representing sentences as a Bag of Words. Sentences on the left, representation on the right. Each index in the vectors represent one particular word.
&lt;h4 name=&quot;ae55&quot; id=&quot;ae55&quot; class=&quot;graf graf--h4 graf-after--figure&quot;&gt;Visualizing the embeddings&lt;/h4&gt;
&lt;p name=&quot;2ec8&quot; id=&quot;2ec8&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;We have around 20,000 words in our vocabulary in the “Disasters of Social Media” example, which means that every sentence will be represented as a vector of length 20,000. The vector will contain &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;mostly 0s&lt;/strong&gt; because each sentence contains only a very small subset of our vocabulary.&lt;/p&gt;
&lt;p name=&quot;6551&quot; id=&quot;6551&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;In order to see whether our embeddings are capturing information that is &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;relevant to our problem&lt;/strong&gt; (i.e. whether the tweets are about disasters or not), it is a good idea to visualize them and see if the classes look well separated. Since vocabularies are usually very large and visualizing data in 20,000 dimensions is impossible, techniques like &lt;a href=&quot;https://en.wikipedia.org/wiki/Principal_component_analysis&quot; data-href=&quot;https://en.wikipedia.org/wiki/Principal_component_analysis&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;PCA&lt;/a&gt; will help project the data down to two dimensions. This is plotted below.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*ikis3EFujlrmVk_JEQMvzQ.png&quot; data-width=&quot;1686&quot; data-height=&quot;1618&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*ikis3EFujlrmVk_JEQMvzQ.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*ikis3EFujlrmVk_JEQMvzQ.png&quot;/&gt;&lt;/div&gt;
Visualizing Bag of Words embeddings.
&lt;p name=&quot;72b1&quot; id=&quot;72b1&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;The two classes do not look very well separated, which could be a feature of our embeddings or simply of our dimensionality reduction. In order to see whether the Bag of Words features are of any use, we can train a classifier based on them.&lt;/p&gt;
&lt;h3 name=&quot;671a&quot; id=&quot;671a&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;Step 4: Classification&lt;/h3&gt;
&lt;p name=&quot;92e2&quot; id=&quot;92e2&quot; class=&quot;graf graf--p graf-after--h3&quot;&gt;When first approaching a problem, a general best practice is to start with the simplest tool that could solve the job. Whenever it comes to classifying data, a common favorite for its versatility and explainability is &lt;a href=&quot;https://en.wikipedia.org/wiki/Logistic_regression&quot; data-href=&quot;https://en.wikipedia.org/wiki/Logistic_regression&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Logistic Regression&lt;/a&gt;. It is very simple to train and the results are interpretable as you can easily extract the most important coefficients from the model.&lt;/p&gt;
&lt;p name=&quot;0386&quot; id=&quot;0386&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;We split our data in to a training set used to fit our model and a test set to see how well it generalizes to unseen data. After training, we get an &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;accuracy of 75.4%.&lt;/strong&gt; Not too shabby! Guessing the most frequent class (“irrelevant”) would give us only 57%. However, even if 75% precision was good enough for our needs, &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;we should never ship a model without trying to understand it.&lt;/strong&gt;&lt;/p&gt;
&lt;h3 name=&quot;2dc1&quot; id=&quot;2dc1&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;Step 5: Inspection&lt;/h3&gt;
&lt;h4 name=&quot;5405&quot; id=&quot;5405&quot; class=&quot;graf graf--h4 graf-after--h3&quot;&gt;Confusion Matrix&lt;/h4&gt;
&lt;p name=&quot;8cef&quot; id=&quot;8cef&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;A first step is to understand the types of errors our model makes, and which kind of errors are least desirable. In our example, &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;false positives&lt;/strong&gt; are classifying an irrelevant tweet as a disaster, and &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;false negatives&lt;/strong&gt; are classifying a disaster as an irrelevant tweet. If the priority is to react to every potential event, we would want to lower our false negatives. If we are constrained in resources however, we might prioritize a lower false positive rate to reduce false alarms. A good way to visualize this information is using a &lt;a href=&quot;https://en.wikipedia.org/wiki/Confusion_matrix&quot; data-href=&quot;https://en.wikipedia.org/wiki/Confusion_matrix&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Confusion Matrix&lt;/a&gt;, which compares the predictions our model makes with the true label. Ideally, the matrix would be a diagonal line from top left to bottom right (our predictions match the truth perfectly).&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*DicbwUOoqFezDWROfsZ-CQ.png&quot; data-width=&quot;1388&quot; data-height=&quot;1288&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*DicbwUOoqFezDWROfsZ-CQ.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*DicbwUOoqFezDWROfsZ-CQ.png&quot;/&gt;&lt;/div&gt;
Confusion Matrix (Green is a high proportion, blue is low)
&lt;p name=&quot;e3f3&quot; id=&quot;e3f3&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Our classifier creates more false negatives than false positives (proportionally). In other words, our model’s most common error is inaccurately classifying disasters as irrelevant. If false positives represent a high cost for law enforcement, this could be a good bias for our classifier to have.&lt;/p&gt;
&lt;h4 name=&quot;23d1&quot; id=&quot;23d1&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;Explaining and interpreting our model&lt;/h4&gt;
&lt;p name=&quot;be7c&quot; id=&quot;be7c&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;To validate our model and interpret its predictions, it is important to look at which words it is using to make decisions. If our data is biased, our classifier will make make accurate predictions in the sample data, but the model would not generalize well in the real world. Here we plot the &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;most important words&lt;/strong&gt; for both the disaster and irrelevant class. Plotting word importance is simple with Bag of Words and Logistic Regression, since we can just extract and rank the coefficients that the model used for its predictions.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*UicK4XWFmF8mh0LL_fUJcA.png&quot; data-width=&quot;1136&quot; data-height=&quot;1140&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*UicK4XWFmF8mh0LL_fUJcA.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*UicK4XWFmF8mh0LL_fUJcA.png&quot;/&gt;&lt;/div&gt;
Bag of Words: Word importance
&lt;p name=&quot;dc4f&quot; id=&quot;dc4f&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Our classifier correctly picks up on some patterns (hiroshima, massacre), but clearly seems to be overfitting on some meaningless terms (heyoo, x1392). Right now, our Bag of Words model is dealing with a huge vocabulary of different words and &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;treating all words equally&lt;/strong&gt;. However, some of these words are very frequent, and are only contributing noise to our predictions. Next, we will try a way to represent sentences that can account for the frequency of words, to see if we can pick up more signal from our data.&lt;/p&gt;
&lt;h3 name=&quot;425f&quot; id=&quot;425f&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;Step 6: Accounting for vocabulary structure&lt;/h3&gt;
&lt;h4 name=&quot;0c9f&quot; id=&quot;0c9f&quot; class=&quot;graf graf--h4 graf-after--h3&quot;&gt;TF-IDF&lt;/h4&gt;
&lt;p name=&quot;952b&quot; id=&quot;952b&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;In order to help our model focus more on meaningful words, we can use a &lt;a href=&quot;https://en.wikipedia.org/wiki/Tf%E2%80%93idf&quot; data-href=&quot;https://en.wikipedia.org/wiki/Tf%E2%80%93idf&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;TF-IDF score&lt;/a&gt; (Term Frequency, Inverse Document Frequency) on top of our Bag of Words model. TF-IDF weighs words by how rare they are in our dataset, discounting words that are too frequent and just add to the noise. Here is the PCA projection of our new embeddings.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*wjD8-Cq009lMkRvfcVaW0w.png&quot; data-width=&quot;1698&quot; data-height=&quot;1630&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*wjD8-Cq009lMkRvfcVaW0w.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*wjD8-Cq009lMkRvfcVaW0w.png&quot;/&gt;&lt;/div&gt;
Visualizing TF-IDF embeddings.
&lt;p name=&quot;4dd4&quot; id=&quot;4dd4&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;We can see above that there is a clearer distinction between the two colors. This should make it easier for our classifier to separate both groups. Let’s see if this leads to better performance. Training another Logistic Regression on our new embeddings, we get &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;an accuracy of 76.2%.&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;c970&quot; id=&quot;c970&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;A very slight improvement. Has our model has started picking up on more important words? If we are getting a better result while preventing our model from “cheating” then we can truly consider this model an upgrade.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*bdCuSrONh3dI6r8Xmzurcg.png&quot; data-width=&quot;1130&quot; data-height=&quot;1102&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*bdCuSrONh3dI6r8Xmzurcg.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*bdCuSrONh3dI6r8Xmzurcg.png&quot;/&gt;&lt;/div&gt;
TF-IDF: Word importance
&lt;p name=&quot;dea5&quot; id=&quot;dea5&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;The words it picked up look much more relevant! Although our metrics on our test set only increased slightly, we have much more confidence in the terms our model is using, and thus would feel more comfortable deploying it in a system that would interact with customers.&lt;/p&gt;
&lt;h3 name=&quot;ca70&quot; id=&quot;ca70&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;Step 7: Leveraging semantics&lt;/h3&gt;
&lt;h4 name=&quot;f445&quot; id=&quot;f445&quot; class=&quot;graf graf--h4 graf-after--h3&quot;&gt;Word2Vec&lt;/h4&gt;
&lt;p name=&quot;599f&quot; id=&quot;599f&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;Our latest model managed to pick up on high signal words. However, it is very likely that if we deploy this model, we will encounter words that we have not seen in our training set before. The previous model will not be able to accurately classify these tweets, &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;even if it has seen very similar words during training&lt;/strong&gt;.&lt;/p&gt;
&lt;p name=&quot;b23e&quot; id=&quot;b23e&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;To solve this problem, we need to capture the &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;semantic meaning of words&lt;/strong&gt;, meaning we need to understand that words like ‘good’ and ‘positive’ are closer than ‘apricot’ and ‘continent.’ The tool we will use to help us capture meaning is called Word2Vec.&lt;/p&gt;
&lt;p name=&quot;0171&quot; id=&quot;0171&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;Using pre-trained words&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;5180&quot; id=&quot;5180&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;a href=&quot;https://arxiv.org/abs/1301.3781&quot; data-href=&quot;https://arxiv.org/abs/1301.3781&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;Word2Vec&lt;/a&gt; is a technique to find continuous embeddings for words. It learns from reading massive amounts of text and memorizing which words tend to appear in similar contexts. After being trained on enough data, it generates a 300-dimension vector for each word in a vocabulary, with words of similar meaning being closer to each other.&lt;/p&gt;
&lt;p name=&quot;6c76&quot; id=&quot;6c76&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;The authors of the &lt;a href=&quot;https://arxiv.org/abs/1301.3781&quot; data-href=&quot;https://arxiv.org/abs/1301.3781&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;paper&lt;/a&gt; open sourced a model that was pre-trained on a very large corpus which we can leverage to include some knowledge of semantic meaning into our model. The pre-trained vectors can be found in the &lt;a href=&quot;https://github.com/hundredblocks/concrete_NLP_tutorial&quot; data-href=&quot;https://github.com/hundredblocks/concrete_NLP_tutorial&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;repository&lt;/a&gt; associated with this post.&lt;/p&gt;
&lt;h4 name=&quot;86ed&quot; id=&quot;86ed&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;Sentence level representation&lt;/h4&gt;
&lt;p name=&quot;9d62&quot; id=&quot;9d62&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;A quick way to get a sentence embedding for our classifier is to average Word2Vec scores of all words in our sentence. This is a Bag of Words approach just like before, but this time &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;we only lose the syntax of our sentence, while keeping some semantic information.&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*THo9NKchWkCAOILvs1eHuQ.png&quot; data-width=&quot;2306&quot; data-height=&quot;910&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*THo9NKchWkCAOILvs1eHuQ.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*THo9NKchWkCAOILvs1eHuQ.png&quot;/&gt;&lt;/div&gt;
Word2Vec sentence embedding
&lt;p name=&quot;82e9&quot; id=&quot;82e9&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Here is a visualization of our new embeddings using previous techniques:&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*Dt66MaGpumPGxHfAwooieA.png&quot; data-width=&quot;1712&quot; data-height=&quot;1630&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*Dt66MaGpumPGxHfAwooieA.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*Dt66MaGpumPGxHfAwooieA.png&quot;/&gt;&lt;/div&gt;
Visualizing Word2Vec embeddings.
&lt;p name=&quot;8b9b&quot; id=&quot;8b9b&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;The two groups of colors look even more separated here, our new embeddings should help our classifier find the separation between both classes. After training the same model a third time (a Logistic Regression), we get &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;an accuracy score of 77.7%&lt;/strong&gt;, our best result yet! Time to inspect our model.&lt;/p&gt;
&lt;h4 name=&quot;3f73&quot; id=&quot;3f73&quot; class=&quot;graf graf--h4 graf-after--p&quot;&gt;The Complexity/Explainability trade-off&lt;/h4&gt;
&lt;p name=&quot;ff12&quot; id=&quot;ff12&quot; class=&quot;graf graf--p graf-after--h4&quot;&gt;Since our embeddings are not represented as a vector with one dimension per word as in our previous models, it’s harder to see which words are the most relevant to our classification. While we still have access to the coefficients of our Logistic Regression, they relate to the 300 dimensions of our embeddings rather than the indices of words.&lt;/p&gt;
&lt;p name=&quot;8eb6&quot; id=&quot;8eb6&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;For such a low gain in accuracy, losing all explainability seems like a harsh trade-off. However, with more complex models we can we can leverage &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;black box explainers&lt;/strong&gt; such as &lt;a href=&quot;https://arxiv.org/abs/1602.04938&quot; data-href=&quot;https://arxiv.org/abs/1602.04938&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;LIME&lt;/a&gt; in order to get some insight into how our classifier works.&lt;/p&gt;
&lt;p name=&quot;3234&quot; id=&quot;3234&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;&lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;LIME&lt;/strong&gt;&lt;/p&gt;
&lt;p name=&quot;7914&quot; id=&quot;7914&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;LIME is &lt;a href=&quot;https://github.com/marcotcr/lime&quot; data-href=&quot;https://github.com/marcotcr/lime&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;available on Github&lt;/a&gt; through an open-sourced package. A a black-box explainer allows users to explain the decisions of any classifier &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;on one particular example&lt;/strong&gt; by perturbing the input (in our case removing words from the sentence) and seeing how the prediction changes.&lt;/p&gt;
&lt;p name=&quot;cc44&quot; id=&quot;cc44&quot; class=&quot;graf graf--p graf-after--p&quot;&gt;Let’s see a couple explanations for sentences from our dataset.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*w8zlZbHildSWpEWW_bBcAw.png&quot; data-width=&quot;1772&quot; data-height=&quot;394&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*w8zlZbHildSWpEWW_bBcAw.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*w8zlZbHildSWpEWW_bBcAw.png&quot;/&gt;&lt;/div&gt;
Correct disaster words are picked up to classify as “relevant”.
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*44zlmsnb-hENy0BXSsmzfg.png&quot; data-width=&quot;1540&quot; data-height=&quot;386&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*44zlmsnb-hENy0BXSsmzfg.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*44zlmsnb-hENy0BXSsmzfg.png&quot;/&gt;&lt;/div&gt;
Here, the contribution of the words to the classification seems less obvious.
&lt;p name=&quot;d8ed&quot; id=&quot;d8ed&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;However, we do not have time to explore the thousands of examples in our dataset. What we’ll do instead is run LIME on a representative sample of test cases and see which words keep coming up as strong contributors. Using this approach we can get word importance scores like we had for previous models and validate our model’s predictions.&lt;/p&gt;
&lt;div class=&quot;aspectRatioPlaceholder is-locked&quot;&gt;

&lt;img class=&quot;graf-image&quot; data-image-id=&quot;1*YxFOFx_kxovglm_OLZD9Sw.png&quot; data-width=&quot;1220&quot; data-height=&quot;1152&quot; data-action=&quot;zoom&quot; data-action-value=&quot;1*YxFOFx_kxovglm_OLZD9Sw.png&quot; src=&quot;https://cdn-images-1.medium.com/max/1600/1*YxFOFx_kxovglm_OLZD9Sw.png&quot;/&gt;&lt;/div&gt;
Word2Vec: Word importance
&lt;p name=&quot;5c17&quot; id=&quot;5c17&quot; class=&quot;graf graf--p graf-after--figure&quot;&gt;Looks like the model picks up highly relevant words implying that it appears to make understandable decisions. These seem like the most relevant words out of all previous models and therefore we’re more comfortable deploying in to production.&lt;/p&gt;
&lt;h3 name=&quot;f99a&quot; id=&quot;f99a&quot; class=&quot;graf graf--h3 graf-after--p&quot;&gt;Step 8: Leveraging syntax using end-to-end approaches&lt;/h3&gt;
&lt;p name=&quot;9971&quot; id=&quot;9971&quot; class=&quot;graf graf--p graf-after--h3&quot;&gt;We’ve covered quick and efficient approaches to generate compact sentence embeddings. However, by omitting the order of words, we are discarding all of the syntactic information of our sentences. If these methods do not provide sufficient results, you can utilize more complex model that take in whole sentences as input and predict labels without the need to build an intermediate representation. A common way to do that is to treat a sentence as &lt;strong class=&quot;markup--strong markup--p-strong&quot;&gt;a sequence of individual word vectors&lt;/strong&gt; using either Word2Vec or more recent approaches such as &lt;a href=&quot;https://nlp.stanford.edu/projects/glove/&quot; data-href=&quot;https://nlp.stanford.edu/projects/glove/&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;GloVe&lt;/a&gt; or &lt;a href=&quot;https://arxiv.org/abs/1708.00107&quot; data-href=&quot;https://arxiv.org/abs/1708.00107&quot; class=&quot;markup--anchor markup--p-anchor&quot; rel=&quot;noopener&quot; target=&quot;_blank&quot;&gt;CoVe&lt;/a&gt;. This is what we will do below.&lt;/p&gt;
</description>
<pubDate>Wed, 24 Jan 2018 17:17:39 +0000</pubDate>
<dc:creator>e_ameisen</dc:creator>
<og:title>How to solve 90% of NLP problems: a step-by-step guide</og:title>
<og:url>https://blog.insightdatascience.com/how-to-solve-90-of-nlp-problems-a-step-by-step-guide-fda605278e4e</og:url>
<og:image>https://cdn-images-1.medium.com/max/1200/1*J8-5VgoWtMsIJhyHAuljSw.png</og:image>
<og:description>Using Machine Learning to understand and leverage text.</og:description>
<og:type>article</og:type>
<dc:format>text/html</dc:format>
<dc:identifier>https://blog.insightdatascience.com/how-to-solve-90-of-nlp-problems-a-step-by-step-guide-fda605278e4e?gi=9cef8c1a419a</dc:identifier>
</item>
<item>
<title>Show HN: RetroClip – Instant Replay for Your Mac</title>
<link>https://www.realartists.com/blog/retroclip-instant-replay-for-your-mac.html</link>
<guid isPermaLink="true" >https://www.realartists.com/blog/retroclip-instant-replay-for-your-mac.html</guid>
<description>&lt;header&gt;
&lt;/header&gt;&lt;footer class=&quot;post-info&quot;&gt;&lt;abbr class=&quot;published&quot; title=&quot;2018-01-24T09:00:00-08:00&quot;&gt;Wed 24 January 2018&lt;/abbr&gt;
&lt;address class=&quot;vcard author&quot;&gt;By &lt;a class=&quot;url fn&quot; href=&quot;https://www.realartists.com/blog/authors/james-howard.html&quot;&gt;James Howard&lt;/a&gt;&lt;/address&gt;
&lt;/footer&gt;&lt;p&gt;We have a new app &lt;a href=&quot;https://itunes.apple.com/us/app/retroclip/id1332064978?ls=1&amp;amp;mt=12&quot;&gt;out on the Mac App Store.&lt;/a&gt; It's called RetroClip, and it makes taking instant replay video captures of your Mac's screen as easy as taking a screenshot. There is &lt;a href=&quot;https://www.realartists.com/retroclip/&quot;&gt;a browser based demo&lt;/a&gt; you can try if you're on a Mac or a PC (and you really should try it because it's super cool).&lt;/p&gt;
&lt;p&gt;I got the idea to write RetroClip after playing the game &lt;a href=&quot;https://www.epicgames.com/fortnite&quot;&gt;Fortnite Battle Royale&lt;/a&gt; and winning, and then having nothing to show for it besides a static screenshot.&lt;sup id=&quot;fnref-1&quot;/&gt; Current generation video game consoles all have a feature where you can press a button and capture the last minute or so of gameplay and I wanted this for my Mac. The key idea is that you don't know when you want to save a video clip until after something exciting has happened, so it needs to work retroactively — it's no good if you have to press a button to start the recording because it's already too late.&lt;/p&gt;
&lt;p&gt;Unlike other screen capture utilities for macOS, RetroClip does not save to an ever growing scratch file on disk as it is recording. Instead, it saves video frames to a fixed size circular buffer in main memory. The neat thing is, we don't even need that much memory to do a good job. We can fit 30 seconds of HD video in around 40MB of memory.&lt;sup id=&quot;fnref-2&quot;/&gt; Once you see something you want to save, just press the RetroClip keyboard shortcut, and RetroClip writes the memory region with the video data out to disk, essentially instantaneously.&lt;/p&gt;
&lt;p&gt;Anyway, you should &lt;a href=&quot;https://itunes.apple.com/us/app/retroclip/id1332064978?ls=1&amp;amp;mt=12&quot;&gt;download it&lt;/a&gt; and give it a try. Even if you don't use it for games, you may find it useful for capturing those pesky bug reports where you can't seem to reproduce it a second time. Please let us know what you think, either by &lt;a href=&quot;mailto:support@realartists.com&quot;&gt;email&lt;/a&gt; or on &lt;a href=&quot;https://twitter.com/ShipRealArtists&quot;&gt;Twitter&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;I've been code golfing RetroClip in my spare time for the past couple of months. It actually only took me a few hours to get an initial version of the app up and running, but eking out the maximum performance became something of an obsession. It's not just for bragging rights, though, the idea is to be able to leave RetroClip running all the time, even while playing games, watching videos, compiling code, writing blog posts, and so on. The more efficient RetroClip can be, the more is left over for doing important things, and for saving battery life.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;If you're interested in the inner workings of RetroClip, read on because this section is for you. If not, that's fine, there's no reason to know this stuff anyway.&lt;/em&gt;&lt;/p&gt;
&lt;h3 id=&quot;screen-capture&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://www.realartists.com/blog/retroclip-instant-replay-for-your-mac.html#screen-capture&quot;&gt;Screen Capture&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Screen Capture in macOS inevitably starts with the Window Server. The Window Server is the process in macOS responsible for keeping track of windows and their contents and for compositing them together to make the image you see on your display.&lt;sup id=&quot;fnref-3&quot;/&gt; As an application, we can ask the Window Server to send us the screen contents as they're displayed via the &lt;a href=&quot;https://developer.apple.com/documentation/coregraphics/quartz_display_services?language=objc&quot;&gt;CGDisplayStream APIs&lt;/a&gt;. When we do this, the Window Server will feed us, via IPC, &lt;a href=&quot;https://developer.apple.com/documentation/iosurface&quot;&gt;IOSurfaces&lt;/a&gt;, which are pointers to shared graphics texture memory, as fast as either it can create them or as fast as we can consume them, whichever is slower.&lt;/p&gt;
&lt;p&gt;Once we get the pointers to the texture data, we can turn around and feed this into the hardware H.264 video encoder which is present in most Macs via the &lt;a href=&quot;https://developer.apple.com/documentation/videotoolbox/vtcompressionsession-7bn&quot;&gt;VideoToolbox APIs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Everything described so far all works great, and it is a highly optimized area of macOS as it's used in important built-in features such as AirPlay Mirroring. For convenience, it's even wrapped up in a &lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturescreeninput&quot;&gt;higher level AVFoundation API&lt;/a&gt; that works pretty well (and this is either the basis of QuickTime Player's screen recording functionality or their implementations are substantially similar).&lt;/p&gt;
&lt;p&gt;With a bit of effort, however, it is possible to optimize things further and save some CPU time along the way. We can't get around asking the Window Server to do some work on our behalf to get the display data in the first place, and we can't really get around having to H.264 encode the images.&lt;sup id=&quot;fnref-4&quot;/&gt; But, there is still a place to save time: the mouse cursor.&lt;/p&gt;
&lt;p&gt;The mouse cursor is special. It lives in an overlay that is composited on top of everything else by the GPU at the last moment before an image is shown on screen. This actually makes a difference in how responsive your computer feels. If, when you move the mouse, the Window Server had to re-composite the entire scene, and the mouse cursor was locked to vsync, you can actually, subtilely, feel it as being laggy. You may have experienced this effect when playing some full screen video games that attempt to implement their own cursor rendering. You can also notice this effect when turning on AirPlay Mirroring, as this apparently forces the Window Server into a mode where it will composite the cursor along with everything else, as opposed to using the hardware cursor overlay.&lt;/p&gt;
&lt;p&gt;So going back to the &lt;a href=&quot;https://developer.apple.com/documentation/coregraphics/kcgdisplaystreamshowcursor&quot;&gt;CGDisplayStream API&lt;/a&gt;, notice that we can ask the Window Server to composite the cursor for us. This works just fine and produces the correct picture, but disables the hardware cursor overlay, which will slowly drive you crazy. So, to avoid a slow descent into madness, the best approach is to instruct the Window Server to not include the mouse cursor in the display stream and just composite it myself on my own time. And, in fact, this is the approach that QuickTime Player and AVCaptureScreenInput also employ. However, I know a way to do it faster.&lt;/p&gt;
&lt;p&gt;My trick is to observe that the IOSurfaces sent over to my application from the Window Server are writeable. The Window Server apparently rotates through a small handful of them, so I can't hang on to them for more than a few frames or I risk a backlog, but what I can do is quickly modify them, and this is a lot faster than trying to copy them. So, I do a quick &lt;a href=&quot;https://developer.apple.com/documentation/metal/mtlblitcommandencoder&quot;&gt;blit&lt;/a&gt; to a small scratch texture to save aside the pixels in the area where the cursor is, then I composite the cursor into the original full screen texture I got from the Window Server. If the mouse cursor moves without a screen update (which can and should happen when the Window Server is using the hardware cursor overlay), then I can use that scratch texture I saved aside to undo the cursor compositing I did earlier, and then I have a clean canvas on which to re-composite the cursor at its new location.&lt;/p&gt;
&lt;p&gt;I think the mouse cursor trick is the main source of my performance advantage over QuickTime Player/AVCaptureScreenInput, along with generally careful programming to avoid unnecessary copies, allocations, and indirections. On my machine, RetroClip typically uses about one-fifth of the CPU time to capture the same content at 60 frames per second as AVCaptureScreenInput does. Finally, if there is no mouse cursor, because you're playing a game without one or you're watching a video, then we can go down an even faster code path and avoid all of the cursor compositing magic.&lt;/p&gt;
&lt;h3 id=&quot;media-buffering&quot;&gt;&lt;a class=&quot;toclink&quot; href=&quot;https://www.realartists.com/blog/retroclip-instant-replay-for-your-mac.html#media-buffering&quot;&gt;Media Buffering&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;RetroClip stores the encoded H.264 video frames in memory, rather than immediately writing them out to disk like QuickTime Player does. The goal in RetroClip for buffering this video is to hold it in memory as efficiently as possible, and to have stable memory use over days or weeks of use. Additionally, when the user requests to save a clip, we want to do this as quickly as possible.&lt;/p&gt;
&lt;p&gt;My first pass was to just put &lt;a href=&quot;https://developer.apple.com/documentation/coremedia/cmsamplebuffer-u71&quot;&gt;the reference counted pointers to the frames&lt;/a&gt; output from the video encoder into &lt;a href=&quot;https://developer.apple.com/documentation/coremedia/cmbufferqueue-u8p&quot;&gt;a queue&lt;/a&gt;. This works OK, but it has two downsides: first, we have to lock whenever doing a save operation until we've had a chance to duplicate the queue and increment the retain counts on all of the sample buffers within it, and second, keeping thousands of these variably sized things scattered around turns the heap into swiss cheese after a while.&lt;/p&gt;
&lt;p&gt;The solution to both of these problems is to use a &lt;a href=&quot;https://en.wikipedia.org/wiki/Circular_buffer&quot;&gt;circular queue&lt;/a&gt; to store the encoded video data end to end without any fragmentation. As new frames are generated, we write them at the head, and we can forget about old frames at the tail simply by incrementing a pointer.&lt;/p&gt;
&lt;p&gt;Mike Ash wrote a very interesting &lt;a href=&quot;https://www.mikeash.com/pyblog/friday-qa-2012-02-03-ring-buffers-and-mirrored-memory-part-i.html&quot;&gt;series of articles&lt;/a&gt; about using mach virtual memory tricks to avoid having to expose segmented objects that are split across the edge of a circular queue, and you should definitely read it if you haven't already, but I actually don't need to use this trick myself in RetroClip. This is because the code that writes out the mp4 file &lt;a href=&quot;https://developer.apple.com/documentation/coremedia/cmblockbuffer-u9i&quot;&gt;already can easily handle&lt;/a&gt; a split frame if necessary.&lt;/p&gt;
&lt;p&gt;Fortunately, there is still an opportunity to do a mach virtual memory trick. When the user requests a clip to be saved, we can make use of the rarely used &lt;a href=&quot;https://developer.apple.com/documentation/kernel/1585336-vm_remap?language=objc&quot;&gt;vm_remap&lt;/a&gt; function to make a quick copy of the video data. An I/O thread gets the copy and writes it out to disk, and the media buffer thread keeps on going with the original.&lt;/p&gt;
&lt;p&gt;What's neat is, the copy isn't really a copy, it's just some new virtual memory page table entries pointing to the same physical memory containing the video data as the original. Only as new frames are received and written to the original do the contents of the circular buffers begin to diverge, and the kernel handles finding new memory to store the data for us transparently. And because doing a contiguous write of 40 or 80 MB from memory to disk is incredibly fast these days, much faster than the incoming data rate from the H.264 encoder, there really isn't much copy on write that the kernel needs to do for us, at the most maybe a couple of megabytes.&lt;/p&gt;

&lt;p&gt;As purveyors of &lt;a href=&quot;https://www.realartists.com/&quot;&gt;real native Mac software&lt;/a&gt;, Nick and I occasionally worry that we are ignoring the advancing capabilities of web browsers as application platforms. Regarding our first product a couple years ago, a Hacker News reader confidently wrote:&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;Also all the stated reasons for using native are actually wrong and just as possible in web app, or will be by end of 2016.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;As it's already 2018, we knew we had to get with the times. While at first, I just &lt;a href=&quot;https://www.realartists.com/retroclip/static/&quot;&gt;wanted to make a video, write a blurb, and have a Mac App Store link&lt;/a&gt; for our website, Nick quickly convinced me that I could and should &lt;a href=&quot;https://www.realartists.com/retroclip/&quot;&gt;do better&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So, last week, armed with nothing else besides the latest version of Safari and my trusty &lt;a href=&quot;https://www.barebones.com/products/bbedit/&quot;&gt;text editor&lt;/a&gt;, I set off to port RetroClip to the web.&lt;/p&gt;
&lt;p&gt;My first challenge was to figure out how to do H.264 encoding in a web browser. Using the hardware encoder was obviously off limits, but I figured doing software encoding on a &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API&quot;&gt;background thread&lt;/a&gt; would have to suffice. I found a &lt;a href=&quot;https://github.com/Kagami/ffmpeg.js&quot;&gt;couple&lt;/a&gt; of &lt;a href=&quot;https://bgrins.github.io/videoconverter.js/&quot;&gt;projects&lt;/a&gt; that aimed at doing it, but I was hoping to do better than 25MB of uncompressed javascript.&lt;/p&gt;
&lt;p&gt;I wasn't about to write my own H.264 encoder, but I thought maybe if I got &lt;a href=&quot;https://www.videolan.org/developers/x264.html&quot;&gt;x264&lt;/a&gt; built as &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/WebAssembly&quot;&gt;web assembly&lt;/a&gt; with as little extra glue code as needed to get RGB data from the browser into H.264 video in an MP4 container and back, that would be good enough. And, it turns out, &lt;a href=&quot;https://github.com/realartists/raw2mp4&quot;&gt;it is&lt;/a&gt;. It works out to about 850KB of uncompressed web assembly, and it will encode scaled image data to H.264 much faster than real time (at least on decent computers).&lt;/p&gt;
&lt;p&gt;Once the video encoding piece of the puzzle was solved, I was confident that RetroClip for Web could become a reality. All I needed now was to create for the web a Window Server, a menu bar, some Cocoa view hierarchy, window management, event handling code, &lt;a href=&quot;https://developer.apple.com/documentation/appkit/nsvisualeffectview&quot;&gt;NSVisualEffectView&lt;/a&gt;, &lt;a href=&quot;https://developer.apple.com/documentation/foundation/nsusernotificationcenter&quot;&gt;NSUserNotificationCenter&lt;/a&gt;, and the &lt;a href=&quot;https://support.apple.com/en-us/HT206997&quot;&gt;picture in picture&lt;/a&gt; media player introduced in macOS Sierra, and then I'd have everything I needed to port and run RetroClip on the web!&lt;/p&gt;
&lt;p&gt;In the end, it wasn't too hard. The HTML &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D&quot;&gt;Canvas&lt;/a&gt; element is basically the same thing as &lt;a href=&quot;https://developer.apple.com/documentation/coregraphics/cgcontext&quot;&gt;CGContext&lt;/a&gt;, so reimplementing a macOS UI on the web proceeds somewhat naturally.&lt;/p&gt;
&lt;p&gt;Granted, an environment in which one can only run RetroClip is a bit too self-referential to be of any practical use beyond marketing &lt;a href=&quot;https://itunes.apple.com/us/app/retroclip/id1332064978?ls=1&amp;amp;mt=12&quot;&gt;RetroClip for Mac&lt;/a&gt;, but I figure, with the ground work I've already done, I will have a leg up on porting other Cocoa apps to the web. Hey, it worked for &lt;a href=&quot;https://en.wikipedia.org/wiki/280_North,_Inc.&quot;&gt;280 North&lt;/a&gt; a few years ago, and now with the advent of exciting new web technologies it might be time to revisit the idea.&lt;sup id=&quot;fnref-5&quot;/&gt;&lt;/p&gt;

&lt;p&gt;As you can tell from this way too long blog post, a lot of work went in to RetroClip. If you're a &lt;a href=&quot;https://www.realartists.com/&quot;&gt;Ship&lt;/a&gt; customer, you're probably wondering how this affects Ship. The answer is, we're still working hard on Ship, and I wrote RetroClip in my spare time and decided to release it because it's neat.&lt;/p&gt;
&lt;p&gt;If you're not already a Ship user, and you use GitHub and a Mac, you should &lt;a href=&quot;https://www.realartists.com/&quot;&gt;check it out&lt;/a&gt;.&lt;/p&gt;

</description>
<pubDate>Wed, 24 Jan 2018 16:24:50 +0000</pubDate>
<dc:creator>kogir</dc:creator>
<og:type>website</og:type>
<og:title>Ship</og:title>
<og:description>Fast, native, comprehensive issue tracking for GitHub</og:description>
<og:url>https://www.realartists.com/</og:url>
<og:image>https://www.realartists.com/image/big-icon-2x.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.realartists.com/blog/retroclip-instant-replay-for-your-mac.html</dc:identifier>
</item>
<item>
<title>Why we transitioned from Medium back to our own blog</title>
<link>https://baremetrics.com/blog/medium-back-to-blog</link>
<guid isPermaLink="true" >https://baremetrics.com/blog/medium-back-to-blog</guid>
<description>&lt;p&gt;&lt;em&gt;Where&lt;/em&gt; to publish something has become a difficult decision for a lot of businesses. You read so many stories about using various channels to distribute content and grow traffic, it’s hard to know what does and doesn’t work. Medium, in particular, has become a major player in the world of startup content, but is it really that great?&lt;/p&gt;
&lt;p&gt;I’ve certainly been tempted by the prospect of loads of traffic and tons of likes (or “fans” as Medium calls them now). But how does that translate in to something meaningful for the business?&lt;/p&gt;
&lt;p&gt;This is our story of how we’ve used Medium, what worked, what didn’t and what our strategy is now, after kicking the proverbial tires for a couple of years.&lt;/p&gt;
&lt;h2&gt;Growing with content marketing&lt;/h2&gt;
&lt;p&gt;Before Baremetrics, at previous companies I’d started, I’d dabbled in content marketing. But not the quality stuff…the mass-produced, pay-somebody-$20-to-knock-out-500-words-around-a-random-SEO-keyword kind of stuff. As you can imagine, I got nothing out of it. Totally worthless, across the board.&lt;/p&gt;
&lt;p&gt;So when I started Baremetrics, I knew I wanted to do things differently.&lt;/p&gt;
&lt;p&gt;My first step towards this actually started before I even launched Baremetrics. I &lt;a href=&quot;https://twitter.com/i/moments/788809454565396480&quot;&gt;live-tweeted a lot of the process&lt;/a&gt; of getting Baremetrics launched and was very open from the start with how the business was doing.&lt;/p&gt;
&lt;p&gt;Early on I decided to make “transparency” a core part of the business, both in how we operated and also our strategy around marketing. Three months after launching, I &lt;a href=&quot;https://baremetrics.com/blog/inside-our-financials-baremetrics-demo&quot;&gt;made all of our numbers public&lt;/a&gt;, and from then on just started sharing everything I could think of.&lt;/p&gt;
&lt;p&gt;That was my entire content marketing strategy early on: &lt;strong&gt;share it all&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;That stance really helped grow the blog pretty quickly. I was publishing weekly about all the things I was trying and it got quite a bit of momentum, making the blog a place people checked regularly and came to expect new content from each week.&lt;/p&gt;
&lt;h2&gt;Then came Medium&lt;/h2&gt;
&lt;p&gt;About two years in, I found myself reading a ton of content on Medium and various businesses were moving their publications to Medium (the most prominent of which, in my mind, was &lt;a href=&quot;https://m.signalvnoise.com/signal-v-noise-moves-to-medium-c8083ce19686&quot;&gt;Basecamp’s Signal v. Noise&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;I’d pumped out dozens and dozens of articles on our own blog to pretty great success, but Medium started looking like some really green grass on the other side. Not just from the “Ooooo, traffic!” prospect, but Medium also has a pretty active community, and I selfishly wanted the endorphin rush.&lt;/p&gt;
&lt;p&gt;I wasn’t really sure how to approach it. Should we wholesale move over every article from our blog to Medium? Do we post new content to Medium and repost to our own blog later? How would we even technically handle that from an SEO duplicate-content standpoint? Would it cannibalize newsletter signups?&lt;/p&gt;
&lt;p&gt;Lots of questions, but very little data out there. Not because people hadn’t done it, but because so much of it is based on your goals and what you actually want to get out of it.&lt;/p&gt;
&lt;h2&gt;The switch&lt;/h2&gt;
&lt;p&gt;What originally sealed the deal on making the switch to Medium was when I posted &lt;a href=&quot;https://medium.com/baremetrics-founders-journey/is-your-company-really-only-doing-45-000-per-month-a2098bf29bf5&quot;&gt;an email I’d received from an investor&lt;/a&gt;. That gave me my first taste of success on Medium.&lt;/p&gt;
&lt;p&gt;Our game plan was to post all new content to our Medium publication and set it up on a subdomain (blog.baremetrics.com). We’d keep the old blog, and then just post links to the new content as it was created. We’d also slowly transition past content over to the Medium publication as well.&lt;/p&gt;
&lt;p&gt;For most of 2017, all new blog posts went directly to Medium. Honestly, it was really enjoyable. Publishing on Medium is so effortless. Formatting content and uploading images takes basically zero time. It’s really the best web-based publishing experience I’ve had to date.&lt;/p&gt;
&lt;p&gt;I didn’t pay a whole lot of attention to stats. I just knew we were getting lots of likes and highlights and it was generating meaningful discussion, so it felt like a win.&lt;/p&gt;
&lt;h2&gt;Second guessing the switch&lt;/h2&gt;
&lt;p&gt;After about a year of posting on Medium, traffic on our own marketing site was (rightfully) taking a hit. Newsletter signups were also slumping and there was just palpably less “buzz” around Baremetrics content in general.&lt;/p&gt;
&lt;p&gt;I realized Medium is really great about surfacing content, but it removes the &lt;em&gt;face&lt;/em&gt; of it. It neutralizes all content to basically be author-agnostic. It’s like Walmart or Amazon in that you can buy from thousands of different brands, but you rarely actually know what brand you’re buying…you just know “I got it from Amazon.”&lt;/p&gt;
&lt;p&gt;Same with content on Medium. Sure, you can see who the author is or what publication it’s on, but ultimately your takeaway is “I read this article on Medium”, and that’s not what I wanted. I wanted to get back to people saying “I read this article on Baremetrics”.&lt;/p&gt;
&lt;p&gt;On top of that, the amount of views a given article would get ultimately weren’t that impressive. At least not much/any more than our own blog (given we’d already built up a nice readership).&lt;/p&gt;
&lt;p&gt;As an example, our top posts on Medium had total Views in the 8-10k range (with our best ever getting around 40k, though that’s an outlier).&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter size-full wp-image-10946&quot; src=&quot;https://baremetrics-wordpress.imgix.net/20180123191319/Screen-Shot-2018-01-23-at-12.38.28-PM.png&quot; alt=&quot;&quot; width=&quot;1061&quot; height=&quot;486&quot; srcset=&quot;https://baremetrics-wordpress.imgix.net/20180123191319/Screen-Shot-2018-01-23-at-12.38.28-PM.png 1061w, https://baremetrics-wordpress.imgix.net/20180123191319/Screen-Shot-2018-01-23-at-12.38.28-PM-300x137.png 300w, https://baremetrics-wordpress.imgix.net/20180123191319/Screen-Shot-2018-01-23-at-12.38.28-PM-768x352.png 768w, https://baremetrics-wordpress.imgix.net/20180123191319/Screen-Shot-2018-01-23-at-12.38.28-PM-1024x469.png 1024w&quot; sizes=&quot;(max-width: 1061px) 100vw, 1061px&quot;/&gt;&lt;/p&gt;
&lt;p&gt;After those top 5, the Views dropped off pretty drastically to just 500-1k per article.&lt;/p&gt;
&lt;p&gt;Whereas our own blog, beforehand, we were getting multiples of that on basically every article.&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;aligncenter size-full wp-image-10947&quot; src=&quot;https://baremetrics-wordpress.imgix.net/20180123191340/Screen-Shot-2018-01-23-at-12.41.11-PM.png&quot; alt=&quot;&quot; width=&quot;769&quot; height=&quot;976&quot; srcset=&quot;https://baremetrics-wordpress.imgix.net/20180123191340/Screen-Shot-2018-01-23-at-12.41.11-PM.png 769w, https://baremetrics-wordpress.imgix.net/20180123191340/Screen-Shot-2018-01-23-at-12.41.11-PM-236x300.png 236w, https://baremetrics-wordpress.imgix.net/20180123191340/Screen-Shot-2018-01-23-at-12.41.11-PM-768x975.png 768w&quot; sizes=&quot;(max-width: 769px) 100vw, 769px&quot;/&gt;&lt;/p&gt;
&lt;p&gt;The numbers just didn’t make sense. Yes, I could put &lt;em&gt;more&lt;/em&gt; into Medium and try to build up readership even more. The guys at Basecamp regularly get 250k+ views on their content. But doing that helps &lt;em&gt;Medium&lt;/em&gt; the most in the long run. They’ve been fumbling left and right trying to figure out how to make Medium sustainable, and I’m just not convinced they’ll always do what’s best for us and our business.&lt;/p&gt;
&lt;h2&gt;Switching back&lt;/h2&gt;
&lt;p&gt;Now I didn’t want to throw out distribution on Medium entirely. There can definitely be some benefit to &lt;em&gt;syndicating&lt;/em&gt; content there. It’s essentially another distribution channel to expose people to our content.&lt;/p&gt;
&lt;p&gt;So we needed a game plan on how we could still make use of Medium as a distribution channel without cannibalizing our own readership or SEO work.&lt;/p&gt;
&lt;p&gt;That game plan consisted of two main things.&lt;/p&gt;
&lt;h3&gt;Removing the custom domain&lt;/h3&gt;
&lt;p&gt;We decided to stop using “blog.baremetrics.com” on Medium and redirected all of those URLs back to the same content on “baremetrics.com/blog”. This process was relatively painless.&lt;/p&gt;
&lt;p&gt;Ahead of time I added all the missing content from Medium to our own blog, then I setup 301 Redirects. I pointed “blog.baremetrics.com” to our marketing site, which runs on WordPress, and using the fantastic &lt;a href=&quot;https://redirection.me&quot;&gt;Redirection plugin&lt;/a&gt; was able to monitor any 404 errors from those Medium redirects and immediately create the necessary 301 Redirects from that.&lt;/p&gt;
&lt;p&gt;The only hiccup here is that you have to email Medium support to remove the custom domain (something I didn’t realize beforehand), so there was about a 12-hour period where all the articles on Medium weren’t accessible due to Medium forcing the incorrect URL.&lt;/p&gt;
&lt;h3&gt;Republishing new content to Medium&lt;/h3&gt;
&lt;p&gt;Going forward, we are still going to publish to Medium, but with two big caveats.&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;We’ll publish new content two weeks later to Medium (so the initial publishing of the content is able to get solidified as the primary source from an SEO standpoint).&lt;/li&gt;
&lt;li&gt;We’ll use Medium’s &lt;a href=&quot;https://medium.com/p/import&quot;&gt;Import tool&lt;/a&gt; to publish the content. Medium buries this thing, but what it does is lets us republish on Medium and have them set the &lt;a href=&quot;https://support.google.com/webmasters/answer/139066?hl=en&quot;&gt;canonical URL&lt;/a&gt; to the original post on your own website. That’s a big kick from the SEO side of things as it tells Google that your original post is the main one and should be given preference in search results.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;With this method we still own the original content, get the benefits of being the primary source and get the distribution benefits of Medium!&lt;/p&gt;
&lt;p&gt;By making ourselves the original, authoritative source, we’re able to control the whole experience &lt;em&gt;for the long term&lt;/em&gt; and &lt;em&gt;to our benefit&lt;/em&gt; instead of potential &lt;em&gt;short term wins&lt;/em&gt; to &lt;em&gt;Medium’s benefit&lt;/em&gt;.&lt;/p&gt;
&lt;h2&gt;What about you?&lt;/h2&gt;
&lt;p&gt;So what about you? What’s worked for you as you build up content and readership?&lt;/p&gt;
</description>
<pubDate>Wed, 24 Jan 2018 15:46:28 +0000</pubDate>
<dc:creator>uptown</dc:creator>
<og:type>article</og:type>
<og:title>Why we transitioned from Medium back to our own blog - Baremetrics</og:title>
<og:description>Where to publish something has becoming a difficult decision for a lot of businesses. You read so many stories about using various channels to distribute content and grow traffic, it’s hard to know what does and doesn’t work. Medium, in particular, has become a major player in the world of startup content, but is it really that great?</og:description>
<og:url>https://baremetrics.com/blog/medium-back-to-blog</og:url>
<og:image>https://baremetrics-wordpress.imgix.net/20180123191834/photo-1499750310107-5fef28a66643.jpeg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://baremetrics.com/blog/medium-back-to-blog</dc:identifier>
</item>
<item>
<title>Ted Nelson on What Modern Programmers Can Learn from the Past [video]</title>
<link>https://spectrum.ieee.org/video/geek-life/profiles/ted-nelson-on-what-modern-programmers-can-learn-from-the-past</link>
<guid isPermaLink="true" >https://spectrum.ieee.org/video/geek-life/profiles/ted-nelson-on-what-modern-programmers-can-learn-from-the-past</guid>
<description>&lt;h2&gt;The inventor of hypertext talks about the birth of personal computing, the web, and how to think beyond the currently possible&lt;/h2&gt;
&lt;section class=&quot;feature-slides&quot;&gt;
&lt;/section&gt;
&lt;hr/&gt;&lt;div class=&quot;transcript&quot; readability=&quot;27.554588607595&quot;&gt;
&lt;p&gt;&lt;span&gt;Ted Nelson is one of the original prophets of the information age. In the 1960s he invented the word&lt;/span&gt; &lt;em&gt;hypertext&lt;/em&gt;&lt;span&gt;, and created project &lt;a href=&quot;http://xanadu.com/&quot;&gt;Xanadu&lt;/a&gt;, which prefigured many of the elements of the World Wide Web.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Nelson was part of personal computing at a time when it saw itself as an outgrowth of the countercultural movement that flourished in the 1960s. This computing was done either via a terminal to minicomputers, or on microprocessors with transistor counts measuring only in thousands. Back in the summer of 2016, Nelson was a keynote speaker at&lt;/span&gt; &lt;a href=&quot;http://vcfed.org/wp/festivals/vintage-computer-festival-east/&quot;&gt;&lt;span&gt;Vintage Computing Festival East&lt;/span&gt;&lt;/a&gt; &lt;span&gt;in New Jersey and&lt;/span&gt; &lt;em&gt;IEEE Spectrum&lt;/em&gt; &lt;span&gt;had the chance to interview him off-stage.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;We thought this was a good time to dust off that interview. We’re entering a period when the possibilities and dangers of computing are looming large in our minds, thanks to the explosion of machine learning, debates over the governance of the Internet, the impacts of automation, and unexpected weaknesses revealed by the&lt;/span&gt; &lt;a href=&quot;https://spectrum.ieee.org/tech-talk/semiconductors/processors/how-the-intel-processor-meltdown-vulnerability-was-thwarted&quot;&gt;&lt;span&gt;Spectre and Meltdown&lt;/span&gt;&lt;/a&gt; &lt;span&gt;hardware bugs. Nelson talks about how he and his fellow pioneers thought the future would be a world of citizen programmers, how the Web omits much of the architecture underlying &lt;a href=&quot;http://www.xanadu.net/&quot;&gt;Xanadu&lt;/a&gt;, and his advice for breaking through the current limits to new conceptual ground.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;section class=&quot;learn-more&quot; role=&quot;menu&quot;&gt;&lt;h5&gt;Learn More&lt;/h5&gt;
&lt;a href=&quot;https://spectrum.ieee.org/tag/personal+computing&quot;&gt;personal computing&lt;/a&gt; &lt;a href=&quot;https://spectrum.ieee.org/tag/Xanadu&quot;&gt;Xanadu&lt;/a&gt; &lt;a href=&quot;https://spectrum.ieee.org/tag/hypertext&quot;&gt;hypertext&lt;/a&gt; &lt;a href=&quot;https://spectrum.ieee.org/tag/Ted+Nelson&quot;&gt;Ted Nelson&lt;/a&gt;&lt;/section&gt;</description>
<pubDate>Wed, 24 Jan 2018 13:40:28 +0000</pubDate>
<dc:creator>rbanffy</dc:creator>
<og:title>Ted Nelson on What Modern Programmers Can Learn From the Past</og:title>
<og:url>https://spectrum.ieee.org/video/geek-life/profiles/ted-nelson-on-what-modern-programmers-can-learn-from-the-past</og:url>
<og:description>The inventor of hypertext talks about the birth of personal computing, the web, and how to think beyond the currently possible</og:description>
<og:image>https://spectrum.ieee.org/image/MzAwODgwOQ.jpeg</og:image>
<og:type>video</og:type>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://spectrum.ieee.org/video/geek-life/profiles/ted-nelson-on-what-modern-programmers-can-learn-from-the-past</dc:identifier>
</item>
<item>
<title>ActivityPub: decentralized social networking protocol</title>
<link>https://www.w3.org/TR/2018/REC-activitypub-20180123/</link>
<guid isPermaLink="true" >https://www.w3.org/TR/2018/REC-activitypub-20180123/</guid>
<description>&lt;head&gt;&lt;meta charset=&quot;utf-8&quot;/&gt;&lt;meta name=&quot;generator&quot; content=&quot;ReSpec 19.0.1&quot;/&gt;&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;/&gt;&lt;title&gt;ActivityPub&lt;/title&gt;&lt;link rel=&quot;stylesheet&quot; href=&quot;https://www.w3.org/StyleSheets/TR/2016/W3C-REC&quot; type=&quot;text/css&quot;/&gt;&lt;link rel=&quot;canonical&quot; href=&quot;https://www.w3.org/TR/activitypub/&quot;/&gt;&lt;meta name=&quot;description&quot; content=&quot;The ActivityPub protocol is a decentralized social networking protocol based upon the [ActivityStreams] 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.&quot;/&gt;&lt;/head&gt;&lt;body aria-busy=&quot;false&quot; class=&quot;h-entry&quot; id=&quot;readabilityBody&quot; readability=&quot;206.1260919241&quot;&gt;

&lt;section id=&quot;abstract&quot; class=&quot;introductory&quot; readability=&quot;5.6949152542373&quot;&gt;&lt;h2 id=&quot;abstract-0&quot;&gt;Abstract&lt;/h2&gt;
&lt;p&gt;The ActivityPub protocol is a decentralized social networking protocol based upon the [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] 2.0 data format. It provides a client to server API for creating, updating and deleting content, as well as a federated server to server API for delivering notifications and content.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;sotd&quot; class=&quot;introductory&quot; readability=&quot;22.96533173939&quot;&gt;&lt;h2 id=&quot;status-of-this-document&quot;&gt;Status of This Document&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; publications and the latest revision of this technical report can be found in the &lt;a href=&quot;https://www.w3.org/TR/&quot;&gt;&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; technical reports index&lt;/a&gt; at https://www.w3.org/TR/.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;This document was published by the &lt;a href=&quot;https://www.w3.org/Social/WG&quot;&gt;Social Web Working Group&lt;/a&gt; as a Recommendation.&lt;/p&gt;
&lt;p&gt;All interested parties are invited to provide implementation and bug reports and other comments through the Working Group's &lt;a href=&quot;https://github.com/w3c/activitypub/issues&quot;&gt;Issue tracker&lt;/a&gt;. These will be discussed by the &lt;a href=&quot;http://www.w3.org/wiki/SocialCG&quot;&gt;Social Web Community Group&lt;/a&gt; and considered in any future versions of this specification.&lt;/p&gt;
&lt;p&gt;Please see the Working Group's &lt;a href=&quot;https://activitypub.rocks/implementation-report&quot;&gt;implementation report&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This document has been reviewed by &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Members, by software developers, and by other &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; groups and interested parties, and is endorsed by the Director as a &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Recommendation. It is a stable document and may be used as reference material or cited from another document. &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt;'s role in making the Recommendation is to draw attention to the specification and to promote its widespread deployment. This enhances the functionality and interoperability of the Web.&lt;/p&gt;
&lt;p&gt;This document was produced by a group operating under the &lt;a href=&quot;https://www.w3.org/Consortium/Patent-Policy/&quot;&gt;&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Patent Policy&lt;/a&gt;. &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; maintains a &lt;a href=&quot;https://www.w3.org/2004/01/pp-impl/72531/status&quot; rel=&quot;disclosure&quot;&gt;public list of any patent disclosures&lt;/a&gt; made in connection with the deliverables of the group; that page also includes instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains &lt;a href=&quot;https://www.w3.org/Consortium/Patent-Policy/#def-essential&quot;&gt;Essential Claim(s)&lt;/a&gt; must disclose the information in accordance with &lt;a href=&quot;https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure&quot;&gt;section 6 of the &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Patent Policy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This document is governed by the &lt;a id=&quot;w3c_process_revision&quot; href=&quot;https://www.w3.org/2017/Process-20170301/&quot;&gt;1 March 2017 &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Process Document&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;nav id=&quot;toc&quot;&gt;&lt;h2 class=&quot;introductory&quot; id=&quot;table-of-contents&quot;&gt;Table of Contents&lt;/h2&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#Overview&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;1.&lt;/span&gt; Overview&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#social-web-working-group&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;1.1&lt;/span&gt; Social Web Working Group&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#conformance&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;2.&lt;/span&gt; Conformance&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#specification-profiles&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;2.1&lt;/span&gt; Specification Profiles&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#obj&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.&lt;/span&gt; Objects&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#obj-id&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.1&lt;/span&gt; Object Identifiers&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#retrieving-objects&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.2&lt;/span&gt; Retrieving objects&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#source-property&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.3&lt;/span&gt; The source property&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actors&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;4.&lt;/span&gt; Actors&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actor-objects&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;4.1&lt;/span&gt; &lt;em&gt;Actor&lt;/em&gt; objects&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#collections&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.&lt;/span&gt; Collections&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.1&lt;/span&gt; Outbox&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.2&lt;/span&gt; Inbox&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#followers&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.3&lt;/span&gt; Followers Collection&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#following&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.4&lt;/span&gt; Following Collection&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#liked&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.5&lt;/span&gt; Liked Collection&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#public-addressing&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.6&lt;/span&gt; Public Addressing&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#likes&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.7&lt;/span&gt; Likes Collection&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#shares&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.8&lt;/span&gt; Shares Collection&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-to-server-interactions&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.&lt;/span&gt; Client to Server Interactions&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-addressing&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.1&lt;/span&gt; Client Addressing&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#create-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.2&lt;/span&gt; Create Activity&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#object-without-create&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.2.1&lt;/span&gt; Object creation without a Create Activity&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#update-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.3&lt;/span&gt; Update Activity&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#partial-updates&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.3.1&lt;/span&gt; Partial Updates&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delete-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.4&lt;/span&gt; Delete Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#follow-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.5&lt;/span&gt; Follow Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#add-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.6&lt;/span&gt; Add Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#remove-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.7&lt;/span&gt; Remove Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#like-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.8&lt;/span&gt; Like Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#block-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.9&lt;/span&gt; Block Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#undo-activity-outbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.10&lt;/span&gt; Undo Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-to-server-outbox-delivery&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.11&lt;/span&gt; Delivery&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#uploading-media&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.12&lt;/span&gt; Uploading Media&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#server-to-server-interactions&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.&lt;/span&gt; Server to Server Interactions&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delivery&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1&lt;/span&gt; Delivery&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox-delivery&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1.1&lt;/span&gt; Outbox Delivery Requirements for Server to Server&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox-forwarding&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1.2&lt;/span&gt; Forwarding from Inbox&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#shared-inbox-delivery&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1.3&lt;/span&gt; Shared Inbox Delivery&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#create-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.2&lt;/span&gt; Create Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#update-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.3&lt;/span&gt; Update Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delete-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.4&lt;/span&gt; Delete Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#follow-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.5&lt;/span&gt; Follow Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#accept-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.6&lt;/span&gt; Accept Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#reject-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.7&lt;/span&gt; Reject Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#add-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.8&lt;/span&gt; Add Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#remove-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.9&lt;/span&gt; Remove Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#like-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.10&lt;/span&gt; Like Activity&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#announce-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.11&lt;/span&gt; Announce Activity (sharing)&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#undo-activity-inbox&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.12&lt;/span&gt; Undo Activity&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#i18n-concerns&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;A.&lt;/span&gt; Internationalization&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-considerations&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.&lt;/span&gt; Security Considerations&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#authorization&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.1&lt;/span&gt; Authentication and Authorization&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-verification&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.2&lt;/span&gt; Verification&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-localhost&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.3&lt;/span&gt; Accessing localhost URIs&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-uri-schemes&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.4&lt;/span&gt; URI Schemes&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-recursive-objects&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.5&lt;/span&gt; Recursive Objects&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-spam&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.6&lt;/span&gt; Spam&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-federation-dos&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.7&lt;/span&gt; Federation denial-of-service&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-c2s-ratelimiting&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.8&lt;/span&gt; Client-to-server ratelimiting&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-c2s-response-dos&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.9&lt;/span&gt; Client-to-server response denial-of-service&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-sanitizing-content&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.10&lt;/span&gt; Sanitizing Content&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-not-displaying-bto-bcc&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.11&lt;/span&gt; Not displaying bto and bcc properties&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#acknowledgements&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;C.&lt;/span&gt; Acknowledgements&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#references&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;D.&lt;/span&gt; References&lt;/a&gt;
&lt;ol class=&quot;toc&quot;&gt;&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#normative-references&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;D.1&lt;/span&gt; Normative references&lt;/a&gt;&lt;/li&gt;
&lt;li class=&quot;tocline&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#informative-references&quot; class=&quot;tocxref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;D.2&lt;/span&gt; Informative references&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/nav&gt;&lt;section id=&quot;Overview&quot; readability=&quot;138.28332465504&quot;&gt;&lt;h2 id=&quot;x1-overview&quot;&gt;&lt;span class=&quot;secno&quot;&gt;1.&lt;/span&gt; Overview&lt;/h2&gt;
&lt;p&gt;ActivityPub provides two layers:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;A server to server federation protocol&lt;/strong&gt; (so decentralized websites can share information)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;A client to server protocol&lt;/strong&gt; (so users, including real-world users, bots, and other automated processes, can communicate with ActivityPub using their accounts on servers, from a phone or desktop or web application or whatever)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;ActivityPub implementations can implement just one of these things or both of them. However, once you've implemented one, it isn't too many steps to implement the other, and there are a lot of benefits to both (making your website part of the decentralized social web, and being able to use clients and client libraries that work across a wide variety of social websites).&lt;/p&gt;
&lt;p&gt;In ActivityPub, a user is represented by &quot;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actors&quot;&gt;actors&lt;/a&gt;&quot; via the user's accounts on servers. User's accounts on different servers correspond to different actors. Every Actor has:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;An &lt;code&gt;inbox&lt;/code&gt;:&lt;/strong&gt; How they get messages from the world&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;An &lt;code&gt;outbox&lt;/code&gt;:&lt;/strong&gt; How they send messages to others&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/illustration/tutorial-1.png&quot; alt=&quot;Actor with inbox and outbox&quot;/&gt;&lt;/p&gt;
&lt;p&gt;These are endpoints, or really, just URLs which are listed in the ActivityPub actor's ActivityStreams description. (More on ActivityStreams later).&lt;/p&gt;
&lt;p&gt;Here's an example of the record of our friend Alyssa P. Hacker:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;20&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 1&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;highlight json hljs&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Person&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Alyssa P. Hacker&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;preferredUsername&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;alyssa&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;summary&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Lisp enthusiast hailing from MIT&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;inbox&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/inbox/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;outbox&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/outbox/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;followers&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/followers/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;following&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/following/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;liked&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/liked/&quot;&lt;/span&gt;}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ActivityPub uses [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] for its vocabulary. This is pretty great because ActivityStreams includes all the common terms you need to represent all the activities and content flowing around a social network. It's likely that ActivityStreams already includes all the vocabulary you need, but even if it doesn't, ActivityStreams can be extended via [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-JSON-LD&quot;&gt;JSON-LD&lt;/a&gt;&lt;/cite&gt;]. If you know what JSON-LD is, you can take advantage of the cool linked data approaches provided by JSON-LD. If you don't, don't worry, JSON-LD documents and ActivityStreams can be understood as plain old simple JSON. (If you're going to add extensions, that's the point at which JSON-LD really helps you out).&lt;/p&gt;
&lt;p&gt;So, okay. Alyssa wants to talk to her friends, and her friends want to talk to her! Luckily these &quot;inbox&quot; and &quot;outbox&quot; things can help us out. They both behave differently for GET and POST. Let's see how that works:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/illustration/tutorial-2.png&quot; alt=&quot;Actor with messages flowing from rest of world to inbox and from outbox to rest of world&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Hey nice, so just as a recap:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;You can POST to someone's inbox to send them a message (server-to-server / federation only... this &lt;em&gt;is&lt;/em&gt; federation!)&lt;/li&gt;
&lt;li&gt;You can GET from your inbox to read your latest messages (client-to-server; this is like reading your social network stream)&lt;/li&gt;
&lt;li&gt;You can POST to your outbox to send messages to the world (client-to-server)&lt;/li&gt;
&lt;li&gt;You can GET from someone's outbox to see what messages they've posted (or at least the ones you're authorized to see). (client-to-server and/or server-to-server)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Of course, if that last one (GET'ing from someone's outbox) was the only way to see what people have sent, this wouldn't be a very efficient federation protocol! Indeed, federation happens usually by servers posting messages sent by actors to actors on other servers' inboxes.&lt;/p&gt;
&lt;p&gt;Let's see an example! Let's say Alyssa wants to catch up with her friend, Ben Bitdiddle. She lent him a book recently and she wants to make sure he returns it to her. Here's the message she composes, as an ActivityStreams object:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;14&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 2&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;highlight json hljs&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Note&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://chatty.example/ben/&quot;&lt;/span&gt;],
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;attributedTo&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Say, did you finish reading that book I lent you?&quot;&lt;/span&gt;}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is a note addressed to Ben. She POSTs it to her outbox.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/illustration/tutorial-3.png&quot; alt=&quot;Actor posting message to outbox&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Since this is a non-activity object, the server recognizes that this is an object being newly created, and does the courtesy of wrapping it in a Create activity. (Activities sent around in ActivityPub generally follow the pattern of some activity by some actor being taken on some object. In this case the activity is a Create of a Note object, posted by a Person).&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;20&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 3&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;highlight json hljs&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Create&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/posts/a29a6843-9feb-4c74-a7f7-081b9c9201d3&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://chatty.example/ben/&quot;&lt;/span&gt;],
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;actor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;object&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Note&quot;&lt;/span&gt;,
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/posts/49e2d03d-b53a-4c4c-a95c-94a6abf45a19&quot;&lt;/span&gt;,
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;attributedTo&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/&quot;&lt;/span&gt;,
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://chatty.example/ben/&quot;&lt;/span&gt;],
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Say, did you finish reading that book I lent you?&quot;&lt;/span&gt;}}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Alyssa's server looks up Ben's ActivityStreams actor object, finds his inbox endpoint, and POSTs her object to his inbox.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/illustration/tutorial-4.png&quot; alt=&quot;Server posting to remote actor's inbox&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Technically these are two separate steps... one is client to server communication, and one is server to server communication (federation). But, since we're using them both in this example, we can abstractly think of this as being a streamlined submission from outbox to inbox:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/illustration/tutorial-5.png&quot; alt=&quot;Note flowing from one actor's outbox to other actor's inbox&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Cool! A while later, Alyssa checks what new messages she's gotten. Her phone polls her inbox via GET, and amongst a bunch of cat videos posted by friends and photos of her nephew posted by her sister, she sees the following:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;24&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 4&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;highlight json hljs&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{&quot;@context&quot;: &quot;https://www.w3.org/ns/activitystreams&quot;,
 &quot;type&quot;: &quot;Create&quot;,
 &quot;id&quot;: &quot;https://chatty.example/ben/p/51086&quot;,
 &quot;to&quot;: [&quot;https://social.example/alyssa/&quot;],
 &quot;actor&quot;: &quot;https://chatty.example/ben/&quot;,
 &quot;object&quot;: {&quot;type&quot;: &quot;Note&quot;,
            &quot;id&quot;: &quot;https://chatty.example/ben/p/51085&quot;,
            &quot;attributedTo&quot;: &quot;https://chatty.example/ben/&quot;,
            &quot;to&quot;: [&quot;https://social.example/alyssa/&quot;],
            &quot;inReplyTo&quot;: &quot;https://social.example/alyssa/posts/49e2d03d-b53a-4c4c-a95c-94a6abf45a19&quot;,
            &quot;content&quot;: &quot;&amp;lt;p&amp;gt;Argh, yeah, sorry, I'll get it back to you tomorrow.&amp;lt;/p&amp;gt;
                        &amp;lt;p&amp;gt;I was reviewing the section on register machines,
                           since it's been a while since I wrote one.&amp;lt;/p&amp;gt;&quot;}}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Alyssa is relieved, and likes Ben's post:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;14&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 5&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;highlight json hljs&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Like&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/posts/5312e10e-5110-42e5-a09b-934882b3ecec&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://chatty.example/ben/&quot;&lt;/span&gt;],
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;actor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;object&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://chatty.example/ben/p/51086&quot;&lt;/span&gt;}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;She POSTs this message to her outbox. (Since it's an activity, her server knows it doesn't need to wrap it in a Create object).&lt;/p&gt;
&lt;p&gt;Feeling happy about things, she decides to post a public message to her followers. Soon the following message is blasted to all the members of her followers collection, and since it has the special Public group addressed, is generally readable by anyone.&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;21&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 6&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;highlight json hljs&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Create&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/posts/9282e9cc-14d0-42b3-a758-d6aeca6c876b&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/followers/&quot;&lt;/span&gt;,
        &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams#Public&quot;&lt;/span&gt;],
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;actor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/&quot;&lt;/span&gt;,
 &lt;span class=&quot;hljs-attr&quot;&gt;&quot;object&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Note&quot;&lt;/span&gt;,
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/posts/d18c55d4-8a63-4181-9745-4e6cf7938fa1&quot;&lt;/span&gt;,
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;attributedTo&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/&quot;&lt;/span&gt;,
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://social.example/alyssa/followers/&quot;&lt;/span&gt;,
                   &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams#Public&quot;&lt;/span&gt;],
            &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Lending books to friends is nice.  Getting them back is even nicer! :)&quot;&lt;/span&gt;}}
&lt;/pre&gt;&lt;/div&gt;
&lt;section id=&quot;social-web-working-group&quot; inlist=&quot;&quot; rel=&quot;schema:hasPart&quot; resource=&quot;#social-web-working-group&quot; readability=&quot;1.7234042553191&quot;&gt;&lt;h3 property=&quot;schema:name&quot; id=&quot;x1-1-social-web-working-group&quot;&gt;&lt;span class=&quot;secno&quot;&gt;1.1&lt;/span&gt; Social Web Working Group&lt;/h3&gt;
&lt;div datatype=&quot;rdf:HTML&quot; property=&quot;schema:description&quot; readability=&quot;7.6126482213439&quot;&gt;
&lt;p&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#Overview&quot;&gt;ActivityPub&lt;/a&gt; is one of several related specifications being produced by the Social Web Working Group. Implementers interested in alternative approaches and complementary protocols should review [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-Micropub&quot;&gt;Micropub&lt;/a&gt;&lt;/cite&gt;] and the overview document [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-Social-Web-Protocols&quot;&gt;Social-Web-Protocols&lt;/a&gt;&lt;/cite&gt;].&lt;/p&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;conformance&quot; readability=&quot;21.418648648649&quot;&gt;&lt;h2 id=&quot;x2-conformance&quot;&gt;&lt;span class=&quot;secno&quot;&gt;2.&lt;/span&gt; Conformance&lt;/h2&gt;
&lt;p&gt;As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.&lt;/p&gt;
&lt;p id=&quot;respecRFC2119&quot;&gt;The key words &lt;em class=&quot;rfc2119&quot;&gt;MAY&lt;/em&gt;, &lt;em class=&quot;rfc2119&quot;&gt;MUST&lt;/em&gt;, &lt;em class=&quot;rfc2119&quot;&gt;MUST NOT&lt;/em&gt;, &lt;em class=&quot;rfc2119&quot;&gt;SHOULD&lt;/em&gt;, and &lt;em class=&quot;rfc2119&quot;&gt;SHOULD NOT&lt;/em&gt; are to be interpreted as described in [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC2119&quot;&gt;RFC2119&lt;/a&gt;&lt;/cite&gt;].&lt;/p&gt;
&lt;section id=&quot;specification-profiles&quot; readability=&quot;15&quot;&gt;&lt;h3 id=&quot;x2-1-specification-profiles&quot;&gt;&lt;span class=&quot;secno&quot;&gt;2.1&lt;/span&gt; Specification Profiles&lt;/h3&gt;
&lt;p&gt;This specification defines two closely related and interacting protocols:&lt;/p&gt;
&lt;dl&gt;&lt;dt&gt;A client to server protocol, or &quot;Social API&quot;&lt;/dt&gt;
&lt;dd&gt;This protocol permits a client to act &lt;em&gt;on behalf&lt;/em&gt; of a user. For example, this protocol is used by a mobile phone application to interact with a social stream of the user's actor.&lt;/dd&gt;
&lt;dt&gt;A server to server protocol, or &quot;Federation Protocol&quot;&lt;/dt&gt;
&lt;dd&gt;This protocol is used to distribute activities between actors on different servers, tying them into the same social graph.&lt;/dd&gt;
&lt;/dl&gt;&lt;p&gt;The ActivityPub specification is designed so that once either of these protocols are implemented, supporting the other is of very little additional effort. However, servers may still implement one without the other. This gives three conformance classes:&lt;/p&gt;
&lt;dl&gt;&lt;dt&gt;ActivityPub conformant Client&lt;/dt&gt;
&lt;dd&gt;This designation applies to any implementation of the entirety of the client portion of the client to server protocol.&lt;/dd&gt;
&lt;dt&gt;ActivityPub conformant Server&lt;/dt&gt;
&lt;dd&gt;This designation applies to any implementation of the entirety of the server portion of the client to server protocol.&lt;/dd&gt;
&lt;dt&gt;ActivityPub conformant Federated Server&lt;/dt&gt;
&lt;dd&gt;This designation applies to any implementation of the entirety of the federation protocols.&lt;/dd&gt;
&lt;/dl&gt;&lt;p&gt;It is called out whenever a portion of the specification only applies to implementation of the federation protocol. In addition, whenever requirements are specified, it is called out whether they apply to the client or server (for the client-to-server protocol) or whether referring to a sending or receiving server in the server-to-server protocol.&lt;/p&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;obj&quot; readability=&quot;49.404132841328&quot;&gt;&lt;h2 id=&quot;x3-objects&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.&lt;/span&gt; Objects&lt;/h2&gt;
&lt;p&gt;Objects are the core concept around which both [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] and ActivityPub are built. Objects are often wrapped in Activities and are contained in streams of Collections, which are themselves subclasses of Objects. See the [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-Activity-Vocabulary&quot;&gt;Activity-Vocabulary&lt;/a&gt;&lt;/cite&gt;] document, particularly the &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#types&quot;&gt;Core Classes&lt;/a&gt;; ActivityPub follows the mapping of this vocabulary very closely.&lt;/p&gt;
&lt;p&gt;ActivityPub defines some terms in addition to those provided by ActivityStreams. These terms are provided in the ActivityPub &lt;a href=&quot;http://www.w3.org/TR/json-ld/#the-context&quot;&gt;JSON-LD context&lt;/a&gt; at &lt;code&gt;https://www.w3.org/ns/activitystreams&lt;/code&gt;. Implementers &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; include the ActivityPub context in their object definitions. Implementers &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; include additional context as appropriate.&lt;/p&gt;
&lt;p&gt;ActivityPub shares the same &lt;a href=&quot;https://www.w3.org/TR/activitystreams-core/#urls&quot;&gt;URI / IRI conventions as in ActivityStreams&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Servers &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; validate the content they receive to avoid content spoofing attacks. (A server should do something at least as robust as checking that the object appears as received at its origin, but mechanisms such as checking signatures would be better if available). No particular mechanism for verification is authoritatively specified by this document, but please see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-considerations&quot;&gt;Security Considerations&lt;/a&gt; for some suggestions and good practices.&lt;/p&gt;
&lt;div class=&quot;informative&quot; readability=&quot;22&quot;&gt;As an example, if example.com receives the activity
&lt;div class=&quot;example&quot; readability=&quot;19&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 7&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Like&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;actor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.net/~mallory&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://hatchat.example/sarah/&quot;&lt;/span&gt;,
         &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.com/peeps/john/&quot;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;object&quot;&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@language&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;},
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.org/~alice/note/23&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Note&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;attributedTo&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.org/~alice&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;I'm a goat&quot;&lt;/span&gt;
  }
}
&lt;/pre&gt;&lt;/div&gt;
it should dereference the &lt;code&gt;id&lt;/code&gt; both to ensure that it exists and is a valid object, and that it is not misrepresenting the object. (In this example, Mallory could be spoofing an object allegedly posted by Alice).&lt;/div&gt;
&lt;section id=&quot;obj-id&quot; readability=&quot;16.798418972332&quot;&gt;&lt;h3 id=&quot;x3-1-object-identifiers&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.1&lt;/span&gt; Object Identifiers&lt;/h3&gt;
&lt;p&gt;All Objects in [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] should have unique global identifiers. ActivityPub extends this requirement; all objects distributed by the ActivityPub protocol &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; have unique global identifiers, unless they are intentionally transient (short lived activities that are not intended to be able to be looked up, such as some kinds of chat messages or game notifications). These identifiers must fall into one of the following groups:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Publicly dereferencable URIs, such as HTTPS URIs, with their authority belonging to that of their originating server. (Publicly facing content &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; use HTTPS URIs).&lt;/li&gt;
&lt;li&gt;An ID explicitly specified as the JSON &lt;code&gt;null&lt;/code&gt; object, which implies an anonymous object (a part of its parent context)&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Identifiers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be provided for activities posted in server to server communication, unless the activity is intentionally transient. However, for client to server communication, a server receiving an object posted to the outbox with no specified &lt;code&gt;id&lt;/code&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; allocate an object ID in the actor's namespace and attach it to the posted object.&lt;/p&gt;
&lt;p&gt;All objects have the following properties:&lt;/p&gt;
&lt;dl&gt;&lt;dt&gt;id&lt;/dt&gt;
&lt;dd&gt;The object's unique global identifier (unless the object is transient, in which case the &lt;code&gt;id&lt;/code&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be omitted).&lt;/dd&gt;
&lt;dt&gt;type&lt;/dt&gt;
&lt;dd&gt;The type of the object.&lt;/dd&gt;
&lt;/dl&gt;&lt;/section&gt;&lt;section id=&quot;retrieving-objects&quot; readability=&quot;19.390070921986&quot;&gt;&lt;h3 id=&quot;x3-2-retrieving-objects&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.2&lt;/span&gt; Retrieving objects&lt;/h3&gt;
&lt;p&gt;The HTTP GET method may be dereferenced against an object's &lt;code&gt;id&lt;/code&gt; property to retrieve the activity. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; use HTTP content negotiation as defined in [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC7231&quot;&gt;RFC7231&lt;/a&gt;&lt;/cite&gt;] to select the type of data to return in response to a request, but &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; present the ActivityStreams object representation in response to &lt;code&gt;application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/code&gt;, and &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; also present the ActivityStreams representation in response to &lt;code&gt;application/activity+json&lt;/code&gt; as well. The client &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; specify an &lt;code&gt;Accept&lt;/code&gt; header with the &lt;code&gt;application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/code&gt; media type in order to retrieve the activity.&lt;/p&gt;
&lt;p&gt;Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; implement other behavior for requests which do not comply with the above requirement. (For example, servers may implement additional legacy protocols, or may use the same URI for both HTML and ActivityStreams representations of a resource).&lt;/p&gt;
&lt;p&gt;Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; require authorization as specified in &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#authorization&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.1&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Authentication and Authorization&lt;/span&gt;&lt;/a&gt;, and may additionally implement their own authorization rules. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; fail requests which do not pass their authorization checks with the appropriate HTTP error code, or the 403 Forbidden error code where the existence of the object is considered private. An origin server which does not wish to disclose the existence of a private target &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; instead respond with a status code of 404 Not Found.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;source-property&quot; readability=&quot;18.77240461402&quot;&gt;&lt;h3 id=&quot;x3-3-the-source-property&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.3&lt;/span&gt; The source property&lt;/h3&gt;
&lt;p&gt;In addition to all the properties defined by the [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-Activity-Vocabulary&quot;&gt;Activity-Vocabulary&lt;/a&gt;&lt;/cite&gt;], ActivityPub extends the &lt;code&gt;Object&lt;/code&gt; by supplying the &lt;code&gt;source&lt;/code&gt; property. The &lt;code&gt;source&lt;/code&gt; property is intended to convey some sort of source from which the &lt;code&gt;content&lt;/code&gt; markup was derived, as a form of provenance, or to support future editing by clients. In general, clients do the conversion from &lt;code&gt;source&lt;/code&gt; to &lt;code&gt;content&lt;/code&gt;, not the other way around.&lt;/p&gt;
&lt;p&gt;The value of &lt;code&gt;source&lt;/code&gt; is itself an object which uses its own &lt;code&gt;content&lt;/code&gt; and &lt;code&gt;mediaType&lt;/code&gt; fields to supply source information.&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;15&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 8&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
               {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@language&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;}],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Note&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;http://postparty.example/p/2415&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;&amp;lt;p&amp;gt;I &amp;lt;em&amp;gt;really&amp;lt;/em&amp;gt; like strawberries!&amp;lt;/p&amp;gt;&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;source&quot;&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;I *really* like strawberries!&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;mediaType&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;text/markdown&quot;&lt;/span&gt;}
}
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;note&quot; readability=&quot;16.904561403509&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;span&gt;: What to do when clients can't meaningfully handle a mediaType?&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;&quot; readability=&quot;24.852507374631&quot;&gt;
&lt;p&gt;In general, it's best to let a user edit their original post in the same source format they originally composed it in. But not all clients can reliably provide a nice interface for all source types, and since clients are expected to do the conversion from &lt;code&gt;source&lt;/code&gt; to &lt;code&gt;content&lt;/code&gt;, some clients may work with a media type that another client does not know how to work with. While a client could feasibly provide the &lt;code&gt;content&lt;/code&gt; markup to be edited and ignore the source, this means that the user will lose the more desirable form of the original &lt;code&gt;source&lt;/code&gt; in any future revisions. A client doing so should thus provide a minimally obtrusive warning cautioning that the original source format is not understood and is thus being ignored.&lt;/p&gt;
&lt;p&gt;For example, Alyssa P. Hacker likes to post to her ActivityPub powered blog via an Emacs client she has written, leveraging &lt;a href=&quot;http://orgmode.org/&quot;&gt;Org mode&lt;/a&gt;. Later she switches to editing on her phone's client, which has no idea what &lt;code&gt;text/x-org&lt;/code&gt; is or how to render it to HTML, so it provides a text box to edit the original &lt;code&gt;content&lt;/code&gt; instead. A helpful warning displays above the edit area saying, &quot;This was originally written in another markup language we don't know how to handle. If you edit, you'll lose your original source!&quot; Alyssa decides the small typo fix isn't worth losing her nice org-mode markup and decides to make the update when she gets home.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;actors&quot; readability=&quot;26.843860238535&quot;&gt;&lt;h2 id=&quot;x4-actors&quot;&gt;&lt;span class=&quot;secno&quot;&gt;4.&lt;/span&gt; Actors&lt;/h2&gt;
&lt;p&gt;ActivityPub actors are generally one of the &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#actor-types&quot;&gt;ActivityStreams Actor Types&lt;/a&gt;, but they don't have to be. For example, a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-profile&quot;&gt;Profile&lt;/a&gt; object might be used as an actor, or a type from an ActivityStreams extension. Actors are &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#retrieving-objects&quot;&gt;retrieved&lt;/a&gt; like any other Object in ActivityPub. Like other ActivityStreams objects, actors have an &lt;code&gt;id&lt;/code&gt;, which is a URI. When entered directly into a user interface (for example on a login form), it is desirable to support simplified naming. For this purpose, ID normalization &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; be performed as follows:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;If the entered ID is a valid URI, then it is to be used directly.&lt;/li&gt;
&lt;li&gt;If it appears that the user neglected to add a scheme for a URI that would otherwise be considered valid, such as &lt;code&gt;example.org/alice/&lt;/code&gt;, clients &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; attempt to provide a default scheme, preferably &lt;code&gt;https&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Otherwise, the entered value should be considered invalid.&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Once the actor's URI has been identified, it should be dereferenced.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;17&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;ActivityPub does not dictate a specific relationship between &quot;users&quot; and Actors; many configurations are possible. There may be multiple human users or organizations controlling an Actor, or likewise one human or organization may control multiple Actors. Similarly, an Actor may represent a piece of software, like a bot, or an automated process. More detailed &quot;user&quot; modelling, for example linking together of Actors which are controlled by the same entity, or allowing one Actor to be presented through multiple alternate profiles or aspects, are at the discretion of the implementation.&lt;/p&gt;
&lt;/div&gt;
&lt;section id=&quot;actor-objects&quot; readability=&quot;25.774870290999&quot;&gt;&lt;h3 id=&quot;x4-1-actor-objects&quot;&gt;&lt;span class=&quot;secno&quot;&gt;4.1&lt;/span&gt; &lt;em&gt;Actor&lt;/em&gt; objects&lt;/h3&gt;
&lt;p&gt;Actor objects &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; have, in addition to the properties mandated by &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#obj-id&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.1&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Object Identifiers&lt;/span&gt;&lt;/a&gt;, the following properties:&lt;/p&gt;
&lt;dl&gt;&lt;dt id=&quot;inbox-property&quot;&gt;inbox&lt;/dt&gt;
&lt;dd&gt;A reference to an [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; comprised of all the messages received by the actor; see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.2&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Inbox&lt;/span&gt;&lt;/a&gt;.&lt;/dd&gt;
&lt;dt id=&quot;outbox-property&quot;&gt;outbox&lt;/dt&gt;
&lt;dd&gt;An [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; comprised of all the messages produced by the actor; see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.1&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Outbox&lt;/span&gt;&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;&lt;p&gt;Implementations &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt;, in addition, provide the following properties:&lt;/p&gt;
&lt;dl&gt;&lt;dt id=&quot;following-property&quot;&gt;following&lt;/dt&gt;
&lt;dd&gt;A link to an [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] collection of the actors that this actor is following; see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#following&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.4&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Following Collection&lt;/span&gt;&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;followers-property&quot;&gt;followers&lt;/dt&gt;
&lt;dd&gt;A link to an [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] collection of the actors that follow this actor; see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#followers&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.3&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Followers Collection&lt;/span&gt;&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;&lt;p&gt;Implementations &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; provide the following properties:&lt;/p&gt;
&lt;dl&gt;&lt;dt id=&quot;liked-property&quot;&gt;liked&lt;/dt&gt;
&lt;dd&gt;A link to an [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] collection of objects this actor has liked; see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#liked&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.5&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Liked Collection&lt;/span&gt;&lt;/a&gt;.&lt;/dd&gt;
&lt;/dl&gt;&lt;div class=&quot;example&quot; readability=&quot;22&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 9&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
               {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@language&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;ja&quot;&lt;/span&gt;}],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Person&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://kenzoishii.example.com/&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;following&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://kenzoishii.example.com/following.json&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;followers&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://kenzoishii.example.com/followers.json&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;liked&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://kenzoishii.example.com/liked.json&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;inbox&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://kenzoishii.example.com/inbox.json&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;outbox&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://kenzoishii.example.com/feed.json&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;preferredUsername&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;kenzoishii&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;石井健蔵&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;summary&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;この方はただの例です&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;icon&quot;&lt;/span&gt;: [
    &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://kenzoishii.example.com/image/165987aklre4&quot;&lt;/span&gt;
  ]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Implementations &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt;, in addition, provide the following properties:&lt;/p&gt;
&lt;dl&gt;&lt;dt id=&quot;streams-property&quot;&gt;streams&lt;/dt&gt;
&lt;dd&gt;A list of supplementary Collections which may be of interest.&lt;/dd&gt;
&lt;dt id=&quot;preferredUsername&quot;&gt;preferredUsername&lt;/dt&gt;
&lt;dd&gt;A short username which may be used to refer to the actor, with no uniqueness guarantees.&lt;/dd&gt;
&lt;dt id=&quot;endpoints&quot;&gt;endpoints&lt;/dt&gt;
&lt;dd&gt;A json object which maps additional (typically server/domain-wide) endpoints which may be useful either for this actor or someone referencing this actor. This mapping may be nested inside the actor document as the value or may be a link to a JSON-LD document with these properties.&lt;/dd&gt;
&lt;/dl&gt;&lt;p&gt;The &lt;code&gt;endpoints&lt;/code&gt; mapping &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; include the following properties:&lt;/p&gt;
&lt;dl&gt;&lt;dt id=&quot;proxyUrl&quot;&gt;proxyUrl&lt;/dt&gt;
&lt;dd&gt;Endpoint URI so this actor's clients may access remote ActivityStreams objects which require authentication to access. To use this endpoint, the client posts an &lt;code&gt;x-www-form-urlencoded&lt;/code&gt; &lt;code&gt;id&lt;/code&gt; parameter with the value being the &lt;code&gt;id&lt;/code&gt; of the requested ActivityStreams object.&lt;/dd&gt;
&lt;dt id=&quot;oauthAuthorizationEndpoint&quot;&gt;oauthAuthorizationEndpoint&lt;/dt&gt;
&lt;dd&gt;If OAuth 2.0 bearer tokens [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC6749&quot;&gt;RFC6749&lt;/a&gt;&lt;/cite&gt;] [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC6750&quot;&gt;RFC6750&lt;/a&gt;&lt;/cite&gt;] are being used for authenticating &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-to-server-interactions&quot;&gt;client to server interactions&lt;/a&gt;, this endpoint specifies a URI at which a browser-authenticated user may obtain a new authorization grant.&lt;/dd&gt;
&lt;dt id=&quot;oauthTokenEndpoint&quot;&gt;oauthTokenEndpoint&lt;/dt&gt;
&lt;dd&gt;If OAuth 2.0 bearer tokens [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC6749&quot;&gt;RFC6749&lt;/a&gt;&lt;/cite&gt;] [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC6750&quot;&gt;RFC6750&lt;/a&gt;&lt;/cite&gt;] are being used for authenticating &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-to-server-interactions&quot;&gt;client to server interactions&lt;/a&gt;, this endpoint specifies a URI at which a client may acquire an access token.&lt;/dd&gt;
&lt;dt id=&quot;provideClientKey&quot;&gt;provideClientKey&lt;/dt&gt;
&lt;dd&gt;If Linked Data Signatures and HTTP Signatures are being used for authentication and authorization, this endpoint specifies a URI at which browser-authenticated users may authorize a client's public key for &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-to-server-interactions&quot;&gt;client to server interactions&lt;/a&gt;.&lt;/dd&gt;
&lt;dt id=&quot;signClientKey&quot;&gt;signClientKey&lt;/dt&gt;
&lt;dd&gt;If Linked Data Signatures and HTTP Signatures are being used for authentication and authorization, this endpoint specifies a URI at which a client key may be signed by the actor's key for a time window to act on behalf of the actor in interacting with foreign servers.&lt;/dd&gt;
&lt;dt id=&quot;sharedInbox&quot;&gt;sharedInbox&lt;/dt&gt;
&lt;dd&gt;An optional endpoint &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#shared-inbox-delivery&quot;&gt;used for wide delivery of publicly addressed activities and activities sent to followers&lt;/a&gt;. &lt;code&gt;sharedInbox&lt;/code&gt; endpoints &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; also be publicly readable &lt;code&gt;OrderedCollection&lt;/code&gt; objects containing objects addressed to the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#public-addressing&quot;&gt;Public&lt;/a&gt; special collection. Reading from the &lt;code&gt;sharedInbox&lt;/code&gt; endpoint &lt;em class=&quot;rfc2119&quot; title=&quot;MUST NOT&quot;&gt;MUST NOT&lt;/em&gt; present objects which are not addressed to the &lt;code&gt;Public&lt;/code&gt; endpoint.&lt;/dd&gt;
&lt;/dl&gt;&lt;div class=&quot;note&quot; readability=&quot;7.3040069686411&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;&quot; id=&quot;as2-actor-properties&quot; readability=&quot;9.7363796133568&quot;&gt;
&lt;p&gt;As the upstream vocabulary for ActivityPub, any applicable [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] property may be used on ActivityPub Actors. Some ActivityStreams properties are particularly worth highlighting to demonstrate how they are used in ActivityPub implementations.&lt;/p&gt;
&lt;dl&gt;&lt;dt id=&quot;url-property&quot;&gt;url&lt;/dt&gt;
&lt;dd&gt;A link to the actor's &quot;profile web page&quot;, if not equal to the value of &lt;code&gt;id&lt;/code&gt;.&lt;/dd&gt;
&lt;dt id=&quot;name-property&quot;&gt;name&lt;/dt&gt;
&lt;dd&gt;The preferred &quot;nickname&quot; or &quot;display name&quot; of the actor.&lt;/dd&gt;
&lt;dt id=&quot;summary-property&quot;&gt;summary&lt;/dt&gt;
&lt;dd&gt;A quick summary or bio by the user about themselves.&lt;/dd&gt;
&lt;dt id=&quot;icon-property&quot;&gt;icon&lt;/dt&gt;
&lt;dd&gt;A link to an image or an Image object which represents the user's profile picture (this may be a thumbnail).&lt;/dd&gt;
&lt;/dl&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;collections&quot; readability=&quot;50.94918303103&quot;&gt;&lt;h2 id=&quot;x5-collections&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.&lt;/span&gt; Collections&lt;/h2&gt;
&lt;p&gt;[&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] defines the collection concept; ActivityPub defines several collections with special behavior. Note that ActivityPub makes use of &lt;a href=&quot;https://www.w3.org/TR/activitystreams-core/#paging&quot;&gt;ActivityStreams paging&lt;/a&gt; to traverse large sets of objects.&lt;/p&gt;
&lt;p&gt;Note that some of these collections are specified to be of type &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; specifically, while others are permitted to be either a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-collection&quot;&gt;&lt;code&gt;Collection&lt;/code&gt;&lt;/a&gt; or an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt;. An &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be presented consistently in reverse chronological order.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;17&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;&quot;&gt;What property is used to determine the reverse chronological order is intentionally left as an implementation detail. For example, many SQL-style databases use an incrementing integer as an identifier, which can be reasonably used for handling insertion order in most cases. In other databases, an insertion time timestamp may be preferred. What is used isn't important, but the ordering of elements must remain intact, with newer items first. A property which changes regularly, such a &quot;last updated&quot; timestamp, should not be used.&lt;/p&gt;
&lt;/div&gt;
&lt;section id=&quot;outbox&quot; readability=&quot;12.628571428571&quot;&gt;&lt;h3 id=&quot;x5-1-outbox&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.1&lt;/span&gt; Outbox&lt;/h3&gt;
&lt;p&gt;The outbox is discovered through the &lt;code&gt;outbox&lt;/code&gt; property of an &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actors&quot;&gt;actor's&lt;/a&gt; profile. The &lt;code&gt;outbox&lt;/code&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The outbox stream contains activities the user has published, subject to the ability of the requestor to retrieve the activity (that is, the contents of the outbox are filtered by the permissions of the person reading it). If a user submits a request without &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#authorization&quot;&gt;Authorization&lt;/a&gt; the server should respond with all of the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#public-addressing&quot;&gt;Public&lt;/a&gt; posts. This could potentially be all relevant objects published by the user, though the number of available items is left to the discretion of those implementing and deploying the server.&lt;/p&gt;
&lt;p&gt;The outbox accepts HTTP POST requests, with behaviour described in &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-to-server-interactions&quot;&gt;Client to Server Interactions&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;inbox&quot; readability=&quot;23.31550802139&quot;&gt;&lt;h3 id=&quot;x5-2-inbox&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.2&lt;/span&gt; Inbox&lt;/h3&gt;
&lt;p&gt;The inbox is discovered through the &lt;code&gt;inbox&lt;/code&gt; property of an &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actors&quot;&gt;actor's&lt;/a&gt; profile. The &lt;code&gt;inbox&lt;/code&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The inbox stream contains all activities received by the actor. The server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; filter content according to the requester's permission. In general, the owner of an inbox is likely to be able to access all of their inbox contents. Depending on access control, some other content may be public, whereas other content may require authentication for non-owner users, if they can access the inbox at all.&lt;/p&gt;
&lt;p&gt;The server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; perform de-duplication of activities returned by the inbox. Duplication can occur if an activity is addressed both to an actor's followers, and a specific actor who also follows the recipient actor, and the server has failed to de-duplicate the recipients list. Such deduplication &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be performed by comparing the &lt;code&gt;id&lt;/code&gt; of the activities and dropping any activities already seen.&lt;/p&gt;
&lt;p&gt;The inboxes of actors on federated servers accepts HTTP POST requests, with behaviour described in &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delivery&quot;&gt;Delivery&lt;/a&gt;. Non-federated servers &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; return a 405 Method Not Allowed upon receipt of a POST request.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;followers&quot; readability=&quot;7.7636778115502&quot;&gt;&lt;h3 id=&quot;x5-3-followers-collection&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.3&lt;/span&gt; Followers Collection&lt;/h3&gt;
&lt;p&gt;Every &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actors&quot;&gt;actor&lt;/a&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; have a &lt;code&gt;followers&lt;/code&gt; collection. This is a list of everyone who has sent a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-follow&quot;&gt;Follow&lt;/a&gt; activity for the actor, added as a &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#follow-activity-outbox&quot;&gt;side effect&lt;/a&gt;. This is where one would find a list of all the actors that are following the actor. The &lt;code&gt;followers&lt;/code&gt; collection &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be either an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; or a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-collection&quot;&gt;&lt;code&gt;Collection&lt;/code&gt;&lt;/a&gt; and &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be filtered on privileges of an authenticated user or as appropriate when no authentication is given.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;9.63133640553&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;span&gt;: Default for notification targeting&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;&quot;&gt;The follow activity generally is a request to see the objects an actor creates. This makes the Followers collection an appropriate default target for &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delivery&quot;&gt;delivery&lt;/a&gt; of notifications.&lt;/p&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;section id=&quot;following&quot; readability=&quot;5.3294117647059&quot;&gt;&lt;h3 id=&quot;x5-4-following-collection&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.4&lt;/span&gt; Following Collection&lt;/h3&gt;
&lt;p&gt;Every actor &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; have a &lt;code&gt;following&lt;/code&gt; collection. This is a list of everybody that the actor has followed, added as a &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#follow-activity-outbox&quot;&gt;side effect&lt;/a&gt;. The &lt;code&gt;following&lt;/code&gt; collection &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be either an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; or a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-collection&quot;&gt;&lt;code&gt;Collection&lt;/code&gt;&lt;/a&gt; and &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be filtered on privileges of an authenticated user or as appropriate when no authentication is given.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;liked&quot; readability=&quot;5.3294117647059&quot;&gt;&lt;h3 id=&quot;x5-5-liked-collection&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.5&lt;/span&gt; Liked Collection&lt;/h3&gt;
&lt;p&gt;Every actor &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; have a &lt;code&gt;liked&lt;/code&gt; collection. This is a list of every object from all of the actor's &lt;code&gt;Like&lt;/code&gt; activities, added as a &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#like-activity-outbox&quot;&gt;side effect&lt;/a&gt;. The &lt;code&gt;liked&lt;/code&gt; collection &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be either an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; or a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-collection&quot;&gt;&lt;code&gt;Collection&lt;/code&gt;&lt;/a&gt; and &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be filtered on privileges of an authenticated user or as appropriate when no authentication is given.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;public-addressing&quot; readability=&quot;14.854166666667&quot;&gt;&lt;h3 id=&quot;x5-6-public-addressing&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.6&lt;/span&gt; Public Addressing&lt;/h3&gt;
&lt;p&gt;In addition to [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] collections and objects, Activities may additionally be addressed to the special &quot;public&quot; collection, with the identifier &lt;code&gt;https://www.w3.org/ns/activitystreams#Public&lt;/code&gt;. For example:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 10&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams#Public&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Collection&quot;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Activities addressed to this special URI shall be accessible to all users, without authentication. Implementations &lt;em class=&quot;rfc2119&quot; title=&quot;MUST NOT&quot;&gt;MUST NOT&lt;/em&gt; deliver to the &quot;public&quot; special collection; it is not capable of receiving actual activities. However, actors &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; have a &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#sharedInbox&quot;&gt;&lt;code&gt;sharedInbox&lt;/code&gt;&lt;/a&gt; endpoint which is available for efficient shared delivery of public posts (as well as posts to followers-only); see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#shared-inbox-delivery&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1.3&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Shared Inbox Delivery&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;7.5&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;Compacting an ActivityStreams object using the ActivityStreams JSON-LD context might result in &lt;code&gt;https://www.w3.org/ns/activitystreams#Public&lt;/code&gt; being represented as simply &lt;code&gt;Public&lt;/code&gt; or &lt;code&gt;as:Public&lt;/code&gt; which are valid representations of the Public collection. Implementations which treat ActivityStreams objects as simply JSON rather than converting an incoming activity over to a local context using JSON-LD tooling should be aware of this and should be prepared to accept all three representations.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;section id=&quot;likes&quot; readability=&quot;5.12&quot;&gt;&lt;h3 id=&quot;x5-7-likes-collection&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.7&lt;/span&gt; Likes Collection&lt;/h3&gt;
&lt;p&gt;Every object &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; have a &lt;code&gt;likes&lt;/code&gt; collection. This is a list of all &lt;code&gt;Like&lt;/code&gt; activities with this object as the &lt;code&gt;object&lt;/code&gt; property, added as a &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#like-activity-inbox&quot;&gt;side effect&lt;/a&gt;. The &lt;code&gt;likes&lt;/code&gt; collection &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be either an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; or a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-collection&quot;&gt;&lt;code&gt;Collection&lt;/code&gt;&lt;/a&gt; and &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be filtered on privileges of an authenticated user or as appropriate when no authentication is given.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;5.3665966386555&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;&quot; readability=&quot;6.5902335456476&quot;&gt;
&lt;p&gt;Care should be taken to not confuse the the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#likes&quot;&gt;&lt;code&gt;likes&lt;/code&gt;&lt;/a&gt; collection with the similarly named but different &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#liked&quot;&gt;&lt;code&gt;liked&lt;/code&gt;&lt;/a&gt; collection. In sum:&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;section id=&quot;shares&quot; readability=&quot;5.3577464788732&quot;&gt;&lt;h3 id=&quot;x5-8-shares-collection&quot;&gt;&lt;span class=&quot;secno&quot;&gt;5.8&lt;/span&gt; Shares Collection&lt;/h3&gt;
&lt;p&gt;Every object &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; have a &lt;code&gt;shares&lt;/code&gt; collection. This is a list of all &lt;code&gt;Announce&lt;/code&gt; activities with this object as the &lt;code&gt;object&lt;/code&gt; property, added as a &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#announce-activity-inbox&quot;&gt;side effect&lt;/a&gt;. The &lt;code&gt;shares&lt;/code&gt; collection &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be either an &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-orderedcollection&quot;&gt;&lt;code&gt;OrderedCollection&lt;/code&gt;&lt;/a&gt; or a &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#dfn-collection&quot;&gt;&lt;code&gt;Collection&lt;/code&gt;&lt;/a&gt; and &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be filtered on privileges of an authenticated user or as appropriate when no authentication is given.&lt;/p&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;client-to-server-interactions&quot; readability=&quot;112.40963710646&quot;&gt;&lt;h2 id=&quot;x6-client-to-server-interactions&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.&lt;/span&gt; Client to Server Interactions&lt;/h2&gt;
&lt;p&gt;Activities as defined by [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] are the core mechanism for creating, modifying and sharing content within the social graph.&lt;/p&gt;
&lt;p&gt;Client to server interaction takes place through clients posting Activities to an actor's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot;&gt;outbox&lt;/a&gt;. To do this, clients &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; discover the URL of the actor's outbox from their &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actor-objects&quot;&gt;profile&lt;/a&gt; and then &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; make an HTTP &lt;code&gt;POST&lt;/code&gt; request to this URL with the Content-Type of &lt;code&gt;application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/code&gt;. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; interpret a Content-Type or Accept header of &lt;code&gt;application/activity+json&lt;/code&gt; as equivalent to &lt;code&gt;application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/code&gt; for client-to-server interactions. The request &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be authenticated with the credentials of the user to whom the outbox belongs. The body of the &lt;code&gt;POST&lt;/code&gt; request &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; contain a single Activity (which &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; contain embedded objects), or a single non-Activity object which &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#object-without-create&quot;&gt;will be wrapped in a Create activity by the server&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;21&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 11&lt;/span&gt;&lt;span&gt;: Submitting an Activity to the Outbox&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
&lt;span class=&quot;hljs-keyword&quot;&gt;POST&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;/outbox/&lt;/span&gt; HTTP/1.1
&lt;span class=&quot;hljs-attribute&quot;&gt;Host&lt;/span&gt;: dustycloud.org
&lt;span class=&quot;hljs-attribute&quot;&gt;Authorization&lt;/span&gt;: Bearer XXXXXXXXXXX
&lt;span class=&quot;hljs-attribute&quot;&gt;Content-Type&lt;/span&gt;: application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;

&lt;span class=&quot;json&quot;&gt;{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
               {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@language&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;}],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Like&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;actor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://dustycloud.org/chris/&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Chris liked 'Minimal ActivityPub update client'&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;object&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/2016/05/minimal-activitypub&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/#amy&quot;&lt;/span&gt;,
         &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://dustycloud.org/followers&quot;&lt;/span&gt;,
         &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/followers/&quot;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;cc&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://e14n.com/evan&quot;&lt;/span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If an Activity is submitted with a value in the &lt;code&gt;id&lt;/code&gt; property, servers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; ignore this and generate a new &lt;code&gt;id&lt;/code&gt; for the Activity. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; return a &lt;code&gt;201 Created&lt;/code&gt; HTTP code, and unless the activity is transient, &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; include the new &lt;code&gt;id&lt;/code&gt; in the &lt;code&gt;Location&lt;/code&gt; header.&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 12&lt;/span&gt;&lt;span&gt;: Outbox response to submitted Activity&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs http&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
HTTP/1.1 &lt;span class=&quot;hljs-number&quot;&gt;201&lt;/span&gt; Created
&lt;span class=&quot;hljs-attribute&quot;&gt;Location&lt;/span&gt;: https://dustycloud.org/likes/345
&lt;/pre&gt;&lt;/div&gt;
&lt;p id=&quot;remove-bto-bcc-before-delivery&quot;&gt;The server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; remove the &lt;code&gt;bto&lt;/code&gt; and/or &lt;code&gt;bcc&lt;/code&gt; properties, if they exist, from the ActivityStreams object before delivery, but &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; utilize the addressing originally stored on the &lt;code&gt;bto&lt;/code&gt; / &lt;code&gt;bcc&lt;/code&gt; properties for determining recipients in &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delivery&quot;&gt;delivery&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; then add this new Activity to the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot;&gt;outbox&lt;/a&gt; collection. Depending on the type of Activity, servers may then be required to carry out further side effects. (However, there is no guarantee that time the Activity may appear in the outbox. The Activity might appear after a delay or disappear at any period). These are described per individual Activity below.&lt;/p&gt;
&lt;p&gt;Attempts to submit objects to servers not implementing client to server support &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; result in a &lt;code&gt;405 Method Not Allowed&lt;/code&gt; response.&lt;/p&gt;
&lt;p&gt;HTTP caching mechanisms [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC7234&quot;&gt;RFC7234&lt;/a&gt;&lt;/cite&gt;] &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; be respected when appropriate, both in clients receiving responses from servers as well as servers sending responses to clients.&lt;/p&gt;
&lt;section id=&quot;client-addressing&quot; readability=&quot;65.769387755102&quot;&gt;&lt;h3 id=&quot;x6-1-client-addressing&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.1&lt;/span&gt; Client Addressing&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Clients&lt;/strong&gt; are responsible for addressing new Activities appropriately. To some extent, this is dependent upon the particular client implementation, but clients must be aware that the server will only forward new Activities to addressees in the &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;bto&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, &lt;code&gt;bcc&lt;/code&gt;, and &lt;code&gt;audience&lt;/code&gt; fields.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#followers&quot;&gt;Followers Collection&lt;/a&gt; and/or the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#public-addressing&quot;&gt;Public Collection&lt;/a&gt; are good choices for the default addressing of new Activities.&lt;/p&gt;
&lt;p&gt;Clients &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; look at any objects attached to the new Activity via the &lt;code&gt;object&lt;/code&gt;, &lt;code&gt;target&lt;/code&gt;, &lt;code&gt;inReplyTo&lt;/code&gt; and/or &lt;code&gt;tag&lt;/code&gt; fields, retrieve &lt;em&gt;their&lt;/em&gt; &lt;code&gt;actor&lt;/code&gt; or &lt;code&gt;attributedTo&lt;/code&gt; properties, and &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; also retrieve their addressing properties, and add these to the &lt;code&gt;to&lt;/code&gt; or &lt;code&gt;cc&lt;/code&gt; fields of the new Activity being created. Clients &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; recurse through attached objects, but if doing so, &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; set a limit for this recursion. (Note that this does not suggest that the client should &quot;unpack&quot; collections of actors being addressed as individual recipients).&lt;/p&gt;
&lt;p&gt;Clients &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; give the user the chance to amend this addressing in the UI.&lt;/p&gt;
&lt;p&gt;For example, when Chris likes the following article by Amy:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;19&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 13&lt;/span&gt;&lt;span&gt;: An Article&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
               {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@language&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;en-GB&quot;&lt;/span&gt;}],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/2016/05/minimal-activitypub&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Article&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;name&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Minimal ActivityPub update client&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Today I finished morph, a client for posting ActivityStreams2...&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;attributedTo&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/#amy&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/followers/&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;cc&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://e14n.com/evan&quot;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;the like is generated by the client as:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;21&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 14&lt;/span&gt;&lt;span&gt;: A Like of the Article&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
               {&lt;span class=&quot;hljs-attr&quot;&gt;&quot;@language&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;en&quot;&lt;/span&gt;}],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Like&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;actor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://dustycloud.org/chris/&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;summary&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Chris liked 'Minimal ActivityPub update client'&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;object&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/2016/05/minimal-activitypub&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/#amy&quot;&lt;/span&gt;,
         &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://dustycloud.org/followers&quot;&lt;/span&gt;,
         &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://rhiaro.co.uk/followers/&quot;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;cc&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://e14n.com/evan&quot;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The receiving outbox can then perform &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delivery&quot;&gt;delivery&lt;/a&gt; to not only the followers of Chris (the liker), but also to Amy, and Amy's followers and Evan, both of whom received the original article.&lt;/p&gt;
&lt;p&gt;Clients submitting the following activities to an &lt;code&gt;outbox&lt;/code&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; provide the &lt;code&gt;object&lt;/code&gt; property in the activity: &lt;code&gt;Create&lt;/code&gt;, &lt;code&gt;Update&lt;/code&gt;, &lt;code&gt;Delete&lt;/code&gt;, &lt;code&gt;Follow&lt;/code&gt;, &lt;code&gt;Add&lt;/code&gt;, &lt;code&gt;Remove&lt;/code&gt;, &lt;code&gt;Like&lt;/code&gt;, &lt;code&gt;Block&lt;/code&gt;, &lt;code&gt;Undo&lt;/code&gt;. Additionally, clients submitting the following activities to an outbox &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; also provide the &lt;code&gt;target&lt;/code&gt; property: &lt;code&gt;Add&lt;/code&gt;, &lt;code&gt;Remove&lt;/code&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;create-activity-outbox&quot; readability=&quot;20.751283063561&quot;&gt;&lt;h3 id=&quot;x6-2-create-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.2&lt;/span&gt; Create Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Create&lt;/code&gt; activity is used when posting a new object. This has the side effect that the object embedded within the Activity (in the &lt;code&gt;object&lt;/code&gt; property) is created.&lt;/p&gt;
&lt;p&gt;When a &lt;code&gt;Create&lt;/code&gt; activity is posted, the &lt;code&gt;actor&lt;/code&gt; of the activity &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; be copied onto the &lt;code&gt;object&lt;/code&gt;'s &lt;code&gt;attributedTo&lt;/code&gt; field.&lt;/p&gt;
&lt;p&gt;A mismatch between addressing of the Create activity and its &lt;code&gt;object&lt;/code&gt; is likely to lead to confusion. As such, a server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; copy any recipients of the Create activity to its &lt;code&gt;object&lt;/code&gt; upon initial distribution, and likewise with copying recipients from the &lt;code&gt;object&lt;/code&gt; to the wrapping Create activity. Note that it is acceptable for the &lt;code&gt;object&lt;/code&gt;'s addressing to be changed later without changing the &lt;code&gt;Create&lt;/code&gt;'s addressing (for example via an &lt;code&gt;Update&lt;/code&gt; activity).&lt;/p&gt;
&lt;section id=&quot;object-without-create&quot; readability=&quot;31.954392837157&quot;&gt;&lt;h4 id=&quot;x6-2-1-object-creation-without-a-create-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.2.1&lt;/span&gt; Object creation without a Create Activity&lt;/h4&gt;
&lt;p&gt;For client to server posting, it is possible to submit an object for creation without a surrounding activity. The server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; accept a valid [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-ActivityStreams&quot;&gt;ActivityStreams&lt;/a&gt;&lt;/cite&gt;] object that isn't a subtype of &lt;code&gt;Activity&lt;/code&gt; in the POST request to the outbox. The server then &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; attach this object as the &lt;code&gt;object&lt;/code&gt; of a &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#create-activity-outbox&quot;&gt;Create Activity&lt;/a&gt;. For non-transient objects, the server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; attach an &lt;code&gt;id&lt;/code&gt; to both the wrapping &lt;code&gt;Create&lt;/code&gt; and its wrapped &lt;code&gt;Object&lt;/code&gt;.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;&quot;&gt;The &lt;code&gt;Location&lt;/code&gt; value returned by the server should be the URL of the new Create activity (rather than the object).&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Any &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;bto&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, &lt;code&gt;bcc&lt;/code&gt;, and &lt;code&gt;audience&lt;/code&gt; properties specified on the object &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be copied over to the new Create activity by the server.&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;17&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 15&lt;/span&gt;&lt;span&gt;: Object with audience targeting&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Note&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;This is a note&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;published&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;2015-02-10T15:04:55Z&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.org/~john/&quot;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;cc&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.com/~erik/followers&quot;&lt;/span&gt;,
         &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams#Public&quot;&lt;/span&gt;]
}
&lt;/pre&gt;&lt;/div&gt;
The above example could be converted to this:
&lt;div class=&quot;example&quot; readability=&quot;27&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 16&lt;/span&gt;&lt;span&gt;: Create Activity wrapper generated by the server&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Create&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.net/~mallory/87374&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;actor&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.net/~mallory&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;object&quot;&lt;/span&gt;: {
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.com/~mallory/note/72&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Note&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;attributedTo&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.net/~mallory&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;content&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;This is a note&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;published&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;2015-02-10T15:04:55Z&quot;&lt;/span&gt;,
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.org/~john/&quot;&lt;/span&gt;],
    &lt;span class=&quot;hljs-attr&quot;&gt;&quot;cc&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.com/~erik/followers&quot;&lt;/span&gt;,
           &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams#Public&quot;&lt;/span&gt;]
  },
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;published&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;2015-02-10T15:04:55Z&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;to&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.org/~john/&quot;&lt;/span&gt;],
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;cc&quot;&lt;/span&gt;: [&lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.com/~erik/followers&quot;&lt;/span&gt;,
         &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams#Public&quot;&lt;/span&gt;]
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;update-activity-outbox&quot; readability=&quot;10.984446477585&quot;&gt;&lt;h3 id=&quot;x6-3-update-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.3&lt;/span&gt; Update Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Update&lt;/code&gt; activity is used when updating an already existing object. The side effect of this is that the &lt;code&gt;object&lt;/code&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be modified to reflect the new structure as defined in the update activity, assuming the actor has permission to update this object.&lt;/p&gt;
&lt;section id=&quot;partial-updates&quot; readability=&quot;12.225060827251&quot;&gt;&lt;h4 id=&quot;x6-3-1-partial-updates&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.3.1&lt;/span&gt; Partial Updates&lt;/h4&gt;
&lt;p&gt;For client to server interactions, updates are partial; rather than updating the document all at once, any key value pair supplied is used to replace the existing value with the new value. This only applies to the top-level fields of the updated object. A special exception is for when the value is the json &lt;code&gt;null&lt;/code&gt; type; this means that this field should be removed from the server's representation of the object.&lt;/p&gt;
&lt;p&gt;Note that this behavior is for client to server interaction where the client is posting to the server only. Server to server interaction and updates from the server to the client should contain the entire new representation of the object, after the partial update application has been applied. See the description of the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#update-activity-inbox&quot;&gt;Update activity for server to server interactions&lt;/a&gt; for more details.&lt;/p&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;delete-activity-outbox&quot; readability=&quot;10.5&quot;&gt;&lt;h3 id=&quot;x6-4-delete-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.4&lt;/span&gt; Delete Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Delete&lt;/code&gt; activity is used to delete an already existing object. The side effect of this is that the server &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; replace the &lt;code&gt;object&lt;/code&gt; with a &lt;code&gt;Tombstone&lt;/code&gt; of the object that will be displayed in activities which reference the deleted object. If the deleted object is requested the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; respond with either the HTTP 410 Gone status code if a &lt;code&gt;Tombstone&lt;/code&gt; object is presented as the response body, otherwise respond with a HTTP 404 Not Found.&lt;/p&gt;
&lt;p&gt;A deleted object:&lt;/p&gt;
&lt;div class=&quot;example&quot; readability=&quot;14&quot;&gt;
&lt;p&gt;&lt;span&gt;Example 17&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;hljs json&quot; aria-busy=&quot;false&quot; aria-live=&quot;polite&quot;&gt;
{
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;@context&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;id&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;https://example.com/~alice/note/72&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;type&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;Tombstone&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;published&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;2015-02-10T15:04:55Z&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;updated&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;2015-02-10T15:04:55Z&quot;&lt;/span&gt;,
  &lt;span class=&quot;hljs-attr&quot;&gt;&quot;deleted&quot;&lt;/span&gt;: &lt;span class=&quot;hljs-string&quot;&gt;&quot;2015-02-10T15:04:55Z&quot;&lt;/span&gt;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/section&gt;&lt;section id=&quot;follow-activity-outbox&quot; readability=&quot;5.6273291925466&quot;&gt;&lt;h3 id=&quot;x6-5-follow-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.5&lt;/span&gt; Follow Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Follow&lt;/code&gt; activity is used to subscribe to the activities of another actor.&lt;/p&gt;
&lt;p&gt;The side effect of receiving this in an &lt;strong&gt;outbox&lt;/strong&gt; is that the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; add the &lt;code&gt;object&lt;/code&gt; to the &lt;code&gt;actor&lt;/code&gt;'s &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#following&quot;&gt;&lt;code&gt;following&lt;/code&gt; Collection&lt;/a&gt; when and only if an &lt;code&gt;Accept&lt;/code&gt; activity is subsequently received with this &lt;code&gt;Follow&lt;/code&gt; activity as its object.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;add-activity-outbox&quot; readability=&quot;5&quot;&gt;&lt;h3 id=&quot;x6-6-add-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.6&lt;/span&gt; Add Activity&lt;/h3&gt;
&lt;p&gt;Upon receipt of an &lt;code&gt;Add&lt;/code&gt; activity into the &lt;strong&gt;outbox&lt;/strong&gt;, the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; add the &lt;code&gt;object&lt;/code&gt; to the collection specified in the &lt;code&gt;target&lt;/code&gt; property, unless:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;the &lt;code&gt;target&lt;/code&gt; is not owned by the receiving server, and thus they are not authorized to update it.&lt;/li&gt;
&lt;li&gt;the &lt;code&gt;object&lt;/code&gt; is not allowed to be added to the &lt;code&gt;target&lt;/code&gt; collection for some other reason, at the receiving server's discretion.&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section id=&quot;remove-activity-outbox&quot; readability=&quot;5&quot;&gt;&lt;h3 id=&quot;x6-7-remove-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.7&lt;/span&gt; Remove Activity&lt;/h3&gt;
&lt;p&gt;Upon receipt of a &lt;code&gt;Remove&lt;/code&gt; activity into the &lt;strong&gt;outbox&lt;/strong&gt;, the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; remove the &lt;code&gt;object&lt;/code&gt; from the collection specified in the &lt;code&gt;target&lt;/code&gt; property, unless:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;the &lt;code&gt;target&lt;/code&gt; is not owned by the receiving server, and thus they are not authorized to update it.&lt;/li&gt;
&lt;li&gt;the &lt;code&gt;object&lt;/code&gt; is not allowed to be removed from the &lt;code&gt;target&lt;/code&gt; collection for some other reason, at the receiving server's discretion.&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section id=&quot;like-activity-outbox&quot; readability=&quot;4.5876288659794&quot;&gt;&lt;h3 id=&quot;x6-8-like-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.8&lt;/span&gt; Like Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Like&lt;/code&gt; activity indicates the &lt;code&gt;actor&lt;/code&gt; likes the &lt;code&gt;object&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The side effect of receiving this in an &lt;strong&gt;outbox&lt;/strong&gt; is that the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; add the &lt;code&gt;object&lt;/code&gt; to the &lt;code&gt;actor&lt;/code&gt;'s &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#liked&quot;&gt;&lt;code&gt;liked&lt;/code&gt; Collection&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;block-activity-outbox&quot; readability=&quot;7&quot;&gt;&lt;h3 id=&quot;x6-9-block-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.9&lt;/span&gt; Block Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Block&lt;/code&gt; activity is used to indicate that the posting actor does not want another actor (defined in the &lt;code&gt;object&lt;/code&gt; property) to be able to interact with objects posted by the actor posting the &lt;code&gt;Block&lt;/code&gt; activity. The server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; prevent the blocked user from interacting with any object posted by the actor.&lt;/p&gt;
&lt;p&gt;Servers &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD NOT&quot;&gt;SHOULD NOT&lt;/em&gt; deliver Block Activities to their &lt;code&gt;object&lt;/code&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;undo-activity-outbox&quot; readability=&quot;15.315634218289&quot;&gt;&lt;h3 id=&quot;x6-10-undo-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.10&lt;/span&gt; Undo Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Undo&lt;/code&gt; activity is used to undo a previous activity. See the Activity Vocabulary documentation on &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#inverse&quot;&gt;Inverse Activities and &quot;Undo&quot;&lt;/a&gt;. For example, &lt;code&gt;Undo&lt;/code&gt; may be used to undo a previous &lt;code&gt;Like&lt;/code&gt;, &lt;code&gt;Follow&lt;/code&gt;, or &lt;code&gt;Block&lt;/code&gt;. The undo activity and the activity being undone &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; both have the same actor. Side effects should be undone, to the extent possible. For example, if undoing a &lt;code&gt;Like&lt;/code&gt;, any counter that had been incremented previously should be decremented appropriately.&lt;/p&gt;
&lt;p&gt;There are some exceptions where there is an existing and explicit &quot;inverse activity&quot; which should be used instead. &lt;code&gt;Create&lt;/code&gt; based activities should instead use &lt;code&gt;Delete&lt;/code&gt;, and &lt;code&gt;Add&lt;/code&gt; activities should use &lt;code&gt;Remove&lt;/code&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;client-to-server-outbox-delivery&quot; readability=&quot;2.6311475409836&quot;&gt;&lt;h3 id=&quot;x6-11-delivery&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.11&lt;/span&gt; Delivery&lt;/h3&gt;
&lt;p&gt;Federated servers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; perform delivery on all Activities posted to the &lt;strong&gt;outbox&lt;/strong&gt; according to &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox-delivery&quot;&gt;outbox delivery&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;uploading-media&quot; class=&quot;informative&quot; readability=&quot;-14.549707602339&quot;&gt;&lt;h3 id=&quot;x6-12-uploading-media&quot;&gt;&lt;span class=&quot;secno&quot;&gt;6.12&lt;/span&gt; Uploading Media&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; support uploading document types to be referenced in activites, such as images, video or other binary data, but the precise mechanism is out of scope for this version of ActivityPub. The Social Web Community Group is refining the protocol in the &lt;a href=&quot;https://www.w3.org/wiki/SocialCG/ActivityPub/MediaUpload&quot;&gt;ActivityPub Media Upload report&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;server-to-server-interactions&quot; readability=&quot;96.773174304248&quot;&gt;&lt;h2 id=&quot;x7-server-to-server-interactions&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.&lt;/span&gt; Server to Server Interactions&lt;/h2&gt;
&lt;p&gt;Servers communicate with other servers and propagate information across the social graph by posting activities to actors' &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot;&gt;inbox&lt;/a&gt; endpoints. An Activity sent over the network &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; have an &lt;code&gt;id&lt;/code&gt;, unless it is intended to be transient (in which case it &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; omit the &lt;code&gt;id&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;POST&lt;/code&gt; requests (eg. to the inbox) &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; be made with a Content-Type of &lt;code&gt;application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/code&gt; and &lt;code&gt;GET&lt;/code&gt; requests (see also &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#retrieving-objects&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.2&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Retrieving objects&lt;/span&gt;&lt;/a&gt;) with an Accept header of &lt;code&gt;application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/code&gt;. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; interpret a Content-Type or Accept header of &lt;code&gt;application/activity+json&lt;/code&gt; as equivalent to &lt;code&gt;application/ld+json; profile=&quot;https://www.w3.org/ns/activitystreams&quot;&lt;/code&gt; for server-to-server interactions.&lt;/p&gt;
&lt;p&gt;In order to propagate updates throughout the social graph, Activities are sent to the appropriate recipients. First, these recipients are determined through following the appropriate links between objects until you reach an actor, and then the Activity is inserted into the actor's &lt;em&gt;inbox&lt;/em&gt; (&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delivery&quot;&gt;delivery&lt;/a&gt;). This allows recipient servers to:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;conduct any side effects related to the Activity (for example, notification that an actor has liked an object is used to update the object's like count);&lt;/li&gt;
&lt;li&gt;deliver the Activity to recipients of the original object, to ensure updates are propagated to the whole social graph (see &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox-forwarding&quot;&gt;inbox delivery&lt;/a&gt;).&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Delivery is usually triggered by, for example:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;an Activity being created in an actor's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot;&gt;outbox&lt;/a&gt; with their &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#followers&quot;&gt;Followers Collection&lt;/a&gt; as the recipient.&lt;/li&gt;
&lt;li&gt;an Activity being created in an actor's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot;&gt;outbox&lt;/a&gt; with directly addressed recipients.&lt;/li&gt;
&lt;li&gt;an Activity being created in an actors's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot;&gt;outbox&lt;/a&gt; with user-curated collections as recipients.&lt;/li&gt;
&lt;li&gt;an Activity being created in an actor's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot;&gt;outbox&lt;/a&gt; or &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot;&gt;inbox&lt;/a&gt; which references another object.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Servers performing delivery to the &lt;code&gt;inbox&lt;/code&gt; or &lt;code&gt;sharedInbox&lt;/code&gt; properties of actors on other servers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; provide the &lt;code&gt;object&lt;/code&gt; property in the activity: &lt;code&gt;Create&lt;/code&gt;, &lt;code&gt;Update&lt;/code&gt;, &lt;code&gt;Delete&lt;/code&gt;, &lt;code&gt;Follow&lt;/code&gt;, &lt;code&gt;Add&lt;/code&gt;, &lt;code&gt;Remove&lt;/code&gt;, &lt;code&gt;Like&lt;/code&gt;, &lt;code&gt;Block&lt;/code&gt;, &lt;code&gt;Undo&lt;/code&gt;. Additionally, servers performing server to server delivery of the following activities &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; also provide the &lt;code&gt;target&lt;/code&gt; property: &lt;code&gt;Add&lt;/code&gt;, &lt;code&gt;Remove&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;HTTP caching mechanisms [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-RFC7234&quot;&gt;RFC7234&lt;/a&gt;&lt;/cite&gt;] &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; be respected when appropriate, both when receiving responses from other servers as well as sending responses to other servers.&lt;/p&gt;
&lt;section id=&quot;delivery&quot; readability=&quot;68.700269018084&quot;&gt;&lt;h3 id=&quot;x7-1-delivery&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1&lt;/span&gt; Delivery&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;The following is required by federated servers communicating with other federated servers only.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;An activity is delivered to its targets (which are &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#actors&quot;&gt;actors&lt;/a&gt;) by first looking up the targets' inboxes and then posting the activity to those inboxes. Targets for delivery are determined by checking the &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#audienceTargeting&quot;&gt;ActivityStreams audience targeting&lt;/a&gt;; namely, the &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;bto&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, &lt;code&gt;bcc&lt;/code&gt;, and &lt;code&gt;audience&lt;/code&gt; fields of the activity.&lt;/p&gt;
&lt;p&gt;The &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot;&gt;inbox&lt;/a&gt; is determined by first &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#retrieving-objects&quot;&gt;retrieving the target actor's JSON-LD representation&lt;/a&gt; and then looking up the &lt;code&gt;inbox&lt;/code&gt; property. If a recipient is a &lt;code&gt;Collection&lt;/code&gt; or &lt;code&gt;OrderedCollection&lt;/code&gt;, then the server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; dereference the collection (with the user's credentials) and discover inboxes for each item in the collection. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; limit the number of layers of indirections through collections which will be performed, which &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be one.&lt;/p&gt;
&lt;p&gt;Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; de-duplicate the final recipient list. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; also exclude actors from the list which are the same as the &lt;code&gt;actor&lt;/code&gt; of the Activity being notified about. That is, actors shouldn't have their own activities delivered to themselves.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;13&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;span&gt;: Silent and private activities&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;&quot;&gt;What to do when there are no recipients specified is not defined, however it's recommended that if no recipients are specified the object remains completely private and access controls restrict the access to object. If the object is just sent to the &quot;public&quot; collection the object is not delivered to any actors but is publicly viewable in the actor's outbox.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;An HTTP POST request (with authorization of the submitting user) is then made to the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot;&gt;inbox&lt;/a&gt;, with the Activity as the body of the request. This Activity is added by the receiver as an &lt;code&gt;item&lt;/code&gt; in the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot;&gt;inbox&lt;/a&gt; OrderedCollection. Attempts to deliver to an inbox on a non-federated server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; result in a &lt;code&gt;405 Method Not Allowed&lt;/code&gt; response.&lt;/p&gt;
&lt;p&gt;For federated servers performing delivery to a third party server, delivery &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; be performed asynchronously, and &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; additionally retry delivery to recipients if it fails due to network error.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note:&lt;/strong&gt; Activities being distributed between actors on the same origin may use any internal mechanism, and are not required to use HTTP.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;17.479768786127&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;span&gt;: Relationship to Linked Data Notifications&lt;/span&gt;&lt;/p&gt;
&lt;p class=&quot;&quot; id=&quot;ldn-relationship&quot;&gt;While it is not required reading to understand this specification, it is worth noting that ActivityPub's targeting and delivery mechanism overlaps with the &lt;a href=&quot;https://www.w3.org/TR/ldn/&quot;&gt;Linked Data Notifications&lt;/a&gt; specification, and the two specifications may interoperably combined. In particular, the &lt;code&gt;inbox&lt;/code&gt; property is the same between ActivityPub and Linked Data Notifications, and the targeting and delivery systems described in this document are supported by Linked Data Notifications. In addition to JSON-LD compacted ActivityStreams documents, Linked Data Notifications also supports a number of RDF serializations which are not required for ActivityPub implementations. However, ActivityPub implementations which wish to be more broadly compatible with Linked Data Notifications implementations may wish to support other RDF representations.&lt;/p&gt;
&lt;/div&gt;
&lt;section id=&quot;outbox-delivery&quot; readability=&quot;5.414798206278&quot;&gt;&lt;h4 id=&quot;x7-1-1-outbox-delivery-requirements-for-server-to-server&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1.1&lt;/span&gt; Outbox Delivery Requirements for Server to Server&lt;/h4&gt;
&lt;p&gt;When objects are received in the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#outbox&quot;&gt;outbox&lt;/a&gt; (for servers which support both &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-to-server-interactions&quot;&gt;Client to Server interactions&lt;/a&gt; and &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#server-to-server-interactions&quot;&gt;Server to Server Interactions&lt;/a&gt;), the server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; target and deliver to:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;bto&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, &lt;code&gt;bcc&lt;/code&gt; or &lt;code&gt;audience&lt;/code&gt; fields if their values are individuals or Collections owned by the actor.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;These fields will have been &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#client-addressing&quot;&gt;populated appropriately by the client&lt;/a&gt; which posted the Activity to the outbox.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;inbox-forwarding&quot; readability=&quot;12.922924901186&quot;&gt;&lt;h4 id=&quot;x7-1-2-forwarding-from-inbox&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1.2&lt;/span&gt; Forwarding from Inbox&lt;/h4&gt;
&lt;div class=&quot;note&quot; readability=&quot;13.5&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;span&gt;: Forwarding to avoid the ghost replies problem&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;&quot; readability=&quot;18&quot;&gt;
&lt;p&gt;The following section is to mitigate the &quot;ghost replies&quot; problem which occasionally causes problems on federated networks. This problem is best demonstrated with an example.&lt;/p&gt;
&lt;p&gt;Alyssa makes a post about her having successfully presented a paper at a conference and sends it to her followers collection, which includes her friend Ben. Ben replies to Alyssa's message congratulating her and includes her followers collection on the recipients. However, Ben has no access to see the members of Alyssa's followers collection, so his server does not forward his messages to their inbox. Without the following mechanism, if Alyssa were then to reply to Ben, her followers would see Alyssa replying to Ben without having ever seen Ben interacting. This would be very confusing!&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;When Activities are received in the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#inbox&quot;&gt;inbox&lt;/a&gt;, the server needs to forward these to recipients that the origin was unable to deliver them to. To do this, the server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; target and &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#delivery&quot;&gt;deliver&lt;/a&gt; to the values of &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, and/or &lt;code&gt;audience&lt;/code&gt; if and only if all of the following are true:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;This is the first time the server has seen this Activity.&lt;/li&gt;
&lt;li&gt;The values of &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, and/or &lt;code&gt;audience&lt;/code&gt; contain a Collection owned by the server.&lt;/li&gt;
&lt;li&gt;The values of &lt;code&gt;inReplyTo&lt;/code&gt;, &lt;code&gt;object&lt;/code&gt;, &lt;code&gt;target&lt;/code&gt; and/or &lt;code&gt;tag&lt;/code&gt; are objects owned by the server. The server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; recurse through these values to look for linked objects owned by the server, and &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; set a maximum limit for recursion (ie. the point at which the thread is so deep the recipients followers may not mind if they are no longer getting updates that don't directly involve the recipient). The server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; only target the values of &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, and/or &lt;code&gt;audience&lt;/code&gt; on the original object being forwarded, and not pick up any new addressees whilst recursing through the linked objects (in case these addressees were purposefully amended by or via the client).&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;The server &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; filter its delivery targets according to implementation-specific rules (for example, spam filtering).&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;shared-inbox-delivery&quot; readability=&quot;24.647302904564&quot;&gt;&lt;h4 id=&quot;x7-1-3-shared-inbox-delivery&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.1.3&lt;/span&gt; Shared Inbox Delivery&lt;/h4&gt;
&lt;p&gt;For servers hosting many actors, delivery to all followers can result in an overwhelming number of messages sent. Some servers would also like to display a list of all messages posted publicly to the &quot;known network&quot;. Thus ActivityPub provides an optional mechanism for serving these two use cases.&lt;/p&gt;
&lt;p&gt;When an object is being delivered to the originating actor's followers, a server &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; reduce the number of receiving actors delivered to by identifying all followers which share the same &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#sharedInbox&quot;&gt;sharedInbox&lt;/a&gt; who would otherwise be individual recipients and instead deliver objects to said &lt;code&gt;sharedInbox&lt;/code&gt;. Thus in this scenario, the remote/receiving server participates in determining targeting and performing delivery to specific inboxes.&lt;/p&gt;
&lt;p&gt;Additionally, if an object is addressed to the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#public-addressing&quot;&gt;Public&lt;/a&gt; special collection, a server &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; deliver that object to all known &lt;code&gt;sharedInbox&lt;/code&gt; endpoints on the network.&lt;/p&gt;
&lt;p&gt;Origin servers sending publicly addressed activities to &lt;code&gt;sharedInbox&lt;/code&gt; endpoints &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; still deliver to actors and collections otherwise addressed (through &lt;code&gt;to&lt;/code&gt;, &lt;code&gt;bto&lt;/code&gt;, &lt;code&gt;cc&lt;/code&gt;, &lt;code&gt;bcc&lt;/code&gt;, and &lt;code&gt;audience&lt;/code&gt;) which do not have a &lt;code&gt;sharedInbox&lt;/code&gt; and would not otherwise receive the activity through the &lt;code&gt;sharedInbox&lt;/code&gt; mechanism.&lt;/p&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;create-activity-inbox&quot; readability=&quot;6&quot;&gt;&lt;h3 id=&quot;x7-2-create-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.2&lt;/span&gt; Create Activity&lt;/h3&gt;
&lt;p&gt;Receiving a &lt;code&gt;Create&lt;/code&gt; activity in an &lt;code&gt;inbox&lt;/code&gt; has surprisingly few side effects; the activity should appear in the actor's &lt;code&gt;inbox&lt;/code&gt; and it is likely that the server will want to locally store a representation of this activity and its accompanying object. However, this mostly happens in general with processing activities delivered to an &lt;code&gt;inbox&lt;/code&gt; anyway.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;update-activity-inbox&quot; readability=&quot;9.9942857142857&quot;&gt;&lt;h3 id=&quot;x7-3-update-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.3&lt;/span&gt; Update Activity&lt;/h3&gt;
&lt;p&gt;For server to server interactions, an &lt;code&gt;Update&lt;/code&gt; activity means that the receiving server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; update its copy of the &lt;code&gt;object&lt;/code&gt; of the same &lt;code&gt;id&lt;/code&gt; to the copy supplied in the &lt;code&gt;Update&lt;/code&gt; activity. Unlike the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#update-activity-outbox&quot;&gt;client to server handling of the Update activity&lt;/a&gt;, this is not a partial update but a complete replacement of the object.&lt;/p&gt;
&lt;p&gt;The receiving server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST&quot;&gt;MUST&lt;/em&gt; take care to be sure that the &lt;code&gt;Update&lt;/code&gt; is authorized to modify its &lt;code&gt;object&lt;/code&gt;. At minimum, this may be done by ensuring that the &lt;code&gt;Update&lt;/code&gt; and its &lt;code&gt;object&lt;/code&gt; are of same origin.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;delete-activity-inbox&quot; readability=&quot;10&quot;&gt;&lt;h3 id=&quot;x7-4-delete-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.4&lt;/span&gt; Delete Activity&lt;/h3&gt;
&lt;p&gt;The side effect of receiving this is that (assuming the &lt;code&gt;object&lt;/code&gt; is owned by the sending actor / server) the server receiving the delete activity &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; remove its representation of the &lt;code&gt;object&lt;/code&gt; with the same &lt;code&gt;id&lt;/code&gt;, and &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; replace that representation with a &lt;code&gt;Tombstone&lt;/code&gt; object.&lt;/p&gt;
&lt;p&gt;(Note that after an activity has been transmitted from an origin server to a remote server, there is nothing in the ActivityPub protocol that can &lt;em&gt;enforce&lt;/em&gt; remote deletion of an object's representation).&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;follow-activity-inbox&quot; readability=&quot;13.620596205962&quot;&gt;&lt;h3 id=&quot;x7-5-follow-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.5&lt;/span&gt; Follow Activity&lt;/h3&gt;
&lt;p&gt;The side effect of receiving this in an &lt;strong&gt;inbox&lt;/strong&gt; is that the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; generate either an &lt;code&gt;Accept&lt;/code&gt; or &lt;code&gt;Reject&lt;/code&gt; activity with the Follow as the &lt;code&gt;object&lt;/code&gt; and deliver it to the &lt;code&gt;actor&lt;/code&gt; of the Follow. The &lt;code&gt;Accept&lt;/code&gt; or &lt;code&gt;Reject&lt;/code&gt; &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be generated automatically, or &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; be the result of user input (possibly after some delay in which the user reviews). Servers &lt;em class=&quot;rfc2119&quot; title=&quot;MAY&quot;&gt;MAY&lt;/em&gt; choose to not explicitly send a &lt;code&gt;Reject&lt;/code&gt; in response to a &lt;code&gt;Follow&lt;/code&gt;, though implementors ought to be aware that the server sending the request could be left in an intermediate state. For example, a server might not send a &lt;code&gt;Reject&lt;/code&gt; to protect a user's privacy.&lt;/p&gt;
&lt;p&gt;In the case of receiving an &lt;code&gt;Accept&lt;/code&gt; referencing this &lt;code&gt;Follow&lt;/code&gt; as the object, the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; add the &lt;code&gt;actor&lt;/code&gt; to the object actor's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#followers&quot;&gt;Followers Collection&lt;/a&gt;. In the case of a &lt;code&gt;Reject&lt;/code&gt;, the server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST NOT&quot;&gt;MUST NOT&lt;/em&gt; add the actor to the object actor's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#followers&quot;&gt;Followers Collection&lt;/a&gt;.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;8.5&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;&quot; readability=&quot;12&quot;&gt;
&lt;p&gt;Sometimes a successful &lt;code&gt;Follow&lt;/code&gt; subscription may occur but at some future point delivery to the follower fails for an extended period of time. Implementations should be aware that there is no guarantee that actors on the network will remain reachable and should implement accordingly. For instance, if attempting to deliver to an actor for perhaps six months while the follower remains unreachable, it is reasonable that the delivering server remove the subscriber from the &lt;code&gt;followers&lt;/code&gt; list. Timeframes and behavior for dealing with unreachable actors are left to the discretion of the delivering server.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;section id=&quot;accept-activity-inbox&quot; readability=&quot;8.5263157894737&quot;&gt;&lt;h3 id=&quot;x7-6-accept-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.6&lt;/span&gt; Accept Activity&lt;/h3&gt;
&lt;p&gt;The side effect of receiving this in an &lt;strong&gt;inbox&lt;/strong&gt; is determined by the type of the &lt;code&gt;object&lt;/code&gt; received, and it is possible to accept types not described in this document (for example, an &lt;code&gt;Offer&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;If the &lt;code&gt;object&lt;/code&gt; of an &lt;code&gt;Accept&lt;/code&gt; received to an &lt;strong&gt;inbox&lt;/strong&gt; is a &lt;code&gt;Follow&lt;/code&gt; activity previously sent by the receiver, the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; add the &lt;code&gt;actor&lt;/code&gt; to the receiver's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#following&quot;&gt;Following Collection&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;reject-activity-inbox&quot; readability=&quot;9.5475113122172&quot;&gt;&lt;h3 id=&quot;x7-7-reject-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.7&lt;/span&gt; Reject Activity&lt;/h3&gt;
&lt;p&gt;The side effect of receiving this in an &lt;strong&gt;inbox&lt;/strong&gt; is determined by the type of the &lt;code&gt;object&lt;/code&gt; received, and it is possible to reject types not described in this document (for example, an &lt;code&gt;Offer&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;If the &lt;code&gt;object&lt;/code&gt; of a &lt;code&gt;Reject&lt;/code&gt; received to an &lt;strong&gt;inbox&lt;/strong&gt; is a &lt;code&gt;Follow&lt;/code&gt; activity previously sent by the receiver, this means the recipient did not approve the &lt;code&gt;Follow&lt;/code&gt; request. The server &lt;em class=&quot;rfc2119&quot; title=&quot;MUST NOT&quot;&gt;MUST NOT&lt;/em&gt; add the &lt;code&gt;actor&lt;/code&gt; to the receiver's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#following&quot;&gt;Following Collection&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;add-activity-inbox&quot; readability=&quot;5&quot;&gt;&lt;h3 id=&quot;x7-8-add-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.8&lt;/span&gt; Add Activity&lt;/h3&gt;
&lt;p&gt;Upon receipt of an &lt;code&gt;Add&lt;/code&gt; activity into the &lt;strong&gt;inbox&lt;/strong&gt;, the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; add the &lt;code&gt;object&lt;/code&gt; to the collection specified in the &lt;code&gt;target&lt;/code&gt; property, unless:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;the &lt;code&gt;target&lt;/code&gt; is not owned by the receiving server, and thus they can't update it.&lt;/li&gt;
&lt;li&gt;the &lt;code&gt;object&lt;/code&gt; is not allowed to be added to the &lt;code&gt;target&lt;/code&gt; collection for some other reason, at the receiver's discretion.&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section id=&quot;remove-activity-inbox&quot; readability=&quot;5&quot;&gt;&lt;h3 id=&quot;x7-9-remove-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.9&lt;/span&gt; Remove Activity&lt;/h3&gt;
&lt;p&gt;Upon receipt of a &lt;code&gt;Remove&lt;/code&gt; activity into the &lt;strong&gt;inbox&lt;/strong&gt;, the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; remove the &lt;code&gt;object&lt;/code&gt; from the collection specified in the &lt;code&gt;target&lt;/code&gt; property, unless:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;the &lt;code&gt;target&lt;/code&gt; is not owned by the receiving server, and thus they can't update it.&lt;/li&gt;
&lt;li&gt;the &lt;code&gt;object&lt;/code&gt; is not allowed to be removed to the &lt;code&gt;target&lt;/code&gt; collection for some other reason, at the receiver's discretion.&lt;/li&gt;
&lt;/ul&gt;&lt;/section&gt;&lt;section id=&quot;like-activity-inbox&quot; readability=&quot;2.9302325581395&quot;&gt;&lt;h3 id=&quot;x7-10-like-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.10&lt;/span&gt; Like Activity&lt;/h3&gt;
&lt;p&gt;The side effect of receiving this in an &lt;strong&gt;inbox&lt;/strong&gt; is that the server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; increment the object's count of likes by adding the received activity to the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#likes&quot;&gt;&lt;code&gt;likes&lt;/code&gt;&lt;/a&gt; collection if this collection is present.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;announce-activity-inbox&quot; readability=&quot;6.3879310344828&quot;&gt;&lt;h3 id=&quot;x7-11-announce-activity-sharing&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.11&lt;/span&gt; Announce Activity (sharing)&lt;/h3&gt;
&lt;p&gt;Upon receipt of an &lt;code&gt;Announce&lt;/code&gt; activity in an &lt;strong&gt;inbox&lt;/strong&gt;, a server &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; increment the object's count of shares by adding the received activity to the &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#shares&quot;&gt;&lt;code&gt;shares&lt;/code&gt;&lt;/a&gt; collection if this collection is present.&lt;/p&gt;
&lt;div class=&quot;note&quot; readability=&quot;10&quot;&gt;
&lt;p&gt;&lt;span&gt;Note&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;Announce&lt;/code&gt; activity is effectively what is known as &quot;sharing&quot;, &quot;reposting&quot;, or &quot;boosting&quot; in other social networks.&lt;/p&gt;
&lt;/div&gt;
&lt;/section&gt;&lt;section id=&quot;undo-activity-inbox&quot; readability=&quot;4.3214285714286&quot;&gt;&lt;h3 id=&quot;x7-12-undo-activity&quot;&gt;&lt;span class=&quot;secno&quot;&gt;7.12&lt;/span&gt; Undo Activity&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;Undo&lt;/code&gt; activity is used to undo the side effects of previous activities. See the ActivityStreams documentation on &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/#inverse&quot;&gt;Inverse Activities and &quot;Undo&quot;&lt;/a&gt;. The scope and restrictions of the &lt;code&gt;Undo&lt;/code&gt; activity are the same as for &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#undo-activity-outbox&quot;&gt;the Undo activity in the context of client to server interactions&lt;/a&gt;, but applied to a federated context.&lt;/p&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section id=&quot;i18n-concerns&quot; class=&quot;appendix informative&quot; readability=&quot;6.0669642857143&quot;&gt;&lt;h2 id=&quot;a-internationalization&quot;&gt;&lt;span class=&quot;secno&quot;&gt;A.&lt;/span&gt; Internationalization&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Building an international base of users is important in a federated network. &lt;a href=&quot;https://www.w3.org/TR/activitystreams-core/#naturalLanguageValues&quot;&gt;ActivityStreams provides tooling for internationalization of content&lt;/a&gt;, which should be used whenever possible. However, it can be difficult for implementations to determine which &lt;a href=&quot;https://www.w3.org/TR/activitystreams-core/#defaultlangcontext&quot;&gt;&lt;code&gt;@language&lt;/code&gt; property&lt;/a&gt; to provide for user-submitted content. The &lt;a href=&quot;https://www.w3.org/International/&quot;&gt;&lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Internationalization group&lt;/a&gt; provides some &lt;a href=&quot;https://www.w3.org/International/wiki/LanguageDetection&quot;&gt;guidance on language detection&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-considerations&quot; class=&quot;appendix informative&quot; readability=&quot;38.681593794076&quot;&gt;&lt;h2 id=&quot;b-security-considerations&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.&lt;/span&gt; Security Considerations&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
&lt;section id=&quot;authorization&quot; readability=&quot;8.1196581196581&quot;&gt;&lt;h3 id=&quot;b-1-authentication-and-authorization&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.1&lt;/span&gt; Authentication and Authorization&lt;/h3&gt;
&lt;p&gt;ActivityPub uses authentication for two purposes; first, to authenticate clients to servers, and secondly in federated implementations to authenticate servers to each other.&lt;/p&gt;
&lt;p&gt;Unfortunately at the time of standardization, there are no strongly agreed upon mechanisms for authentication. Some possible directions for authentication are laid out &lt;a href=&quot;https://www.w3.org/wiki/SocialCG/ActivityPub/Authentication_Authorization&quot;&gt;in the Social Web Community Group Authentication and Authorization best practices report&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-verification&quot; readability=&quot;8.0921052631579&quot;&gt;&lt;h3 id=&quot;b-2-verification&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.2&lt;/span&gt; Verification&lt;/h3&gt;
&lt;p&gt;Servers should not trust client submitted content, and federated servers also should not trust content received from a server other than the content's origin without some form of verification.&lt;/p&gt;
&lt;p&gt;Servers should be careful to verify that new content is really posted by the actor that claims to be posting it, and that the actor has permission to update the resources it claims to. See also &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#obj&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;3.&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Objects&lt;/span&gt;&lt;/a&gt; and &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#authorization&quot; class=&quot;sec-ref&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.1&lt;/span&gt; &lt;span class=&quot;sec-title&quot;&gt;Authentication and Authorization&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-localhost&quot; readability=&quot;10&quot;&gt;&lt;h3 id=&quot;b-3-accessing-localhost-uris&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.3&lt;/span&gt; Accessing localhost URIs&lt;/h3&gt;
&lt;p&gt;It is often convenient while developing to test against a process running on localhost. However, permitting requests to localhost in a production client or server instance can be dangerous. Making requests to URIs on localhost which do not require authorization may unintentionally access or modify resources assumed to be protected to be usable by localhost-only.&lt;/p&gt;
&lt;p&gt;If your ActivityPub server or client does permit making requests to localhost URIs for development purposes, consider making it a configuration option which defaults to off.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-uri-schemes&quot; readability=&quot;8&quot;&gt;&lt;h3 id=&quot;b-4-uri-schemes&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.4&lt;/span&gt; URI Schemes&lt;/h3&gt;
&lt;p&gt;There are many types of URIs aside from just &lt;code&gt;http&lt;/code&gt; and &lt;code&gt;https&lt;/code&gt;. Some libraries which handle fetching requests at various URI schemes may try to be smart and reference schemes which may be undesirable, such as &lt;code&gt;file&lt;/code&gt;. Client and server authors should carefully check how their libraries handle requests, and potentially whitelist only certain safe URI types, such as &lt;code&gt;http&lt;/code&gt; and &lt;code&gt;https&lt;/code&gt;.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-recursive-objects&quot; readability=&quot;5&quot;&gt;&lt;h3 id=&quot;b-5-recursive-objects&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.5&lt;/span&gt; Recursive Objects&lt;/h3&gt;
&lt;p&gt;Servers should set a limit on how deep to recurse while resolving objects, or otherwise specially handle ActivityStreams objects with recursive references. Failure to properly do so may result in denial-of-service security vulnerabilities.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-spam&quot; readability=&quot;6&quot;&gt;&lt;h3 id=&quot;b-6-spam&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.6&lt;/span&gt; Spam&lt;/h3&gt;
&lt;p&gt;Spam is a problem in any network, perhaps especially so in federated networks. While no specific mechanism for combating spam is provided in ActivityPub, it is recommended that servers filter incoming content both by local untrusted users and any remote users through some sort of spam filter.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-federation-dos&quot; readability=&quot;9&quot;&gt;&lt;h3 id=&quot;b-7-federation-denial-of-service&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.7&lt;/span&gt; Federation denial-of-service&lt;/h3&gt;
&lt;p&gt;Servers should implement protections against denial-of-service attacks from other, federated servers. This can be done using, for example, some kind of ratelimiting mechanism. Servers should be especially careful to implement this protection around activities that involve side effects. Servers &lt;em class=&quot;rfc2119&quot; title=&quot;SHOULD&quot;&gt;SHOULD&lt;/em&gt; also take care not to overload servers with submissions, for example by using an exponential backoff strategy.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-c2s-ratelimiting&quot; readability=&quot;1.8220858895706&quot;&gt;&lt;h3 id=&quot;b-8-client-to-server-ratelimiting&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.8&lt;/span&gt; Client-to-server ratelimiting&lt;/h3&gt;
&lt;p&gt;Servers should ratelimit API client submissions. This serves two purposes:&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;It prevents malicious clients from conducting denial-of-service attacks on the server.&lt;/li&gt;
&lt;li&gt;It ensures that the server will not distribute so many activities that it triggers another server's &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#security-federation-dos&quot;&gt;denial-of-service protections&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;&lt;/section&gt;&lt;section id=&quot;security-c2s-response-dos&quot; readability=&quot;7&quot;&gt;&lt;h3 id=&quot;b-9-client-to-server-response-denial-of-service&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.9&lt;/span&gt; Client-to-server response denial-of-service&lt;/h3&gt;
&lt;p&gt;In order to prevent a client from being overloaded by oversized Collections, servers should take care to limit the size of Collection pages they return to clients. Clients should still be prepared to limit the size of responses they are willing to handle in case they connect to malicious or compromised servers, for example by timing out and generating an error.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-sanitizing-content&quot; readability=&quot;28&quot;&gt;&lt;h3 id=&quot;b-10-sanitizing-content&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.10&lt;/span&gt; Sanitizing Content&lt;/h3&gt;
&lt;p&gt;Any activity field being rendered for browsers (or other rich text enabled applications) should take care to sanitize fields containing markup to prevent cross site scripting attacks.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;security-not-displaying-bto-bcc&quot; readability=&quot;7.3618233618234&quot;&gt;&lt;h3 id=&quot;b-11-not-displaying-bto-and-bcc-properties&quot;&gt;&lt;span class=&quot;secno&quot;&gt;B.11&lt;/span&gt; Not displaying bto and bcc properties&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;bto&lt;/code&gt; and &lt;code&gt;bcc&lt;/code&gt; already &lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#remove-bto-bcc-before-delivery&quot;&gt;must be removed for delivery&lt;/a&gt;, but servers are free to decide how to represent the object in their own storage systems. However, since &lt;code&gt;bto&lt;/code&gt; and &lt;code&gt;bcc&lt;/code&gt; are only intended to be known/seen by the original author of the object/activity, servers should omit these properties during display as well.&lt;/p&gt;
&lt;/section&gt;&lt;/section&gt;&lt;section class=&quot;appendix informative&quot; id=&quot;acknowledgements&quot; readability=&quot;58.938053097345&quot;&gt;&lt;h2 id=&quot;c-acknowledgements&quot;&gt;&lt;span class=&quot;secno&quot;&gt;C.&lt;/span&gt; Acknowledgements&lt;/h2&gt;
&lt;p&gt;&lt;em&gt;This section is non-normative.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;This specification comes from years of hard work and experience by a number of communities exploring the space of federation on the web. In particular, much of this specification is informed by &lt;a href=&quot;https://www.w3.org/community/ostatus/wiki/Main_Page&quot;&gt;OStatus&lt;/a&gt; and the &lt;a href=&quot;https://github.com/pump-io/pump.io/blob/master/API.md&quot;&gt;Pump API&lt;/a&gt;, as pioneered by StatusNet (now GNU Social) and Pump.io. Both of those initiatives were the product of many developers' hard work, but more than anyone, Evan Prodromou has been a constant leader in this space, and it is unlikely that ActivityPub would exist in something resembling its current state without his hard work.&lt;/p&gt;
&lt;p&gt;Erin Shepherd built the initial version of this specification, borrowed from the ideas in the &lt;a href=&quot;https://github.com/pump-io/pump.io/blob/master/API.md&quot;&gt;Pump API&lt;/a&gt; document, mostly as a complete rewrite of text, but sharing most of the primary ideas while switching from ActivityStreams 1 to ActivityStreams 2.&lt;/p&gt;
&lt;p&gt;Jessica Tallon and Christopher Lemmer Webber took over as editors when the standard moved to the &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Social Working Group and did the majority of transition from Erin Shepherd's document to its current state as ActivityPub. Much of the document was rewritten and reorganized under the long feedback process of the Social Working Group.&lt;/p&gt;
&lt;p&gt;ActivityPub has been shaped by the careful input of many members in the &lt;abbr title=&quot;World Wide Web Consortium&quot;&gt;W3C&lt;/abbr&gt; Social Working Group. ActivityPub especially owes a great debt to Amy Guy, who has done more than anyone to map the ideas across the different Social Working Group documents through her work on [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-Social-Web-Protocols&quot;&gt;Social-Web-Protocols&lt;/a&gt;&lt;/cite&gt;]. Amy also laid out the foundations for a significant refactoring of the ActivityPub spec while sprinting for four days with Christopher Allan Webber. These revisions lead to cleaner separation between the client to server and server components, along with clarity about ActivityPub's relationship to [&lt;cite&gt;&lt;a class=&quot;bibref&quot; href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#bib-LDN&quot;&gt;LDN&lt;/a&gt;&lt;/cite&gt;], among many other improvements. Special thanks also goes to Benjamin Goering for putting together the implementation report template. We also thank mray for producing the spectacular tutorial illustrations (which are licensed under the same license as the rest of this document).&lt;/p&gt;
&lt;p&gt;Many people also helped ActivityPub along through careful review. In particular, thanks to: Aaron Parecki, AJ Jordan, Benjamin Goering, Caleb Langeslag, Elsa Balderrama, elf Pavlik, Eugen Rochko, Erik Wilde, Jason Robinson, Manu Sporny, Michael Vogel, Mike Macgirvin, nightpool, Puck Meerburg, Sandro Hawke, Sarven Capadisli, Tantek Çelik, and Yuri Volkov.&lt;/p&gt;
&lt;p&gt;This document is dedicated to all citizens of planet Earth. You deserve freedom of communication; we hope we have contributed in some part, however small, towards that goal and right.&lt;/p&gt;
&lt;/section&gt;&lt;section id=&quot;references&quot; class=&quot;appendix&quot;&gt;&lt;h2 id=&quot;d-references&quot;&gt;&lt;span class=&quot;secno&quot;&gt;D.&lt;/span&gt; References&lt;/h2&gt;
&lt;section id=&quot;normative-references&quot;&gt;&lt;h3 id=&quot;d-1-normative-references&quot;&gt;&lt;span class=&quot;secno&quot;&gt;D.1&lt;/span&gt; Normative references&lt;/h3&gt;
&lt;dl class=&quot;bibliography&quot;&gt;&lt;dt id=&quot;bib-Activity-Vocabulary&quot;&gt;[Activity-Vocabulary]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/&quot;&gt;&lt;cite&gt;Activity Vocabulary&lt;/cite&gt;&lt;/a&gt;. J. Snell. ActivityStreams Working Group. Editors Draft. URL: &lt;a href=&quot;https://www.w3.org/TR/activitystreams-vocabulary/&quot;&gt;https://www.w3.org/TR/activitystreams-vocabulary/&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-ActivityStreams&quot;&gt;[ActivityStreams]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://www.w3.org/TR/activitystreams-core/&quot;&gt;&lt;cite&gt;Activity Streams 2.0&lt;/cite&gt;&lt;/a&gt;. J. Snell. ActivityStreams Working Group. Editors Draft. URL: &lt;a href=&quot;https://www.w3.org/TR/activitystreams-core/&quot;&gt;https://www.w3.org/TR/activitystreams-core/&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-JSON-LD&quot;&gt;[JSON-LD]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://www.w3.org/TR/json-ld/&quot;&gt;&lt;cite&gt;JSON-LD 1.0&lt;/cite&gt;&lt;/a&gt;. Manu Sporny; Gregg Kellogg; Markus Lanthaler. W3C. 16 January 2014. W3C Recommendation. URL: &lt;a href=&quot;https://www.w3.org/TR/json-ld/&quot;&gt;https://www.w3.org/TR/json-ld/&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-LDN&quot;&gt;[LDN]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://www.w3.org/TR/ldn/&quot;&gt;&lt;cite&gt;Linked Data Notifications&lt;/cite&gt;&lt;/a&gt;. Sarven Capadisli; Amy Guy. W3C. 2 May 2017. W3C Recommendation. URL: &lt;a href=&quot;https://www.w3.org/TR/ldn/&quot;&gt;https://www.w3.org/TR/ldn/&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-RFC2119&quot;&gt;[RFC2119]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc2119&quot;&gt;&lt;cite&gt;Key words for use in RFCs to Indicate Requirement Levels&lt;/cite&gt;&lt;/a&gt;. S. Bradner. IETF. March 1997. Best Current Practice. URL: &lt;a href=&quot;https://tools.ietf.org/html/rfc2119&quot;&gt;https://tools.ietf.org/html/rfc2119&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-RFC7231&quot;&gt;[RFC7231]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc7231&quot;&gt;&lt;cite&gt;Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content&lt;/cite&gt;&lt;/a&gt;. R. Fielding, Ed.; J. Reschke, Ed.. IETF. June 2014. Proposed Standard. URL: &lt;a href=&quot;https://tools.ietf.org/html/rfc7231&quot;&gt;https://tools.ietf.org/html/rfc7231&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-RFC7234&quot;&gt;[RFC7234]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc7234&quot;&gt;&lt;cite&gt;Hypertext Transfer Protocol (HTTP/1.1): Caching&lt;/cite&gt;&lt;/a&gt;. R. Fielding, Ed.; M. Nottingham, Ed.; J. Reschke, Ed.. IETF. June 2014. Proposed Standard. URL: &lt;a href=&quot;https://tools.ietf.org/html/rfc7234&quot;&gt;https://tools.ietf.org/html/rfc7234&lt;/a&gt;&lt;/dd&gt;
&lt;/dl&gt;&lt;/section&gt;&lt;section id=&quot;informative-references&quot;&gt;&lt;h3 id=&quot;d-2-informative-references&quot;&gt;&lt;span class=&quot;secno&quot;&gt;D.2&lt;/span&gt; Informative references&lt;/h3&gt;
&lt;dl class=&quot;bibliography&quot;&gt;&lt;dt id=&quot;bib-Micropub&quot;&gt;[Micropub]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://www.w3.org/TR/micropub/&quot;&gt;&lt;cite&gt;Micropub&lt;/cite&gt;&lt;/a&gt;. Aaron Parecki. W3C. 23 May 2017. W3C Recommendation. URL: &lt;a href=&quot;https://www.w3.org/TR/micropub/&quot;&gt;https://www.w3.org/TR/micropub/&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-RFC6749&quot;&gt;[RFC6749]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6749&quot;&gt;&lt;cite&gt;The OAuth 2.0 Authorization Framework&lt;/cite&gt;&lt;/a&gt;. D. Hardt, Ed.. IETF. October 2012. Proposed Standard. URL: &lt;a href=&quot;https://tools.ietf.org/html/rfc6749&quot;&gt;https://tools.ietf.org/html/rfc6749&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-RFC6750&quot;&gt;[RFC6750]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://tools.ietf.org/html/rfc6750&quot;&gt;&lt;cite&gt;The OAuth 2.0 Authorization Framework: Bearer Token Usage&lt;/cite&gt;&lt;/a&gt;. M. Jones; D. Hardt. IETF. October 2012. Proposed Standard. URL: &lt;a href=&quot;https://tools.ietf.org/html/rfc6750&quot;&gt;https://tools.ietf.org/html/rfc6750&lt;/a&gt;&lt;/dd&gt;
&lt;dt id=&quot;bib-Social-Web-Protocols&quot;&gt;[Social-Web-Protocols]&lt;/dt&gt;
&lt;dd&gt;&lt;a href=&quot;https://www.w3.org/TR/social-web-protocols/&quot;&gt;&lt;cite&gt;Social Web Protocols&lt;/cite&gt;&lt;/a&gt;. Amy Guy. W3C. 25 December 2017. W3C Note. URL: &lt;a href=&quot;https://www.w3.org/TR/social-web-protocols/&quot;&gt;https://www.w3.org/TR/social-web-protocols/&lt;/a&gt;&lt;/dd&gt;
&lt;/dl&gt;&lt;/section&gt;&lt;/section&gt;&lt;p role=&quot;navigation&quot; id=&quot;back-to-top&quot;&gt;&lt;a href=&quot;https://www.w3.org/TR/2018/REC-activitypub-20180123/#toc&quot;&gt;&lt;abbr title=&quot;Back to Top&quot;&gt;↑&lt;/abbr&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/body&gt;</description>
<pubDate>Wed, 24 Jan 2018 13:34:34 +0000</pubDate>
<dc:creator>ingve</dc:creator>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.w3.org/TR/2018/REC-activitypub-20180123/</dc:identifier>
</item>
<item>
<title>7-Zip: Multiple Memory Corruptions via RAR and ZIP</title>
<link>https://landave.io/2018/01/7-zip-multiple-memory-corruptions-via-rar-and-zip/?hn</link>
<guid isPermaLink="true" >https://landave.io/2018/01/7-zip-multiple-memory-corruptions-via-rar-and-zip/?hn</guid>
<description>&lt;p&gt;In my previous posts about &lt;a href=&quot;https://landave.io/2017/07/bitdefender-remote-stack-buffer-overflow-via-7z-ppmd/&quot;&gt;the&lt;/a&gt; &lt;a href=&quot;https://landave.io/2017/08/bitdefender-heap-buffer-overflow-via-7z-lzma/&quot;&gt;two&lt;/a&gt; Bitdefender bugs related to 7z, I explicitly mentioned that Igor Pavlov’s 7-Zip reference implementation was not affected. Unfortunately, I cannot do the same for the bugs described in this blog post.&lt;/p&gt;
&lt;p&gt;I found these bugs during the analysis of a prominent antivirus product. As the vendor has not yet published a patch I will add the name of the affected product in an update to this post as soon as this happens. Since Igor Pavlov has already published a patched version of 7-Zip and exploitation is likely to be easier for 7-Zip, I figured it would be best to publish this post as soon as possible.&lt;/p&gt;
&lt;h2 id=&quot;introduction&quot;&gt;Introduction&lt;/h2&gt;
&lt;p&gt;In the following, I will outline two bugs that affect 7-Zip before version 18.00 as well as p7zip. The first one (RAR PPMd) is the more critical and the more involved one. The second one (ZIP Shrink) seems to be less critical, but also much easier to understand.&lt;/p&gt;
&lt;h2 id=&quot;memory-corruptions-via-rar-ppmd-cve-2018-5996&quot;&gt;Memory Corruptions via RAR PPMd (CVE-2018-5996)&lt;/h2&gt;
&lt;p&gt;7-Zip’s RAR code is mostly based on a recent UnRAR version. For version 3 of the RAR format, PPMd can be used, which is an implementation of the PPMII compression algorithm by Dmitry Shkarin. If you want to learn more about the details of PPMd and PPMII, I’d recommend Shkarin’s paper &lt;em&gt;PPM: one step to practicality&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Interestingly, the 7z archive format can be used with PPMd as well, and 7-Zip uses the same code that is used for RAR3. As a matter of fact, this is the very PPMd implementation that was used by Bitdefender in a way that caused a &lt;a href=&quot;https://landave.io/2017/07/bitdefender-remote-stack-buffer-overflow-via-7z-ppmd/&quot;&gt;stack based buffer overflow&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In essence, this bug is due to improper exception handling in 7-Zip’s RAR3 handler. In particular, one might argue that it is not a bug in the PPMd code itself or in UnRAR’s extraction code.&lt;/p&gt;
&lt;h3 id=&quot;the-bug&quot;&gt;The Bug&lt;/h3&gt;
&lt;p&gt;The RAR handler has a function NArchive::NRar::CHandler::Extract containing a loop that looks roughly as follows (heavily simplified!):&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;16&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;unsigned&lt;/span&gt; i = 0;; i++, &lt;span&gt;/*OMITTED: unpack size updates*/&lt;/span&gt;) {
  &lt;span&gt;//OMITTED: retrieve i-th item and setup input stream
&lt;/span&gt;  CMyComPtr&amp;lt;ICompressCoder&amp;gt; commonCoder;
  &lt;span&gt;switch&lt;/span&gt; (item.Method) {
    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'0'&lt;/span&gt;:
    {
      commonCoder = copyCoder;
      &lt;span&gt;break&lt;/span&gt;;
    }
    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'1'&lt;/span&gt;:
    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'2'&lt;/span&gt;:
    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'3'&lt;/span&gt;:
    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'4'&lt;/span&gt;:
    &lt;span&gt;case&lt;/span&gt; &lt;span&gt;'5'&lt;/span&gt;:
    {
      &lt;span&gt;unsigned&lt;/span&gt; m;
      &lt;span&gt;for&lt;/span&gt; (m = 0; m &amp;lt; methodItems.Size(); m++)
        &lt;span&gt;if&lt;/span&gt; (methodItems[m].RarUnPackVersion == item.UnPackVersion) { &lt;span&gt;break&lt;/span&gt;; }
      &lt;span&gt;if&lt;/span&gt; (m == methodItems.Size()) { m = methodItems.Add(CreateCoder(&lt;span&gt;/*OMITTED*/&lt;/span&gt;)); }
      &lt;span&gt;//OMITTED: solidness check
&lt;/span&gt;      commonCoder = methodItems[m].Coder;
      &lt;span&gt;break&lt;/span&gt;;
    }
    &lt;span&gt;default&lt;/span&gt;:
      outStream.Release();
      RINOK(extractCallback-&amp;gt;SetOperationResult(NExtract::NOperationResult::kUnsupportedMethod));
      &lt;span&gt;continue&lt;/span&gt;;
  }
  
  HRESULT result = commonCoder-&amp;gt;Code(inStream, outStream, &amp;amp;packSize, &amp;amp;outSize, progress);
  &lt;span&gt;//OMITTED: encryptedness, outsize and crc check
&lt;/span&gt;  outStream.Release();

  &lt;span&gt;if&lt;/span&gt; (result != S_OK) {
    &lt;span&gt;if&lt;/span&gt; (result == S_FALSE) { opRes = NExtract::NOperationResult::kDataError; }
    &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (result == E_NOTIMPL) { opRes = NExtract::NOperationResult::kUnsupportedMethod; }
    &lt;span&gt;else&lt;/span&gt; { &lt;span&gt;return&lt;/span&gt; result; }
  }
  RINOK(extractCallback-&amp;gt;SetOperationResult(opRes));
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The important bit about this function is essentially that at most one coder is created for each RAR unpack version. If an archive contains multiple items that are compressed with the same RAR unpack version, those will be decoded with the same coder object.&lt;/p&gt;
&lt;p&gt;Observe, moreover, that a call to the &lt;code&gt;Code&lt;/code&gt; method can fail, returning the result &lt;code&gt;S_FALSE&lt;/code&gt;, and the created coder will be reused for the next item anyway, given that the callback function does not catch this (it does not). So let us see where the error code &lt;code&gt;S_FALSE&lt;/code&gt; may come from. The method NCompress::NRar3::CDecoder::Code looks as follows (again simplified):&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;15&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;STDMETHODIMP CDecoder::Code(ISequentialInStream *inStream, ISequentialOutStream *outStream,
    &lt;span&gt;const&lt;/span&gt; UInt64 *inSize, &lt;span&gt;const&lt;/span&gt; UInt64 *outSize, ICompressProgressInfo *progress) {
  &lt;span&gt;try&lt;/span&gt; {
    &lt;span&gt;if&lt;/span&gt; (!inSize) { &lt;span&gt;return&lt;/span&gt; E_INVALIDARG; }
    &lt;span&gt;//OMITTED: allocate and initialize VM, window and bitdecoder
&lt;/span&gt;    _outStream = outStream;
    _unpackSize = outSize ? *outSize : (UInt64)(Int64)-1;
    &lt;span&gt;return&lt;/span&gt; CodeReal(progress);
  }
  &lt;span&gt;catch&lt;/span&gt;(&lt;span&gt;const&lt;/span&gt; CInBufferException &amp;amp;e)  { &lt;span&gt;return&lt;/span&gt; e.ErrorCode; }
  &lt;span&gt;catch&lt;/span&gt;(...) { &lt;span&gt;return&lt;/span&gt; S_FALSE; }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;CInBufferException&lt;/code&gt; is interesting. As the name suggests, this exception may be thrown while reading from the input stream. It is not completely straightforward, but nevertheless easily possible to trigger the exception with a RAR3 archive item such that the error code is &lt;code&gt;S_FALSE&lt;/code&gt;. I will leave it as an exercise for the interested reader to figure out the details of how this can be achieved.&lt;/p&gt;
&lt;p&gt;Why is this interesting? Well, because in case RAR3 with PPMd is used this exception may be thrown in the middle of an update of the PPMd model, putting the soundness of the model state at risk. Recall that the same coder will be used for the next item even after a &lt;code&gt;CInBufferException&lt;/code&gt; with error code &lt;code&gt;S_FALSE&lt;/code&gt; has been thrown.&lt;/p&gt;
&lt;p&gt;Note, moreover, that the RAR3 decoder holds the PPMd model state. A brief look at the method NCompress::NRar3::CDecoder::InitPPM reveals the fact that this model state is only reinitialized if an item explicitly requests it. This is a feature that allows to keep the same model with the collected probability heuristics between different items. But it also means that we can do the following:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Construct the first item of a RAR3 archive such that a &lt;code&gt;CInBufferException&lt;/code&gt; with error code &lt;code&gt;S_FALSE&lt;/code&gt; is thrown in the middle of a PPMd model update. Essentially, this means that we can let an arbitrary call to the &lt;code&gt;Decode&lt;/code&gt; method of the range decoder used in &lt;code&gt;Ppmd7_DecodeSymbol&lt;/code&gt; fail, jumping out of the PPMd code.&lt;/li&gt;
&lt;li&gt;The subsequent item of the archive does not have the &lt;code&gt;reset&lt;/code&gt; bit set that would cause the model to be reinitialized. Hence, the PPMd code will operate on a potentially broken model state.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;So far this may not look too bad. In order to understand how this bug can be turned into attacker controlled memory corruptions, we need to understand a little bit more about the PPMd model state and how it is updated.&lt;/p&gt;
&lt;h3 id=&quot;ppmd-preliminaries&quot;&gt;PPMd Preliminaries&lt;/h3&gt;
&lt;p&gt;The main idea of all PPM compression algorithms is to build a Markov model of some finite order &lt;em&gt;D&lt;/em&gt;. In the PPMd implementation, the model state is essentially a 256-ary &lt;em&gt;context tree&lt;/em&gt; of maximum depth &lt;em&gt;D&lt;/em&gt;, in which the path from the root to the current context node is to be interpreted as a sequence of byte symbols. In particular, the &lt;em&gt;parent&lt;/em&gt; relation is to be understood as a &lt;em&gt;suffix&lt;/em&gt; relation. Additionally, every context node stores frequency statistics about possible successor symbols connected with a successor context node.&lt;/p&gt;
&lt;p&gt;A context node is of type &lt;code&gt;CPpmd7_Context&lt;/code&gt;, defined as follows:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span&gt;typedef&lt;/span&gt; &lt;span&gt;struct&lt;/span&gt; CPpmd7_Context_ {
  UInt16 NumStats;
  UInt16 SummFreq;
  CPpmd_State_Ref Stats;
  CPpmd7_Context_Ref Suffix;
} CPpmd7_Context;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The field &lt;code&gt;NumStats&lt;/code&gt; holds the number of elements the &lt;code&gt;Stats&lt;/code&gt; array contains. The type &lt;code&gt;CPpmd_State&lt;/code&gt; is defined as follows:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span&gt;typedef&lt;/span&gt; &lt;span&gt;struct&lt;/span&gt; {
  Byte Symbol;
  Byte Freq;
  UInt16 SuccessorLow;
  UInt16 SuccessorHigh;
} CPpmd_State;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So far, so good. Now what about the model update? I will spare you the details, describing only abstractly how a new symbol is decoded:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;When &lt;code&gt;Ppmd7_DecodeSymbol&lt;/code&gt; is called, the current context is &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt;, which is equal to &lt;code&gt;p-&amp;gt;MaxContext&lt;/code&gt;, assuming a sound model state.&lt;/li&gt;
&lt;li&gt;A &lt;em&gt;threshold&lt;/em&gt; value is read from the range decoder. This value is used to find a corresponding symbol in the &lt;code&gt;Stats&lt;/code&gt; array of the current context &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;If no corresponding symbol can be found, &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt; is moved upwards the tree (following the &lt;code&gt;suffix&lt;/code&gt; links) until a context with (strictly) larger &lt;code&gt;Stats&lt;/code&gt; array is found. Then, a new &lt;em&gt;threshold&lt;/em&gt; is read and used to find a corresponding value in the current &lt;code&gt;Stats&lt;/code&gt; array, ignoring the symbols of the contexts that have been previously visited. This process is repeated until a value is found.&lt;/li&gt;
&lt;li&gt;Finally, the ranger decoder’s &lt;code&gt;decode&lt;/code&gt; method is called, the found state is written to &lt;code&gt;p-&amp;gt;FoundState&lt;/code&gt;, and one of the &lt;code&gt;Ppmd7_Update&lt;/code&gt; functions is called to update the model. As a part of this process, the &lt;code&gt;UpdateModel&lt;/code&gt; function adds the found symbol to the &lt;code&gt;Stats&lt;/code&gt; array of each context between &lt;code&gt;p-&amp;gt;MaxContext&lt;/code&gt; and &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt; (exclusively).&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;One of the key invariants the update mechanism tries to establish is that the &lt;code&gt;Stats&lt;/code&gt; array of every context contains each of the 256 symbols at most once. However, this property only follows inductively, since there is no explicit duplicate check when a new symbol is inserted. With the bug described above, it is easy to see how we can add duplicate symbols to &lt;code&gt;Stats&lt;/code&gt; arrays:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;The first RAR3 item is created such that a few context nodes are created, and the function &lt;code&gt;Ppmd7_DecodeSymbol&lt;/code&gt; then moves &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt; upwards the tree at least once, until the corresponding symbol is found. Then, the subsequent call to the range decoders &lt;code&gt;decode&lt;/code&gt; method fails with a &lt;code&gt;CInBufferException&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;The next RAR3 item does not have the &lt;code&gt;reset&lt;/code&gt; bit set, so that we can continue with the previously created PPMd model.&lt;/li&gt;
&lt;li&gt;The &lt;code&gt;Ppmd7_DecodeSymbol&lt;/code&gt; function is entered with a fresh range decoder and &lt;code&gt;p-&amp;gt;MinContext != p-&amp;gt;MaxContext&lt;/code&gt;. It finds the corresponding symbol immediately in &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt;. However, this symbol may now be one that already occurs in the contexts between &lt;code&gt;p-&amp;gt;MaxContext&lt;/code&gt; and &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt;. When the &lt;code&gt;UpdateModel&lt;/code&gt; function is called, this symbol is added as a duplicate to the &lt;code&gt;Stats&lt;/code&gt; array to each context between &lt;code&gt;p-&amp;gt;MaxContext&lt;/code&gt; and &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt; (exclusively).&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Okay, so now we know how to add duplicate symbols into the &lt;code&gt;Stats&lt;/code&gt; array. Let us see how we can make use of this to cause an actual memory corruption.&lt;/p&gt;
&lt;h3 id=&quot;triggering-a-stack-buffer-overflow&quot;&gt;Triggering a Stack Buffer Overflow&lt;/h3&gt;
&lt;p&gt;The following code is run as a part of &lt;code&gt;Ppmd7_DecodeSymbol&lt;/code&gt; to move the &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt; pointer upwards the context tree:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;12&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;CPpmd_State *ps[256];
&lt;span&gt;unsigned&lt;/span&gt; numMasked = p-&amp;gt;MinContext-&amp;gt;NumStats;
&lt;span&gt;do&lt;/span&gt; {
  p-&amp;gt;OrderFall++;
  &lt;span&gt;if&lt;/span&gt; (!p-&amp;gt;MinContext-&amp;gt;Suffix) { &lt;span&gt;return&lt;/span&gt; -1; }
  p-&amp;gt;MinContext = Ppmd7_GetContext(p, p-&amp;gt;MinContext-&amp;gt;Suffix);
} &lt;span&gt;while&lt;/span&gt; (p-&amp;gt;MinContext-&amp;gt;NumStats == numMasked);
UInt32 hiCnt = 0;
CPpmd_State *s = Ppmd7_GetStats(p, p-&amp;gt;MinContext);
&lt;span&gt;unsigned&lt;/span&gt; i = 0;
&lt;span&gt;unsigned&lt;/span&gt; num = p-&amp;gt;MinContext-&amp;gt;NumStats - numMasked;
&lt;span&gt;do&lt;/span&gt; {
  &lt;span&gt;int&lt;/span&gt; k = (&lt;span&gt;int&lt;/span&gt;)(MASK(s-&amp;gt;Symbol));
  hiCnt += (s-&amp;gt;Freq &amp;amp; k);
  ps[i] = s++;
  i -= k;
} &lt;span&gt;while&lt;/span&gt; (i != num);&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;MASK&lt;/code&gt; is a macro that accesses a byte array which holds the value &lt;code&gt;0x00&lt;/code&gt; at the index of each masked symbol, and the value &lt;code&gt;0xFF&lt;/code&gt; otherwise. Clearly, the intention is to fill the stack buffer &lt;code&gt;ps&lt;/code&gt; with pointers to all unmasked symbol states.&lt;/p&gt;
&lt;p&gt;Observe that the stack buffer &lt;code&gt;ps&lt;/code&gt; has a fixed size of 256 and there is no overflow check. This means that if the &lt;code&gt;Stats&lt;/code&gt; array contains a masked symbol multiple times, we can access the array out of bound and overflow the &lt;code&gt;ps&lt;/code&gt; buffer.&lt;/p&gt;
&lt;p&gt;Usually, such out of bound buffer reads make exploitation very difficult, because one cannot easily control the memory that is read. However, this is no issue in the case of PPMd, because the implementation allocates only one large pool on the heap, and then makes use of its own memory allocator to allocate all context and state structs within this pool. This ensures very quick allocation and a low memory usage, but it also allows an attacker to control the out of bound read to structures within this pool very reliably and independently of the system’s heap implementation. For example, the first RAR3 item can be constructed such that the pool is filled with the desired data, avoiding uninitialized out of bound reads.&lt;/p&gt;
&lt;p&gt;Finally, note that the attacker can overflow the stack buffer with pointers to data that is highly attacker controlled itself.&lt;/p&gt;
&lt;h3 id=&quot;triggering-a-heap-buffer-overflow&quot;&gt;Triggering a Heap Buffer Overflow&lt;/h3&gt;
&lt;p&gt;Building on the previous section, we now want to corrupt the heap. Perhaps not surprisingly, it is also possible to read the &lt;code&gt;Stats&lt;/code&gt; array out of bound without overflowing the stack buffer &lt;code&gt;ps&lt;/code&gt;. This allows us to let &lt;code&gt;s&lt;/code&gt; point to a CPpmd_State with attacker controlled data. Since &lt;code&gt;p-&amp;gt;FoundState&lt;/code&gt; may be one of the &lt;code&gt;ps&lt;/code&gt; states and the model updating process assumes that the &lt;code&gt;Stats&lt;/code&gt; array of &lt;code&gt;p-&amp;gt;MinContext&lt;/code&gt; as well as its suffix contexts contain the symbol &lt;code&gt;p-&amp;gt;FoundState-&amp;gt;Symbol&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This code fragment is part of the function &lt;code&gt;UpdateModel&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;9&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span&gt;do&lt;/span&gt; { s++; } &lt;span&gt;while&lt;/span&gt; (s-&amp;gt;Symbol != p-&amp;gt;FoundState-&amp;gt;Symbol);
&lt;span&gt;if&lt;/span&gt; (s[0].Freq &amp;gt;= s[-1].Freq) {
  SwapStates(&amp;amp;s[0], &amp;amp;s[-1]);
  s--;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Again, there is no bound check on the &lt;code&gt;Stats&lt;/code&gt; array, so the pointer &lt;code&gt;s&lt;/code&gt; can be moved easily over the end of the allocated heap buffer. Optimally, we would construct our input such that &lt;code&gt;s&lt;/code&gt; is out of bound and &lt;code&gt;s-1&lt;/code&gt; within the allocated pool, allowing an attacker controlled heap corruption.&lt;/p&gt;
&lt;h3 id=&quot;on-attacker-control-exploitation-and-mitigation&quot;&gt;On Attacker Control, Exploitation and Mitigation&lt;/h3&gt;
&lt;p&gt;The 7-Zip binaries for Windows are shipped with neither the &lt;code&gt;/NXCOMPAT&lt;/code&gt; nor the &lt;code&gt;/DYNAMICBASE&lt;/code&gt; flags. This means effectively that 7-Zip runs without ASLR on all Windows systems, and DEP is only enabled on Windows x64 or on Windows 10 x86. For example, the following screenshot shows the most recent 7-Zip 18.00 running on a fully updated Windows 8.1 x86: &lt;img src=&quot;https://landave.io/files/windows8.1_x86_7z_18.00_process_explorer.png&quot; alt=&quot;7-Zip 18.00 in Process Explorer on Windows 8.1 x86&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Moreover, 7-Zip is compiled without &lt;code&gt;/GS&lt;/code&gt; flag, so there are no stack canaries.&lt;/p&gt;
&lt;p&gt;Since there are various ways to corrupt the stack and the heap in highly attacker controlled ways, exploitation for remote code execution is straightforward, especially if no DEP is used.&lt;/p&gt;
&lt;p&gt;I have discussed this issue with Igor Pavlov and tried to convince him to enable all three flags. However, he refused to enable &lt;code&gt;/DYNAMICBASE&lt;/code&gt; because he prefers to ship the binaries without relocation table to achieve a minimal binary size. Moreover, he doesn’t want to enable &lt;code&gt;/GS&lt;/code&gt;, because it could affect the runtime as well as the binary size. At least he will try to enable &lt;code&gt;/NXCOMPAT&lt;/code&gt; for the next release. Apparently, it is currently not enabled because 7-Zip is linked with an obsolete linker that doesn’t support the flag.&lt;/p&gt;
&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;The outlined heap and stack memory corruptions are only scratching the surface of possible exploitation paths. Most likely there are many other and possibly even neater ways of causing memory corruptions in an attacker controlled fashion.&lt;/p&gt;
&lt;p&gt;This bug demonstrates again how difficult it can be to integrate external code into an existing code base. In particular, handling exceptions correctly and understanding the control flow they induce can be challenging.&lt;/p&gt;
&lt;p&gt;In the post about &lt;a href=&quot;https://landave.io/2017/08/bitdefender-heap-buffer-overflow-via-7z-lzma/&quot;&gt;Bitdefender’s PPMd stack buffer overflow&lt;/a&gt;, I already made clear that the PPMd code is very fragile. A slight misuse of its API, or a tiny mistake while integrating it into another code base may lead to multiple dangerous memory corruptions.&lt;/p&gt;
&lt;p&gt;If you use Shkarin’s PPMd implementation, I would strongly recommend you to harden it by adding out of bound checks wherever possible, and to make sure the basic model invariants always hold. Moreover, in case exceptions are used, one could add an additional &lt;code&gt;error&lt;/code&gt; flag to the model that is set to true before updating the model, and only set to false after the update has been successfully completed. This should significantly mitigate the danger of corrupting the model state.&lt;/p&gt;
&lt;p&gt;Do you have any comments, feedback, doubts, or complaints? I would love to hear them. You can find my e-mail address on the &lt;a href=&quot;https://landave.io/about/&quot;&gt;about&lt;/a&gt; page.&lt;/p&gt;
&lt;p&gt;Alternatively, you are invited to join the discussion on &lt;a href=&quot;https://news.ycombinator.com/item?id=16222342&quot;&gt;HackerNews&lt;/a&gt; or on &lt;a href=&quot;https://www.reddit.com/r/netsec/comments/7se84r/7zip_multiple_memory_corruptions_via_rar_and_zip/&quot;&gt;/r/netsec&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;timeline-of-disclosure&quot;&gt;Timeline of Disclosure&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;2018/01/06 - Discovery&lt;/li&gt;
&lt;li&gt;2018/01/06 - Report&lt;/li&gt;
&lt;li&gt;2018/01/10 - Patched version 7-Zip 18.00 released&lt;/li&gt;
&lt;li&gt;2018/01/22 - MITRE assigned CVE-2018-5996&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;zip-shrink-heap-buffer-overflow-cve-2017-17969&quot;&gt;ZIP Shrink: Heap Buffer Overflow (CVE-2017-17969)&lt;/h2&gt;
&lt;p&gt;Let us proceed by discussing the other bug, which concerns ZIP Shrink. Shrink is an implementation of the Lempel-Ziv-Welch (LZW) compression algorithm. It has been used by PKWARE’s PKZIP before version 2.0, which was released in 1993 (sic!). In fact, shrink is so old and so rarely used, that already in 2005, when Igor Pavlov wrote 7-Zip’s shrink decoder, he had a hard time finding sample archives to test the code.&lt;/p&gt;
&lt;p&gt;In essence, shrink is LZW with a dynamic code size between 9 and 13 bits, and a special feature that allows to partially clear the dictionary.&lt;/p&gt;
&lt;p&gt;7-Zip’s shrink decoder is quite straightforward and easy to understand. In fact, it consists of only 200 lines of code. Nevertheless, it contains a buffer overflow bug.&lt;/p&gt;
&lt;h3 id=&quot;the-bug-1&quot;&gt;The Bug&lt;/h3&gt;
&lt;p&gt;The shrink model’s state essentially only consists of the two arrays &lt;code&gt;_parents&lt;/code&gt; and &lt;code&gt;_suffixes&lt;/code&gt;, which store the LZW dictionary in a space efficient way. Moreover, there is a buffer &lt;code&gt;_stack&lt;/code&gt; to which the current sequence is written:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;  UInt16 _parents[kNumItems];
  Byte _suffixes[kNumItems];
  Byte _stack[kNumItems];&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The following code fragment is part of the method NCompress::NShrink::CDecoder::CodeReal:&lt;/p&gt;
&lt;div class=&quot;highlight&quot; readability=&quot;8&quot;&gt;
&lt;pre&gt;
&lt;code class=&quot;language-cpp&quot; data-lang=&quot;cpp&quot;&gt;&lt;span&gt;unsigned&lt;/span&gt; cur = sym;
&lt;span&gt;unsigned&lt;/span&gt; i = 0;
&lt;span&gt;while&lt;/span&gt; (cur &amp;gt;= 256) {
  _stack[i++] = _suffixes[cur];
  cur = _parents[cur];
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Observe that there is no bound check on the value of &lt;code&gt;i&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;One way this can be exploited to overflow the heap buffer &lt;code&gt;_stack&lt;/code&gt; is by constructing a symbol of sequence such that the &lt;code&gt;_parents&lt;/code&gt; array forms a cycle. This is possible, because the decoder only ensures that a parent node does not link to itself (cycle of length one). Interestingly, the old versions of PKZIP create shrink archives that may contain such self-linked parents, so a compatible implementation should actually accept this (7-Zip 18.00 fixes this).&lt;/p&gt;
&lt;p&gt;Moreover, using the special symbol sequence &lt;code&gt;256,2&lt;/code&gt; one can clear parent nodes in an attacker controlled fashion. A cleared parent node will be set to &lt;code&gt;kNumItems&lt;/code&gt;. Since there is no check whether a parent has been cleared or not, the parents array can be accessed out of bound.&lt;/p&gt;
&lt;p&gt;This sounds promising, and it is actually possible to construct archives that make the decoder write attacker controlled data out of bound. However, I didn’t find an easy way to do so without ending up in an infinite loop. This matters, because the index &lt;code&gt;i&lt;/code&gt; is increased in every iteration of the loop. Hence, an infinite loop will quickly lead to a segmentation fault, making exploitation for code execution very difficult (if not impossible). However, I didn’t spend too much time on this, so maybe it is possible to corrupt the heap without entering an infinite loop after all.&lt;/p&gt;
&lt;h3 id=&quot;conclusion-1&quot;&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;It is somewhat surprising that this bug has survived for such a long time in 7-Zip. I assume this is simply because shrinked ZIP archives are almost non-existent nowadays.&lt;/p&gt;
&lt;p&gt;While probably less critical than the RAR PPMd bug, I still found this to be an interesting bug.&lt;/p&gt;
&lt;p&gt;In case you have an idea on how to avoid the infinite loop and still corrupt the heap, feel free to shoot me an &lt;a href=&quot;https://landave.io/about/&quot;&gt;e-mail&lt;/a&gt;.&lt;/p&gt;
&lt;h3 id=&quot;timeline-of-disclosure-1&quot;&gt;Timeline of Disclosure&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;2017/12/29 - Discovery&lt;/li&gt;
&lt;li&gt;2017/12/29 - Report&lt;/li&gt;
&lt;li&gt;2017/12/29 - MITRE assigned CVE-2017-17969&lt;/li&gt;
&lt;li&gt;2018/01/10 - Patched version 7-Zip 18.00 released&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;thanks-acknowledgements&quot;&gt;Thanks &amp;amp; Acknowledgements&lt;/h2&gt;
&lt;p&gt;I would like to thank Igor Pavlov for fixing the bugs so quickly.&lt;/p&gt;

</description>
<pubDate>Wed, 24 Jan 2018 13:06:28 +0000</pubDate>
<dc:creator>landave</dc:creator>
<og:title>7-Zip: Multiple Memory Corruptions via RAR and ZIP - landave's blog</og:title>
<og:type>website</og:type>
<og:description>Blog about anti-virus software and its issues.</og:description>
<og:image>https://landave.io/files/7zip_rar_zip.png</og:image>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://landave.io/2018/01/7-zip-multiple-memory-corruptions-via-rar-and-zip/?hn</dc:identifier>
</item>
</channel>
</rss>