<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=hnrss.org%2Fnewest%3Fpoints%3D200&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://hnrss.org/newest?points=200" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dhnrss.org%252Fnewest%253Fpoints%253D200%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>Hacker News: Newest</title>
<link>https://news.ycombinator.com/newest</link>
<description>Hacker News RSS</description>
<item>
<title>I have no side code projects to show you</title>
<link>https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</link>
<guid isPermaLink="true" >https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</guid>
<description>&lt;p&gt;I know the exact moment in the interview I lost the job for a boutique app firm in downtown Austin. They wanted to see some of my code, and, of course, they understood I couldn't show them anything from my current or past companies. But that shouldn't be an issue, certainly I can demonstrate any one of my numerous side projects that I no-doubt have in progress.&lt;/p&gt;
&lt;p&gt;But I have no side projects. I have no presence on github. I have no open-source projects with which I whittle away my evenings. I have exactly zero pull requests for any of the latest sexy codebases all the cool coders are in on. I don't mess around with exercises in Haskel. And I loathe hackathons.&lt;/p&gt;
&lt;p&gt;And when I said I have no side projects to show, what they heard - what interviewers hear - is: I am not the best. I am not a passionate developer. I don't spend the necessary time to keep on top of my education and skills. That development is &quot;just a job.&quot; &lt;/p&gt;
&lt;p&gt;And to some degree this is true. I am not the best. I have met some of the best, and we are fundamentally different creatures. If I may make an analogy, back in my distance running days I could consistently get in the top 5-10% of finishers, but the differences between me and the elites was the difference between me and the bottom 1%. I was a passionate runner. I ran 50+ miles a week. I pushed myself to excel. To excel within the boundaries of the time and life-balance I had set for myself. To achieve elite status would take a life sacrifice that I wasn't willing to make. It would mean running at the expense of all other experiences. &lt;/p&gt;
&lt;p&gt;There is a small group of people for whom code speaks. They discovered more than a job, they discovered a calling. Code is a craft and they are artists. For every one of those folks there are thousands of amazing, solid developers that will write circles around 90% of the other CS graduates. But they aren't &quot;the best.&quot;&lt;/p&gt;
&lt;p&gt;When companies say they want &quot;passionate developers&quot; that are coding in their free time, when companies say they want &quot;the best,&quot; I get nervous. It's a myopic approach to team building. It's a subtle way of requesting human machines.&lt;/p&gt;
&lt;p&gt;I've made it a point to add to my resume and online profiles the other things about which I am passionate. The silly art project that I launched in Austin. My dog business. Running, painting, writing. It's important to me that these attributes be valued by my workplace. If they value it in me, then they value it in others, and that speaks volumes about the company culture. &lt;/p&gt;
&lt;p&gt;The world is catching up to this reality, bit by bit. The Bay Area, Seattle, NYC - these may be the hottest, hippest areas to have your startup or giant conglomerate, but you severely limit your pool of potential candidates to a tiny puddle of people that can live in these cities. I have four children. I own an entire separate dog playcare business with my wife. I am an active member of the local art community. There is no way I could ever live in one of these other cities. And while some companies are realizing that I am not an edge case - Facebook, Google, Amazon, they all have a significant presence in Austin specifically because they've drained the talent elsewhere - too many places are still convinced that &quot;the best&quot; lives to code. That &quot;the best&quot; is attracted to your company because you have a nap room, work 80 hour weeks and have a ping pong table. That &quot;the best&quot; is happy to drink into the Earth every Friday and has absolutely no evening or weekend plans. Ever.&lt;/p&gt;
&lt;p&gt;I did not get the job at the boutique app firm in downtown Austin. I have no code side projects to show you. On Thursday evenings I go to a life drawing studio and spend three hours with other artists sketching a variety of poses from our model. Most evenings after I've made dinner and spent time with the wife and kids, I sit down and knock out 2,000 words on my fifth novel (and like the four abominations that preceded, it will sit in my Pile of Shame, never to be seen by another human being.) Weekends I hike. I dive deep into art. I am a passionate developer because I am a passionate person. But I have no code here to show you.&lt;/p&gt;
</description>
<pubDate>Wed, 25 Oct 2017 19:15:39 +0000</pubDate>
<dc:creator>nnd</dc:creator>
<og:type>article</og:type>
<og:title>No, I have no side code projects to show you | Codementor</og:title>
<og:url>https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</og:url>
<og:image></og:image>
<og:description>I know the exact moment in the interview I lost the job for a boutique app firm in downtown Austin. They wanted to see some of my code, and, of</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.codementor.io/ezekielbuchheit/no-i-have-no-side-code-projects-to-show-you-cz1tyhgdz</dc:identifier>
</item>
<item>
<title>Microsoft Has Stopped Manufacturing The Kinect</title>
<link>https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</link>
<guid isPermaLink="true" >https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</guid>
<description>&lt;div readability=&quot;16&quot;&gt;
&lt;p&gt;&lt;span&gt;Manufacturing of the Kinect &lt;/span&gt;&lt;span&gt;has shut down. Originally created for the Xbox 360, Microsoft’s watershed depth camera and voice recognition microphone sold ~35 million units since its debut in 2010, but Microsoft will no longer produce it when retailers sell off their existing stock. The company will continue to support Kinect for customers on Xbox, but ongoing developer tools remain unclear. &lt;/span&gt;&lt;span&gt;Microsoft shared the news with &lt;em&gt;Co.Design&lt;/em&gt; in exclusive interviews with Alex Kipman, creator of the Kinect, and Matthew Lapsen, GM of Xbox Devices Marketing.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;&lt;div class=&quot;ad-wrapper ad-wrapper--mobileparallax_1&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;73.014804063861&quot;&gt;
&lt;p&gt;The Kinect had already been slowly de-emphasized by Microsoft, as the Xbox team anchored back around traditional gaming to counter the PS4, rather than take its more experimental approach to entertainment. Yet wh&lt;span&gt;ile the Kinect as a standalone product is off the market, its core sensor lives on. Kinect v4–and soon to be, v5–powers &lt;/span&gt;&lt;a href=&quot;https://www.fastcodesign.com/3041243/hololens-microsofts-sci-fi-glasses-that-make-you-see-holograms&quot;&gt;&lt;span&gt;Microsoft’s augmented reality Hololens&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, which Kipman also created. Meanwhile, Kinect’s team of specialists have gone on to build essential Microsoft technologies, including the Cortana voice assistant, the Windows Hello biometric facial ID system, and a context-aware user interface for the future that Microsoft dubs&lt;/span&gt; &lt;a href=&quot;https://developer.microsoft.com/en-us/windows/mixed-reality/voice_design&quot;&gt;&lt;span&gt;Gaze, Gesture, and Voice (GGV)&lt;/span&gt;&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148019 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_01-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;Launched in 2010 with a $500 million marketing campaign, the Kinect painted a room in a discoball of invisible, infrared dots, mapping it in 3D space and allowing unprecedented tracking of the human body. The Kinect seemed perfect for getting gamers off the couch. Why press a button to duck, when you can just duck? It also enabled handy voice commands, when they worked, like “Xbox On” to turn on the Xbox One console.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;As one of the first journalists&lt;/span&gt; &lt;a href=&quot;https://gizmodo.com/5565657/xbox-360-kinect-puts-play-back-in-gameplay&quot;&gt;&lt;span&gt;to try Kinect back in 2010&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, though, it was immediately apparent to me that Kinect was a lot more important than what was then popularly framed as Microsoft’s &lt;a href=&quot;https://gizmodo.com/5565628/nintendo-scopes-out-the-competition&quot;&gt;Nintendo Wii killer&lt;/a&gt;. (Remember the Nintendo Wii?!?) It was Microsoft’s greater attempt to blur the line between the human body and the human interface–beyond the existing limitations of keyboards, mice, and even touch screens.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;As&lt;/span&gt; &lt;a href=&quot;https://gizmodo.com/5565657/xbox-360-kinect-puts-play-back-in-gameplay&quot;&gt;&lt;span&gt;I wrote at the time&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, “There’s something very special about using Microsoft’s Kinect system, something that separates it from every other combination of software and hardware I’ve ever used. Kinect adapts and accommodates the user. I’m not learning it; it’s learning me . . . I’ve never felt that a computer understood me—a flesh-and-bone human—so well.”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148020 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_02-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;In the years since, I don’t believe it an exaggeration to say that Kinect has been the single most influential, or at least prescient, piece of hardware outside of the iPhone. Technologically, it was the first consumer-grade device to ship with machine learning at its core, according to Microsoft. Functionally, it’s been mimicked, too. Since 2010, Apple introduced the Siri voice assistant copying the speak-to-control functions of Kinect, and Google started its own 3D tracking system, called &lt;a href=&quot;https://www.fastcodesign.com/3060819/what-is-googles-project-tango-exactly-and-why-should-you-care&quot;&gt;Project Tango&lt;/a&gt; (which was founded and continues to be led by Johnny Lee, who helped on the original Kinect). Vision and voice systems have become nearly ubiquitous in smartphones, and they’re gradually taking over homes, too. Take Amazon Echo bringing voice assistants to our grandparents’ living rooms–or the newer, &lt;a href=&quot;https://www.fastcodesign.com/90112048/amazons-new-ai-selfie-machine-is-the-privacy-parable-for-our-time&quot;&gt;Echo Show upping the ante by adding a camera to Alexa&lt;/a&gt;. Even the networked Nest Cam owes a debt to the Kinect being first through the gate, and taking&lt;/span&gt; &lt;a href=&quot;https://kotaku.com/xbox-one-kinect-privacy-concerns-turn-it-off-511759241&quot;&gt;&lt;span&gt;the brunt of criticism on a whole new era of privacy concerns&lt;/span&gt;&lt;/a&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“Trust is something you earn in drops and lose in buckets,” says Kipman, alluding to industry-wide concern over consumer privacy. “I’d say Kinect started the process in 2010 in having to earn drops of trust. Any number of [bad] events in the world, each one, you lose a bucket.” But it wouldn’t be trust, or privacy, that would lose the Xbox consumer. It would be a fickle fanbase that thought innovation came at the price of fun. &lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_1&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;79.939291736931&quot;&gt;&lt;img class=&quot;size-large wp-image-90148021 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_03-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]
&lt;h2&gt;&lt;span&gt;Inventor Vs Consumer&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;“Oh my god. Jesus. There’s my reaction. You can quote me saying, ‘Oh, comma, shit, period.'”&lt;/p&gt;
&lt;p&gt;&lt;span&gt;That’s Golan Levin, director of the esteemed Studio for Creative Inquiry at CMU, when I broke the news that Kinect is being discontinued. His lab, and others like his, use Kinect for everything from experimental art, to creating next generation UI prototypes.  It’s been a vital tool to the greater research community.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“You know, we’re all at the whim of capital. And there’s no expectation that Microsoft should do something that doesn’t support their bottom line,” he continues, choosing the words of his swallowed rant very carefully. “But this is one of those times I’m sad to hear that a tool which is used for so many different applications, and is so ubiquitous, and has served crucially as a platform for so much creative experimentation, cultural progress, and secondary innovation, in so many different fields, isn’t supporting their core business.”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“Someone has made the decision that there aren’t enough games being sold that use it and it’s a shame,” he concludes. &lt;/span&gt;&lt;span&gt;To at least some extent, that’s true.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;If there’s one thing that went wrong with Kinect as a market success, you might call it “gamers.” While the device&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/3021828/the-xbox-one-is-microsofts-glitchy-vision-of-the-future&quot;&gt;&lt;span&gt;certainly had its functional flaws&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, including lag and occasional trouble hearing the user–it caught quick traction as an Xbox 360 accessory.  &lt;/span&gt;&lt;span&gt;The amazing games, however, never really arrived on the 360. There was no franchise with a $100 million budget developed for the Kinect, like a &lt;em&gt;Call of Duty&lt;/em&gt;, or a &lt;em&gt;Grand Theft Auto.&lt;/em&gt; In turn, Microsoft seems to have formulated a sensible plan. To ensure it was worthwhile for developers to invest heavily into Kinect games, it doubled down on Kinect, bundling it in every Xbox One it sold. That would ensure a larger market. However, Microsoft would also design the Xbox One to reserve a small part of its RAM and processing power, at all times, for the Kinect itself–meaning game developers couldn’t tap those resources for their own graphics and physics.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;As the Xbox One was announced, it promised a living room computer that could control your games, cable box, and even, one day,&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/1672641/microsofts-home-20-will-connect-xbox-one-to-the-internet-of-things&quot;&gt;&lt;span&gt;your entire home&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, in a combination of spoken words and gestures&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/3054927/microsofts-inspiring-bet-on-a-radical-new-type-of-design-thinking&quot;&gt;&lt;span&gt;that would be accessible to anyone&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. Amid innovative UI, Sony strategized the perfect counterpunch. On stage, at the E3 gaming convention just three weeks after the Xbox One’s announcement, then-CEO &lt;/span&gt;&lt;span&gt;Jack Tretton delivered &lt;a href=&quot;https://www.youtube.com/watch?v=_ufRev6mq7k&quot;&gt;a borderline quiet speech&lt;/a&gt;, stating in a slow cadence that Sony&lt;/span&gt; &lt;span&gt;“focused what gamers want most . . . for instance, PS4 won’t impose any new restrictions on the use of–” The discernibility of the quote cuts out there because the crowd is cheering so loud, knowing that the full system resources of the PS4 would be made available to developers. Tretton then hit on other concerns about the Xbox One, promising that Sony was a gamer’s first company, and announced a lower price for the PS4. Those sentiments echoed through message boards like Reddit, becoming something of a rallying cry to self-ascribed “hardcore gamers.” Years later, the&lt;/span&gt; &lt;a href=&quot;http://www.vgchartz.com/article/269453/ps4-vs-xbox-one-vs-switch-global-lifetime-salesjuly-2017-update/&quot;&gt;&lt;span&gt;PS4 is reported to have outsold the Xbox One by a factor of 2:1&lt;/span&gt;&lt;/a&gt;&lt;span&gt;. And Microsoft, in an attempt to limbo the Xbox One’s price down and get more gaming performance out of its chipset, unbundled the Kinect and freed its dedicated system resources. The Kinect was no longer a mandatory purchase with the Xbox, diminishing any guaranteed market for Kinect game developers.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_2&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;62.920221426246&quot;&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148022 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_04-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;“When we introduced Xbox One, we designed it to have the best experience with the Kinect. That was our goal with the Xbox One launch,” says Lapsen. “And like all product launches, you monitor that over time, you learn and adjust.” In practice, the Xbox’s target demo cared more about a few extra polygons than some new paradigm in human-computer interaction. So Microsoft decided to invest its talents in other products.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;But Levin, and other researchers like him, adored the Kinect for its forward-looking technologies. “The important thing about Kinect is it showed you could have an inexpensive depth camera. And it supported the development of thousands of applications that used depth sensing,” Levin says. He points out that it was literally Microsoft Kinect hardware that made it possible for a startup like Faceshift to exist. Built to perform extremely 3D tracking of the human face that’s suitable for biometric security, &lt;/span&gt;&lt;a href=&quot;https://www.fastcompany.com/3054008/apple-acquired-faceshift-the-company-behind-the-motion-capture-in-star-wars&quot;&gt;&lt;span&gt;Apple acquired Faceshift to replace its thumbprint scans.&lt;/span&gt;&lt;/a&gt; And to take advantage of the technology, Apple essentially built a Kinect clone right into &lt;a href=&quot;https://www.fastcompany.com/40466451/apple-iphone-x-has-a-huge-screen-facial-recognition-and-ar-powers&quot;&gt;&lt;span&gt;the iPhone X&lt;/span&gt;&lt;/a&gt;, having &lt;a href=&quot;https://www.fastcompany.com/3022194/prepare-for-many-more-igestures-as-apple-buys-primesense&quot;&gt;acquired PrimeSense in 2013&lt;/a&gt;, the Israeli company that developed 3D tracking technology that Microsoft licensed for the first Kinect.&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“That’s one of thousands of applications Kinect made possible,” Levin continues. “Not to mention its immense impact on computer research, robotics research and interactive media arts, which is my field.” Some of Levin’s own students used Kinect to &lt;a href=&quot;https://www.fastcodesign.com/1671355/kickstarting-an-interactive-documentary-with-people-made-of-code&quot;&gt;make a documentary in pointillist 3D&lt;/a&gt;–and then, expanded the technique to &lt;a href=&quot;https://www.fastcodesign.com/3053634/blackout-takes-you-inside-the-minds-of-nyc-subway-commuters&quot;&gt;create an interactive film inside a real NYC subway car&lt;/a&gt;. Today, Levin points out that there are other depth-sensing cameras on the market, aside from the hackable, standalone Kinect. But he also adds that, to all the museums which feature Kinect-powered interactive art in their exhibitions? They might want to go on eBay and buy a few backups. (I suspect that Levin himself is making a trip to eBay today, too.)&lt;/span&gt;&lt;/p&gt;
&lt;img class=&quot;size-large wp-image-90148023 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_05-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]
&lt;h2&gt;&lt;span&gt;Kinect Evolved&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;The Kinect may be done for gamers and researchers, but it’s not disappearing entirely. The truth of development at major corporations is always more nuanced than the fate of any single product. And aside from the fact that key Microsoft technologies like Cortana were built from Kinect, Kinect is still a vital sensor platform in which the company will continue to invest.&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Skyping with Alex Kipman, he whiteboards out the last 10 years of his life–from developing the Kinect in 2007, to the Hololens products of tomorrow. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“We looked at the problem ahead of us. We were using technology more and more. So we said, ‘Look, if we’re spending more and more time with these [technologies], one of two things will occur,'” recounts Kipman. “Either we’re going to spend more time interacting with machines in machine ways, and dealing with what’s behind the screen. Or we’re going to have to teach machines to interact better in our world, the analog universe, and teach them to coexist.”&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobileparallax_2&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;57&quot;&gt;
&lt;p&gt;&lt;span&gt;“I choose path two for us, as humans,” he concludes.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;To understand just how computers might one day understand the totality of human existence, his argument can be broken down into a 3×3 box. On the X axis, you have input, output, and haptics. On the Y axis, you have human, environment, and object. Each square is an order of magnitude harder than the last. So tracking a human? That’s hard. But tracking environments, with all their nuances is 10 times harder than tracking people. And tracking objects, with all their textures and variances in context? That’s 100 times harder than people.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148088 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;314&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_07b-kinect-tk.jpg&quot;/&gt;[Image: courtesy Alex Kipman]&lt;span&gt;So Kipman, being what he calls a “lazy” engineer, focused on the simplest square in his matrix to solve–the 1×1 problem, as he put it. Human input. That meant computers had to understand gestures and voice.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“People say I invented Kinect,” says Kipman. “I didn’t invent Kinect. I went through this table and identified the [easiest opportunity].”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Over time, Kinect got a lot better. It began to see more–from a mere 50-degree field of view, to 80 degrees, to 120 degrees in the V4 sensor used in the Hololens. It also, crucially, began to use less power: from 50W, to 25W, to a 1.5W peak today.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;These steady improvements allowed Kinect to be miniaturized into something small enough that we could wear it. And on that matrix? “We went to the right, and one down,” says Kipman. “We said, we kinda know how to do simple 1X1 problem, now it’s time to get more ambitious.” So in 2015, Microsoft announced the Hololens. The 10×10 problem: Environmental output. That means Hololens could see not just a person, but space. And it could not just recognize this space, but allow people to output things into that space–dragging and dropping holograms.&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&quot;ad-wrapper ad-wrapper--mobilerectangle_3&quot;&gt;
&lt;div class=&quot;ad-wrapper--ad-unit-wrap&quot;&gt;
&lt;p&gt;advertisement&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;div readability=&quot;28.105342362679&quot;&gt;
&lt;p&gt;&lt;img class=&quot;size-large wp-image-90148024 lazyload&quot; alt=&quot;&quot; width=&quot;525&quot; height=&quot;324&quot; sizes=&quot;(max-width: 525px) 100vw, 525px&quot; data-src=&quot;https://assets.fastcompany.com/image/upload/w_596,c_limit,q_auto:best,f_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/i-_06-kinect-tk.jpg&quot;/&gt;[Source Image: Microsoft]&lt;span&gt;“And that’s essentially what Hololens does,” Kipman continues. “Understand everything in human input, best of breed, but also human from the output perspective. Now, I can put photons on the back of your eyes and see holograms. I can [also] make something float. It’s materially different to then pin it to the real world. It means we also understand the environment.”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Next up? Hololens R&amp;amp;D will continue mandating that the Kinect sensor gets even better. I’m told an unannounced V5 version for the Kinect will sip on less than 1.5W at its most active–making it around 50 times more power-efficient than the original Kinect. And with more help from AI–along with oodles of hardware yet to be dreamed up–Microsoft can continue its quest to fill the 100×100 problem. Object haptics. At its most extreme, this is the Star Trek Holodeck. No longer do we manipulate mere photons. We can manipulate matter. Much&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/3032463/what-is-google&quot;&gt;&lt;span&gt;as has been teased by Google&lt;/span&gt;&lt;/a&gt; &lt;span&gt;and the&lt;/span&gt; &lt;a href=&quot;https://www.fastcodesign.com/video/mit-legend-hiroshi-ishii-urges-tech-to-think-beyond-the-iphone/hPj1HLTA&quot;&gt;&lt;span&gt;MIT Media Lab&lt;/span&gt;&lt;/a&gt;&lt;span&gt;, data and objects become one.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;“The vision here, the thing we’re infinitely patient about, and I’m personally going to spend the rest of my life working on, is the quest of making sure we fill out this table ever more pervasively,” says Kipman. “To empower people to work with technology from ever more human ways.”&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Wed, 25 Oct 2017 15:09:04 +0000</pubDate>
<dc:creator>tlarkworthy</dc:creator>
<og:type>article</og:type>
<og:title>Exclusive: Microsoft Has Stopped Manufacturing The Kinect | Co.Design</og:title>
<og:url>https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</og:url>
<og:description>But its influence, and core technology, lives on across the industry.</og:description>
<og:image>https://assets.fastcompany.com/image/upload/w_1280,f_auto,q_auto,fl_lossy/wp-cms/uploads/sites/4/2017/10/p-1-kinect-tk.jpg</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.fastcodesign.com/90147868/exclusive-microsoft-has-stopped-manufacturing-the-kinect</dc:identifier>
</item>
<item>
<title>Amazon Key is a new service that lets couriers unlock your front door</title>
<link>https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</link>
<guid isPermaLink="true" >https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</guid>
<description>&lt;p id=&quot;2qWAkF&quot;&gt;Twelve years ago, Amazon launched Prime, a subscription service that entitled members to free two-day shipping in the United States. Since then, it has added a number of options to make delivery faster and more convenient. Prime customers can get same-day delivery, and drop off with an hour or two on some items. Of course, customers aren’t always home to receive their packages. So Amazon started putting &lt;a href=&quot;https://www.theverge.com/2017/7/28/16054770/amazon-the-hub-delivery-locker-system&quot;&gt;lockers&lt;/a&gt; in nearby convenience stores and building lobbies. It even showed off drones that could drop the package right into your backyard. Today it’s taking the obvious next step and introducing a service that will allow Amazon couriers to open your front door and put your package safely inside your home.&lt;/p&gt;
&lt;p id=&quot;zxqMV0&quot;&gt;The service is called &lt;a href=&quot;https://go.redirectingat.com?id=66960X1514734&amp;amp;xs=1&amp;amp;url=http%3A%2F%2Fwww.amazon.com%2Fkey&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;Amazon Key&lt;/a&gt;, and it relies on a Amazon’s new &lt;a href=&quot;https://www.theverge.com/circuitbreaker/2017/10/25/16535002/amazon-cloud-cam-camera-alexa-key-in-home-delivery&quot;&gt;Cloud Cam&lt;/a&gt; and compatible smart lock. The camera is the hub, connected to the internet via your home Wi-Fi. The camera talks to the lock over Zigbee, a wireless protocol utilized by many smart home devices.&lt;/p&gt;
&lt;p id=&quot;QYBFgc&quot;&gt;When a courier arrives with a package for in-home delivery, they scan the barcode, sending a request to Amazon’s cloud. If everything checks out, the cloud grants permission by sending a message back to the camera, which starts recording. The courier then gets a prompt on their app, swipes the screen, and &lt;em&gt;v&lt;/em&gt;&lt;em&gt;oilà&lt;/em&gt;, your door unlocks. They drop off the package, relock the door with another swipe, and are on their way. The customer will get a notification that their delivery has arrived, along with a short video showing the drop-off to confirm everything was done properly.&lt;/p&gt;
&lt;span class=&quot;e-image__inner&quot;&gt;&lt;span class=&quot;e-image__image&quot; data-original=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9533691/bfarsace_171024_amazon_0001_2.jpg&quot;&gt;&lt;img class=&quot;c-dynamic-image&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs&quot; alt=&quot;&quot; data-chorus-optimize-field=&quot;main_image&quot; data-cid=&quot;site/dynamic_size_image-1508975330_4240_65858&quot; data-cdata=&quot;{&amp;quot;asset_id&amp;quot;:9533691,&amp;quot;ratio&amp;quot;:&amp;quot;*&amp;quot;}&quot;/&gt;&lt;noscript&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9533691/bfarsace_171024_amazon_0001_2.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;/noscript&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;e-image__meta&quot;&gt;The Amazon Cloud Cam and compatible locks &lt;cite&gt;Photo by Becca Farsace / The Verge&lt;/cite&gt;&lt;/span&gt;
&lt;p id=&quot;32XLRO&quot;&gt;The system works with locks from Yale and Kwikset, two well-known brands. But the other piece, the connected camera, is made by Amazon, and that’s a really big deal. Amazon is pushing even further into the smart home space, a market it’s made big strides in, thanks to the huge popularity of its Alexa devices. &lt;a href=&quot;https://go.redirectingat.com?id=66960X1514734&amp;amp;xs=1&amp;amp;url=http%3A%2F%2Fwww.amazon.com%2FCloudCam&quot; rel=&quot;nofollow noopener&quot; target=&quot;_blank&quot;&gt;Amazon’s Cloud Cam&lt;/a&gt; is a central piece of its Key service, but it’s also just a straightforward home security camera, one that can respond to voice commands and integrates with other Alexa devices. Amazon is planning to sell them in bundles and offer a subscription service for customers who want video archives and advanced home monitoring, putting the product in direct competition with Alphabet’s Nest brand and others in the smart home space, like Ring and Logitech.&lt;/p&gt;
&lt;p id=&quot;VZMdZt&quot;&gt;Prime customers can preorder the camera today. The Key app and actual delivery service will become available November 8th.&lt;/p&gt;
&lt;div class=&quot;c-float-right&quot;&gt;
&lt;aside id=&quot;8ZAxzV&quot;&gt;&lt;q&gt;Will Prime customers trust Amazon with entry privileges?&lt;/q&gt;&lt;/aside&gt;&lt;/div&gt;
&lt;p id=&quot;CQR47V&quot;&gt;All this raises a big question, however: will Prime customers trust Amazon to monitor their homes around the clock, and to know when it’s okay to unlock their doors for a stranger? And will the benefit of having your packages delivered quickly and securely outweigh any concerns about privacy and security customers might have?&lt;/p&gt;
&lt;p id=&quot;znO4oa&quot;&gt;For $249.99, Amazon will sell you a bundle that includes a smart lock, the connected camera, and free installation. Once you have the system in place, in-home delivery will begin to appear as an option every time you order something on Amazon. There is no additional charge, and Amazon says the in-home delivery will be available on over 10 million items (anything that isn’t too big and bulky). The one caveat is that, for now, Amazon only trusts its own delivery team to handle this work. So Amazon Key is only available in 37 cities across the US where Amazon Logistics handles the drop-off. But the company says it hopes to expand the service more widely in the future. It will be interesting to see if it eventually allows third-party delivery companies to handle this sensitive process.&lt;/p&gt;
&lt;span class=&quot;e-image__inner&quot;&gt;&lt;span class=&quot;e-image__image&quot; data-original=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9527241/amazon_cloud_cam.jpeg&quot;&gt;&lt;img class=&quot;c-dynamic-image&quot; src=&quot;data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs&quot; alt=&quot;&quot; data-chorus-optimize-field=&quot;main_image&quot; data-cid=&quot;site/dynamic_size_image-1508975330_2348_65859&quot; data-cdata=&quot;{&amp;quot;asset_id&amp;quot;:9527241,&amp;quot;ratio&amp;quot;:&amp;quot;*&amp;quot;}&quot;/&gt;&lt;noscript&gt;
&lt;p&gt;&lt;img src=&quot;https://cdn.vox-cdn.com/uploads/chorus_asset/file/9527241/amazon_cloud_cam.jpeg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;/noscript&gt;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;e-image__meta&quot;&gt;Cloud Cam streaming on an Echo Show &lt;cite&gt;Image: Amazon&lt;/cite&gt;&lt;/span&gt;
&lt;p id=&quot;ongDlA&quot;&gt;Amazon knows that it’s asking a lot of consumers with its new Key service. You have to really trust a company to let it record what’s going on inside your home at all times, and even more to unlock your door for strangers. So it tries to make sure the process is minimally invasive and totally transparent. Customers will get a notification the morning of a delivery, with a window of time when they should expect Amazon to arrive. They will get another notification when the delivery van shows up. That means you can start watching a live stream of the delivery on your camera if you want to keep an eye on things.&lt;/p&gt;
&lt;p id=&quot;4Rh0Xe&quot;&gt;Even if you choose in-home delivery, couriers are instructed to ring the bell or knock on the door first. That’s meant to let people inside know someone is entering, and also give the delivery person a chance to check for potential hazards like angry dogs. Couriers are instructed to open the door as little as possible, slide the packages in, and not enter the home if possible.&lt;/p&gt;
&lt;p id=&quot;8ZC7Df&quot;&gt;While Amazon isn’t going to allow any third-party delivery services to get inside your house with Key (at least not at launch), the company is hoping that you’ll use Key when ordering stuff like dog walking or kitchen cleaning from its Amazon Home Services division. In the coming months, it says Key will be integrated with over 1,200 service providers across 60 professions. You’ll log on to the website or app of a service like Rover.com or Merry Maids, and there will be a button offering the option for in-home service through Amazon Key.&lt;/p&gt;
&lt;div id=&quot;2kNsu5&quot;&gt;
&lt;p&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/wn7DBdaUNLA?rel=0&amp;amp;&quot; allowfullscreen=&quot;&quot; scrolling=&quot;no&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p id=&quot;TT4EDT&quot;&gt;Amazon’s Cloud Cam and a compatible smart lock are essential ingredients for in-home delivery. But the company is hoping you’ll use these devices for other things as well. The Key app is designed to make it simple for you to grant access to trusted friends and family. You can give permanent access, a one-time pass with a time limit, or recurring access that works on certain days and at certain times. You can grant access through the app or send permissions via a simple SMS message.&lt;/p&gt;
&lt;p id=&quot;215ssr&quot;&gt;Individual Cloud Cams cost $120, but Amazon says it will be much cheaper if you buy them in bulk. Its forthcoming subscription service will allow you to archive and review footage and activate high-end features like motion detection, people detection, and zone monitoring. It’s integrated with Alexa, so if you were down in the basement, you could ask Alexa to show you who’s at the front door. For now, it’s billed as an indoor security camera, and won’t work if left outside in the rain.&lt;/p&gt;
&lt;p id=&quot;VwZZfj&quot;&gt;While Amazon’s foray into smartphones flopped, it staged a coup with the introduction of Alexa, vaulting to the front of the pack when it comes to smart home gadgets. Alexa was the &lt;a href=&quot;https://www.theverge.com/ces/2017/1/7/14156770/verge-awards-ces-2017-best-of-las-vegas&quot;&gt;star of the show&lt;/a&gt; at CES for the past two years, finding its way into a wide range of products. Amazon has been aggressively pushing out more Alexa devices this year, everything from wardrobe assistants to alarm clocks. The &lt;a href=&quot;https://www.theverge.com/2017/7/6/15924120/amazon-echo-look-review-camera-clothes-style&quot;&gt;Amazon Look&lt;/a&gt; is probably its most daring product; a camera that’s meant to live in your closet and watch you change clothes requires a very high level of trust. But so far, Amazon has limited access to this device, which is still available for purchase by invitation only.&lt;/p&gt;
&lt;p id=&quot;OH7DSC&quot;&gt;That makes Amazon Key a crucial stepping stone in Amazon’s quest to manage your home life and integrate itself into your daily routine. Prime customers, of which there are now an &lt;a href=&quot;https://www.geekwire.com/2017/study-amazon-reaches-85-million-prime-members-u-s-35-last-year/&quot;&gt;estimated 85 million&lt;/a&gt;, may sign up for the service because they’re interested in the convenience and security of having their deliveries left inside their homes. But in the process, they would be positioning Amazon to know a lot more about their lives and habits, like when they leave the house in the morning, how often they go on vacation, and when they get back from work at night.&lt;/p&gt;
&lt;p id=&quot;ZMxhn7&quot;&gt;Amazon Key feels like a major test of how thoroughly the company has earned customers’ trust, and a harbinger of a future where tech companies mediate every aspect of our lives. Of course, if you’ve already got an &lt;a href=&quot;https://www.theverge.com/2017/9/28/16378472/amazons-echo-spot-camera-in-your-bedroom&quot;&gt;Alexa alarm clock&lt;/a&gt; keeping an eye on you at night, maybe it won’t seem like such a leap.&lt;/p&gt;

</description>
<pubDate>Wed, 25 Oct 2017 12:31:26 +0000</pubDate>
<dc:creator>stevekemp</dc:creator>
<og:description>You’ll need a smart lock and Amazon’s new Cloud Cam</og:description>
<og:image>https://cdn.vox-cdn.com/thumbor/N5bxVNDqdQ3aY1PGSshD7jTLYzo=/0x38:1920x1043/fit-in/1200x630/cdn.vox-cdn.com/uploads/chorus_asset/file/9529495/AMAZON_KEY_2.jpg</og:image>
<og:title>Amazon Key is a new service that lets couriers unlock your front door</og:title>
<og:type>article</og:type>
<og:url>https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</og:url>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.theverge.com/2017/10/25/16538834/amazon-key-in-home-delivery-unlock-door-prime-cloud-cam-smart-lock</dc:identifier>
</item>
<item>
<title>Learn to use Awk with hundreds of examples</title>
<link>https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md</link>
<guid isPermaLink="true" >https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md</guid>
<description>&lt;h2&gt;GNU awk&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Table of Contents&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk --version &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; head -n1
GNU Awk 4.1.3, API: 1.1 (GNU MPFR 3.1.4, GNU MP 6.1.0)

$ man awk
GAWK(1)                        Utility Commands                        GAWK(1)

NAME
       gawk - pattern scanning and processing language

SYNOPSIS
       gawk [ POSIX or GNU style options ] -f program-file [ -- ] file ...
       gawk [ POSIX or GNU style options ] [ -- ] program-text file ...

DESCRIPTION
       Gawk  is  the  GNU Project&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;s implementation of the AWK programming lan‐&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       guage.  It conforms to the definition of  the  language  in  the  POSIX&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       1003.1  Standard.   This version in turn is based on the description in&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       The AWK Programming Language, by Aho, Kernighan, and Weinberger.   Gawk&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       provides  the additional features found in the current version of Brian&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       Kernighan&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;s awk and a number of GNU-specific extensions.
...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Prerequisites and notes&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;familiarity with programming concepts like variables, printing, control structures, arrays, etc&lt;/li&gt;
&lt;li&gt;familiarity with regular expressions
&lt;/li&gt;
&lt;li&gt;this tutorial is primarily focussed on short programs that are easily usable from command line, similar to using &lt;code&gt;grep&lt;/code&gt;, &lt;code&gt;sed&lt;/code&gt;, etc&lt;/li&gt;
&lt;li&gt;see &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/&quot;&gt;Gawk: Effective AWK Programming&lt;/a&gt; manual for complete reference, has information on other &lt;code&gt;awk&lt;/code&gt; versions as well as notes on POSIX standard&lt;/li&gt;
&lt;/ul&gt;&lt;br/&gt;&lt;h2&gt;Field processing&lt;/h2&gt;
&lt;br/&gt;&lt;h4&gt;Default field separation&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;$0&lt;/code&gt; contains the entire input record
&lt;ul&gt;&lt;li&gt;default input record separator is newline character&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$1&lt;/code&gt; contains the first field text
&lt;ul&gt;&lt;li&gt;default input field separator is one or more of continuous space, tab or newline characters&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$2&lt;/code&gt; contains the second field text and so on&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$(2+3)&lt;/code&gt; result of expressions can be used, this one evaluates to &lt;code&gt;$5&lt;/code&gt; and hence gives fifth field
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NF&lt;/code&gt; is a built-in variable which contains number of fields in the current record
&lt;ul&gt;&lt;li&gt;so, &lt;code&gt;$NF&lt;/code&gt; will give last field&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$(NF-1)&lt;/code&gt; will give second last field and so on&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat fruits.txt 
fruit   qty
apple   42
banana  31
fig     90
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print only first field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
fruit
apple
banana
fig
guava

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print only second field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
qty
42
31
90
6
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Specifying different input field separator&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;by using &lt;code&gt;-F&lt;/code&gt; command line option&lt;/li&gt;
&lt;li&gt;by setting &lt;code&gt;FS&lt;/code&gt; variable&lt;/li&gt;
&lt;li&gt;See &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#fpat-and-fieldwidths&quot;&gt;FPAT and FIELDWIDTHS&lt;/a&gt; section for other ways of defining input fields&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; second field where input field separator is :&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; last field&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; first and last field&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note the use of , and space between output fields&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo 789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; second last field&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $(NF-1)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use quotes to avoid clashes with shell special characters&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;one;two;three;four&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
three
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Regular expressions based input field separator&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
string

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; first field will be empty as there is nothing before '{'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{foo}   bar=baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[{}= ]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{foo}   bar=baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[{}= ]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{foo}   bar=baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[{}= ]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;default input field separator is one or more of continuous space, tab or newline characters (will be termed as whitespace here on)
&lt;ul&gt;&lt;li&gt;exact same behavior if &lt;code&gt;FS&lt;/code&gt; is assigned single space character&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;in addition, leading and trailing whitespaces won't be considered when splitting the input record&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
 a    ate b     c
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same behavior if FS is assigned to single space character&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for anything else, leading/trailing whitespaces will be considered&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[ \t]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a    ate b\tc   \n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[ \t]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;assigning empty string to FS will split the input record character wise&lt;/li&gt;
&lt;li&gt;note the use of command line option &lt;code&gt;-v&lt;/code&gt; to set FS&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
p
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
e

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; detecting multibyte characters depends on locale&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hi👍 how are you?&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
👍
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;Specifying different output field separator&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;by setting &lt;code&gt;OFS&lt;/code&gt; variable&lt;/li&gt;
&lt;li&gt;also gets added between every argument to &lt;code&gt;print&lt;/code&gt; statement
&lt;/li&gt;
&lt;li&gt;default is single space&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; statements inside BEGIN are executed before processing any input text&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{FS=OFS=&quot;:&quot;} {print $1, $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:789
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also be set using command line option -v&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; changing a field will re-build contents of $0&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; a      ate b   &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$2 = &quot;foo&quot;; print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; cat -A
a foo b$

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; $1=$1 is an idiomatic way to re-build when there is nothing else to change&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;-&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123:bar:789
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;-&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=$1; print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo-123-bar-789

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; OFS is used to separate different arguments given to print&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:789&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\t&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo     bar

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=$1; print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample string with numbers
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Filtering&lt;/h2&gt;
&lt;br/&gt;&lt;h4&gt;Idiomatic print usage&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;print&lt;/code&gt; statement with no arguments will print contents of &lt;code&gt;$0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;if condition is specified without corresponding statements, contents of &lt;code&gt;$0&lt;/code&gt; is printed if condition evaluates to true&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1&lt;/code&gt; is typically used to represent always true condition and thus print contents of &lt;code&gt;$0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat poem.txt 
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; displaying contents of input file(s) similar to 'cat' command&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; equivalent to using awk '{print $0}' and awk '1'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Field comparison&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Each block of statements within &lt;code&gt;{}&lt;/code&gt; can be prefixed by an optional condition so that those statements will execute only if condition evaluates to true&lt;/li&gt;
&lt;li&gt;Condition specified without corresponding statements will lead to printing contents of &lt;code&gt;$0&lt;/code&gt; if condition evaluates to true&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field exactly matches the string 'apple'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==&quot;apple&quot;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print first field if second field &amp;gt; 35&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; NR&amp;gt;1 to avoid the header line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; NR built-in variable contains record number&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1 &amp;amp;&amp;amp; $2&amp;gt;35{print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
apple
fig

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print header and lines with qty &amp;lt; 35&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1 || $2&amp;lt;35&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
banana  31
guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;If the above examples are too confusing, think of it as syntactical sugar&lt;/li&gt;
&lt;li&gt;Statements are grouped within &lt;code&gt;{}&lt;/code&gt;
&lt;ul&gt;&lt;li&gt;inside &lt;code&gt;{}&lt;/code&gt;, we have a &lt;code&gt;if&lt;/code&gt; control structure&lt;/li&gt;
&lt;li&gt;Like &lt;code&gt;C&lt;/code&gt; language, braces not needed for single statements within &lt;code&gt;if&lt;/code&gt;, but consider that &lt;code&gt;{}&lt;/code&gt; is used for clarity&lt;/li&gt;
&lt;li&gt;From this explicit syntax, remove the outer &lt;code&gt;{}&lt;/code&gt;, &lt;code&gt;if&lt;/code&gt; and &lt;code&gt;()&lt;/code&gt; used for &lt;code&gt;if&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;As we'll see later, this allows to mash up few lines of program compactly on command line itself
&lt;ul&gt;&lt;li&gt;Of course, for medium to large programs, it is better to put the code in separate file. See &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#awk-scripts&quot;&gt;awk scripts&lt;/a&gt; section&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; awk '$1==&quot;apple&quot;{print $2}' fruits.txt &lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         if($1 == &quot;apple&quot;){&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;            print $2&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         }&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       }&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; awk 'NR==1 || $2&amp;lt;35' fruits.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         if(NR==1 || $2&amp;lt;35){&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;            print $0&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         }&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       }&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
banana  31
guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;Regular expressions based filtering&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all lines containing the string 'are'&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep 'are' poem.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; negating REGEXP, same as: grep -v 'are' poem.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!/are/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Sugar is sweet,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep 'are' poem.txt | grep -v 'so'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/ &amp;amp;&amp;amp; !/so/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; lines starting with 'a' or 'b'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/^[ab]/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print last field of all lines containing 'are'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/{print $NF}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
red,
blue,
you.
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;strings can be used as well, which will be interpreted as &lt;em&gt;REGEXP&lt;/em&gt; if necessary&lt;/li&gt;
&lt;li&gt;Allows &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#using-shell-variables&quot;&gt;using shell variables&lt;/a&gt; instead of hardcoded &lt;em&gt;REGEXP&lt;/em&gt;
&lt;ul&gt;&lt;li&gt;that section also notes difference between using &lt;code&gt;//&lt;/code&gt; and string&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 !~ &quot;are&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Sugar is sweet,

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 ~ &quot;^[ab]&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; also helpful if search strings have the / delimiter character&lt;/span&gt;
$ cat paths.txt
/foo/a/report.log
/foo/y/power.log
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/\/foo\/a\//&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; paths.txt
/foo/a/report.log
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 ~ &quot;/foo/a/&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; paths.txt
/foo/a/report.log
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;em&gt;REGEXP&lt;/em&gt; matching against specific field&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field contains 'a'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 ~ /a/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
apple   42
banana  31
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field contains 'a' and qty &amp;gt; 20&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 ~ /a/ &amp;amp;&amp;amp; $2 &amp;gt; 20&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
apple   42
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if first field does NOT contain 'a'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 !~ /a/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
fruit   qty
fig     90
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Fixed string matching&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;to search a string literally, &lt;code&gt;index&lt;/code&gt; function can be used instead of &lt;em&gt;REGEXP&lt;/em&gt;
&lt;ul&gt;&lt;li&gt;similar to &lt;code&gt;grep -F&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;the function returns the starting position and &lt;code&gt;0&lt;/code&gt; if no match found&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat eqns.txt
a=b,a+b=c,c&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;d
a+b,pi=3.14,5e12
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; no output since '+' is meta character, would need '/a\+b/'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/a+b/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -F 'a+b' eqns.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;a+b&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
a+b,pi=3.14,5e12
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; much easier than '/i\*\(t\+9-g\)/'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;i*(t+9-g)&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; check only last field&lt;/span&gt;
$ awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($NF,&quot;a+b&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; index not needed if entire field/line is being compared&lt;/span&gt;
$ awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==&quot;a+b&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
a+b,pi=3.14,5e12
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;return value is useful to match at specific position&lt;/li&gt;
&lt;li&gt;for ex: at start/end of line&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; start of line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;a+b&quot;)==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
a+b,pi=3.14,5e12

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; end of line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; length function returns number of characters, by default acts on $0&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,&quot;a+b&quot;)==length()-length(&quot;a+b&quot;)+1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to avoid repetitions, save the search string in variable&lt;/span&gt;
$ awk -v s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;a+b&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;index($0,s)==length()-length(s)+1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; eqns.txt
i&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;(t+9-g)/8,4-a+b
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Line number based filtering&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Built-in variable &lt;code&gt;NR&lt;/code&gt; contains total records read so far&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;FNR&lt;/code&gt; if you need line numbers separately for &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#multiple-file-processing&quot;&gt;multiple file processing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: head -n2 poem.txt | tail -n1&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==2&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print 2nd and 4th line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==2 || NR==4&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: tail -n1 poem.txt&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; statements inside END are executed after processing all input text&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;END{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
And so are you.

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==4{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt 
90
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;for large input, use &lt;code&gt;exit&lt;/code&gt; to avoid unnecessary record processing&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 14323 14563435 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==234{print; exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14556

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; sample time comparison&lt;/span&gt;
$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; seq 14323 14563435 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==234{print; exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14556

real    0m0.004s
user    0m0.004s
sys     0m0.000s
$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; seq 14323 14563435 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==234{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14556

real    0m2.167s
user    0m2.280s
sys     0m0.092s
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Case Insensitive filtering&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -i 'rose' poem.txt &lt;/span&gt;
$ awk -v IGNORECASE=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/rose/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for small enough set, can also use REGEXP character class&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/[rR]ose/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; another way is to use built-in string function 'tolower'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;tolower($0) ~ /rose/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Roses are red,
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Changing record separators&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;RS&lt;/code&gt; to change input record separator&lt;/li&gt;
&lt;li&gt;default is newline character&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;this is a sample string&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; space as input record separator, printing all records&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR, $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 this
2 is
3 a
4 sample
5 string

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print all records containing 'a'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/a/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
sample
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;ORS&lt;/code&gt; to change output record separator&lt;/li&gt;
&lt;li&gt;gets added to every &lt;code&gt;print&lt;/code&gt; statement
&lt;/li&gt;
&lt;li&gt;default is newline character&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 3 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1
2
3
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that there is empty line after last record&lt;/span&gt;
$ seq 3 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1

2

3

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; dynamically changing ORS&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: seq 6 | awk '{ORS = NR%2 ? &quot; &quot; : RS} 1'&lt;/span&gt;
$ seq 6 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ORS = NR%2 ? &quot; &quot; : &quot;\n&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 2
3 4
5 6
$ seq 6 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ORS = NR%3 ? &quot;-&quot; : &quot;\n&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1-2-3
4-5-6
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Paragraph mode&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;When &lt;code&gt;RS&lt;/code&gt; is set to empty string, one or more consecutive empty lines is used as input record separator&lt;/li&gt;
&lt;li&gt;Can also use regular expression &lt;code&gt;RS=\n\n+&lt;/code&gt; but there are subtle differences, see &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Multiple-Line.html&quot;&gt;gawk manual - multiline records&lt;/a&gt;. Important points from that link quoted below&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote&gt;
&lt;p&gt;However, there is an important difference between ‘RS = &quot;&quot;’ and ‘RS = &quot;\n\n+&quot;’. In the first case, leading newlines in the input data file are ignored, and if a file ends without extra blank lines after the last record, the final newline is removed from the record. In the second case, this special processing is not done&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Now that the input is separated into records, the second step is to separate the fields in the records. One way to do this is to divide each of the lines into fields in the normal manner. This happens by default as the result of a special feature. When RS is set to the empty string and FS is set to a single character, the newline character always acts as a field separator. This is in addition to whatever field separations result from FS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;When FS is the null string (&quot;&quot;) or a regexp, this special feature of RS does not apply. It does apply to the default field separator of a single space: ‘FS = &quot; &quot;’&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Consider the below sample file&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat sample.txt
Hello World

Good day
How are you

Just do-it
Believe it

Today is sunny
Not a bit funny
No doubt you like it too

Much ado about nothing
He he he
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Filtering paragraphs&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print all paragraphs containing 'it'&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if extra newline at end is undesirable, can use&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; awk -v RS= '/it/{print c++ ? &quot;\n&quot; $0 : $0}' sample.txt&lt;/span&gt;
$ awk -v RS= -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/it/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Just do-it
Believe it

Today is sunny
Not a bit funny
No doubt you like it too

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; based on number of lines in each paragraph&lt;/span&gt;
$ awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v RS= -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Hello World

$ awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v RS= -v ORS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==2 &amp;amp;&amp;amp; /do/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Just do-it
Believe it

Much ado about nothing
He he he
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Re-structuring paragraphs&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; default FS is one or more of continuous space, tab or newline characters&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; default OFS is single space&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; so, $1=$1 will change it uniformly to single space between fields&lt;/span&gt;
$ awk -v RS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=$1} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Hello World
Good day How are you
Just do-it Believe it
Today is sunny Not a bit funny No doubt you like it too
Much ado about nothing He he he

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; a better usecase&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{FS=&quot;\n&quot;; OFS=&quot;. &quot;; RS=&quot;&quot;; ORS=&quot;\n\n&quot;} {$1=$1} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; sample.txt
Hello World

Good day. How are you

Just do-it. Believe it

Today is sunny. Not a bit funny. No doubt you like it too

Much ado about nothing. He he he
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;Multicharacter RS&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Some marker like &lt;code&gt;Error&lt;/code&gt; or &lt;code&gt;Warning&lt;/code&gt; etc&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat report.log 
blah blah
Error: something went wrong
more blah
whatever
Error: something surely went wrong
some text
some more text
blah blah blah

$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;END{print NR-1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
2
$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
blah blah

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; filter 'Error:' block matching particular string&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to preserve formatting, use: '/whatever/{print RS $0}'&lt;/span&gt;
$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/whatever/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
 something went wrong
more blah
whatever

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; blocks with more than 3 lines&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; splitting string with 3 newlines will yield 4 fields&lt;/span&gt;
$ awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Error:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF&amp;gt;4{print RS $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; report.log
Error: something surely went wrong
some text
some more text
blah blah blah
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Regular expression based &lt;code&gt;RS&lt;/code&gt;
&lt;ul&gt;&lt;li&gt;the &lt;code&gt;RT&lt;/code&gt; variable will contain string matched by &lt;code&gt;RS&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Note that entire input is treated as single string, so &lt;code&gt;^&lt;/code&gt; and &lt;code&gt;$&lt;/code&gt; anchors will apply only once - not every line&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note the relationship between record and separators&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR &quot; : &quot; $0 &quot; - &quot; RT}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; Sample - 123
2 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; string - 54
3 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; with - 908
4 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; numbers - 

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; need to be careful of empty records&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123string54with908&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR &quot; : &quot; $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; 
2 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; string
3 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; with
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; and newline at end of input&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123string54with908\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print NR &quot; : &quot; $0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; 
2 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; string
3 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; with
4 &lt;span class=&quot;pl-c1&quot;&gt;:&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Joining lines based on specific end of line condition&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat msg.txt
Hello there.
It will rain to-
day. Have a safe
and pleasant jou-
rney.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; join lines ending with - to next line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; by manipulating RS and ORS&lt;/span&gt;
$ awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;-\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v ORS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; msg.txt
Hello there.
It will rain today. Have a safe
and pleasant journey.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; by manipulating ORS alone, sub function covered in later sections&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ORS = sub(/-$/,&quot;&quot;) ? &quot;&quot; : &quot;\n&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; msg.txt
Hello there.
It will rain today. Have a safe
and pleasant journey.
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; easier: perl -pe 's/-\n//' msg.txt as newline is still part of input line&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;processing null terminated input&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo\0bar\0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; cat -A
foo^@bar^@$ 
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo\0bar\0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo
bar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Substitute functions&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Use &lt;code&gt;sub&lt;/code&gt; string function for replacing first occurrence&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;gsub&lt;/code&gt; for replacing all occurrences&lt;/li&gt;
&lt;li&gt;By default, &lt;code&gt;$0&lt;/code&gt; which contains input record is modified, can specify any other field or variable as needed&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing first occurrence&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sub(&quot;-&quot;, &quot;:&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1:2-3-4-5

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing all occurrences&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;-&quot;, &quot;:&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
1:2:3:4:5

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; return value for sub/gsub is number of replacements made&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=gsub(&quot;-&quot;, &quot;:&quot;); print n} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
1:2:3:4:5

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; // format is better suited to specify search REGEXP&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(/[^-]+/, &quot;abc&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
abc-abc-abc-abc-abc

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing all occurrences only for third field&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;one;two;three;four&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;e&quot;, &quot;E&quot;, $3)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
one two thrEE four
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Use &lt;code&gt;gensub&lt;/code&gt; to return the modified string unlike &lt;code&gt;sub&lt;/code&gt; or &lt;code&gt;gsub&lt;/code&gt; which modifies inplace&lt;/li&gt;
&lt;li&gt;it also supports back-references and ability to modify specific match&lt;/li&gt;
&lt;li&gt;acts upon &lt;code&gt;$0&lt;/code&gt; if target is not specified&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace second occurrence&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(&quot;:&quot;, &quot;-&quot;, 2)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123-bar:baz
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use REGEXP as needed&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;XYZ&quot;, 2)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:XYZ:bar:baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or print the returned string directly&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print gensub(&quot;:&quot;, &quot;-&quot;, 2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123-bar:baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace third occurrence&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;XYZ&quot;, 3)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123:XYZ:baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace all occurrences, similar to gsub&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;XYZ&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
XYZ:XYZ:XYZ:XYZ

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; target other than $0&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$1=gensub(/o/, &quot;b&quot;, 2, $1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
fob:123:bar:baz
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;back-reference examples&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;\&quot;&lt;/code&gt; within double-quotes to represent &lt;code&gt;&quot;&lt;/code&gt; character in replacement string&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;\\1&lt;/code&gt; to represent &lt;code&gt;\1&lt;/code&gt; - the first captured group and so on&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;amp;&lt;/code&gt; or &lt;code&gt;\0&lt;/code&gt; will back-reference entire matched string&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing last occurrence without knowing how many occurrences are there&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*):/, &quot;\\1-&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo:123:bar-baz
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo and bar and baz land good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*)and/, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar and baz lXYZ good

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use word boundaries as necessary&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo and bar and baz land good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*)\&amp;lt;and\&amp;gt;/, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replacing last but one&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;456:foo:123:bar:789:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/(.*):(.*:)/, &quot;\\1-\\2&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
456:foo:123:bar-789:baz

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\&quot;&amp;amp;\&quot;&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;saving quotes in variables - to avoid escaping double quotes or having to use octal code for single quotes&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\047&amp;amp;\047&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v sq=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;'&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, sq&quot;&amp;amp;&quot;sq, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\&quot;&amp;amp;\&quot;&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v dq=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&quot;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, dq&quot;&amp;amp;&quot;dq, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Inplace file editing&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Use this option with caution, preferably after testing that the &lt;code&gt;awk&lt;/code&gt; code is working as intended&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat greeting.txt 
Hi there
Have a nice day

$ awk -i inplace &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;e&quot;, &quot;E&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; greeting.txt 
$ cat greeting.txt 
Hi thErE
HavE a nicE day
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Multiple input files are treated individually and changes are written back to respective files&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat f1
I ate 3 apples
$ cat f2
I bought two bananas and 3 mangoes

$ awk -i inplace &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;3&quot;, &quot;three&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; f1 f2
$ cat f1
I ate three apples
$ cat f2
I bought two bananas and three mangoes
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;to create backups of original file, set &lt;code&gt;INPLACE_SUFFIX&lt;/code&gt; variable&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk -i inplace -v INPLACE_SUFFIX=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;.bkp&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(&quot;three&quot;, &quot;3&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; f1
$ cat f1
I ate 3 apples
$ cat f1.bkp
I ate three apples
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Using shell variables&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;when &lt;code&gt;awk&lt;/code&gt; code is part of shell program and shell variable needs to be passed as input to &lt;code&gt;awk&lt;/code&gt; code&lt;/li&gt;
&lt;li&gt;for example:
&lt;ul&gt;&lt;li&gt;command line argument passed to shell script, which is in turn passed on to &lt;code&gt;awk&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;control structures in shell script calling &lt;code&gt;awk&lt;/code&gt; with different search strings&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://stackoverflow.com/questions/19075671/how-do-i-use-shell-variables-in-an-awk-script&quot;&gt;stackoverflow - How do I use shell variables in an awk script?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; examples tested with bash shell&lt;/span&gt;

$ f=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
$ f=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;fig&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$f&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fig     90

$ q=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;20&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ awk -v threshold=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$q&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1 || $2&amp;gt;threshold&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
fig     90
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;accessing shell environment variables&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; existing environment variable&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;PWD&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
/home/learnbyexample
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;SHELL&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
/bin/bash

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; defined along with awk code&lt;/span&gt;
$ word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hello world&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;word&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
hello world

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; using ENVIRON also prevents awk's interpretation of escape sequences&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;a\n=c&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ foo=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print ENVIRON[&quot;foo&quot;]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a&lt;span class=&quot;pl-cce&quot;&gt;\n&lt;/span&gt;=c
$ awk -v foo=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{print foo}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
a
=c
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;are&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for: awk '!/are/' poem.txt&lt;/span&gt;
$ awk -v s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 !~ s&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Sugar is sweet,
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for: awk '/are/ &amp;amp;&amp;amp; !/so/' poem.txt&lt;/span&gt;
$ awk -v s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$0 ~ s &amp;amp;&amp;amp; !/so/&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,

$ r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[^-]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;1-2-3-4-5&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{gsub(r, &quot;abc&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
abc-abc-abc-abc-abc

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; escape sequence has to be doubled when string is interpreted as REGEXP&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo and bar and baz land good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(&quot;(.*)\\&amp;lt;and\\&amp;gt;&quot;, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; hence passing as variable should be&lt;/span&gt;
$ r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;(.*)\\&amp;lt;and\\&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(r, &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or use ENVIRON&lt;/span&gt;
$ r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;(.*)\&amp;lt;and\&amp;gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; r=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$r&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(ENVIRON[&quot;r&quot;], &quot;\\1XYZ&quot;, 1)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo and bar XYZ baz land good
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Multiple file input&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Example to show difference between &lt;code&gt;NR&lt;/code&gt; and &lt;code&gt;FNR&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; NR for overall record number&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt 
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; FNR for individual file's record number&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: head -q -n1 poem.txt greeting.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt 
Roses are red,
Hi thErE
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Constructs to do some processing before starting each file as well as at the end&lt;/li&gt;
&lt;li&gt;&lt;code&gt;BEGINFILE&lt;/code&gt; - to add code to be executed before start of each input file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ENDFILE&lt;/code&gt; - to add code to be executed after processing each input file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;FILENAME&lt;/code&gt; - file name of current input file being processed&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similar to: tail -n1 poem.txt greeting.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{print &quot;file: &quot;FILENAME}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       ENDFILE{print $0&quot;\n------&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt
file: poem.txt
And so are you.
------
file: greeting.txt
HavE a nicE day
------
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;And of course, there can be usual &lt;code&gt;awk&lt;/code&gt; code&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{print &quot;file: &quot;FILENAME}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       FNR==1;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       ENDFILE{print &quot;------&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt
file: poem.txt
Roses are red,
------
file: greeting.txt
Hi thErE
------

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{c++; print &quot;file: &quot;FILENAME}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       FNR==2;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       END{print &quot;\nTotal input files: &quot;c}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt
file: poem.txt
Violets are blue,
file: greeting.txt
HavE a nicE day

Total input files: 2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Control Structures&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Syntax is similar to &lt;code&gt;C&lt;/code&gt; language and single statements inside control structures don't require to be grouped within &lt;code&gt;{}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;See &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Statements.html&quot;&gt;gawk manual - Control Statements&lt;/a&gt; for details&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Remember that by default there is a loop that goes over all input records and constructs like &lt;code&gt;BEGIN&lt;/code&gt; and &lt;code&gt;END&lt;/code&gt; fall outside that loop&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat nums.txt 
42
-2
10101
-3.14
-75
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; uninitialized variables will have empty string&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; so either add '0' or use unary '+' operator to convert to number&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print +sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
0
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;if-else and loops&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: sed -n '/are/ s/so/SO/p' poem.txt &lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; remember that sub/gsub returns number of substitutions made&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/{if(sub(&quot;so&quot;, &quot;SO&quot;)) print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
And SO are you.
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; of course, can also use&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/ &amp;amp;&amp;amp; sub(&quot;so&quot;, &quot;SO&quot;)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
And SO are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if-else example&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{if($2&amp;gt;40) $0=&quot;+&quot;$0; else $0=&quot;-&quot;$0} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
+apple   42
-banana  31
+fig     90
-guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat nums.txt 
42
-2
10101
-3.14
-75

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; changing -ve to +ve and vice versa&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: awk '{if($0 ~ /^-/) sub(/^-/,&quot;&quot;); else sub(/^/,&quot;-&quot;)} 1' nums.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0 ~ /^-/ ? sub(/^-/,&quot;&quot;) : sub(/^/,&quot;-&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
-42
2
-10101
3.14
75
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '!sub(/^-/,&quot;&quot;){sub(/^/,&quot;-&quot;)} 1' nums.txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{for(i=2; i&amp;lt;11; i+=2) print i}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
2
4
6
8
10

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; looping each field&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;scat:cat:no cat:abdicate:cater&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{for(i=1;i&amp;lt;=NF;i++) if($i==&quot;cat&quot;) $i=&quot;CAT&quot;} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
scat:CAT:no cat:abdicate:cater
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use sub function&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F: -v OFS=: &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{for(i=1;i&amp;lt;=NF;i++) sub(/^cat$/,&quot;CAT&quot;,$i)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
scat:CAT:no cat:abdicate:cater
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;while loop&lt;/li&gt;
&lt;li&gt;do-while is also available&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{i=2; while(i&amp;lt;11){print i; i+=2}}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
2
4
6
8
10

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; recursive substitution&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; here again return value of sub/gsub is useful&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;titillate&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{while( gsub(/til/, &quot;&quot;) ) print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
tilate
ate
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;next and nextfile&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;next&lt;/code&gt; will skip rest of statements and start processing next line of current file being processed
&lt;ul&gt;&lt;li&gt;there is a loop by default which goes over all input records, &lt;code&gt;next&lt;/code&gt; is applicable for that&lt;/li&gt;
&lt;li&gt;it is similar to &lt;code&gt;continue&lt;/code&gt; statement within loops&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;it is often used in &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md#two-file-processing&quot;&gt;Two file processing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; here 'next' is used to skip processing header line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1{print; next} /a.*a/{$0=&quot;*&quot;$0} /[eiou]/{$0=&quot;-&quot;$0} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
-apple   42
&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;banana  31
-fig     90
-&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;nextfile&lt;/code&gt; is useful to skip remaining lines from current file being processed and move on to next file&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: head -q -n1 poem.txt greeting.txt fruits.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR&amp;gt;1{nextfile} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt fruits.txt
Roses are red,
Hi thErE
fruit   qty

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; specific field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR&amp;gt;2{nextfile} {print $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt greeting.txt fruits.txt
Roses
Violets
Hi
HavE
fruit
apple

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similar to 'grep -il'&lt;/span&gt;
$ awk -v IGNORECASE=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/red/{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
colors_1.txt
colors_2.txt
poem.txt
$ awk -v IGNORECASE=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1 ~ /red/{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
colors_1.txt
colors_2.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Multiline processing&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Processing consecutive lines&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat poem.txt 
Roses are red,
Violets are blue,
Sugar is sweet,
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; match two consecutive lines&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;p~/are/ &amp;amp;&amp;amp; /is/{print p ORS $0} {p=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,
Sugar is sweet,
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if only the second line is needed&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;p~/are/ &amp;amp;&amp;amp; /is/; {p=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Sugar is sweet,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; match three consecutive lines&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;p2~/red/ &amp;amp;&amp;amp; p1~/blue/ &amp;amp;&amp;amp; /is/{print p2} {p2=p1; p1=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; common mistake&lt;/span&gt;
$ sed -n &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/are/{N;/is/p}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; would need something like this and not practical to extend for other cases&lt;/span&gt;
$ sed &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$!N; /are.*\n.*is/p; D&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt 
Violets are blue,
Sugar is sweet,
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Consider this sample input file&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat range.txt 
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
END
baz
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;extracting lines around matching line&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://stackoverflow.com/questions/17908555/printing-with-sed-or-awk-a-line-following-a-matching-pattern&quot;&gt;stackoverflow - lines around matching regexp&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;how &lt;code&gt;n &amp;amp;&amp;amp; n--&lt;/code&gt; works:
&lt;ul&gt;&lt;li&gt;need to note that right hand side of &lt;code&gt;&amp;amp;&amp;amp;&lt;/code&gt; is processed only if left hand side is &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;so for example, if initially &lt;code&gt;n=2&lt;/code&gt;, then we get
&lt;ul&gt;&lt;li&gt;&lt;code&gt;2 &amp;amp;&amp;amp; 2; n=1&lt;/code&gt; - evaluates to &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;1 &amp;amp;&amp;amp; 1; n=0&lt;/code&gt; - evaluates to &lt;code&gt;true&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;0 &amp;amp;&amp;amp;&lt;/code&gt; - evaluates to &lt;code&gt;false&lt;/code&gt; ... no decrementing &lt;code&gt;n&lt;/code&gt; and hence will be &lt;code&gt;false&lt;/code&gt; until &lt;code&gt;n&lt;/code&gt; is re-assigned non-zero value&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similar to: grep --no-group-separator -A1 'BEGIN' range.txt &lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{n=2} n &amp;amp;&amp;amp; n--&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
1234
BEGIN
a

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; only print the line after matching line&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '/BEGIN/{n=1; next} n &amp;amp;&amp;amp; n--' range.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;n &amp;amp;&amp;amp; n--; /BEGIN/{n=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt 
1234
a
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; generic case: print nth line after match&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;n &amp;amp;&amp;amp; !--n; /BEGIN/{n=3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
END
c

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print second line prior to matched line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{print p2} {p2=p1; p1=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
b
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; save all lines in an array for generic case&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{print a[NR-3]} {a[NR]=$0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
a
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or use the reversing trick&lt;/span&gt;
$ tac range.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;n &amp;amp;&amp;amp; !--n; /END/{n=3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
BEGIN
a
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Checking if multiple strings are present at least once in entire input file&lt;/li&gt;
&lt;li&gt;If there are lots of strings to check, use arrays&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use BEGINFILE instead of FNR==1&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR==1{s1=s2=0} /is/{s1=1} /are/{s2=1} s1&amp;amp;&amp;amp;s2{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
poem.txt
sample.txt

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;FNR==1{s1=s2=0} /foo/{s1=1} /report/{s2=1} s1&amp;amp;&amp;amp;s2{print FILENAME; nextfile}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;
paths.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Two file processing&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;We'll use awk's associative arrays (key-value pairs) here
&lt;/li&gt;
&lt;li&gt;Unlike &lt;a href=&quot;https://github.com/learnbyexample/Command-line-text-processing/blob/master/sorting_stuff.md#comm&quot;&gt;comm&lt;/a&gt; the input files need not be sorted and comparison can be done based on certain field(s) as well&lt;/li&gt;
&lt;/ul&gt;&lt;br/&gt;&lt;h4&gt;Comparing whole lines&lt;/h4&gt;
&lt;p&gt;Consider the following test files&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat colors_1.txt
Blue
Brown
Purple
Red
Teal
Yellow

$ cat colors_2.txt
Black
Blue
Green
Red
White
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;common lines and lines unique to one of the files&lt;/li&gt;
&lt;li&gt;For two files as input, &lt;code&gt;NR==FNR&lt;/code&gt; will be true only when first file is being processed&lt;/li&gt;
&lt;li&gt;Using &lt;code&gt;next&lt;/code&gt; will skip rest of code when first file is processed&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a[$0]&lt;/code&gt; will create unique keys (here entire line content is used as key) in array &lt;code&gt;a&lt;/code&gt;
&lt;ul&gt;&lt;li&gt;just referencing a key will create it if it doesn't already exist, with value as empty string (will also act as zero in numeric context)&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$0 in a&lt;/code&gt; will be true if key already exists in array &lt;code&gt;a&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; common lines&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -Fxf colors_1.txt colors_2.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$0]; next} $0 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; colors_1.txt colors_2.txt
Blue
Red

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; lines from colors_2.txt not present in colors_1.txt&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: grep -vFxf colors_1.txt colors_2.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$0]; next} !($0 in a)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; colors_1.txt colors_2.txt
Black
Green
White

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reversing the order of input files gives&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; lines from colors_1.txt not present in colors_2.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$0]; next} !($0 in a)&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; colors_2.txt colors_1.txt
Brown
Purple
Teal
Yellow
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Comparing specific fields&lt;/h4&gt;
&lt;p&gt;Consider the sample input file&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59
ECE     Om      92
CSE     Amy     67
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;single field&lt;/li&gt;
&lt;li&gt;For ex: only first field comparison by using &lt;code&gt;$1&lt;/code&gt; instead of &lt;code&gt;$0&lt;/code&gt; as key&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list1
ECE
CSE

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; extract only lines matching first field specified in list1&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1]; next} $1 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list1 marks.txt
ECE     Raj     53
ECE     Joel    72
CSE     Surya   81
ECE     Om      92
CSE     Amy     67

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if header is needed as well&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1]; next} FNR==1 || $1 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list1 marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
CSE     Surya   81
ECE     Om      92
CSE     Amy     67
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;multiple fields&lt;/li&gt;
&lt;li&gt;create a string by adding some character between the fields to act as key
&lt;ul&gt;&lt;li&gt;for ex: to avoid matching two field values &lt;code&gt;abc&lt;/code&gt; and &lt;code&gt;123&lt;/code&gt; to match with two other field values &lt;code&gt;ab&lt;/code&gt; and &lt;code&gt;c123&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;by adding character, say &lt;code&gt;_&lt;/code&gt;, the key would be &lt;code&gt;abc_123&lt;/code&gt; for first case and &lt;code&gt;ab_c123&lt;/code&gt; for second case&lt;/li&gt;
&lt;li&gt;this can still lead to false match if input data has &lt;code&gt;_&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;there is also a built-in way to do this using &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Multidimensional.html#Multidimensional&quot;&gt;gawk manual - Multidimensional Arrays&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list2
EEE Moi
CSE Amy
ECE Raj

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; extract only lines matching both fields specified in list2&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1&quot;_&quot;$2]; next} $1&quot;_&quot;$2 in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list2 marks.txt
ECE     Raj     53
EEE     Moi     68
CSE     Amy     67

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; uses SUBSEP as separator, whose default value is non-printing character \034&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1,$2]; next} ($1,$2) in a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list2 marks.txt
ECE     Raj     53
EEE     Moi     68
CSE     Amy     67
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;field and value comparison&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list3
ECE 70
EEE 65
CSE 80

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; extract line matching Dept and minimum marks specified in list3&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{d[$1]; m[$1]=$2; next} $1 in d &amp;amp;&amp;amp; $3 &amp;gt;= m[$1]&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list3 marks.txt
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
ECE     Om      92
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;getline&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;If entire line (instead of fields) from one file is needed to change the other file, using &lt;code&gt;getline&lt;/code&gt; would be faster&lt;/li&gt;
&lt;li&gt;But use it with caution
&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; replace mth line in poem.txt with nth line from nums.txt&lt;/span&gt;
$ awk -v m=3 -v n=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{while(n-- &amp;gt; 0) getline s &amp;lt; &quot;nums.txt&quot;}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;                     FNR==m{$0=s} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; poem.txt
Roses are red,
Violets are blue,
-2
And so are you.

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; without getline, but slower due to NR==FNR check for every line processed&lt;/span&gt;
$ awk -v m=3 -v n=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{if(FNR==n){s=$0; nextfile} next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;                     FNR==m{$0=s} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt poem.txt
Roses are red,
Violets are blue,
-2
And so are you.
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Another use case is if two files are to be processed exactly for same line numbers&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; print line from fruits.txt if corresponding line from nums.txt is +ve number&lt;/span&gt;
$ awk -v file=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;nums.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{getline num &amp;lt; file; if(num&amp;gt;0) print}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
banana  31

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; without getline, but has to save entire file in array&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{n[FNR]=$0; next} n[FNR]&amp;gt;0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt fruits.txt
fruit   qty
banana  31
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Creating new fields&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Number of fields in input record can be changed by simply manipulating &lt;code&gt;NF&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reducing fields&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,bar,123,baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, -v OFS=, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF=2} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo,bar

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; creating new empty field(s)&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,bar,123,baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, -v OFS=, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF=5} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo,bar,123,baz,

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; assigning to field greater than NF will create empty fields as needed&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,bar,123,baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, -v OFS=, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$7=42} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo,bar,123,baz,,,42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; adding a new 'Grade' field&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{OFS=&quot;\t&quot;; g[9]=&quot;S&quot;; g[8]=&quot;A&quot;; g[7]=&quot;B&quot;; g[6]=&quot;C&quot;; g[5]=&quot;D&quot;}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;      {NF++; if(NR==1)$NF=&quot;Grade&quot;; else $NF=g[int($(NF-1)/10)]} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
Dept    Name    Marks   Grade
ECE     Raj     53      D
ECE     Joel    72      B
EEE     Moi     68      C
CSE     Surya   81      A
EEE     Tia     59      D
ECE     Om      92      S
CSE     Amy     67      C
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;two file example&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list4
Raj class_rep
Amy sports_rep
Tia placement_rep

$ awk -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\t&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{r[$1]=$2; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         {NF++; if(FNR==1)$NF=&quot;Role&quot;; else $NF=r[$2]} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list4 marks.txt
Dept    Name    Marks   Role
ECE     Raj     53      class_rep
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59      placement_rep
ECE     Om      92
CSE     Amy     67      sports_rep
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Dealing with duplicates&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;default value of uninitialized variable is &lt;code&gt;0&lt;/code&gt; in numeric context and empty string in text context
&lt;ul&gt;&lt;li&gt;and evaluates to &lt;code&gt;false&lt;/code&gt; when used conditionally&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;em&gt;Illustration to show default numeric value and array in action&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;mad\n42\n42\ndam\n42\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
mad
42
42
dam
42

$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;mad\n42\n42\ndam\n42\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $0 &quot;\t&quot; int(a[$0]); a[$0]++}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
mad     0
42      0
42      1
dam     0
42      2
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; only those entries with second column value zero will be retained&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;mad\n42\n42\ndam\n42\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!a[$0]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
mad
42
dam
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;first, examples that retain only first copy of duplicates&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
abc  7   4
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; whole line&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$0]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; particular column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;For multiple fields, separate them using &lt;code&gt;,&lt;/code&gt; or form a string with some character in between
&lt;ul&gt;&lt;li&gt;choose a character unlikely to appear in input data, else there can be false matches&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2&quot;_&quot;$3]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use simulated multidimensional array&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; SUBSEP, whose default is \034 non-printing character, is used as separator&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2,$3]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;retaining specific numbered copy&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; second occurrence of duplicate&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;++seen[$2]==2&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
abc  7   4
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; third occurrence of duplicate&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;++seen[$2]==3&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;retaining only last copy of duplicate&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reverse the input line-wise, retain first copy and then reverse again&lt;/span&gt;
$ tac duplicates.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!seen[$2]++&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
abc  7   4
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all duplicates based on 1st column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$1]++; next} a[$1]&amp;gt;1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
abc  7   4
abc  7   4
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all duplicates based on 3rd column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$3]++; next} a[$3]&amp;gt;1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
abc  7   4
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
abc  7   4
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; more than 2 duplicates based on 2nd column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$2]++; next} a[$2]&amp;gt;2&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
food toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
good toy &lt;span class=&quot;pl-k&quot;&gt;****&lt;/span&gt;

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; only unique lines based on 3rd column&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{a[$3]++; next} a[$3]==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; duplicates.txt duplicates.txt
&lt;span class=&quot;pl-c1&quot;&gt;test&lt;/span&gt; toy 123
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Lines between two REGEXPs&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;This section deals with filtering lines bound by two &lt;em&gt;REGEXP&lt;/em&gt;s (referred to as blocks)&lt;/li&gt;
&lt;li&gt;For simplicity the two &lt;em&gt;REGEXP&lt;/em&gt;s usually used in below examples are the strings &lt;strong&gt;BEGIN&lt;/strong&gt; and &lt;strong&gt;END&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;br/&gt;&lt;h4&gt;All unbroken blocks&lt;/h4&gt;
&lt;p&gt;Consider the below sample input file, which doesn't have any unbroken blocks (i.e &lt;strong&gt;BEGIN&lt;/strong&gt; and &lt;strong&gt;END&lt;/strong&gt; are always present in pairs)&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat range.txt 
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
END
baz
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Extracting lines between starting and ending &lt;em&gt;REGEXP&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; include both starting/ending REGEXP&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '/BEGIN/,/END/' range.txt&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; which is similar to sed -n '/BEGIN/,/END/p'&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; but not suitable to extend for other cases&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} f; /END/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
1234
6789
END
BEGIN
a
b
c
END

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; exclude both starting/ending REGEXP&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk '/BEGIN/{f=1; next} /END/{f=0} f' range.txt&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=0} f; /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
6789
a
b
c
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Include only start or end &lt;em&gt;REGEXP&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; include only starting REGEXP&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} /END/{f=0} f&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
BEGIN
1234
6789
BEGIN
a
b
c

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; include only ending REGEXP&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;f; /END/{f=0} /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
6789
END
a
b
c
END
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Extracting lines other than lines between the two &lt;em&gt;REGEXP&lt;/em&gt;s&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} !f; /END/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
foo
bar
baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; the other three cases would be&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=0} !f; /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;!f; /BEGIN/{f=1} /END/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt 
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} /END/{f=0} !f&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Specific blocks&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Getting first block&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1} f; /END/{exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt 
BEGIN
1234
6789
END

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use other tricks discussed in previous section as needed&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{exit} f; /BEGIN/{f=1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; range.txt
1234
6789
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Getting last block&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; reverse input linewise, change the order of REGEXPs, finally reverse again&lt;/span&gt;
$ tac range.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=1} f; /BEGIN/{exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
BEGIN
a
b
c
END

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; or, save the blocks in a buffer and print the last one alone&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; ORS contains output record separator, which is newline by default&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{f=1; b=$0; next} f{b=b ORS $0} /6/{f=0} END{print b}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
24
25
26
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Getting blocks based on a counter&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all blocks&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; sed -n &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/,/6/p&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
5
6
14
15
16
24
25
26

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; get only 2nd block&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: seq 30 | awk -v b=2 '/4/{c++} c==b{print; if(/6/) exit}'&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v b=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{c++} c==b; /6/ &amp;amp;&amp;amp; c==b{exit}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14
15
16

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to get all blocks greater than 'b' blocks&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v b=1 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{f=1; c++} f &amp;amp;&amp;amp; c&amp;gt;b; /6/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
14
15
16
24
25
26
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;excluding a particular block&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; excludes 2nd block&lt;/span&gt;
$ seq 30 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v b=2 &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/4/{f=1; c++} f &amp;amp;&amp;amp; c!=b; /6/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
5
6
24
25
26
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Broken blocks&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;If there are blocks with ending &lt;em&gt;REGEXP&lt;/em&gt; but without corresponding start, &lt;code&gt;awk '/BEGIN/{f=1} f; /END/{f=0}'&lt;/code&gt; will suffice&lt;/li&gt;
&lt;li&gt;Consider the modified input file where starting &lt;em&gt;REGEXP&lt;/em&gt; doesn't have corresponding ending&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat broken_range.txt
foo
BEGIN
1234
6789
END
bar
BEGIN
a
b
c
baz

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; the file reversing trick comes in handy here as well&lt;/span&gt;
$ tac broken_range.txt &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/END/{f=1} f; /BEGIN/{f=0}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; tac
BEGIN
1234
6789
END
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;But if both kinds of broken blocks are present, accumulate the records and print accordingly&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat multiple_broken.txt 
qqqqqqq
BEGIN
foo
BEGIN
1234
6789
END
bar
END
0-42-1
BEGIN
a
BEGIN
b
END
&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;as&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;s&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;sd&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt;

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/BEGIN/{f=1; buf=$0; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       f{buf=buf ORS $0}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       /END/{f=0; if(buf) print buf; buf=&quot;&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; multiple_broken.txt
BEGIN
1234
6789
END
BEGIN
b
END
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Arrays&lt;/h2&gt;
&lt;p&gt;We've already seen examples using arrays, some more examples discussed in this section&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;array looping&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; average marks for each department&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{d[$1]+=$3; c[$1]++} END{for(i in d)print i, d[i]/c[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
ECE 72.3333
EEE 63.5
CSE 74
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; by default, keys are traversed in random order&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{a[&quot;z&quot;]=1; a[&quot;x&quot;]=12; a[&quot;b&quot;]=42; for(i in a)print i, a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
x 12
z 1
b 42

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; index sorted ascending order as strings&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{PROCINFO[&quot;sorted_in&quot;] = &quot;@ind_str_asc&quot;;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       a[&quot;z&quot;]=1; a[&quot;x&quot;]=12; a[&quot;b&quot;]=42; for(i in a)print i, a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
b 42
x 12
z 1

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; value sorted ascending order as numbers&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{PROCINFO[&quot;sorted_in&quot;] = &quot;@val_num_asc&quot;;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       a[&quot;z&quot;]=1; a[&quot;x&quot;]=12; a[&quot;b&quot;]=42; for(i in a)print i, a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
z 1
x 12
b 42
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;deleting array elements&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat list5
CSE     Surya   75
EEE     Jai     69
ECE     Kal     83

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; update entry if a match is found&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; else append the new entries&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{ky=$1&quot;_&quot;$2} NR==FNR{upd[ky]=$0; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;        ky in upd{$0=upd[ky]; delete upd[ky]} 1;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;        END{for(i in upd)print upd[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list5 marks.txt
Dept    Name    Marks
ECE     Raj     53
ECE     Joel    72
EEE     Moi     68
CSE     Surya   75
EEE     Tia     59
ECE     Om      92
CSE     Amy     67
ECE     Kal     83
EEE     Jai     69
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{d[$1][$2]=$3} END{for(i in d[&quot;ECE&quot;])print i}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
Joel
Raj
Om

$ awk -v f=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;CSE&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR&amp;gt;1{d[$1][$2]=$3} END{for(i in d[f])print i, d[f][i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; marks.txt
Surya 81
Amy 67
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;awk scripts&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;For larger programs, save the code in a file and use &lt;code&gt;-f&lt;/code&gt; command line option&lt;/li&gt;
&lt;li&gt;&lt;code&gt;;&lt;/code&gt; is not needed to terminate a statement&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Options.html#Options&quot;&gt;gawk manual - Command-Line Options&lt;/a&gt; for other related options&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat buf.awk
/BEGIN/{
    f=1
    buf=&lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt;
    next
}

f{
    buf=buf ORS &lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt;
}

/END/{
    f=0
    if(buf)
        print buf
    buf=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
}

$ awk -f buf.awk multiple_broken.txt 
BEGIN
1234
6789
END
BEGIN
b
END
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;Another advantage is that single quotes can be freely used&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{$0=gensub(/[^:]+/, &quot;\047&amp;amp;\047&quot;, &quot;g&quot;)} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;

$ cat quotes.awk
{
    &lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt; = gensub(/[^:]+/, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;'&amp;amp;'&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;g&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;)
}

1

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo:123:bar:baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -f quotes.awk
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;bar&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;:&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;baz&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;If the code has been first tried out on command line, add &lt;code&gt;-o&lt;/code&gt; option to get a pretty printed version&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk -o -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\t&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==FNR{r[$1]=$2; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;         {NF++; if(FNR==1)$NF=&quot;Role&quot;; else $NF=r[$2]} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; list4 marks.txt
Dept    Name    Marks   Role
ECE     Raj     53      class_rep
ECE     Joel    72
EEE     Moi     68
CSE     Surya   81
EEE     Tia     59      placement_rep
ECE     Om      92
CSE     Amy     67      sports_rep
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;File name can be passed along &lt;code&gt;-o&lt;/code&gt; option, otherwise by default &lt;code&gt;awkprof.out&lt;/code&gt; will be used&lt;/p&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat awkprof.out
        &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; gawk profile, created Tue Oct 24 15:10:02 2017&lt;/span&gt;

        &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; Rule(s)&lt;/span&gt;

        NR == FNR {
                r[&lt;span class=&quot;pl-smi&quot;&gt;$1&lt;/span&gt;] = &lt;span class=&quot;pl-smi&quot;&gt;$2&lt;/span&gt;
                next
        }

        {
                NF++
                &lt;span class=&quot;pl-k&quot;&gt;if&lt;/span&gt; (FNR == 1) {
                        &lt;span class=&quot;pl-smi&quot;&gt;$NF&lt;/span&gt; = &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;Role&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
                } &lt;span class=&quot;pl-k&quot;&gt;else&lt;/span&gt; {
                        &lt;span class=&quot;pl-smi&quot;&gt;$NF&lt;/span&gt; = r[&lt;span class=&quot;pl-smi&quot;&gt;$2&lt;/span&gt;]
                }
        }

        1 {
                print &lt;span class=&quot;pl-smi&quot;&gt;$0&lt;/span&gt;
        }

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that other command line options have to be provided as usual&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; for ex: awk -v OFS='\t' -f awkprof.out list4 marks.txt&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Miscellaneous&lt;/h2&gt;
&lt;br/&gt;&lt;h4&gt;FPAT and FIELDWIDTHS&lt;/h4&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; define fields to be one or more consecutive digits&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FPAT=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[0-9]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $2, $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
123 54 908
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; define fields to be one or more consecutive alphabets&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FPAT=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;[a-zA-Z]+&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1, $2, $3, $4}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample string with numbers
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;For simpler &lt;strong&gt;csv&lt;/strong&gt; input having quoted strings if fields themselves have &lt;code&gt;,&lt;/code&gt; in them, using &lt;code&gt;FPAT&lt;/code&gt; is reasonable approach&lt;/li&gt;
&lt;li&gt;Use a proper parser if input can have other cases like newlines in fields
&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,&quot;bar,123&quot;,baz,abc&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;bar&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;$ echo &lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt; | awk -v FPAT='&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;[^&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;]*&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt;[^,]&lt;span class=&quot;pl-k&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;{print &lt;span class=&quot;pl-smi&quot;&gt;$2&lt;/span&gt;}&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&quot;bar,123&quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;if input has well defined fields based on number of characters, &lt;code&gt;FIELDWIDTHS&lt;/code&gt; can be used to specify width of each field&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk -v FIELDWIDTHS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;8 3&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; -v OFS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/fig/{$2=35} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
fig     35
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; without FIELDWIDTHS&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;/fig/{$2=35} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
fig 35
guava   6
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h4&gt;String functions&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;length&lt;/code&gt; function - returns length of string, by default acts on &lt;code&gt;$0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 8 13 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;length()==1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
8
9

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1 || length($1)&amp;gt;4&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
fruit   qty
apple   42
banana  31
guava   6

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; character count and not byte count is calculated, similar to 'wc -m'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hi👍&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print length()}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
3

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use -b option if number of bytes are needed&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;hi👍&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -b &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print length()}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
6
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 1st argument is string to be split&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 2nd argument is array to save results, indexed from 1&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 3rd argument is separator, default is FS&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,1996-10-25,hello,good&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{split($2,d,&quot;-&quot;); print &quot;Month is: &quot; d[2]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Month is: 10

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; using regular expression to define separator&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; return value is number of fields after splitting&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;Sample123string54with908numbers&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=split($0,s,/[0-9]+/); for(i=1;i&amp;lt;=n;i++)print s[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Sample
string
with
numbers
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; use 4th argument if separators are needed as well&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=split($0,s,/[0-9]+/,seps); for(i=1;i&amp;lt;n;i++)print seps[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
123
54
908

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; single row to multiple rows based on splitting last field&lt;/span&gt;
$ s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo,baz,12:42:3&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;pl-smi&quot;&gt;$s&lt;/span&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{n=split($NF,a,&quot;:&quot;); NF--; for(i=1;i&amp;lt;=n;i++) print $0,a[i]}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo baz 12
foo baz 42
foo baz 3
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;substr&lt;/code&gt; function allows to extract specified number of characters from given string
&lt;ul&gt;&lt;li&gt;indexing starts with &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;See &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/gawk.html#index-substr_0028_0029-function&quot;&gt;gawk manual - substr function&lt;/a&gt; for corner cases and details&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 1st argument is string to be worked on&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 2nd argument is starting position&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; 3rd argument is number of characters to be extracted&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,1,5)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
abcde
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,4,3)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
def
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if 3rd argument is not given, string is extracted until end&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,6)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
fghij

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v OFS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;:&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print substr($0,2,3), substr($0,6,3)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bcd:fgh

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; if only few characters are needed from input line, can use empty FS&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
c
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;abcdefghij&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v FS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $3, $5}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
c e
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Executing external commands&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;External commands can be issued using &lt;code&gt;system&lt;/code&gt; function&lt;/li&gt;
&lt;li&gt;Output would be as usual on &lt;code&gt;stdout&lt;/code&gt; unless redirected while calling the command&lt;/li&gt;
&lt;li&gt;Return value of &lt;code&gt;system&lt;/code&gt; depends on &lt;code&gt;exit&lt;/code&gt; status of executed command, see &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/I_002fO-Functions.html&quot;&gt;gawk manual - Input/Output Functions&lt;/a&gt; for details&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{system(&quot;echo Hello World&quot;)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
Hello World

$ wc poem.txt
 4 13 65 poem.txt
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{system(&quot;wc poem.txt&quot;)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
 4 13 65 poem.txt

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{system(&quot;seq 10 | paste -sd, &amp;gt; out.txt&quot;)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ cat out.txt
1,2,3,4,5,6,7,8,9,10

$ ls xyz.txt
ls: cannot access &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;xyz.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;: No such file or directory
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-smi&quot;&gt;$?&lt;/span&gt;
2
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{s=system(&quot;ls xyz.txt&quot;); print &quot;Status: &quot; s}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
ls: cannot access &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;xyz.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;: No such file or directory
Status: 2

$ cat f2
I bought two bananas and three mangoes
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;f1,f2,odd.txt&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -F, &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{system(&quot;cat &quot; $2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
I bought two bananas and three mangoes
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;printf formatting&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;Similar to &lt;code&gt;printf&lt;/code&gt; function in &lt;code&gt;C&lt;/code&gt; and shell built-in command&lt;/li&gt;
&lt;li&gt;use &lt;code&gt;sprintf&lt;/code&gt; function to save result in variable instead of printing&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Printf.html&quot;&gt;gawk manual - printf&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that ORS is not appended and has to be added manually&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%.2f\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.86

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%10.2f\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
  10062.86

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%010.2f\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
0010062.86

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%d\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%+d\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
+10062

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{printf &quot;%e\n&quot;, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
1.006286e+04
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;to refer argument by positional number (starts with 1), use &lt;code&gt;&amp;lt;num&amp;gt;$&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; can also use: awk 'BEGIN{printf &quot;hex=%x\noct=%o\ndec=%d\n&quot;, 15, 15, 15}'&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;hex=%1$x\noct=%1$o\ndec=%1$d\n&quot;, 15}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
hex=f
oct=17
dec=15

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; adding prefix to hex/oct numbers&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;hex=%1$#x\noct=%1$#o\ndec=%1$d\n&quot;, 15}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
hex=0xf
oct=017
dec=15
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; prefix remaining width with spaces&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;%6s:%5s\n&quot;, &quot;foo&quot;, &quot;bar&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
   foo:  bar

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; suffix remaining width with spaces&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;%-6s:%-5s\n&quot;, &quot;foo&quot;, &quot;bar&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
foo   :bar  

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; truncate&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{printf &quot;%.2s\n&quot;, &quot;foobar&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
fo
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;avoid using &lt;code&gt;printf&lt;/code&gt; without format specifier&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGIN{s=&quot;solve: 5 % x = 1&quot;; printf s}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
awk: cmd. line:1: fatal: not enough arguments to satisfy format string
    &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;`&lt;/span&gt;solve: 5 % x = 1&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;               ^ ran out for this one&lt;/span&gt;&lt;/span&gt;

&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;$ awk &lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;BEGIN{s=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;solve: 5 % x = 1&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;pl-k&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;%s\n&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;, s}&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-s&quot;&gt;solve: 5 % x = 1&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h4&gt;Redirecting print output&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;redirecting to file instead of stdout using &lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;similar to behavior in shell, if file already exists it is overwritten
&lt;ul&gt;&lt;li&gt;use &lt;code&gt;&amp;gt;&amp;gt;&lt;/code&gt; to append to an existing file without deleting content&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;however, unlike shell, subsequent redirections to same file will append to it&lt;/li&gt;
&lt;li&gt;See also &lt;a href=&quot;https://www.gnu.org/software/gawk/manual/html_node/Close-Files-And-Pipes.html&quot;&gt;gawk manual - Closing Input and Output Redirections&lt;/a&gt; if you have too many redirections&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ seq 6 &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR%2{print &amp;gt; &quot;odd.txt&quot;; next} {print &amp;gt; &quot;even.txt&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
$ cat odd.txt
1
3
5
$ cat even.txt
2
4
6

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NR==1{col1=$1&quot;.txt&quot;; col2=$2&quot;.txt&quot;; next}&lt;/span&gt;
&lt;span class=&quot;pl-s&quot;&gt;       {print $1 &amp;gt; col1; print $2 &amp;gt; col2}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
$ cat fruit.txt
apple
banana
fig
guava
$ cat qty.txt
42
31
90
6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;redirecting to shell command&lt;/li&gt;
&lt;li&gt;this is useful if you have different things to redirect to different commands, otherwise it can be done as usual in shell acting on &lt;code&gt;awk&lt;/code&gt;'s output&lt;/li&gt;
&lt;li&gt;all redirections to same command gets combined as single input to that command&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: echo 'foo good 123' | awk '{print $2}' | wc -c&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
5
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; to avoid newline character being added to print&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v ORS= &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; assuming no format specifiers in input&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{printf $2 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
4

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; same as: echo 'foo good 123' | awk '{printf $2 $3 | &quot;wc -c&quot;}'&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo good 123&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{printf $2 | &quot;wc -c&quot;; printf $3 | &quot;wc -c&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
7
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Further Reading&lt;/strong&gt;&lt;/p&gt;
&lt;br/&gt;&lt;h2&gt;Gotchas and Tips&lt;/h2&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; wrong&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==$word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; right&lt;/span&gt;
$ awk -v word=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;apple&lt;span class=&quot;pl-pds&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;$1==word&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; fruits.txt
apple   42
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; no issue with unix style line ending&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo bar\n123 789\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2, $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar foo
789 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; dos style line ending causes trouble&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo bar\r\n123 789\r\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2, $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
 foo
 123

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; easy to deal by simply setting appropriate RS&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; note that ORS would still be newline character only&lt;/span&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;foo bar\r\n123 789\r\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk -v RS=&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;\r\n&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $2, $1}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
bar foo
789 123
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;relying on default intial value&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 1 - works for single file&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 2 - change to work for multiple file&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} ENDFILE{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
nums.txt 10062.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 3 - check with multiple file input&lt;/span&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; oops, default numerical value '0' for sum works only once&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} ENDFILE{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&amp;lt;(&lt;/span&gt;seq 3&lt;span class=&quot;pl-pds&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
nums.txt 10062.9
/dev/fd/63 10068.9

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; step 4 - correctly initialize variables&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;BEGINFILE{sum=0} {sum += $1} ENDFILE{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;&amp;lt;(&lt;/span&gt;seq 3&lt;span class=&quot;pl-pds&quot;&gt;)&lt;/span&gt;&lt;/span&gt;
nums.txt 10062.9
/dev/fd/63 6
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;use unary operator &lt;code&gt;+&lt;/code&gt; to force numeric conversion&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; nums.txt
nums.txt 10062.9

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print FILENAME, sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /dev/null
/dev/null 

$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{sum += $1} END{print FILENAME, +sum}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /dev/null
/dev/null 0
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;concatenate empty string to force string comparison&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;5 5.0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1==$2 ? &quot;same&quot; : &quot;different&quot;, &quot;string&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
same string

$ &lt;span class=&quot;pl-c1&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;5 5.0&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-k&quot;&gt;|&lt;/span&gt; awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $1&quot;&quot;==$2 ? &quot;same&quot; : &quot;different&quot;, &quot;string&quot;}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt;
different string
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;beware of expressions going -ve for field calculations&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ cat misc.txt
foo
good bad ugly
123 xyz
a b c d

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; trying to delete last two fields&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF -= 2} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt
awk: cmd. line:1: (FILENAME=misc.txt FNR=1) fatal: NF &lt;span class=&quot;pl-c1&quot;&gt;set&lt;/span&gt; to negative value
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; dynamically change it depending on number of fields&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{NF = (NF&amp;lt;=2) ? 0 : NF-2} 1&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt

good

a b

$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; similarly, trying to access 3rd field from end&lt;/span&gt;
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;{print $(NF-2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt
awk: cmd. line:1: (FILENAME=misc.txt FNR=1) fatal: attempt to access field -1
$ awk &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF&amp;gt;2{print $(NF-2)}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; misc.txt
good
b
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;If input is ASCII alone, simple trick to improve speed&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;highlight highlight-source-shell&quot;&gt;
&lt;pre&gt;
$ &lt;span class=&quot;pl-c&quot;&gt;&lt;span class=&quot;pl-c&quot;&gt;#&lt;/span&gt; all words containing exactly 3 lowercase a&lt;/span&gt;
$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==4{cnt++} END{print +cnt}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /usr/share/dict/words
1019

real    0m0.075s

$ &lt;span class=&quot;pl-k&quot;&gt;time&lt;/span&gt; LC_ALL=C awk -F&lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;a&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;pl-s&quot;&gt;&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;NF==4{cnt++} END{print +cnt}&lt;span class=&quot;pl-pds&quot;&gt;'&lt;/span&gt;&lt;/span&gt; /usr/share/dict/words
1019

real    0m0.045s
&lt;/pre&gt;&lt;/div&gt;
&lt;br/&gt;&lt;h2&gt;Further Reading&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;man awk&lt;/code&gt; and &lt;code&gt;info awk&lt;/code&gt; for quick reference from command line&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/gawk/manual/gawk.html#SEC_Contents&quot;&gt;gawk manual&lt;/a&gt; for complete reference, extensions and more&lt;/li&gt;
&lt;li&gt;What's up with different &lt;code&gt;awk&lt;/code&gt; versions?
&lt;/li&gt;
&lt;li&gt;Tutorials and Q&amp;amp;A
&lt;/li&gt;
&lt;li&gt;Alternatives
&lt;ul&gt;&lt;li&gt;&lt;a href=&quot;https://www.gnu.org/software/datamash/alternatives/&quot;&gt;GNU datamash&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/lh3/bioawk&quot;&gt;bioawk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/gelisam/hawk/blob/master/doc/README.md&quot;&gt;hawk&lt;/a&gt; - based on Haskell&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/johnkerl/miller&quot;&gt;miller&lt;/a&gt; - similar to awk/sed/cut/join/sort for name-indexed data such as CSV, TSV, and tabular JSON
&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://unix.stackexchange.com/questions/303044/when-to-use-grep-less-awk-sed&quot;&gt;unix.stackexchange - When to use grep, sed, awk, perl, etc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/TheMozg/awk-raycaster&quot;&gt;awkaster&lt;/a&gt; - Pseudo-3D shooter written completely in awk using raycasting technique&lt;/li&gt;
&lt;li&gt;examples for some of the stuff not covered in this tutorial
&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Wed, 25 Oct 2017 12:00:07 +0000</pubDate>
<dc:creator>asicsp</dc:creator>
<og:image>https://avatars3.githubusercontent.com/u/17766317?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>learnbyexample/Command-line-text-processing</og:title>
<og:url>https://github.com/learnbyexample/Command-line-text-processing</og:url>
<og:description>Command-line-text-processing - From finding text to search and replace, from sorting to beautifying text and more</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/learnbyexample/Command-line-text-processing/blob/master/gnu_awk.md</dc:identifier>
</item>
<item>
<title>ZFSin: A Windows kernel-mode ZFS driver</title>
<link>https://github.com/lundman/zfsin</link>
<guid isPermaLink="true" >https://github.com/lundman/zfsin</guid>
<description>&lt;h3&gt;README.md&lt;/h3&gt;
&lt;article class=&quot;markdown-body entry-content&quot; itemprop=&quot;text&quot;&gt;
&lt;p&gt;Download free development Windows 10 image from Microsoft.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.microsoft.com/en-us/windows/downloads/virtual-machines&quot;&gt;https://developer.microsoft.com/en-us/windows/downloads/virtual-machines&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;and create two VMs.&lt;/p&gt;
&lt;p&gt;The newer VM images comes with Visual Studio 2017, but this is currently not compatible with Kernel Development. At the moment, the correct version to use is Visual Studio 2015 update 3. You can download and install it for free. But it can be a challenge to find as Microsoft hides it well. They also put VCredist 2008, 2012, 2013 and 2017 on there but skipped 2015 for some reason. They dropped the ball that day. You will have to use Add/Remove Programs to uninstall 2017 version before you can install 2015.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Host (running Visual Studio and Kernel Debugger)&lt;/li&gt;
&lt;li&gt;Target (runs the compiled kernel module)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;It is recommended that the VMs are placed on static IP, as they can change IP with all the crashes, and you have to configure the remote kernel development again.&lt;/p&gt;
&lt;p&gt;Go download the Windows Driver Kit 10&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.microsoft.com/en-us/windows/hardware/windows-driver-kit&quot;&gt;https://developer.microsoft.com/en-us/windows/hardware/windows-driver-kit&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;and install on both VMs. You will need both the SDK and WDK.&lt;/p&gt;
&lt;p&gt;On Target VM, complete the guide specified here, under section &quot;Prepare the target computer for provisioning&quot;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://msdn.microsoft.com/windows/hardware/drivers/gettingstarted/provision-a-target-computer-wdk-8-1?f=255&amp;amp;MSPPError=-2147217396&quot;&gt;https://msdn.microsoft.com/windows/hardware/drivers/gettingstarted/provision-a-target-computer-wdk-8-1?f=255&amp;amp;MSPPError=-2147217396&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Which mostly entails running:&lt;/p&gt;
&lt;p&gt;C:\Program Files (x86)\Windows Kits\10\Remote\x64\WDK Test Target Setup x64-x64_en-us.msi&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;reboot Target VM&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;On the Host VM, continue the guide to configure Visual Studio 2015.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Load Visual Studio 2015, there is no need to load the project yet.&lt;/li&gt;
&lt;li&gt;Menu &amp;gt; Driver &amp;gt; Test &amp;gt; Configure Devices&lt;/li&gt;
&lt;li&gt;Click &quot;Add New Device&quot;&lt;/li&gt;
&lt;li&gt;In &quot;Display name:&quot; enter &quot;Target&quot;&lt;/li&gt;
&lt;li&gt;In &quot;Device type:&quot; leave as &quot;Computer&quot;&lt;/li&gt;
&lt;li&gt;In &quot;Network host name:&quot; enter IP of Target VM, for me &quot;172.16.248.103&quot;&lt;/li&gt;
&lt;li&gt;Provisioning options: o Provision device and choose debugger settings.&lt;/li&gt;
&lt;li&gt;Click &quot;Next &amp;gt;&quot;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;It now confirms that it talked to the Target, and note here that &quot;Host IP&quot; it that of the Host VM, for me, &quot;172.16.248.102&quot;, and not to be confused by the Target IP entered on previous screen.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Click &quot;Next &amp;gt;&quot;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Watch and wait as remote items are installed on the Target VM. It will most likely reboot the Target VM as well.&lt;/p&gt;
&lt;p&gt;I've had dialog boxes pop up and I agree to installation, but I am not sure they are supposed to. They probably shouldn't, it would seem it failed to put WDKRemoteUser in Administators group. If that happens, use &quot;lusrmgr.msc&quot; to correct it.&lt;/p&gt;
&lt;p&gt;The task &quot;Creating system restore point&quot; will most likely fail and that is acceptable, however, if other tasks fail, you may need to retry until they work.&lt;/p&gt;
&lt;p&gt;At the end of the run, the output window offers a link to the full log, which is worth reading if you encounter issues.&lt;/p&gt;
&lt;p&gt;When things fail, I start a CMD prompt as Administrator, and paste in the commands that fail, from the log file. It would be nice if this process just worked though.&lt;/p&gt;
&lt;p&gt;If your version of .NET newer, just move along.&lt;/p&gt;
&lt;p&gt;The Target VM should reboot, and login as &quot;WDKRemoteUser&quot;.&lt;/p&gt;
&lt;p&gt;It is recommended you get GIT bash for Windows and install:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://git-scm.com/downloads&quot;&gt;https://git-scm.com/downloads&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;Host and Target VMs are now configured.&lt;/p&gt;
&lt;p&gt;First time you load the project it might default to&lt;/p&gt;
&lt;p&gt;Debug : ARM&lt;/p&gt;
&lt;p&gt;you probably want to change ARM ==&amp;gt; X64.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;Load ZFSin solution&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Menu &amp;gt; Debug &amp;gt; ZFSin Properties&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Configuration Properties &amp;gt; Debugging &quot;Debugging tools for Windows - Kernel Debugger&quot; Remote Computer Name: Target&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Configuration Properties &amp;gt; Driver Install &amp;gt; Deployment Target Device Name: Target [Tick] Remove previous driver versions O Hardware ID Driver Update Root\ZFSin&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;You can run DbgView on the Target VM to see the kernel prints on that VM.&lt;/p&gt;
&lt;p&gt;Run the compiled Target&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Compile solution&lt;/li&gt;
&lt;li&gt;Menu &amp;gt; Debug &amp;gt; Start Debugging (F5)&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;wait a while, for VS15 to deplay the .sys file on Target and start it.&lt;/p&gt;
&lt;p&gt;Target VM optionals.&lt;/p&gt;
&lt;p&gt;If you find it frustrating to do development work when Windows Defender or Windows Updates run, you can disable those in gpedit.msc&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Computer Configuration &amp;gt; Administrative Templates &amp;gt; Windows Components &amp;gt; Windows Defender Windows Updates&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;p&gt;✅ Compile SPL sources&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Godzillion warnings yet to be addressed&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;✅ Port SPL sources, atomics, mutex, kmem, condvars&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;C11 _Atomics in kmem not yet handled&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;✅ Compile ZFS sources, stubbing out code as needed&lt;/p&gt;
&lt;p&gt;✅ Include kernel zlib library&lt;/p&gt;
&lt;p&gt;✅ Load and Unload SPL and ZFS code&lt;/p&gt;
&lt;p&gt;✅ Port kernel &lt;code&gt;zfs_ioctl.c&lt;/code&gt; to accept ioctls from userland&lt;/p&gt;
&lt;p&gt;✅ Compile userland libspl, libzpool, libzfs, ...&lt;/p&gt;
&lt;p&gt;✅ Include pthread wrapper library&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Replaced with thin pthread.h file&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;✅ Include userland zlib library&lt;/p&gt;
&lt;p&gt;✅ Compile cmd/zpool&lt;/p&gt;
&lt;p&gt;✅ Port functions in libzpool, libzfs. Iterate disks, ioctl&lt;/p&gt;
&lt;p&gt;✅ Test ioctl from zpool to talk to kernel&lt;/p&gt;
&lt;p&gt;✅ Port kernel &lt;code&gt;vdev_disk.c&lt;/code&gt; / &lt;code&gt;vdev_file.c&lt;/code&gt; to issue IO&lt;/p&gt;
&lt;p&gt;✅ Port over cmd/zfs&lt;/p&gt;
&lt;p&gt;✅ Add ioctl calls to MOUNT and create Volume to attach&lt;/p&gt;
&lt;p&gt;✅ Add ioctl calls to UNMOUNT and detach and delete Volume&lt;/p&gt;
&lt;p&gt;✅ Port kernel &lt;code&gt;zfs_vnops.c&lt;/code&gt; / &lt;code&gt;zfs_vnops_windows.c&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Many special cases missing, flags to create/read/etc&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;✅ Correct file information (dates, size, etc)&lt;/p&gt;
&lt;p&gt;✅ Basic DOS usage&lt;/p&gt;
&lt;p&gt;✅ Simple Notepad text edit, executables also work.&lt;/p&gt;
&lt;p&gt;✅ Basic drag'n'drop in Explorer&lt;/p&gt;
&lt;p&gt;✅ zfs send / recv, file and pipe.&lt;/p&gt;
&lt;p&gt;❎ ZVOL support&lt;/p&gt;
&lt;p&gt;✅ git clone ZFS repo on ZFS mounted fs&lt;/p&gt;
&lt;p&gt;❎ Compile ZFS on top of ZFS&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;VS catches on fire loading project&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;❎ Scrooge McDuck style swim in cash&lt;/p&gt;
&lt;hr/&gt;
&lt;ul&gt;&lt;li&gt;Windows do not handle EFI labels, for now they are parsed with libefi, and we send offset and size with the filename, that both libzfs and kernel will parse out and use. This works for a proof of concept.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Possibly a more proper solution would be to write a thin virtual hard disk driver, which reads the EFI label and present just the partitions.&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;vdev_disk.c spawns a thread to get around that IoCompletionRoutine is called in a different context, to sleep until signalled. Is there a better way to do async in Windows?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ThreadId should be checked, using PsGetCurrentThreadId() but it makes zio_taskq_member(taskq_member()) crash. Investigate.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Functions in posix.c need sustenance.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The Volume created for MOUNT has something wrong with it, we are unable to query it for mountpoint, currently has to string compare a list of all mounts. Possibly also related is that we can not call any of the functions to set mountpoint to change it. This needs to be researched.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Find a way to get system RAM in SPL, so we can size up the kmem as expected. Currently looks up the information in the Registry. kmem should also use Windows signals &quot;\KernelObjects\LowMemoryCondition&quot; to sense pressure.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Creating filebased pools would look like:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;# fsutil file createnew C:\poolfile.bin 200000000
# zpool.exe create TEST \\?\C:\poolfile.bin

Note that &quot;\\?\C:\&quot; needs to be escaped in bash shell, ie
&quot;\\\\?\\C:\\&quot;.

        TEST                   ONLINE       0     0     0
        \??\C:\poolfile.bin  ONLINE       0     0     0
&lt;/code&gt;
&lt;/pre&gt;&lt;/article&gt;</description>
<pubDate>Wed, 25 Oct 2017 11:30:41 +0000</pubDate>
<dc:creator>Filligree</dc:creator>
<og:image>https://avatars1.githubusercontent.com/u/637168?s=400&amp;v=4</og:image>
<og:type>object</og:type>
<og:title>lundman/ZFSin</og:title>
<og:url>https://github.com/lundman/ZFSin</og:url>
<og:description>ZFSin - OpenZFS ports</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://github.com/lundman/zfsin</dc:identifier>
</item>
<item>
<title>Scipy 1.0 released</title>
<link>https://mail.python.org/pipermail/scipy-user/2017-October/037357.html</link>
<guid isPermaLink="true" >https://mail.python.org/pipermail/scipy-user/2017-October/037357.html</guid>
<description>&lt;head&gt;&lt;title&gt;[SciPy-User] SciPy 1.0 released!&lt;/title&gt;&lt;link rel=&quot;Index&quot; href=&quot;index.html&quot; /&gt;&lt;link rel=&quot;made&quot; href=&quot;mailto:scipy-user%40python.org?Subject=Re%3A%20%5BSciPy-User%5D%20SciPy%201.0%20released%21&amp;amp;In-Reply-To=%3CCABL7CQgou%3DhFMFUx_BPm3rMrB%2BZQZ47Cb9vJ2s3qQRdert%3DbPQ%40mail.gmail.com%3E&quot; /&gt;&lt;meta name=&quot;robots&quot; content=&quot;index,nofollow&quot; /&gt;&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;&lt;link rel=&quot;Previous&quot; href=&quot;037356.html&quot; /&gt;&lt;link rel=&quot;Next&quot; href=&quot;037358.html&quot; /&gt;&lt;/head&gt;&lt;body bgcolor=&quot;#FFFFFF&quot; id=&quot;readabilityBody&quot; readability=&quot;189.90541390488&quot;&gt;

&lt;p&gt;&lt;strong&gt;Ralf Gommers&lt;/strong&gt; &lt;a href=&quot;mailto:scipy-user%40python.org?Subject=Re%3A%20%5BSciPy-User%5D%20SciPy%201.0%20released%21&amp;amp;In-Reply-To=%3CCABL7CQgou%3DhFMFUx_BPm3rMrB%2BZQZ47Cb9vJ2s3qQRdert%3DbPQ%40mail.gmail.com%3E&quot; title=&quot;[SciPy-User] SciPy 1.0 released!&quot;&gt;ralf.gommers at gmail.com&lt;/a&gt;&lt;br /&gt;&lt;em&gt;Wed Oct 25 06:14:07 EDT 2017&lt;/em&gt;&lt;/p&gt;
&lt;hr /&gt;&lt;pre&gt;
Hi all,

We are extremely pleased to announce the release of SciPy 1.0, 16 years
after
version 0.1 saw the light of day.  It has been a long, productive journey to
get here, and we anticipate many more exciting new features and releases in
the
future.


Why 1.0 now?
------------

A version number should reflect the maturity of a project - and SciPy was a
mature and stable library that is heavily used in production settings for a
long time already.  From that perspective, the 1.0 version number is long
overdue.

Some key project goals, both technical (e.g. Windows wheels and continuous
integration) and organisational (a governance structure, code of conduct
and a
roadmap), have been achieved recently.

Many of us are a bit perfectionist, and therefore are reluctant to call
something &quot;1.0&quot; because it may imply that it's &quot;finished&quot; or &quot;we are 100%
happy
with it&quot;.  This is normal for many open source projects, however that
doesn't
make it right.  We acknowledge to ourselves that it's not perfect, and there
are some dusty corners left (that will probably always be the case).
Despite
that, SciPy is extremely useful to its users, on average has high quality
code
and documentation, and gives the stability and backwards compatibility
guarantees that a 1.0 label imply.


Some history and perspectives
-----------------------------

- 2001: the first SciPy release
- 2005: transition to NumPy
- 2007: creation of scikits
- 2008: scipy.spatial module and first Cython code added
- 2010: moving to a 6-monthly release cycle
- 2011: SciPy development moves to GitHub
- 2011: Python 3 support
- 2012: adding a sparse graph module and unified optimization interface
- 2012: removal of scipy.maxentropy
- 2013: continuous integration with TravisCI
- 2015: adding Cython interface for BLAS/LAPACK and a benchmark suite
- 2017: adding a unified C API with scipy.LowLevelCallable; removal of
scipy.weave
- 2017: SciPy 1.0 release


**Pauli Virtanen** is SciPy's Benevolent Dictator For Life (BDFL).  He says:

*Truthfully speaking, we could have released a SciPy 1.0 a long time ago,
so I'm
happy we do it now at long last. The project has a long history, and during
the
years it has matured also as a software project.  I believe it has well
proved
its merit to warrant a version number starting with unity.*

*Since its conception 15+ years ago, SciPy has largely been written by and
for
scientists, to provide a box of basic tools that they need. Over time, the
set
of people active in its development has undergone some rotation, and we have
evolved towards a somewhat more systematic approach to development.
Regardless,
this underlying drive has stayed the same, and I think it will also continue
propelling the project forward in future. This is all good, since not long
after 1.0 comes 1.1.*

**Travis Oliphant** is one of SciPy's creators.  He says:

*I'm honored to write a note of congratulations to the SciPy developers and
the
entire SciPy community for the release of SciPy 1.0.   This release
represents
a dream of many that has been patiently pursued by a stalwart group of
pioneers
for nearly 2 decades.   Efforts have been broad and consistent over that
time
from many hundreds of people.   From initial discussions to efforts coding
and
packaging to documentation efforts to extensive conference and community
building, the SciPy effort has been a global phenomenon that it has been a
privilege to participate in.*

*The idea of SciPy was already in multiple people’s minds in 1997 when I
first
joined the Python community as a young graduate student who had just fallen
in
love with the expressibility and extensibility of Python.   The internet was
just starting to bringing together like-minded mathematicians and
scientists in
nascent electronically-connected communities.   In 1998, there was a
concerted
discussion on the matrix-SIG, python mailing list with people like Paul
Barrett, Joe Harrington, Perry Greenfield, Paul Dubois, Konrad Hinsen, David
Ascher, and others.   This discussion encouraged me in 1998 and 1999 to
procrastinate my PhD and spend a lot of time writing extension modules to
Python that mostly wrapped battle-tested Fortran and C-code making it
available
to the Python user.   This work attracted the help of others like Robert
Kern,
Pearu Peterson and Eric Jones who joined their efforts with mine in 2000 so
that by 2001, the first SciPy release was ready.   This was long before
Github
simplified collaboration and input from others and the &quot;patch&quot; command and
email was how you helped a project improve.*

*Since that time, hundreds of people have spent an enormous amount of time
improving the SciPy library and the community surrounding this library has
dramatically grown. I stopped being able to participate actively in
developing
the SciPy library around 2010.  Fortunately, at that time, Pauli Virtanen
and
Ralf Gommers picked up the pace of development supported by dozens of other
key
contributors such as David Cournapeau, Evgeni Burovski, Josef Perktold, and
Warren Weckesser.   While I have only been able to admire the development of
SciPy from a distance for the past 7 years, I have never lost my love of the
project and the concept of community-driven development.    I remain driven
even now by a desire to help sustain the development of not only the SciPy
library but many other affiliated and related open-source projects.  I am
extremely pleased that SciPy is in the hands of a world-wide community of
talented developers who will ensure that SciPy remains an example of how
grass-roots, community-driven development can succeed.*

**Fernando Perez** offers a wider community perspective:

*The existence of a nascent Scipy library, and the incredible --if tiny by
today's standards-- community surrounding it is what drew me into the
scientific Python world while still a physics graduate student in 2001.
Today,
I am awed when I see these tools power everything from high school
education to
the research that led to the 2017 Nobel Prize in physics.*

*Don't be fooled by the 1.0 number: this project is a mature cornerstone of
the
modern scientific computing ecosystem.  I am grateful for the many who have
made it possible, and hope to be able to contribute again to it in the
future.
My sincere congratulations to the whole team!*


Highlights of this release
--------------------------

Some of the highlights of this release are:

- Major build improvements.  Windows wheels are available on PyPI for the
  first time, and continuous integration has been set up on Windows and OS X
  in addition to Linux.
- A set of new ODE solvers and a unified interface to them
  (`scipy.integrate.solve_ivp`).
- Two new trust region optimizers and a new linear programming method, with
  improved performance compared to what `scipy.optimize` offered previously.
- Many new BLAS and LAPACK functions were wrapped.  The BLAS wrappers are
now
  complete.


Upgrading and compatibility
---------------------------

There have been a number of deprecations and API changes in this release,
which
are documented below.  Before upgrading, we recommend that users check that
their own code does not use deprecated SciPy functionality (to do so, run
your
code with ``python -Wd`` and check for ``DeprecationWarning`` s).

This release requires Python 2.7 or &amp;gt;=3.4 and NumPy 1.8.2 or greater.

This is also the last release to support LAPACK 3.1.x - 3.3.x.  Moving the
lowest supported LAPACK version to &amp;gt;3.2.x was long blocked by Apple
Accelerate
providing the LAPACK 3.2.1 API.  We have decided that it's time to either
drop
Accelerate or, if there is enough interest, provide shims for functions
added
in more recent LAPACK versions so it can still be used.


New features
============

`scipy.cluster` improvements
----------------------------

`scipy.cluster.hierarchy.optimal_leaf_ordering`, a function to reorder a
linkage matrix to minimize distances between adjacent leaves, was added.


`scipy.fftpack` improvements
----------------------------

N-dimensional versions of the discrete sine and cosine transforms and their
inverses were added as ``dctn``, ``idctn``, ``dstn`` and ``idstn``.


`scipy.integrate` improvements
------------------------------

A set of new ODE solvers have been added to `scipy.integrate`.  The
convenience
function `scipy.integrate.solve_ivp` allows uniform access to all solvers.
The individual solvers (``RK23``, ``RK45``, ``Radau``, ``BDF`` and
``LSODA``)
can also be used directly.


`scipy.linalg` improvements
----------------------------

The BLAS wrappers in `scipy.linalg.blas` have been completed.  Added
functions
are ``*gbmv``, ``*hbmv``, ``*hpmv``, ``*hpr``, ``*hpr2``, ``*spmv``,
``*spr``,
``*tbmv``, ``*tbsv``, ``*tpmv``, ``*tpsv``, ``*trsm``, ``*trsv``, ``*sbmv``,
``*spr2``,

Wrappers for the LAPACK functions ``*gels``, ``*stev``, ``*sytrd``,
``*hetrd``,
``*sytf2``, ``*hetrf``, ``*sytrf``, ``*sycon``, ``*hecon``, ``*gglse``,
``*stebz``, ``*stemr``, ``*sterf``, and ``*stein`` have been added.

The function `scipy.linalg.subspace_angles` has been added to compute the
subspace angles between two matrices.

The function `scipy.linalg.clarkson_woodruff_transform` has been added.
It finds low-rank matrix approximation via the Clarkson-Woodruff Transform.

The functions `scipy.linalg.eigh_tridiagonal` and
`scipy.linalg.eigvalsh_tridiagonal`, which find the eigenvalues and
eigenvectors of tridiagonal hermitian/symmetric matrices, were added.


`scipy.ndimage` improvements
----------------------------

Support for homogeneous coordinate transforms has been added to
`scipy.ndimage.affine_transform`.

The ``ndimage`` C code underwent a significant refactoring, and is now
a lot easier to understand and maintain.


`scipy.optimize` improvements
-----------------------------

The methods ``trust-region-exact`` and ``trust-krylov`` have been added to
the
function `scipy.optimize.minimize`. These new trust-region methods solve the
subproblem with higher accuracy at the cost of more Hessian factorizations
(compared to dogleg) or more matrix vector products (compared to ncg) but
usually require less nonlinear iterations and are able to deal with
indefinite
Hessians. They seem very competitive against the other Newton methods
implemented in scipy.

`scipy.optimize.linprog` gained an interior point method.  Its performance
is
superior (both in accuracy and speed) to the older simplex method.


`scipy.signal` improvements
---------------------------

An argument ``fs`` (sampling frequency) was added to the following
functions:
``firwin``, ``firwin2``, ``firls``, and ``remez``.  This makes these
functions
consistent with many other functions in `scipy.signal` in which the sampling
frequency can be specified.

`scipy.signal.freqz` has been sped up significantly for FIR filters.


`scipy.sparse` improvements
---------------------------

Iterating over and slicing of CSC and CSR matrices is now faster by up to
~35%.

The ``tocsr`` method of COO matrices is now several times faster.

The ``diagonal`` method of sparse matrices now takes a parameter, indicating
which diagonal to return.


`scipy.sparse.linalg` improvements
----------------------------------

A new iterative solver for large-scale nonsymmetric sparse linear systems,
`scipy.sparse.linalg.gcrotmk`, was added.  It implements ``GCROT(m,k)``, a
flexible variant of ``GCROT``.

`scipy.sparse.linalg.lsmr` now accepts an initial guess, yielding
potentially
faster convergence.

SuperLU was updated to version 5.2.1.


`scipy.spatial` improvements
----------------------------

Many distance metrics in `scipy.spatial.distance` gained support for
weights.

The signatures of `scipy.spatial.distance.pdist` and
`scipy.spatial.distance.cdist` were changed to ``*args, **kwargs`` in order
to
support a wider range of metrics (e.g. string-based metrics that need extra
keywords).  Also, an optional ``out`` parameter was added to ``pdist`` and
``cdist`` allowing the user to specify where the resulting distance matrix
is
to be stored


`scipy.stats` improvements
--------------------------

The methods ``cdf`` and ``logcdf`` were added to
`scipy.stats.multivariate_normal`, providing the cumulative distribution
function of the multivariate normal distribution.

New statistical distance functions were added, namely
`scipy.stats.wasserstein_distance` for the first Wasserstein distance and
`scipy.stats.energy_distance` for the energy distance.


Deprecated features
===================

The following functions in `scipy.misc` are deprecated: ``bytescale``,
``fromimage``, ``imfilter``, ``imread``, ``imresize``, ``imrotate``,
``imsave``, ``imshow`` and ``toimage``.  Most of those functions have
unexpected
behavior (like rescaling and type casting image data without the user asking
for that).  Other functions simply have better alternatives.

``scipy.interpolate.interpolate_wrapper`` and all functions in that
submodule
are deprecated.  This was a never finished set of wrapper functions which is
not relevant anymore.

The ``fillvalue`` of `scipy.signal.convolve2d` will be cast directly to the
dtypes of the input arrays in the future and checked that it is a scalar or
an array with a single element.

``scipy.spatial.distance.matching`` is deprecated.  It is an alias of
`scipy.spatial.distance.hamming`, which should be used instead.

Implementation of `scipy.spatial.distance.wminkowski` was based on a wrong
interpretation of the metric definition. In scipy 1.0 it has been just
deprecated in the documentation to keep retro-compatibility but is
recommended
to use the new version of `scipy.spatial.distance.minkowski` that implements
the correct behaviour.

Positional arguments of `scipy.spatial.distance.pdist` and
`scipy.spatial.distance.cdist` should be replaced with their keyword
version.


Backwards incompatible changes
==============================

The following deprecated functions have been removed from `scipy.stats`:
``betai``, ``chisqprob``, ``f_value``, ``histogram``, ``histogram2``,
``pdf_fromgamma``, ``signaltonoise``, ``square_of_sums``, ``ss`` and
``threshold``.

The following deprecated functions have been removed from
`scipy.stats.mstats`:
``betai``, ``f_value_wilks_lambda``, ``signaltonoise`` and ``threshold``.

The deprecated ``a`` and ``reta`` keywords have been removed from
`scipy.stats.shapiro`.

The deprecated functions ``sparse.csgraph.cs_graph_components`` and
``sparse.linalg.symeig`` have been removed from `scipy.sparse`.

The following deprecated keywords have been removed in
`scipy.sparse.linalg`:
``drop_tol`` from ``splu``, and ``xtype`` from ``bicg``, ``bicgstab``,
``cg``,
``cgs``, ``gmres``, ``qmr`` and ``minres``.

The deprecated functions ``expm2`` and ``expm3`` have been removed from
`scipy.linalg`.  The deprecated keyword ``q`` was removed from
`scipy.linalg.expm`.  And the deprecated submodule ``linalg.calc_lwork`` was
removed.

The deprecated functions ``C2K``, ``K2C``, ``F2C``, ``C2F``, ``F2K`` and
``K2F`` have been removed from `scipy.constants`.

The deprecated ``ppform`` class was removed from `scipy.interpolate`.

The deprecated keyword ``iprint`` was removed from
`scipy.optimize.fmin_cobyla`.

The default value for the ``zero_phase`` keyword of `scipy.signal.decimate`
has been changed to True.

The ``kmeans`` and ``kmeans2`` functions in `scipy.cluster.vq` changed the
method used for random initialization, so using a fixed random seed will
not necessarily produce the same results as in previous versions.

`scipy.special.gammaln` does not accept complex arguments anymore.

The deprecated functions ``sph_jn``, ``sph_yn``, ``sph_jnyn``, ``sph_in``,
``sph_kn``, and ``sph_inkn`` have been removed. Users should instead use
the functions ``spherical_jn``, ``spherical_yn``, ``spherical_in``, and
``spherical_kn``. Be aware that the new functions have different
signatures.

The cross-class properties of `scipy.signal.lti` systems have been removed.
The following properties/setters have been removed:

Name - (accessing/setting has been removed) - (setting has been removed)

* StateSpace - (``num``, ``den``, ``gain``) - (``zeros``, ``poles``)
* TransferFunction (``A``, ``B``, ``C``, ``D``, ``gain``) - (``zeros``,
``poles``)
* ZerosPolesGain (``A``, ``B``, ``C``, ``D``, ``num``, ``den``) - ()

``signal.freqz(b, a)`` with ``b`` or ``a`` &amp;gt;1-D raises a ``ValueError``.
This
was a corner case for which it was unclear that the behavior was
well-defined.

The method ``var`` of `scipy.stats.dirichlet` now returns a scalar rather
than
an ndarray when the length of alpha is 1.


Other changes
=============

SciPy now has a formal governance structure.  It consists of a BDFL (Pauli
Virtanen) and a Steering Committee.  See `the governance document
&amp;lt;
&lt;a href=&quot;https://github.com/scipy/scipy/blob/master/doc/source/dev/governance/governance.rst&quot;&gt;https://github.com/scipy/scipy/blob/master/doc/source/dev/governance/governance.rst&lt;/a&gt;
&amp;gt;&lt;em&gt;`_
&lt;/em&gt;for details.

It is now possible to build SciPy on Windows with MSVC + gfortran!
Continuous
integration has been set up for this build configuration on Appveyor,
building
against OpenBLAS.

Continuous integration for OS X has been set up on TravisCI.

The SciPy test suite has been migrated from ``nose`` to ``pytest``.

``scipy/_distributor_init.py`` was added to allow redistributors of SciPy to
add custom code that needs to run when importing SciPy (e.g. checks for
hardware, DLL search paths, etc.).

Support for PEP 518 (specifying build system requirements) was added - see
``pyproject.toml`` in the root of the SciPy repository.

In order to have consistent function names, the function
``scipy.linalg.solve_lyapunov`` is renamed to
`scipy.linalg.solve_continuous_lyapunov`.  The old name is kept for
backwards-compatibility.


Authors
=======

* @arcady +
* @xoviat +
* Anton Akhmerov
* Dominic Antonacci +
* Alessandro Pietro Bardelli
* Ved Basu +
* Michael James Bedford +
* Ray Bell +
* Juan M. Bello-Rivas +
* Sebastian Berg
* Felix Berkenkamp
* Jyotirmoy Bhattacharya +
* Matthew Brett
* Jonathan Bright
* Bruno Jiménez +
* Evgeni Burovski
* Patrick Callier
* Mark Campanelli +
* CJ Carey
* Robert Cimrman
* Adam Cox +
* Michael Danilov +
* David Haberthür +
* Andras Deak +
* Philip DeBoer
* Anne-Sylvie Deutsch
* Cathy Douglass +
* Dominic Else +
* Guo Fei +
* Roman Feldbauer +
* Yu Feng
* Jaime Fernandez del Rio
* Orestis Floros +
* David Freese +
* Adam Geitgey +
* James Gerity +
* Dezmond Goff +
* Christoph Gohlke
* Ralf Gommers
* Dirk Gorissen +
* Matt Haberland +
* David Hagen +
* Charles Harris
* Lam Yuen Hei +
* Jean Helie +
* Gaute Hope +
* Guillaume Horel +
* Franziska Horn +
* Yevhenii Hyzyla +
* Vladislav Iakovlev +
* Marvin Kastner +
* Mher Kazandjian
* Thomas Keck
* Adam Kurkiewicz +
* Ronan Lamy +
* J.L. Lanfranchi +
* Eric Larson
* Denis Laxalde
* Gregory R. Lee
* Felix Lenders +
* Evan Limanto
* Julian Lukwata +
* François Magimel
* Syrtis Major +
* Charles Masson +
* Nikolay Mayorov
* Tobias Megies
* Markus Meister +
* Roman Mirochnik +
* Jordi Montes +
* Nathan Musoke +
* Andrew Nelson
* M.J. Nichol
* Juan Nunez-Iglesias
* Arno Onken +
* Nick Papior +
* Dima Pasechnik +
* Ashwin Pathak +
* Oleksandr Pavlyk +
* Stefan Peterson
* Ilhan Polat
* Andrey Portnoy +
* Ravi Kumar Prasad +
* Aman Pratik
* Eric Quintero
* Vedant Rathore +
* Tyler Reddy
* Joscha Reimer
* Philipp Rentzsch +
* Antonio Horta Ribeiro
* Ned Richards +
* Kevin Rose +
* Benoit Rostykus +
* Matt Ruffalo +
* Eli Sadoff +
* Pim Schellart
* Nico Schlömer +
* Klaus Sembritzki +
* Nikolay Shebanov +
* Jonathan Tammo Siebert
* Scott Sievert
* Max Silbiger +
* Mandeep Singh +
* Michael Stewart +
* Jonathan Sutton +
* Deep Tavker +
* Martin Thoma
* James Tocknell +
* Aleksandar Trifunovic +
* Paul van Mulbregt +
* Jacob Vanderplas
* Aditya Vijaykumar
* Pauli Virtanen
* James Webber
* Warren Weckesser
* Eric Wieser +
* Josh Wilson
* Zhiqing Xiao +
* Evgeny Zhurko
* Nikolay Zinov +
* Zé Vinícius +

A total of 121 people contributed to this release.
People with a &quot;+&quot; by their names contributed a patch for the first time.
This list of names is automatically generated, and may not be fully
complete.


Cheers,
Ralf
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &amp;lt;&lt;a href=&quot;http://mail.python.org/pipermail/scipy-user/attachments/20171025/a50e3526/attachment-0001.html&quot;&gt;http://mail.python.org/pipermail/scipy-user/attachments/20171025/a50e3526/attachment-0001.html&lt;/a&gt;&amp;gt;
&lt;/pre&gt;
&lt;hr /&gt;&lt;hr /&gt;&lt;p&gt;&lt;a href=&quot;https://mail.python.org/mailman/listinfo/scipy-user&quot;&gt;More information about the SciPy-User mailing list&lt;/a&gt;&lt;br /&gt;&lt;/p&gt;
&lt;/body&gt;</description>
<pubDate>Wed, 25 Oct 2017 10:19:08 +0000</pubDate>
<dc:creator>ngoldbaum</dc:creator>
<dc:format>text/html</dc:format>
<dc:identifier>https://mail.python.org/pipermail/scipy-user/2017-October/037357.html</dc:identifier>
</item>
<item>
<title>Facebook Shouldn’t Be Allowed to Buy Tbh</title>
<link>https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/</link>
<guid isPermaLink="true" >https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/</guid>
<description>&lt;p&gt;There was one line in &lt;a href=&quot;https://techcrunch.com/2017/10/16/facebook-acquires-anonymous-teen-compliment-app-tbh-will-let-it-run/&quot;&gt;TechCrunch’s report&lt;/a&gt; about Facebook’s purchase of social app &lt;em&gt;tbh&lt;/em&gt; [sic] that made me raise my eyebrows (emphasis mine):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Facebook announced it’s acquiring positivity-focused polling startup &lt;em&gt;tbh&lt;/em&gt; and will allow it to operate somewhat independently with its own brand.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;tbh&lt;/em&gt; had scored 5 million downloads and 2.5 million daily active users in the past nine weeks with its app that lets people anonymously answer kind-hearted multiple-choice questions about friends who then receive the poll results as compliments. You see questions like “Best to bring to a party?,” “Their perseverance is admirable?” and “Could see becoming a poet?” with your uploaded contacts on the app as answer choices.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;tbh&lt;/em&gt; has racked up more than 1 billion poll answers since officially launching in limited states in August, mostly from teens and high school students, and spent weeks topping the free app charts. When we &lt;a href=&quot;https://techcrunch.com/2017/09/22/tbh-app/&quot;&gt;profiled &lt;em&gt;tbh&lt;/em&gt; last month in the company’s first big interview&lt;/a&gt;, co-creator Nikita Bier told us, “If we’re improving the mental health of millions of teens, that’s a success to us.”&lt;/p&gt;
&lt;p&gt;Financial terms of the deal weren’t disclosed, but &lt;strong&gt;TechCrunch has heard the price paid was less than $100 million and won’t require any regulatory approval&lt;/strong&gt;. As part of the deal, &lt;em&gt;tbh&lt;/em&gt;’s four co-creators — Bier, Erik Hazzard, Kyle Zaragoza and Nicolas Ducdodon — will join Facebook’s Menlo Park headquarters while continuing to grow their app with Facebook’s cash, engineering, anti-spam, moderation and localization resources.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This isn’t quite right. I suspect TechCrunch, and whatever source they “heard” from, is referencing the &lt;a href=&quot;https://en.wikipedia.org/wiki/Hart%E2%80%93Scott%E2%80%93Rodino_Antitrust_Improvements_Act&quot;&gt;Hart-Scott-Rodino Antitrust Improvements Act&lt;/a&gt;. In order to reduce the burden on the Fair Trade Commission and the Antitrust Division of the Department of Justice, an acquirer only needs to report acquisitions (and wait for a specified time period to give time for review) for which the total value is more than a specified threshold; &lt;a href=&quot;https://www.ftc.gov/news-events/blogs/competition-matters/2017/02/hsr-threshold-adjustments-reportability-2017&quot;&gt;for 2017&lt;/a&gt;, that threshold is $80.8 million. To that end, I wouldn’t be surprised if this deal is worth approximately $80.7 million; that would mean Facebook doesn’t have to submit this acquisition for review.&lt;/p&gt;
&lt;p&gt;However, just because Facebook doesn’t have to submit this acquisition for review doesn’t mean it can’t be reviewed; indeed, in a closely-watched case from 2014, the &lt;a href=&quot;https://www.ftc.gov/enforcement/cases-proceedings/121-0069/st-lukes-health-system-ltd-saltzer-medical-group-pa&quot;&gt;FTC successfully sued to undo a $28 million acquisition that had already been consummated&lt;/a&gt;. That was only one of many acquisitions the FTC has investigated that didn’t cross the Hart-Scott-Rodino threshold; in most cases the FTC acted in response to complaints from customers or competitors.&lt;/p&gt;
&lt;p&gt;Might an analyst complain as well? The FTC can, and should, investigate this acquisition.&lt;/p&gt;
&lt;h4&gt;The Social-Communications Map&lt;/h4&gt;
&lt;p&gt;In late 2013, &lt;a href=&quot;https://stratechery.com/2013/multitudes-social/&quot;&gt;Facebook made their most concerted effort&lt;/a&gt; to buy Snapchat (for $3 billion); that was when I made the &lt;a href=&quot;https://stratechery.com/2013/multitudes-social/&quot;&gt;Social-Communications Map&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stratechery.com/2013/socialcommunication-map/&quot;&gt;&lt;img src=&quot;https://stratechery.com/wp-content/uploads/2017/10/IMG_0020-1024x768.png&quot; alt=&quot;&quot; width=&quot;640&quot; height=&quot;480&quot; class=&quot;aligncenter size-large wp-image-2797&quot; srcset=&quot;https://stratechery.com/wp-content/uploads/2017/10/IMG_0020-1024x768.png 1024w, https://stratechery.com/wp-content/uploads/2017/10/IMG_0020-300x225.png 300w, https://stratechery.com/wp-content/uploads/2017/10/IMG_0020-768x576.png 768w&quot; sizes=&quot;(max-width: 640px) 100vw, 640px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;The goal of this map was to show that there was no single social app that covered all of humanity’s social needs: there were critical differences in how people &lt;em&gt;perceived&lt;/em&gt;&lt;sup&gt;&lt;a href=&quot;https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/#footnote_0_2795&quot; id=&quot;identifier_0_2795&quot; class=&quot;footnote-link footnote-identifier-link&quot; title=&quot;Perceived is a critical point: Twitter and Instagram, for example, are permanent, but are perceived by most as being ephemeral (arguably Twitter’s has shifted in the public conscious as being something that is more permanent) &quot;&gt;1&lt;/a&gt;&lt;/sup&gt; different social apps, and that no one app could fill every part of this map.&lt;/p&gt;
&lt;p&gt;Facebook, for its part, had, for better or worse, transitioned to a public app that not only handled symmetric relationships, but, at least according to perception, asymmetric broadcast as well; that, though, &lt;a href=&quot;https://stratechery.com/2016/what-facebook-is-and-isnt/&quot;&gt;left an opening for an app like Snapchat&lt;/a&gt;. Thus Facebook’s acquisition drive: the company had already secured Instagram, giving it a position in asymmetric ephemeral broadcast apps; Snapchat rebuffed advances, so the company soon &lt;a href=&quot;https://stratechery.com/2014/social-conglomerate/&quot;&gt;moved on to WhatsApp&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The importance of these two acquisitions cannot be overstated: Facebook has always been secure in its dominance of permanent social relationships, a position that has given the company a dominant position in digital advertising. However, while everyone may need a permanent place on the Internet (all of those teenagers people say Facebook needs to reach have Facebook accounts), the ultimate currency is attention, and much like real life, it is ephemeral conversation that dominates. Facebook, by virtue of early decisions around privacy and significant bad press about the dangers of revealing too much, was locked out of this sphere, so it bought in.&lt;/p&gt;
&lt;h4&gt;The FTC’s Failure&lt;/h4&gt;
&lt;p&gt;Those acquisitions, by the way, were, per the Hart-Scott-Rodino Act, submitted to the FTC; in the case of Instagram the agency sent what sure seems like &lt;a href=&quot;https://www.ftc.gov/sites/default/files/documents/closing_letters/facebook-inc./instagram-inc./120822barnettfacebookcltr.pdf&quot;&gt;a form letter&lt;/a&gt;; I’ll quote it in full:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Commission has been conducting an investigation to determine whether the proposed acquisition of Instagram, Inc. by Facebook, Inc. may violate Section 7 of the Clayton Act or Section 5 of the Federal Trade Commission Act.&lt;/p&gt;
&lt;p&gt;Upon further review of this matter, it now appears that no further action is warranted by the Commission at this time. Accordingly, the investigation has been closed. This action is not to be construed as a determination that a violation may not have occurred, just as the pendency of an investigation should not be construed as a determination that a violation has occurred. The Commission reserves the right to take such further action as the public interest may require.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And so the single most injurious acquisition with regards to competition in not just social networking specifically but digital advertising broadly was approved. Section 7 of the Clayton Act (post its 1950 amendment), &lt;a href=&quot;https://www.law.cornell.edu/uscode/text/15/18&quot;&gt;states&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;No person shall acquire, directly or indirectly, the whole or any part of the stock or other share capital and no person subject to the jurisdiction of the Federal Trade Commission shall acquire the whole or any part of the assets of one or more persons engaged in commerce or in any activity affecting commerce, where in any line of commerce or in any activity affecting commerce in any section of the country, the effect of such acquisition, of such stocks or assets, or of the use of such stock by the voting or granting of proxies or otherwise, may be substantially to lessen competition, or to tend to create a monopoly.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;“Lessen competition” is exactly what happened. Instagram, super-charged both with the Facebook social graph and the Facebook ad machine, is not only dominating its native ephemeral asymmetric broadcasting space but increasingly &lt;a href=&quot;https://stratechery.com/2016/the-audacity-of-copying-well/&quot;&gt;preventing Snapchat from expanding&lt;/a&gt;. WhatsApp, meanwhile, dominates the messaging space across most of the world,&lt;sup&gt;&lt;a href=&quot;https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/#footnote_1_2795&quot; id=&quot;identifier_1_2795&quot; class=&quot;footnote-link footnote-identifier-link&quot; title=&quot;The most noteworthy exceptions being the United States (mixed), China (WeChat), South Korea (Kakao), Japan, Thailand, and Taiwan (LINE) &quot;&gt;2&lt;/a&gt;&lt;/sup&gt; and is the most prominent arrow in Facebook’s “future growth” quiver.&lt;/p&gt;
&lt;p&gt;The consolidation of attention has translated into dominance in digital advertising. Facebook accounted for &lt;a href=&quot;http://www.businessinsider.com/facebook-and-google-dominate-ad-industry-with-a-combined-99-of-growth-2017-4&quot;&gt;77% of revenue growth in digital advertising&lt;/a&gt; in the United States in 2016; add in Google and the duopoly’s share of growth was 99%. Even Snapchat, which after rightly rebuffing Facebook’s acquisition offers, IPO’d earlier this year for $24 billion,&lt;sup&gt;&lt;a href=&quot;https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/#footnote_2_2795&quot; id=&quot;identifier_2_2795&quot; class=&quot;footnote-link footnote-identifier-link&quot; title=&quot;As an aside, for all of Snapchat’s troubles to justify its $24 billion IPO, keep in mind that the vast majority of the commentariat insisted Spiegel was irrational to turn down $3 billion; it’s a reminder that few understand exponential growth curves&quot;&gt;3&lt;/a&gt;&lt;/sup&gt; has &lt;a href=&quot;https://stratechery.com/2017/snaps-earnings-seasonality-versus-maturity-snaps-missing-business/&quot;&gt;seen revenue declines&lt;/a&gt;, all while Facebook ever more blatantly &lt;a href=&quot;https://stratechery.com/2017/facebook-and-the-cost-of-monopoly/&quot;&gt;rips off the product&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;The Privacy Red Herring&lt;/h4&gt;
&lt;p&gt;The FTC’s response to the WhatsApp acquisition is more interesting: there the agency’s focus was privacy, &lt;a href=&quot;https://www.ftc.gov/system/files/documents/public_statements/297701/140410facebookwhatappltr.pdf&quot;&gt;specifically insisting&lt;/a&gt; that Facebook not change WhatsApp’s more stringent promises around user data without affirmative consent from users. This followed a few years after Facebook’s &lt;a href=&quot;https://www.ftc.gov/news-events/press-releases/2011/11/facebook-settles-ftc-charges-it-deceived-consumers-failing-keep&quot;&gt;consent decree&lt;/a&gt; with the FTC that demanded the company not share user data without their permission.&lt;/p&gt;
&lt;p&gt;There’s just one problem: whatever limitations this consent decree may have placed upon Facebook, the reality is that the company is a self-contained ecosystem: prohibiting the permissionless sharing of personal information in fact entrenches Facebook’s position. Take, for example, Europe’s vaunted GDPR law: as I &lt;a href=&quot;https://stratechery.com/2017/the-gdpr-and-facebook-and-google-intelligent-tracking-prevention-data-portability-and-social-graphs/&quot;&gt;explained in the Daily Update&lt;/a&gt;, data portability that, for privacy reasons, excludes the social graph (because your friends didn’t give you permission to share their information with other services) makes it that much harder for competition to arise.&lt;/p&gt;
&lt;p&gt;So it was with the FTC’s restrictions around the WhatsApp deal: the agency reiterated that Facebook couldn’t violate user’s privacy, and completely ignored that the easiest away around privacy restrictions is to simply own all of a user’s social interactions.&lt;/p&gt;
&lt;h4&gt;Understanding Social Networks&lt;/h4&gt;
&lt;p&gt;Perhaps the most fanciful regulatory document of all, though, is not from the FTC, but rather the United Kingdom’s Office of Fair Trading. &lt;a href=&quot;http://webarchive.nationalarchives.gov.uk/20140402232639/http://www.oft.gov.uk/shared_oft/mergers_ea02/2012/facebook.pdf&quot;&gt;Its review of the Instagram deal&lt;/a&gt; rested on its analysis of Facebook Camera, an app that no longer exists.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There are several relatively strong competitors to Instagram in the supply of camera and photo editing apps, and those competitors appear at present to be a stronger constraint on Instagram than Facebook’s new app. The majority of third parties did not believe that photo apps are attractive to advertisers on a stand-alone basis, but that they are complementary to social networks. The OFT therefore does not believe that the transaction gives rise to a realistic prospect of a substantial lessening of competition in the supply of photo apps.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;“The supply of photo apps.” What a stunningly ignorant evaluation of what Instagram already was: not simply a photo filter app but a social network in its own right. The part about revenue generation, though, was even more amazing:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The parties’ revenue models are also very different. While Facebook generates revenue from advertising and users purchasing virtual and digital goods via Facebook, Instagram does not generate any revenue.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This bit, five year on, still leaves me speechless: Instagram didn’t generate advertising revenue because that’s not how social networks work. As &lt;a href=&quot;https://stratechery.com/2015/daily-update-facebooks-earnings-naverline-disappoint/&quot;&gt;Mark Zuckerberg frequently explains&lt;/a&gt;, there is a formula for monetization: first grow users, then increase engagement, next attract businesses, and finally sell ads. Just because Instagram, at the time of this acquisition, was still in Stage 1, did not preclude the possibility of Stage 4; the problem is that the Office of Fair Trading simply had no idea how this world worked.&lt;/p&gt;
&lt;p&gt;The issue is straightforward: networks are &lt;a href=&quot;https://stratechery.com/2016/antitrust-and-aggregation/&quot;&gt;the monopoly makers of the Internet era&lt;/a&gt;. To build one is extremely difficult, but, once built, nearly impregnable. The only possible antidote is &lt;em&gt;another&lt;/em&gt; network that draws away the one scarce resource: attention. To that end, when it comes to the Internet, the single most effective tool in antitrust regulation is keeping social networks in separate competitive companies. That the FTC and Office of Fair Trading failed to do so in the case of Instagram and WhatsApp is to the detriment of everyone.&lt;/p&gt;
&lt;h4&gt;Facebook and &lt;em&gt;tbh&lt;/em&gt;&lt;/h4&gt;
&lt;p&gt;This is the context for Facebook’s &lt;em&gt;tbh&lt;/em&gt; acquisition. The app, new as it is, is attacking greenspace in the Social-Communication Map:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stratechery.com/wp-content/uploads/2017/10/IMG_0019.png&quot;&gt;&lt;img src=&quot;https://stratechery.com/wp-content/uploads/2017/10/IMG_0019-1024x768.png&quot; alt=&quot;&quot; width=&quot;640&quot; height=&quot;480&quot; class=&quot;aligncenter size-large wp-image-2796&quot; srcset=&quot;https://stratechery.com/wp-content/uploads/2017/10/IMG_0019-1024x768.png 1024w, https://stratechery.com/wp-content/uploads/2017/10/IMG_0019-300x225.png 300w, https://stratechery.com/wp-content/uploads/2017/10/IMG_0019-768x576.png 768w&quot; sizes=&quot;(max-width: 640px) 100vw, 640px&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;tbh&lt;/em&gt; is hardly the only contender: Secret and &lt;a href=&quot;https://stratechery.com/2014/daily-update-yikyak-raises-62-million-recode-removes-comments-problem-apples-red-campaign/&quot;&gt;Yik Yak&lt;/a&gt; were others. Secret failed due to the lack of an organizational mechanic and negativity; Yik Yak fixed the former by utilizing location, but suffered from the same negativity problem. &lt;em&gt;tbh&lt;/em&gt; has clearly learned lessons from both: the app leverages both location and your address book as an organizing mechanic, and is engineered from the ground-up to be focused on positivity.&lt;/p&gt;
&lt;p&gt;Moreover, it’s easy to see how it could be super-charged by Facebook: the social graph is probably even more powerful than the address book in terms of building a network, and provides multiple outlets for connections established on &lt;em&gt;tbh&lt;/em&gt;. Just as importantly, Facebook can in the short term fund &lt;em&gt;tbh&lt;/em&gt; and, in the long run, simply graft the service onto its cross-app sales engine. It’s a great move for both parties.&lt;/p&gt;
&lt;p&gt;What is much more questionable, though, is whether this is a great deal for society. &lt;em&gt;tbh&lt;/em&gt; is, by definition, winning share in the zero sum competition for attention in the ultra-desirable teenage demographic in particular, and that’s good news for any would-be Facebook competitors. Why should it be ok for Facebook to simply swallow up another app, small thoughh it may currently be? Again, simply looking at narrowly-defined marketshare estimations or non-existent revenue streams is to fundamentally misunderstand how social networks work.&lt;/p&gt;
&lt;p&gt;Indeed, I’ve &lt;a href=&quot;https://stratechery.com/2017/manifestos-and-monopolies/&quot;&gt;already made my position clear&lt;/a&gt; — social networks should &lt;em&gt;not&lt;/em&gt; be allowed to acquire other social networks:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Facebook should not be allowed to buy another network-based app; I would go further and make it prima facie anticompetitive for one social network to buy another. Network effects are just too powerful to allow them to be combined. For example, the current environment would look a lot different if Facebook didn’t own Instagram or WhatsApp (and, should Facebook ever lose an antitrust lawsuit, the remedy would almost certainly be spinning off Instagram and WhatsApp).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The FTC dropped the ball with Instagram and WhatsApp; absent a time machine, the best time to do the right thing is right now.&lt;/p&gt;
&lt;p&gt;Or, perhaps, Facebook should be allowed to proceed — but with conditions. My second demand is about the social graph:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;All social networks should be required to enable social graph portability — the ability to export your lists of friends from one network to another. Again Instagram is the perfect example: the one-time photo-filtering app launched its network off the back of Twitter by enabling the wholesale import of your Twitter social graph. And, after it was acquired by Facebook, Instagram has only accelerated its growth by continually importing your Facebook network. Today all social networks have long since made this impossible, making it that much more difficult for competitors to arise.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Requiring Facebook to offer its social graph to any would-be competitor as a condition of acquiring &lt;em&gt;tbh&lt;/em&gt; would be a good outcome; unfortunately, it is perhaps the most unlikely, given the FTC’s commitment to unfettered privacy (without a consideration of the impact on competition).&lt;/p&gt;
&lt;p&gt;What shouldn’t be allowed is what Facebook clearly hopes — and suggests — will happen: no regulatory review at all. The FTC has the power, and it’s time to use it.&lt;/p&gt;
&lt;ol class=&quot;footnotes&quot;&gt;&lt;li id=&quot;footnote_0_2795&quot; class=&quot;footnote&quot;&gt;&lt;em&gt;Perceived&lt;/em&gt; is a critical point: Twitter and Instagram, for example, are permanent, but are perceived by most as being ephemeral (arguably Twitter’s has shifted in the public conscious as being something that is more permanent) [&lt;a href=&quot;https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/#identifier_0_2795&quot; class=&quot;footnote-link footnote-back-link&quot;&gt;↩&lt;/a&gt;]&lt;/li&gt;
&lt;li id=&quot;footnote_1_2795&quot; class=&quot;footnote&quot;&gt;The most noteworthy exceptions being the United States (mixed), China (WeChat), South Korea (Kakao), Japan, Thailand, and Taiwan (LINE) [&lt;a href=&quot;https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/#identifier_1_2795&quot; class=&quot;footnote-link footnote-back-link&quot;&gt;↩&lt;/a&gt;]&lt;/li&gt;
&lt;li id=&quot;footnote_2_2795&quot; class=&quot;footnote&quot;&gt;As an aside, for all of Snapchat’s troubles to justify its $24 billion IPO, keep in mind that the vast majority of the commentariat insisted Spiegel was irrational to turn down $3 billion; it’s a reminder that few understand exponential growth curves [&lt;a href=&quot;https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/#identifier_2_2795&quot; class=&quot;footnote-link footnote-back-link&quot;&gt;↩&lt;/a&gt;]&lt;/li&gt;
&lt;/ol&gt;&lt;div class=&quot;sharedaddy sd-sharing-enabled&quot;&gt;
&lt;div class=&quot;robots-nocontent sd-block sd-social sd-social-icon-text sd-sharing&quot;&gt;
&lt;h3 class=&quot;sd-title&quot;&gt;Share this:&lt;/h3&gt;

&lt;/div&gt;
&lt;/div&gt;
</description>
<pubDate>Wed, 25 Oct 2017 05:28:16 +0000</pubDate>
<dc:creator>kawera</dc:creator>
<og:type>article</og:type>
<og:title>Why Facebook Shouldn’t Be Allowed to Buy tbh</og:title>
<og:url>https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/</og:url>
<og:description>Facebook is acquiring tbh, another burgeoning social network; regulators erred in allowing the Instagram and WhatsApp acquisitions, but there is no better place to start enforcing the law than now.</og:description>
<og:image>https://stratechery.com/wp-content/uploads/2017/10/IMG_0019-1024x768.png</og:image>
<dc:language>en-US</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://stratechery.com/2017/why-facebook-shouldnt-be-allowed-to-buy-tbh/</dc:identifier>
</item>
<item>
<title>U.S. Consumer Bureau Loses Fight to Allow More Class-Action Suits</title>
<link>https://www.nytimes.com/2017/10/24/business/senate-vote-wall-street-regulation.html</link>
<guid isPermaLink="true" >https://www.nytimes.com/2017/10/24/business/senate-vote-wall-street-regulation.html</guid>
<description>&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;398&quot; data-total-count=&quot;1992&quot; id=&quot;story-continues-3&quot;&gt;The arbitration rule has sparked a political battle that has taken on broader significance in the new administration. Republicans latched on to the rule as a way to cast the agency as a player in the regulatory regime that was impeding business and the economy. Shortly after the rule was adopted in July, the U.S. Chamber of Commerce pointed to it as a “prime example of an agency gone rogue.”&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;208&quot; data-total-count=&quot;2200&quot;&gt;In recent months, financial firms and their Republican allies in Congress mobilized to defeat the rule. Some credit unions and community banks also weighed in, lodging calls to lawmakers in their home states.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;146&quot; data-total-count=&quot;2346&quot;&gt;Under the Congressional Review Act, Republicans had roughly &lt;a href=&quot;https://www.nytimes.com/2016/11/16/business/with-trumps-signature-obamas-rules-could-fall.html&quot;&gt;60 legislative days&lt;/a&gt; to overturn the rule. The House passed its own resolution in July.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;276&quot; data-total-count=&quot;2622&quot;&gt;Wrangling the votes in the Senate was trickier. In the weeks leading up to the vote, Senator Lindsey Graham, Republican of South Carolina, who sponsored &lt;a href=&quot;https://www.nytimes.com/2015/11/21/business/dealbook/bipartisan-bill-would-protect-service-members-right-to-go-to-court.html&quot;&gt;legislation&lt;/a&gt; to protect military members from being forced into arbitration, said he would not support a repeal of the rule.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;272&quot; data-total-count=&quot;2894&quot;&gt;Looking to head off a repeal, Democrats and consumer advocates branded the effort as a gift to financial institutions like Wells Fargo and Equifax. Both companies, in the face of corporate scandals, used arbitration clauses to try to quash legal challenges from customers.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;209&quot; data-total-count=&quot;3103&quot;&gt;The rule, Democrats argued, was precisely what was needed to protect the rights of vulnerable borrowers. Regulators and judges, including some appointed by Republican presidents, have also backed the position.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;428&quot; data-total-count=&quot;3531&quot;&gt;Class actions, they argue, are not just about the size of the payouts, which are typically spread out among a large group of people. They are also about pushing companies to change their practices. Large banks, for example, had to pay more than $1 billion to settle class actions beginning in 2009 that accused them of tweaking checking account policies to increase the amount of overdraft fees that they could charge customers.&lt;/p&gt;
&lt;div id=&quot;story-ad-2&quot; class=&quot;story-ad ad ad-placeholder nocontent robots-nocontent&quot;&gt;

&lt;a class=&quot;visually-hidden skip-to-text-link&quot; href=&quot;https://www.nytimes.com/2017/10/24/business/senate-vote-wall-street-regulation.html#story-continues-4&quot;&gt;Continue reading the main story&lt;/a&gt;&lt;/div&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;292&quot; data-total-count=&quot;3823&quot; id=&quot;story-continues-4&quot;&gt;“Tonight’s vote is a giant setback for every consumer in this country,” Richard Cordray, the director of the consumer bureau, said in a statement. “As a result, companies like Wells Fargo and Equifax remain free to break the law without fear of legal blowback from their customers.”&lt;/p&gt;
&lt;span class=&quot;visually-hidden&quot;&gt;Photo&lt;/span&gt;
&lt;div class=&quot;image&quot;&gt;&lt;img src=&quot;https://static01.nyt.com/images/2017/10/25/business/25ARBITRATION-2/25ARBITRATION-2-master675.jpg&quot; alt=&quot;&quot; class=&quot;media-viewer-candidate&quot; data-mediaviewer-src=&quot;https://static01.nyt.com/images/2017/10/25/business/25ARBITRATION-2/25ARBITRATION-2-superJumbo.jpg&quot; data-mediaviewer-caption=&quot;Senator John Cornyn, Republican of Texas, called the rule &amp;#x201C;harmful regulation that imposes obvious costs and offers invisible benefits.&amp;#x201D;&quot; data-mediaviewer-credit=&quot;Michael Reynolds/European Pressphoto Agency&quot; itemprop=&quot;url&quot; itemid=&quot;https://static01.nyt.com/images/2017/10/25/business/25ARBITRATION-2/25ARBITRATION-2-master675.jpg&quot;/&gt;&lt;/div&gt;
&lt;span class=&quot;caption-text&quot;&gt;Senator John Cornyn, Republican of Texas, called the rule “harmful regulation that imposes obvious costs and offers invisible benefits.”&lt;/span&gt; &lt;span class=&quot;credit&quot; itemprop=&quot;copyrightHolder&quot;&gt;&lt;span class=&quot;visually-hidden&quot;&gt;Credit&lt;/span&gt; Michael Reynolds/European Pressphoto Agency&lt;/span&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;264&quot; data-total-count=&quot;4087&quot;&gt;The vote was a win for a party that has struggled to deliver on its legislative priorities. Last month, Senator Mitch McConnell of Kentucky, the majority leader, failed to drum up the support needed to overturn President Barack Obama’s signature health care &lt;a href=&quot;https://www.nytimes.com/2017/09/27/us/politics/mcconnell-gambled-on-health-care-and-the-alabama-senate-race-he-lost.html&quot;&gt;law&lt;/a&gt;.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;277&quot; data-total-count=&quot;4364&quot;&gt;Mr. Graham and Senator John Kennedy of Louisiana broke with the Republicans to vote against the measure. But Senator John McCain of Arizona, whom some Democrats had hoped to sway, voted to overturn the rule. The measure now heads to President Trump, who is expected to sign it.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;266&quot; data-total-count=&quot;4630&quot;&gt;The consumer bureau has unusually broad authority — and autonomy from both the White House and Congress — to enforce existing federal laws and write new regulations, like the arbitration rule. That independence has rankled Republicans and other federal agencies.&lt;/p&gt;


&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;364&quot; data-total-count=&quot;4994&quot;&gt;In June, the Treasury Department issued a report accusing the agency of regulatory overreach and calling for Mr. Trump to have the right to remove its director. This week, the department weighed in directly on the arbitration rule, &lt;a href=&quot;https://www.treasury.gov/press-center/press-releases/Documents/10-23-17%20Analysis%20of%20CFPB%20arbitration%20rule.pdf&quot;&gt;warning&lt;/a&gt; that the regulation could unleash frivolous lawsuits, costing financial firms an estimated $500 million in legal fees alone.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;333&quot; data-total-count=&quot;5327&quot;&gt;Republicans echoed those arguments on the floor of the Senate on Tuesday. Senator John Cornyn, Republican of Texas, rallied his peers, calling it “harmful regulation that imposes obvious costs and offers invisible benefits.” Like the Treasury report, he argued that class actions “enrich lawyers” at the expense of consumers.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;125&quot; data-total-count=&quot;5452&quot;&gt;The debate over the arbitration rule put Mr. Cordray, into an odd position of publicly bickering with other federal agencies.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;316&quot; data-total-count=&quot;5768&quot;&gt;After the Treasury report, Mr. Cordray sent a letter to Treasury Secretary Steven Mnuchin faulting the department for misrepresenting the bureau’s work. He also expressed surprise at the report, noting that during his agency’s work on arbitration, the Treasury “raised no issues or concerns with the bureau.”&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;211&quot; data-total-count=&quot;5979&quot;&gt;The friction is intensifying as Mr. Cordray’s tenure at the bureau is ending. Appointed by Mr. Obama in 2012 to a five-year term, Mr. Cordray is widely expected to step down sooner to run for governor in Ohio.&lt;/p&gt;
&lt;div id=&quot;story-ad-3&quot; class=&quot;story-ad ad ad-placeholder nocontent robots-nocontent&quot;&gt;

&lt;a class=&quot;visually-hidden skip-to-text-link&quot; href=&quot;https://www.nytimes.com/2017/10/24/business/senate-vote-wall-street-regulation.html#story-continues-5&quot;&gt;Continue reading the main story&lt;/a&gt;&lt;/div&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;167&quot; data-total-count=&quot;6146&quot; id=&quot;story-continues-5&quot;&gt;Mr. Trump will then be free to install his own appointee, a move that is expected to defang what has been one of the financial industry’s most aggressive regulators.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;266&quot; data-total-count=&quot;6412&quot;&gt;The arbitration rule, in many ways, encapsulated the bureau’s work: It was independent and designed to fill a regulatory gap. The rule was the first major check on arbitration since a pair of Supreme Court decisions, in 2011 and 2013, enshrined its widespread use.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;238&quot; data-total-count=&quot;6650&quot;&gt;Emboldened by those decisions, more and more companies adopted the clauses. Today, it is hard to open up a checking account, rent a car, get cable service or check a loved one into a nursing home without agreeing to mandatory arbitration.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;305&quot; data-total-count=&quot;6955&quot;&gt;As arbitration clauses appeared in tens of millions of contracts, the consumer agency was specifically mandated to study arbitration under the Dodd-Frank financial law in 2010. That effort culminated in a &lt;a href=&quot;http://files.consumerfinance.gov/f/201503_cfpb_arbitration-study-report-to-congress-2015.pdf&quot;&gt;728&lt;/a&gt;-page report, released in March 2015, that challenged longstanding assumptions about arbitration.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;274&quot; data-total-count=&quot;7229&quot;&gt;The agency found that once blocked from suing, few people went to arbitration at all. And the results for those who did were dismal. During the two-year period studied, only 78 arbitration claims resulted in judgments in favor of consumers, who got $400,000 in total relief.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;51&quot; data-total-count=&quot;7280&quot;&gt;The vote late Tuesday left many Democrats dismayed.&lt;/p&gt;
&lt;p class=&quot;story-body-text story-content&quot; data-para-count=&quot;247&quot; data-total-count=&quot;7527&quot;&gt;Senator Sherrod Brown, Democrat of Ohio, said the Republicans had betrayed ordinary Americans. “By voting to take rights away from customers,” he said, “the Senate voted tonight to side with Wells Fargo lobbyists over the people we serve.”&lt;/p&gt;
&lt;a class=&quot;visually-hidden skip-to-text-link&quot; href=&quot;https://www.nytimes.com/2017/10/24/business/senate-vote-wall-street-regulation.html#whats-next&quot;&gt;Continue reading the main story&lt;/a&gt;</description>
<pubDate>Wed, 25 Oct 2017 05:05:42 +0000</pubDate>
<dc:creator>runesoerensen</dc:creator>
<og:url>https://www.nytimes.com/2017/10/24/business/senate-vote-wall-street-regulation.html</og:url>
<og:type>article</og:type>
<og:title>Consumer Bureau Loses Fight to Allow More Class-Action Suits</og:title>
<og:description>A Senate vote to overturn a rule restricting arbitration clauses, with Vice President Mike Pence breaking a tie, was part of a Republican push to roll back Obama-era financial regulations.</og:description>
<og:image>https://static01.nyt.com/images/2017/10/25/business/25ARBITRATION1/25ARBITRATION1-facebookJumbo.jpg</og:image>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.nytimes.com/2017/10/24/business/senate-vote-wall-street-regulation.html</dc:identifier>
</item>
<item>
<title>The Anti-Portfolio</title>
<link>https://www.bvp.com/portfolio/anti-portfolio</link>
<guid isPermaLink="true" >https://www.bvp.com/portfolio/anti-portfolio</guid>
<description>&lt;tr readability=&quot;8&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Air%20Bnb%20PNG.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;Jeremy Levine met Brian Chesky in January 2010, the first $100K revenue month. Brian’s $40M valuation ask was “crazy”, but Jeremy was impressed and made a plan to reconnect in May. Unbeknownst to Jeremy $100K in January became 200 in February and 300 in March. In April, Airbnb raised money at 1.5X the “crazy” price. Their last fundraising was completed at ~500X that valuation.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;
&lt;p&gt;&lt;img alt=&quot;Apple Computer&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Apple%20LOGO.png&quot;/&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;BVP had the opportunity to invest in pre-IPO secondary stock in Apple at a $60M valuation. BVP's Neill Brownstein called it &quot;outrageously expensive.&quot;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;9&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Atlassian%20Logo%20PNG_1.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;Buzz of a developer tool from Australia (of all places!) drove Byron Deeter to Atlassian’s door in 2006. Notes from the meeting included “totally self-financed, started with a credit card” and “great business but Scott &amp;amp; Mike don’t ever want to be a public company.” Years and countless meetings later the first opportunity to invest emerged in 2010, but the $400m company valuation was thought to be a tad “rich” by then. In 2015, Atlassian became the largest tech IPO in Australian history, and the shares we passed on are worth more than a billion dollars today.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;

&lt;p&gt;&lt;img alt=&quot;eBay&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Ebay%20PNG.png&quot;/&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td&gt;&quot;Stamps? Coins? Comic books? You've GOT to be kidding,&quot; thought Cowan. &quot;No-brainer pass.&quot;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Facebook%20PNG.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;Jeremy Levine spent a weekend at a corporate retreat in the summer of 2004 dodging persistent Harvard undergrad Eduardo Saverin's rabid pitch. Finally, cornered in a lunch line, Jeremy delivered some sage advice &quot;Kid, haven't you heard of Friendster? Move on. It's over!&quot;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td&gt;&lt;img alt=&quot;Federal Express&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/fedex.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;Incredibly, BVP passed on Federal Express seven times.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7&quot;&gt;&lt;td&gt;&lt;img alt=&quot;Google&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Google%20Logo.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;Cowan’s college friend rented her garage to Sergey and Larry for their first year. In 1999 and 2000 she tried to introduce Cowan to “these two really smart Stanford students writing a search engine.” Students? A new search engine? In the most important moment ever for Bessemer’s anti-portfolio, Cowan asked her, “How can I get out of this house without going anywhere near your garage?”&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;&lt;img alt=&quot;Intel&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Intel%20PNG.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;BVP's Pete Bancroft never quite settled on terms with Bob Noyce, who instead took venture financing from a guy named Arthur Rock.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Intuit%20PNG_0.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;Along with every venture capitalist on Sand Hill Road, Neill Brownstein turned down Intuit founder Scott Cook. Scott managed to scrape together only $225K from friends, including HBS classmate and Sierra Ventures founder Peter Wendell, who personally invested $25K to get Scott off his back.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Kayak%20PNG.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;After extensive diligence Jeremy Levine identified a fatal business model flaw: airlines wouldn't pay high fees for placement on the platform. Fortunately for Kayak, hotels did. As did Priceline when it acquired the company for $1.8 billion.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;9&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/lotus_compaq.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;Ben Rosen, one of the founders of Sevin Rosen, offered Felda Hardymon the chance to invest in both Lotus and Compaq Computer on the same day. Says Hardymon: &quot;Lotus wasn't proven yet, and I was worried about the situation there. As for Compaq, I told him there was no real future in transportable computers since IBM could do it.&quot;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Paypal%20Logo.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;David Cowan passed on the Series A round. Rookie team, regulatory nightmare, and, 4 years later, a $1.5 billion acquisition by eBay.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;8&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Snap%20Chat%20Logo.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;In 2011 Jeremy Levine arrived at LAX three hours late, thanks to flight delays, with enough time for only one of the two meetings on his calendar. He literally tossed a quarter and phoned Evan Spiegel with his regrets. Because Jeremy does nothing halfway, he then visited Zip Recruiter where he fretted to CEO Ian Siegel that Zip’s business model had vulnerabilities. SNAP was the largest IPO in 2017 and Zip Recruiter is one of the fastest growing &amp;gt;$200M SaaS companies.&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td&gt;&lt;img alt=&quot;&quot; src=&quot;https://res.cloudinary.com/bvp-com/image/upload/f_auto,q_80/sites/default/files/Tesla%20PNG.png&quot;/&gt;&lt;/td&gt;
&lt;td&gt;In 2006 Byron Deeter met the team and test-drove a roadster. He put a deposit on the car, but passed on the negative margin company telling his partners &quot;It's a win-win. I get a great car and some other VC pays for it!&quot; The company passed $30B in market cap in 2014. Byron recently paid full price for his Model X.&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt; &lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt; &lt;/td&gt;
&lt;td&gt; &lt;/td&gt;
&lt;/tr&gt;</description>
<pubDate>Wed, 25 Oct 2017 03:10:14 +0000</pubDate>
<dc:creator>bbourn</dc:creator>
<og:type>article</og:type>
<og:url>https://www.bvp.com/portfolio/anti-portfolio</og:url>
<og:title>The Anti-Portfolio</og:title>
<og:description>Over the course of our history, we did invest in a wig company, a french-fry company, and the Lahaina, Ka'anapali &amp; Pacific Railroad. However, we chose to decline these investments, each of which we had the opportunity to invest in, and each of which later blossomed into a tremendously successful company.</og:description>
<dc:language>en</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://www.bvp.com/portfolio/anti-portfolio</dc:identifier>
</item>
<item>
<title>The geometry of Islamic art becomes a game</title>
<link>https://arstechnica.com/gaming/2017/10/engare-review-spirographs-math-and-islamic-art-blend-for-quite-the-game/</link>
<guid isPermaLink="true" >https://arstechnica.com/gaming/2017/10/engare-review-spirographs-math-and-islamic-art-blend-for-quite-the-game/</guid>
<description>&lt;img src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/1-800x450.png&quot;/&gt;&lt;div class=&quot;caption-text&quot;&gt;&lt;a href=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/1.png&quot; class=&quot;enlarge-link&quot; data-height=&quot;1080&quot; data-width=&quot;1920&quot;&gt;Enlarge&lt;/a&gt; &lt;span class=&quot;sep&quot;&gt;/&lt;/span&gt; Welcome to &lt;em&gt;Engare&lt;/em&gt;.&lt;/div&gt;&lt;aside id=&quot;social-left&quot;&gt;&lt;a title=&quot;29 posters participating&quot; class=&quot;comment-count icon-comment-bubble-down&quot; href=&quot;https://arstechnica.com/gaming/2017/10/engare-review-spirographs-math-and-islamic-art-blend-for-quite-the-game/?comments=1&quot;&gt;&lt;span class=&quot;comment-count-before&quot;&gt;reader comments&lt;/span&gt; &lt;span class=&quot;comment-count-number&quot;&gt;46&lt;/span&gt;&lt;/a&gt;
&lt;div class=&quot;share-links&quot;&gt;&lt;span&gt;Share this story&lt;/span&gt;    &lt;/div&gt;
&lt;/aside&gt;&lt;aside class=&quot;pullbox sidebar right&quot;&gt;&lt;h2&gt;Game Details&lt;/h2&gt;
&lt;strong&gt;Developer:&lt;/strong&gt; Mahdi Bahrami&lt;br/&gt;&lt;strong&gt;Publisher&lt;/strong&gt;: Mahdi Bahrami&lt;br/&gt;&lt;strong&gt;Platform&lt;/strong&gt;: PC, macOS&lt;br/&gt;&lt;strong&gt;Release Date:&lt;/strong&gt; October 23rd&lt;br/&gt;&lt;strong&gt;Price&lt;/strong&gt;: $6.99&lt;br/&gt;&lt;strong&gt;Links:&lt;/strong&gt; &lt;a href=&quot;http://www.engare.design/&quot;&gt;Official website&lt;/a&gt; &lt;/aside&gt;&lt;p&gt;Your first-blush impression of new video game &lt;em&gt;Engare&lt;/em&gt;, perhaps more than any other arty &quot;indie&quot; game in recent memory, will likely boil down to what you think about video games in general.&lt;/p&gt;
&lt;p&gt;If you're looking for something to blow the industry's tropes out of the water, then &lt;em&gt;Engare&lt;/em&gt; should skyrocket to the top of any list you're making. It's a clever, deceptively simple, and beautiful rumination on geometry and Islamic art-making traditions. Try attaching &lt;a href=&quot;https://venturebeat.com/2012/07/15/you-cant-un-see-these-11-video-game-box-art-cliches/&quot;&gt;a generic, smoldering white-man box cover&lt;/a&gt; onto &lt;em&gt;that&lt;/em&gt; concept.&lt;/p&gt;
&lt;p&gt;If you're a well-versed &quot;gamer,&quot; on the other hand, &lt;em&gt;Engare&lt;/em&gt; may not strike you so intensely at first. At its core, it's a spirograph art game with a series of relatively simple puzzles, and it comes with a freeform art toy that unlocks its puzzles' tools to make whatever patterns you please. The puzzles and the art tools, separately, are straightforward.&lt;/p&gt;
&lt;p&gt;But combined, &lt;em&gt;Engare&lt;/em&gt;'s complete package really is a wonderful interactive math... thing. Call it a game, a tool, a toy, or a widget. Whatever semantics you choose, there's a story in &lt;em&gt;Engare&lt;/em&gt;'s fantastical geometric shapes, and the way you click through its progression is powerful and unique.&lt;/p&gt;
&lt;h2&gt;Circles, lines, and pulleys&lt;/h2&gt;
&lt;div class=&quot;gallery shortcode-gallery&quot;&gt;
&lt;ul&gt;&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.37-PM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.37-PM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.37-PM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.37-PM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192433&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;&lt;em&gt;Engare&lt;/em&gt;'s first puzzle is simple enough: figure out how to draw a line that matches the green box above.&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.42-PM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.42-PM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.42-PM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.42-PM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192435&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;We place the dot at the top of the circle, and then it rolls...&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.44-PM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.44-PM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.44-PM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.29.44-PM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192437&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;... and the dot follows all the way around the ball's rotation while it also moves forward in space. The result: a little divot line!&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.05-PM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.05-PM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.05-PM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.05-PM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192439&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;Now to do the same with a box that falls off an edge. The gray outline is a failed attempt from earlier. The green dot is where I'm SUPPOSED to start.&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.10-PM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.10-PM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.10-PM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-5.30.10-PM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192441&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;And there, we've recreated the requested line.&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-10.19.20-AM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-10.19.20-AM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-10.19.20-AM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-23-at-10.19.20-AM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192449&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;Puzzles get... decidedly more complex. We have three circles to contend with: one as a central guide, one that spins around the central guide, and a rotation INSIDE another circle. There's also a curly line from a failed attempt to match the orientation of the demanded puzzle solution.&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.38-AM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.38-AM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.38-AM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.38-AM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192443&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;And here's another rotation-combination puzzle. Three pegs in all are rotating here.&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.54-AM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.54-AM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.54-AM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.43.54-AM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192445&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;Here, I FINALLY find the right spot on the pegs to draw the requested shape.&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.44.10-AM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.44.10-AM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.44.10-AM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.44.10-AM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192447&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;And now the game completes the full pattern for me.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;The game, made almost entirely by 23-year-old Iranian developer Mahdi Bahrami, starts with a 2D scene of a circle repeatedly traveling along a line. Above this, an instructional card shows a curved-diagonal line. Drop a dot on the moving circle, the game says, and it will generate a bold line, like ink on a page. As the ball (and thus, your dot) rolls, the inked line unfurls; if you put the dot on a different part of the circle, then your inked line may have more curve or angle to it, based on the total motion of the moving, rotating circle. Your object is to recreate this exact curved-diagonal line. If your first ink-drop doesn't do the trick, try again.&lt;/p&gt;
&lt;p&gt;Each puzzle presents an increasingly complex array of moving and rotating shapes, lines, and dots. You have to watch the repeating patterns and rotations in a particular puzzle to understand where to drop an ink dot and draw the demanded line. At first, you'll have to recreate simple turns, curves, and zig-zags. By the end, you'll be making insane curlicues and rug-like super-patterns.&lt;/p&gt;
&lt;p&gt;The whole reason I'm even writing this game up is because I went into &lt;em&gt;Engare&lt;/em&gt;'s opening and saw little more than simple puzzles. Maybe it's &lt;a href=&quot;https://arstechnica.com/gaming/2016/01/the-witness-review-an-island-where-knowledge-mystery-are-the-treasures/&quot;&gt;&lt;em&gt;The Witness&lt;/em&gt;'s&lt;/a&gt; fault, but I see lines, circles, and patterns in my natural world all of the time. I'm obsessed with the math inherent in all of the organic and man-made designs that surround me at a moment's notice. (I'm weird like that.) This game, at first, did little more than reinforce that view of the world.&lt;/p&gt;
&lt;div class=&quot;gallery shortcode-gallery&quot;&gt;
&lt;ul&gt;&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.37-AM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.37-AM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.37-AM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.37-AM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192453&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;I only had to solve for one line in this puzzle. But &lt;em&gt;Engare&lt;/em&gt; started drawing a BUNCH of lines when I solved it.&lt;/div&gt;
&lt;/li&gt;
&lt;li data-thumb=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.49-AM-150x150.png&quot; data-src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.49-AM.png&quot; data-responsive=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.49-AM-980x613.png 1080, https://cdn.arstechnica.net/wp-content/uploads/2017/10/Screen-Shot-2017-10-22-at-11.22.49-AM-1440x900.png 2560&quot; data-sub-html=&quot;#caption-1192455&quot;&gt;

&lt;div class=&quot;caption&quot;&gt;The sensation of color and shape lighting up on these new, matching lines blew my math-loving heart away.&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;p&gt;But even this jaded math wiz-kid couldn't help but drop his jaw, loose his tongue, and bulge his eyes at the first time &lt;em&gt;Engare&lt;/em&gt; cracked open its math-rich heart. One early puzzle (shown above) ended with its seemingly simple pattern repeating over and over and over and over. Unlike other puzzles, this pattern kept drawing itself, even after I'd fulfilled a simple line-and-turn pattern. And with each pass of the drawing pattern, driven by a spinning, central circle, &lt;em&gt;Engare&lt;/em&gt; drew and filled a new, bright color.&lt;/p&gt;
&lt;p&gt;This is what the game's creator is trying to shout, I thought. This is his unique, cultural perspective. This looks like the Persian rugs he saw his grandmother weave as a child.&lt;/p&gt;
&lt;p&gt;That's a cheat for me to think of, I admit, as I'd seen Bahrami present &lt;a href=&quot;https://arstechnica.com/gaming/2014/05/the-ars-indie-showcase-30-games-to-watch-in-2014/2/&quot;&gt;an early version of &lt;em&gt;Engare&lt;/em&gt; at GDC's annual Experimental Games Workshop in 2014&lt;/a&gt;. It was his second game about Persian rugs, turns out, and he talked about his own family stories when presenting the concept. But &lt;em&gt;Engare&lt;/em&gt;, as a finished game, picks and chooses its cultural content. It's not necessarily subtle, thanks to the game's use of Islamic architectural design, Arabic alphabet, and regionally appropriate soundtrack that sounds like it was made by Austin Wintory (but is actually from an upstart musician named Mim Rasouli). But the game doesn't further stress its cultural ties with a discrete story or specific instructions. You solve puzzles to create beautiful, geometric shapes, and, in the process, you'll very likely connect the results to gorgeous rug patterns and building designs that you've seen elsewhere in the world.&lt;/p&gt;
&lt;h2&gt;A new generation’s &lt;em&gt;SimCity&lt;/em&gt;?&lt;/h2&gt;
&lt;a href=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/ss_d0d60a1a0f4cc57393b8fd46e6488db492b35e16.jpg&quot; class=&quot;enlarge&quot; data-height=&quot;1080&quot; data-width=&quot;1920&quot; alt=&quot;&amp;lt;em&amp;gt;Engare&amp;lt;/em&amp;gt;'s pattern-generation tool.&quot;&gt;&lt;img src=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/ss_d0d60a1a0f4cc57393b8fd46e6488db492b35e16-980x551.jpg&quot; width=&quot;980&quot; height=&quot;551&quot; alt=&quot;&amp;lt;em&amp;gt;Engare&amp;lt;/em&amp;gt;'s pattern-generation tool.&quot;/&gt;&lt;/a&gt;
&lt;div class=&quot;caption-text&quot;&gt;&lt;a href=&quot;https://cdn.arstechnica.net/wp-content/uploads/2017/10/ss_d0d60a1a0f4cc57393b8fd46e6488db492b35e16.jpg&quot; class=&quot;enlarge-link&quot; data-height=&quot;1080&quot; data-width=&quot;1920&quot;&gt;Enlarge&lt;/a&gt; &lt;span class=&quot;sep&quot;&gt;/&lt;/span&gt; &lt;em&gt;Engare&lt;/em&gt;'s pattern-generation tool.&lt;/div&gt;
&lt;p&gt;After completing enough puzzles, &lt;em&gt;Engare&lt;/em&gt; unlocks its pattern-generation toolset, and the results are quite simple. Place dots or drag lines, and amazing patterns emerge. The further you get in the game, the more complex these pattern-generation tools get. On their own, they simply make pretty things appear when you push their sliders forward and back.&lt;/p&gt;
&lt;p&gt;But in &lt;em&gt;Engare&lt;/em&gt;'s case, every massive, crisscrossing slew of curves and lines and patterns has already been proven out by the puzzles you've solved. Your reward for doing well in &lt;em&gt;Engare&lt;/em&gt; isn't unlocking more pattern-generation options; it's the ability to &lt;em&gt;understand&lt;/em&gt; the incredible combination of rotations and line patterns that went into each one and how they're all geometrically solvable thanks to their adherence to X and Y axes.&lt;/p&gt;
&lt;div class=&quot;wrapper&quot;&gt;&lt;iframe type=&quot;text/html&quot; width=&quot;640&quot; height=&quot;480&quot; src=&quot;https://www.youtube.com/embed/_632JwEl0hU?start=0&amp;amp;wmode=transparent&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;[embedded content]&lt;/iframe&gt;&lt;/div&gt;
&lt;div class=&quot;caption-text&quot;&gt;Official &lt;em&gt;Engare&lt;/em&gt; gameplay trailer.&lt;/div&gt;
&lt;p&gt;By the time you get to &lt;em&gt;Engare&lt;/em&gt;'s final puzzles, you'll run into truly brutal head-scratchers. These require that you manually manipulate a puzzle's spinning, moving parts until you find the right series of angles, especially once you have to deal with separate parts of a pulley system. Only once you get this right can you drop your ink dot and solve the puzzle in question. These final puzzles require a level of spatial and geometric recognition unlike anything I've ever seen in a video game. They're breathtaking—and may very well look less like interesting puzzles and more like maddening math homework, should this game not be your cup of tea.&lt;/p&gt;
&lt;p&gt;That's really the loudest warning I might offer: any grown-up who has ever shuddered at the thought of returning to geometry class should run, not walk, away from &lt;em&gt;Engare&lt;/em&gt;. Additionally, the game has launched with some optimization issues, including weird bugs on weaker processors (particularly when trying to track a mouse cursor) and obnoxious mouse control for tracking and placing ink dots on the game's later, harder, and faster-moving pattern wheels. And be ready for a game that runs out of puzzles very quickly. (On the one hand, it's good for a game to bow out before its gimmick gets old, but this is a rare example of a game whose puzzle design's upper limit is the &lt;em&gt;infinity of math&lt;/em&gt;. An expansion pack could totally happen here.)&lt;/p&gt;
&lt;aside class=&quot;pullbox sidebar story-sidebar right&quot;&gt;
&lt;/aside&gt;
But I'm so delighted that the years of wait for &lt;em&gt;Engare&lt;/em&gt;, after teases at events like GDC, turned out to feel absolutely magical and unique in the gaming realm. I want to install this game on the hard drive of every self-proclaimed nerd—and every elementary and middle school's computer labs. I want this wild geometrical-shape spirograph experiment to be an edu-tainment rite of passage, just like &lt;em&gt;SimCity&lt;/em&gt; and &lt;em&gt;Carmen Sandiego&lt;/em&gt; were for me. And maybe above all else, I want the Western world to look in awe at the culturally unique stuff that gaming can create when it's put in the hands of more diverse creators.
&lt;h2&gt;The good:&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;A geometry-driven puzzle game that generates beautiful, colorful patterns when you succeed. That's my jam.&lt;/li&gt;
&lt;li&gt;Scales incredibly well for older and younger players alike.&lt;/li&gt;
&lt;li&gt;Tasteful inclusion of cultural influences without walloping players over the head about them.&lt;/li&gt;
&lt;li&gt;Lovely musical score that matches the game's aesthetics.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;The bad:&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;This could be longer without wearing out its welcome.&lt;/li&gt;
&lt;li&gt;Pattern-generation tool feels a little too disconnected from the puzzles that it's borne from.&lt;/li&gt;
&lt;li&gt;If you don't want a game to feel like math homework, this isn't for you.&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;The ugly:&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;Technical hiccups at launch.&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;Verdict&lt;/strong&gt;: Buy two copies; donate the second one to a school computer lab.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;This article has been updated to correct the name of the game's composer.&lt;/em&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 25 Oct 2017 01:51:24 +0000</pubDate>
<dc:creator>sohkamyung</dc:creator>
<og:url>https://arstechnica.com/gaming/2017/10/engare-review-spirographs-math-and-islamic-art-blend-for-quite-the-game/</og:url>
<og:title>Engare review: The geometry of Islamic art becomes a treasure of a game</og:title>
<og:image>https://cdn.arstechnica.net/wp-content/uploads/2017/10/1-760x380.png</og:image>
<og:description>Delightful math-art puzzle game for adults and children alike.</og:description>
<og:type>article</og:type>
<dc:language>en-us</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>https://arstechnica.com/gaming/2017/10/engare-review-spirographs-math-and-islamic-art-blend-for-quite-the-game/</dc:identifier>
</item>
</channel>
</rss>