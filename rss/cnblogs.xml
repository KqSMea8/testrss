<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>kubernetes入门实践 - 水方子</title>
<link>http://www.cnblogs.com/huangzhenyou/p/8066145.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/huangzhenyou/p/8066145.html</guid>
<description>&lt;h2&gt;&lt;a href=&quot;https://www.kubernetes.org.cn/kubernetes%E8%AE%BE%E8%AE%A1%E6%9E%B6%E6%9E%84&quot; target=&quot;_blank&quot;&gt;k8s&lt;/a&gt;中文文档&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;k8s概念比较多，有什么概念的疑惑的推荐看k8s中文文档。&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;me的环境&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;操作系统：centos7&lt;/li&gt;
&lt;li&gt;docker：1.12.6&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;6.5333333333333&quot;&gt;
&lt;p&gt;环境跟me的不一致？不要慌，基本大部分操作都是行的通的。&lt;/p&gt;
&lt;p&gt;还慌？那就直接用网页在线版的&lt;a href=&quot;https://www.katacoda.com/courses/kubernetes&quot; target=&quot;_blank&quot;&gt;kubernets&lt;/a&gt;吧&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;kubernets单机版安装部署&lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;kubernetes部署算是有一定门槛的。为了不从入门到放弃，推荐一开始安装单机版作为入门熟悉kubectl指令、了解工作原理。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;安装流程，切换成root&lt;/h4&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 关闭centos自带的防火墙&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ sudo systemctl disable firewalld&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ sudo systemctl stop firewalld&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 安装etcd和kubernetes软件（会自动安装docker）&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ sudo yum install -y etcd kubernetes&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h4&gt;&lt;code&gt;修改两处配置&lt;/code&gt;&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Docker配置文件/etc/sysconfig/docker, OPTIONS=’–selinux-enabled=false –insecure-registry gcr.io’&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# Modify these options if you want to change the way the docker daemon runs&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;OPTIONS='--selinux-enabled=false&lt;/span&gt; &lt;span&gt;--insecure-registry&lt;/span&gt; &lt;span&gt;gcr.io'&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;[&lt;/span&gt; &lt;span&gt;-z&lt;/span&gt; &lt;span&gt;&quot;${DOCKER_CERT_PATH}&quot;&lt;/span&gt; &lt;span&gt;];&lt;/span&gt; &lt;span&gt;then&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;DOCKER_CERT_PATH=/etc/docker&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# Do not add registries in this file anymore. Use /etc/containers/registries.conf&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# from the atomic-registries package.&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# docker-latest daemon can be used by starting the docker-latest unitfile.&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# To use docker-latest client, uncomment below lines&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;#DOCKERBINARY=/usr/bin/docker-latest&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;#DOCKERDBINARY=/usr/bin/dockerd-latest&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;#DOCKER_CONTAINERD_BINARY=/usr/bin/docker-containerd-latest&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;#DOCKER_CONTAINERD_SHIM_BINARY=/usr/bin/docker-containerd-shim-latest&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;ul&gt;&lt;li&gt;&lt;code&gt;Kubernetes apiservce配置文件/etc/kubernetes/apiserver,把–admission_control参数钟的ServiceAccount删除&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;###&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# kubernetes system config&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# The following values are used to configure the kube-apiserver&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;#&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# The address on the local server to listen to.&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;KUBE_API_ADDRESS=&quot;--insecure-bind-address=0.0.0.0&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# The port on the local server to listen on.&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# KUBE_API_PORT=&quot;--port=8080&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# Port minions listen on&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# KUBELET_PORT=&quot;--kubelet-port=10250&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# Comma separated list of nodes in the etcd cluster&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;KUBE_ETCD_SERVERS=&quot;--etcd-servers=http://127.0.0.1:2379&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# Address range to use for services&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;KUBE_SERVICE_ADDRESSES=&quot;--service-cluster-ip-range=10.254.0.0/16&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# default admission control policies&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;KUBE_ADMISSION_CONTROL=&quot;--admission-control=NamespaceLifecycle,NamespaceExists,LimitRanger,SecurityContextDeny,ResourceQuota&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# Add your own!&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;KUBE_API_ARGS=&quot;&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;h4&gt;&lt;code&gt;启动所有服务&lt;/code&gt;&lt;/h4&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# systemctl start etcd&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# systemctl start docker&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# systemctl start kube-apiserver&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# systemctl start kube-controller-manager&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# systemctl start kube-scheduler&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# systemctl start kubelet&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# systemctl start kube-proxy&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h2&gt;&lt;code&gt;初入门小实例&lt;/code&gt;&lt;/h2&gt;
&lt;blockquote readability=&quot;11&quot;&gt;
&lt;p&gt;&lt;code&gt;&lt;strong&gt;发现pod状态无论多久都是处于pending。READY字段一直是0/1&lt;/strong&gt;,服务部署失败的原因是”中国墙“的问题导致无法下载pod启动时需要的谷歌镜像，所以我们得间接的创建所需的镜像。&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;&lt;strong&gt;补充：&lt;/strong&gt; Pending状态表示API Server已经创建Pod，但Pod内还有一个或者多个容器没有创建，或者正在下载镜像的过程。详细的参考&lt;code&gt;Pod声明周期和重启策略&lt;/code&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul readability=&quot;0&quot;&gt;&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;创建gcr.io/google_containers/pause-amd64:3.0镜像&lt;/p&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker pull googlecontainer/pause-amd64:&lt;span&gt;3.0&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker tag googlecontainer/pause-amd64:&lt;span&gt;3.0&lt;/span&gt; gcr.io/google_containers/pause-amd64:&lt;span&gt;3.0&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;​&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;code&gt;kubernets指令&lt;/code&gt;&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;实例流程&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看版本&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl version&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Client Version: version.Info{Major:&lt;span&gt;&quot;1&quot;&lt;/span&gt;, Minor:&lt;span&gt;&quot;5&quot;&lt;/span&gt;, GitVersion:&lt;span&gt;&quot;v1.5.2&quot;&lt;/span&gt;, GitCommit:&lt;span&gt;&quot;269f928217957e7126dc87e6adfa82242bfe5b1e&quot;&lt;/span&gt;, GitTreeState:&lt;span&gt;&quot;clean&quot;&lt;/span&gt;, BuildDate:&lt;span&gt;&quot;2017-07-03T15:31:10Z&quot;&lt;/span&gt;, GoVersion:&lt;span&gt;&quot;go1.7.4&quot;&lt;/span&gt;, Compiler:&lt;span&gt;&quot;gc&quot;&lt;/span&gt;, Platform:&lt;span&gt;&quot;linux/amd64&quot;&lt;/span&gt;}&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Server Version: version.Info{Major:&lt;span&gt;&quot;1&quot;&lt;/span&gt;, Minor:&lt;span&gt;&quot;5&quot;&lt;/span&gt;, GitVersion:&lt;span&gt;&quot;v1.5.2&quot;&lt;/span&gt;, GitCommit:&lt;span&gt;&quot;269f928217957e7126dc87e6adfa82242bfe5b1e&quot;&lt;/span&gt;, GitTreeState:&lt;span&gt;&quot;clean&quot;&lt;/span&gt;, BuildDate:&lt;span&gt;&quot;2017-07-03T15:31:10Z&quot;&lt;/span&gt;, GoVersion:&lt;span&gt;&quot;go1.7.4&quot;&lt;/span&gt;, Compiler:&lt;span&gt;&quot;gc&quot;&lt;/span&gt;, Platform:&lt;span&gt;&quot;linux/amd64&quot;&lt;/span&gt;}&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 显示集群信息&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl cluster-info&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Kubernetes master is running at http://localhost:&lt;span&gt;8080&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;To further debug and diagnose cluster problems, use &lt;span&gt;'kubectl cluster-info dump'&lt;/span&gt;.&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看集群中有几个Node&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get nodes&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME STATUS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; Ready &lt;span&gt;18&lt;/span&gt;h&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 运行一个镜像&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl run my-nginx --image=nginx --replicas=&lt;span&gt;2&lt;/span&gt; --port=&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; created&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pods&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-cwlbb &lt;span&gt;0&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; ContainerCreating &lt;span&gt;0&lt;/span&gt; &lt;span&gt;20&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-czk6w &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;20&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看服务详情信息&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl describe pod my-nginx-&lt;span&gt;379829228&lt;/span&gt;-cwlbb&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看已部署&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get deployments&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx &lt;span&gt;2&lt;/span&gt; &lt;span&gt;2&lt;/span&gt; &lt;span&gt;2&lt;/span&gt; &lt;span&gt;2&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 删除pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl delete pod my-nginx-&lt;span&gt;379829228&lt;/span&gt;-cwlbb&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;pod &lt;span&gt;&quot;my-nginx-379829228-cwlbb&quot;&lt;/span&gt; deleted&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 再次查看pod，发现由于replicas机制，pod又生成一个新的&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pods&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-czk6w &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;11&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-gjd7d &lt;span&gt;0&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; ContainerCreating &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 删除部署的my-nginx服务。彻底删除pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl delete deployment my-nginx&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; deleted&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h4&gt;&lt;code&gt;对比docker命令&lt;/code&gt;&lt;/h4&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;k8s的学习路线基本都是从docker[容器]到k8s的，因此两个对比理解有助于记忆&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# docker run&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker run -d -e DOMAIN=cluster --name my-nginx -p &lt;span&gt;80&lt;/span&gt;:&lt;span&gt;80&lt;/span&gt; nginx&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl run my-nginx --image=nginx --port=&lt;span&gt;80&lt;/span&gt; --env=&lt;span&gt;&quot;DOMAIN=cluster&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# docker ps&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker ps&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pods&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# docker exec&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker exec [容器id] ls&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl exec [pod_id] ls&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# docker exec 交互式&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker exec -it [容器id] /bin/sh&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl exec -it [pod_id] -- /bin/sh&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# docker info&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker info&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl cluster-info&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;h2&gt;&lt;code&gt;重要名词&lt;/code&gt;&lt;/h2&gt;
&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th align=&quot;left&quot;&gt;名词&lt;/th&gt;
&lt;th align=&quot;left&quot;&gt;翻译&lt;/th&gt;
&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;Namespace&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;命名空间&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;Endpoint&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;服务端点&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;Controller Manager&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;管理控制中心&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;left&quot;&gt;Replication&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;副本控制器&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td align=&quot;left&quot;/&gt;
&lt;td align=&quot;left&quot;/&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;h2&gt;&lt;code&gt;yaml文件管理服务&lt;/code&gt;&lt;/h2&gt;
&lt;ul readability=&quot;11&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;code&gt;用yaml文件来创建服务&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# vi nginx.yaml&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;piVersion:&lt;/span&gt; &lt;span&gt;extensions/v1beta1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;Deployment&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;name:&lt;/span&gt; &lt;span&gt;my-nginx&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;replicas:&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;template:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;labels:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;app:&lt;/span&gt; &lt;span&gt;nginx&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;containers:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;- name:&lt;/span&gt; &lt;span&gt;nginx&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;image:&lt;/span&gt; &lt;span&gt;nginx:1.7.9&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;ports:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;- containerPort:&lt;/span&gt; &lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;&lt;/li&gt;
&lt;li readability=&quot;21&quot;&gt;
&lt;p&gt;&lt;code&gt;启动管理服务&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 根据yaml文件创建服务&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ kubectl create -f nginx.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; created&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看deployment&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ kubectl get deployments&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx &lt;span&gt;3&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; &lt;span&gt;6&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看Pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ kubectl get pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;4087004473&lt;/span&gt;-dtrjp &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;7&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;4087004473&lt;/span&gt;-jz80p &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;7&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;4087004473&lt;/span&gt;-wh576 &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;7&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 根据yaml文件删除服务&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ kubectl delete -f nginx.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; deleted&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ kubectl get pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;No resources found.&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get deployment&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;No resources found.&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;​&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;​&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;code&gt;Service&lt;/code&gt;&lt;/h2&gt;
&lt;ul readability=&quot;6&quot;&gt;&lt;li readability=&quot;15&quot;&gt;
&lt;p&gt;&lt;code&gt;到此，我们部署一个nginx服务&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl run my-nginx --image=nginx --port=&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 创建一个service 且将其暴露到集群外可供访问&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ kubectl expose deployment/my-nginx --type=&lt;span&gt;&quot;NodePort&quot;&lt;/span&gt; --port &lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;service &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; exposed&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 此时service列表多个my-nginx服务&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ kubectl get services&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME CLUSTER-IP EXTERNAL-IP PORT(S) AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;kubernetes &lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; &amp;lt;none&amp;gt; &lt;span&gt;443&lt;/span&gt;/TCP &lt;span&gt;7&lt;/span&gt;d&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx &lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;255.103&lt;/span&gt; &amp;lt;nodes&amp;gt; &lt;span&gt;80&lt;/span&gt;:&lt;span&gt;32589&lt;/span&gt;/TCP &lt;span&gt;7&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;宿主主机内访问该服务&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl describe service/my-nginx&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 显示的字段有Endpoints: 172.17.0.2:80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ curl &lt;span&gt;172.17&lt;/span&gt;.&lt;span&gt;0.2&lt;/span&gt;.&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;img longdesc=&quot;./%E9%80%89%E5%8C%BA_057.png&quot; alt=&quot;Alt text&quot; title=&quot;&quot; type=&quot;image/png&quot;/&gt;&lt;/code&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;同网段的机器访问该服务&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ curl &lt;span&gt;192.168&lt;/span&gt;.&lt;span&gt;33.101&lt;/span&gt;:&lt;span&gt;32589&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h2&gt;&lt;code&gt;deployments&lt;/code&gt;&lt;/h2&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 运行nginx镜像&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl run my-nginx --image=nginx --port=&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 交互式 shell 的方式运行 pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl run -i --tty my-nginx --image=nginx --port=&lt;span&gt;80&lt;/span&gt; -- sh&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 链接到运行中的容器&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl attach my-nginx-&lt;span&gt;532658988&lt;/span&gt;-&lt;span&gt;10&lt;/span&gt;kxd -i&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看deployment&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get deployments&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx &lt;span&gt;1&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; &lt;span&gt;25&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 扩展10个副本&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl scale deployment my-nginx --replicas=&lt;span&gt;10&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; scaled&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl scale deployment/my-nginx --replicas=&lt;span&gt;10&lt;/span&gt; &lt;span&gt;# 作用效果等同上一条命令&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; scaled&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 再次显示deployment&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get deployments&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx &lt;span&gt;10&lt;/span&gt; &lt;span&gt;10&lt;/span&gt; &lt;span&gt;10&lt;/span&gt; &lt;span&gt;1&lt;/span&gt; &lt;span&gt;26&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pods&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-&lt;span&gt;38&lt;/span&gt;hkg &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-&lt;span&gt;7&lt;/span&gt;j15l &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;31&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-c8mt3 &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-f6mm8 &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-q1rj0 &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-qg7lf &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-rjfbq &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-v581r &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-wh49w &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;379829228&lt;/span&gt;-wpn98 &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;5&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 缩扩到1个副本&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl scale deployment/my-nginx --replicas=&lt;span&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; scaled&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl scale deployment my-nginx --replicas=&lt;span&gt;1&lt;/span&gt; &lt;span&gt;# 作用效果等同上一条命令&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h4&gt;&lt;code&gt;deployment的更新回滚&lt;/code&gt;&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;&lt;img longdesc=&quot;./%E9%80%89%E5%8C%BA_059.png&quot; alt=&quot;Alt text&quot; title=&quot;&quot; type=&quot;image/png&quot; src=&quot;data:image/png;base64,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&quot;/&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl create -f nginx.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;4087004473&lt;/span&gt;-&lt;span&gt;4&lt;/span&gt;xj74 &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;4087004473&lt;/span&gt;-jkptq &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx-&lt;span&gt;4087004473&lt;/span&gt;-m55s1 &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get deployment&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME DESIRED CURRENT UP-TO-DATE AVAILABLE AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;my-nginx &lt;span&gt;3&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; &lt;span&gt;3&lt;/span&gt; &lt;span&gt;4&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 更新应用的镜像从1.7.9版本——&amp;gt;1.9.1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl set image deployment/my-nginx nginx=nginx:&lt;span&gt;1.9&lt;/span&gt;.&lt;span&gt;1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; image updated&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 确认是否更新成功&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl rollout status deployment/my-nginx&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; successfully rolled out&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 回滚到上一代版本&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl rollout undo deployment/my-nginx&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;deployment &lt;span&gt;&quot;my-nginx&quot;&lt;/span&gt; rolled back&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h2&gt;&lt;code&gt;ConfigMap-容器应用的配置管理&lt;/code&gt;&lt;/h2&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;code&gt;应用部署的一个最佳实践是将应用所需配置信息和程序进行分离，一则程序可以更好的复用，二则能灵活的更改配置从而实现其他功能。&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4&gt;&lt;code&gt;使用configMap替代环境变量&lt;/code&gt;&lt;/h4&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;以yaml文件方式创建ConfigMap&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# vi special-config.yaml&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;ConfigMap&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;name:&lt;/span&gt; &lt;span&gt;special-config&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;namespace:&lt;/span&gt; &lt;span&gt;default&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;data:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;special.how:&lt;/span&gt; &lt;span&gt;very&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;special.type:&lt;/span&gt; &lt;span&gt;charm&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# vi env-config.yaml&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;ConfigMap&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;name:&lt;/span&gt; &lt;span&gt;env-config&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;namespace:&lt;/span&gt; &lt;span&gt;default&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;data:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;log_level:&lt;/span&gt; &lt;span&gt;INFO&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;code&gt;可以在Pod中这样使用ConfigMap&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# vi configMap.yaml&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;apiVersion:&lt;/span&gt; &lt;span&gt;v1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;kind:&lt;/span&gt; &lt;span&gt;Pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;metadata:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;name:&lt;/span&gt; &lt;span&gt;dapi-test-pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;spec:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;containers:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;- name:&lt;/span&gt; &lt;span&gt;test-container&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;image:&lt;/span&gt; &lt;span&gt;nginx&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;command:&lt;/span&gt; &lt;span&gt;[&lt;/span&gt; &lt;span&gt;&quot;/bin/sh&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&quot;-c&quot;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt; &lt;span&gt;&quot;env&quot;&lt;/span&gt; &lt;span&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;env:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;- name:&lt;/span&gt; &lt;span&gt;SPECIAL_LEVEL_KEY&lt;/span&gt; &lt;span&gt;#定义环境变量名称&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;valueFrom:&lt;/span&gt; &lt;span&gt;#key&quot;special.how&quot;对应的值&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;configMapKeyRef:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;name:&lt;/span&gt; &lt;span&gt;special-config&lt;/span&gt; &lt;span&gt;#环境变量的值&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;key:&lt;/span&gt; &lt;span&gt;special.how&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;- name:&lt;/span&gt; &lt;span&gt;SPECIAL_TYPE_KEY&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;valueFrom:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;configMapKeyRef:&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;name:&lt;/span&gt; &lt;span&gt;special-config&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;key:&lt;/span&gt; &lt;span&gt;special.type&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;restartPolicy:&lt;/span&gt; &lt;span&gt;Never&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;启动等一系列操作&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl create -f special-config.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;configmap &lt;span&gt;&quot;special-config&quot;&lt;/span&gt; created&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl create -f env-config.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;configmap &lt;span&gt;&quot;env-config&quot;&lt;/span&gt; created&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看ConfigMap&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get configmaps&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME &lt;span&gt;DATA&lt;/span&gt; AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;env-config &lt;span&gt;1&lt;/span&gt; &lt;span&gt;38&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;special-config &lt;span&gt;2&lt;/span&gt; &lt;span&gt;39&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 让我们看一下创建的ConfigMap&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl describe configmap env-config&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Name: env-config&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Namespace: default&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Labels: &amp;lt;none&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Annotations: &amp;lt;none&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;Data&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;====&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;log_level: &lt;span&gt;4&lt;/span&gt; bytes&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看ConfigMap键的值&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get configmaps env-config -o yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;apiVersion: v1&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;data&lt;/span&gt;:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;log_level: INFO&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;kind: ConfigMap&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;metadata:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;creationTimestamp: &lt;span&gt;2017&lt;/span&gt;-&lt;span&gt;11&lt;/span&gt;-&lt;span&gt;30&lt;/span&gt;T07:&lt;span&gt;29&lt;/span&gt;:&lt;span&gt;49&lt;/span&gt;Z&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;name: env-config&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;namespace: default&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;resourceVersion: &lt;span&gt;&quot;285268&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;selfLink: /api/v1/namespaces/default/configmaps/env-config&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;uid: &lt;span&gt;3&lt;/span&gt;f473adf-d5a0-&lt;span&gt;11&lt;/span&gt;e7-&lt;span&gt;9830&lt;/span&gt;-&lt;span&gt;0800275&lt;/span&gt;ae9e7&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;​&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl create -f configMap.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;pod &lt;span&gt;&quot;dapi-test-pod&quot;&lt;/span&gt; created&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看pod，状态ContainerCreating&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;dapi-test-pod &lt;span&gt;0&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; ContainerCreating &lt;span&gt;0&lt;/span&gt; &lt;span&gt;3&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 隔一段时间再查看pod,发现并没有返回什么&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 显示所有的权限查看pod&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl get pod --show-all&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;dapi-test-pod &lt;span&gt;0&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Completed &lt;span&gt;0&lt;/span&gt; &lt;span&gt;1&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 查看详情&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ kubectl describe pod dapi-test-pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Name: dapi-test-pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Namespace: default&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Node: &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;/&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Start Time: Thu, &lt;span&gt;30&lt;/span&gt; Nov &lt;span&gt;2017&lt;/span&gt; &lt;span&gt;15&lt;/span&gt;:&lt;span&gt;32&lt;/span&gt;:&lt;span&gt;00&lt;/span&gt; +&lt;span&gt;0800&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Labels: &amp;lt;none&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Status: Succeeded&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;IP:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Controllers: &amp;lt;none&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Containers:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;test-container:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Container ID: docker://&lt;span&gt;1&lt;/span&gt;ba533f43ee60c02e03dafb7bcb8495fc12264aaab229872df0b289a3c1b9976&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Image: nginx&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Image ID: docker-pullable://docker.io/nginx@sha256:b81f317384d7388708a498555c28a7cce778a8f291d90021208b3eba3fe74887&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Port:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Command:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;/bin/sh&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;-c&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;env&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;State: Terminated&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Reason: Completed&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;Exit&lt;/span&gt; Code: &lt;span&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Started: Thu, &lt;span&gt;30&lt;/span&gt; Nov &lt;span&gt;2017&lt;/span&gt; &lt;span&gt;15&lt;/span&gt;:&lt;span&gt;32&lt;/span&gt;:&lt;span&gt;25&lt;/span&gt; +&lt;span&gt;0800&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Finished: Thu, &lt;span&gt;30&lt;/span&gt; Nov &lt;span&gt;2017&lt;/span&gt; &lt;span&gt;15&lt;/span&gt;:&lt;span&gt;32&lt;/span&gt;:&lt;span&gt;25&lt;/span&gt; +&lt;span&gt;0800&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Ready: False&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Restart Count: &lt;span&gt;0&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Volume Mounts: &amp;lt;none&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Environment Variables:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;SPECIAL_LEVEL_KEY: &amp;lt;set to the key &lt;span&gt;'special.how'&lt;/span&gt; of config map &lt;span&gt;'special-config'&lt;/span&gt;&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;SPECIAL_TYPE_KEY: &amp;lt;set to the key &lt;span&gt;'special.type'&lt;/span&gt; of config map &lt;span&gt;'special-config'&lt;/span&gt;&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Conditions:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Type Status&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Initialized True&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Ready False&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;PodScheduled True&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;No volumes.&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;QoS Class: BestEffort&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Tolerations: &amp;lt;none&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Events:&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;FirstSeen LastSeen Count From SubObjectPath Type Reason Message&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;--------- -------- ----- ---- ------------- -------- ------ -------&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;3&lt;/span&gt;m &lt;span&gt;3&lt;/span&gt;m &lt;span&gt;1&lt;/span&gt; {default-scheduler } Normal Scheduled Successfully assigned dapi-test-pod to &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;3&lt;/span&gt;m &lt;span&gt;3&lt;/span&gt;m &lt;span&gt;1&lt;/span&gt; {kubelet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;} spec.containers{test-container} Normal Pulling pulling image &lt;span&gt;&quot;nginx&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;3&lt;/span&gt;m &lt;span&gt;2&lt;/span&gt;m &lt;span&gt;2&lt;/span&gt; {kubelet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;} Warning MissingClusterDNS kubelet does not have ClusterDNS IP configured and cannot create Pod using &lt;span&gt;&quot;ClusterFirst&quot;&lt;/span&gt; policy. Falling back to DNSDefault policy.&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;2&lt;/span&gt;m &lt;span&gt;2&lt;/span&gt;m &lt;span&gt;1&lt;/span&gt; {kubelet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;} spec.containers{test-container} Normal Pulled Successfully pulled image &lt;span&gt;&quot;nginx&quot;&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;2&lt;/span&gt;m &lt;span&gt;2&lt;/span&gt;m &lt;span&gt;1&lt;/span&gt; {kubelet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;} spec.containers{test-container} Normal Created Created container with docker id &lt;span&gt;1&lt;/span&gt;ba533f43ee6; Security:[seccomp=unconfined]&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;2&lt;/span&gt;m &lt;span&gt;2&lt;/span&gt;m &lt;span&gt;1&lt;/span&gt; {kubelet &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;} spec.containers{test-container} Normal Started Started container with docker id &lt;span&gt;1&lt;/span&gt;ba533f43ee6&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 可知container started 成功，进一步查看日志&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ docker logs &lt;span&gt;1&lt;/span&gt;ba&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_SERVICE_PORT=&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_PORT=tcp://&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_80_TCP=tcp://&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;110.249&lt;/span&gt;:&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_443_TCP_ADDR=&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;110.249&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;HOSTNAME=dapi-test-pod&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_443_TCP_PORT=&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;HOME=/root&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_443_TCP_PROTO=tcp&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_SERVICE_PORT_HTTP=&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;SPECIAL_TYPE_KEY=charm&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_SERVICE_PORT_HTTPS=&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_443_TCP=tcp://&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;110.249&lt;/span&gt;:&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_SERVICE_HOST=&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;110.249&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_PORT_443_TCP_ADDR=&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NGINX_VERSION=&lt;span&gt;1.13&lt;/span&gt;.&lt;span&gt;7&lt;/span&gt;-&lt;span&gt;1&lt;/span&gt;~stretch&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_PORT_443_TCP_PORT=&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NJS_VERSION=&lt;span&gt;1.13&lt;/span&gt;.&lt;span&gt;7.0&lt;/span&gt;.&lt;span&gt;1.15&lt;/span&gt;-&lt;span&gt;1&lt;/span&gt;~stretch&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_PORT_443_TCP_PROTO=tcp&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_SERVICE_PORT=&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT=tcp://&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;110.249&lt;/span&gt;:&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;SPECIAL_LEVEL_KEY=very&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_80_TCP_ADDR=&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;110.249&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_PORT_443_TCP=tcp://&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_SERVICE_PORT_HTTPS=&lt;span&gt;443&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;KUBERNETES_SERVICE_HOST=&lt;span&gt;10.254&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_80_TCP_PORT=&lt;span&gt;80&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;PWD=/&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;MY_SERVICE_PORT_80_TCP_PROTO=tcp&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;​&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;&lt;code&gt;ConfigMap的限制条件&lt;/code&gt;&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;ConfigMap必须在Pod之前创建才能被使用。&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ConfigMap可以定义其属于哪个Namspece，只有在同一个Namespace中的pod才能引用。&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4&gt;&lt;code&gt;删除Pod&lt;/code&gt;&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;有时候deployment、rs、rc、services都为0，但是Pod确存在着。则重启kubelet服务即可。&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ systemctl restart kubelet&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;h4&gt;&lt;code&gt;补充&lt;/code&gt;&lt;/h4&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 列出当前节点名&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;kubectl get node&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAME STATUS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; Ready &lt;span&gt;6&lt;/span&gt;d&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# 已知当前节点名为127.0.0.1,用如下命令即可获得该节点上所有运行节点&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ curl localhost:&lt;span&gt;8080&lt;/span&gt;/api/v1/proxy/nodes/&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;/pods&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;{&lt;span&gt;&quot;kind&quot;&lt;/span&gt;:&lt;span&gt;&quot;PodList&quot;&lt;/span&gt;,&lt;span&gt;&quot;apiVersion&quot;&lt;/span&gt;:&lt;span&gt;&quot;v1&quot;&lt;/span&gt;,&lt;span&gt;&quot;metadata&quot;&lt;/span&gt;:{},&lt;span&gt;&quot;items&quot;&lt;/span&gt;:null}&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;h4&gt;&lt;code&gt;报错&lt;/code&gt;&lt;/h4&gt;
&lt;pre&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;$ sudo kubectl create -f file.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;YAML error: found character that cannot start any token&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;&lt;span&gt;# or&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;error:yaml: line &lt;span&gt;15&lt;/span&gt;: found a tab character that violate indentation&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;#file.yaml不可用tab键来空格&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;$ sudo kubectl create -f mysql-rc.yaml&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;error: error validating &lt;span&gt;&quot;mysql-rc.yaml&quot;&lt;/span&gt;: error validating &lt;span&gt;data&lt;/span&gt;: [found invalid field app &lt;span&gt;for&lt;/span&gt; v1.ObjectMeta, found invalid field value &lt;span&gt;for&lt;/span&gt; v1.Container]; &lt;span&gt;if&lt;/span&gt; you choose to ignore these errors, turn validation off with --validate=false&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;




&lt;p&gt;&lt;code&gt;---------------------&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;&lt;span&gt;# kubectl get pod --all-namespaces&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;NAMESPACE NAME READY STATUS RESTARTS AGE&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;default my-nginx-&lt;span&gt;379829228&lt;/span&gt;-b796w &lt;span&gt;1&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; Running &lt;span&gt;0&lt;/span&gt; &lt;span&gt;12&lt;/span&gt;m&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;kube-system kubernetes-dashboard-&lt;span&gt;2397086622&lt;/span&gt;-&lt;span&gt;46&lt;/span&gt;tvx &lt;span&gt;0&lt;/span&gt;/&lt;span&gt;1&lt;/span&gt; ContainerCreating &lt;span&gt;0&lt;/span&gt; &lt;span&gt;8&lt;/span&gt;s&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;[root@node01 ~]&lt;span&gt;# kubectl logs -f kubernetes-dashboard-2397086622-46tvx --namespace=kube-system&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Using HTTP port: &lt;span&gt;9090&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Using apiserver-host location: http://&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;8080&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Creating API server client &lt;span&gt;for&lt;/span&gt; http://&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;8080&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Error &lt;span&gt;while&lt;/span&gt; initializing connection to Kubernetes apiserver. This most likely means that the cluster is misconfigured (e.g., it has invalid apiserver certificates or service accounts configuration) or the --apiserver-host &lt;span&gt;param&lt;/span&gt; points to a server that does not exist. Reason: Get http://&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;8080&lt;/span&gt;/version: dial tcp &lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;:&lt;span&gt;8080&lt;/span&gt;: getsockopt: connection refused&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;Refer to the troubleshooting guide &lt;span&gt;for&lt;/span&gt; more information: https://github.com/kubernetes/dashboard/blob/master/docs/user-guide/troubleshooting.md&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;
 
&lt;/pre&gt;

&lt;h5&gt;&lt;code&gt;我们最好不要越过RC而直接创建Pod,因为Replication Controller会通过RC管理Pod副本。实现自动创建、补足、替换、删除Pod副本，大大提高系统的容灾能力&lt;/code&gt;&lt;/h5&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;重新调度(Rescheduling)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;弹性伸缩(Scaling)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;滚动更新(Rolling Updates)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Tue, 19 Dec 2017 07:50:00 +0000</pubDate>
<dc:creator>水方子</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/huangzhenyou/p/8066145.html</dc:identifier>
</item>
<item>
<title>浅谈机器学习分类算法 - 又拍云</title>
<link>http://www.cnblogs.com/upyun/p/8065717.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/upyun/p/8065717.html</guid>
<description>&lt;p&gt;目前随着人工智能的发展，机器学习的应用领域日益宽泛，各种机器学习适应不同的应用场景，而机器学习差别的关键点之一就在于所使用算法的不同，今天就为大家介绍 4 种主要的分类算法。&lt;/p&gt;
&lt;h2&gt;朴素贝叶斯分类&lt;/h2&gt;
&lt;p&gt;朴素贝叶斯分类是基于贝叶斯定理与特征条件独立假设的分类方法，发源于古典数学理论，拥有稳定的数学基础和分类效率。它是一种十分简单的分类算法，当然简单并不一定不好用。通过对给出的待分类项求解各项类别的出现概率大小，来判断此待分类项属于哪个类别，而在没有多余条件的情况下，朴素贝叶斯分类会选择在已知条件下，概率最大的类别。&lt;/p&gt;
&lt;p&gt;贝叶斯分类算法的实质就是计算条件概率的公式。在事件 B 发生的条件下，事件 A 发生的概率为 P（A | B）来表示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/585973/201712/585973-20171219145931787-1642296169.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;P（A | B）的概率为&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/585973/201712/585973-20171219145940162-1620478376.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;在日常应用中，我们经常可以直接得出 P（A | B），而 P（B | A）直接得到比较困难，通过贝叶斯定理就可以通过 P（A | B）获得 P（B | A）。&lt;/p&gt;
&lt;p&gt;而朴素贝叶斯分类的正式定义则如下：&lt;/p&gt;
&lt;p&gt;&lt;img class=&quot;origin_image zh-lightbox-thumb lazy&quot; src=&quot;https://pic5.zhimg.com/50/v2-ba7a2c453ef3f3378f9fd0872b3c7a70_hd.jpg&quot; alt=&quot;&quot; width=&quot;683&quot; data-caption=&quot;&quot; data-size=&quot;normal&quot; data-rawwidth=&quot;683&quot; data-rawheight=&quot;199&quot; data-original=&quot;https://pic5.zhimg.com/v2-ba7a2c453ef3f3378f9fd0872b3c7a70_r.jpg&quot; data-actualsrc=&quot;https://pic5.zhimg.com/v2-ba7a2c453ef3f3378f9fd0872b3c7a70_b.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;朴素贝叶斯算法在执行文本分类等工作是会有很好的效果，比如朴素贝叶斯算法常被使用于垃圾邮件的过滤分类中。&lt;/p&gt;
&lt;h2&gt;SVM算法&lt;/h2&gt;
&lt;p&gt;支持向量机（Support Vector Machine，常简称为 SVM）是一种监督式学习的方法，可广泛地应用于统计分类以及回归分析。支持向量机属于一般化线性分类器，它能够同时最小化经验误差与最大化几何边缘区，因此支持向量机也被称为最大边缘区分类器。&lt;/p&gt;
&lt;p&gt;同时支持向量机将向量映射到一个更高维的空间里，在这个空间里建立有一个最大间隔超平面。在分开数据的超平面的两边建有两个互相平行的超平面，分隔超平面使两个平行超平面的距离最大化。假定平行超平面间的距离或差距越大，分类器的总误差越小。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/585973/201712/585973-20171219145950709-672546593.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;SVM 算法虽然存在难以训练和难以解释的问题，但是在非线性可分问题上的表现十分优秀，在非线性可分问题中常选择 SVM 算法。&lt;/p&gt;
&lt;h2&gt;基于 KNN 的算法&lt;/h2&gt;
&lt;p&gt;K - 近邻算法，简称 KNN（k-Nearest Neighbor），它同样是一个比较简单的分类、预测算法。对选取与待分类、待预测数据的最相似的 K 个训练数据，通过对这 K 个数据的结果或者分类标号取平均、取众数等方法得到待分类、待预测数据的结果或者分类标号。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/585973/201712/585973-20171219145958209-572280222.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;K - 近邻算法如上图所示，有两类不同的样本数据，分别用蓝色的小正方形和红色的小三角形表示，而图正中间的那个绿色的圆所标示的数据则是待分类的数据。在不知道中间那个绿色的数据是从属于哪一类（蓝色小正方形or红色小三角形）的情况下，我们可以从它的临近的样本进行判断。&lt;/p&gt;
&lt;p&gt;如果 K=3，绿色圆点最近的 3 个邻居是 2 个红色小三角形和 1 个蓝色小正方形，少数从属于多数，基于统计的方法，判定绿色的这个待分类点属于红色的三角形一类。&lt;/p&gt;
&lt;p&gt;如果 K=5，绿色圆点的最近的 5 个邻居是 2 个红色三角形和 3 个蓝色的正方形，还是少数从属于多数，基于统计的方法，判定绿色的这个待分类点属于蓝色的正方形一类。&lt;/p&gt;
&lt;p&gt;从上文我们看到，当无法判定当前待分类点是从属于已知分类中的哪一类时，可以依据统计学的理论看它所处的位置特征，衡量它周围邻居的权重，而把它归为(或分配)到权重更大的那一类，这就是 K 近邻算法的核心思想。&lt;/p&gt;
&lt;p&gt;KNN 算法相比其他算法也更加简单，并且易于理解、实现，无需估计参数与训练。适合对稀有事件进行分类和多分类方面的问题，在这类问题方面 KNN 算法的表现比 SVM 更好。&lt;/p&gt;
&lt;h2&gt;人工神经网络算法&lt;/h2&gt;
&lt;p&gt;人工神经网络，简称神经网络或类神经网络，是一种模仿生物神经网络结构和功能的数学模型或计算模型，用于对函数进行估计或近似。神经网络由大量的人工神经元联结进行计算。大多数情况下人工神经网络能在外界信息的基础上改变内部结构，是一种自适应系统。&lt;/p&gt;
&lt;p&gt;下图为人工神经网络示意图，人工神经网络由很多的层组成，最前面这一层叫输入层，最后面一层叫输出层，最中间的层叫隐层，并且每一层有很多节点，节点之间有边相连的，每条边都有一个权重。对于文本来说输入值是每一个字符，对于图片来说输入值就是每一个像素。&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/585973/201712/585973-20171219150006584-980849561.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;人工神经网络是如何工作的？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1.前向传播：对于一个输入值，将前一层的输出与后一层的权值进行运算，再加上后一层的偏置值得到了后一层的输出值，再将后一层的输出值作为新的输入值传到再后面一层，一层层传下去得到最终的输出值。&lt;/p&gt;
&lt;p&gt;2.反向传播：前向传播会得到预测值，但是这个预测值不一定是真实的值，反向传播的作用就是修正误差，通过与真实值做对比修正前向传播的权值和偏置。&lt;/p&gt;
&lt;p&gt;人工神经网络在语音、图片、视频、游戏等各类应用场景展现出了优异的性能，但是存在需要大量的数据进行训练来提高准确性的问题。&lt;/p&gt;
&lt;h2&gt;又拍云内容识别服务&lt;/h2&gt;
&lt;p&gt;又拍云内容识别中使用的便是人工神经网络算法，通过上传图片到样本管理平台，首先进行人工标注图片是否为性感图、色情图、广告图或者是暴恐图片，标注完成后将它放到线下处理平台训练，得出训练模型和结果，再将模型发回线上进行智能鉴别。&lt;/p&gt;
&lt;p&gt;人工神经网络算法在测试中表现出了识别迅速、准确率高的特性，目前又拍云内容识别应用于色情识别的正确率高达 99.7%。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/585973/201712/585973-20171219150023178-2134548655.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;本文主要介绍了 4 种应用比较普遍的的机器学习算法，但是机器学习算法还有其他很多不同的算法，大家感兴趣的可以自己去了解。除此之外，又拍云图像识别服务推出永久免费套餐，提供总量 2000 次 / 天的图片检测，等效于2000 条 / 天的文本鉴别，或 120 分钟 / 天的视频点播与视频直播检测。&lt;/p&gt;

&lt;p&gt;推荐阅读：&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot; wrap external&quot; href=&quot;http://link.zhihu.com/?target=https%3A//tech.upyun.com/article/161/%25E6%2580%25A7%25E6%2584%259F%25E4%25B8%258E%25E8%2589%25B2%25E6%2583%2585%25E6%259C%2589%25E5%25A4%259A%25E8%25BF%259C%25E2%2580%2594%25E2%2580%2594%25E4%25BD%25A0%25E4%25B8%258D%25E7%259F%25A5%25E9%2581%2593%25E7%259A%2584%25E5%259B%25BE%25E7%2589%2587%25E9%2589%25B4%25E9%25BB%2584%25E9%2582%25A3%25E4%25BA%259B%25E4%25BA%258B%25E5%2584%25BF.html&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;性感与色情有多远——你不知道的图片鉴黄那些事儿&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot; wrap external&quot; href=&quot;http://link.zhihu.com/?target=https%3A//tech.upyun.com/article/173/%25E6%25B7%25B1%25E5%25BA%25A6%25E5%25AD%25A6%25E4%25B9%25A0%25E8%25AF%25A6%25E8%25A7%25A3%25E5%258F%258A%25E5%259C%25A8%25E5%259B%25BE%25E7%2589%2587%25E9%2589%25B4%25E5%2588%25AB%25E7%259A%2584%25E5%25AE%259E%25E8%25B7%25B5%25E5%25BA%2594%25E7%2594%25A8.html&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;深度学习详解及在图片鉴别的实践应用&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 07:01:00 +0000</pubDate>
<dc:creator>又拍云</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/upyun/p/8065717.html</dc:identifier>
</item>
<item>
<title>JAVA9模块化详解（一）——模块化的定义 - 牛初九</title>
<link>http://www.cnblogs.com/boboooo/p/8057680.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/boboooo/p/8057680.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;JAVA9模块化详解&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;前言&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;java9已经出来有一段时间了，今天向大家介绍一下java9的一个重要特性——模块化。模块化系统的主要目的如下：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;更可靠的配置，通过制定明确的类的依赖关系代替以前那种易错的类路径（class-path）加载机制。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;强大的封装，允许一个组件声明它的公有类型（public）中，哪些可以被其他组件访问，哪些不可以。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;这些特性将有益于应用的开发者、类库的开发者和java se平台直接的或者间接地实现者。它可以使系统更加健壮，并且可以提高他们的性能。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;一、定义模块化&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　为了提高可靠的配置性和强大的封装性，我们将模块化看作是java程序组件的一个基本的新特性，这样它对开发者和可支持的工具更加友好。一个模块是一个被命名的，代码和数据的自描述的集合。它的代码有一系列包含类型的包组成，例如：java的类和接口。它的数据包括资源文件（resources）和一些其他的静态信息。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.1 模块的声明&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;一个模块的自描述表现在它的模块声明中，它是java程序语言中的一个新的结构，最简单的可能的模块声明仅仅是指定模块的名字&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&lt;span&gt;module com.foo.bar { }
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;　　一个或更多个requires项可以被添加到其中，它通过名字声明了这个模块依赖的一些其他模块，在编译期和运行期都依赖的。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&lt;span&gt;module com.foo.bar {
    requires org.baz.qux;
}
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;　　最后，exports项可以被添加，它可以仅仅使指定包（package）中的公共类型可以被其他的模块使用。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&lt;span&gt;module com.foo.bar {
    requires org.baz.qux;
    exports com.foo.bar.alpha;
    exports com.foo.bar.beta;
}
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;如果一个模块的声明中没有exports项，则它根本不向其他模块输出任何的类型。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　按照约定，模块声明的源代码被放在了模块源文件结构的根目录，文件的名字叫module-info.java。例如：模块com.foo.bar包含的文件如下：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;http://images2017.cnblogs.com/blog/1191201/201712/1191201-20171218151846178-1740295005.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　按照约定，模块声明被编译到module-info.class文件中，并输出到类文件的输出目录。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　模块的名字，像包的名字一样，必须不能重复。命名模块的推荐方式是使用反转域名的方式，它长期被推荐使用到包的命名。模块的名字经常是它的输出包的前缀，但是这个关系也不是强制的。模块的声明既不包括版本号，也不包括它依赖模块的版本号。这是有意这样的：解决版本选择问题不是模块化系统的目的，这个问题最好留个构建工具和容器应用。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　模块声明是java程序语言的一部分，而不是他们自己的一个语言或标记，有几个原因：其中最重要的一个原因是模块的信息在编译期和运行期都可用，确保在编译期和运行期以相同的方式运行。这样可以防止很多种错误，至少在编译期提前报告，并且可以更早的诊断和修复。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　在一个源文件中表达模块声明，它可以连同模块中的其他文件一起编译，编译成的类文件可以被java虚拟机消费。这种方式对于开发者来说非常熟悉，IDE和构建工具也不难支持。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.2 模块的零件&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;存在的工具已经可以创建，处理，消费jar文件，为了采用和迁移简单，我们定义了模块jar文件。一个模块jar文件非常像一个普通的jar文件，除了在根目录包含了一个module-info.class。例如上面的com.foo.bar模块jar文件包含以下的内容：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;http://images2017.cnblogs.com/blog/1191201/201712/1191201-20171218162124162-1123456108.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　模块jar文件可以作为模块使用，在这种情况下，module-info.class包含了模块的声明它可以放在普通的类路径下，这种情况下，module-info.class将被忽略。模块jar文件允许类库的维护者装载一个单一的零件，它可以作为一个模块工作（在java9以后）也可以作为一个普通的jar文件工作。我们希望java9的实践者提升jar工具，使得它更容易的生成模块jar文件。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　为了模块化java平台的相关实现，我们介绍了一个新的零件格式，它超越了jar文件，容纳了本地代码、配置文件、和其他的不能自适应的数据类型。这种格式促使模块声明表达式的另外一个优点，把它们编译到class文件中，这个class文件是独立的，这种新的格式，暂时命名为“JMOD”，它被标准化是一个公开的议题。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.3 模块描述&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;编译模块声明到一个类文件的优点是这个类文件有了一个精确定义和可扩展的格式，我们认为module-info.class，它包含了代码级别的编译模式，里边插入的其他变量在初始化时也会被编译。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt; 　　一个IDE或者打包工具可以插入一些包含标记信息的变量，例如：模块的版本、标题、描述、和许可等。这些信息在编译期和运行期都会被模块系统映射成可使用的信息。它也可以被下游工具构建时使用。指定的变量的集合将被标准化，但是其他的工具和框架也可以定义额外的需要的变量。没有标准化的变量在模块系统中是没有效果的。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.4 平台模块&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;java9将使用模块化系统将平台分割成若干个子模块。java9平台的实现者可以包含其中的所有模块，也可以是其中的一些。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　模块系统中明确知道的模块是基础模块，它被命名为java.base。基础模块定义和输出所有平台的核心包，包括模块系统本身：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&lt;span&gt;module java.base {
    exports java.io;
    exports java.lang;
    exports java.lang.annotation;
    exports java.lang.invoke;
    &lt;strong&gt;exports java.lang.module;&lt;/strong&gt;
    exports java.lang.ref;
    exports java.lang.reflect;
    exports java.math;
    exports java.net;
    ...
}
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;　　基础模块总是实时的，其他的每一个模块都隐式的依赖基础模块。其他的平台模块将通过“java.”的前缀分享，例如：java.sql的数据库连接，java.xml处理xml文件，java.log处理日志，java9没有定义的，将会通过“jdk.”的前缀分享出来。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;　　至此，java9的模块化先定义到这里，翻译的不好，大家见谅，稍后会继续介绍java模块化的使用。&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 06:42:00 +0000</pubDate>
<dc:creator>牛初九</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/boboooo/p/8057680.html</dc:identifier>
</item>
<item>
<title>IEEE Trans 2008 Gradient Pursuits论文学习 - 闪电gogogo</title>
<link>http://www.cnblogs.com/wwf828/p/7754887.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wwf828/p/7754887.html</guid>
<description>&lt;p&gt;&lt;span&gt;之前所学习的论文中求解稀疏解的时候一般采用的都是最小二乘方法进行计算，为了降低计算复杂度和减少内存，这篇论文梯度追踪，属于贪婪算法中一种。主要为三种：梯度（gradient）、共轭梯度（conjugate gradient）、近似共轭梯度（an approximation to the conjugate gradient），看师兄之前做压缩感知的更新点就是使用近似共轭梯度方法代替了StOMP中的最小二乘的步骤。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;首先说明一下论文中的符号表示：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Γ&lt;sup&gt;n&lt;/sup&gt;表示第n次迭代过程中所选择的原子的索引&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Φ&lt;sub&gt;Γ&lt;sup&gt;n&lt;/sup&gt;&lt;/sub&gt;表示Φ的一个子矩阵，即只包含索引在集合Γ&lt;sup&gt;n&lt;/sup&gt;中的那些列&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;span&gt;gram matrix格拉姆矩阵&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030160632886-1344730115.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030160713793-218179931.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;小写加粗字体用来表示向量，大写加粗字体表示矩阵，带下标的标准字体表示向量中的元素&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;论文的第II部分介绍了MP算法和OMP算法的流程。算法的基本思想是通过不断的迭代来逼近x，x在这篇论文中指的是观测向量，有x=Φy+ε，为方便起见，将符号改为常见形式:y=Φx+ε&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;span&gt;&lt;img src=&quot;file:///D:/Program%2520Files%2520%2528x86%2529/youdaoyun/Ynote/qq62B8CB8B9DB7E86B77B06F836EE1FF2E/72f5382562df41ce93ed94683a074759/untitle.png&quot; alt=&quot;&quot; data-attr-org-src-id=&quot;79F75173726646518AADE0AE2E6BC93D&quot; data-media-type=&quot;image&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;通过逼近得到的为：&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030160932355-989592192.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;然后计算残差为：&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030161008668-2133691880.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span&gt;每次迭代中残差用来决定从观测矩阵&lt;img src=&quot;file:///C:/Users/ADMINI~1/AppData/Local/Temp/enhtmlclip/Image(2).png&quot; alt=&quot;&quot; width=&quot;13&quot;/&gt;中选出最相关的原子。&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;MP的算法流程为：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030161054527-516435160.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div readability=&quot;10.900827667751&quot;&gt;
&lt;div readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span&gt;解释一下给出的MP的算法流程,采用熟悉的符号代码来解释&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030164802793-281866391.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;OMP算法流程：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030164643683-860785237.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div readability=&quot;17.170626349892&quot;&gt;
&lt;div&gt;&lt;span&gt;其中Φ+是矩阵Φ的伪逆矩阵。论文中采用梯度更新的方式来估计信号的近似解，采用&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030162600277-13983012.png&quot; alt=&quot;&quot;/&gt;来代替MP算法中的2c，其中d&lt;sub&gt;Γ&lt;sup&gt;n&lt;/sup&gt;&lt;/sub&gt;是梯度更新方向，其中步长&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030162708136-1143721897.png&quot; alt=&quot;&quot;/&gt;，向量&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030162720543-1700012158.png&quot; alt=&quot;&quot;/&gt;。不同的梯度算法所选择的d&lt;sub&gt;Γ&lt;sup&gt;n&lt;/sup&gt;&lt;/sub&gt;不同。综上，我们可将梯度追踪算法的总体框架归纳如下：&lt;/span&gt;&lt;/div&gt;
&lt;div readability=&quot;11.120853080569&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165224636-15062944.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;接下来分别介绍论文中提出的三种梯度追踪方法。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;基于最速下降法的匹配追踪&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;最速下降法（这个翻译是从参考文献2中得来的）是采用目标函数的负梯度作为更新方向。目标函数&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030162943230-1387026029.png&quot; alt=&quot;&quot;/&gt;的梯度大小为：&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;p&gt;&lt;span&gt;对其中的GP算法进行了自行仿写，但是不知道为什么跟作者的代码比较起来效果很差，代码所在文件夹为sparsify_0_5,将自己写的代码贴出如下，用了两种不同的写法，其实原理都是一样的，仿真结果很差，残差很大。&lt;/span&gt;&lt;/p&gt;
&lt;div readability=&quot;16&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;50&quot;&gt;
&lt;pre class=&quot;brush:matlab;gutter:true;&quot;&gt;
&lt;span&gt;function[theta]=CS_GP(y,A,t)
    %CS_GP Summary of this function goes here
    %Version: 1.0 written by wwf @2017-04-28
    %   Detailed explanation goes here
    %   y = Phi * x
    %   x = Psi * theta
    %   y = Phi*Psi * theta
    %   令 A = Phi*Psi, 则y=A*theta
    %   现在已知y和A，求theta
    [y_rows,y_columns]= size(y);
    if y_rows&amp;lt;y_columns
        y = y';%y should be a column vector
    end
    [M,N]= size(A);                            %传感矩阵A为M*N矩阵
    theta = zeros(N,1);                         %用来存储恢复的theta(列向量)
    aug_y=[];
    r_n = y;                                    %初始化残差(residual)为y
    Aug_t=[];
    for ii =1:t                                  %迭代t次，t为输入参数
        for col=1:N;
            product(col)=abs(A(:,col)'*r_n);             %传感矩阵A各列与残差的内积
        end
        [val,pos]= max(abs(product));        %找到最大内积绝对值，即与残差最相关的列
        Aug_t=[Aug_t,A(:,pos)]; 
        pos_array(ii)=pos;                             
        g_n=Aug_t'*r_n;                               %  梯度方向
        c_n=Aug_t*g_n;
        w_n=(r_n'*c_n)/(c_n'*c_n);                   %  最速下降步长
        d_n=w_n*g_n;
        [x1,x2]=size(d_n);
        [y1,y2]=size(aug_y);
        D=aug_y;
        aug_y=zeros(x1,x2);
        aug_y(1:y1,1:y2)=D;
        aug_y=aug_y+d_n ;                                %  最小二乘,使残差最小
        r_n=r_n-(w_n)*(c_n);                               %  残差
    end
   theta(pos_array)=aug_y;
end
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;第二种：&lt;/span&gt;&lt;/p&gt;
&lt;div readability=&quot;13&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;42&quot;&gt;
&lt;pre class=&quot;brush:matlab;gutter:true;&quot;&gt;
&lt;span&gt;function[theta]=GP_test(y,A,t)
%CS_GP Summary of this function goes here
%Version: 1.0 written by wwf @2017-04-28
%   Detailed explanation goes here
%   y = Phi * x
%   x = Psi * theta
%   y = Phi*Psi * theta
%   令 A = Phi*Psi, 则y=A*theta
%   现在已知y和A，求theta
    [y_rows,y_columns]= size(y);
    if y_rows&amp;lt;y_columns
        y = y';%y should be a column vector
    end
    [M,N]= size(A);                            %传感矩阵A为M*N矩阵
    theta = zeros(N,1);                         %用来存储恢复的theta(列向量)
    r_n = y;                                    %初始化残差(residual)为y
    d_n=zeros(N,1);
    P =@(z) A*z;
    Pt =@(z) A'*z;
    IN=[];
   
    for ii =1:50                                  %迭代t次，t为输入参数
        product=Pt(r_n);
        [v I]=max(abs(product));
     
        if isempty(find (IN==I))
            IN=[IN I];
        else
            break;
        end
        d_n(IN)=product(IN);
        c_n=P(d_n);
        a_n=r_n'*c_n/(c_n'*c_n);
        theta=theta+a_n*d_n;
        r_n=r_n-a_n*c_n;
    end
end
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;测试代码和前几次的一样，实验结果如下所示：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030163218793-1193802150.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;输出残差为：&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030163247652-1777508753.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;调用作者写的代码的时候发现，有的时候恢复效果比较好，残差很小，但有的时候也会出现残差比较大的情况，猜测可能和生成的信号有关系，因为每次信号是随机生成的。结果如下图所示：&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div readability=&quot;8&quot;&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030163301965-1623150730.jpg&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030163332418-1660271251.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;
&lt;div readability=&quot;7&quot;&gt;
&lt;div readability=&quot;9&quot;&gt;
&lt;p&gt;&lt;span&gt;在参考文献[2]中对论文进行了翻译，读过一遍之后对文献[1]也更加理解了，这里就不再单独给出，摘取文献[2]中的内容进行解释，在以后的论文编写中若需要文献[1]，建议自己再翻译比较好。&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030163346402-1456782105.png&quot; alt=&quot;&quot; width=&quot;681&quot; height=&quot;412&quot;/&gt;&lt;/span&gt;&lt;/div&gt;
&lt;div readability=&quot;24&quot;&gt;
&lt;p&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165613136-645674208.png&quot; alt=&quot;&quot; width=&quot;672&quot; height=&quot;342&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165626230-121865625.jpg&quot; alt=&quot;&quot; width=&quot;700&quot; height=&quot;436&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165702683-365320048.jpg&quot; alt=&quot;&quot; width=&quot;697&quot; height=&quot;427&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;           &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165716543-800626372.jpg&quot; alt=&quot;&quot; width=&quot;571&quot; height=&quot;95&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165756558-328165484.jpg&quot; alt=&quot;&quot; width=&quot;688&quot; height=&quot;445&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165914496-416554613.jpg&quot; alt=&quot;&quot; width=&quot;720&quot; height=&quot;467&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165926886-1946804693.jpg&quot; alt=&quot;&quot; width=&quot;705&quot; height=&quot;86&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165943324-1888422126.jpg&quot; alt=&quot;&quot; width=&quot;725&quot; height=&quot;445&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030165953886-1818874932.jpg&quot; alt=&quot;&quot; width=&quot;744&quot; height=&quot;440&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030170019246-254772059.jpg&quot; alt=&quot;&quot; width=&quot;587&quot; height=&quot;170&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030170025871-360119649.jpg&quot; alt=&quot;&quot; width=&quot;646&quot; height=&quot;426&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030170033918-975453603.jpg&quot; alt=&quot;&quot; width=&quot;658&quot; height=&quot;416&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030170122886-367465318.jpg&quot; alt=&quot;&quot; width=&quot;677&quot; height=&quot;455&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;         &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030170132652-205754642.jpg&quot; alt=&quot;&quot; width=&quot;613&quot; height=&quot;42&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;     &lt;img src=&quot;http://images2017.cnblogs.com/blog/1212449/201710/1212449-20171030170147199-1065684268.jpg&quot; alt=&quot;&quot; width=&quot;579&quot; height=&quot;224&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;接下来解释一下CGP和ACGP的主要代码，CGP的代码没有看太懂。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;CGP（代码名称为greed_omp_cgp）&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;44&quot;&gt;
&lt;pre class=&quot;brush:matlab;gutter:true;&quot;&gt;
&lt;span&gt;while~done
     DR(IN)=0;
    [v I]=max(abs(DR));
     IN=[IN I];
     k=k+1;
        ifk==1
             d(IN)=1;
             PG(1)=1;
        else
   %%%% Calculate P'*G, but only need new column and new row %%%%%
             mask=zeros(m,1);
             mask(IN(k))=1;%将mask中对应的第k次迭代所选出的内积所在的列序号的项置为1
             new_element=P(mask);%选出此次迭代所选择出的原子
             gnew=Pt(new_element);%gnew相当于G，即Psi'*Psi
             PG(k-1,k-1)=D(1:k,k-1)'*[g;1];
             g=gnew(IN);
            %PG计算的是D’*G
             PG(:,k)=D'*[g;zeros(maxM-k,1)]; % 1 general mult.
   %%%% Calculate conjugate directions %%%
             b=(PG(1:k-1,1:k)*DR(IN))./(dPPd(1:k-1));
             d(IN)=DR(IN)-D(1:k,1:k-1)*b;%d should be orthogonal to the first k-1 columns of G.
        end
         D(1:k,k)=d(IN);%D是由n-1次的更新方向组成的矩阵
         Pd=P(d);
         dPPd(k)=Pd'*Pd;
         a=(DR'*d)/dPPd(k);
         s=s+a*d;
         Residual=Residual-a*Pd;
         DR=Pt(Residual);
    
    ERR=Residual'*Residual/n;
    ifcomp_err
         err_mse(iter)=ERR;
    end
    
    ifcomp_time
         iter_time(iter)=toc;
    end
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;ACGP（代码名称为greed_nomp）&lt;/span&gt;&lt;/p&gt;
&lt;div readability=&quot;25&quot;&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;46&quot;&gt;
&lt;pre class=&quot;brush:matlab;gutter:true;&quot;&gt;
&lt;span&gt;tic
t=0;
p=zeros(m,1);
DR=Pt(Residual);
[v I]=max(abs(DR));
ifweakness~=1
   [vals inds]=sort(abs(DR),'descend');
    I=inds(find(vals&amp;gt;=alpha*v));
end
   
IN=union(IN,I);
ifstrcmp(STOPCRIT,'M')&amp;amp;length(IN)&amp;gt;=STOPTOL
    IN=IN(1:STOPTOL);
end
MASK=zeros(size(DR));
pDDp=1;
done=0;
iter=1;
while~done
   
   % Select new element
   ifisa(GradSteps,'char')
       ifstrcmp(GradSteps,'auto')
            
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Iteration to automatic selection of the number of gradient steps
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%             finished=0;   
%             while ~finished
           % Update direction   
                ifiter==1
                     p(IN)=DR(IN);   %p相当于论文中的d_n,当迭代次数为1时，d_n等于内积
                     Dp=P(p);        %Dp相当于论文中的c_n，即Psi与d_n的乘积
                else
                     MASK(IN)=1;     %IN为此次迭代选出的内积值最大的列序号，将MASK的该项置为1
                     PDR=P(DR.*MASK);%取出最大的内积值，与字典矩阵Psi相乘
                     b=-Dp'*PDR/pDDp;%计算系数b1
                     p(IN)=DR(IN)+b*p(IN);%计算更新的方向d_n
                     Dp=PDR+b*Dp;  %c_n是Psi与d_n-1的乘积，即P（d_n-1），将d_n-1展开带入即得
                end
            % Step size
%                  Dp=P(p); % =P(DR(IN)) +b P(p(IN));
                 pDDp=Dp'*Dp; 
                 a=Residual'*Dp/(pDDp);
            % Update coefficients  
                 s=s+a*p;
            % New Residual and inner products
                 Residual=Residual-a*Dp;
                 DR=Pt(Residual);
                % select new element
                    [v I]=max(abs(DR));
                    ifweakness~=1
                        [vals inds]=sort(abs(DR),'descend');
                         I=inds(find(vals&amp;gt;=alpha*v));
                    end
                     IN=union(IN,I);
                    ifstrcmp(STOPCRIT,'M')&amp;amp;length(IN)&amp;gt;=STOPTOL
                        IN=IN(1:STOPTOL);
                    end
%                  % Only if we select new element do we leave the loop   
%                      if isempty(find (IN==I, 1))
%                         IN=[IN I];
%                         finished=1;
%                      end
%             end
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;参考文献：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;[1] Blumensath  T,  Davies  M.  Gradient  pursuits[J].  IEEE  Transactions  on  Signal  Processing,  2008, 56(6):2370-2382. &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;[2] 刘盼盼.压缩感知中梯度追踪算法的研究[D].南京：南京邮电大学，2015：7-21&lt;/span&gt;&lt;/p&gt;



&lt;p&gt;&lt;span&gt;我的博客即将搬运同步至腾讯云+社区，邀请大家一同入驻：https://cloud.tencent.com/developer/support-plan&lt;/span&gt;&lt;/p&gt;

&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

</description>
<pubDate>Tue, 19 Dec 2017 06:23:00 +0000</pubDate>
<dc:creator>闪电gogogo</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/wwf828/p/7754887.html</dc:identifier>
</item>
<item>
<title>Android自定义processor实现bindView功能 - 帅气的码农</title>
<link>http://www.cnblogs.com/limingblogs/p/8065051.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/limingblogs/p/8065051.html</guid>
<description>&lt;p&gt;在现阶段的Android开发中，注解越来越流行起来，比如ButterKnife，Retrofit，Dragger，EventBus等等都选择使用注解来配置。按照处理时期，注解又分为两种类型，一种是运行时注解，另一种是编译时注解，运行时注解由于性能问题被一些人所诟病。编译时注解的核心依赖APT(Annotation Processing Tools)实现，原理是在某些代码元素上（如类型、函数、字段等）添加注解，在编译时编译器会检查AbstractProcessor的子类，并且调用该类型的process函数，然后将添加了注解的所有元素都传递到process函数中，使得开发人员可以在编译器进行相应的处理，例如，根据注解生成新的Java类，这也就是EventBus，Retrofit，Dragger等开源库的基本原理。 &lt;br/&gt;Java API已经提供了扫描源码并解析注解的框架，你可以继承AbstractProcessor类来提供实现自己的解析注解逻辑。下边我们将学习如何在Android Studio中通过编译时注解生成java文件。&lt;/p&gt;

&lt;div readability=&quot;19&quot;&gt;&lt;strong&gt;注解处理器&lt;/strong&gt;是一个在javac中的，用来编译时扫描和处理的注解的工具。你可以为特定的注解，注册你自己的注解处理器。&lt;br/&gt;注解处理器可以生成Java代码，这些生成的Java代码会组成 &lt;code&gt;.java&lt;/code&gt; 文件，但不能修改已经存在的Java类（即不能向已有的类中添加方法）。而这些生成的Java文件，会同时与其他普通的手写Java源代码一起被javac编译。
&lt;p&gt;AbstractProcessor位于javax.annotation.processing包下，我们自己写processor需要继承它：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:java;collapse:true;;gutter:true;&quot;&gt;
public class LProcessor extends AbstractProcessor
{
    @Override
    public synchronized void init(ProcessingEnvironment processingEnvironment)
    {
        super.init(processingEnvironment);
    }

    @Override
    public boolean process(Set&amp;lt;? extends TypeElement&amp;gt; set, RoundEnvironment roundEnvironment)
    {
        return false;
    }

    @Override
    public Set&amp;lt;String&amp;gt; getSupportedAnnotationTypes()
    {
        return super.getSupportedAnnotationTypes();
    }

    @Override
    public SourceVersion getSupportedSourceVersion()
    {
        return super.getSupportedSourceVersion();
    }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
&lt;p&gt;对上面代码方法简单讲解&lt;/p&gt;
&lt;div readability=&quot;13.5&quot;&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;init(ProcessingEnvironment processingEnvironment)&lt;/code&gt;: 每一个注解处理器类都必须有一个空的构造函数。然而，这里有一个特殊的init()方法，它会被注解处理工具调用，并输入ProcessingEnviroment参数。ProcessingEnviroment提供很多有用的工具类Elements,Types和Filer。后面我们将看到详细的内容。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;process(Set&amp;lt;? extends TypeElement&amp;gt; set, RoundEnvironment roundEnvironment)&lt;/code&gt;: 这相当于每个处理器的主函数main()。你在这里写你的扫描、评估和处理注解的代码，以及生成Java文件。输入参数RoundEnviroment，可以让你查询出包含特定注解的被注解元素。后面我们将看到详细的内容。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getSupportedAnnotationTypes()&lt;/code&gt;: 这里你必须指定，这个注解处理器是注册给哪个注解的。注意，它的返回值是一个字符串的集合，包含本处理器想要处理的注解类型的合法全称。换句话说，你在这里定义你的注解处理器注册到哪些注解上。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;getSupportedSourceVersion()&lt;/code&gt;: 用来指定你使用的Java版本。通常这里返回SourceVersion.latestSupported()。然而，如果你有足够的理由只支持Java 7的话，你也可以返回SourceVersion.RELEASE_7。注意：在Java 7以后，你也可以使用注解来代替getSupportedAnnotationTypes()和getSupportedSourceVersion()。&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;我们先创建一个java module LProcessor&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;43&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@AutoService(Processor.class)
public class LProcessor extends AbstractProcessor {
    private Elements elementUtils;
    @Override
    public Set&amp;lt;String&amp;gt; getSupportedAnnotationTypes() {
        // 规定需要处理的注解
        return Collections.singleton(LActivity.class.getCanonicalName());
    }
    @Override
    public boolean process(Set&amp;lt;? extends TypeElement&amp;gt; annotations, RoundEnvironment roundEnv) {
        System.out.println(&quot;DIProcessor&quot;);
        Set&amp;lt;? extends Element&amp;gt; elements = roundEnv.getElementsAnnotatedWith(LActivity.class);
        for (Element element : elements) {
            // 判断是否Class
            TypeElement typeElement = (TypeElement) element;
            List&amp;lt;? extends Element&amp;gt; members = elementUtils.getAllMembers(typeElement);
            MethodSpec.Builder bindViewMethodSpecBuilder = MethodSpec.methodBuilder(&quot;bindView&quot;)
                    .addModifiers(Modifier.PUBLIC, Modifier.STATIC)
                    .returns(TypeName.VOID)
                    .addParameter(ClassName.get(typeElement.asType()), &quot;activity&quot;);
            for (Element item : members) {
                LView diView = item.getAnnotation(LView.class);
                if (diView == null){
                    continue;
                }
                bindViewMethodSpecBuilder.addStatement(String.format(&quot;activity.%s = (%s) activity.findViewById(%s)&quot;,item.getSimpleName(),ClassName.get(item.asType()).toString(),diView.value()));
            }
            TypeSpec typeSpec = TypeSpec.classBuilder(&quot;DI&quot; + element.getSimpleName())
                    .addModifiers(Modifier.PUBLIC, Modifier.FINAL)
                    .addMethod(bindViewMethodSpecBuilder.build())
                    .build();
            JavaFile javaFile = JavaFile.builder(getPackageName(typeElement), typeSpec).build();
            try {
                javaFile.writeTo(processingEnv.getFiler());
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return true;
    }
    private String getPackageName(TypeElement type) {
        return elementUtils.getPackageOf(type).getQualifiedName().toString();
    }
    @Override
    public synchronized void init(ProcessingEnvironment processingEnv) {
        super.init(processingEnv);
        elementUtils = processingEnv.getElementUtils();
    }
    @Override
    public SourceVersion getSupportedSourceVersion() {
        return SourceVersion.RELEASE_7;
    }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;pre&gt;
&lt;span&gt;这里面我们引入了两个库&lt;/span&gt;
&lt;/pre&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
compile 'com.google.auto.service:auto-service:1.0-rc2'
compile 'com.squareup:javapoet:1.7.0'
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　我们再创建一个java module anotation&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/337690/201712/337690-20171219131250881-1111943439.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;可见，是两个注解类：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Target(ElementType.TYPE)
@Retention(RetentionPolicy.CLASS)
public @interface LActivity {
}
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@Target(ElementType.FIELD)
@Retention(RetentionPolicy.RUNTIME)
public @interface LView {
    int value() default 0;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;之后我们主工程引入这两个module 就可以在我们主工程下面用这个注解了，我们make project之后会在工程目录下build/generated/source/apt下生成对应的java源文件,比如我在下面的activity类使用了定义的注解：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;37&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@LActivity
public class TestProcessorActivity extends Activity {
    @LView(R.id.et_input)
    EditText inputView;
    @LView(R.id.button)
    Button buttonView;

    @Override
    protected void onCreate(@Nullable Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_processor);
        DITestProcessorActivity.bindView(this);
        buttonView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Toast.makeText(TestProcessorActivity.this  , inputView.getText().toString() , Toast.LENGTH_SHORT).show();
            }
        });
    }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt; 则在build/generated/source/apt下生成DITestProcessorActivity.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
public final class DITestProcessorActivity {
  public static void bindView(TestProcessorActivity activity) {
    activity.inputView = (android.widget.EditText) activity.findViewById(2131165237);
    activity.buttonView = (android.widget.Button) activity.findViewById(2131165220);
  }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&lt;span&gt;代码已经自动生成好了，我们就不需要再写findViewById()了，只需要调用DITestProcessorActivity的bindView方法就可以了。&lt;/span&gt;
&lt;/pre&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@LView(R.id.et_input)
EditText inputView;
@LView(R.id.button)
Button buttonView;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;我们上面例子主要运用了javapoet和auto-service，具体详细使用可以参考源码https://github.com/square/javapoet, 而AutoService比较简单，https://github.com/google/auto/tree/master/service 就是在使用Java APT的时候，使用AutoService注解，可以自动生成meta信息。网上有很多相关文章，可以好好整理学习下。&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 05:30:00 +0000</pubDate>
<dc:creator>帅气的码农</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/limingblogs/p/8065051.html</dc:identifier>
</item>
<item>
<title>分布式服务Dubbo+Zookeeper安全认证 - 小柒2012</title>
<link>http://www.cnblogs.com/smallSevens/p/8064995.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/smallSevens/p/8064995.html</guid>
<description>&lt;h2 id=&quot;前言&quot;&gt;前言&lt;/h2&gt;
&lt;p&gt;由于之前的服务都是在内网，Zookeeper集群配置都是走的内网IP，外网不开放相关端口。最近由于业务升级，购置了阿里云的服务，需要对外开放Zookeeper服务。&lt;/p&gt;
&lt;h2 id=&quot;问题&quot;&gt;问题&lt;/h2&gt;
&lt;p&gt;Zookeeper+dubbo，如何设置安全认证？不想让其他服务连接Zookeeper，因为这个Zookeeper服务器在外网。&lt;/p&gt;
&lt;p&gt;查询官方文档：&lt;/p&gt;
&lt;p&gt;Zookeeper 是 Apacahe Hadoop 的子项目，是一个树型的目录服务，支持变更推送，适合作为 Dubbo 服务的注册中心，工业强度较高，可用于生产环境，并推荐使用。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/109211/201712/109211-20171219130738850-1931667173.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;流程说明：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;服务提供者启动时: 向 /dubbo/com.foo.BarService/providers 目录下写入自己的 URL 地址&lt;/li&gt;
&lt;li&gt;服务消费者启动时: 订阅 /dubbo/com.foo.BarService/providers 目录下的提供者 URL 地址。并向 /dubbo/com.foo.BarService/consumers 目录下写入自己的 URL 地址&lt;/li&gt;
&lt;li&gt;监控中心启动时: 订阅 /dubbo/com.foo.BarService 目录下的所有提供者和消费者 URL 地址&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;支持以下功能：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;当提供者出现断电等异常停机时，注册中心能自动删除提供者信息&lt;/li&gt;
&lt;li&gt;当注册中心重启时，能自动恢复注册数据，以及订阅请求&lt;/li&gt;
&lt;li&gt;当会话过期时，能自动恢复注册数据，以及订阅请求&lt;/li&gt;
&lt;li&gt;当设置 &amp;lt; dubbo:registry check=&quot;false&quot; /&amp;gt; 时，记录失败注册和订阅请求，后台定时重试&lt;/li&gt;
&lt;li&gt;可通过 &amp;lt; dubbo:registry username=&quot;admin&quot; password=&quot;1234&quot; /&amp;gt; 设置 zookeeper 登录信息&lt;/li&gt;
&lt;li&gt;可通过 &amp;lt; dubbo:registry group=&quot;dubbo&quot; /&amp;gt; 设置 zookeeper 的根节点，不设置将使用无根树&lt;/li&gt;
&lt;li&gt;支持 * 号通配符 &amp;lt; dubbo:reference group=&quot;&lt;em&gt;&quot; version=&quot;&lt;/em&gt;&quot; /&amp;gt;，可订阅服务的所有分组和所有版本的提供者&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;官网文档第五条，明确说明了可以通过username和 password字段设置zookeeper 登录信息。&lt;/p&gt;
&lt;p&gt;以下是registry参数说明：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/109211/201712/109211-20171219130751928-1459121888.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;但是，如果在Zookeeper上通过digest方式设置ACL，然后在dubbo registry上配置相应的用户、密码，服务就注册不到Zookeeper上了，会报KeeperErrorCode = NoAuth错误。&lt;/p&gt;
&lt;p&gt;但是查阅ZookeeperRegistry相关源码并没有发现相关认证的地方，搜遍全网很少有问类似的问题，这个问题似乎并没有多少人关注。&lt;/p&gt;
&lt;h2 id=&quot;zookeeper中的acl&quot;&gt;Zookeeper中的ACL&lt;/h2&gt;
&lt;h3 id=&quot;概述&quot;&gt;概述&lt;/h3&gt;
&lt;p&gt;传统的文件系统中，ACL分为两个维度，一个是属组，一个是权限，子目录/文件默认继承父目录的ACL。而在Zookeeper中，node的ACL是没有继承关系的，是独立控制的。Zookeeper的ACL，可以从三个维度来理解：一是scheme; 二是user; 三是permission，通常表示为&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;scheme:id:permissions&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;下面从这三个方面分别来介绍：&lt;/p&gt;
&lt;p&gt;scheme: scheme对应于采用哪种方案来进行权限管理，zookeeper实现了一个pluggable的ACL方案，可以通过扩展scheme，来扩展ACL的机制。zookeeper-3.4.4缺省支持下面几种scheme:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;world: 它下面只有一个id, 叫anyone, world:anyone代表任何人，zookeeper中对所有人有权限的结点就是属于world:anyone的&lt;/li&gt;
&lt;li&gt;auth: 它不需要id, 只要是通过authentication的user都有权限（zookeeper支持通过kerberos来进行authencation, 也支持username/password形式的authentication)&lt;/li&gt;
&lt;li&gt;digest: 它对应的id为username:BASE64(SHA1(password))，它需要先通过username:password形式的authentication&lt;/li&gt;
&lt;li&gt;ip: 它对应的id为客户机的IP地址，设置的时候可以设置一个ip段，比如ip:192.168.1.0/16, 表示匹配前16个bit的IP段&lt;/li&gt;
&lt;li&gt;super: 在这种scheme情况下，对应的id拥有超级权限，可以做任何事情(cdrwa)&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;permission-zookeeper目前支持下面一些权限&quot;&gt;permission: zookeeper目前支持下面一些权限：&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;CREATE(c): 创建权限，可以在在当前node下创建child node&lt;/li&gt;
&lt;li&gt;DELETE(d): 删除权限，可以删除当前的node&lt;/li&gt;
&lt;li&gt;READ(r): 读权限，可以获取当前node的数据，可以list当前node所有的child nodes&lt;/li&gt;
&lt;li&gt;WRITE(w): 写权限，可以向当前node写数据&lt;/li&gt;
&lt;li&gt;ADMIN(a): 管理权限，可以设置当前node的permission&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;客户端管理&quot;&gt;客户端管理&lt;/h3&gt;
&lt;p&gt;我们可以通过以下命令连接客户端进行操作：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;./zkCli.sh &lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;帮助&quot;&gt;帮助&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;[zk: localhost:2181(CONNECTED) 2] help
ZooKeeper -server host:port cmd args
        connect host:port
        get path [watch]
        ls path [watch]
        set path data [version]
        rmr path
        delquota [-n|-b] path
        quit 
        printwatches on|off
        create [-s] [-e] path data acl
        stat path [watch]
        close 
        ls2 path [watch]
        history 
        listquota path
        setAcl path acl
        getAcl path
        sync path
        redo cmdno
        addauth scheme auth
        delete path [version]
        setquota -n|-b val path&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;简单操作&quot;&gt;简单操作&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;[zk: localhost:2181(CONNECTED) 12] ls /
[dubbo, test, zookeeper]
[zk: localhost:2181(CONNECTED) 13] create /itstyle  data ip:192.168.1.190:cdrw
Created /itstyle
[zk: localhost:2181(CONNECTED) 14] getAcl /itstyle
'ip,'192.168.1.190
: cdrw&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;zkclient操作代码&quot;&gt;zkclient操作代码&lt;/h3&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;39&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;import java.security.NoSuchAlgorithmException;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import java.util.ArrayList;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import java.util.List;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import java.util.Map;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;import org.I0Itec.zkclient.ZkClient;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import org.apache.zookeeper.ZooDefs;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import org.apache.zookeeper.data.ACL;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import org.apache.zookeeper.data.Id;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import org.apache.zookeeper.data.Stat;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import org.apache.zookeeper.server.auth.DigestAuthenticationProvider;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Acl {
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String zkAddress = &lt;span class=&quot;st&quot;&gt;&quot;192.168.1.190:2181&quot;&lt;/span&gt;;  
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String testNode = &lt;span class=&quot;st&quot;&gt;&quot;/dubbo&quot;&lt;/span&gt;;  
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String readAuth = &lt;span class=&quot;st&quot;&gt;&quot;read-user:123456&quot;&lt;/span&gt;;  
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String writeAuth = &lt;span class=&quot;st&quot;&gt;&quot;write-user:123456&quot;&lt;/span&gt;;  
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String deleteAuth = &lt;span class=&quot;st&quot;&gt;&quot;delete-user:123456&quot;&lt;/span&gt;;  
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String allAuth = &lt;span class=&quot;st&quot;&gt;&quot;super-user:123456&quot;&lt;/span&gt;;  
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String adminAuth = &lt;span class=&quot;st&quot;&gt;&quot;admin-user:123456&quot;&lt;/span&gt;;  
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String digest = &lt;span class=&quot;st&quot;&gt;&quot;digest&quot;&lt;/span&gt;;  
   
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;initNode&lt;/span&gt;() &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; NoSuchAlgorithmException {  
        ZkClient zkClient = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ZkClient&lt;/span&gt;(zkAddress);  
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(allAuth));
        zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, allAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (zkClient.&lt;span class=&quot;fu&quot;&gt;exists&lt;/span&gt;(testNode)) {  
            zkClient.&lt;span class=&quot;fu&quot;&gt;delete&lt;/span&gt;(testNode);  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;节点删除成功！&quot;&lt;/span&gt;);  
        }  
   
        List&amp;lt;ACL&amp;gt; acls = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;ACL&amp;gt;();  
        acls.&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ACL&lt;/span&gt;(ZooDefs.&lt;span class=&quot;fu&quot;&gt;Perms&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;ALL&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Id&lt;/span&gt;(digest, DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(allAuth))));
        acls.&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ACL&lt;/span&gt;(ZooDefs.&lt;span class=&quot;fu&quot;&gt;Perms&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;ALL&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Id&lt;/span&gt;(digest, DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(allAuth))));  
        acls.&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ACL&lt;/span&gt;(ZooDefs.&lt;span class=&quot;fu&quot;&gt;Perms&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;READ&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Id&lt;/span&gt;(digest, DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(readAuth))));  
        acls.&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ACL&lt;/span&gt;(ZooDefs.&lt;span class=&quot;fu&quot;&gt;Perms&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;WRITE&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Id&lt;/span&gt;(digest, DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(writeAuth))));  
        acls.&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ACL&lt;/span&gt;(ZooDefs.&lt;span class=&quot;fu&quot;&gt;Perms&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;DELETE&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Id&lt;/span&gt;(digest, DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(deleteAuth))));  
        acls.&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ACL&lt;/span&gt;(ZooDefs.&lt;span class=&quot;fu&quot;&gt;Perms&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;ADMIN&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Id&lt;/span&gt;(digest, DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(adminAuth))));  
        zkClient.&lt;span class=&quot;fu&quot;&gt;createPersistent&lt;/span&gt;(testNode, testNode, acls);  
   
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(zkClient.&lt;span class=&quot;fu&quot;&gt;readData&lt;/span&gt;(testNode));  
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;节点创建成功！&quot;&lt;/span&gt;);  
        zkClient.&lt;span class=&quot;fu&quot;&gt;close&lt;/span&gt;();  
    }  
   
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;readTest&lt;/span&gt;() {  
        ZkClient zkClient = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ZkClient&lt;/span&gt;(zkAddress);  
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(zkClient.&lt;span class=&quot;fu&quot;&gt;readData&lt;/span&gt;(testNode));&lt;span class=&quot;co&quot;&gt;//没有认证信息，读取会出错  &lt;/span&gt;
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
   
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, adminAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(zkClient.&lt;span class=&quot;fu&quot;&gt;readData&lt;/span&gt;(testNode));&lt;span class=&quot;co&quot;&gt;//admin权限与read权限不匹配，读取也会出错  &lt;/span&gt;
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
   
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, readAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(zkClient.&lt;span class=&quot;fu&quot;&gt;readData&lt;/span&gt;(testNode));&lt;span class=&quot;co&quot;&gt;//只有read权限的认证信息，才能正常读取  &lt;/span&gt;
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
   
        zkClient.&lt;span class=&quot;fu&quot;&gt;close&lt;/span&gt;();  
    }  
   
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;writeTest&lt;/span&gt;() {  
        ZkClient zkClient = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ZkClient&lt;/span&gt;(zkAddress);  
   
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            zkClient.&lt;span class=&quot;fu&quot;&gt;writeData&lt;/span&gt;(testNode, &lt;span class=&quot;st&quot;&gt;&quot;new-data&quot;&lt;/span&gt;);&lt;span class=&quot;co&quot;&gt;//没有认证信息，写入会失败  &lt;/span&gt;
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
   
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, writeAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
            zkClient.&lt;span class=&quot;fu&quot;&gt;writeData&lt;/span&gt;(testNode, &lt;span class=&quot;st&quot;&gt;&quot;new-data&quot;&lt;/span&gt;);&lt;span class=&quot;co&quot;&gt;//加入认证信息后,写入正常  &lt;/span&gt;
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
   
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, readAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(zkClient.&lt;span class=&quot;fu&quot;&gt;readData&lt;/span&gt;(testNode));&lt;span class=&quot;co&quot;&gt;//读取新值验证  &lt;/span&gt;
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
   
        zkClient.&lt;span class=&quot;fu&quot;&gt;close&lt;/span&gt;();  
    }  
   
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;deleteTest&lt;/span&gt;() {  
        ZkClient zkClient = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ZkClient&lt;/span&gt;(zkAddress);  
        zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, deleteAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(zkClient.&lt;span class=&quot;fu&quot;&gt;readData&lt;/span&gt;(testNode));  
            zkClient.&lt;span class=&quot;fu&quot;&gt;delete&lt;/span&gt;(testNode);  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;节点删除成功！&quot;&lt;/span&gt;);  
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
        zkClient.&lt;span class=&quot;fu&quot;&gt;close&lt;/span&gt;();  
    }  
   
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;changeACLTest&lt;/span&gt;() {  
        ZkClient zkClient = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ZkClient&lt;/span&gt;(zkAddress);  
        &lt;span class=&quot;co&quot;&gt;//注：zkClient.setAcl方法查看源码可以发现，调用了readData、setAcl二个方法  &lt;/span&gt;
        &lt;span class=&quot;co&quot;&gt;//所以要修改节点的ACL属性，必须同时具备read、admin二种权限  &lt;/span&gt;
        zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, adminAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
        zkClient.&lt;span class=&quot;fu&quot;&gt;addAuthInfo&lt;/span&gt;(digest, readAuth.&lt;span class=&quot;fu&quot;&gt;getBytes&lt;/span&gt;());  
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {  
            List&amp;lt;ACL&amp;gt; acls = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;ACL&amp;gt;();  
            acls.&lt;span class=&quot;fu&quot;&gt;add&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ACL&lt;/span&gt;(ZooDefs.&lt;span class=&quot;fu&quot;&gt;Perms&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;ALL&lt;/span&gt;, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Id&lt;/span&gt;(digest, DigestAuthenticationProvider.&lt;span class=&quot;fu&quot;&gt;generateDigest&lt;/span&gt;(adminAuth))));  
            zkClient.&lt;span class=&quot;fu&quot;&gt;setAcl&lt;/span&gt;(testNode, acls);  
            Map.&lt;span class=&quot;fu&quot;&gt;Entry&lt;/span&gt;&amp;lt;List&amp;lt;ACL&amp;gt;, Stat&amp;gt; aclResult = zkClient.&lt;span class=&quot;fu&quot;&gt;getAcl&lt;/span&gt;(testNode);  
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(aclResult.&lt;span class=&quot;fu&quot;&gt;getKey&lt;/span&gt;());  
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Exception e) {  
            System.&lt;span class=&quot;fu&quot;&gt;err&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(e.&lt;span class=&quot;fu&quot;&gt;getMessage&lt;/span&gt;());  
        }  
        zkClient.&lt;span class=&quot;fu&quot;&gt;close&lt;/span&gt;();  
    }  
   
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;main&lt;/span&gt;(String[] args) &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; Exception {  
   
        &lt;span class=&quot;fu&quot;&gt;initNode&lt;/span&gt;();  
   
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;---------------------&quot;&lt;/span&gt;);  
   
        &lt;span class=&quot;fu&quot;&gt;readTest&lt;/span&gt;();  
   
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;---------------------&quot;&lt;/span&gt;);  
   
        &lt;span class=&quot;fu&quot;&gt;writeTest&lt;/span&gt;();  
   
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;---------------------&quot;&lt;/span&gt;);  
   
        &lt;span class=&quot;fu&quot;&gt;changeACLTest&lt;/span&gt;();  
   
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;---------------------&quot;&lt;/span&gt;);  
   
        &lt;span class=&quot;fu&quot;&gt;deleteTest&lt;/span&gt;();  
    }  
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;总结&quot;&gt;总结&lt;/h2&gt;
&lt;p&gt;大部分服务大都是部署在内网的，基本很少对外网开放，然而Dubbo的zookeeper用户权限认证貌似真的不起作用，如果非要对外开放只能通过iptables或者firewall进行IP Access Control，如果是阿里云服务器的话安全组也是个不错的选择。&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 05:08:00 +0000</pubDate>
<dc:creator>小柒2012</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/smallSevens/p/8064995.html</dc:identifier>
</item>
<item>
<title>Python2/3中的urllib库 - sherlockChen</title>
<link>http://www.cnblogs.com/sherlockChen/p/8064896.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/sherlockChen/p/8064896.html</guid>
<description>&lt;p&gt;摘要：介绍urllib库在不同版本的Python中的变动，并以Python3.X讲解urllib库的相关用法。&lt;/p&gt;

&lt;h2&gt;urllib库对照速查表&lt;/h2&gt;
&lt;table border=&quot;1&quot; cellspacing=&quot;0&quot; cellpadding=&quot;2&quot;&gt;&lt;tbody readability=&quot;4.5&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;&lt;strong&gt;Python2.X&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;&lt;strong&gt;Python3.X&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot; readability=&quot;7&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.request, urllib.error, urllib.parse&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4.5&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib2&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot; readability=&quot;6&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.request, urllib.error&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib2.urlopen&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.request.urlopen&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.urlencode&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.parse.urlencode&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.quote&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.request.quote&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib2.Request&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.request.Request&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urlparse&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.parse&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.urlretrieve&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot; readability=&quot;5&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.request.urlretrieve&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib2.URLError&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;urllib.error.URLError&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;200&quot;&gt;
&lt;p align=&quot;center&quot;&gt;cookielib.CookieJar&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;199&quot;&gt;
&lt;p align=&quot;center&quot;&gt;http.CookieJar&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;urllib库是用于操作URL，爬取页面的python第三方库，同样的库还有&lt;a href=&quot;http://docs.python-requests.org/zh_CN/latest/user/quickstart.html&quot;&gt;requests&lt;/a&gt;、&lt;a href=&quot;https://github.com/httplib2/httplib2&quot;&gt;httplib2&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在Python2.X中，分urllib和urllib2，但在Python3.X中，都统一合并到urllib中。通过上表可以看到其中常见的变动，依据该变动可快速写出相应版本的python程序。&lt;/p&gt;
&lt;p&gt;相对来说，Python3.X对中文的支持比Python2.X友好，所以该博客接下来通过Python3.X来介绍urllib库的一些常见用法。&lt;/p&gt;

&lt;h2&gt;发送请求&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
r = urllib.request.urlopen(&quot;&lt;span&gt;http://www.python.org/&lt;/span&gt;&quot;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;首先导入&lt;span&gt;urllib.request&lt;/span&gt;模块，使用&lt;span&gt;urlopen()&lt;/span&gt;对参数中的URL发送请求，返回一个http.client.HTTPResponse对象。&lt;/p&gt;
&lt;p&gt;在&lt;span&gt;urlopen()&lt;/span&gt;中，使用&lt;span&gt;timeout&lt;/span&gt;字段，可设定相应的秒数时间之后停止等待响应。除此之外，还可使用&lt;span&gt;r.info()、r.getcode()、r.geturl()&lt;/span&gt;获取相应的当前环境信息、状态码、当前网页URL。&lt;/p&gt;

&lt;h2&gt;读取响应内容&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
url = &quot;&lt;span&gt;http://www.python.org/&lt;/span&gt;&quot;
with urllib.request.urlopen(url) as r:
    r.&lt;span&gt;read&lt;/span&gt;()
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;使用&lt;span&gt;r.read()&lt;/span&gt;读取响应内容到内存，该内容为网页的源代码（可用相应的浏览器“查看网页源代码”功能看到），并可对返回的字符串进行相应解码&lt;span&gt;decode()&lt;/span&gt;。&lt;/p&gt;

&lt;h2&gt;传递URL参数&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
&lt;span&gt;import&lt;/span&gt; urllib.parse
params = urllib.parse.urlencode({'q': 'urllib', 'check_keywords': 'yes', 'area': 'default'})
url = &quot;&lt;span&gt;https://docs.python.org/3/search.html?{}&lt;/span&gt;&quot;.format(params)
&lt;/pre&gt;
&lt;pre&gt;
r = urllib.request.urlopen(url)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以字符串字典的形式，通过&lt;span&gt;urlencode()&lt;/span&gt;编码，为URL的查询字符串传递数据，&lt;/p&gt;
&lt;p&gt;编码后的params为字符串，字典每项键值对以’&amp;amp;’连接：’q=urllib&amp;amp;check_keywords=yes&amp;amp;area=default’&lt;/p&gt;
&lt;p&gt;构建后的URL：https://docs.python.org/3/search.html?q=urllib&amp;amp;check_keywords=yes&amp;amp;area=default&lt;/p&gt;
&lt;p&gt;当然，&lt;span&gt;urlopen()&lt;/span&gt;支持直接构建的URL，简单的get请求可以不通过&lt;span&gt;urlencode()&lt;/span&gt;编码，手动构建后直接请求。上述方法使代码模块化，更优雅。&lt;/p&gt;

&lt;h2&gt;传递中文参数&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
searchword = urllib.request.quote(input(&quot;请输入要查询的关键字：&quot;))
url = &quot;&lt;span&gt;https://cn.bing.com/images/async?q={}&amp;amp;first=0&amp;amp;mmasync=1&lt;/span&gt;&quot;.format(searchword)
r = urllib.request.urlopen(url)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;该URL是利用bing图片接口，查询关键字q的图片。如果直接将中文传入URL中请求，会导致编码错误。我们需要使用&lt;span&gt;quote()&lt;/span&gt;，对该中文关键字进行URL编码，相应的可以使用&lt;span&gt;unquote()&lt;/span&gt;进行解码。&lt;/p&gt;

&lt;h2&gt;定制请求头&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
url = '&lt;span&gt;https://docs.python.org/3/library/urllib.request.html&lt;/span&gt;'
headers = {
    'User-Agent' : 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36',
    'Referer': '&lt;span&gt;https://docs.python.org/3/library/urllib.html&lt;/span&gt;'
}
req = urllib.request.Request(url, headers=headers)
r = urllib.request.urlopen(req)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;有时爬取一些网页时，会出现403错误（Forbidden），即禁止访问。这是因为网站服务器对访问者的Headers属性进行身份验证，例如：通过urllib库发送的请求，默认以”Python-urllib/X.Y”作为User-Agent，其中X为Python的主版本号，Y为副版本号。所以，我们需要通过&lt;span&gt;urllib.request.Request()&lt;/span&gt;构建Request对象，传入字典形式的Headers属性，模拟浏览器。&lt;/p&gt;
&lt;p&gt;相应的Headers信息，可通过浏览器的开发者调试工具，”检查“功能的”Network“标签查看相应的网页得到，或使用抓包分析软件&lt;a href=&quot;https://www.telerik.com/fiddler&quot;&gt;Fiddler&lt;/a&gt;、&lt;a href=&quot;https://www.wireshark.org/&quot;&gt;Wireshark&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;除上述方法外，还可以使用&lt;span&gt;urllib.request.build_opener()&lt;/span&gt;或&lt;span&gt;req.add_header()&lt;/span&gt;定制请求头，详见&lt;a href=&quot;https://docs.python.org/3/library/urllib.request.html#examples&quot;&gt;官方样例&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;在Python2.X中，urllib模块和urllib2模块通常一起使用，因为&lt;span&gt;urllib.urlencode()&lt;/span&gt;可以对URL参数进行编码，而&lt;span&gt;urllib2.Request()&lt;/span&gt;可以构建Request对象，定制请求头，然后统一使用&lt;span&gt;urllib2.urlopen()&lt;/span&gt;发送请求。&lt;/p&gt;

&lt;h2&gt;传递POST请求&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
&lt;span&gt;import&lt;/span&gt; urllib.parse
url = '&lt;span&gt;https://passport.cnblogs.com/user/signin?&lt;/span&gt;'
post = {
    'username': 'xxx',
    'password': 'xxxx'
}
postdata = urllib.parse.urlencode(post).&lt;span&gt;encode&lt;/span&gt;('utf-8')
req = urllib.request.Request(url, postdata)
r = urllib.request.urlopen(req)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们在进行注册、登录等操作时，会通过POST表单传递信息。&lt;/p&gt;
&lt;p&gt;这时，我们需要分析页面结构，构建表单数据post，使用&lt;span&gt;urlencode()&lt;/span&gt;进行编码处理，返回字符串，再指定’utf-8’的编码格式，这是因为POSTdata只能是bytes或着file object。最后通过&lt;span&gt;Request()&lt;/span&gt;对象传递postdata，使用&lt;span&gt;urlopen()&lt;/span&gt;发送请求。&lt;/p&gt;

&lt;h2&gt;下载远程数据到本地&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
url = &quot;&lt;span&gt;https://www.python.org/static/img/python-logo.png&lt;/span&gt;&quot;
urllib.request.urlretrieve(url, &quot;&lt;span&gt;python-logo.png&lt;/span&gt;&quot;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;爬取图片、视频等远程数据时，可使用&lt;span&gt;urlretrieve()&lt;/span&gt;下载到本地。&lt;/p&gt;
&lt;p&gt;第一个参数为要下载的url，第二个参数为下载后的存放路径。&lt;/p&gt;
&lt;p&gt;该样例下载python官网logo到当前目录下，返回元组(filename, headers)。&lt;/p&gt;

&lt;h2&gt;设置代理IP&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
url = &quot;&lt;span&gt;https://www.cnblogs.com/&lt;/span&gt;&quot;
proxy_ip = &quot;&lt;span&gt;180.106.16.132:8118&lt;/span&gt;&quot;
&lt;span&gt;proxy&lt;/span&gt; = urllib.request.ProxyHandler({'http': proxy_ip})
opener = urllib.request.build_opener(&lt;span&gt;proxy&lt;/span&gt;, urllib.request.HTTPHandler)
urllib.request.install_opener(opener)
r = urllib.request.urlopen(url)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;有时频繁的爬取一个网页，会被网站服务器屏蔽IP。这时，可通过上述方法设置代理IP。&lt;/p&gt;
&lt;p&gt;首先，通过网上代理IP的网站找一个可以用的IP，构建&lt;span&gt;ProxyHandler()&lt;/span&gt;对象，将’http’和代理IP以字典形式作为参数传入，设置代理服务器信息。再构建opener对象，将proxy和HTTPHandler类传入。通过&lt;span&gt;installl_opener()&lt;/span&gt;将opener设置成全局，当用&lt;span&gt;urlopen()&lt;/span&gt;发送请求时，会使用之前设置的信息来发送相应的请求。&lt;/p&gt;

&lt;h2&gt;异常处理&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
&lt;span&gt;import&lt;/span&gt; urllib.error
url = &quot;&lt;span&gt;http://www.balabalabala.org&lt;/span&gt;&quot;
try:
    r = urllib.request.urlopen(url)
except urllib.error.URLError as e:
    &lt;span&gt;if&lt;/span&gt; hasattr(e, '&lt;span&gt;code&lt;/span&gt;'):
        &lt;span&gt;print&lt;/span&gt;(e.&lt;span&gt;code&lt;/span&gt;)
    &lt;span&gt;if&lt;/span&gt; hasattr(e, 'reason'):
        &lt;span&gt;print&lt;/span&gt;(e.reason)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;可以使用URLError类，处理一些URL相关异常。导入&lt;span&gt;urllib.error&lt;/span&gt;，捕获URLError异常后，因为只有发生HTTPError异常（URLError子类）时，才会有异常状态码&lt;span&gt;e.code&lt;/span&gt;，所以需要判断异常是否有属性code。&lt;/p&gt;

&lt;h2&gt;Cookie的使用&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt; urllib.request
&lt;span&gt;import&lt;/span&gt; http.cookiejar
url = &quot;&lt;span&gt;http://www.balabalabala.org/&lt;/span&gt;&quot;
cjar = http.cookiejar.CookieJar()
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cjar))
urllib.request.install_opener(opener)
r = urllib.request.urlopen(url)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;通过无状态协议HTTP访问网页时，Cookie维持会话间的状态。例如：有些网站需要登录操作，第一次可通过提交POST表单来登录，当爬取该网站下的其它站点时，可以使用Cookie来保持登录状态，而不用每次都通过提交表单来登录。&lt;/p&gt;
&lt;p&gt;首先，构建&lt;span&gt;CookieJar()&lt;/span&gt;对象cjar，再使用&lt;span&gt;HTTPCookieProcessor()&lt;/span&gt;处理器，处理cjar，并通过&lt;span&gt;build_opener()&lt;/span&gt;构建opener对象，设置成全局，通过&lt;span&gt;urlopen()&lt;/span&gt;发送请求。&lt;/p&gt;

&lt;h2&gt;官方文档&lt;/h2&gt;
&lt;p&gt;Python2.X： &lt;a href=&quot;https://docs.python.org/2/library/urllib.html&quot;&gt;urllib&lt;/a&gt;、&lt;a href=&quot;https://docs.python.org/2/library/urllib2.html&quot;&gt;urllib2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Python3.X： &lt;a href=&quot;https://docs.python.org/3/library/urllib.request.html&quot;&gt;urllib.request&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 04:32:00 +0000</pubDate>
<dc:creator>sherlockChen</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/sherlockChen/p/8064896.html</dc:identifier>
</item>
<item>
<title>采用Opserver来监控你的ASP.NET项目系列(二、监控SQL Server与Asp.Net项目) - GuZhenYin</title>
<link>http://www.cnblogs.com/GuZhenYin/p/8064860.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/GuZhenYin/p/8064860.html</guid>
<description>&lt;p&gt;&lt;span&gt;前&lt;/span&gt;&lt;span&gt;言&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;之前有过2篇关于&lt;a href=&quot;http://www.cnblogs.com/GuZhenYin/p/7170010.html&quot; target=&quot;_blank&quot;&gt;如何监控ASP.NET core项目&lt;/a&gt;的文章,有兴趣的也可以看看.&lt;/p&gt;

&lt;p&gt;今天我们主要来介绍一下,如何使用Opserver监控我们的SQL Server 和ASP.NET项目的异常监控&lt;/p&gt;
&lt;p&gt; 监控效果如下:&lt;/p&gt;
&lt;p&gt;SQL Server的:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/653851/201712/653851-20171219120417803-1768187659.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/653851/201712/653851-20171219120510506-769179334.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt; ASP.NET异常情况的监控:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/653851/201712/653851-20171219110500896-286028171.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;监控SQL Server&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;首先我们来讲解一下如何监控我们的SQL Server.&lt;/p&gt;
&lt;p&gt;上篇内容我们已经提到过 Opeserver的项目有很多的配置文件.&lt;/p&gt;
&lt;p&gt;我们找到我们的SQLSettings.example.json文件,改名为SQLSettings.json文件&lt;/p&gt;
&lt;p&gt;修改其中的配置项如下:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Configuration for the SQL Server dashboard &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
{
  &lt;/span&gt;&quot;defaultConnectionString&quot;: &quot;&quot;&lt;span&gt;,
  &lt;/span&gt;&quot;refreshIntervalSeconds&quot;: 30&lt;span&gt;,
  &lt;/span&gt;&quot;clusters&quot;&lt;span&gt;: [
    {
      &lt;/span&gt;&quot;name&quot;: &quot;192.168.1.120&quot;&lt;span&gt;,
      &lt;/span&gt;&quot;refreshIntervalSeconds&quot;: 20&lt;span&gt;,
      &lt;/span&gt;&quot;nodes&quot;&lt;span&gt;: [
        { &lt;/span&gt;&quot;name&quot;: &quot;192.168.1.121&quot;&lt;span&gt; },
        { &lt;/span&gt;&quot;name&quot;: &quot;192.168.1.122&quot;&lt;span&gt; },
        { &lt;/span&gt;&quot;name&quot;: &quot;192.168.1.123&quot;&lt;span&gt; }
      ]
    }
  ],
  &lt;/span&gt;&quot;instances&quot;&lt;span&gt;: [
    {
      &lt;/span&gt;&quot;name&quot;: &quot;实例名称&quot;&lt;span&gt;,
      &lt;/span&gt;&quot;connectionString&quot;: &quot;数据库连接字符串&quot;&lt;span&gt;,
      &lt;/span&gt;&quot;refreshIntervalSeconds&quot;: 200&lt;span&gt;
    }
  ]
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;解释一下其中的意义,参照如下:&lt;/p&gt;
&lt;pre&gt;
defaultConnectionString  (默认的连接字符串,用于单台数据库监控)
&lt;/pre&gt;
&lt;pre&gt;
refreshIntervalSeconds   (轮询数据库情况的刷新时间,如果不设置,默认为60秒)
&lt;/pre&gt;
&lt;pre&gt;
instances (当有多台单独的数据库实例需要监控时候的数据库实例设置)
&lt;/pre&gt;
&lt;pre&gt;
clusters (当你的数据库是集群部署的时候的设置)
&lt;/pre&gt;
&lt;pre&gt;
&lt;br/&gt;后面的内容都一样,我就不一一解释了,多台数据库实例,可以自行在instances 中添加多个节点,集群就在clusters中加入节点地址即可
&lt;/pre&gt;
&lt;p&gt;然后,我们直接运行OpSever项目,就可以观察到数据库的变化情况了.&lt;/p&gt;
&lt;p&gt;&lt;span&gt;监控ASP.NET项目的异常情况&lt;/span&gt;&lt;/p&gt;
&lt;p&gt; 下面我们来讲讲如何监控我们的ASP.NET项目异常的情况&lt;/p&gt;
&lt;h3&gt;   1.我们需要在在web项目中通过nuget安装StackExchange.Exceptional组件（它依赖于dapper）&lt;/h3&gt;
&lt;h3&gt;   2.在web.config中的configSections节点下增加section节点 “Exceptional”,如下:&lt;/h3&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;configSections&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;Exceptional&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;StackExchange.Exceptional.Settings&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;configSections&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;   3.在web.config中增加Exceptional节点,如下:&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;Exceptional &lt;/span&gt;&lt;span&gt;applicationName&lt;/span&gt;&lt;span&gt;=&quot;应用名称&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
   
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ErrorStore type=&quot;Memory&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;连接opserver数据库时开启&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ErrorStore &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;存储类型&quot;&lt;/span&gt;&lt;span&gt; connectionString&lt;/span&gt;&lt;span&gt;=&quot;连接字符串&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
  &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;Exceptional&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ErrorStore 错误存储有4种实现方式，Memory,JSON,SQL,MySQL,如下是官方的说明译文:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;如果没有设置ErrorStore,将默认使用内存的形式来记录错误&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ErrorStore type=&quot;Memory&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 其他的存储类型, 相关的设置属性如下:
         - rollupSeconds:页面上异常的更新秒数,默认为600秒
         - backupQueueSize: 设置缓存多少错误,默认为1000条&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; JSON:Size是设置Json存储的文件数量,默认为200&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ErrorStore type=&quot;JSON&quot; path=&quot;~/Errors&quot; size=&quot;200&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; SQL: 只需要设置数据库连接字符串如下: &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ErrorStore type=&quot;SQL&quot; connectionString=&quot;Server=.;Database=Exceptions;Uid=Exceptions;Pwd=myPassword!&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ErrorStore type=&quot;SQL&quot; connectionStringName=&quot;MyConnectionString&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;你也可以设置为Mysql如下 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ErrorStore type=&quot;MySQL&quot; connectionString=&quot;Server=.;Database=Exceptions;Username=Exceptions;Pwd=myPassword!&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ErrorStore type=&quot;MySQL&quot; connectionStringName=&quot;MyConnectionString&quot; /&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;这里我们采用SQL的形式,直接存在数据库里.&lt;/p&gt;
&lt;h3&gt;4.修改web.config的system.webServer节点,添加新的handlers,modules配置如下:&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;system.webServer&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;br/&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;pre&gt;
 &amp;lt;validation validateIntegratedModeConfiguration=&quot;false&quot; /&amp;gt;
&lt;/pre&gt;
&lt;pre&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;handlers&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
      &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;add &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;Exceptional&quot;&lt;/span&gt;&lt;span&gt; path&lt;/span&gt;&lt;span&gt;=&quot;exceptions.axd&quot;&lt;/span&gt;&lt;span&gt; verb&lt;/span&gt;&lt;span&gt;=&quot;POST,GET,HEAD&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;StackExchange.Exceptional.HandlerFactory, StackExchange.Exceptional&quot;&lt;/span&gt;&lt;span&gt; preCondition&lt;/span&gt;&lt;span&gt;=&quot;integratedMode&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;handlers&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;modules&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
      &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;add &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;ErrorLog&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;StackExchange.Exceptional.ExceptionalModule, StackExchange.Exceptional&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;modules&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
  &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;system.webServer&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;5.因为我这里采用的SQL存储,所以需要给数据库添加存储错误信息的表,SQL语句如下:&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;USE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;OpServerTest&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;GO&lt;/span&gt;

&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;***** Object:  Table [dbo].[Exceptions]    Script Date: 2016/11/16 16:28:56 *****&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;SET&lt;/span&gt; ANSI_NULLS &lt;span&gt;ON&lt;/span&gt;
&lt;span&gt;GO&lt;/span&gt;

&lt;span&gt;SET&lt;/span&gt; QUOTED_IDENTIFIER &lt;span&gt;ON&lt;/span&gt;
&lt;span&gt;GO&lt;/span&gt;

&lt;span&gt;SET&lt;/span&gt; ANSI_PADDING &lt;span&gt;ON&lt;/span&gt;
&lt;span&gt;GO&lt;/span&gt;

&lt;span&gt;CREATE&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Exceptions&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;(
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;bigint&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;IDENTITY&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;GUID&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;uniqueidentifier&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;ApplicationName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;50&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;MachineName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;50&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;CreationDate&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;datetime&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Type&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;IsProtected&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;bit&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Host&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Url&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;500&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;HTTPMethod&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;10&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;IPAddress&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;40&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Source&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;100&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Message&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;1000&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Detail&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;max&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;StatusCode&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;SQL&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;max&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;DeletionDate&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;datetime&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;FullJson&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;nvarchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;max&lt;/span&gt;) &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;ErrorHash&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;DuplicateCount&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
 &lt;/span&gt;&lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PK_Exceptions&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;PRIMARY&lt;/span&gt; &lt;span&gt;KEY&lt;/span&gt; &lt;span&gt;CLUSTERED&lt;/span&gt;&lt;span&gt; 
(
    &lt;/span&gt;&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ASC&lt;/span&gt;&lt;span&gt;
)&lt;/span&gt;&lt;span&gt;WITH&lt;/span&gt; (PAD_INDEX &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, STATISTICS_NORECOMPUTE &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, IGNORE_DUP_KEY &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, ALLOW_ROW_LOCKS &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;, ALLOW_PAGE_LOCKS &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;) &lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;
) &lt;/span&gt;&lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; TEXTIMAGE_ON &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;

&lt;span&gt;GO&lt;/span&gt;

&lt;span&gt;SET&lt;/span&gt; ANSI_PADDING &lt;span&gt;OFF&lt;/span&gt;
&lt;span&gt;GO&lt;/span&gt;

&lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Exceptions&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; ((&lt;span&gt;0&lt;/span&gt;)) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;IsProtected&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;GO&lt;/span&gt;

&lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;Exceptions&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; ((&lt;span&gt;1&lt;/span&gt;)) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DuplicateCount&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;GO&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;6.最后回到OpServer项目修改ExceptionsSettings.example.json文件为ExceptionsSettings.json,并添加配置如下:&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
 { &quot;stores&quot;: [ &lt;span&gt;//&lt;/span&gt;&lt;span&gt;异常日志存储位置&lt;/span&gt;
&lt;span&gt;    {
      &lt;/span&gt;&quot;name&quot;: &quot;ExceptionDB&quot;&lt;span&gt;,
      &lt;/span&gt;&quot;queryTimeoutMs&quot;: 2000&lt;span&gt;,
      &lt;/span&gt;&quot;pollIntervalSeconds&quot;: 10&lt;span&gt;,
      &lt;/span&gt;&quot;connectionString&quot;: &quot;错误存储的地址&quot;&lt;span&gt;
    }
  ]
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;7.想增加自定义的错误信息,可以编写如下代码:&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;try&lt;/span&gt;&lt;span&gt;
 {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; Exception(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Just a try/catch test&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
 }
  &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception ex)
  {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; logged, but caught so we don't crash&lt;/span&gt;
&lt;span&gt;                ErrorStore.LogExceptionWithoutContext(ex);
  }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这样,异常也会记录到存储里面去了.&lt;/p&gt;

&lt;p&gt;&lt;span&gt;写在最后&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;本篇到此结束,下篇介绍如何监控我们的服务器状态&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 04:02:00 +0000</pubDate>
<dc:creator>GuZhenYin</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/GuZhenYin/p/8064860.html</dc:identifier>
</item>
<item>
<title>前端开发者常用的9个JavaScript图表库 - 葡萄城控件技术团队</title>
<link>http://www.cnblogs.com/powertoolsteam/p/top-9-javascript-charting-libraries.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/powertoolsteam/p/top-9-javascript-charting-libraries.html</guid>
<description>&lt;p align=&quot;left&quot;&gt;&lt;span&gt;当前，数据可视化已经成为数据科学领域非常重要的一部分。不同网络系统中产生的数据，都需要经过适当的可视化处理，以便更好的呈现给用户读取和分析。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;对任何一个组织来说，如果能够充分的获取数据、可视化数据和分析数据，那么就能很大程度上帮助了解数据产生的深层次原因，以便据此做出正确的决定。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;对于前端开发人员来说，如果能够掌握交互式网页中的数据可视化技术，则是一项很棒的技能。当然，通过一些 JavaScript 的图表库也会使前端的数据可视化变得更加容易。使用这些库，开发者可以在无需考虑不同的语法所带来的编程难题的情况下，轻松实现将数据转化为易于理解的图表。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;下面是挑选出的 9 个 JavaScript 图表库：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;Chart.js&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Chartist&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;FlexChart&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Echarts&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;NVD3&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;C3.js&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;TauCharts&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;ReCharts&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;Flot&lt;/span&gt; &lt;/li&gt;
&lt;/ul&gt;

&lt;p align=&quot;left&quot;&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111122178-951483248.png&quot; alt=&quot;&quot; width=&quot;645&quot; height=&quot;191&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Chart.js 是一种简洁、用户友好的图表库，同时也是基于 HTML5 的 JavaScript 库，用于创建动画、交互式和可自定义的图表和图形。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;借助 Chart.js，用户可以轻松直观地查看混合图表类型。默认情况下，也可以使用 Chart.js 创建响应式网页。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Chart.js 库允许用户快速创建可视化数据。Chart.js 易于设置，对初学者十分友好。使用 Chart.js 则不必考虑浏览器的兼容性问题，因为 Chart.js 支持旧浏览器。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;使用 npm 安装 Chart.js：&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;npm install chart.js --save &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Chart.js 绘制雷达图的代码示例：&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
const ctx = document.getElementById(&quot;myChart&quot;&lt;span&gt;);
const options &lt;/span&gt;=&lt;span&gt; {
    scale: {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Hides the scale&lt;/span&gt;
&lt;span&gt;    }
};
const data &lt;/span&gt;=&lt;span&gt; {
    labels: [&lt;/span&gt;'Running', 'Swimming', 'Eating', 'Cycling'&lt;span&gt;],
    datasets: [
   　　　　　 {
            data: [&lt;/span&gt;-10, -5, -3, -15&lt;span&gt;],
            label: &lt;/span&gt;&quot;two&quot;&lt;span&gt;,
             borderColor: &lt;/span&gt;'#ffc63b'&lt;span&gt;
            },
    　　　　　{
            data: [&lt;/span&gt;10, 5, 3, 10&lt;span&gt;],
            label: &lt;/span&gt;&quot;three&quot;&lt;span&gt;,
            borderColor: &lt;/span&gt;'#1d9a58'&lt;span&gt;
            },
            {
        data: [&lt;/span&gt;18, 10, 4, 2&lt;span&gt;],
        label: &lt;/span&gt;&quot;one&quot;&lt;span&gt;,
        borderColor: &lt;/span&gt;'#d8463c'&lt;span&gt;
    },
]
}

const myRadarChart &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Chart(ctx, {
    data: data,
    type: &lt;/span&gt;'radar'&lt;span&gt;,
    options: options
});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p align=&quot;left&quot;&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111143303-37939128.png&quot; alt=&quot;&quot; width=&quot;461&quot; height=&quot;225&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Chartist 库很适合于创建美观、响应能力强、阅读友好的图表。Chartist 使用 SVG 来呈现图表。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Chartist 还提供了使用 CSS 媒体查询和创意动画来自定义图表的能力。用户使用 Chartist 在图表设计中实现自己的所有创意。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Chartist 易于配置，也易于使用 Sass 进行定制。但是，它不支持旧浏览器。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;使用 Chartist，可以通过 CSS 的样式来美化你的 SVG，用户完全可以现实自己所想的所有图表样式。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;使用 npm 安装 Chartist：&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;npm install chartist --save &lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Chartist 创建具有自定义标签的饼图的代码示例：&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; data =&lt;span&gt; {
  labels: [&lt;/span&gt;'Bananas', 'Apples', 'Grapes'&lt;span&gt;],
  series: [&lt;/span&gt;20, 15, 40&lt;span&gt;]
};
&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; options =&lt;span&gt; {
  labelInterpolationFnc: &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(value) {
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; value[0&lt;span&gt;]
  }
};
&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; responsiveOptions =&lt;span&gt; [
  [&lt;/span&gt;'screen and (min-width: 640px)'&lt;span&gt;, {
    chartPadding: &lt;/span&gt;30&lt;span&gt;,
    labelOffset: &lt;/span&gt;130&lt;span&gt;,
    labelDirection: &lt;/span&gt;'explode'&lt;span&gt;,
    labelInterpolationFnc: &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(value) {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; value;
    }
  }],
  [&lt;/span&gt;'screen and (min-width: 1024px)'&lt;span&gt;, {
    labelOffset: &lt;/span&gt;80&lt;span&gt;,
    chartPadding: &lt;/span&gt;20&lt;span&gt;
  }]
];
&lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Chartist.Pie('.ct-chart', data, options, responsiveOptions);
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111157381-830680739.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FlexChart 是高性能的图表工具。使用 FlexChart，可轻松的将表格数据可视化为业务图表。FlexChart 不但支持常见的图表类型，如折线图、饼状图、面积图等，还支持气泡图、K线图、条形图、漏斗图等高级图表类型。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FlexChart 的使用也十分简单，FlexChart 图表将所有与数据有关的任务都委托给 CollectionView 类，只需操作 CollectionView 类，就能实现过滤、排序和分组数据等功能。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FlexChart 包含的图表元素也比较全面，如图表图例、图表标题、图表页脚、数轴、图表 series 和标签等，用户也可以为图表添加自定义的元素，如平均线和趋势线等。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FlexChart 本质上是一种交互式的图表，不论是数据进行任何的更改，都会自动反应在图表上，如图表曲线随数据放大缩小、过滤、钻取、动画等。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;查看 FlexChart 的&lt;a href=&quot;http://demo.gcpowertools.com.cn/wijmo5/learningwijmo/#96YKp&quot; target=&quot;_blank&quot;&gt;中文学习指南&lt;/a&gt;和&lt;a href=&quot;http://demo.gcpowertools.com.cn/wijmo5/Angular/Explorer/Explorer/#/chart/sunburst&quot; target=&quot;_blank&quot;&gt;旭日图Demo&lt;/a&gt;。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;FlexChart 绘制柱状图的代码示例：&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;55&quot;&gt;
&lt;pre&gt;
onload = &lt;span&gt;function&lt;/span&gt;&lt;span&gt;() {
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; wrap data in a CollectionView so the grid and chart &lt;/span&gt;
  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; get notifications&lt;/span&gt;
  &lt;span&gt;var&lt;/span&gt; data = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; wijmo.collections.CollectionView(getData());
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; create the chart&lt;/span&gt;
  &lt;span&gt;var&lt;/span&gt; theChart = &lt;span&gt;new&lt;/span&gt; wijmo.chart.FlexChart('#theChart'&lt;span&gt;, {
      itemsSource: data,
    bindingX: &lt;/span&gt;'country'&lt;span&gt;,
    series: [
        { binding: &lt;/span&gt;'sales', name: 'Sales'&lt;span&gt; },
      { binding: &lt;/span&gt;'expenses', name: 'Expenses'&lt;span&gt; },
      { binding: &lt;/span&gt;'downloads', name: 'Downloads'&lt;span&gt; }
    ]
  })
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; create a grid to show the data&lt;/span&gt;
  &lt;span&gt;var&lt;/span&gt; theGrid = &lt;span&gt;new&lt;/span&gt; wijmo.grid.FlexGrid('#theGrid'&lt;span&gt;, {
      itemsSource: data
  })
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; create some random data&lt;/span&gt;
  &lt;span&gt;function&lt;/span&gt;&lt;span&gt; getData() {
      &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; countries = 'US,Germany,UK,Japan,Italy,Greece'.split(','&lt;span&gt;),
        data &lt;/span&gt;=&lt;span&gt; [];
      &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; i = 0; i &amp;lt; countries.length; i++&lt;span&gt;) {
        data.push({
          country: countries[i],
          sales: Math.random() &lt;/span&gt;* 10000&lt;span&gt;,
          expenses: Math.random() &lt;/span&gt;* 5000&lt;span&gt;,
          downloads: Math.round(Math.random() &lt;/span&gt;* 20000&lt;span&gt;),
        });
      }
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; data;
  }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p align=&quot;left&quot;&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111207240-16943961.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Echarts 是网页的数据可视化方面的一个非常有用的库。使用 Echarts，开发者可以创建直观的、可自定义的交互式图表，让数据的展示和分析变得十分容易。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;由于 Echarts 是用普通的 JavaScript 编写的，所以 Echarts 不存在其它图表库存在的无法无缝迁移的问题。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;同时，Echarts 也提供了很多官方文档供用户查看。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;使用 npm 可以很容易的完成 Echarts 的安装：&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;npm install echarts --save &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Echarts 绘制散点图代码示例：&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;68&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; dom = document.getElementById(&quot;container&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; myChart =&lt;span&gt; echarts.init(dom);
&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; app =&lt;span&gt; {};
option &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
option &lt;/span&gt;=&lt;span&gt; {
    title: {
        text: &lt;/span&gt;'Large-scale scatterplot'&lt;span&gt;
    },
    tooltip : {
        trigger: &lt;/span&gt;'axis'&lt;span&gt;,
        showDelay : &lt;/span&gt;0&lt;span&gt;,
        axisPointer:{
            show: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
            type : &lt;/span&gt;'cross'&lt;span&gt;,
            lineStyle: {
                type : &lt;/span&gt;'dashed'&lt;span&gt;,
                width : &lt;/span&gt;1&lt;span&gt;
            }
        },
        zlevel: &lt;/span&gt;1&lt;span&gt;
    },
    legend: {
        data:[&lt;/span&gt;'sin','cos'&lt;span&gt;]
    },
    toolbox: {
        show : &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
        feature : {
            mark : {show: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;},
            dataZoom : {show: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;},
            dataView : {show: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;, readOnly: &lt;span&gt;false&lt;/span&gt;&lt;span&gt;},
            restore : {show: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;},
            saveAsImage : {show: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;}
        }
    },
    xAxis : [
        {
            type : &lt;/span&gt;'value'&lt;span&gt;,
            scale:&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;
        }
    ],
    yAxis : [
        {
            type : &lt;/span&gt;'value'&lt;span&gt;,
            scale:&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;
        }
    ],
    series : [
        {
            name:&lt;/span&gt;'sin'&lt;span&gt;,
            type:&lt;/span&gt;'scatter'&lt;span&gt;,
            large: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
            symbolSize: &lt;/span&gt;3&lt;span&gt;,
            data: (&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; d =&lt;span&gt; [];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; len = 10000&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; x = 0&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (len--&lt;span&gt;) {
                    x &lt;/span&gt;= (Math.random() * 10).toFixed(3) - 0&lt;span&gt;;
                    d.push([
                        x,
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Math.random() * 10&lt;/span&gt;
                        (Math.sin(x) - x * (len % 2 ? 0.1 : -0.1) * Math.random()).toFixed(3) - 0&lt;span&gt;
                    ]);
                }
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;console.log(d)&lt;/span&gt;
                &lt;span&gt;return&lt;/span&gt;&lt;span&gt; d;
            })()
        },
        {
            name:&lt;/span&gt;'cos'&lt;span&gt;,
            type:&lt;/span&gt;'scatter'&lt;span&gt;,
            large: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
            symbolSize: &lt;/span&gt;2&lt;span&gt;,
            data: (&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; d =&lt;span&gt; [];
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; len = 20000&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; x = 0&lt;span&gt;;
                &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (len--&lt;span&gt;) {
                    x &lt;/span&gt;= (Math.random() * 10).toFixed(3) - 0&lt;span&gt;;
                    d.push([
                        x,
                        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Math.random() * 10&lt;/span&gt;
                        (Math.cos(x) - x * (len % 2 ? 0.1 : -0.1) * Math.random()).toFixed(3) - 0&lt;span&gt;
                    ]);
                }
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;console.log(d)&lt;/span&gt;
                &lt;span&gt;return&lt;/span&gt;&lt;span&gt; d;
            })()
        }
    ]
};
;
&lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (option &amp;amp;&amp;amp; &lt;span&gt;typeof&lt;/span&gt; option === &quot;object&quot;&lt;span&gt;) {
    myChart.setOption(option, &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p align=&quot;left&quot;&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111338600-1137463277.png&quot; alt=&quot;&quot; width=&quot;690&quot; height=&quot;348&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;NVD3 是由 Mike Bostock 撰写的基于 D3 的 JavaScript 库。NVD3 允许用户在 Web 应用程序中创建美观的、可复用的图表。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;NVD3 具有很强大的图表功能，能够很方便的创建箱形图、旭日形和烛台图等。如果用户想在 JavaScript 图表库中用到大量的能力，推荐试用 NVD3&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;NVD3 图表库的速度有时可能会成为一个问题，与 &lt;a href=&quot;https://github.com/wilsonpage/fastdom&quot; target=&quot;_blank&quot;&gt;Fastdom&lt;/a&gt; 安装配合使用，速度会更快。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;NVD3 绘制简单的折线图代码示例：&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;54&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;These lines are all chart setup.  Pick and choose which chart features you want to utilize. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
nv.addGraph(&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;() {
  &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; chart =&lt;span&gt; nv.models.lineChart()
                .margin({left: &lt;/span&gt;100})  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Adjust chart margins to give the x-axis some breathing room.&lt;/span&gt;
                .useInteractiveGuideline(&lt;span&gt;true&lt;/span&gt;)  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;We want nice looking tooltips and a guideline!&lt;/span&gt;
                .transitionDuration(350)  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;how fast do you want the lines to transition?&lt;/span&gt;
                .showLegend(&lt;span&gt;true&lt;/span&gt;)       &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Show the legend, allowing users to turn on/off line series.&lt;/span&gt;
                .showYAxis(&lt;span&gt;true&lt;/span&gt;)        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Show the y-axis&lt;/span&gt;
                .showXAxis(&lt;span&gt;true&lt;/span&gt;)        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Show the x-axis&lt;/span&gt;
&lt;span&gt;  ;

  chart.xAxis     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Chart x-axis settings&lt;/span&gt;
      .axisLabel('Time (ms)'&lt;span&gt;)
      .tickFormat(d3.format(&lt;/span&gt;',r'&lt;span&gt;));

  chart.yAxis     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Chart y-axis settings&lt;/span&gt;
      .axisLabel('Voltage (v)'&lt;span&gt;)
      .tickFormat(d3.format(&lt;/span&gt;'.02f'&lt;span&gt;));

  &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; Done setting the chart up? Time to render it!&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
  &lt;span&gt;var&lt;/span&gt; myData = sinAndCos();   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;You need data...&lt;/span&gt;
&lt;span&gt;
  d3.select(&lt;/span&gt;'#chart svg')    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Select the &amp;lt;svg&amp;gt; element you want to render the chart in.   &lt;/span&gt;
      .datum(myData)         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Populate the &amp;lt;svg&amp;gt; element with chart data...&lt;/span&gt;
      .call(chart);          &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Finally, render the chart!&lt;/span&gt;

  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Update the chart when window resizes.&lt;/span&gt;
  nv.utils.windowResize(&lt;span&gt;function&lt;/span&gt;&lt;span&gt;() { chart.update() });
  &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; chart;
});
&lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*************************************
 * Simple test data generator
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; sinAndCos() {
  &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; sin = [],sin2 =&lt;span&gt; [],
      cos &lt;/span&gt;=&lt;span&gt; [];

  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Data is represented as an array of {x,y} pairs.&lt;/span&gt;
  &lt;span&gt;for&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; i = 0; i &amp;lt; 100; i++&lt;span&gt;) {
    sin.push({x: i, y: Math.sin(i&lt;/span&gt;/10)});
    sin2.push({x: i, y: Math.sin(i/10) *0.25 + 0.5});
    cos.push({x: i, y: .5 * Math.cos(i/10)});
&lt;span&gt;  }

  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Line chart data should be sent as an array of series objects.&lt;/span&gt;
  &lt;span&gt;return&lt;/span&gt;&lt;span&gt; [
    {
      values: sin,      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;values - represents the array of {x,y} data points&lt;/span&gt;
      key: 'Sine Wave', &lt;span&gt;//&lt;/span&gt;&lt;span&gt;key  - the name of the series.&lt;/span&gt;
      color: '#ff7f0e'  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;color - optional: choose your own line color.&lt;/span&gt;
&lt;span&gt;    },
    {
      values: cos,
      key: &lt;/span&gt;'Cosine Wave'&lt;span&gt;,
      color: &lt;/span&gt;'#2ca02c'&lt;span&gt;
    },
    {
      values: sin2,
      key: &lt;/span&gt;'Another sine wave'&lt;span&gt;,
      color: &lt;/span&gt;'#7777ff'&lt;span&gt;,
      area: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;      &lt;span&gt;//&lt;/span&gt;&lt;span&gt;area - set to true if you want this line to turn into a filled area chart.&lt;/span&gt;
&lt;span&gt;    }
  ];
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p align=&quot;left&quot;&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111259912-1757290693.png&quot; alt=&quot;&quot; width=&quot;654&quot; height=&quot;254&quot;/&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;与 TauCharts 相同，C3.js 也是一个非常有效的基于 D3 的图表可视化库。另外，C3.js 允许用户创建可定制的具有个人风格的类。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;C3.js 看起来是个比较难的库，但是一旦掌握了 C3.js 技巧，就能得心应手的使用了。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;有了 C3.js 图表库，即使在第一次渲染之后，用户也可以通过创建回调来更新图表。C3.js 也允许用户为自己的 Web 应用程序创建可复用的图表，从而减少工作量。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;使用 npm 安装 C3.js 图表库：&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;npm install c3 &lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;C3.js 绘制组合图的代码示例：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;84&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; chart =&lt;span&gt; c3.generate({
    data: {
        columns: [
            [&lt;/span&gt;'data1', 30, 20, 50, 40, 60, 50&lt;span&gt;],
            [&lt;/span&gt;'data2', 200, 130, 90, 240, 130, 220&lt;span&gt;],
            [&lt;/span&gt;'data3', 300, 200, 160, 400, 250, 250&lt;span&gt;],
            [&lt;/span&gt;'data4', 200, 130, 90, 240, 130, 220&lt;span&gt;],
            [&lt;/span&gt;'data5', 130, 120, 150, 140, 160, 150&lt;span&gt;],
            [&lt;/span&gt;'data6', 90, 70, 20, 50, 60, 120&lt;span&gt;],
        ],
        type: &lt;/span&gt;'bar'&lt;span&gt;,
        types: {
            data3: &lt;/span&gt;'spline'&lt;span&gt;,
            data4: &lt;/span&gt;'line'&lt;span&gt;,
            data6: &lt;/span&gt;'area'&lt;span&gt;,
        },
        groups: [
            [&lt;/span&gt;'data1','data2'&lt;span&gt;]
        ]
    }
});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p align=&quot;left&quot;&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111432943-1875304060.png&quot; alt=&quot;&quot; width=&quot;648&quot; height=&quot;278&quot;/&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;TauCharts 是最灵活的 JavaScript 图表库之一。它是基于 D3 创建的，是一个以数据为中心的 JavaScript 图表库，可以改进数据可视化的效果。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;TauCharts 十分灵活，访问其 API 也十分轻松。TauCharts 为用户提供了无缝映射和可视化的数据，使用 TauCharts 能够设计出十分美观的数据界面。同时，TauCharts 也和易于学习。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;通过 npm 安装 TauCharts：&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;npm install taucharts&lt;strong&gt; &lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;TauCharts 绘制水平线的代码示例：&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;98&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; defData =&lt;span&gt; [
        {&lt;/span&gt;&quot;team&quot;: &quot;d&quot;, &quot;cycleTime&quot;: 1, &quot;effort&quot;: 1, &quot;count&quot;: 1, &quot;priority&quot;: &quot;low&quot;&lt;span&gt;}, {
            &lt;/span&gt;&quot;team&quot;: &quot;d&quot;&lt;span&gt;,
            &lt;/span&gt;&quot;cycleTime&quot;: 2&lt;span&gt;,
            &lt;/span&gt;&quot;effort&quot;: 2&lt;span&gt;,
            &lt;/span&gt;&quot;count&quot;: 5&lt;span&gt;,
            &lt;/span&gt;&quot;priority&quot;: &quot;low&quot;&lt;span&gt;
        }, {&lt;/span&gt;&quot;team&quot;: &quot;d&quot;, &quot;cycleTime&quot;: 3, &quot;effort&quot;: 3, &quot;count&quot;: 8, &quot;priority&quot;: &quot;medium&quot;&lt;span&gt;}, {
            &lt;/span&gt;&quot;team&quot;: &quot;d&quot;&lt;span&gt;,
            &lt;/span&gt;&quot;cycleTime&quot;: 4&lt;span&gt;,
            &lt;/span&gt;&quot;effort&quot;: 4&lt;span&gt;,
            &lt;/span&gt;&quot;count&quot;: 3&lt;span&gt;,
            &lt;/span&gt;&quot;priority&quot;: &quot;high&quot;&lt;span&gt;
        }, {&lt;/span&gt;&quot;team&quot;: &quot;l&quot;, &quot;cycleTime&quot;: 2, &quot;effort&quot;: 1, &quot;count&quot;: 1, &quot;priority&quot;: &quot;low&quot;&lt;span&gt;}, {
            &lt;/span&gt;&quot;team&quot;: &quot;l&quot;&lt;span&gt;,
            &lt;/span&gt;&quot;cycleTime&quot;: 3&lt;span&gt;,
            &lt;/span&gt;&quot;effort&quot;: 2&lt;span&gt;,
            &lt;/span&gt;&quot;count&quot;: 5&lt;span&gt;,
            &lt;/span&gt;&quot;priority&quot;: &quot;low&quot;&lt;span&gt;
        }, {&lt;/span&gt;&quot;team&quot;: &quot;l&quot;, &quot;cycleTime&quot;: 4, &quot;effort&quot;: 3, &quot;count&quot;: 8, &quot;priority&quot;: &quot;medium&quot;&lt;span&gt;}, {
            &lt;/span&gt;&quot;team&quot;: &quot;l&quot;&lt;span&gt;,
            &lt;/span&gt;&quot;cycleTime&quot;: 5&lt;span&gt;,
            &lt;/span&gt;&quot;effort&quot;: 4&lt;span&gt;,
            &lt;/span&gt;&quot;count&quot;: 3&lt;span&gt;,
            &lt;/span&gt;&quot;priority&quot;: &quot;high&quot;&lt;span&gt;
        },
        {&lt;/span&gt;&quot;team&quot;: &quot;k&quot;, &quot;cycleTime&quot;: 2, &quot;effort&quot;: 4, &quot;count&quot;: 1, &quot;priority&quot;: &quot;low&quot;&lt;span&gt;}, {
            &lt;/span&gt;&quot;team&quot;: &quot;k&quot;&lt;span&gt;,
            &lt;/span&gt;&quot;cycleTime&quot;: 3&lt;span&gt;,
            &lt;/span&gt;&quot;effort&quot;: 5&lt;span&gt;,
            &lt;/span&gt;&quot;count&quot;: 5&lt;span&gt;,
            &lt;/span&gt;&quot;priority&quot;: &quot;low&quot;&lt;span&gt;
        }, {&lt;/span&gt;&quot;team&quot;: &quot;k&quot;, &quot;cycleTime&quot;: 4, &quot;effort&quot;: 6, &quot;count&quot;: 8, &quot;priority&quot;: &quot;medium&quot;&lt;span&gt;}, {
            &lt;/span&gt;&quot;team&quot;: &quot;k&quot;&lt;span&gt;,
            &lt;/span&gt;&quot;cycleTime&quot;: 5&lt;span&gt;,
            &lt;/span&gt;&quot;effort&quot;: 8&lt;span&gt;,
            &lt;/span&gt;&quot;count&quot;: 3&lt;span&gt;,
            &lt;/span&gt;&quot;priority&quot;: &quot;high&quot;&lt;span&gt;
        }];
&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; chart = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; tauCharts.Chart({
            data: defData,
            type: &lt;/span&gt;'horizontalBar'&lt;span&gt;,           
            x: &lt;/span&gt;'effort'&lt;span&gt;,
            y: &lt;/span&gt;'team'&lt;span&gt;,
            color:&lt;/span&gt;'priority'&lt;span&gt;
        });
chart.renderTo(&lt;/span&gt;'#bar');
&lt;/pre&gt;&lt;/div&gt;


&lt;p align=&quot;left&quot;&gt;&lt;span&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/139239/201712/139239-20171219111529256-136607271.png&quot; alt=&quot;&quot; width=&quot;473&quot; height=&quot;443&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;ReCharts 是一个使用 React 构建的，基于 D3 的图表库。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;使用 ReCharts，用户可以在 React Web 应用程序中无缝地编写图表。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Recharts 非常轻巧，并使用 SVG 元素来创建很奇特的图表。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;使用 npm 安装 Recharts：&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;npm install recharts &lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Recharts 没有冗长的文档，它很直接。当你遇到困难时，使用 Recharts 可以很容易找到解决方案。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Recharts 创建自定义内容树图的代码示例：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;167&quot;&gt;
&lt;pre&gt;
const {Treemap} =&lt;span&gt; Recharts;

const data &lt;/span&gt;=&lt;span&gt; [
          {
            name: &lt;/span&gt;'axis'&lt;span&gt;,
            children: [
              { name: &lt;/span&gt;'Axes', size: 1302&lt;span&gt; },
              { name: &lt;/span&gt;'Axis', size: 24593&lt;span&gt; },
              { name: &lt;/span&gt;'AxisGridLine', size: 652&lt;span&gt; },
              { name: &lt;/span&gt;'AxisLabel', size: 636&lt;span&gt; },
              { name: &lt;/span&gt;'CartesianAxes', size: 6703&lt;span&gt; },
            ],
          },
          {
            name: &lt;/span&gt;'controls'&lt;span&gt;,
            children: [
              { name: &lt;/span&gt;'AnchorControl', size: 2138&lt;span&gt; },
              { name: &lt;/span&gt;'ClickControl', size: 3824&lt;span&gt; },
              { name: &lt;/span&gt;'Control', size: 1353&lt;span&gt; },
              { name: &lt;/span&gt;'ControlList', size: 4665&lt;span&gt; },
              { name: &lt;/span&gt;'DragControl', size: 2649&lt;span&gt; },
              { name: &lt;/span&gt;'ExpandControl', size: 2832&lt;span&gt; },
              { name: &lt;/span&gt;'HoverControl', size: 4896&lt;span&gt; },
              { name: &lt;/span&gt;'IControl', size: 763&lt;span&gt; },
              { name: &lt;/span&gt;'PanZoomControl', size: 5222&lt;span&gt; },
              { name: &lt;/span&gt;'SelectionControl', size: 7862&lt;span&gt; },
              { name: &lt;/span&gt;'TooltipControl', size: 8435&lt;span&gt; },
            ],
          },
          {
            name: &lt;/span&gt;'data'&lt;span&gt;,
            children: [
              { name: &lt;/span&gt;'Data', size: 20544&lt;span&gt; },
              { name: &lt;/span&gt;'DataList', size: 19788&lt;span&gt; },
              { name: &lt;/span&gt;'DataSprite', size: 10349&lt;span&gt; },
              { name: &lt;/span&gt;'EdgeSprite', size: 3301&lt;span&gt; },
              { name: &lt;/span&gt;'NodeSprite', size: 19382&lt;span&gt; },
              {
                name: &lt;/span&gt;'render'&lt;span&gt;,
                children: [
                  { name: &lt;/span&gt;'ArrowType', size: 698&lt;span&gt; },
                  { name: &lt;/span&gt;'EdgeRenderer', size: 5569&lt;span&gt; },
                  { name: &lt;/span&gt;'IRenderer', size: 353&lt;span&gt; },
                  { name: &lt;/span&gt;'ShapeRenderer', size: 2247&lt;span&gt; },
                ],
              },
              { name: &lt;/span&gt;'ScaleBinding', size: 11275&lt;span&gt; },
              { name: &lt;/span&gt;'Tree', size: 7147&lt;span&gt; },
              { name: &lt;/span&gt;'TreeBuilder', size: 9930&lt;span&gt; },
            ],
          },&lt;/span&gt;&lt;span&gt;
              {
                name: &lt;/span&gt;'layout'&lt;span&gt;,
                children: [
                  { name: &lt;/span&gt;'AxisLayout', size: 6725&lt;span&gt; },
                  { name: &lt;/span&gt;'BundledEdgeRouter', size: 3727&lt;span&gt; },
                  { name: &lt;/span&gt;'CircleLayout', size: 9317&lt;span&gt; },
                  { name: &lt;/span&gt;'CirclePackingLayout', size: 12003&lt;span&gt; },
                  { name: &lt;/span&gt;'DendrogramLayout', size: 4853&lt;span&gt; },
                  { name: &lt;/span&gt;'ForceDirectedLayout', size: 8411&lt;span&gt; },
                  { name: &lt;/span&gt;'IcicleTreeLayout', size: 4864&lt;span&gt; },
                  { name: &lt;/span&gt;'IndentedTreeLayout', size: 3174&lt;span&gt; },
                  { name: &lt;/span&gt;'Layout', size: 7881&lt;span&gt; },
                  { name: &lt;/span&gt;'NodeLinkTreeLayout', size: 12870&lt;span&gt; },
                  { name: &lt;/span&gt;'PieLayout', size: 2728&lt;span&gt; },
                  { name: &lt;/span&gt;'RadialTreeLayout', size: 12348&lt;span&gt; },
                  { name: &lt;/span&gt;'RandomLayout', size: 870&lt;span&gt; },
                  { name: &lt;/span&gt;'StackedAreaLayout', size: 9121&lt;span&gt; },
                  { name: &lt;/span&gt;'TreeMapLayout', size: 9191&lt;span&gt; },
                ],
              },
              { name: &lt;/span&gt;'Operator', size: 2490&lt;span&gt; },
              { name: &lt;/span&gt;'OperatorList', size: 5248&lt;span&gt; },
              { name: &lt;/span&gt;'OperatorSequence', size: 4190&lt;span&gt; },
              { name: &lt;/span&gt;'OperatorSwitch', size: 2581&lt;span&gt; },
              { name: &lt;/span&gt;'SortOperator', size: 2023&lt;span&gt; },
            ],
          }
        ];
const COLORS &lt;/span&gt;= ['#8889DD', '#9597E4', '#8DC77B', '#A5D297', '#E2CF45', '#F8C12D'&lt;span&gt;];
const CustomizedContent &lt;/span&gt;=&lt;span&gt; React.createClass({
  render() {
    const { root, depth, x, y, width, height, index, payload, colors, rank, name } &lt;/span&gt;= &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.props;
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; (
      &lt;/span&gt;&amp;lt;g&amp;gt;
        &amp;lt;&lt;span&gt;rect
          x&lt;/span&gt;=&lt;span&gt;{x}
          y&lt;/span&gt;=&lt;span&gt;{y}
          width&lt;/span&gt;=&lt;span&gt;{width}
          height&lt;/span&gt;=&lt;span&gt;{height}
          style&lt;/span&gt;=&lt;span&gt;{{
            fill: depth &lt;/span&gt;&amp;lt; 2 ? colors[Math.floor(index / root.children.length * 6)] : 'none'&lt;span&gt;,
            stroke: &lt;/span&gt;'#fff'&lt;span&gt;,
            strokeWidth: &lt;/span&gt;2 / (depth + 1e-10&lt;span&gt;),
            strokeOpacity: &lt;/span&gt;1 / (depth + 1e-10&lt;span&gt;),
          }}
        &lt;/span&gt;/&amp;gt;
&lt;span&gt;        {
          depth &lt;/span&gt;=== 1 ?
          &amp;lt;&lt;span&gt;text
            x&lt;/span&gt;={x + width / 2&lt;span&gt;}
            y&lt;/span&gt;={y + height / 2 + 7&lt;span&gt;}
            textAnchor&lt;/span&gt;=&quot;middle&quot;&lt;span&gt;
            fill&lt;/span&gt;=&quot;#fff&quot;&lt;span&gt;
            fontSize&lt;/span&gt;={14&lt;span&gt;}
          &lt;/span&gt;&amp;gt;&lt;span&gt;
            {name}
          &lt;/span&gt;&amp;lt;/text&amp;gt;
          : &lt;span&gt;null&lt;/span&gt;&lt;span&gt;
        }
        {
          depth &lt;/span&gt;=== 1 ?
          &amp;lt;&lt;span&gt;text
            x&lt;/span&gt;={x + 4&lt;span&gt;}
            y&lt;/span&gt;={y + 18&lt;span&gt;}
            fill&lt;/span&gt;=&quot;#fff&quot;&lt;span&gt;
            fontSize&lt;/span&gt;={16&lt;span&gt;}
            fillOpacity&lt;/span&gt;={0.9&lt;span&gt;}
          &lt;/span&gt;&amp;gt;&lt;span&gt;
            {index &lt;/span&gt;+ 1&lt;span&gt;}
          &lt;/span&gt;&amp;lt;/text&amp;gt;
          : &lt;span&gt;null&lt;/span&gt;&lt;span&gt;
        }
      &lt;/span&gt;&amp;lt;/g&amp;gt;
&lt;span&gt;    );
  }
});

const SimpleTreemap &lt;/span&gt;=&lt;span&gt; React.createClass({
    render () {
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; (
        &lt;/span&gt;&amp;lt;&lt;span&gt;Treemap
          width&lt;/span&gt;={400&lt;span&gt;}
        height&lt;/span&gt;={200&lt;span&gt;}
        data&lt;/span&gt;=&lt;span&gt;{data}
        dataKey&lt;/span&gt;=&quot;size&quot;&lt;span&gt;
        ratio&lt;/span&gt;={4/3}
        stroke=&quot;#fff&quot;&lt;span&gt;
        fill&lt;/span&gt;=&quot;#8884d8&quot;&lt;span&gt;
        content&lt;/span&gt;={&amp;lt;CustomizedContent colors={COLORS}/&amp;gt;}
      /&amp;gt;
&lt;span&gt;    );
  }
})

ReactDOM.render(
  &lt;/span&gt;&amp;lt;SimpleTreemap /&amp;gt;,
  document.getElementById('container'&lt;span&gt;)
);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;



&lt;p align=&quot;left&quot;&gt;&lt;span&gt;目前，jQuery 已经成为 Web 开发人员非常重要的工具。有了 Flot.js，前端设计也变得更加容易。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Flot.js 是 JavaScript 库中较为古老的图表库之一。尽管如此，Flot.js 也不会因为绘制折线图、饼图、条形图、面积图、甚至堆叠图表而降低其性能。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Flot.js 有一个很完善的文档。当用户遇到困难时，可以很容易地找到解决办法。Flot.js 也支持旧版本的浏览器。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;可以选择不使用 npm 来安装 Flot.js，而是在 HTML5 中包含 jQuery 和 JavaScript 文件。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;Flot.js 的基本用法代码示例：&lt;/span&gt; &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;53&quot;&gt;
&lt;pre&gt;
$(&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; d1 =&lt;span&gt; [];
    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; i = 0; i &amp;lt; 14; i += 0.5&lt;span&gt;)
        d1.push([i, Math.sin(i)]);
 
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; d2 = [[0, 3], [4, 8], [8, 5], [9, 13&lt;span&gt;]];
 
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; a null signifies separate line segments&lt;/span&gt;
    &lt;span&gt;var&lt;/span&gt; d3 = [[0, 12], [7, 12], &lt;span&gt;null&lt;/span&gt;, [7, 2.5], [12, 2.5&lt;span&gt;]];
    
    $.plot($(&lt;/span&gt;&quot;#placeholder&quot;&lt;span&gt;), [ d1, d2, d3 ]);
});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;

&lt;p align=&quot;left&quot;&gt;&lt;span&gt;以上介绍的 JavaScript 库都是高质量的图表库。但是在学习这些库的过程中，可能会因为学习曲线陡峭或是缺乏学习资料而遇到困难，一种很好的方案是将这些库结合起来使用。最后也欢迎大家补充更多的 JavaScript 图表库。&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;参考文章：https://dzone.com/articles/top-9-javascript-charting-libraries&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span&gt;转载请注明出自：葡萄城控件&lt;/span&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt; &lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&lt;span data-mce-=&quot;&quot;&gt;&lt;strong&gt;相关阅读：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/powertoolsteam/p/how-javascript-works-memory-management.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;JavaScript中的内存泄漏以及如何处理&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;http://www.cnblogs.com/powertoolsteam/p/top_10_JavaScript_edit.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;Top 10 JavaScript编辑器，你在用哪个？&lt;/span&gt;&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;http://www.cnblogs.com/powertoolsteam/p/shorthand-javascript.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;JavaScript 开发人员需要知道的简写技巧&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt; &lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 03:55:00 +0000</pubDate>
<dc:creator>葡萄城控件技术团队</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/powertoolsteam/p/top-9-javascript-charting-libraries.html</dc:identifier>
</item>
<item>
<title>iOS 断点上传文件 - YourSimple</title>
<link>http://www.cnblogs.com/chao8888/p/8058457.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/chao8888/p/8058457.html</guid>
<description>&lt;p&gt;项目开发中，有时候我们需要将本地的文件上传到服务器，简单的几张图片还好，但是针对iPhone里面的视频文件进行上传，为了用户体验，我们有必要实现断点上传。其实也不是真的断点，这里我们只是模仿断点机制。&lt;/p&gt;
&lt;h2 id=&quot;需求&quot;&gt;需求&lt;/h2&gt;
&lt;hr/&gt;&lt;p&gt;既然需要上传文件，那最好要有一个上传列表界面，方面用户对上传中的文件进行实时管理。这里我简单搭建了一个上传列表界面，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/912458/201712/912458-20171218170114678-351043689.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;该界面实现的功能：左滑删除，单击暂停、取消，清空列表。退出该界面可后台上传，暂停再次开始或则app被kill掉依旧支持续传。上传完成、删除正在上传文件、清空上传列表都会将本地缓存的文件删除。&lt;/p&gt;
&lt;h2 id=&quot;实现方法&quot;&gt;实现方法&lt;/h2&gt;
&lt;p&gt;客户端把大文件切片，服务器接收完所有片后拼接成一个完整文件。&lt;/p&gt;
&lt;h3 id=&quot;缓存文件&quot;&gt;1.缓存文件&lt;/h3&gt;
&lt;hr/&gt;&lt;p&gt;录制视频或者选择系统相册中的视频后需要写入文件到沙盒。因为如果不缓存，只是通过路径来获取视频，手机中的视频可能被删除。如果是选择系统自带压缩的话，文件只是存在了系统的某个cache文件夹下，系统可能会清理该文件件，那么下次再次根据路径获取视频的时候，就找不到了。&lt;br/&gt;缓存文件就不再细说，在/Library/Caches 目录下面新建一个文件夹Video用来缓存视频文件。之前看到用的文章存到了Documents文件夹下，我是不建议的，之所以在这个目录下面，是因为系统不会清理这个文件夹，而且在进行iCloud备份时也不会备份该文件夹下的内容。如果把一个很大的视频文件放到Documents文件夹下，必然给用户带来不便。还有一点需要注意，正如上面所描述，上传完成、删除正在上传文件、清空上传列表都必须将本地缓存的文件删除。不然会导致app占用系统太多的空间，用户看到后直接把你的app卸载了。&lt;br/&gt;为了防止重名，我在文件名中拼上了时间戳。&lt;/p&gt;
&lt;pre class=&quot;objc&quot;&gt;
&lt;code&gt;
#pragma mark- write cache file
- (NSString *)writeToCacheVideo:(NSData *)data appendNameString:(NSString *)name {
    
    NSString *cachesDirectory = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES).firstObject;
    NSString *createPath =  [cachesDirectory stringByAppendingPathComponent:@&quot;video&quot;];
    NSFileManager *fileManager = [[NSFileManager alloc] init];
    [fileManager createDirectoryAtPath:createPath withIntermediateDirectories:YES attributes:nil error:nil];
    NSString *path = [cachesDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@&quot;/video/%.0f%@&quot;,[NSDate date].timeIntervalSince1970,name]];
    [data writeToFile:path atomically:NO];
    
    return path;
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这里随便说下沙盒目录下几个文件夹的作用。&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Documents：Only documents and other data that is user-generated, or that cannot otherwise be recreated by your application, should be stored in the/Documents directory and will be automatically backed up by iCloud. //用户生成的数据，程序不可重新生成的数据，会通过iCloud备份&lt;/li&gt;
&lt;li&gt;Library：Data that can be downloaded again or regenerated should be stored in the/Library/Caches directory. Examples of files you should put in the Caches directory include database cache files and downloadable content, such as that used by magazine, newspaper, and map applications. // 可被下载的数据&lt;/li&gt;
&lt;li&gt;tmp: Data that is used only temporarily should be stored in the/tmp directory. Although these files are not backed up to iCloud, remember to delete those files when you are done with them so that they do not continue to consume space on the user’s device. // 临时数据&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;切片&quot;&gt;2.切片&lt;/h3&gt;
&lt;hr/&gt;&lt;p&gt;切片主要用到NSFileHandle这个类，其实就是通过移动文件指针来读取某段内容。&lt;/p&gt;
&lt;pre class=&quot;objc&quot;&gt;
&lt;code&gt;// model.filePath 文件路径
NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:model.filePath];

// 移动文件指针
// kSuperUploadBlockSize 上传切片大小  这里是1M， i指已上传片数(i = model.uploadedCount)
[handle seekToFileOffset:kSuperUploadBlockSize * i];

//读取数据
NSData *blockData = [handle readDataOfLength:kSuperUploadBlockSize];&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这里我将大文件切成最小1M的小文件来上传。这边使用到一个Model，该数据模型主要存放上传列表中所需要的一些基本数据。因为我们每次上传完一片，需要更新UI。由于这边需要支持断点续传，因此需要记录文件的进度值，已上传的片数我们需要保存下来。保存上传文件路径和文件进度可以使用数据库或则plist文件等方式，这边需要保存的数据不是很多，所以我直接保存在了偏好设置中。每片文件上传成功，设置该模型已上传片数，并且更新本地文件进度值。&lt;/p&gt;
&lt;p&gt;我们可以大致看下所用到的Model&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;YJTUploadManager.h&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;objc&quot;&gt;
&lt;code&gt;
#import &amp;lt;Foundation/Foundation.h&amp;gt;

@interface YJTDocUploadModel : NSObject

// 方便操作(暂停取消)正在上传的文件
@property (nonatomic, strong) NSURLSessionDataTask *dataTask;
// 总大小
@property (nonatomic, assign) int64_t totalSize;
// 总片数
@property (nonatomic, assign) NSInteger totalCount;
// 已上传片数
@property (nonatomic, assign) NSInteger uploadedCount;
// 上传所需参数
@property (nonatomic, copy) NSString *upToken;
// 上传状态标识, 记录是上传中还是暂停
@property (nonatomic, assign) BOOL isRunning;
// 缓存文件路径
@property (nonatomic, copy) NSString *filePath;
// 用来保存文件名使用
@property (nonatomic, copy) NSString *lastPathComponent;

// 以下属性用于给上传列表界面赋值
@property (nonatomic, assign) NSInteger docType;
@property (nonatomic, copy) NSString *title;
@property (nonatomic, copy) NSString *progressLableText;
@property (nonatomic, assign) CGFloat uploadPercent;
@property (nonatomic, copy) void(^progressBlock)(CGFloat uploadPersent,NSString *progressLableText);

// 保存上传成功后调用保存接口的参数
@property (nonatomic, strong) NSMutableDictionary *parameters;

@end
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;YJTUploadManager.m&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;objc&quot;&gt;
&lt;code&gt;
#import &quot;YJTDocUploadModel.h&quot;

@implementation YJTDocUploadModel

// 上传完毕后更新模型相关数据
- (void)setUploadedCount:(NSInteger)uploadedCount {
    
    _uploadedCount = uploadedCount;
    
    self.uploadPercent = (CGFloat)uploadedCount / self.totalCount;
    self.progressLableText = [NSString stringWithFormat:@&quot;%.2fMB/%.2fMB&quot;,self.totalSize * self.uploadPercent /1024.0/1024.0,self.totalSize/1024.0/1024.0];
    if (self.progressBlock) {
        self.progressBlock(self.uploadPercent,self.progressLableText);
    }
    // 刷新本地缓存
    [[YJTUploadManager shareUploadManager] refreshCaches];
    
}

@end
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;上传&quot;&gt;3.上传&lt;/h3&gt;
&lt;hr/&gt;&lt;p&gt;上传可以采用同步和异步执行。这里不太建议通过for遍历来开太多的线程上传，开线程是耗内存的。这边我是通过同步的方式。也就是采用递归，一片文件上传完毕后再上传下一片文件，如果失败，再次上传。有一点需要强调，最后一片的大小一般都比会小于预设的最小分割值。另外，如果分的片段大小大于文件的总大小也可能会出问题，客户端和服务器沟通好规则处理即可。&lt;br/&gt;关于上传进度，可以粗略计算。也可使用NSURLSessionDataTask的countOfBytesSent实时监控。其实NSURLSessionTask在iOS11以后还提供了progress属性。附上核心代码提供参考。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;首次调用上传接口&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;objc&quot;&gt;
&lt;code&gt;#pragma mark- first upload 断点

// 上传初始化
- (void)uploadData:(NSData *)data withModel:(YJTDocUploadModel *)model {
    
    // 计算片数
    NSInteger count = data.length / (kSuperUploadBlockSize);
    NSInteger blockCount = data.length % (kSuperUploadBlockSize) == 0 ? count : count + 1;
    
    // 给model赋值
    model.filePath = [self writeToCacheVideo:data appendNameString:model.lastPathComponent];
    model.totalCount = blockCount;
    model.totalSize = data.length;
    model.uploadedCount = 0;
    model.isRunning = YES;
    
    // 上传所需参数
    NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
    
    parameters[@&quot;sequenceNo&quot;] = @0;
    parameters[@&quot;blockSize&quot;] = @(kSuperUploadBlockSize);
    parameters[@&quot;totFileSize&quot;] = @(data.length);
    parameters[@&quot;suffix&quot;] = model.filePath.pathExtension;
    parameters[@&quot;token&quot;] = @&quot;&quot;;
    NSString *requestUrl = @&quot;上传接口&quot;;
    
    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];
    NSURLSessionDataTask *dataTask = [manager POST:requestUrl parameters:parameters constructingBodyWithBlock:^(id&amp;lt;AFMultipartFormData&amp;gt;  _Nonnull formData) {
        [formData appendPartWithFileData:[NSData data] name:@&quot;block&quot; fileName:model.filePath.lastPathComponent mimeType:@&quot;application/octet-stream&quot;];
        
    } success:^(NSURLSessionDataTask * _Nonnull task, id  _Nonnull responseObject) {
        
        NSDictionary *dataDict = responseObject[kRet_success_data_key];
        model.upToken = dataDict[@&quot;upToken&quot;];
        
        NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:model.filePath];
        if (handle == nil) {  return; }
        [self continueUploadWithModel:model];
        [self addUploadModel:model];
        
        [[VMProgressHUD sharedInstance] showTipTextOnly:@&quot;正在后台上传&quot; dealy:2];
        
    } failure:^(NSURLSessionDataTask * _Nonnull task, NSError * _Nonnull error) {
        [[VMProgressHUD sharedInstance] showTipTextOnly:error.localizedDescription dealy:1];
    }];
    
    model.dataTask = dataTask;

}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;核心代码&lt;/strong&gt;&lt;/p&gt;
&lt;pre class=&quot;objc&quot;&gt;
&lt;code&gt;#pragma mark- continue upload
- (void)continueUploadWithModel:(YJTDocUploadModel *)model {
    if (!model.isRunning) {
        return;
    }
    __block NSInteger i = model.uploadedCount;
    
    NSMutableDictionary *parameters = [NSMutableDictionary dictionary];
    parameters[@&quot;blockSize&quot;] = @(kSuperUploadBlockSize);
    parameters[@&quot;totFileSize&quot;] = @(model.totalSize);
    parameters[@&quot;suffix&quot;] = model.filePath.pathExtension;
    parameters[@&quot;token&quot;] = @&quot;&quot;;
    parameters[@&quot;upToken&quot;] = model.upToken;
    parameters[@&quot;crc&quot;] = @&quot;&quot;;
    parameters[@&quot;sequenceNo&quot;] = @(i + 1);
    
    NSString *requestUrl = [[Api getRootUrl] stringByAppendingString:@&quot;上传接口&quot;];
    AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];
    NSURLSessionDataTask *dataTask = [manager POST:requestUrl parameters:parameters constructingBodyWithBlock:^(id&amp;lt;AFMultipartFormData&amp;gt;  _Nonnull formData) {
        
        NSFileHandle *handle = [NSFileHandle fileHandleForReadingAtPath:model.filePath];
        [handle seekToFileOffset:kSuperUploadBlockSize * i];
        NSData *blockData = [handle readDataOfLength:kSuperUploadBlockSize];
        [formData appendPartWithFileData:blockData name:@&quot;block&quot; fileName:model.filePath.lastPathComponent mimeType:@&quot;application/octet-stream&quot;];
        
    } success:^(NSURLSessionDataTask * _Nonnull task, id  _Nonnull responseObject) {
        
        i ++;
        model.uploadedCount = i;
        NSDictionary *dataDict = responseObject[kRet_success_data_key];
        NSString *fileUrl = dataDict[@&quot;fileUrl&quot;];
        if ([fileUrl isKindOfClass:[NSString class]]) {
            [model.parameters setValue:fileUrl forKey:@&quot;url&quot;];
            // 最后所有片段上传完毕，服务器返回文件url，执行后续操作
            [self saveRequest:model];
        }else {
            if (i &amp;lt; model.totalCount) {
                [self continueUploadWithModel:model];
            }
        }
        
    } failure:^(NSURLSessionDataTask * _Nonnull task, NSError * _Nonnull error) {
        // 上传失败重试
        [self continueUploadWithModel:model];
    }];
    
    model.dataTask = dataTask;
}
&lt;/code&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 19 Dec 2017 03:26:00 +0000</pubDate>
<dc:creator>YourSimple</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/chao8888/p/8058457.html</dc:identifier>
</item>
</channel>
</rss>