<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>如何使用 Secret？- 每天5分钟玩转 Docker 容器技术（108） - CloudMan</title>
<link>http://www.cnblogs.com/CloudMan6/p/8068057.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/CloudMan6/p/8068057.html</guid>
<description>&lt;p&gt;&lt;span&gt;我们经常要向容器传递敏感信息，最常见的莫过于密码了。比如：&lt;/span&gt;&lt;/p&gt;
&lt;pre&gt;
docker run -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql
&lt;/pre&gt;
&lt;p&gt;在启动 MySQL 容器时我们通过环境变量&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;MYSQL_ROOT_PASSWORD&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;设置了 MySQL 的管理员密码。不过密码是以明文的形式写在&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;docker run&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;命令中，有潜在的安全隐患。&lt;/p&gt;
&lt;p&gt;为了解决这个问题，docker swarm 提供了 secret 机制，允许将敏感信息加密后保存到 secret 中，用户可以指定哪些容器可以使用此 secret。&lt;/p&gt;
&lt;p&gt;如果使用 secret 启动 MySQL 容器，方法是：&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot; readability=&quot;-2&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;在 swarm manager 中创建 secret&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;my_secret_data&lt;/span&gt;&lt;/code&gt;，将密码保存其中。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
echo &quot;my-secret-pw&quot; | docker secret create my_secret_data -
&lt;/pre&gt;
&lt;p&gt;&lt;img class=&quot;img-responsive&quot; title=&quot;553.png&quot; src=&quot;https://i.imgsafe.org/91/91cf32495e.png&quot; alt=&quot;553.png&quot;/&gt;&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot; start=&quot;2&quot; readability=&quot;-2&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;启动 MySQL service，并指定使用 secret&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;my_secret_data&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;pre&gt;
docker service create \&lt;br/&gt;--name mysql \&lt;br/&gt;--secret source=my_secret_data,target=mysql_root_password \&lt;br/&gt;-e MYSQL_ROOT_PASSWORD_FILE=&quot;/run/secrets/mysql_root_password&quot; \&lt;br/&gt;mysql:latest
&lt;/pre&gt;
&lt;div&gt;&lt;img class=&quot;img-responsive&quot; title=&quot;554.png&quot; src=&quot;https://i.imgsafe.org/91/91cf416803.png&quot; alt=&quot;554.png&quot;/&gt;&lt;/div&gt;

&lt;p&gt;① source 指定容器使用 secret 后，secret 会被解密并存放到容器的文件系统中，默认位置为 /run/secrets/&amp;lt;secret_name&amp;gt;。&lt;code&gt;&lt;span&gt;--secret&lt;/span&gt; &lt;span&gt;source=my_secret_data,target=mysql_root_password&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;的作用就是指定使用 secret&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;my_secret_data&lt;/span&gt;&lt;/code&gt;，然后把器解密后的内容保存到容器&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;/run/secrets/mysql_root_password&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;文件中，文件名称&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;mysql_root_password&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;由&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;target&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;指定。&lt;/p&gt;
&lt;p&gt;② 环境变量&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD_FILE&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;指定从&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;/run/secrets/mysql_root_password&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;中读取并设置 MySQL 的管理员密码。&lt;/p&gt;
&lt;p&gt;这里大家可能有这么两个疑问：&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot; readability=&quot;-1.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;问：在第一步创建 secret 时，不也是使用了明文吗？这跟在环境变量中直接指定密码有什么不同呢？&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;答：在我们的例子中创建 secret 和使用 secret 是分开完成的，其好处是将密码和容器解耦合。secret 可以由专人（比如管理员）创建，而运行容器的用户只需使用 secret 而不需要知道 secret 的内容。也就是说，例子中的这两个步骤可以由不同的人在不同的时间完成。&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot; start=&quot;2&quot; readability=&quot;-1.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;问：secret 是以文件的形式 mount 到容器中，容器怎么知道去哪里读取 secret 呢？&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;答：这需要 image 的支持。如果 image 希望它部署出来的容器能够从 secret 中读取数据，那么此 image 就应该提供一种方式，让用户能够指定 secret 的位置。最常用的方法就是通过环境变量，Docker 的很多官方 image 都是采用这种方式。比如 MySQL 镜像同时提供了&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;和&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD_FILE&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;两个环境变量。用户可以用&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;显示地设置管理员密码，也可以通过&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;&lt;code&gt;&lt;span&gt;MYSQL_ROOT_PASSWORD_FILE&lt;/span&gt;&lt;/code&gt;&lt;span class=&quot;Apple-converted-space&quot;&gt; &lt;/span&gt;指定 secret 路径。&lt;/p&gt;
&lt;p&gt;下一节我们继续讨论 Secret。&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.cnblogs.com/Users/wanglei/百度云同步盘/容器/images/480.png?v=1510821977521&quot; alt=&quot;&quot;/&gt;&lt;strong&gt;书籍：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1.《每天5分钟玩转Docker容器技术》&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;https://item.jd.com/16936307278.html&quot; target=&quot;_blank&quot;&gt;https://item.jd.com/16936307278.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;2.《每天5分钟玩转OpenStack》&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;https://item.jd.com/12086376.html&quot; target=&quot;_blank&quot;&gt;https://item.jd.com/12086376.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;https://i.imgsafe.org/68/68da21ce15.png&quot; src=&quot;https://i.imgsafe.org/68/68da21ce15.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 23:21:00 +0000</pubDate>
<dc:creator>CloudMan</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/CloudMan6/p/8068057.html</dc:identifier>
</item>
<item>
<title>Server SQL 2008 习题 - 张三疯_1998</title>
<link>http://www.cnblogs.com/zhh19981104/p/8069689.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zhh19981104/p/8069689.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;【序言：学期末了，整理了自己这个学期学习数据库做的练习题，也是让自己复习了一遍。有错误的话希望大佬能够批评指正，不胜感激】&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;一、修改数据库&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;（&lt;/span&gt;1&lt;span&gt;）给&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库添加一个数据文件文件&lt;/span&gt;&lt;span&gt;db_temp1&lt;/span&gt;&lt;span&gt;指定大小为&lt;/span&gt;&lt;span&gt;5MB&lt;/span&gt;&lt;span&gt;，最大文件大小为&lt;/span&gt;&lt;span&gt;100mb,&lt;/span&gt;&lt;span&gt;自动递增大小为&lt;/span&gt;&lt;span&gt;1MB&lt;/span&gt;&lt;span&gt;，存储路径为&lt;/span&gt;&lt;span&gt;d:\&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;利用系统存储过程&lt;/span&gt;&lt;span&gt;sp_helpdb&lt;/span&gt;&lt;span&gt;查看&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库系统信息&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp

&lt;/span&gt;&lt;span&gt;Add&lt;/span&gt; &lt;span&gt;file&lt;/span&gt;&lt;span&gt;

(name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;’db_temp1’,filename&lt;span&gt;=&lt;/span&gt;’d:\ db_temp1.ndf’,size&lt;span&gt;=&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;,filegrowth&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,maxsize&lt;span&gt;=&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;)&lt;p&gt;Sp_helpdb db_temp
&lt;/p&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;（&lt;/span&gt;2&lt;span&gt;）给&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库添加一个日志文件&lt;/span&gt;&lt;span&gt;db_temp1-log&lt;/span&gt;&lt;span&gt;文件，指定大小为&lt;/span&gt;&lt;span&gt;5MB&lt;/span&gt;&lt;span&gt;，最大文件大小为不限定大小，自动递增大小为&lt;/span&gt;&lt;span&gt;10%&lt;/span&gt;&lt;span&gt;，存储路径为&lt;/span&gt;&lt;span&gt;d:\&lt;/span&gt;&lt;span&gt;。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; 
&lt;span&gt;3&lt;/span&gt; &lt;span&gt;Add&lt;/span&gt; &lt;span&gt;log&lt;/span&gt; &lt;span&gt;file&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt; 
&lt;span&gt;5&lt;/span&gt; (name&lt;span&gt;=&lt;/span&gt;’ db_temp1&lt;span&gt;-&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;&lt;span&gt;’,
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; 
&lt;span&gt;7&lt;/span&gt; filename&lt;span&gt;=&lt;/span&gt;’d:\ db_temp1&lt;span&gt;-&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;.ldf’,size&lt;span&gt;=&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;,filegrowth&lt;span&gt;=&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;%&lt;/span&gt;,maxsize&lt;span&gt;=&lt;/span&gt;unliminted)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;&lt;span&gt;(3)&lt;span&gt;给&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库添加一文件组&lt;/span&gt; &lt;span&gt;hh&lt;/span&gt;&lt;span&gt;，利用系统存储过程&lt;/span&gt;&lt;span&gt;sp_helpdb&lt;/span&gt;&lt;span&gt;查看&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库系统信息&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp
&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt; &lt;span&gt;Add&lt;/span&gt;&lt;span&gt; filegroup hh
&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt; (4）、 &lt;span&gt;给&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库添加一数据文件&lt;/span&gt;&lt;span&gt;db_temp2&lt;/span&gt;&lt;span&gt;（该文件属性自定）到&lt;/span&gt;&lt;span&gt;hh&lt;/span&gt;&lt;span&gt;组&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp

&lt;/span&gt;&lt;span&gt;Add&lt;/span&gt; &lt;span&gt;file&lt;/span&gt;&lt;span&gt;

(name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;’db_temp2’,filename&lt;span&gt;=&lt;/span&gt;’d:\ db_temp2.ndf’,size&lt;span&gt;=&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;,filegrowth&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,maxsize&lt;span&gt;=&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;) &lt;span&gt;to&lt;/span&gt; filegroup hh
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt; (3)&lt;span&gt;修改&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库中的数据文件&lt;/span&gt;&lt;span&gt;db_temp1&lt;/span&gt;&lt;span&gt;，之后利用系统存储过程&lt;/span&gt;&lt;span&gt;sp_helpdb&lt;/span&gt;&lt;span&gt;查看&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库系统信息&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp

Modify &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;

(name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt; db_temp1,size&lt;span&gt;=&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;,maxsize&lt;span&gt;=&lt;/span&gt;&lt;span&gt;500&lt;/span&gt;)—修改了该数据库中的db_temp1文件，修改了该文件的大小和最大大小
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;（&lt;/span&gt;4&lt;span&gt;）删除&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;span&gt;数据库中一个数据文件&lt;/span&gt;&lt;span&gt;db_temp1&lt;/span&gt;&lt;span&gt;，一个日志文件&lt;/span&gt;&lt;span&gt;db_temp1-log&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp

remove &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt; db_temp1

 

&lt;/span&gt;&lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp

Remove  &lt;/span&gt;&lt;span&gt;file&lt;/span&gt; db_temp1&lt;span&gt;-&lt;/span&gt;&lt;span&gt;log&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;（&lt;/span&gt;7&lt;span&gt;） 删除文件组&lt;/span&gt;&lt;span&gt;hh&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;Alter&lt;/span&gt; &lt;span&gt;database&lt;/span&gt;&lt;span&gt; db_temp

Remove filegroup  hh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;（&lt;/span&gt;8&lt;span&gt;）用&lt;/span&gt;&lt;span&gt;SQL&lt;/span&gt;&lt;span&gt;命令删除数据库&lt;/span&gt;&lt;span&gt;db_temp&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;Drop&lt;/span&gt; &lt;span&gt;database&lt;/span&gt; db_temp
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;二、管理数据表&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;1、附加数据库temp-db ,并利用存储过程 sp_renamedb ‘&lt;span&gt;愿数据库名’&lt;span&gt;，‘新数据库名’   , 将该数据库重命名为stu&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
 sp_renamedb  &lt;span&gt;'&lt;/span&gt;&lt;span&gt;temp-db &lt;/span&gt;&lt;span&gt;'&lt;/span&gt; ,’ stu’
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;&lt;span&gt;2、利用存储过程sp_rename '&lt;span&gt;原表名&lt;/span&gt;','&lt;span&gt;新表名&lt;/span&gt;'  &lt;span&gt;，依次将该&lt;/span&gt;stu数据库的student 重命名为s,  course重命名为c  ,s-c 重命名为sc    &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
   sp_rename &lt;span&gt;'&lt;/span&gt;&lt;span&gt; student&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt; ,’ s’  

sp_rename &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt; ,’ c’  

sp_rename &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt; s-c &lt;/span&gt;&lt;span&gt;'&lt;/span&gt; ,’ sc’      
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;            &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;3.使用sql 命令在stu数据库中，分别按以下要求补充三个关系，设置对应表的主键，外键和约束关系。       &lt;/span&gt;           &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　　　　　　　　　　　　　　　　　　　　　　　　　　　T&lt;/strong&gt;&lt;strong&gt;&lt;span&gt;表&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;&lt;tbody readability=&quot;2&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;列名&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;数据类型&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;约束&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;TNO&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;V&lt;/strong&gt;&lt;strong&gt;archar&lt;span&gt;（&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;）&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;strong&gt;主键，并只能以&lt;span&gt;T&lt;/span&gt;&lt;span&gt;开头&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;tn&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;V&lt;/strong&gt;&lt;strong&gt;archar&lt;span&gt;（&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;）&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;非空&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;sex&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;C&lt;/strong&gt;&lt;strong&gt;har(2)&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;男&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;age&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;tinyint&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;30-65&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;prof&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;V&lt;/strong&gt;&lt;strong&gt;archar(50)&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;strong&gt;只能是教授，副教授，讲师，助教&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;sal&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;money&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;comm&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;smallmoney&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;dept&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;V&lt;/strong&gt;&lt;strong&gt;archar(50)&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;236&quot;&gt;
&lt;p&gt;&lt;strong&gt;计算机&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;strong&gt;　　　　　　　　　　　　　　　　　　　　　　　　　　　　T&lt;/strong&gt;&lt;strong&gt;c &lt;span&gt;表&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;173&quot;&gt;
&lt;p&gt;&lt;strong&gt;列名&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;数据类型&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;约束&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;228&quot;&gt;
&lt;p&gt;&lt;strong&gt;备注&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;173&quot;&gt;
&lt;p&gt;&lt;strong&gt;tno&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;V&lt;/strong&gt;&lt;strong&gt;archar&lt;span&gt;（&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;）&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;外键&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td rowspan=&quot;2&quot; valign=&quot;top&quot; width=&quot;228&quot;&gt;
&lt;p&gt;&lt;strong&gt;T&lt;/strong&gt;&lt;strong&gt;no+cno&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;主键&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;173&quot;&gt;
&lt;p&gt;&lt;strong&gt;cno&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;C&lt;/strong&gt;&lt;strong&gt;har(8)&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;外键&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;　　　　　　　　　　　　　　　　　　　　　　　　　　　　User表&lt;/p&gt;
&lt;table&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;173&quot;&gt;
&lt;p&gt;&lt;strong&gt;列名&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;数据类型&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;约束&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;228&quot;&gt;
&lt;p&gt;&lt;strong&gt;备注&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;3&quot;&gt;&lt;td valign=&quot;top&quot; width=&quot;173&quot;&gt;
&lt;p&gt;&lt;strong&gt;ID&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;INT&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;主键&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;228&quot; readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;strong&gt;标识列，自动增长，种子为&lt;span&gt;1&lt;/span&gt;&lt;span&gt;，增量为&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;173&quot;&gt;
&lt;p&gt;&lt;strong&gt;U&lt;/strong&gt;&lt;strong&gt;sername&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;V&lt;/strong&gt;&lt;strong&gt;archar&lt;span&gt;（&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;&lt;span&gt;）&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;不能重复&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;228&quot;&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td valign=&quot;top&quot; width=&quot;173&quot;&gt;
&lt;p&gt;&lt;strong&gt;password&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;V&lt;/strong&gt;&lt;strong&gt;archar(50)&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;154&quot;&gt;
&lt;p&gt;&lt;strong&gt;非空&lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;td valign=&quot;top&quot; width=&quot;228&quot;&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
&lt;span&gt;Create&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt;  t

(TNO &lt;/span&gt;&lt;span&gt;Varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;) &lt;span&gt;primary&lt;/span&gt; &lt;span&gt;key&lt;/span&gt;  &lt;span&gt;check&lt;/span&gt; (tno &lt;span&gt;like&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;t%&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),

tn &lt;/span&gt;&lt;span&gt;Varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;) &lt;span&gt;not&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;,

sex &lt;/span&gt;&lt;span&gt;Char&lt;/span&gt;(&lt;span&gt;2&lt;/span&gt;) &lt;span&gt;default&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;男&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,

age &lt;/span&gt;&lt;span&gt;tinyint&lt;/span&gt; &lt;span&gt;check&lt;/span&gt; (age &lt;span&gt;between&lt;/span&gt; &lt;span&gt;30&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; &lt;span&gt;65&lt;/span&gt;&lt;span&gt;),

prof &lt;/span&gt;&lt;span&gt;Varchar&lt;/span&gt;(&lt;span&gt;50&lt;/span&gt;)  &lt;span&gt;constraint&lt;/span&gt; xx &lt;span&gt;check&lt;/span&gt; (prof &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;教授&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;副教授&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;讲师&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;助教&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt; )),

sal &lt;/span&gt;&lt;span&gt;money&lt;/span&gt;&lt;span&gt;,

comm &lt;/span&gt;&lt;span&gt;smallmoney&lt;/span&gt;&lt;span&gt;,

dept &lt;/span&gt;&lt;span&gt;Varchar&lt;/span&gt;(&lt;span&gt;50&lt;/span&gt;) &lt;span&gt;default&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;) 

 

&lt;/span&gt;&lt;span&gt;create&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt; tc 

(tno &lt;/span&gt;&lt;span&gt;Varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;) &lt;span&gt;foreign&lt;/span&gt; &lt;span&gt;key&lt;/span&gt; &lt;span&gt;references&lt;/span&gt;&lt;span&gt; t(tno),

cno &lt;/span&gt;&lt;span&gt;Char&lt;/span&gt;(&lt;span&gt;8&lt;/span&gt;) &lt;span&gt;foreign&lt;/span&gt; &lt;span&gt;key&lt;/span&gt; &lt;span&gt;references&lt;/span&gt;&lt;span&gt; c(cno)

&lt;/span&gt;&lt;span&gt;primary&lt;/span&gt; &lt;span&gt;key&lt;/span&gt;&lt;span&gt; (tno,cno) )

&lt;/span&gt;&lt;span&gt;create&lt;/span&gt; &lt;span&gt;table&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;

(id &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; &lt;span&gt;identity&lt;/span&gt;(&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;primary&lt;/span&gt; &lt;span&gt;key&lt;/span&gt;&lt;span&gt;,

Username &lt;/span&gt;&lt;span&gt;Varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;&lt;span&gt;),

password &lt;/span&gt;&lt;span&gt;Varchar&lt;/span&gt;(&lt;span&gt;50&lt;/span&gt;&lt;span&gt;)

)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;4&lt;span&gt;．&lt;/span&gt;&lt;span&gt;给&lt;/span&gt;s&lt;span&gt;表添加手机号列&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;家庭住址列&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;身份证号要求手机号只能是&lt;/span&gt;-9&lt;span&gt;之间的字符&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;且长度为位&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;家庭住址不能为空，身份证号要求不能为空&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;且不能重复&lt;/span&gt; &lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;alter&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt; s 

&lt;/span&gt;&lt;span&gt;add&lt;/span&gt; tel &lt;span&gt;char&lt;/span&gt;(&lt;span&gt;11&lt;/span&gt;) &lt;span&gt;check&lt;/span&gt; (tel &lt;span&gt;like&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),

addr &lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;50&lt;/span&gt;) &lt;span&gt;not&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;,

sfzh &lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;) &lt;span&gt;not&lt;/span&gt; &lt;span&gt;null&lt;/span&gt; &lt;span&gt;unique&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;&lt;span&gt;5&lt;span&gt;、&lt;/span&gt;&lt;span&gt;给&lt;/span&gt;s&lt;span&gt;表添加一唯一约束到姓名列&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;一默认约束到姓别列&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;要求默认值为&lt;/span&gt;“&lt;span&gt;男&lt;/span&gt;”&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;alter&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt; s 

&lt;/span&gt;&lt;span&gt;add&lt;/span&gt; &lt;span&gt;unique&lt;/span&gt;&lt;span&gt;(sn),

&lt;/span&gt;&lt;span&gt;default&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;男&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;for&lt;/span&gt; sex
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6&lt;span&gt;．&lt;/span&gt;&lt;span&gt;删除&lt;/span&gt;t&lt;span&gt;表中的&lt;/span&gt;&lt;span&gt;prof&lt;/span&gt;&lt;span&gt;列上的约束&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;alter&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt; t

&lt;/span&gt;&lt;span&gt;drop&lt;/span&gt; &lt;span&gt;constraint&lt;/span&gt; xx 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7&lt;span&gt;、&lt;/span&gt;&lt;span&gt;删除&lt;/span&gt;s&lt;span&gt;表与&lt;/span&gt;&lt;span&gt;sc&lt;/span&gt; &lt;span&gt;表之间的关联&lt;/span&gt;&lt;span&gt;，&lt;/span&gt;&lt;span&gt;再通过命令重新建立其关联&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;alter&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt; sc

&lt;/span&gt;&lt;span&gt;drop&lt;/span&gt; &lt;span&gt;constraint&lt;/span&gt;&lt;span&gt; 外键约束的名称 

 

&lt;/span&gt;&lt;span&gt;alter&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt; sc 

&lt;/span&gt;&lt;span&gt;add&lt;/span&gt; &lt;span&gt;foreign&lt;/span&gt; &lt;span&gt;key&lt;/span&gt; (sno) &lt;span&gt;references&lt;/span&gt; s(sno)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;三、表单查询&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1．查询全体学生的学号和姓名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sno,Sn &lt;span&gt;from&lt;/span&gt; s
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;2．查询考试有不及格的学生学号，若有多门不及格，相同的学号只显示一个。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;distinct&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt; Sc &lt;span&gt;where&lt;/span&gt; score&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;60&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3．查询年龄在20岁以下的所有女生的姓名和性别&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; Sn,sex &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; age&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; sex&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;女&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4．查所有第二个字为小或晓的学生学号和姓名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sno,Sn &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; Sn &lt;span&gt;like&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;_[小晓]%&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5．查所有不姓王的学生姓名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; Sn &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; Sn &lt;span&gt;not&lt;/span&gt; &lt;span&gt;like&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;王%&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6．查计算机系，自动化系的学生姓名和性别&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; Sn,sex &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; dept &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;自动化&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7．查所所有学生的姓名及出生年份,并为对应列给别名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; Sn,&lt;span&gt;year&lt;/span&gt;(&lt;span&gt;GETDATE&lt;/span&gt;()) 出生年份 &lt;span&gt;from&lt;/span&gt; s 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;8．查询姓王或李的学生姓名和所在系&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; Sn,dept &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; Sn &lt;span&gt;like&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;[王李]%&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;9．查询所有选了课的学生学号，要求选了多门课的学生学号只显示一次&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;distinct&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt; Sc
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;10．查询分数为80,90分的学生选课记录&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; Sc &lt;span&gt;where&lt;/span&gt; score &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;80&lt;/span&gt;,&lt;span&gt;90&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;11．查询以'编'开头的,且倒数第2个为'原'的课程信息&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; cn &lt;span&gt;like&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;编%原__%&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;12.查询工资在1000--2000元之间（含1000，2000）的计算机系教师的信息&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; t &lt;span&gt;where&lt;/span&gt; sal &lt;span&gt;between&lt;/span&gt; &lt;span&gt;1000&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; &lt;span&gt;2000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;四、函数使用&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1、统计c2 课程的缺考学生人数&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(sno) &lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; cno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; score &lt;span&gt;is&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2、查询选了课的学生人数&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(&lt;span&gt;distinct&lt;/span&gt; sno) &lt;span&gt;from&lt;/span&gt; sc 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3、查询s1同学的总分，平均分，最高分，最低分，已经最高分和最低分之间的差值&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;sum&lt;/span&gt;(score),&lt;span&gt;avg&lt;/span&gt;(score),&lt;span&gt;max&lt;/span&gt;&lt;span&gt;(score),
&lt;/span&gt;&lt;span&gt;min&lt;/span&gt;(score),&lt;span&gt;max&lt;/span&gt;(score)&lt;span&gt;-&lt;/span&gt;&lt;span&gt;min&lt;/span&gt;&lt;span&gt;(score)
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; sc &lt;span&gt;where&lt;/span&gt; sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4、查询刘伟老师的总收入，要求输出教师号，总收入&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; tno,sal&lt;span&gt;+&lt;/span&gt;comm 总收入 &lt;span&gt;from&lt;/span&gt;&lt;span&gt; t
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; tn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;刘伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;

&lt;span&gt;select&lt;/span&gt; tno,&lt;span&gt;sum&lt;/span&gt;(sal&lt;span&gt;+&lt;/span&gt;comm)总收入 &lt;span&gt;from&lt;/span&gt;&lt;span&gt; t
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; tn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;刘伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; tno 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;5、统计sc表中每门课程的补考人数，要求显示课程号，补考人数&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cno,&lt;span&gt;count&lt;/span&gt;&lt;span&gt;(sno)补考人数
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; score&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;60&lt;/span&gt; &lt;span&gt;or&lt;/span&gt; score &lt;span&gt;is&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;
&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; cno 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6、查询每门课程的平均分和最高分&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;avg&lt;/span&gt;(score),&lt;span&gt;max&lt;/span&gt;(score) &lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; cno 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7、统计男生和女生的人数，显示性别和人数，并按人数升序排。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sex,&lt;span&gt;count&lt;/span&gt;(sno) &lt;span&gt;from&lt;/span&gt;&lt;span&gt; s

&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; sex
&lt;/span&gt;&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(sno) &lt;span&gt;asc&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;8、查询每个学生所选课程的平均分,并分别为这两列取别名为学号，平均分。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sno 学号,&lt;span&gt;avg&lt;/span&gt;&lt;span&gt;(score)平均分
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; sno 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;9、查询选修了c2课程的学生学号与成绩，按成绩降序排列。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;&lt;span&gt; sno,score
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; cno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; score &lt;span&gt;desc&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;10、查询各系不同职称的男女老师的人数&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;&lt;span&gt; sno,score
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; cno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; score &lt;span&gt;desc&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;11、查询选修了2门课以上课程的学生的学号和总成绩，按总成绩降序排序。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sno,&lt;span&gt;sum&lt;/span&gt;&lt;span&gt;(score)
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; sno
&lt;/span&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(cno)&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;12、查询平均分在75分及以上的课程号；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cno &lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; cno
&lt;/span&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;avg&lt;/span&gt;(score)&lt;span&gt;&amp;gt;=&lt;/span&gt;&lt;span&gt;75&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;13、查询计算机系收入高于8000的教师的教师名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; tn &lt;span&gt;from&lt;/span&gt;&lt;span&gt; t
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; tn
&lt;/span&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;sum&lt;/span&gt;(sal&lt;span&gt;+&lt;/span&gt;comm)&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;

&lt;span&gt;select&lt;/span&gt; tn &lt;span&gt;from&lt;/span&gt;&lt;span&gt; t
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;and&lt;/span&gt; comm&lt;span&gt;+&lt;/span&gt;sal&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;8000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;14、查询计算机系，电子系讲师职称的教师人数&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;(tno) &lt;span&gt;from&lt;/span&gt;&lt;span&gt; t
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; (dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;or&lt;/span&gt; dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;电子&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt; prof&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;讲师&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; dept

&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;count&lt;/span&gt;&lt;span&gt;(tno)
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; t &lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; dept,prof  &lt;span&gt;having&lt;/span&gt;&lt;span&gt;
((dept&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;or&lt;/span&gt; dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;电子&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)&lt;span&gt;and&lt;/span&gt; prof&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;讲师&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;二、多表查询&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;1、连接查询&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;（1）from 表1，表2... where 连接条件--内连接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;（2）表1 join 表2 on 连接条件join 表3 on 　　　　　　　　　　　　　　　　连接条件 .....--内连接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt; (3)表1 left|rightjoin 表2 on 连接条件 left|rightjoin 表3 on 　　　　　　　　　　连接条件 .....--外连接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;内连接：显示满足连接条件的元祖&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;外连接：显示满足连接条件的元祖，以及左表或右表不满足连接条件的元祖&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;s,sc&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;from s,sc where s.sno=sc.sno&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;s join sc on s.sno=sc.sno --内连接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;========================================&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;s,sc&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;br/&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;s left join sc on s.sno=sc.sno --左外连接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;em&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;sc right join s on s.sno=sc.sno--右外连接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1、查询选了课的学生学号，姓名 s,sc&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; s.sno,sn &lt;span&gt;from&lt;/span&gt; s,sc &lt;span&gt;where&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;sc.sno
 &lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt; s.sno,sn
 &lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s &lt;span&gt;join&lt;/span&gt; sc &lt;span&gt;on&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;sc.sno
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2、查询没有选课的学生学号和姓名s,sc&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;&lt;span&gt; s.sno,sn
 &lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s &lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; sc &lt;span&gt;on&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;sc.sno
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; cno &lt;span&gt;is&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt; 3、查询选了数据库课程的学生姓名s,sc,c&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;&lt;span&gt; sn  
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s,sc,c &lt;span&gt;where&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;sc.sno &lt;span&gt;and&lt;/span&gt; sc.cno&lt;span&gt;=&lt;/span&gt;c.cno &lt;span&gt;and&lt;/span&gt; cn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;

&lt;span&gt;select&lt;/span&gt;&lt;span&gt; sn
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt;
s &lt;/span&gt;&lt;span&gt;join&lt;/span&gt; sc &lt;span&gt;on&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;sc.sno &lt;span&gt;join&lt;/span&gt; c &lt;span&gt;on&lt;/span&gt; c.cno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;sc.cno
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; cn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4、查询刘伟老师所教课程的课程名 c,t,tc&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt; t,tc,c &lt;span&gt;where&lt;/span&gt; t.tno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;tc.tno
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt; tc.cno&lt;span&gt;=&lt;/span&gt;c.cno &lt;span&gt;and&lt;/span&gt; tn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;刘伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5、查询每个学生姓名，选课门数 s sc&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn,&lt;span&gt;count&lt;/span&gt;&lt;span&gt;(cno)
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt;
s &lt;/span&gt;&lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; sc &lt;span&gt;on&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;sc.sno
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; sn 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6、查询跟赵亦在同一个系的学生姓名 s s&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;&lt;span&gt; x.sn
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s x,s y &lt;span&gt;where&lt;/span&gt; x.dept&lt;span&gt;=&lt;/span&gt;y.dept  &lt;span&gt;and&lt;/span&gt; y.sn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;赵亦&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; x.sn&lt;span&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;赵亦&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt; &lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7、查询比钱尔大的学生姓名 s,s&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;&lt;span&gt; x.sn
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s x,s y &lt;span&gt;where&lt;/span&gt; x.age&lt;span&gt;&amp;gt;&lt;/span&gt;y.age  &lt;span&gt;and&lt;/span&gt; y.sn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;钱尔&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;五、查询&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;（1）、连接查询：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1、查询李力老师所教课程的课程名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt; C,t,tc &lt;span&gt;where&lt;/span&gt; t.tno&lt;span&gt;=&lt;/span&gt;tc.tno &lt;span&gt;and&lt;/span&gt; C.cno&lt;span&gt;=&lt;/span&gt;sc.cno &lt;span&gt;and&lt;/span&gt; tn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;李力&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2、查询计算机系选了数据库课程的学生姓名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn &lt;span&gt;from&lt;/span&gt; s,sc,c &lt;span&gt;where&lt;/span&gt; S.sno&lt;span&gt;=&lt;/span&gt;sc.sno &lt;span&gt;and&lt;/span&gt; c.cno&lt;span&gt;=&lt;/span&gt;sc.cno &lt;span&gt;and&lt;/span&gt; dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; cn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3、查询选了c1或c2课程的学生学号，姓名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; s.sno,sn &lt;span&gt;from&lt;/span&gt; s,sc &lt;span&gt;where&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;sc.sno &lt;span&gt;and&lt;/span&gt; cno &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4、查询教了计算机系学生且职称为教授的老师的姓名，职称，工资&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn,prof,sal &lt;span&gt;from&lt;/span&gt; t,tc,sc,s &lt;span&gt;where&lt;/span&gt; t.TNO&lt;span&gt;=&lt;/span&gt;tc.tno &lt;span&gt;and&lt;/span&gt; sc.cno&lt;span&gt;=&lt;/span&gt;tc.cno &lt;span&gt;and&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;sc.sno
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt; dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; prof&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;教授&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;5、查询各系的平均成绩要求显示系别，平均成绩，并按平均成绩降序排序。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; dept,&lt;span&gt;AVG&lt;/span&gt;(score) &lt;span&gt;from&lt;/span&gt; s,sc &lt;span&gt;where&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;sc.sno &lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; dept
&lt;/span&gt;&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; &lt;span&gt;AVG&lt;/span&gt;(score) &lt;span&gt;desc&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6、查询平均成绩在80分以上的课程号，课程名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; c.cno,cn &lt;span&gt;from&lt;/span&gt; c,sc &lt;span&gt;where&lt;/span&gt; c.cno&lt;span&gt;=&lt;/span&gt;sc.cno &lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; c.cno
&lt;/span&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;AVG&lt;/span&gt;(score)&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;80&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7、查询跟刘伟老师职称相同且工资相同的老师的姓名，职称，工资&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; x.tn,x.prof,x.sal &lt;span&gt;from&lt;/span&gt; t x,t y &lt;span&gt;where&lt;/span&gt; x.prof&lt;span&gt;=&lt;/span&gt;y.prof &lt;span&gt;and&lt;/span&gt; x.sal&lt;span&gt;=&lt;/span&gt;y.sal &lt;span&gt;and&lt;/span&gt; y.tn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;刘伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;and&lt;/span&gt; x.tn&lt;span&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;刘伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;8  用SQL实现S,SC表的自然连接&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; s.&lt;span&gt;*&lt;/span&gt;,cno,score &lt;span&gt;from&lt;/span&gt; s,sc &lt;span&gt;where&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;sc.sno .
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;9、查询没有学生选的课程的课程号，课程名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; c.cno,cn &lt;span&gt;from&lt;/span&gt; c &lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; sc &lt;span&gt;on&lt;/span&gt; sc.cno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;c.cno
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; cno &lt;span&gt;is&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;10、查询所有学生的姓名，选课门数&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn,&lt;span&gt;COUNT&lt;/span&gt;(cno) &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; sc &lt;span&gt;on&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;sc.sno &lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; sn 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;11、查询数据库，程序设计两门课程的总分，平均分&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn,&lt;span&gt;SUM&lt;/span&gt;(score),&lt;span&gt;AVG&lt;/span&gt;(score) &lt;span&gt;from&lt;/span&gt; c,sc &lt;span&gt;where&lt;/span&gt; c.cno&lt;span&gt;=&lt;/span&gt;sc.cno  &lt;span&gt;and&lt;/span&gt; cn &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;程序设计&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;  cn
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;二、(子查询)&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1、查询选了C1课程的学生姓名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;思路一：从sc表中找出所有选了c1课程的学生学号，再根据学号到s表中找出对应的学生姓名&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; SNO &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：以此到s表中判断每个学生是否选c1课程--相关子查询&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn &lt;span&gt;from&lt;/span&gt;&lt;span&gt; s
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;c1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; cno &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;s.SNO )
或
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; sn &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt;  &lt;span&gt;exists&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;s.SNO &lt;span&gt;and&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2、查询王伟老师所教课程的课程号&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路一：先从t表中找到刘伟老师的教师号，再利用该教师号到tc表找到该老师所教课程号&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cno &lt;span&gt;from&lt;/span&gt; TC &lt;span&gt;where&lt;/span&gt; TNO &lt;span&gt;=&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; TNO &lt;span&gt;from&lt;/span&gt; t &lt;span&gt;where&lt;/span&gt; tn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;王伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：依次到c表中去判断课程是否由王伟老师讲授&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cno &lt;span&gt;from&lt;/span&gt; c  &lt;span&gt;where&lt;/span&gt;  &lt;span&gt;'&lt;/span&gt;&lt;span&gt;刘伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; tn &lt;span&gt;from&lt;/span&gt; t &lt;span&gt;where&lt;/span&gt; tno &lt;span&gt;in&lt;/span&gt;&lt;span&gt; (
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; tno &lt;span&gt;from&lt;/span&gt; TC &lt;span&gt;where&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;C.cno))&lt;span&gt;--&lt;/span&gt;&lt;span&gt;不带exists 或not exists的相关子查询&lt;/span&gt;
&lt;span&gt;或
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; cno &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;  TC ,t &lt;span&gt;where&lt;/span&gt; TC.TNO&lt;span&gt;=&lt;/span&gt;t.tno  &lt;span&gt;and&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;c.cno
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt; tn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;刘伟&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)&lt;span&gt;--&lt;/span&gt;&lt;span&gt;带exists的相关子查询&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3、查询赵亦选的课程名。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;思路一：先找到赵亦的学号，再根据学号去找该学生所选的课程号，最后根据课程号找对应的课程名&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt;&lt;span&gt; C
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; CNO &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;=&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt;&lt;span&gt;
SNO &lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; SN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;赵亦&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) )&lt;span&gt;--&lt;/span&gt;&lt;span&gt;普通子查询&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：以此到c表中去判断该们课程是否被赵亦选修&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn  &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;赵亦&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; sn &lt;span&gt;from&lt;/span&gt; s,SC &lt;span&gt;where&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;SC.SNO &lt;span&gt;and&lt;/span&gt;&lt;span&gt;
CNO&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;C.CNO )&lt;span&gt;--&lt;/span&gt;&lt;span&gt;不带exists 或not exists的相关子查询&lt;/span&gt;
&lt;span&gt;或
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s,SC &lt;span&gt;where&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;SC.SNO &lt;span&gt;and&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;C.CNO
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt; SN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;赵亦&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)&lt;span&gt;--&lt;/span&gt;&lt;span&gt;带exists的相关子查询&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;4、查询不学数据库的学生学号。&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;思路一：先查找所有选了数据库的学号，找不属于这个集合的学生学号--普通子查询&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;not&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;span&gt;
(&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt;&lt;span&gt; SC
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; CNO  &lt;span&gt;=&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;))&lt;span&gt;--&lt;/span&gt;&lt;span&gt;普通子查询&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：用所有学生的学号减去选了数据库的学生学号&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt;&lt;span&gt; s
&lt;/span&gt;&lt;span&gt;except&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; SNO &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; CNO &lt;span&gt;=&lt;/span&gt;&lt;span&gt;(
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路三：依次到s表中去判断每个学生是否选了数据库--相关子查询&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span&gt;all&lt;/span&gt;&lt;span&gt;(
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt; C,SC &lt;span&gt;where&lt;/span&gt; C.CNO&lt;span&gt;=&lt;/span&gt;SC.CNO &lt;span&gt;and&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;s.sno)
或
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; sno &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;&lt;span&gt;(
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; C,SC &lt;span&gt;where&lt;/span&gt; C.CNO&lt;span&gt;=&lt;/span&gt;SC.CNO &lt;span&gt;and&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;s.sno)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5、查询被t1和t3老师教了的课程的课程名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路一：先去找到被t1和t3老师所教课程的课程号，再根据课程号找对应的课程名&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; CNO &lt;span&gt;in&lt;/span&gt;&lt;span&gt; (
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; TC &lt;span&gt;where&lt;/span&gt; TNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; CNO  &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; TC &lt;span&gt;where&lt;/span&gt; TNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：先找ti老师所教课程名，再找t3老师所教课程名，然后求其交集&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt;  C &lt;span&gt;where&lt;/span&gt; CNO &lt;span&gt;in&lt;/span&gt; ( &lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; TC &lt;span&gt;where&lt;/span&gt; TNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;intersect&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt;  C &lt;span&gt;where&lt;/span&gt; CNO &lt;span&gt;in&lt;/span&gt; ( &lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; TC &lt;span&gt;where&lt;/span&gt; TNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路三：依次到c表中判断每门课程是否被ti和t3教&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt;
&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; tno &lt;span&gt;from&lt;/span&gt; TC  &lt;span&gt;where&lt;/span&gt;  CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;c.cno)
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt;
&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; tno &lt;span&gt;from&lt;/span&gt; TC  &lt;span&gt;where&lt;/span&gt;  CNO&lt;span&gt;=&lt;/span&gt;c.cno)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路四：不存在t1和t3 老师没有教的课程的课程名&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; cn &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;( &lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;  &lt;span&gt;from&lt;/span&gt;  (&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;  t &lt;span&gt;where&lt;/span&gt; tno &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;t3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)) x
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;  TC &lt;span&gt;where&lt;/span&gt; TNO&lt;span&gt;=&lt;/span&gt;x.tno &lt;span&gt;and&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;C.cno ))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6、查询没有选修任何课程的学生姓名、所在院系&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路一：选找到选了课的学生学号，然后再找不再这个集合中的学生学号，最后通过该学号找对应学生的姓名&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn,dept &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;not&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;span&gt; (
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;distinct&lt;/span&gt; SNO &lt;span&gt;from&lt;/span&gt; SC )
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：找选课门数=0的学生&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn,dept &lt;span&gt;from&lt;/span&gt;&lt;span&gt; S  
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; s.SNO &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; SC &lt;span&gt;on&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;SC.SNO
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; s.SNO
&lt;/span&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;COUNT&lt;/span&gt;(cno)&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路三：以此从s表中去判断该学生是否选课--相关子查许&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn,dept &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;&lt;span&gt;(
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;s.SNO )
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7、查询“数据库”课程的选课人数和总成绩。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路一：普通子查询&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;COUNT&lt;/span&gt;(sno),&lt;span&gt;SUM&lt;/span&gt;(score) &lt;span&gt;from&lt;/span&gt;&lt;span&gt; SC
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; CNO &lt;span&gt;=&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; CNO &lt;span&gt;from&lt;/span&gt; C &lt;span&gt;where&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据库&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;8、查询其他系中比信息系某一学生年龄小的学生姓名和年龄。&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn,age &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; DEPT&lt;span&gt;&amp;lt;&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;信息&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; AGE&lt;span&gt;&amp;lt;any&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt;&lt;span&gt;
AGE &lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; DEPT&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;信息&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;9、查询选了所有课程的学生信息&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路一：先找选课门数=总课程数的学生学号，再根据学号找对应的学生信息&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; SNO &lt;span&gt;from&lt;/span&gt;&lt;span&gt; SC
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; SNO  &lt;span&gt;having&lt;/span&gt; &lt;span&gt;COUNT&lt;/span&gt;(cno)&lt;span&gt;=&lt;/span&gt;&lt;span&gt;(
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;COUNT&lt;/span&gt;(cno) &lt;span&gt;from&lt;/span&gt; C ))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：c表中没有一门课程是他没选的&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;&lt;span&gt;(
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;  C &lt;span&gt;where&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;SC.SNO &lt;span&gt;and&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;C.CNO ))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;10、查询计算机系微机原理成绩最好的学生的姓名&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路一：先找符合条件的学生学号，再找姓名，注意此题中有三个条件&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; DEPT&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;and&lt;/span&gt; SNO &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; SNO &lt;span&gt;from&lt;/span&gt; SC,C &lt;span&gt;where&lt;/span&gt; SC.CNO&lt;span&gt;=&lt;/span&gt;C.CNO &lt;span&gt;and&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;微机原理&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;and&lt;/span&gt;  score&lt;span&gt;=&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;MAX&lt;/span&gt;(score) &lt;span&gt;from&lt;/span&gt; SC,C &lt;span&gt;where&lt;/span&gt; SC.CNO&lt;span&gt;=&lt;/span&gt;C.CNO &lt;span&gt;and&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;微机原理&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;思路二：依次到s表中判断每个学生是否符合以上条件--相关子查询&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; sn &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt;  dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; &lt;span&gt;exists&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; SC,C &lt;span&gt;where&lt;/span&gt; SC.CNO&lt;span&gt;=&lt;/span&gt;C.CNO &lt;span&gt;and&lt;/span&gt;&lt;span&gt;
CN&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;微机原理&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; SCORE&lt;span&gt;=&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;MAX&lt;/span&gt;&lt;span&gt;(score)

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; SC,C &lt;span&gt;where&lt;/span&gt; SC.CNO&lt;span&gt;=&lt;/span&gt;C.CNO &lt;span&gt;and&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;微机原理&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &lt;span&gt;and&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;s.sno )
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;六、更新操作：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;2)在s表中插入一条完整的纪录（记录自定义 ）&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt;&lt;span&gt; S
(SNO,SN,SEX,AGE,dept)
&lt;/span&gt;&lt;span&gt;values&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s7&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;李斯&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;男&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;20&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;信息&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3)如果要在表SC中插入某个学生的选课信息（如：学号为“s3”，课程号为“c2”，成绩待定），应如何进行？&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt;&lt;span&gt; SC
(SNO,CNO,score)
&lt;/span&gt;&lt;span&gt;values&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;null&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;4)求各系学生的平均成绩，并把结果存入数据库；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; dept,&lt;span&gt;AVG&lt;/span&gt;(score) 平均成绩 &lt;span&gt;into&lt;/span&gt;&lt;span&gt; X
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s &lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; SC &lt;span&gt;on&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;SC.SNO  
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; DEPT
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; x
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5）s3同学的c5,c6,c7 三门课程的成绩分别是75，80，67 ，如何一次性将这些信息添加到sc表中 ？&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt;&lt;span&gt; SC (SNO,CNO,score)
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;s3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c5&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;75&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;union&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;s3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c6&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;80&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;union&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;s3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c7&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;67&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; sc
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6)将“计算机”系全体学生的成绩置零；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;update&lt;/span&gt;&lt;span&gt; SC
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; SCORE&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;
&lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;in&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; SNO &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; dept&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; sc
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7)删除“计算机系”系全体学生的选课记录；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;delete&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; SNO &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; SNO &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; DEPT&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;&lt;span&gt;)删除学号为“S1”的相关信息；并注意跟这个学生相关信息的变化
&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; SC
&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; sc &lt;span&gt;where&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s  
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;9)将学号为“S2”的学生的学号修改为“S002”；并注意跟这个学生相关信息的变化&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;update&lt;/span&gt;&lt;span&gt; s
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s002&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;where&lt;/span&gt; SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; sc 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;10)把平均成绩大于80分的男同学的入另一个表S_GRADE（SNO，AVG_GRADE）；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;table&lt;/span&gt;&lt;span&gt; S_GRADE
(SNO  &lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;),AVG_GRADE &lt;span&gt;float&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt;&lt;span&gt;  S_GRADE
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; s.sno,&lt;span&gt;AVG&lt;/span&gt;(score) &lt;span&gt;from&lt;/span&gt; SC,s &lt;span&gt;where&lt;/span&gt; SC.SNO&lt;span&gt;=&lt;/span&gt;S.SNO &lt;span&gt;and&lt;/span&gt; SEX&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;男&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt; s.SNO
&lt;/span&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;AVG&lt;/span&gt;(score)&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;80&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;11)把选修了课程名为“数据结构”的学生的成绩提高10%；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;update&lt;/span&gt;&lt;span&gt; SC
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; SCORE&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1.1&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;score
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; cno &lt;span&gt;in&lt;/span&gt; (&lt;span&gt;select&lt;/span&gt; cno &lt;span&gt;from&lt;/span&gt; c &lt;span&gt;where&lt;/span&gt; CN&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;数据结构&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt; )
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; sc
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;12)把选修了“C2”号课程，且成绩低于该门课程的平均成绩的学生的成绩提高5%；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;update&lt;/span&gt;&lt;span&gt; SC
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; SCORE&lt;span&gt;=&lt;/span&gt;SCORE&lt;span&gt;*&lt;/span&gt;&lt;span&gt;1.05&lt;/span&gt;
&lt;span&gt;where&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; SCORE&lt;span&gt;&amp;lt;&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;AVG&lt;/span&gt;(SCORE) &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; sc
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;13)把选修了“C2”号课程，且成绩低于该门课程的平均成绩的学生成绩删除掉；&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;delete&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; sc
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;and&lt;/span&gt; SCORE&lt;span&gt;&amp;lt;&lt;/span&gt;(&lt;span&gt;select&lt;/span&gt; &lt;span&gt;AVG&lt;/span&gt;(SCORE) &lt;span&gt;from&lt;/span&gt; SC &lt;span&gt;where&lt;/span&gt; CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; sc
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;七、权限控制：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
sp_addlogin &lt;span&gt;'&lt;/span&gt;&lt;span&gt;uu&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;123&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
sp_addlogin &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;nn&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;123&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
sp_adduser &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;uu&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;uu1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
sp_adduser&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;uu&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;uu2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1、写出如何让普通用户user1查询和使用t（tno,tn）进行查询和更新的权限--对象权限&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
sp_addlogin &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mm&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;123&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
sp_adduser &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;mm&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;select&lt;/span&gt;,&lt;span&gt;update&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; t(tno,tn) &lt;span&gt;to&lt;/span&gt;&lt;span&gt; user1  
&lt;/span&gt;&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;select&lt;/span&gt;(tno,tn),&lt;span&gt;update&lt;/span&gt;(tno,tn) &lt;span&gt;on&lt;/span&gt; t &lt;span&gt;to&lt;/span&gt;&lt;span&gt; user1

&lt;/span&gt;&lt;span&gt;revoke&lt;/span&gt; &lt;span&gt;select&lt;/span&gt;,&lt;span&gt;update&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; t(tno,tn) &lt;span&gt;from&lt;/span&gt; user1
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;2、将对计算机系学生进行查询和更新的权限给user2用户&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
sp_addlogin &lt;span&gt;'&lt;/span&gt;&lt;span&gt;xx&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;123&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
sp_adduser &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;xx&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;view&lt;/span&gt;&lt;span&gt; zz
&lt;/span&gt;&lt;span&gt;as&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; S &lt;span&gt;where&lt;/span&gt; DEPT&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;with&lt;/span&gt; &lt;span&gt;check&lt;/span&gt; &lt;span&gt;option&lt;/span&gt;
&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;select&lt;/span&gt;,&lt;span&gt;update&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; zz &lt;span&gt;to&lt;/span&gt;  user2
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3、将查询dept权限给所有用户&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;select&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; s &lt;span&gt;to&lt;/span&gt; &lt;span&gt;public&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;、将创建表的权限给普通用户user3，并使得user3获得传递权权限的能力&lt;span&gt;--&lt;/span&gt;&lt;span&gt;系统权限&lt;/span&gt;
sp_addlogin &lt;span&gt;'&lt;/span&gt;&lt;span&gt;yy&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;123&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
sp_adduser &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;yy&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;create&lt;/span&gt; &lt;span&gt;table&lt;/span&gt; &lt;span&gt;to&lt;/span&gt; user3 &lt;span&gt;with&lt;/span&gt; &lt;span&gt;grant&lt;/span&gt; &lt;span&gt;option&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;5、创建角色role1,将查询和更新s，c,sc表的权限给角色role1&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
sp_addrole &lt;span&gt;'&lt;/span&gt;&lt;span&gt;role1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;select&lt;/span&gt;,&lt;span&gt;UPDATE&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; s &lt;span&gt;to&lt;/span&gt;&lt;span&gt; role1
&lt;/span&gt;&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;select&lt;/span&gt;,&lt;span&gt;UPDATE&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; c &lt;span&gt;to&lt;/span&gt;&lt;span&gt; role1
&lt;/span&gt;&lt;span&gt;grant&lt;/span&gt; &lt;span&gt;select&lt;/span&gt;,&lt;span&gt;UPDATE&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; sc &lt;span&gt;to&lt;/span&gt; role1
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;6、将用户user1,user2添加到角色role1中，但不希望user1具备更新s，c,sc的权限，写出所有相关的过程&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
sp_addrolemember &lt;span&gt;'&lt;/span&gt;&lt;span&gt;role1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
sp_addrolemember &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;role1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;deny&lt;/span&gt; &lt;span&gt;update&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; s &lt;span&gt;to&lt;/span&gt; user1&lt;span&gt;--&lt;/span&gt;&lt;span&gt;取消&lt;/span&gt;
&lt;span&gt;deny&lt;/span&gt; &lt;span&gt;update&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; sc &lt;span&gt;to&lt;/span&gt;&lt;span&gt; user1
&lt;/span&gt;&lt;span&gt;deny&lt;/span&gt; &lt;span&gt;update&lt;/span&gt; &lt;span&gt;on&lt;/span&gt; c &lt;span&gt;to&lt;/span&gt; user1
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;7、如何让用户具有创建数据库的权限--添加用户到服务器角色中dbcreator&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
sp_addsrvrolemember &lt;span&gt;'&lt;/span&gt;&lt;span&gt;yy&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbcreator&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt;yy登录名添加到dbcreator服务器角色中&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;8、如何让用户拥有数据中所有对象的所有权限--添加用户到指定的数据库角色中db_owner&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
sp_addrolemember &lt;span&gt;'&lt;/span&gt;&lt;span&gt;db_owner&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;9、收回user3创建表的权限&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;revoke&lt;/span&gt; &lt;span&gt;create&lt;/span&gt;  &lt;span&gt;table&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; user3  &lt;span&gt;cascade&lt;/span&gt; &lt;span&gt;--&lt;/span&gt;&lt;span&gt;收回级联权限&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;10、收回用户创建数据库的权限--删除服务器角色中的成员&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
sp_dropsrvrolemember &lt;span&gt;'&lt;/span&gt;&lt;span&gt;yy&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbcreator&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt;删除服务器角色成员&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;11.如何收回用户拥有数据中所有对象的所有权限--删除数据库角色中的成员&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
sp_droprolemember &lt;span&gt;'&lt;/span&gt;&lt;span&gt;db_owner&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;12、删除登陆用户&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
sp_droplogin &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mm&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;13、删除数据库用户&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
sp_dropuser &lt;span&gt;'&lt;/span&gt;&lt;span&gt;user1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;八、视图操作：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;以S , C , SC表为基础完成以下视图定义及使用。&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;1)    定义“计算机”系学生基本情况视图V_IS 并查询结果；&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;view&lt;/span&gt;&lt;span&gt; V_IS
&lt;/span&gt;&lt;span&gt;as&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; sno,sn,sex,age,dept &lt;span&gt;from&lt;/span&gt; s &lt;span&gt;where&lt;/span&gt; DEPT&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;with&lt;/span&gt; &lt;span&gt;check&lt;/span&gt; &lt;span&gt;option&lt;/span&gt;

&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt;  V_IS
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;2)    将S，C，SC表中学生的学号，姓名，课程号，课程名，成绩定义为视图V_S_C_G 并查询结果;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;view&lt;/span&gt;&lt;span&gt; V_S_C_G
&lt;/span&gt;&lt;span&gt;as&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; s.sno,sn,c.cno,cn,score &lt;span&gt;from&lt;/span&gt;  s &lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; SC &lt;span&gt;on&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;SC.SNO &lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; C &lt;span&gt;on&lt;/span&gt; C.CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;SC.CNO
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; V_S_C_G
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;3)    将各系学生人数，平均成绩定义为视图V_NUM_AVG并查询结果;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;view&lt;/span&gt;&lt;span&gt; V_NUM_AVG
&lt;/span&gt;&lt;span&gt;as&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; dept,&lt;span&gt;COUNT&lt;/span&gt;(sno) 人数,&lt;span&gt;AVG&lt;/span&gt;&lt;span&gt;(age)平均成绩  
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; s  &lt;span&gt;left&lt;/span&gt; sc &lt;span&gt;on&lt;/span&gt; s.sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;sc.sno
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; dept
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;4)    定义一个反映学生出生年份的视图V_YEAR并查询结果;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;view&lt;/span&gt;&lt;span&gt; V_YEAR
&lt;/span&gt;&lt;span&gt;as&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt;,&lt;span&gt;year&lt;/span&gt;(&lt;span&gt;GETDATE&lt;/span&gt;())&lt;span&gt;-&lt;/span&gt;age 出生年份 &lt;span&gt;from&lt;/span&gt; s
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;5)    将各位学生选修课程的门数及平均成绩定义为视图V_AVG_S_G并查询结果;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;view&lt;/span&gt;&lt;span&gt; V_AVG_S_G
&lt;/span&gt;&lt;span&gt;as&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; s.sno,&lt;span&gt;COUNT&lt;/span&gt;(cno) 选修课程的门数,&lt;span&gt;AVG&lt;/span&gt;(score) 平均成绩 &lt;span&gt;from&lt;/span&gt;&lt;span&gt;
SC &lt;/span&gt;&lt;span&gt;right&lt;/span&gt; &lt;span&gt;join&lt;/span&gt;  s &lt;span&gt;on&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;SC.SNO
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; s.SNO 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;6)    将各门课程的选修人数及平均成绩定义为视图V_AVG_C_G并查询结果;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create&lt;/span&gt; &lt;span&gt;view&lt;/span&gt;&lt;span&gt; V_AVG_C_G
&lt;/span&gt;&lt;span&gt;as&lt;/span&gt;
&lt;span&gt;select&lt;/span&gt; c.cno,&lt;span&gt;COUNT&lt;/span&gt;(sno) 选修人数,&lt;span&gt;AVG&lt;/span&gt;(score) 平均成绩 &lt;span&gt;from&lt;/span&gt;&lt;span&gt;
C &lt;/span&gt;&lt;span&gt;left&lt;/span&gt; &lt;span&gt;join&lt;/span&gt; sc  &lt;span&gt;on&lt;/span&gt; SC.CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;C.CNO
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt; c.CNO 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;7)    查询平均成绩为90分以上的学生学号、姓名和成绩；  s sc V_AVG_S_G&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; V_AVG_S_G
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; s.sno,sn,score &lt;span&gt;from&lt;/span&gt; s,SC, V_AVG_S_G &lt;span&gt;where&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;SC.SNO &lt;span&gt;and&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;V_AVG_S_G.sno
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt; 平均成绩&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;90&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;8)    查询各课成绩均大于平均成绩的学生学号、姓名、课程名 和成绩；  s c,sc V_AVG_C_G&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt;  V_AVG_C_G
&lt;/span&gt;&lt;span&gt;select&lt;/span&gt; s.sno,sn,cn,score, 平均成绩 &lt;span&gt;from&lt;/span&gt; V_S_C_G, V_AVG_C_G &lt;span&gt;where&lt;/span&gt;  V_S_C_G.CNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;V_AVG_C_G.CNO  
&lt;/span&gt;&lt;span&gt;and&lt;/span&gt; SCORE&lt;span&gt;&amp;gt;&lt;/span&gt;平均成绩
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;9)    按系统计各系平均成绩在80分以上的人数，结果按降序排列； sc,s&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt;  dept, &lt;span&gt;COUNT&lt;/span&gt;(s.sno) &lt;span&gt;from&lt;/span&gt; s,SC &lt;span&gt;where&lt;/span&gt; s.SNO&lt;span&gt;=&lt;/span&gt;&lt;span&gt;SC.SNO
&lt;/span&gt;&lt;span&gt;group&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;&lt;span&gt;  dept
&lt;/span&gt;&lt;span&gt;having&lt;/span&gt; &lt;span&gt;AVG&lt;/span&gt;(score)&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;80&lt;/span&gt;
&lt;span&gt;order&lt;/span&gt; &lt;span&gt;by&lt;/span&gt;  &lt;span&gt;COUNT&lt;/span&gt;(s.sno) &lt;span&gt;desc&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;10)    通过视图V_IS，分别将学号为“S1”和“S4”的学生姓名更改为“S1_MMM”,”S4_MMM” 并查询结果;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;update&lt;/span&gt;&lt;span&gt; v_is
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; sn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S1_MMM&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;where&lt;/span&gt; sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;


&lt;span&gt;update&lt;/span&gt;&lt;span&gt; v_is
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; sn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S4_MMM&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;where&lt;/span&gt; sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S4&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;


&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt; s
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;11)    通过视图V_IS，新增加一个学生记录 ('S12','YAN XI',19,'计算机')&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt;&lt;span&gt; V_IS
&lt;/span&gt;&lt;span&gt;values&lt;/span&gt;  (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S12&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;YAN XI&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;19&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;计算机&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;12)    通过视图V_IS，新增加一个学生记录 ('S13','YAN XI',19,'信息')&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;insert&lt;/span&gt; &lt;span&gt;into&lt;/span&gt;&lt;span&gt; V_IS
&lt;/span&gt;&lt;span&gt;values&lt;/span&gt;  (&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S12&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;YAN XI&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;19&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;信息&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;--&lt;/span&gt;&lt;span&gt;看不到该信息&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;13)    通过视图V_IS，删除学号为“S12”和“S3”的学生信息&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;delete&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; v_is
&lt;/span&gt;&lt;span&gt;where&lt;/span&gt; sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s12&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;or&lt;/span&gt; sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;br/&gt;&lt;strong&gt;&lt;span&gt;14)    要通过视图V_S_C_G，将学号为“S12”的姓名改为“S12_MMM”，是否可以实现？&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; V_S_C_G
&lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt;  V_S_C_G
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; sn&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S13_MMM&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;where&lt;/span&gt; sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;ss&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;--&lt;/span&gt;&lt;span&gt;可更新&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;15)    要通过视图V_AVG_S_G，将学号为“S1”的平均成绩改为90分，是否可以实现？&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;select&lt;/span&gt; &lt;span&gt;*&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; V_AVG_S_G
&lt;/span&gt;&lt;span&gt;update&lt;/span&gt;&lt;span&gt; V_AVG_S_G
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; 平均成绩&lt;span&gt;=&lt;/span&gt;&lt;span&gt;90&lt;/span&gt;
&lt;span&gt;where&lt;/span&gt; sno&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;s1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;--&lt;/span&gt;&lt;span&gt;不可更新&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　2017-12-20、01:40:45&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 17:42:00 +0000</pubDate>
<dc:creator>张三疯_1998</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/zhh19981104/p/8069689.html</dc:identifier>
</item>
<item>
<title>mysql数据库插入数据获取自增主键的三种方式（jdbc PreparedStatement方式、mybatis useGeneratedKeys方式、mybatis selectKey方式） - 技术部小王同学</title>
<link>http://www.cnblogs.com/cdf-opensource-007/p/8068575.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/cdf-opensource-007/p/8068575.html</guid>
<description>&lt;p&gt;通常来说对于mysql数据库插入数据获取主键的方法是采用selectKey的方式，特别是当你持久层使用mybatis框架的时候。&lt;/p&gt;
&lt;p&gt;本文除此之外介绍其它两种获取主键的方式。&lt;/p&gt;
&lt;p&gt;为了方便描述我们先建一张mysql数据库的表：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
CREATE TABLE `company_01` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='company_01';
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;一、 jdbc PreparedStatement方式&lt;/p&gt;
&lt;p&gt;首先介绍一种jdbc获取主键的方式，其它两种方式也是对它的封装的实现，方便我们使用mybatis框架的时候获取主键值。&lt;/p&gt;
&lt;p&gt;代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.sql.Connection;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.sql.DriverManager;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.sql.PreparedStatement;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.sql.ResultSet;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.sql.SQLException;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.sql.Statement;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.ArrayList;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.HashMap;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.List;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.Map;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.ResourceBundle;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; InformationSchema {
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; Connection con=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; PreparedStatement ps=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; ResultSet rs=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt;{
        ResourceBundle resourceBundle &lt;/span&gt;= ResourceBundle.getBundle(&quot;jdbc&quot;&lt;span&gt;);
        String driverName &lt;/span&gt;= resourceBundle.getString(&quot;jdbc.driverClassName&quot;&lt;span&gt;);
        String jdbc &lt;/span&gt;= resourceBundle.getString(&quot;jdbc.url&quot;&lt;span&gt;);
        String user &lt;/span&gt;= resourceBundle.getString(&quot;jdbc.username&quot;&lt;span&gt;);
        String password &lt;/span&gt;= resourceBundle.getString(&quot;jdbc.password&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            Class.forName(driverName);
            con&lt;/span&gt;=&lt;span&gt;DriverManager.getConnection(jdbc, user, password);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            e.printStackTrace();
        }
       
    }
    
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; insertTable(String sql) {
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;Statement.RETURN_GENERATED_KEYS,为必传参数&lt;/span&gt;
            ps =&lt;span&gt; con.prepareStatement(sql,Statement.RETURN_GENERATED_KEYS);
            &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; count =&lt;span&gt; ps.executeUpdate();
            rs&lt;/span&gt;=&lt;span&gt; ps.getGeneratedKeys();
            rs.next();
            System.out.println(rs.getInt(&lt;/span&gt;1&lt;span&gt;));
            
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {
            e.printStackTrace();
        }
        
    }
    
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        String sql &lt;/span&gt;= &quot;INSERT INTO company_01 (`name`) VALUES ('阿里巴巴')&quot;&lt;span&gt;;
        insertTable(sql);
    }
    
    
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上这种方式，使用了 PreparedStatement 的getGeneratedKeys()方法，在插入的执行之后，获取主键值。&lt;/p&gt;
&lt;p&gt;二，mybatis useGeneratedKeys方式&lt;/p&gt;
&lt;p&gt;这种方式主要使用了&amp;lt;insert id=&quot;insertCompany_01&quot; &lt;span&gt;useGeneratedKeys&lt;/span&gt;=&quot;true&quot; &lt;span&gt;keyProperty&lt;/span&gt;=&quot;id&quot;&amp;gt;&amp;lt;/insert&amp;gt;标签的这两个属性给传进来的map的key或者对象的id属性进行赋值（若为对象，keyProperty的值须跟属性名进行对应）&lt;/p&gt;
&lt;p&gt;spring和mybatis集成的xml文件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;beans &lt;/span&gt;&lt;span&gt;xmlns&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/beans&quot;&lt;/span&gt;&lt;span&gt;
       xmlns:xsi&lt;/span&gt;&lt;span&gt;=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;span&gt;
       xmlns:p&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/p&quot;&lt;/span&gt;&lt;span&gt;
       xmlns:context&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/context&quot;&lt;/span&gt;&lt;span&gt;
       xmlns:aop&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/aop&quot;&lt;/span&gt;&lt;span&gt; xmlns:tx&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/tx&quot;&lt;/span&gt;&lt;span&gt;
       xsi:schemaLocation&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
                    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
                    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
                    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;


    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注册属性文件 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;context:property-placeholder &lt;/span&gt;&lt;span&gt;location&lt;/span&gt;&lt;span&gt;=&quot;classpath:jdbc.properties&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 阿里 druid数据库连接池 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    
    
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;dataSource&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;org.apache.commons.dbcp.BasicDataSource&quot;&lt;/span&gt;&lt;span&gt; destroy-method&lt;/span&gt;&lt;span&gt;=&quot;close&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 数据库基本信息配置 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;url&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.url}&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;username&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.username}&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.password}&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;driverClassName&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.driverClassName}&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;

        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 初始化连接大小 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;initialSize&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.initialSize}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 连接池最大数量 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;maxActive&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.maxActive}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 连接池最大空闲 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;maxIdle&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.maxIdle}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 连接池最小空闲 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;minIdle&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.minIdle}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 获取连接最大等待时间 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;maxWait&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;${jdbc.maxWait}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 配置mybatis &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;sqlSessionFactory&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;dataSource&quot;&lt;/span&gt;&lt;span&gt; ref&lt;/span&gt;&lt;span&gt;=&quot;dataSource&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;configLocation&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;classpath:mybatis-config.xml&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; mapper扫描 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;mapperLocations&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;array&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;classpath*:mapper/*.xml&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;array&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 配置映射扫描配置器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 可以帮助我们扫描dao包下的所有接口生成代理实现类 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;sqlSessionFactoryBeanName&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;sqlSessionFactory&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;basePackage&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;com.opensource.dao&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;beans&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;mybatis的sql配置文件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mapper &lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt;=&quot;com.opensource.dao.CompanyDao&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

   &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;insert &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;insertCompany_01&quot;&lt;/span&gt;&lt;span&gt;  useGeneratedKeys&lt;/span&gt;&lt;span&gt;=&quot;true&quot;&lt;/span&gt;&lt;span&gt; keyProperty&lt;/span&gt;&lt;span&gt;=&quot;id&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
   　　INSERT INTO `company_01` (`name`) VALUES (#{name})&lt;/span&gt;
   &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;insert&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;br/&gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;mapper&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;dao的接口：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.Serializable;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; CompanyDao {
    
    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * 这里传参使用Serializable 是为了同时兼容map和实体类的情况
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; serializable
     * &lt;/span&gt;&lt;span&gt;@return&lt;/span&gt;
     &lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; insertCompany_01(Serializable serializable);&lt;/span&gt;&lt;span&gt;
    
    
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;实体类：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.Serializable;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; Company01 &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Serializable{
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; Integer id;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String name;
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Integer getId() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; id;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setId(Integer id) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.id =&lt;span&gt; id;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getName() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; name;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setName(String name) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; name;
    }

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;测试类：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        
        ApplicationContext context &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ClassPathXmlApplicationContext(&lt;span&gt;new&lt;/span&gt; String[]{&quot;spring/spring-mybatis.xml&quot;&lt;span&gt;});
        
        CompanyDao companyDao &lt;/span&gt;= context.getBean(CompanyDao.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
        &lt;span&gt;//声明这里要用Hashmap,可序列化的&lt;/span&gt;
        HashMap&lt;/span&gt;&amp;lt;String,Object&amp;gt; map = &lt;span&gt;new&lt;/span&gt; HashMap&amp;lt;String, Object&amp;gt;&lt;span&gt;();
        map.put(&lt;/span&gt;&quot;name&quot;, &quot;阿里巴巴&quot;&lt;span&gt;);
        companyDao.insertCompany_01(map);
        System.out.println(map.get(&lt;/span&gt;&quot;id&quot;&lt;span&gt;));
        
        Company01 c01 &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Company01();
        c01.setName(&lt;/span&gt;&quot;腾讯&quot;&lt;span&gt;);
        companyDao.insertCompany_01(c01);
        System.out.println(c01.getId());
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;三、mybatis selectKey方式&lt;/p&gt;
&lt;p&gt;这种方式大家用的最多，就不再过多描述了，具体的测试方法同上&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;insert &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;insertCompany_01&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
   INSERT INTO `company_01` (`name`) VALUES (#{name})
   &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;selectKey &lt;/span&gt;&lt;span&gt;resultType&lt;/span&gt;&lt;span&gt;=&quot;java.lang.Integer&quot;&lt;/span&gt;&lt;span&gt; order&lt;/span&gt;&lt;span&gt;=&quot;AFTER&quot;&lt;/span&gt;&lt;span&gt; keyProperty&lt;/span&gt;&lt;span&gt;=&quot;id&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
      SELECT LAST_INSERT_ID();
    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;selectKey&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
 &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;insert&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;有必要提出一点的是，order有两个值，AFTER或BEFORE，获取自增id时须用AFTER，BEFORE是用来给map的key或者对象的id属性进行赋值的，用的不多。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;最后说一点，我们作为程序员，研究问题还是要仔细深入一点的。当你对原理了解的有够透彻，开发起来也就得心应手了，很多开发中的问题和疑惑也就迎刃而解了，而且在面对其他问题的时候也可做到触类旁通。当然在开发中没有太多的时间让你去研究原理，开发中要以实现功能为前提，可等项目上线的后，你有大把的时间或者空余的时间，你大可去刨根问底，深入的去研究一项技术，为觉得这对一名程序员的成长是很重要的事情。&lt;/strong&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 19 Dec 2017 17:23:00 +0000</pubDate>
<dc:creator>技术部小王同学</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/cdf-opensource-007/p/8068575.html</dc:identifier>
</item>
<item>
<title>java学习笔记IO之字节输入输出流 - 猿上生活</title>
<link>http://www.cnblogs.com/xuzhaocai/p/8068436.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xuzhaocai/p/8068436.html</guid>
<description>&lt;h2&gt;OutputStream:字节输出流&lt;/h2&gt;
&lt;p&gt;　　该抽象类是所有字节输出流的超类；&lt;/p&gt;
&lt;p&gt;　　定义了一些共性的成员方法：&lt;/p&gt;
&lt;p&gt;　　　　1.写入一个字节&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;void&lt;/span&gt; write(&lt;span&gt;int&lt;/span&gt; b);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;b表示字节&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　2.写入字节数组&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;void&lt;/span&gt; write(&lt;span&gt;byte&lt;/span&gt;[]  b);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;写入一个字节数组&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　3.写入字节数组的一部分&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;void&lt;/span&gt; write(&lt;span&gt;byte&lt;/span&gt;[] b,&lt;span&gt;int&lt;/span&gt; off, &lt;span&gt;int&lt;/span&gt; len);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;off 表示起始索引，len表示写几个&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　4.刷新输出流，并强制写出所有缓冲的输出字节&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;void&lt;/span&gt; flush();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　5.关闭输出流并释放与之有关的所有系统资源&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;void&lt;/span&gt; close();
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;FileOutputStream ：文件字节输出流 extends OutputStream&lt;/h2&gt;
&lt;p&gt;　　作用：&lt;/p&gt;
&lt;p&gt;　　　　把内存中的字节数据，写入到文件中保存&lt;/p&gt;
&lt;p&gt;　　构造方法：&lt;/p&gt;
&lt;p&gt;　　　　1.创建一个指向File对象表示的文件中写入数据的文件输出流&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
FileOutputStream(File  file);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　2.创建一个指定名称的文件中写入数据的输出文件流&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
FileOutputStream(String  name);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;通俗说就是个文件路径名&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　构造方法的作用（也就是他干什么事）&lt;/p&gt;
&lt;p&gt;　　　　1.会根据构造方法的参数，创建一个文件，如果没有设置追加写的值，文件已经存在的话，就会覆盖&lt;/p&gt;
&lt;p&gt;　　　　2.创建一个FileOutputStream对象&lt;/p&gt;
&lt;p&gt;　　　　3.将这个对象指向目的地&lt;/p&gt;
&lt;p&gt;　　IO读写的过程：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
java程序---&amp;gt;JVM---&amp;gt;OS(操作系统)---&amp;gt;调用方法进行读写文件
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;strong&gt;FileOutputStream的使用步骤：&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
1&lt;span&gt;.创建对象，在构造方法中绑定写入数据的目的地
&lt;/span&gt;2&lt;span&gt;.调用对象中的方法write，把数据写入到文件中
&lt;/span&gt;3.释放资源
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;　　注意：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　　　字节流操作的是字节，所以会直接把字节写入到文件中；&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　　　字符流操作的是字符，先会将字符写到内存的缓冲区中，进行转换，转换为字节，再使用底层的字节流将数据写入到文件中&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　字符输出流使用实例1&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; FileOutputStream  fos= &lt;span&gt;new&lt;/span&gt; FileOutputStream(&quot;a.txt&quot;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;a.txt相对路径，相对项目目录下&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; fos.write(97);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;写入一个字节&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt; fos.close();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;关闭流并释放资源&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　使用实例2:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
FileOutputStream fos= &lt;span&gt;new&lt;/span&gt; FileOutputStream(&lt;span&gt;new&lt;/span&gt; File('a.txt'));&lt;span&gt;//&lt;/span&gt;&lt;span&gt;构造方法中传递一个File文件对象&lt;/span&gt;
&lt;span&gt;byte&lt;/span&gt;[]  b=&quot;你好&quot;.getBytes();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;使用String类方法将字符串转换成字节数组&lt;/span&gt;
fos.write(b);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;写入一个字节数组&lt;/span&gt;
fos.close();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;关闭资源&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　追加写与换行&lt;/p&gt;
&lt;p&gt;　　　　1.追加写:boolean  append 参数追加写开关，true是追加，false是不追加，默认是false&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
FileOutputStream(File file, &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt;  append);
FileOutputStream(String pathname,&lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; append);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　2.换行&lt;/p&gt;
&lt;p&gt;　　　　win系统：\r\n&lt;/p&gt;
&lt;p&gt;　　　　linux:/n&lt;/p&gt;
&lt;p&gt;　　　　mac:\r&lt;/p&gt;
&lt;p&gt;　　　　&lt;span&gt;可以使用System类的静态方法动态获取换行符&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;System.getProperty(&quot;line.separator&quot;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;InputStream:字节输入流，该抽象类是所有字节输入流的超类&lt;/h2&gt;
&lt;p&gt;　　共性的成员方法：&lt;/p&gt;
&lt;p&gt;　　　　1.读取一个字节并返回，没有字节返回－1&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;int&lt;/span&gt;  read();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　2.读取一定量的字节数，并存储到字节数组中，返回读取到的字节数&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;int&lt;/span&gt;  read(&lt;span&gt;byte&lt;/span&gt;[]  b);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　　　3.关闭输入流并释放与之有关的所有系统资源&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;void&lt;/span&gt; close();
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;FileInputStream：文件字节输入流 java.lang.FileInputStream  extends  InputStream&lt;/h2&gt;
&lt;p&gt;　　作用：将文件中的数据，以字节的形式读取到内存中&lt;/p&gt;
&lt;p&gt;　　构造方法：&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
FileInputStream(File  file);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;数据源使用File对象&lt;/span&gt;
FileInputStream(String  pathname);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;数据源是一个文件路径&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;　　构造方法的作用：&lt;/p&gt;
&lt;p&gt;　　　　1.创建一个字节输入流的对象&lt;/p&gt;
&lt;p&gt;　　　　2.会将这个对象指向构造方法中要读取的数据源&lt;/p&gt;
&lt;p&gt;　　FileInputStream使用步骤：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
1&lt;span&gt;.创建对象，绑定构造方法中的数据源
&lt;/span&gt;2&lt;span&gt;.调用字节输入流的方法read，来读取文件
&lt;/span&gt;3.释放资源
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　FileInputStream读取单字节实例：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建对象，绑定源文件&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; FileInputStream  fis= &lt;span&gt;new&lt;/span&gt; FileInputStream(&quot;a.txt&quot;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;a.txt是存在的
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;读取单字节。&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; len=0&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt; &lt;span&gt;while&lt;/span&gt;((len=fis.read())!=-1&lt;span&gt;){
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;   System.out.println((&lt;span&gt;char&lt;/span&gt;)len);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里的输出就只能是单字节字符，不能是中文，因为一个中文2个字节，读一个字节就输出会乱码；  &lt;/span&gt;
&lt;span&gt;7&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;关闭流资源&lt;/span&gt;
&lt;span&gt;9&lt;/span&gt; fis.close();
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　FileInputStream读取字节数组实例：&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建输入流对象&lt;/span&gt;
FileInputStream  fis=&lt;span&gt;new&lt;/span&gt; FileInputStream(&lt;span&gt;new&lt;/span&gt; File(&quot;a.txt&quot;&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建要接收字节的数组&lt;/span&gt;
&lt;span&gt;byte&lt;/span&gt;[]  b= &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[1024];&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里一般是1024或者其整数倍&lt;/span&gt;
&lt;span&gt;int&lt;/span&gt;  len =0;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里的len是每次读取的有效个数&lt;/span&gt;

&lt;span&gt;while&lt;/span&gt;((len= fis.read(b))!=-1&lt;span&gt;){
    
    System.out.println(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt; String(b,0,len));&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里使用String类的构造方法，b是字节数组，0是开始索引，len是个数    &lt;/span&gt;
&lt;span&gt;}
&lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;
注意：
1.字节数组的作用：起到缓冲的作用，一次读取多个字节存在数组中，提高效率，这个字节数组的长度一般定义为1024或者是1024的倍数
2返回值int是什么：每次读取的有效字节个数
&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;









</description>
<pubDate>Tue, 19 Dec 2017 16:04:00 +0000</pubDate>
<dc:creator>猿上生活</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xuzhaocai/p/8068436.html</dc:identifier>
</item>
<item>
<title>【技能大赛笔记01】Zigbee点对点按键控制程序开发 - 小蜜蜂老师</title>
<link>http://www.cnblogs.com/ALittleBee/p/8068391.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ALittleBee/p/8068391.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;【技能大赛笔记01】Zigbee点对点按键控制程序开发&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;--2017年“物联网物联网技术应用与维护”任务五题1（中职组）&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;1、题目要求&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1172284/201712/1172284-20171219234458068-1671209184.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1172284/201712/1172284-20171219234509881-946928565.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;2、工程文件&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;    在比赛中，提供了一个&lt;span&gt;&lt;strong&gt;基于BasicRF&lt;/strong&gt;&lt;/span&gt;的工程项目和一份函数说明文档，参赛选手需要在这个工程项目中编写合适的代码以实现题目的功能。在工程项目中有“&lt;span&gt;&lt;strong&gt;rf_set.c&lt;/strong&gt;&lt;/span&gt;”和&quot;&lt;span&gt;&lt;strong&gt;slave_node.c&lt;/strong&gt;&lt;/span&gt;&quot;这两个代码文件，分别是&lt;span&gt;&lt;strong&gt;主节点&lt;/strong&gt;&lt;/span&gt;和&lt;span&gt;&lt;strong&gt;从节点&lt;/strong&gt;&lt;/span&gt;的应用代码，参赛选手需要在这两个文件中编写合适的代码。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;1&amp;gt; 主节点“&lt;span&gt;rf_set.c&lt;/span&gt;”的代码如下：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1172284/201712/1172284-20171219234615709-865075925.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;2&amp;gt; 从节点&quot;&lt;span&gt;slave_node.c&lt;/span&gt;&quot;的代码如下：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1172284/201712/1172284-20171219234643475-830564960.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;3、关键知识点&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;1&amp;gt; 对题目的理解非常关键。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;    刚看到题目的时候我也懵B了。&lt;span&gt;&lt;strong&gt;四个LED怎么表示8个数据位呢？&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    主节点和从节点分别有4个LED，一共8个LED分别表示8个数据位。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    1：用LED亮表示，&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    0：用LED灭表示。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    数据依次从高到低排列：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;strong&gt;&lt;span&gt;主节点&lt;/span&gt;的&lt;span&gt;D4 D3 D6 D5&lt;/span&gt;，&lt;span&gt;从节点&lt;/span&gt;的&lt;span&gt;D4 D3 D6 D5&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    例如：&lt;span&gt;&lt;strong&gt;111&lt;/strong&gt;&lt;/span&gt;0 0&lt;span&gt;&lt;strong&gt;1&lt;/strong&gt;&lt;/span&gt;00用二进制表示，就是：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;主节点&lt;/strong&gt;&lt;/span&gt;的D4：&lt;span&gt;&lt;strong&gt;亮&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;主节点&lt;/strong&gt;&lt;/span&gt;的D3：&lt;span&gt;&lt;strong&gt;亮&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;主节点&lt;/strong&gt;&lt;/span&gt;的D6：&lt;span&gt;&lt;strong&gt;亮&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;主节点&lt;/strong&gt;&lt;/span&gt;的D5：灭&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;从节点&lt;/strong&gt;&lt;/span&gt;的D4：灭&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;从节点&lt;/strong&gt;&lt;/span&gt;的D3：&lt;span&gt;&lt;strong&gt;亮&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;从节点&lt;/strong&gt;&lt;/span&gt;的D6：灭&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;从节点&lt;/strong&gt;&lt;/span&gt;的D5：灭&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    理解这个很重要，不然题目是做不出来的。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;2&amp;gt; 补码与原码的换算关系&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;    对于正数，原码 = 补码。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    对于负数，&lt;span&gt;&lt;strong&gt;原码 = 补码（除了符号位）的各个位取反，加1。&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    补码1001 1100的原码为：1110 0100&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    补码1010 0110的原码为：1101 1010&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    补码1011 0000的原码为：1101 0000&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;3&amp;gt; 点对点通信的数据发送和数据接收的两个函数的应用。&lt;/span&gt;&lt;/strong&gt;&lt;br/&gt;&lt;span&gt;    //将数据mode的一个字节发送到目标地址为0x0002的板子上。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;basicRfSendPacket(&lt;span&gt;0x0002&lt;/span&gt;, &lt;span&gt;mode&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;);&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    //将板子接收到的数据读取1个字节放到Rx数组中。&lt;/span&gt;&lt;br/&gt;&lt;span&gt;    &lt;span&gt;&lt;strong&gt;basicRfReceive(&lt;span&gt;Rx&lt;/span&gt;,&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;NULL&lt;/span&gt;);&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;4、代码实现&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;1&amp;gt; 主节点“&lt;span&gt;rf_set.c&lt;/span&gt;”的代码编写如下：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//↓↓↓↓↓↓↓请在选手此区域内补充代码↓↓↓↓↓↓↓

void RFInit()
{
  rf.myAddr=0x0001;        //本机地址
  rf.panId=0x1000;          //网络ID
  rf.channel=10;           //通信信道
  rf.ackRequest=1;         //应答信号
  while(basicRfInit(&amp;amp;rf)==1);
  basicRfReceiveOn();
}

void main()
{
  Init();
  RFInit();
  while(1)
  {
    if(key1==0)
    {
      DelayMS(10);
      if(key1==0)
      {
        while(key1==0);
        P1=0x00;
        mode[0]++;
        switch(mode[0])
        {
          
          case 0x30:   break;
            P1=0x00;
          //补码1001 1100的原码为：1110 0100
          case 0x31:   
            LED4 = 1;
            LED3 = 1;
            LED6 = 1;
            LED5 = 0;
            break;
          
          //补码1010 0110的原码为：1101 1010
          case 0x32:   
            LED4 = 1;
            LED3 = 1;
            LED6 = 0;
            LED5 = 1;
            break;
          
          //补码1011 0000的原码为：1101 0000
          case 0x33:   
            LED4 = 1;
            LED3 = 1;
            LED6 = 0;
            LED5 = 1;
            break;
        }
        basicRfSendPacket(0x0002, mode, 1);
        if(mode[0]&amp;gt;=0x34)
        {
          mode[0]=0x30;
        }
      }
    }
  }
}
//↑↑↑↑↑↑↑请在选手此区域内补充代码↑↑↑↑↑↑↑&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;2&amp;gt; 从节点&quot;&lt;span&gt;slave_node.c&lt;/span&gt;&quot;的代码编写如下：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//↓↓↓↓↓↓↓请在选手此区域内补充代码↓↓↓↓↓↓↓

void RFInit()                                                          
{                                                                        
  rf.myAddr=0x0002;        //本机地址                                    
  rf.panId=0x1000;          //网络ID                                    
  rf.channel=10;           //通信信道                                    
  rf.ackRequest=1;         //应答信号                                  
  while(basicRfInit(&amp;amp;rf)==1);                                           
  basicRfReceiveOn();                                                    
}

void main()
{
  Init();
  RFInit();
  while(1)
  {
    if(basicRfPacketIsReady())
    {
      uint8 Rx[5]=0x00;
      //basicRfReceive(Rx,5,NULL);
      basicRfReceive(Rx,1,NULL);
      P1=0x00;
      switch(Rx[0])
      {
      case 0x30:   
        P1=0x00;
        break;
      //补码1001 1100的原码为：1110 0100
      case 0x31:   
        LED4 = 0;
        LED3 = 1;
        LED6 = 0;
        LED5 = 0;
        break;
      //补码1010 0110的原码为：1101 1010
      case 0x32:   
        LED4 = 1;
        LED3 = 0;
        LED6 = 1;
        LED5 = 0;
        break;
        //补码1011 0000的原码为：1101 0000
      case 0x33:   
        LED4 = 0;
        LED3 = 0;
        LED6 = 0;
        LED5 = 0;
        break;
      }
    }
  }
}
//↑↑↑↑↑↑↑请在选手此区域内补充代码↑↑↑↑↑↑↑&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;    在编译和烧写代码的时候要注意，主节点的要把&quot;slave_node.c&quot;代码文件移除出工程，在把“rf_set.c”添加进来，然后编译、烧写。从节点也需要做相应的移除和添加代码文件。当代码分别烧写到两个Zigbee模块上，上电就可以实现题目的功能了。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;注1&amp;gt;：&lt;/span&gt;&lt;/strong&gt;完整工程代码下载（百度云盘）：&lt;span&gt;&lt;strong&gt;https://pan.baidu.com/s/1bpxxNqf&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&amp;lt;注2&amp;gt;：&lt;/strong&gt;&lt;/span&gt;关于BasicRF更详细的资料，可以参考网络中&lt;span&gt;&lt;strong&gt;《基于BasicRF的点对点无线双向控制LED灯案例分析》&lt;/strong&gt;&lt;/span&gt;一文。&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 16:00:00 +0000</pubDate>
<dc:creator>小蜜蜂老师</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ALittleBee/p/8068391.html</dc:identifier>
</item>
<item>
<title>eclipse中将项目打包成jar的两种方法，及其问题与解决方法 - 天厌之</title>
<link>http://www.cnblogs.com/tianyanzhi/p/8067239.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/tianyanzhi/p/8067239.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;第一种：利用eclipse中自带的export功能&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;第一种方法分两种情况先来看第一种情况：&lt;strong&gt;没有引用外部jar的项目打包&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;步骤一：&lt;/strong&gt;右键点击项目选择导出（export），选择java&amp;gt;jar文件(不是选择可运行jar文件)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219184139037-829991110.png&quot; alt=&quot;&quot; width=&quot;399&quot; height=&quot;648&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219184253131-117653222.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;步骤二：&lt;/strong&gt;选择你要导出的项目以及文件，指定文件导出路径。连续点击两个下一步后到第四步。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219184505006-548040916.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p id=&quot;s4&quot;&gt;&lt;strong&gt;步骤三：&lt;/strong&gt;选择主类。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219185040240-174840904.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;按照以上步骤即可&lt;span&gt;完成对&lt;/span&gt;一个不引用外部jar项目的打包。&lt;/p&gt;


&lt;p&gt;&lt;span&gt;第二种情况：&lt;strong&gt;&lt;strong&gt;没有引用外部jar的项目打包&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;当我们引用了外部jar后，使用eclipse自带的export打包略显繁琐。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;步骤一：&lt;/strong&gt;准备主清单文件 “ &lt;strong&gt;MAINFEST.MF&lt;/strong&gt; ”，放在项目的文件夹下面。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;MAINFEST.MF是jar的配置文件，第一行定义版本，第二行指出外部jar的路径，第三行是主类指示，第四行是空行。&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; Manifest-Version: &lt;span&gt;1.0&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; Class-Path: lib/&lt;span&gt;RXTXcomm.jar
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; Main-Class: com.main.Client&lt;br/&gt;4 
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;值得注意的是，MAINFEST.MF编写需要严格规范，稍有不慎将会导致jar执行无效&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;第一行不能空，行与行之间不能有空行，每一行的最后一个字符不能是空格
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;最后一行一定是空行
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; &lt;span&gt;每个属性的名称和值之间（冒号后面）一定要有空格
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; 文件的每一行都不能超过72个字节（一般是70个ASCII字母加上回车换行符）；如果72个字节不够用，则另起一行并以空格开头：以空格开头的行都被视为前一行的续行。
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;详细规则这篇文章有讲到 &lt;a href=&quot;https://www.2cto.com/kf/201305/208332.html&quot; target=&quot;_blank&quot;&gt;MANIFEST.MF文件编写的注意事项&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;步骤二：&lt;/strong&gt;与没有外部jar的项目一样，像上面那样先执行到&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/tianyanzhi/p/8067239.html#s4&quot;&gt;步骤三&lt;/a&gt;&lt;/span&gt;，不同的是要选着现有的清单，然后点击完成。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219222116240-602832622.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;以上就是第一种方法的两种情况，至此，我们已经可以生成jar包了。（如何运行jar文件？点击 &lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/tianyanzhi/p/8067239.html#q1&quot;&gt;这里&lt;/a&gt;&lt;/span&gt;）&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt; 第一种：利用eclipse插件Fat jar打包jar&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 步骤一：&lt;/strong&gt;先给eclipse安装好&lt;strong&gt;Fat jar插件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Fat jar 更新站点：  &lt;strong&gt;http://kurucz-grafika.de/fatjar&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219222954225-938963403.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;待文件加载出来后点击全部选中，一直下一步知道完成，会提示重启，安装完成。（Fat jar安装报错？点击 &lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/tianyanzhi/p/8067239.html#q2&quot;&gt;这里&lt;/a&gt;&lt;/span&gt;）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;步骤二：&lt;/strong&gt;右键点击项目名称，会看到&lt;strong&gt;build fat jar&lt;/strong&gt;，点击&lt;strong&gt;。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219224123365-697112152.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;步骤三：&lt;/strong&gt;配置jar的存放位置以及main类。&lt;/p&gt;
&lt;p&gt;红框内为必填，main-class点击browse选择主类。（无法点击browse？点击 &lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/tianyanzhi/p/8067239.html#q3&quot;&gt;此处&lt;/a&gt;&lt;/span&gt; 查看解决方法）&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219224354881-465153087.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;步骤四：&lt;/strong&gt;选择要打包的文件以及外部jar，点击完成。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219224826959-2037407500.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;至此，我们完成了用fat jar插件打包含有外部jar的项目工程。&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt; 中途可能遇到的问题以及解决方法&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p id=&quot;q1&quot;&gt; 问题一：&lt;strong&gt;打包好jar 文件后如何运行？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;解决方法：&lt;/p&gt;
&lt;p&gt;第一种方法：cmd下直接键入Java -jar xxx.jar  开始运行。（可能需要切换盘符与文件夹，方法点 &lt;a href=&quot;https://jingyan.baidu.com/article/5552ef473e2df6518ffbc916.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;这里&lt;/span&gt;&lt;/a&gt;）&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219225758756-232110319.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;（如图是放在C盘用户&amp;gt;chen下面的jar）&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;第二种方法：新建一个批处理文件，内容：Java -jar xxx.jar。放在与jar包同一个文件夹下面即可，然后双击运行查看效果。&lt;/p&gt;

&lt;p&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219230350459-1657706975.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p id=&quot;q2&quot;&gt;问题二：&lt;strong&gt;安装Fat jar提示出错怎么办？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;解决方法：&lt;/p&gt;
&lt;p&gt;在eclipse中&lt;/p&gt;
&lt;p&gt;Help -&amp;gt; Install New Software... -&amp;gt; Work with&lt;/p&gt;
&lt;p&gt;-&amp;gt; 选择“The Eclipse Project Updates - http://download.eclipse.org/eclipse/updates/4.7”&lt;/p&gt;
&lt;p&gt;-&amp;gt; 勾选&quot;Eclipse Tests,tools, Examples, and Extras&quot; 下的 &quot;Eclipse 2.0 Style Plugin Support&quot;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219231225615-233700824.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;安装完后再安装Fat jar即可&lt;/p&gt;

&lt;p id=&quot;q3&quot;&gt; 问题三：&lt;strong&gt;为什么我的main-class无法browse文件？&lt;/strong&gt;（猜测可能有eclipse与Fat jar的版本兼容问题）&lt;/p&gt;
&lt;p&gt; 解决方法：&lt;/p&gt;
&lt;p&gt;先用eclipse自带的export查看main-class名字（export方法如 &lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/tianyanzhi/p/8067239.html#s4&quot;&gt;上面&lt;/a&gt;&lt;/span&gt;），再复制粘贴填下去继续步骤。&lt;/p&gt;
&lt;p&gt;一般main-class为 &lt;span&gt;&lt;strong&gt;包名.主类名&lt;/strong&gt;&lt;/span&gt; ，可能不带Java、main等后缀&lt;/p&gt;

&lt;p&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1266294/201712/1266294-20171219232058928-2019469472.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;注：文中所用到的软件及版本如下&lt;/p&gt;
&lt;p&gt;eclips oxygen with官译插件&lt;/p&gt;
&lt;p&gt;jdk 9&lt;/p&gt;
&lt;p&gt;Fat jar插件&lt;/p&gt;

</description>
<pubDate>Tue, 19 Dec 2017 15:48:00 +0000</pubDate>
<dc:creator>天厌之</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/tianyanzhi/p/8067239.html</dc:identifier>
</item>
<item>
<title>PHP之外观模式 - feiffy</title>
<link>http://www.cnblogs.com/feifeifanye/p/8068327.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/feifeifanye/p/8068327.html</guid>
<description>&lt;h3 id=&quot;外观facade模式&quot;&gt;外观(Facade)模式&lt;/h3&gt;
&lt;p&gt;当使用子系统的代码时，你也许会发现自己过于深入地调用子系统的逻辑代码。如果子系统代码总是在不断变化，而你的代码却又在许多不同地方与子系统代码交互，那么随着子系统的发展，你也许会发现维护代码变得非常困难。&lt;/p&gt;
&lt;p&gt;在项目中集成复杂的第三方代码，或在系统中逐渐形成大量仅在系统自身内部有用的代码，在这些情况下，你总可以应用外观模式，为复杂的系统创建一个简单、清晰的接口。&lt;/p&gt;
&lt;p&gt;假设有下面一段很乱的代码，其功能是从文件中获取log信息并将它转换为对象：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;20&quot;&gt;
&lt;pre class=&quot;sourceCode php&quot;&gt;
&lt;code class=&quot;sourceCode php&quot;&gt;&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; getProductFileLines&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$file&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt;
{
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$file&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
}

&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; getProductObjectFromID&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$productname&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt;
{
    &lt;span class=&quot;co&quot;&gt;// 一些数据库查询&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Product&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$productname&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
}

&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; getNameFromLine&lt;span class=&quot;ot&quot;&gt;()&lt;/span&gt;
{
    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;fu&quot;&gt;preg_match&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;/.*-(.*)\s\d+/&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt; {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;str_replace&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;'_'&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;' '&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;]);&lt;/span&gt;
    }
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
}

&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; getIDFromLine&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt;
{
    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;fu&quot;&gt;preg_match&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;/^(\d{1,3})-/&quot;&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;))&lt;/span&gt; {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$array&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;];&lt;/span&gt;
    }
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; -&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
}

&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Product&lt;span class=&quot;ot&quot;&gt;()&lt;/span&gt;
{
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt;
    {
        &lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;id = &lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;id = &lt;span class=&quot;kw&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们的目的是将包含类似下面数据的文件转换为一个对象数组：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt; 234-ladies_jumper 55
 532-gents_hat 44&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;客户端使用该功能时要调用所有的方法：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode php&quot;&gt;
&lt;code class=&quot;sourceCode php&quot;&gt;&lt;span class=&quot;kw&quot;&gt;$lines&lt;/span&gt; = getProductFileLines&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;'text.txt'&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;$objects&lt;/span&gt; = &lt;span class=&quot;fu&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$lines&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt; {
    &lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt; = getIDFromLine&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;$name&lt;/span&gt; = getNameFromLine&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;$objects&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;]&lt;/span&gt; = getProductObjectFromID&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果在项目中直接调用这些方法，那么我们的代码会和子系统紧紧耦合在一起。当子系统变化时，或者我们决定将其与子系统完全断开时，代码就会出问题。&lt;/p&gt;
&lt;p&gt;下面这个简单的类为上面的过程式代码提供了一个接口：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode php&quot;&gt;
&lt;code class=&quot;sourceCode php&quot;&gt;&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; ProductFacade
{
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$products&lt;/span&gt; = &lt;span class=&quot;fu&quot;&gt;array&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;();&lt;/span&gt;
    
    &lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;__construct&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$file&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt;
    {
        &lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;&lt;span class=&quot;fu&quot;&gt;file&lt;/span&gt; = &lt;span class=&quot;kw&quot;&gt;$file&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;compile&lt;span class=&quot;ot&quot;&gt;();&lt;/span&gt;
    }

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; complie&lt;span class=&quot;ot&quot;&gt;()&lt;/span&gt;
    {
        &lt;span class=&quot;kw&quot;&gt;$lines&lt;/span&gt; = getProductFileLines&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;line&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;foreach&lt;/span&gt; &lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$lines&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt; {
            &lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt; = getIDFromLine&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;$name&lt;/span&gt; = getNameFromLine&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$line&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;products&lt;span class=&quot;ot&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;]&lt;/span&gt; = getProductObjectFromID&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$name&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
        }
    }

    &lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; getProducts&lt;span class=&quot;ot&quot;&gt;()&lt;/span&gt;
    {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;products&lt;span class=&quot;ot&quot;&gt;;&lt;/span&gt;
    }

    &lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; getProduct&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;)&lt;/span&gt;
    {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;$this&lt;/span&gt;-&amp;gt;product&lt;span class=&quot;ot&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;$id&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;];&lt;/span&gt;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;现在，从一个log文件访问Product对象就简单多了：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode php&quot;&gt;
&lt;code class=&quot;sourceCode php&quot;&gt;&lt;span class=&quot;kw&quot;&gt;$facade&lt;/span&gt; = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ProductFacade&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;'test.txt'&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;$facade&lt;/span&gt;-&amp;gt;getProduct&lt;span class=&quot;ot&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dv&quot;&gt;234&lt;/span&gt;&lt;span class=&quot;ot&quot;&gt;);&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;外观模式的好处：(1)对于调用者来说，访问代码变得简洁、非常方便.(2),由于只在一个地方调用子系统，减少了出错的可能.(3),Facade类还能使调用者避免不正确地使用内部方法，从而减少错误的发生。&lt;/p&gt;
&lt;p&gt;注1：这是《深入PHP：面对对象、模式与实践》第十章的部分内容（其他的都看不懂，逃～）&lt;br/&gt;注2：此文章也可以在我单独的博客里面看到: &lt;a href=&quot;https://feiffy.cc/%E3%80%8A%E6%B7%B1%E5%85%A5PHP%EF%BC%9A%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1%E3%80%81%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%AE%9E%E8%B7%B5%E3%80%8B#.E5.A4.96.E8.A7.82.28Facade.29.E6.A8.A1.E5.BC.8F&quot;&gt;https://feiffy.cc/%E3%80%8A%E6%B7%B1%E5%85%A5PHP%EF%BC%9A%E9%9D%A2%E5%AF%B9%E5%AF%B9%E8%B1%A1%E3%80%81%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%AE%9E%E8%B7%B5%E3%80%8B#.E5.A4.96.E8.A7.82.28Facade.29.E6.A8.A1.E5.BC.8F&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 15:43:00 +0000</pubDate>
<dc:creator>feiffy</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/feifeifanye/p/8068327.html</dc:identifier>
</item>
<item>
<title>AspNet Core Api Restful +Swagger  发布IIS  实现微服务之旅   （二） - 乐途</title>
<link>http://www.cnblogs.com/szlblog/p/8068311.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/szlblog/p/8068311.html</guid>
<description>&lt;p&gt;上一步我们创建好CoreApi&lt;/p&gt;
&lt;p&gt;接下来在框架中加入 Swagger  并发布  到 IIS&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（1）首先点击依赖项》管理Nuget包&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219224218256-677869701.png&quot; alt=&quot;&quot; width=&quot;338&quot; height=&quot;143&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（2）输入 Swashbuckle.aspnetCore  比如：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219224359131-647329100.png&quot; alt=&quot;&quot; width=&quot;834&quot; height=&quot;408&quot;/&gt;&lt;/p&gt;
&lt;p&gt;图中两个Swagger 插件需要我们安装   &lt;span&gt;注意：我这里已经安装过显示的是 卸载&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; （3） 在框架中 添加Swagger 注解的帮助类   HttpHeaderOperation  下面是我完整的.CS文件&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34.5&quot;&gt;&lt;img id=&quot;code_img_closed_38668675-3f5d-4a52-9207-176276cd25fc&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_38668675-3f5d-4a52-9207-176276cd25fc&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_38668675-3f5d-4a52-9207-176276cd25fc&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;64&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.Generic;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Linq;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Threading.Tasks;


&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;添加引用&lt;/span&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Swashbuckle.AspNetCore.Swagger;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Swashbuckle.AspNetCore.SwaggerGen;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.AspNetCore.Authorization;
&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; WebCoreApi
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HttpHeaderOperation : IOperationFilter
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 实现接口
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;operation&quot;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;context&quot;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Apply(Operation operation, OperationFilterContext context)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (operation.Parameters == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            {
                operation.Parameters &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; List&amp;lt;IParameter&amp;gt;&lt;span&gt;();
            }

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; actionAttrs =&lt;span&gt; context.ApiDescription.ActionAttributes();

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; isAuthorized = actionAttrs.Any(a =&amp;gt; a.GetType() == &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(AuthorizeAttribute));

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (isAuthorized == &lt;span&gt;false&lt;/span&gt;) &lt;span&gt;//&lt;/span&gt;&lt;span&gt;提供action都没有权限特性标记，检查控制器有没有&lt;/span&gt;
&lt;span&gt;            {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; controllerAttrs =&lt;span&gt; context.ApiDescription.ControllerAttributes();

                isAuthorized &lt;/span&gt;= controllerAttrs.Any(a =&amp;gt; a.GetType() == &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(AuthorizeAttribute));
            }

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; isAllowAnonymous = actionAttrs.Any(a =&amp;gt; a.GetType() == &lt;span&gt;typeof&lt;/span&gt;&lt;span&gt;(AllowAnonymousAttribute));

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (isAuthorized &amp;amp;&amp;amp; isAllowAnonymous == &lt;span&gt;false&lt;/span&gt;&lt;span&gt;)
            {
                operation.Parameters.Add(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; NonBodyParameter()
                {
                    Name &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Authorization&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;添加Authorization头部参数&lt;/span&gt;
                    In = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;header&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    Type &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    Required &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;
                });
            }
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;（4） 添加 Swagger 的·服务方法 在  Startup中的  ConfigureServices方法里&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36.5&quot;&gt;&lt;img id=&quot;code_img_closed_5fc87bcd-c473-417f-87f6-5738f932570d&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_5fc87bcd-c473-417f-87f6-5738f932570d&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_5fc87bcd-c473-417f-87f6-5738f932570d&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;68&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ConfigureServices(IServiceCollection services)
        {
            services.AddMvc();
            services.AddSwaggerGen(x &lt;/span&gt;=&amp;gt;&lt;span&gt;
            {
                x.SwaggerDoc(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Info
                {
                    Version &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;v1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;//&lt;/span&gt;&lt;span&gt;版本号&lt;/span&gt;
                    Title = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Szl接口文档&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;//&lt;/span&gt;&lt;span&gt;标题&lt;/span&gt;
                    Description = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RESTful API &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    TermsOfService &lt;/span&gt;= &lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;//&lt;/span&gt;&lt;span&gt;服务的条件
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;第一个参数Name 创建人名称/也可以是 负责人名称     第二个参数 联系邮箱&lt;/span&gt;
                    Contact = &lt;span&gt;new&lt;/span&gt; Contact { Name = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Su&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Email = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;szl_0000@126.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, Url = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;北京&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; }
                });

                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取设置配置信息的 的路径对象   swagger界面配置&lt;/span&gt;
                &lt;span&gt;var&lt;/span&gt; basePath =&lt;span&gt; PlatformServices.Default.Application.ApplicationBasePath;
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; xmlPath = Path.Combine(basePath, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;AspNetCoreApiSwagger.xml&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                x.IncludeXmlComments(xmlPath);
                x.OperationFilter&lt;/span&gt;&amp;lt;HttpHeaderOperation&amp;gt;(); &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 添加httpHeader参数&lt;/span&gt;
&lt;span&gt;            });
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;（5）添加 Swagger 启动项 在  Startup中的  Configure方法里&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33.5&quot;&gt;&lt;img id=&quot;code_img_closed_3d51ea2e-b78b-443c-8699-87d02503175f&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_3d51ea2e-b78b-443c-8699-87d02503175f&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_3d51ea2e-b78b-443c-8699-87d02503175f&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Configure(IApplicationBuilder app, IHostingEnvironment env)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (env.IsDevelopment())
            {
                app.UseDeveloperExceptionPage();
            }

            app.UseMvc();
            app.UseSwagger();
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 指定站点&lt;/span&gt;
            app.UseSwaggerUI(x =&amp;gt;&lt;span&gt;
            {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;做出一个限制信息 描述&lt;/span&gt;
                x.SwaggerEndpoint(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/swagger/v1/swagger.json&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;TwBusManagement API V1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;显示在发出请求时发送的标题&lt;/span&gt;
&lt;span&gt;                x.ShowRequestHeaders();

            });
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;（6） 在框架自动生成的 Api 控制器里Post的方法上加入 注解（其他方法也可以，我只是举例）&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;&lt;img id=&quot;code_img_closed_815423a2-4d44-4ec4-bdeb-768f254f5fd1&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_815423a2-4d44-4ec4-bdeb-768f254f5fd1&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_815423a2-4d44-4ec4-bdeb-768f254f5fd1&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;63&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; AspNet Core  Post请求
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;value&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;User类&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;remarks&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt;访问参数
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;     POST 
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;     {  
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;        &quot;value&quot;: &quot;0e7ad584-7788-4ab1-95a6-ca0a5b444cbb&quot;,  
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;     }  
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;   
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/remarks&amp;gt;&lt;/span&gt; 
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;response code=&quot;201&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;返回新创建项&lt;/span&gt;&lt;span&gt;&amp;lt;/response&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;response code=&quot;400&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;如果为空时&lt;/span&gt;&lt;span&gt;&amp;lt;/response&amp;gt;&lt;/span&gt; 
&lt;span&gt;
        [HttpPost]
        [ProducesResponseType(&lt;/span&gt;&lt;span&gt;typeof&lt;/span&gt;(User), &lt;span&gt;201&lt;/span&gt;&lt;span&gt;)]
        [ProducesResponseType(&lt;/span&gt;&lt;span&gt;typeof&lt;/span&gt;(User), &lt;span&gt;400&lt;/span&gt;&lt;span&gt;)]
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Post([FromBody]User value)
        {
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;注解的含义如下&lt;/p&gt;
&lt;p&gt;summary 用来描述 方法的作用&lt;/p&gt;
&lt;p&gt;remarks 用来描述传入的参数格式/也可以把调用的值放入里面&lt;/p&gt;
&lt;p&gt;response 定义两个返回状态&lt;/p&gt;
&lt;p&gt;User 类&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_32cbc470-0a23-4004-9725-743f9db5e97b&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_32cbc470-0a23-4004-9725-743f9db5e97b&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_32cbc470-0a23-4004-9725-743f9db5e97b&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 用户类
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; User
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 用户ID
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; UserID { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 用户名称
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; UserName { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 用户年龄
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; UserAge { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;（7）在框架中   添加 AspNetCoreApiSwagger.xml 文件  一定要注意的是  xml 文件必须定义一个根节点 不然会报错  ，XML的属性   改为 始终复制   （XML文件在 第四步骤中有用到）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219230013178-546823215.png&quot; alt=&quot;&quot; width=&quot;669&quot; height=&quot;102&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219230044521-1943278547.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（8）设置 项目的生成 输出路径&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219231949803-302205997.png&quot; alt=&quot;&quot; width=&quot;788&quot; height=&quot;303&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（9）  发布   以文件夹发布就行&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219232101381-1670565755.png&quot; alt=&quot;&quot; width=&quot;1067&quot; height=&quot;215&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（10）部署IIS 说一下注意点     改成无托管代码&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219232239303-219860094.png&quot; alt=&quot;&quot; width=&quot;800&quot; height=&quot;200&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（11）打开IIS服务  中的模块&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt; &lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219232712053-1977097293.png&quot; alt=&quot;&quot; width=&quot;934&quot; height=&quot;284&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（12）查看是否有  AspNetCoreModule  没有进行安装 我是在国外的网站下载的&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1027558/201712/1027558-20171219232821631-356555212.png&quot; alt=&quot;&quot; width=&quot;1450&quot; height=&quot;295&quot;/&gt;&lt;/p&gt;

&lt;p&gt;（13）  如果在运行部署的API  发生了错误&lt;/p&gt;
&lt;p&gt;我们在  Program  中加入  如代码所示  可以帮助我们准确定义的问题所在&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_956f3011-4c3c-4009-b849-18f3b9b5e2bf&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_956f3011-4c3c-4009-b849-18f3b9b5e2bf&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_956f3011-4c3c-4009-b849-18f3b9b5e2bf&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Program
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; Main(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;[] args)
        {
            BuildWebHost(args).Run();
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IWebHost BuildWebHost(&lt;span&gt;string&lt;/span&gt;[] args) =&amp;gt;&lt;span&gt;
            WebHost.CreateDefaultBuilder(args)
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;发布程序出现错误帮助定位详细错误信息
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; .UseKestrel()
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;.UseContentRoot(Directory.GetCurrentDirectory())
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;.UseSetting(&quot;detailedErrors&quot;, &quot;true&quot;)
      &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;.UseIISIntegration()&lt;/span&gt;
&lt;span&gt;
      .CaptureStartupErrors(&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;)
                .UseStartup&lt;/span&gt;&amp;lt;Startup&amp;gt;&lt;span&gt;()
                .Build();



    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;OK  今天就完成了，&lt;/p&gt;

&lt;p&gt;以后会描述一下 框架的基础知识  比如  应用程序的启动、日子、路由、静态文件、WebSockteS  等，&lt;/p&gt;
&lt;p&gt;等到基础描述过后，在框架中加入一些我闷在实战中用到的，希望大家多多指出错误不足之处，这是我的学习。&lt;/p&gt;

</description>
<pubDate>Tue, 19 Dec 2017 15:39:00 +0000</pubDate>
<dc:creator>乐途</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/szlblog/p/8068311.html</dc:identifier>
</item>
<item>
<title>从零开始构建docker基础镜像 - 风雨咒之无上密籍</title>
<link>http://www.cnblogs.com/flowerbirds/p/8067900.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/flowerbirds/p/8067900.html</guid>
<description>&lt;p&gt;　&lt;span&gt;段子&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　今年基本已经结束了，我问了很多朋友今年挣钱了没？大多朋友都有挣，而且挣得五花八门：有挣个屁的，有挣个锤子的，有挣个毛的，更有甚者挣个妹的，奢侈之极！最恐怖的是挣个鬼的！有的还可以，挣个球，下午我碰见一朋友，问今年挣了吗？他望着天空喃喃自语：挣个鸟！看吧，只要肯努力，什么都能挣到。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　年末将至，忽然发现，从创建开始到现在，整整一年时间，没有写过多少东西。为了留下一点痕迹，也是为了整理一下自己的收获，为17年画上一笔浓郁的色彩。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　最近在看一本入门级机器学习的书，里面的案例基本上是python实现的，所以想搭建python相关的环境，然后又想偷懒，有一个运行环境，可以轻松安装和编写使用，也可以在其他地方使用，编写工具首选jupyter notebook，当然，在大多数的书中也是比较推荐这个工具，自己之前也使用过，觉得不错。还有个问题就是想在其他地方使用python环境和这个工具，不需要重复安装，此刻，我想到的是docker。之前对docker只是简单的理解，为此，特意学习了一下docker，现做分享。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1089791/201712/1089791-20171219213634646-1910850634.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;上图就是docker的图标，这个图标对docker的含义阐释的还是比较全面：小鲸鱼代表的是船，船上的就是集装箱，所有的东西不管是什么，只要装在集装箱中，就可以方便的运输。docker公司的口号是Build，Ship，and Run Any App，Anywhere。docker的本意是码头工人，而在这里说是集装箱的话，比较贴切。所有需要运行的环境和程序，装入docker，然后需要运行的时候，就运行这个特定的docker容器，提供特定的服务。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　docker的通俗解析：&lt;a title=&quot;docker&quot; href=&quot;https://www.zhihu.com/question/22969309&quot; target=&quot;_blank&quot;&gt;点击这里&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　刚开始的时候，搞不清楚docker和虚拟机有什么区别，总感觉docker能干的事虚拟机也能，并且在使用的时候，总按照虚拟机的操作思路去做。那docker为什么会出现？&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　我在docker的官方网站找到了两张关于虚拟机和容器的区别：&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;容器 VS 虚拟机&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1089791/201712/1089791-20171219215101271-57007469.png&quot; alt=&quot;VM&quot; width=&quot;500&quot;/&gt;        &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1089791/201712/1089791-20171219215121100-452629993.png&quot; alt=&quot;COntainer&quot; width=&quot;500&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;容器和虚拟机具有相似的资源隔离和分配优势，但功能有所不同，因为容器虚拟化的是操作系统，而不是硬件，因此容器更容易移植，效率也更高。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　关于容器：&lt;a title=&quot;容器&quot; href=&quot;https://www.docker-cn.com/what-container&quot; target=&quot;_blank&quot;&gt;点击这里&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　对于docker做了简单的了解之后，就需要实际去体验一下安装和构建容器，本例使用centos6.5：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.安装docker相关软件&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[root@bogon ubuntu-&lt;span&gt;16.04&lt;/span&gt;]# &lt;strong&gt;rpm -ivh http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;dl.Fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm&lt;/span&gt;&lt;/strong&gt;
Retrieving http:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;dl.Fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm&lt;/span&gt;
warning: /var/tmp/rpm-tmp.KYucBm: Header V3 RSA/&lt;span&gt;SHA256 Signature, key ID 0608b895: NOKEY
Preparing...                ########################################### [&lt;/span&gt;&lt;span&gt;100&lt;/span&gt;%&lt;span&gt;]
   &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;:epel-release           ########################################### [&lt;span&gt;100&lt;/span&gt;%&lt;span&gt;]
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;]# &lt;span&gt;yum&lt;/span&gt; -y &lt;span&gt;install&lt;/span&gt; docker-&lt;span&gt;io
Loaded plugins: fastestmirror, refresh&lt;/span&gt;-&lt;span&gt;packagekit, security
Loading mirror speeds from cached hostfile
...

Complete&lt;/span&gt;!&lt;span&gt;
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;]# service docker start
Starting cgconfig service:                                 [  OK  ]
Starting docker:                                       [  OK  ]
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;]# chkconfig docker on
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;]#&lt;/span&gt; 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;使用service docker status查看docker服务状态的时候，发现没有启动 &lt;strong&gt;docker dead but pid file exists&lt;/strong&gt;，执行docker相关命令（如docker ps）的时候会出现&lt;strong&gt;Cannot connect to the Docker daemon. Is 'docker -d' running on this host?&lt;/strong&gt;，需要解决这个问题，如下：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[root@bogon ubuntu-&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;]# service docker status
docker dead but pid &lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt; exists
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;]#&lt;span&gt;yum&lt;/span&gt;-config-manager --&lt;span&gt;enable public_ol6_latest
Loaded plugins: fastestmirror, refresh&lt;/span&gt;-&lt;span&gt;packagekit
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;]# &lt;span&gt;yum&lt;/span&gt; &lt;span&gt;install&lt;/span&gt; -y device-mapper-event-&lt;span&gt;libs
Loaded plugins: fastestmirror, refresh&lt;/span&gt;-&lt;span&gt;packagekit, security
...&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.构建基础镜像&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;在使用docker的时候后，可以通过命令docker pull &amp;lt;镜像名称&amp;gt;从镜像库中获取，但是有时候会出现网络问题或是其他原因，导致无法拉取，在docker中国官网介绍使用通过 Docker 官方镜像加速来解决无法拉取：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;您可以使用以下命令直接从该镜像加速地址进行拉取：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;code&gt;$ docker pull registry.docker-cn.com/myname/myrepo:mytag&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;例如:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;highlighter-rouge&quot; readability=&quot;7&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;code&gt;$ docker pull registry.docker-cn.com/library/ubuntu:16.04&lt;/code&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;　　原文如下：&lt;a title=&quot;Docker 中国官方镜像加速&quot; href=&quot;https://www.docker-cn.com/registry-mirror&quot; target=&quot;_blank&quot;&gt;点击这里&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　而在本文中，我使用Dockerfile来构建基础镜像ubuntu 16.04（xenial），其对应的Dockerfile的Github地址为：&lt;a title=&quot;(xenial/Dockerfile)&quot; href=&quot;https://github.com/tianon/docker-brew-ubuntu-core/blob/1637ff264a1654f77807ce53522eff7f6a57b773/xenial/Dockerfile&quot; target=&quot;_blank&quot;&gt;点击这里&lt;/a&gt;，搜索方式为在&lt;a href=&quot;http://www.cnblogs.com/flowerbirds/p/hub.docker.com&quot; target=&quot;_blank&quot;&gt;hub.docker.com&lt;/a&gt;中搜索ubuntu，即可看见对应的镜像信息。Dockerfile内容如下：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
FROM scratch
ADD ubuntu-xenial-core-cloudimg-amd64-root.tar.gz /

# a few minor docker-specific tweaks
# see https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap
RUN set -xe \
        \
# https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap#L40-L48
        &amp;amp;&amp;amp; echo '#!/bin/sh' &amp;gt; /usr/sbin/policy-rc.d \
        &amp;amp;&amp;amp; echo 'exit 101' &amp;gt;&amp;gt; /usr/sbin/policy-rc.d \
        &amp;amp;&amp;amp; chmod +x /usr/sbin/policy-rc.d \
        \
# https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap#L54-L56
        &amp;amp;&amp;amp; dpkg-divert --local --rename --add /sbin/initctl \
        &amp;amp;&amp;amp; cp -a /usr/sbin/policy-rc.d /sbin/initctl \
        &amp;amp;&amp;amp; sed -i 's/^exit.*/exit 0/' /sbin/initctl \
        \
# https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap#L71-L78
        &amp;amp;&amp;amp; echo 'force-unsafe-io' &amp;gt; /etc/dpkg/dpkg.cfg.d/docker-apt-speedup \
        \
# https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap#L85-L105
        &amp;amp;&amp;amp; echo 'DPkg::Post-Invoke { &quot;rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true&quot;; };' &amp;gt; /etc/apt/apt.conf.d/docker-clean \
        &amp;amp;&amp;amp; echo 'APT::Update::Post-Invoke { &quot;rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true&quot;; };' &amp;gt;&amp;gt; /etc/apt/apt.conf.d/docker-clean \
        &amp;amp;&amp;amp; echo 'Dir::Cache::pkgcache &quot;&quot;; Dir::Cache::srcpkgcache &quot;&quot;;' &amp;gt;&amp;gt; /etc/apt/apt.conf.d/docker-clean \
        \
# https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap#L109-L115
        &amp;amp;&amp;amp; echo 'Acquire::Languages &quot;none&quot;;' &amp;gt; /etc/apt/apt.conf.d/docker-no-languages \
        \
# https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap#L118-L130
        &amp;amp;&amp;amp; echo 'Acquire::GzipIndexes &quot;true&quot;; Acquire::CompressionTypes::Order:: &quot;gz&quot;;' &amp;gt; /etc/apt/apt.conf.d/docker-gzip-indexes \
        \
# https://github.com/docker/docker/blob/9a9fc01af8fb5d98b8eec0740716226fadb3735c/contrib/mkimage/debootstrap#L134-L151
        &amp;amp;&amp;amp; echo 'Apt::AutoRemove::SuggestsImportant &quot;false&quot;;' &amp;gt; /etc/apt/apt.conf.d/docker-autoremove-suggests

# delete all the apt list files since they're big and get stale quickly
RUN rm -rf /var/lib/apt/lists/*
# this forces &quot;apt-get update&quot; in dependent images, which is also good

# enable the universe
RUN sed -i 's/^#\s*\(deb.*universe\)$/\1/g' /etc/apt/sources.list

# make systemd-detect-virt return &quot;docker&quot;
# See: https://github.com/systemd/systemd/blob/aa0c34279ee40bce2f9681b496922dedbadfca19/src/basic/virt.c#L434
RUN mkdir -p /run/systemd &amp;amp;&amp;amp; echo 'docker' &amp;gt; /run/systemd/container

# overwrite this with 'CMD []' in a dependent Dockerfile
CMD [&quot;/bin/bash&quot;]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;现在对Dockerfile中的相关命令解释一下：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;FROM&lt;/strong&gt; 指的是依赖的基础镜像，如scratch表示的是空白的，从零开始的。依赖的镜像可以是本地的，也可以是远程库的&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;ADD&lt;/strong&gt; 指的是添加本地文件到镜像中，如果遇到linux可解压格式文件，会自动解压，这就是为什么整个文件中没有对tar.gz进行显式解压&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;RUN&lt;/strong&gt; 运行命令，如安装软件的相关命令&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;CMD&lt;/strong&gt; 设置启动Container时默认执行的命令，这个可以在启动容器时覆盖&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;　　目前，这个Dockerfile中涉及的命令就这几个，其他等以后遇到再进行说明。解释完毕，开始构建：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[root@bogon ubuntu-&lt;span&gt;16.04&lt;/span&gt;]# docker &lt;span&gt;ps&lt;/span&gt;&lt;span&gt;
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;]# docker images
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;]# &lt;span&gt;pwd&lt;/span&gt;
/home/ml/ubuntu-&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;]# ll -&lt;span&gt;h
total 40M
&lt;/span&gt;-rw-rw-r--. &lt;span&gt;1&lt;/span&gt; ml ml &lt;span&gt;2&lt;/span&gt;.8K Dec &lt;span&gt;19&lt;/span&gt; &lt;span&gt;12&lt;/span&gt;:&lt;span&gt;37&lt;/span&gt;&lt;span&gt; Dockerfile
&lt;/span&gt;-rw-rw-r--. &lt;span&gt;1&lt;/span&gt; ml ml  40M Dec &lt;span&gt;19&lt;/span&gt; &lt;span&gt;12&lt;/span&gt;:&lt;span&gt;39&lt;/span&gt; ubuntu-xenial-core-cloudimg-amd64-root.&lt;span&gt;tar&lt;/span&gt;&lt;span&gt;.gz
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;]# 
[root@bogon ubuntu&lt;/span&gt;-&lt;span&gt;16.04&lt;/span&gt;]# docker build -t ubuntu:&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt; .
Sending build context to Docker daemon &lt;/span&gt;&lt;span&gt;41.94&lt;/span&gt;&lt;span&gt; MB
Sending build context to Docker daemon 
Step &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; : FROM scratch
 &lt;/span&gt;---&amp;gt;&lt;span&gt; 
Step &lt;/span&gt;&lt;span&gt;1&lt;/span&gt; : ADD ubuntu-xenial-core-cloudimg-amd64-root.&lt;span&gt;tar&lt;/span&gt;.gz /
 ---&amp;gt;&lt;span&gt; 537c2f6dd023
Removing intermediate container dee7679a7ee2
Step &lt;/span&gt;&lt;span&gt;2&lt;/span&gt; : RUN set -xe &amp;amp;&amp;amp; &lt;span&gt;echo&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;#!/bin/sh&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &amp;gt; /usr/sbin/policy-rc.d &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;span&gt;echo&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;exit 101&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &amp;gt;&amp;gt; /usr/sbin/policy-rc.d &amp;amp;&amp;amp; &lt;span&gt;chmod&lt;/span&gt; +x /usr/sbin/policy-rc.d &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br/&gt;&lt;span&gt;dpkg-divert --local --rename --add /sbin/initctl &amp;amp;&amp;amp; &lt;span&gt;cp&lt;/span&gt; -a /usr/sbin/policy-rc.d /sbin/initctl     &amp;amp;&amp;amp; &lt;span&gt;sed&lt;/span&gt; -i &lt;span&gt;'&lt;/span&gt;&lt;span&gt;s/^exit.*/exit 0/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; /sbin/initctl  &amp;amp;&amp;amp; \&lt;/span&gt;&lt;br/&gt;&lt;span&gt; ...---&amp;gt; Running &lt;span&gt;in&lt;/span&gt;&lt;span&gt; 41d719b68981
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; #!/bin/&lt;span&gt;sh&lt;/span&gt;
+ &lt;span&gt;echo&lt;/span&gt; exit &lt;span&gt;101&lt;/span&gt;
+ &lt;span&gt;chmod&lt;/span&gt; +x /usr/sbin/policy-&lt;span&gt;rc.d
&lt;/span&gt;+ dpkg-divert --local --rename --add /sbin/&lt;span&gt;initctl
Adding &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;local diversion of /sbin/initctl to /sbin/initctl.distrib&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
+ &lt;span&gt;cp&lt;/span&gt; -a /usr/sbin/policy-rc.d /sbin/&lt;span&gt;initctl
&lt;/span&gt;+ &lt;span&gt;sed&lt;/span&gt; -i s/^exit.*/exit &lt;span&gt;0&lt;/span&gt;/ /sbin/&lt;span&gt;initctl
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; force-unsafe-&lt;span&gt;io
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; DPkg::Post-Invoke { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;; };
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; APT::Update::Post-Invoke { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;rm -f /var/cache/apt/archives/*.deb /var/cache/apt/archives/partial/*.deb /var/cache/apt/*.bin || true&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;; };
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; Dir::Cache::pkgcache &lt;span&gt;&quot;&quot;&lt;/span&gt;; Dir::Cache::srcpkgcache &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; Acquire::Languages &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;none&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; Acquire::GzipIndexes &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;; Acquire::CompressionTypes::Order:: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;gz&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;+ &lt;span&gt;echo&lt;/span&gt; Apt::AutoRemove::SuggestsImportant &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
 &lt;/span&gt;---&amp;gt;&lt;span&gt; c49bdbf61888
Removing intermediate container 41d719b68981
Step &lt;/span&gt;&lt;span&gt;3&lt;/span&gt; : RUN &lt;span&gt;rm&lt;/span&gt; -rf /var/lib/apt/lists&lt;span&gt;/*&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;
 ---&amp;gt; Running in 6389964016a2
 ---&amp;gt; 4508181f7442
Removing intermediate container 6389964016a2
Step 4 : RUN sed -i 's/^#\s*\(deb.*universe\)$/\1/g' /etc/apt/sources.list
 ---&amp;gt; Running in cbed2b28c988
 ---&amp;gt; 8eed06df8f19
Removing intermediate container cbed2b28c988
Step 5 : RUN mkdir -p /run/systemd &amp;amp;&amp;amp; echo 'docker' &amp;gt; /run/systemd/container
 ---&amp;gt; Running in aff40dbc6e05
 ---&amp;gt; 19c96e7912a4
Removing intermediate container aff40dbc6e05
Step 6 : CMD /bin/bash
 ---&amp;gt; Running in 2469ee9d7251
 ---&amp;gt; 77e565a65647
Removing intermediate container 2469ee9d7251
Successfully built 77e565a65647
[root@bogon ubuntu-16.04]# docker images 
REPOSITORY          TAG                 IMAGE ID            CREATED             VIRTUAL SIZE
ubuntu              16.04               77e565a65647        33 seconds ago      110.5 MB
[root@bogon ubuntu-16.04]#&lt;/span&gt; &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;从构建日志可以看出，每条命令为一个step，执行完成之后会产生一个id，类似于6389964016a2，其实，这就是镜像的分层，一层层堆积在一起。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　到此，一个ubuntu16.04版的docker镜像构建完成，那么接下来就是运行&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.运行镜像&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　&lt;span&gt;　使用docker run命令运行：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
[root@bogon ubuntu-&lt;span&gt;16.04&lt;/span&gt;]# docker run -it ubuntu:&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;
root@5ea0b95e8641:&lt;/span&gt;/# &lt;span&gt;cat&lt;/span&gt; /etc/&lt;span&gt;issue
Ubuntu &lt;/span&gt;&lt;span&gt;16.04&lt;/span&gt;.&lt;span&gt;3&lt;/span&gt;&lt;span&gt; LTS \n \l

root@5ea0b95e8641:&lt;/span&gt;/# &lt;span&gt;ps&lt;/span&gt; -&lt;span&gt;ef
UID         PID   PPID  C STIME TTY          TIME CMD
root          &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;      &lt;span&gt;0&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;47&lt;/span&gt; ?        &lt;span&gt;00&lt;/span&gt;:&lt;span&gt;00&lt;/span&gt;:&lt;span&gt;00&lt;/span&gt; /bin/&lt;span&gt;bash
root         &lt;/span&gt;&lt;span&gt;11&lt;/span&gt;      &lt;span&gt;1&lt;/span&gt;  &lt;span&gt;0&lt;/span&gt; &lt;span&gt;22&lt;/span&gt;:&lt;span&gt;47&lt;/span&gt; ?        &lt;span&gt;00&lt;/span&gt;:&lt;span&gt;00&lt;/span&gt;:&lt;span&gt;00&lt;/span&gt; &lt;span&gt;ps&lt;/span&gt; -&lt;span&gt;ef
root@5ea0b95e8641:&lt;/span&gt;/# 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　&lt;span&gt;　其中5ea0b95e8641为当前容器的ID，进入容器查看所有进程，pid为1的时bash，linux不应该时init吗？其实，这就是容器与虚拟机的差别，容器的init进程就是主机上docker服务进程，每个容器只是一个进程而已。其中的参数-it指的是前端打开并分配一个终端，-d为在后台运行，我们试试当前这个可不可以使用-d：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
[root@bogon ~]# docker run -d ubuntu:&lt;span&gt;16.04&lt;/span&gt;&lt;span&gt;
43ae7ded8e6920b55b8e744b52ffce37b89b25182fcacdc10a5414e6621abff3
[root@bogon &lt;/span&gt;~]# docker &lt;span&gt;ps&lt;/span&gt;&lt;span&gt;
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
[root@bogon &lt;/span&gt;~]# docker run -d ubuntu:&lt;span&gt;16.04&lt;/span&gt; /bin/&lt;span&gt;bash
77f3ec2ebfb3f154772683eeea8ca7e2ba3b7756b1488f5f09818af424e0298e
[root@bogon &lt;/span&gt;~]# docker &lt;span&gt;ps&lt;/span&gt;&lt;span&gt;
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;可以明显的开出来，使用-d后，docker ps查不到任何运行的容器，如果使用-it的话，在别的shell下使用docker ps查看：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
[root@bogon ml]# docker &lt;span&gt;ps&lt;/span&gt;&lt;span&gt;
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
8341a332c788        ubuntu:&lt;/span&gt;&lt;span&gt;16.04&lt;/span&gt;        &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/bin/bash&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;         &lt;span&gt;18&lt;/span&gt; seconds ago      Up &lt;span&gt;18&lt;/span&gt; seconds                           drunk_cori  
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;可以看到，有容器在运行，因为我们没有退出。由此可以看出，容器其实以进程方式运行，执行完成/bin/bash之后，进程消亡，所以容器也就不存在，如果容器里面是一个tomcat服务，则是另外一种情况了。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;strong&gt;基础镜像基本构建完成，后面的环境搭建，都将基于这个镜像构建。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 19 Dec 2017 15:32:00 +0000</pubDate>
<dc:creator>风雨咒之无上密籍</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/flowerbirds/p/8067900.html</dc:identifier>
</item>
<item>
<title>CSS中line-height与vertical-align - 若若若邪</title>
<link>http://www.cnblogs.com/jaycewu/p/8068130.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jaycewu/p/8068130.html</guid>
<description>&lt;blockquote readability=&quot;0.65217391304348&quot;&gt;
&lt;p&gt;参考文章：&lt;br/&gt;&lt;a href=&quot;http://mp.weixin.qq.com/s?__biz=MzAwNzAzMDY1NQ==&amp;amp;mid=206445305&amp;amp;idx=1&amp;amp;sn=899beb2d7e98194c000f9818c79f7778&amp;amp;scene=0#wechat_redirect&quot;&gt;深入了解CSS的line-height属性&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;http://mxd.tencent.com/vertical-align&quot;&gt;Vertical-Align: 你需要知道的所有事【译】&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;http://christopheraue.net/2014/03/05/vertical-align/&quot;&gt;Vertical-Align: All You Need To Know&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;什么是行间距或者行高line-height&quot;&gt;1、什么是行间距或者行高（line-height）&lt;/h3&gt;
&lt;p&gt;line-height是指文本行基线间的垂直距离。&lt;/p&gt;
&lt;h4 id=&quot;顶线中线基线底线&quot;&gt;1.1、顶线，中线，基线，底线&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-757a5ead60960914.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;从上到下分别是顶线，中线，基线，底线。vertical-align的四个属性top,middle,baseline,bottom就是与这四条线有关。&lt;/p&gt;
&lt;h4 id=&quot;行高行距半行距&quot;&gt;1.2、行高，行距，半行距&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;行高是指上下文本行基线间的垂直距离。（上图中两条红线间的垂直距离）&lt;/li&gt;
&lt;li&gt;行距是指一行底线到下一行顶线的垂直距离。（第一条粉线和第二条绿线间的垂直距离）&lt;/li&gt;
&lt;li&gt;半行距就是行距/2。(图中可以看出，半行距=(行高-字体size)/2 )&lt;br/&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-0d6db0a0be6aea55.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;内容区行内框行框&quot;&gt;1.3、内容区，行内框，行框&lt;/h4&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-c2700d187c56e2ce.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;内容区：顶线和底线包裹的区域（字体的size）&lt;/li&gt;
&lt;li&gt;行内框：在没有其他因素影响的时候（padding等），行内框等于内容区。而设定行高时行内框高度不变，半行距分别增加/减少到内容区的上下两边（深蓝色区域）行框（line box）。（字体size不变，修改行高就是修改行距）&lt;/li&gt;
&lt;li&gt;行框：行框高度等于本行内所有元素中行内框最大的值（以行高值最大的行内框为基准，其他行内框采用自己的对齐方式向基准对齐，最终计算行框的高度），当有多行内容时，每行都会有自己的行框。&lt;/li&gt;
&lt;/ul&gt;&lt;h4 id=&quot;line-height的设置&quot;&gt;1.4、line-height的设置&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;百分比方式设置&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;body&amp;gt;
  121212
  &amp;lt;p&amp;gt;121212&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;body{
  font-size:16px;
  line-height:120%;
}
p{
  font-size:32px;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;line-height的百分比（120%）和body的字体大小（16px），被用来计算（16*120=19.2），这个值会被层叠下去的元素所继承。&lt;br/&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-64f8ac452bd0518e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-78b4087a3cd4be60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;补充&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;p{
  font-size:32px;
  line-height:60px;
  padding:10px
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;最终盒模型&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-0c2e089a48a24e41.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-433cdef3b48b6d29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;盒模型中，内容（不是上文说的内容区，上文的内容区是顶线与底线间的区域）的高度等于line-height的值。为什么会有margin？浏览器默认P的上下margin是1em,设置了P的font-size是32px,所以1em=32px。上下margin就是32px。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;长度方式（px）设置&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;body&amp;gt;
  121212
  &amp;lt;p&amp;gt;121212&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;body{
  font-size:16px;
  line-height:20px;
}
p{
  font-size:32px;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-10466171680bb1e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-f96f2fa3cd805769.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;值normal&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;body&amp;gt;
  121212
  &amp;lt;p&amp;gt;121212&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;body{
  font-size:16px;
  line-height:normal;
}
p{
  font-size:32px;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-07ca5eb22b4f162d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;body&quot;/&gt;&lt;/p&gt;
&lt;p&gt;body的line的line-height是22px,所以normal等于1.375&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-6f20ee57b87ffe34.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;p的line-height：32px*1.375=44px（normal并不是精确的等于1.375）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-fa34a0ff48157fea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;纯数字&lt;/strong&gt;&lt;br/&gt;就是将normal改为一个想要的准确数字。&lt;/p&gt;
&lt;h4 id=&quot;各种box&quot;&gt;1.5、各种BOX&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;body&amp;gt;
  &amp;lt;p&amp;gt;这个&amp;lt;em&amp;gt;强调&amp;lt;/em&amp;gt; 元素为行内元素&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;body{
  font-size:16px;
  line-height:1.5;
}
p{
  font-size:32px;
  padding:10px;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-6da3ca94f2274bd4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;containing box&lt;/strong&gt;&lt;br/&gt;p就是一个containing box，包含了其他boxs。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;inline box&lt;/strong&gt;&lt;br/&gt;在段落内，有一系列的inline box,inline box不会让内容成块显示，而是排成一行。“强调”是一种inline box,“这个”，“元素为行内元素”为一种匿名inline box。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;line box&lt;/strong&gt;&lt;br/&gt;多个inline box组成line box，多个line box组成containing box。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Content Area&lt;/strong&gt;&lt;br/&gt;Content Area是围绕着文字的一种看不见的box,高度取决与font-size&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;inline box与line-height&lt;/strong&gt;&lt;br/&gt;font-size:32px，line-height:48px，行间距=48px-32px=16px，半行间距=8px。&lt;br/&gt;半行间距会用在Content Area的顶部和底部。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-54c422b0a06e7682.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;br/&gt;这里inline box的高度就是line-height。inline box包着Content Area&lt;/p&gt;
&lt;p&gt;但是，当line-height小于font-size。line box的高度还是line-height,所以line-box的高度小于Content Area的高度，Content Area会溢出line-box。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-3c057a9446434303.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;inline box 与line box&lt;/strong&gt;&lt;br/&gt;line box的高度取决于他内部最高的inline box。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-bc4f96a4733b1fc5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-fbe2f27a7b3c5d2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-3f348ef9d532567b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-d7d9db120455ff05.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;vertical-align&quot;&gt;2、vertical-align&lt;/h3&gt;
&lt;p&gt;vertical-align是用来对齐内联级元素的。设置为以下display属性的元素，它们都被认为属于内联级元素。&lt;strong&gt;inline&lt;/strong&gt;、&lt;strong&gt;inline-block&lt;/strong&gt; or &lt;strong&gt;inline-table&lt;/strong&gt; (本文中不涉及此种情况)：&lt;/p&gt;
&lt;p&gt;inline内联元素基本上是包裹文本的标签。&lt;/p&gt;
&lt;p&gt;inline-block内联块元素则如它们的名字所示：拥有内联特性的块元素。他们可以有width和height（可能是由自己的内容定义），以及padding、border和margin。&lt;/p&gt;
&lt;p&gt;内联级元素彼此紧挨着放在一行中。一旦有更多的元素被放置到当前行中，一个新的行将会在它下面创建。所有这些行有所谓的“行框”，行框中包含所有的内容。不同大小的内容意味着不同高度的行框。在下面的插图中，行框的顶部和底部都是用红线表示的。&lt;br/&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-7aab0dba5bc20d39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;在行框中，元素的vertical-align属性是负责垂直对齐的。那么，到底元素垂直对齐的参照物是什么？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参照物：父元素的基线和外边缘&lt;/strong&gt;&lt;br/&gt;看看元素的基线和行框的外观：&lt;br/&gt;&lt;strong&gt;inline元素&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-08b7390e62d919fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;三行并排的文本。行框的顶部和底部边缘用红线表示，字体的高度由绿线表示，基线由一条蓝线表示。在左边，有一个line-height设置为与字体font-size大小相同高度的文本，绿线和红线重叠在一条线上。在中间，line-height是字体的两倍大。在右边，line-height是字体大小的一半大。&lt;/p&gt;
&lt;p&gt;内联元素（display:inline）的外边缘与其行高的顶部和底部边缘对齐，行高可以小于字体的高度。所以，行框就是上面的图中的红线。&lt;/p&gt;
&lt;p&gt;内联元素的基线是字符放置的位置线（字母x底部所在的水平线），即图中的蓝线。粗略地说，基线是在字体1/2高度的下面的某个地方。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;inline-block元素&lt;/strong&gt;：&lt;br/&gt;inline-block因为已经有宽和高，可能存在多行，每行都有自己的基线和行框，所以会比较特殊。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-924628ed8ffdeee1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;上图中，最外层是div，里面分别是三个inline-block的span，黄色为border，绿色为padding，蓝色为content area（一个span，其中有一个字母“C”）。左边的inline-block的span的内容（span）是一个正常文档流元素。中间的inline-block的span还额外加了overflow: hidden。右边的inline-block的span包含一个流外的span(但内容区域有一个高度)(译者注：流内的元素必须是普通文档流（normal flow）中的元素，流外的元素必须是浮动或绝对定位的元素以及根元素。)。蓝线为每个inline-block的span的基线。内联块元素的外边缘是其margin框的顶部和底部边缘，即图中的红线。&lt;/p&gt;
&lt;p&gt;内联块元素（上图三个inline-block的span）的基线取决它包含的内容是否在文档流中：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;在流内内容的情况下，内联块元素的基线是正常流中最后一个内容元素的基线（左边的例子）。对于这最后一个元素，它的基线是根据它自己的规则找到的。&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;&amp;lt;div class=&quot;demo1&quot;&amp;gt;
  x&amp;lt;span&amp;gt;
    x&amp;lt;span style=&quot;display:inline-block;height:30px;width:100px;background-color:blue&quot;&amp;gt;x&amp;lt;/span&amp;gt;
    x
  &amp;lt;/span&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;.demo1 span{
  display:inline-block;
  background-color:silver;
  height:90px;
  
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-e1f47b4cd9e6e5d1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;br/&gt;灰色背景的元素内部有三个子元素，两个“x”,一个span。元素的基线就是最后一个正常流元素（“x”）的基线。&lt;br/&gt;修改元素的长度，使其内容出现多行：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-62c45b8a73e166db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;最外面的X怎么也跟着移动了？这涉及行框基线的移动，下文细说。&lt;/p&gt;
&lt;ul readability=&quot;0&quot;&gt;&lt;li readability=&quot;3&quot;&gt;
&lt;p&gt;在流内内容但内联块元素有overflow:hidden属性的情况下，基线是内联块元素margin框的底部边缘（例如在中间的图）。&lt;br/&gt;修改上面的例子样式：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;.demo1&amp;gt;span{
  display:inline-block;
  background-color:silver;
  height:90px;
  width:100px;
  margin:10px;
  overflow:hidden;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-97fa3f9c028cfce8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;br/&gt;通过最外面的x大致知道行框的基线位置，就是内联块元素的下外边距的地方，也是内联块元素元素的基线位置。&lt;br/&gt;&lt;strong&gt;一开始此处有疑惑&lt;/strong&gt;：内联块元素元素的基线跑到了下外边距处，那么元素里面的内容不应该以这条基线做定位吗？群里问了大佬，内联块元素已经设了宽高，可能有多行（即使只有一行），每行有各自的行框，然后又根据规则定位了，跟内联块元素的基线已经没有关系。&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;在流外内容的情况下，基线是内联块元素margin框的底部边缘（例如在右边）。&lt;/li&gt;
&lt;/ul&gt;&lt;pre&gt;
&lt;code&gt;&amp;lt;div class=&quot;demo1&quot;&amp;gt;
  x&amp;lt;span&amp;gt;
  &amp;lt;span style=&quot;display:inline-block;height:30px;width:100px;background-color:blue;&quot;&amp;gt;x&amp;lt;/span&amp;gt;
  &amp;lt;/span&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;.demo1&amp;gt;span{
  display:inline-block;
  background-color:silver;
  height:90px;
  width:100px;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-1bf79648253f0178.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;加上浮动&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;div class=&quot;demo1&quot;&amp;gt;
  x&amp;lt;span&amp;gt;
  &amp;lt;span style=&quot;display:inline-block;height:30px;width:100px;background-color:blue;float:left&quot;&amp;gt;x&amp;lt;/span&amp;gt;
  &amp;lt;/span&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-e1340e0337c09cb1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;行框的基线是可变的&lt;/strong&gt;&lt;br/&gt;当使用vertical-align时，基线放置在哪里可能是最令人疑惑的部分。它需要满足vertical-align的值和行框的高度等所有条件。基线的位置犹如是方程中的一个自由参数。&lt;/p&gt;
&lt;p&gt;行框的基线是看不见的，但你可以使它很容易看到。只要在文本行的开头添加一个字符，像我增加了一个“X”的字母。如果这个字符不以任何方式对齐，它将默认地坐在基线上。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-17a321a13fb1de4e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;围绕着行框的基线的部分（绿线），我们可以称其为文本框。文本框可以简单地被认为是行框内的内联元素，没有任何对齐。文本框的高度等于它的父元素的字体大小。因此，文本框只围住了行框内的无格式文本。由于这个文本框是绑在基线上的，当基线移动时它将移动。（注：此文本框在W3C规范中称为“strut（支柱）”）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;vertical-align的值&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;1）将元素的基线，参照父元素的基线对齐&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-be511377e0cbfe01.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;baseline：元素的基线与父元素的基线对齐。&lt;/p&gt;
&lt;p&gt;sub：元素的基线偏移到父元素的基线之下。&lt;/p&gt;
&lt;p&gt;sup：元素的基线偏移到父元素的基线之上。&lt;/p&gt;
&lt;p&gt;：元素的基线相对于父元素的基线偏移了一个百分比（该百分比是对比元素自身的line-height计算得出）。&lt;/p&gt;
&lt;p&gt;：元素的基线相对于父元素的基线偏移了一个绝对长度。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2）将元素的中心点，参照父元素的基线对齐&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-7e62e2f007fae25b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;middle：将元素的顶部和底部之间的中心点，对齐父元素的基线之上x-height的1/2之处（x-height为字母x的字符高度）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3）将元素的外边缘，参照父元素的文本框对齐&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-ad50fa22b3971468.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;text-top：将元素的顶部边缘，对齐到父元素的文本框的顶部边缘。&lt;/p&gt;
&lt;p&gt;text-bottom：将元素的底部边缘，对齐到父元素的文本框的底部边缘。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4）将元素的外边缘，参照父元素行框的外边缘对齐&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-22702eed5b65c234.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;top：元素的顶部边缘对齐到父元素的顶部边缘。&lt;/p&gt;
&lt;p&gt;bottom：元素的底部边缘对齐到父元素的底部边缘。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;基线的移动&lt;/strong&gt;&lt;br/&gt;如果一行中有一个高个的元素占据了整行的高度，那么vertical-align对它没有影响。它的顶部和底部没有空间让它移动。为了满足行框基线的对齐方式，行框的基线必须移动。矮个元素设置了vertical-align: baseline。在左边，高个元素设置了vertical-align: text-bottom。在右边，高个元素设置了vertical-align: text-top。你可以看到右边的基线跳起来了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-c1814fe05aab774b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（左）将两个元素放在一行中并设置vertical-align ，它们会使得行框的基线移动到符合它俩的对齐规则之处，然后行框的高度也会随之调整。（中）添加第三个元素，不超越行框的边缘，既不影响行框的高度，也不影响基线的位置。（右）添加第三个元素，如果它超出了行框的边缘，行框的高度和基线调整。在这种情况下，我们的前两个元素也会跟着发生变化。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-2116d86a4125a740.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;内联级元素底部的小间隙&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-09bed4e30dbca377.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;列表项坐在基线上。下面的一点空间，是文本的基线以下预留的depth（在W3C规范中，一个字体的基线以上称为characteristic height，基线以下称为depth）。想要去掉这个depth空隙，有解决的办法吗？只要移动基线的位置就可以，例如通过设置列表项目vertical-align: middle&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;水平垂直居中&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;div class=&quot;box&quot;&amp;gt;
        &amp;lt;div class=&quot;content&quot;&amp;gt;
          自适应垂直居中
        &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;html{
  height:100%;
}
body{   
   height: 100%;  
   width: 100%;  
}
.box{
   display:inline-block;
   text-align: center;
   width:50%;
   height:50%;
   background-color:#e1e3cd;
   overflow:hidden;
}
.box:after{
    content:&quot;&quot;;
    display:inline-block;
    height:100%;
    vertical-align:middle;
}
.content{
    vertical-align:middle;
    background-color:silver;
    display: inline-block;
    width: 50%;
    height:50%;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/2125695-0ebe9d2f22f572c6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;/&gt;&lt;/p&gt;
&lt;p&gt;要将content水平垂直居中定位在box里，利用vertical-align是其中一种方法。原理是：vertical-align：middle（将元素的顶部和底部之间的中心点，对齐父元素的基线之上x-height的1/2之处（x-height为字母x的字符高度）。），content肯定是要垂直居中的，那只能修改行框的基线位置（&lt;strong&gt;注意：不是修改box的基线，box具有宽高，它里面的内容可能会有多行，每行有各自的行框，box的基线已经不会影响内容的布局，但是box的基线还是会受里面内容的影响（内联块元素的基线是正常流中最后一个内容元素的基线）&lt;/strong&gt;），使其位于box的垂直中心位置。修改行框的基线，只要在box内加一个高度为100%的空元素，然后设置vertical-align:middle，添加的元素已经占满整个行框高度，而只要移动行框的基线，就可以满足定位规则，所以行框的基线就被移动到box垂直中心位置。content再按规则对齐到行框基线上就可以了。&lt;/p&gt;
</description>
<pubDate>Tue, 19 Dec 2017 14:47:00 +0000</pubDate>
<dc:creator>若若若邪</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/jaycewu/p/8068130.html</dc:identifier>
</item>
</channel>
</rss>