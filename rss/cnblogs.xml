<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>外包公司到底能不能选择 - 资深Tester_王豆豆</title>
<link>http://www.cnblogs.com/evangline/p/8273990.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/evangline/p/8273990.html</guid>
<description>&lt;h2&gt; 什么是IT外包公司？&lt;/h2&gt;
&lt;p&gt;外包公司不并是只有软件行业才有，其他行业也有，日剧中经常出现的劳务派遣公司其实也就指的是外包公司，外包公司是给客户提供帮助以谋取酬劳的一类企业。&lt;/p&gt;
&lt;p&gt;外包公司项目分为二种：&lt;/p&gt;
&lt;p&gt;一种是项目外包，也就是离岸外包，从客户方将项目带回自己本公司做，由外包公司提供场地、设备和人力，客户方也会提供一些人力（有可能是行业专家），也有可能是在客户方直接做。&lt;/p&gt;
&lt;p&gt;一种是人力外包，只是提供人力，由外包公司提示场地和设备，外包人员在客户方提供的场地内办公。&lt;/p&gt;
&lt;p&gt;现在软件行业大大小小的外包公司有很多，因而外包的公司也不尽相同，王豆豆列出熟知的一些外包公司：&lt;/p&gt;
&lt;p&gt;文思海辉（目前对接的业务多是银行和金融公司），中软国际（12还是13年成为华为合资子公司，业务大多是华为，在成都也有平安银行），软通动力，武汉佰钧成，深圳雁联，长亮，博彦科技，瞬联.....&lt;/p&gt;
&lt;p&gt;王豆豆在外包公司也待了四年左右，就谈谈王豆豆对外包公司的看法，给不清楚外包公司的小伙伴们分析一下外包公司的利与弊。&lt;/p&gt;
&lt;h2&gt;先说说外包公司的利&lt;/h2&gt;
&lt;p&gt;外包公司是一个神奇的存在，哪有有需求哪有就有他们，客户方不想做的，或者没有时间做的，再或者没有能力做的都可以外包出去，找有能力，愿意，有时间的人或公司做。&lt;/p&gt;
&lt;h3&gt;1.机会（机会多，解决就业快）&lt;/h3&gt;
&lt;p&gt;外包公司主要就是帮助客户解决业务上问题的，一般来说外包公司会对接很多甲方公司，所以有很多不同类型的项目，项目多了机会也就多了，也正是因为项目多，所以外包公司对求职者的能力要求有所不同（这也基于客户方提出的要求），有高有低，如果是刚转行或刚毕业的小伙伴可以考虑外包，能很快的解决就业问题。&lt;/p&gt;
&lt;h3&gt;2.成长快&lt;/h3&gt;
&lt;p&gt;一般有外包业务需求的公司都是比较大型地公司，对于在学历或能力有所欠缺的小伙伴，不能直接应聘进去的，可以通过外包方式到理想的公司去工作，这样也就有机会学习到更先进的技术和流程。&lt;/p&gt;
&lt;p&gt;对于新人来说，总是苦于自身项目经验太少，在外包公司能快速获得更多的项目经验，外包公司原本就是基于项目在甲方公司做的，如果项目完成，那就相当外派任务完成，如果公司业务好很快就会有新的项目任务开始，这种模式下会要求外包人员不断学习新的业务，新的技能，对于个人来说，这也是相当快速提升自身的方式方法。&lt;/p&gt;
&lt;h3&gt;3.工资&lt;/h3&gt;
&lt;p&gt;外包公司给的工资会比普通公司相对高一点点，这个只是针对初中级的软件测试人员，如果是高级的测试人员，这个不一定，有时外包公司给的反而没有普通公司高。&lt;/p&gt;
&lt;p&gt;当然外包公司真的只是工资高一点点，其它福利基本没有，只要入职之后，想要再加工资很难，除非甲方提出加工资或提高级别，相对会容易些，以前外包到华为同时期的同事，现在工资都很可观了，有一年加二三次的，如果想要达到这种效果，业务能力和技术能力都是很好的，项目少了你不行，这样加工资就很容易，这个放到其他企业也是一样的效果。&lt;/p&gt;
&lt;p&gt;为什么外包很难加工资呢？&lt;/p&gt;
&lt;p&gt;这就需要算一笔人力成本账了，外包公司每推一个员工到甲方工作，甲方就需要付给外包公司一个人力的钱，假设员工的工资是6000，甲方公司付给外包公司的钱为每人14000，那剩下的14000-6000=8000就是外包公司的收益，那这些收益需要支出招聘人员，行政，账务等的工资，剩下的收益就是公司的纯收益，支出是固定，公司想要收益更多，那肯定不会主动给你加工资，但如果甲方提了级别，那甲方给外包公司的钱也会增加，所以加工资才会成为可能。&lt;/p&gt;
&lt;h3&gt;4.转甲方&lt;/h3&gt;
&lt;p&gt;这种可能性非常小，但不是没有。&lt;/p&gt;
&lt;p&gt;概率有多大呢？可能20个人中有1个人，转甲方需要你各方面能力都很强，比如业务能力，技术能力，管理能力等，王豆豆以前项目组就有差不多十多个人转了华为，但并不是转了华为本部，而是转了华为自己的子公司名下。&lt;/p&gt;
&lt;p&gt;如果外包到银行，也能通过这种方法转到银行本部，如果你能力很强，那么一切皆有可能，但概率只是比较小而已。&lt;/p&gt;
&lt;h2&gt;外包公司的弊&lt;/h2&gt;
&lt;h3&gt;1.加班&lt;/h3&gt;
&lt;p&gt;“加班”文化不能算是外包公司的弊，因为这是大多数互联网公司特有的一种工作方式了。&lt;/p&gt;
&lt;p&gt;王豆豆在外包公司四年左右的时间所做的加班项目只有一个，其他的项目都没有加过班，所以在外包公司并不是一定就会有很多加班。&lt;/p&gt;
&lt;p&gt;多班是否多，这主要取决甲方的文化和项目的性质，例如对接的是华为的项目类，一般加班就很多，但如果是对接的是华为产品类，一般加班就比较少，如果是对接的银行和证券，加班也会相对少一些，但这个不绝对，比如成都刚成立不久的某网银行，加班就很严重，这些个情况可以面试过程中咨询外包公司的HR。&lt;/p&gt;
&lt;h3&gt;2.归属感&lt;/h3&gt;
&lt;p&gt;在外包公司上班归属感真的很差，如果是追求稳定和归属感强的，建议不要去外包公司。&lt;/p&gt;
&lt;p&gt;以前王豆豆从事的都是人力外包的项目，都是在甲方公司与甲方工作人员一起上班，与自己公司的联系只能是通过助理或PM，大多情况自己公司的人并没有多少时间来关心和管你，如果有些行政类的业务或开会，就会显得非常麻烦，需要自己去公司才行，公司近还好说，公司远就必须请个假去办或参加。&lt;/p&gt;
&lt;p&gt;特别是到了逢年过节，因为甲方公司一般都是大型公司，福利一般都很好，如果只是听说还好，但眼见心情就有所不同了，项目团队一般都有固定团队活动，比较人性化的项目团队，像这样的聚餐会叫上外包兄弟，但大多公司和团队都不会，毕竟这个活动经费是根据自己公司员工数目来申请的。&lt;/p&gt;
&lt;p&gt;就像上面这些，根据每个人的感受而不同，有些同学觉得无所谓，有些同学就会很敏感，感觉自己受到歧视，以前在华为，华为方的工牌带和外包方的工牌带是以颜色来区分的，所以通过你佩戴的员工带就能区分出是甲方员工还是外包员工。&lt;/p&gt;

&lt;p&gt;其实归属感并不仅仅只有这些，通常很小的一些举动都会被区别对待。&lt;/p&gt;
&lt;p&gt;下面这些事情王豆豆没有遇到过：听其他外包员工分享，如果项目出现bug引起问题，一般都是外包员工背锅，以前王豆豆所带的项目，除了公司不同，福利不同，我们与甲方员工所做的事情都是一样的，并不会因为你是外包员工而有所不同，并没有出现甲方员工歧视外包员工的，如果是技术好的，也会受到重用，和甲方员工相处也很融洽，至今友谊长存。&lt;/p&gt;
&lt;h3&gt;3.工作内容&lt;/h3&gt;
&lt;p&gt;王豆豆主要是外包到华为和银行过，以前华为上班时，工作的内容和华为员工是一样的，银行业务繁多，接触到的是电话银行和手机银行之类的测试任务。&lt;/p&gt;
&lt;p&gt;就在前几个月，去面试一家公司和HR聊天时，说到我以前也在招聘网站上投过你们公司的职位，HR说我们公司本是不招外包出来的，你是推荐过来，并且技术挺好才通过的.....初次听说真的很吃惊，细问了为什么。&lt;/p&gt;
&lt;p&gt;大意就是外包员工一般很难接触到项目的核心业务，做的功能和业务都是属于外围的，并且技术单一等等，而非外包员工基本在公司都能接触到核心业务，这是基于大概率而定的。&lt;/p&gt;

&lt;p&gt;王豆豆也是第一次碰到这样的情况，事后了解原来真的有很多公司都有这样的规定，再听银行的朋友说，他们都是自己公司的员工做核心业务，其他的才会被外包出去。王豆豆以前在华为可没遇到这样的情况。&lt;/p&gt;
&lt;p&gt;在王豆豆心里，以前我们公司技术牛人那可是一大把，很多甲方公司的技术难题都是外包兄弟攻克的。&lt;/p&gt;
&lt;h3&gt;4.稳定性&lt;/h3&gt;
&lt;p&gt;正如机会多，外包公司的稳定性很差，一个项目结束后，有可能会闲置一段时间，有很可能会很快安排到下一个项目上去，也可能没有合适的项目就有可能会被降薪或被辞职。&lt;/p&gt;
&lt;p&gt;如果经常遇到这类短期项目，导致外包人员流动性很大，王豆豆觉得这样不利于职业成长，也会给自己简历也会增加一段经历。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;h3&gt;1.新入行或刚毕业的小伙伴&lt;/h3&gt;
&lt;p&gt;王豆豆建议可以先去外包公司历练一下，机会多，找工作快，并且能快速累积项目经验和业务能力，就算是碰到加班多的也没关系，如果年轻的时候都不多加班，积累技术和能力，难道你想三十、四十之后才开始努力提升技术，努力工作么？&lt;/p&gt;
&lt;p&gt;王豆豆不提倡无意义的加班，既然加班那就应该有所成长，毕竟每天的工作时长增加了，如果工作经验还跟不上，那岂不是很亏。&lt;/p&gt;

&lt;h3&gt;2.工作四年以上小伙伴&lt;/h3&gt;
&lt;p&gt;工作经验超过四五年以上的小伙伴，王豆豆不建议再入外包的坑了，就像前面所说，外包公司项目和业务不定，稳定性极差，对于这个时期的小伙伴，王豆豆建议选择一家有前途的公司，那怕工资待遇差点，也能做到与公司一起成长，成长成为公司的核心成员，这才是最重要的。&lt;/p&gt;
&lt;p&gt;如果结合上面的分析，不喜欢外包公司氛围和工作性质的小伙伴也建议不要选择外包公司，工作找找就会有，不要急于一时入了外包坑，很快又出来，跳槽太过频繁了，简历上也会留下不良的记录，反而不利于后期找到好企业，现在很多公司对在每个公司工作的年限都有要求，这就是企业所说的不稳定因素，他可不管是因为什么原因才会跳槽频繁的。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;以上就是王豆豆在外包公司的一些感触，如果你也有有相同经历，欢迎和王豆豆一起来讨论和交流经验。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;欢迎关注王豆豆的微信公众号：资深Tester，了解更多的好文，和王豆豆一起成长。。。&lt;/strong&gt;&lt;/p&gt;

</description>
<pubDate>Thu, 11 Jan 2018 23:30:00 +0000</pubDate>
<dc:creator>资深Tester_王豆豆</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/evangline/p/8273990.html</dc:identifier>
</item>
<item>
<title>[树莓派(raspberry pi)] 02、PI3安装openCV开发环境做图像识别（详细版） - beautifulzzzz</title>
<link>http://www.cnblogs.com/zjutlitao/p/8261688.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zjutlitao/p/8261688.html</guid>
<description>

&lt;h4&gt;前言&lt;/h4&gt;
&lt;p&gt;上一篇我们讲了&lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2&quot; href=&quot;http://www.cnblogs.com/zjutlitao/p/7893024.html&quot;&gt;在linux环境下给树莓派安装系统及入门各种资料&lt;/a&gt; ，今天我们更进一步，尝试在PI3上安装openCV开发环境。&lt;/p&gt;
&lt;p&gt;博主在做的过程中主要参考一个国外小哥的文章（见最后链接1）,不过其教程中有一个地方稍微有点问题，导致我入坑好久！这里也会着重说明下。&lt;/p&gt;

&lt;h4&gt;1、Expand filesystem&lt;/h4&gt;
&lt;p&gt;新安装系统之后，首要的工作就是扩大文件系统。因为，用SD卡安装完系统后一大部分空间实际是未被分配的：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;sudo&lt;/span&gt; raspi-config
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;选择7高级，然后选择“1. Expand File System”，之后点击finish，然后reboot 。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180110224618082-179957517.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt; &lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180110224641504-1811963761.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;sudo&lt;/span&gt; reboot
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;之后，你可以用df -h命令确认文件系统是否被扩大：（如下，我的SD卡为闪迪的32G内存卡）&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
➜  ~  &lt;span&gt;df&lt;/span&gt; -&lt;span&gt;h
Filesystem      Size  Used Avail Use&lt;/span&gt;%&lt;span&gt; Mounted on
&lt;/span&gt;/dev/root        30G  &lt;span&gt;6&lt;/span&gt;.2G   22G  &lt;span&gt;23&lt;/span&gt;% /&lt;span&gt;
devtmpfs        466M     &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;  466M   &lt;span&gt;0&lt;/span&gt;% /&lt;span&gt;dev
tmpfs           470M     &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;  470M   &lt;span&gt;0&lt;/span&gt;% /dev/&lt;span&gt;shm
tmpfs           470M  &lt;/span&gt;&lt;span&gt;6.4M&lt;/span&gt;  464M   &lt;span&gt;2&lt;/span&gt;% /&lt;span&gt;run
tmpfs           &lt;/span&gt;&lt;span&gt;5.0M&lt;/span&gt;  &lt;span&gt;4&lt;/span&gt;.0K  &lt;span&gt;5.0M&lt;/span&gt;   &lt;span&gt;1&lt;/span&gt;% /run/&lt;span&gt;lock
tmpfs           470M     &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;  470M   &lt;span&gt;0&lt;/span&gt;% /sys/fs/&lt;span&gt;cgroup
&lt;/span&gt;/dev/mmcblk0p1   41M   21M   21M  &lt;span&gt;51&lt;/span&gt;% /&lt;span&gt;boot
tmpfs            94M     &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;   94M   &lt;span&gt;0&lt;/span&gt;% /run/user/&lt;span&gt;1000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;2、Install dependencies&lt;/h4&gt;
&lt;p&gt;接下来是安装openCV的依赖，下面步骤有点多，大家千万别漏了其中一两个（我操作的时候就把&lt;span class=&quot;crayon-v&quot;&gt;ibjpeg&lt;span class=&quot;crayon-o&quot;&gt;-&lt;span class=&quot;crayon-e&quot;&gt;dev &lt;span class=&quot;crayon-v&quot;&gt;libtiff5&lt;span class=&quot;crayon-o&quot;&gt;-&lt;span class=&quot;crayon-e&quot;&gt;dev &lt;span class=&quot;crayon-v&quot;&gt;libjasper&lt;span class=&quot;crayon-o&quot;&gt;-&lt;span class=&quot;crayon-e&quot;&gt;dev &lt;span class=&quot;crayon-v&quot;&gt;libpng12&lt;span class=&quot;crayon-o&quot;&gt;-&lt;span class=&quot;crayon-v&quot;&gt;dev给忘了，结果又得花几个小时重新编译一遍！！！）&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;2.1 更新&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;sudo&lt;/span&gt; apt-&lt;span&gt;get update
$ &lt;/span&gt;&lt;span&gt;sudo&lt;/span&gt; apt-get upgrade
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2.2 安装CMake等编译openCV源码的工具&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;sudo&lt;/span&gt; apt-get &lt;span&gt;install&lt;/span&gt; build-essential cmake &lt;span&gt;pkg-config&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2.3 安装几种常见格式的图像操作的包，方便我们能从硬盘上读取不同格式的图像&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;$ sudo&lt;/span&gt; apt-get &lt;span&gt;install&lt;/span&gt; libjpeg-dev libtiff5-dev libjasper-dev libpng12-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2.4  同样的，我们也需要视频操作的包&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;sudo&lt;/span&gt; apt-get &lt;span&gt;install&lt;/span&gt; libavcodec-dev libavformat-dev libswscale-dev libv4l-&lt;span&gt;dev
$ &lt;/span&gt;&lt;span&gt;sudo&lt;/span&gt; apt-get &lt;span&gt;install&lt;/span&gt; libxvidcore-dev libx264-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2.5 openCV用于图像/GUI展示的功能依赖highgui模块，为了编译highgui，我们需要安装GTK development library&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;sudo&lt;/span&gt; apt-get &lt;span&gt;install&lt;/span&gt; libgtk2.&lt;span&gt;0&lt;/span&gt;-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2.6 安装额外的一些依赖&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;sudo&lt;/span&gt; apt-get &lt;span&gt;install&lt;/span&gt; libatlas-base-dev gfortran
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;^-^&lt;/strong&gt;&lt;/span&gt; 记得看一下上面几个安装过程有没有少哦&lt;/p&gt;
&lt;p&gt;2.7 接下来还需要安装python dev&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;sudo&lt;/span&gt; apt-get &lt;span&gt;install&lt;/span&gt; python2.&lt;span&gt;7&lt;/span&gt;-dev python3-dev
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;3、Download the OpenCV source code&lt;/h4&gt;
&lt;p&gt;下载并解压3.1.0版本的源码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ cd ~&lt;span&gt;
$ &lt;/span&gt;&lt;span&gt;wget&lt;/span&gt; -O opencv.&lt;span&gt;zip&lt;/span&gt; https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;github.com/Itseez/opencv/archive/3.1.0.zip&lt;/span&gt;
$ &lt;span&gt;unzip&lt;/span&gt; opencv.&lt;span&gt;zip&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;为了安装完整的openCV3，体验新的features，还需要下载并解压 opencv_contrib（注意和opencv版本保持一致）：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;wget&lt;/span&gt; -O opencv_contrib.&lt;span&gt;zip&lt;/span&gt; https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;github.com/Itseez/opencv_contrib/archive/3.1.0.zip&lt;/span&gt;
$ &lt;span&gt;unzip&lt;/span&gt; opencv_contrib.&lt;span&gt;zip&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;4、准备python环境&lt;/h4&gt;
&lt;p&gt;4.1 安装python包管理器：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;wget&lt;/span&gt; https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;bootstrap.pypa.io/get-pip.py&lt;/span&gt;
$ &lt;span&gt;sudo&lt;/span&gt; python get-pip.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;4.2 安装python虚拟环境&lt;span class=&quot;crayon-e&quot;&gt;virtualenv &lt;span class=&quot;crayon-i&quot;&gt;virtualenvwrapper&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;首先说明下为什么要装这两个包：&lt;/p&gt;
&lt;p&gt;First, it’s important to understand that a virtual environment is a &lt;em&gt;special tool&lt;/em&gt; used to keep the dependencies required by different projects in separate places by creating &lt;em&gt;isolated, independent&lt;/em&gt; Python environments for each of them.&lt;/p&gt;
&lt;p&gt;In short, it solves the &lt;em&gt;“Project X depends on version 1.x, but Project Y needs 4.x”&lt;/em&gt; dilemma. It also keeps your global &lt;span id=&quot;crayon-5a5614e00a8b5419636125&quot; class=&quot;crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco&quot;&gt;&lt;span class=&quot;crayon-pre crayon-code&quot;&gt;&lt;span class=&quot;crayon-v&quot;&gt;site&lt;span class=&quot;crayon-o&quot;&gt;-&lt;span class=&quot;crayon-v&quot;&gt;packages  neat, tidy, and free from clutter.&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If you would like a full explanation on why Python virtual environments are good practice, absolutely &lt;a href=&quot;https://realpython.com/blog/python/python-virtual-environments-a-primer/&quot; target=&quot;_blank&quot;&gt;give this excellent blog post on RealPython a read&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;用虚拟开发环境可以为每个工程提供独立的python开发环境、独立的包、独立的版本，每个独立的环境会在&lt;span class=&quot;crayon-o&quot;&gt;~&lt;span class=&quot;crayon-o&quot;&gt;/&lt;span class=&quot;crayon-e&quot;&gt;.virtualenvs&lt;span class=&quot;crayon-o&quot;&gt;/下形成资源包～&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;sudo&lt;/span&gt; pip &lt;span&gt;install&lt;/span&gt;&lt;span&gt; virtualenv virtualenvwrapper
$ &lt;/span&gt;&lt;span&gt;sudo&lt;/span&gt; &lt;span&gt;rm&lt;/span&gt; -rf ~/.cache/pip
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;之后在～/.profile文件最后添加下面几行：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;# virtualenv and virtualenvwrapper
export WORKON_HOME&lt;/span&gt;=$HOME/&lt;span&gt;.virtualenvs
source &lt;/span&gt;/usr/local/bin/virtualenvwrapper.&lt;span&gt;sh&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;之后如果想用python虚拟环境，在每次打开一个新的terminal就要执行一次&lt;em&gt;&lt;span id=&quot;crayon-5a5614e00a8f4576591680&quot; class=&quot;crayon-syntax crayon-syntax-inline crayon-theme-classic crayon-theme-classic-inline crayon-font-monaco&quot;&gt;&lt;span class=&quot;crayon-pre crayon-code&quot;&gt;&lt;span class=&quot;crayon-v&quot;&gt;source&lt;span class=&quot;crayon-h&quot;&gt; &lt;span class=&quot;crayon-o&quot;&gt;~&lt;span class=&quot;crayon-o&quot;&gt;/&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;span class=&quot;crayon-v&quot;&gt;profile&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
$ source ~/.profile
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;接下来我们生成一个python虚拟环境来用于opencv的开发提供环境：（这里不讲python2，强烈建议用python3)&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ mkvirtualenv cv -p python3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;注：&lt;/strong&gt;&lt;/span&gt;再次说明python虚拟环境是完全独立的，也就是说在cv的环境下安装的python包，步适用于全局；在全局安装的包，不适合cv。&lt;/p&gt;
&lt;p&gt;如何验证你如何将cv环境生成好了呢？——新开一个terminal，执行下列命令：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ source ~/&lt;span&gt;.profile
$ workon cv&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果terminal前面的文字变成了(cv)表明成功创建了名为cv的python虚拟环境：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180111014159191-587482.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;
&lt;p&gt;4.3 在cv虚拟环境下安装numpy&lt;/p&gt;
&lt;p&gt;在接下来的操作中都要保持在cv环境中！&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
(cv) -&amp;gt; ~ $ pip &lt;span&gt;install&lt;/span&gt; numpy
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;5、编译和安装openCV&lt;/h4&gt;
&lt;p&gt;5.1 编译前的准备&lt;/p&gt;
&lt;p&gt;首先确定是在cv虚拟环境中，如果不在，可以执行：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ source ~/&lt;span&gt;.profile
$ workon cv&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;接下来用cmake进行编译opencv：&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;注：&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;这一步参考链接1的介绍中缺少一个编译选项，导致总是make出错：（当其出错时，按照下面的方法进行尝试：）&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;flex edit_area ng-isolate-scope ng-valid ng-dirty&quot; readability=&quot;4.177449168207&quot;&gt;
&lt;span&gt;make -j4 总是报错：&lt;/span&gt;&lt;br/&gt;&lt;span&gt;解决方法：删除build下的所有东西（cmake产生的和make -j4产生的），重新cmake,多加一个下面的选项&lt;/span&gt;&lt;br/&gt;&lt;span&gt;反思：之前一直复制网上的，结果网上坑爹把-D和后面单词连到一块结果还是不成功，导致走了好多弯路。之后做事情前要分析原因（为什么，然后再去尝试，不要根据结果来反馈尝试的对错！！！这样可能会走弯路！！！） &lt;/span&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;link:&lt;/span&gt;&lt;/strong&gt;&lt;a href=&quot;http://answers.opencv.org/question/116926/ubuntu-1610-opencv-build-fails-stdlibh-missing/&quot; target=&quot;_blank&quot;&gt;http://answers.opencv.org/question/116926/ubuntu-1610-opencv-build-fails-stdlibh-missing/&lt;/a&gt;&lt;br/&gt;&lt;/span&gt;
&lt;/p&gt;&lt;/pre&gt;
&lt;pre class=&quot;flex edit_area ng-isolate-scope ng-valid ng-dirty&quot;&gt;
&lt;span&gt;- 直接采用ubuntu中opencv的安装方法会报QT缺少的错误：&lt;a href=&quot;http://www.samontab.com/web/2014/06/installing-opencv-2-4-9-in-ubuntu-14-04-lts/&quot; target=&quot;_blank&quot;&gt;http://www.samontab.com/web/2014/06/installing-opencv-2-4-9-in-ubuntu-14-04-lts/&lt;/a&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;pre class=&quot;flex edit_area ng-isolate-scope ng-valid ng-dirty&quot;&gt;
&lt;span&gt; &lt;/span&gt;
&lt;/pre&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
$ cd ~/opencv-&lt;span&gt;3.1&lt;/span&gt;.&lt;span&gt;0&lt;/span&gt;/&lt;span&gt;
$ &lt;/span&gt;&lt;span&gt;mkdir&lt;/span&gt;&lt;span&gt; build
$ cd build
$ cmake &lt;/span&gt;-D ENABLE_PRECOMPILED_HEADERS=&lt;span&gt;OFF \
&lt;/span&gt;-D CMAKE_BUILD_TYPE=&lt;span&gt;RELEASE \
    &lt;/span&gt;-D CMAKE_INSTALL_PREFIX=/usr/&lt;span&gt;local \
    &lt;/span&gt;-D INSTALL_PYTHON_EXAMPLES=&lt;span&gt;ON \
    &lt;/span&gt;-D OPENCV_EXTRA_MODULES_PATH=~/opencv_contrib-&lt;span&gt;3.1&lt;/span&gt;.&lt;span&gt;0&lt;/span&gt;/&lt;span&gt;modules \
    &lt;/span&gt;-D BUILD_EXAMPLES=ON ..
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;cmake结束之后，会出现下图所示：（当时忘了截图了，盗用别人的一张 ^-^ ）&lt;/p&gt;
&lt;p&gt;请仔细校对下python3栏的Interpreter的python虚拟环境的路径，numpy指向python虚拟环境下的numpy安装路径等...&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180111212432238-1696335486.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.2 开始编译opencv&lt;/p&gt;
&lt;p&gt;上面准备好了一切，只等make了！请再次确保您在cv虚拟环境中：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;$ make&lt;/span&gt; -j4
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编译过程大概会用2～3个小时！-j4是采用4线程编译，如果采用4线程编译出现问题请采用单线程编译：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;make&lt;/span&gt;&lt;span&gt; clean
$ &lt;/span&gt;&lt;span&gt;make&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编译结束后会出现下图所示（也没有留截图，直接盗别人的图）：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180111213729691-258499789.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.3 安装opencv&lt;/p&gt;
&lt;p&gt;接下来就只需要几个简单的命令就能安装了：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;sudo&lt;/span&gt; &lt;span&gt;make&lt;/span&gt; &lt;span&gt;install&lt;/span&gt;&lt;span&gt;
$ &lt;/span&gt;&lt;span&gt;sudo&lt;/span&gt; ldconfig
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;6、pi3安装opencv3收尾工作&lt;/h4&gt;
&lt;p&gt;接下来做一点收尾工作，然后就能用你的PI开发图像识别的项目了！&lt;/p&gt;
&lt;p&gt;opencv编译好之后就可以make install安装了，编译是通用的，install是将相应的模块、DEMO放到相应的文件夹内；&lt;/p&gt;
&lt;p&gt;下面几步主要是在python虚拟环境中链接到opencv模块：（知其所以然）&lt;/p&gt;
&lt;p&gt;上面当运行完make install之后OpenCV+Python的打包文件将安装在：&lt;span class=&quot;crayon-o&quot;&gt;/&lt;span class=&quot;crayon-v&quot;&gt;usr&lt;span class=&quot;crayon-o&quot;&gt;/&lt;span class=&quot;crayon-v&quot;&gt;local&lt;span class=&quot;crayon-o&quot;&gt;/&lt;span class=&quot;crayon-v&quot;&gt;lib&lt;span class=&quot;crayon-o&quot;&gt;/&lt;span class=&quot;crayon-v&quot;&gt;python3&lt;span class=&quot;crayon-sy&quot;&gt;.&lt;span class=&quot;crayon-cn&quot;&gt;4&lt;span class=&quot;crayon-o&quot;&gt;/&lt;span class=&quot;crayon-v&quot;&gt;site&lt;span class=&quot;crayon-o&quot;&gt;-&lt;span class=&quot;crayon-v&quot;&gt;packages&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
$ &lt;span&gt;ls&lt;/span&gt; -l /usr/local/lib/python3.&lt;span&gt;4&lt;/span&gt;/site-packages/&lt;span&gt;
total &lt;/span&gt;&lt;span&gt;1852&lt;/span&gt;
-rw-r--r-- &lt;span&gt;1&lt;/span&gt; root staff &lt;span&gt;1895932&lt;/span&gt; Mar &lt;span&gt;20&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;:&lt;span&gt;51&lt;/span&gt; cv2.cpython-34m.so
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们需要将cv2.cpython-34m.so重命名为cv2.so:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ cd /usr/local/lib/python3.&lt;span&gt;4&lt;/span&gt;/site-packages/&lt;span&gt;
$ &lt;/span&gt;&lt;span&gt;sudo&lt;/span&gt; &lt;span&gt;mv&lt;/span&gt; cv2.cpython-34m.so cv2.so
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后需要将python虚拟环境中的cv2.so链接到上面刚被改名为cv2.so的文件上：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
$ cd ~/.virtualenvs/cv/lib/python3.&lt;span&gt;4&lt;/span&gt;/site-packages/&lt;span&gt;
$ &lt;/span&gt;&lt;span&gt;ln&lt;/span&gt; -s /usr/local/lib/python3.&lt;span&gt;4&lt;/span&gt;/site-packages/cv2.so cv2.so
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;7、测试OpenCV3是否安装成功&lt;/h4&gt;
&lt;p&gt;进入cv环境，然后调用简单的python指令：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ source ~/&lt;span&gt;.profile 
$ workon cv
$ python
&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;&lt;span&gt; import cv2
&lt;/span&gt;&amp;gt;&amp;gt;&amp;gt;&lt;span&gt; cv2.__version__
&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;3.1.0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&amp;gt;&amp;gt;&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;此时在home目录下还有两个编译、安装opencv时使用的文件夹，理论上可以直接删除掉，但是我建议还是先理解下整个操作流程之后再删掉！&lt;/p&gt;
&lt;p&gt;因为，对opencv源码的编译是需要很长时间的，一旦之后发现有什么问题，可以查看或修改opencv源码来尝试解决问题！&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
➜  ~  &lt;span&gt;ls&lt;/span&gt;&lt;span&gt;
Desktop  Documents  Downloads  get&lt;/span&gt;-pip.py  Music &lt;span&gt;&lt;strong&gt; opencv-3.1.0  opencv_contrib-3.1.0 &lt;/strong&gt; &lt;/span&gt;Pictures  Public  python_games  Templates  Videos
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;8、跑几个简单的图像识别的DEMO&lt;/h4&gt;
&lt;p&gt;编译、安装好之后，其DEMO放在/usr/local/share/OpenVC/sample/python目录下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180112004735254-1953864448.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;注意：&lt;/strong&gt;1、运行opencv的DEMO不要在ssh中运行，某些程序是需要GUI的；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;   　　2、opencv的比较多的DEMO都需要摄像头，买不起树莓派自带的贵的，可以淘宝上随便买个20多块钱的免去动USB摄像头；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;由于在usr目录下的DEMO都是只读文件、且其中少了data文件夹（data文件夹是DEMO所需要的一些图片及视频资源），&lt;/p&gt;
&lt;p&gt;如果直接运行的话，会报资源缺少等问题：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;(cv) ➜  python  python houghlines.py

This example illustrates how to use Hough Transform to &lt;/span&gt;&lt;span&gt;find&lt;/span&gt;&lt;span&gt; lines

Usage:
    houghlines.py [&lt;/span&gt;&amp;lt;image_name&amp;gt;&lt;span&gt;]
  &lt;span&gt;&lt;strong&gt;  image argument defaults to ..&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;/data/&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;pic1.png&lt;/strong&gt;&lt;/span&gt;

Traceback (most recent call &lt;/span&gt;&lt;span&gt;last&lt;/span&gt;&lt;span&gt;):
  File &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;houghlines.py&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, line &lt;span&gt;33&lt;/span&gt;, &lt;span&gt;in&lt;/span&gt; &amp;lt;module&amp;gt;&lt;span&gt;
    a,b,c &lt;/span&gt;=&lt;span&gt; lines.shape
AttributeError: &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;NoneType&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;object&lt;/span&gt; has no attribute &lt;span&gt;'&lt;/span&gt;&lt;span&gt;shape&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;因此，我们将/usr/local/share/OpenVC/sample/文件拷贝到Downloads/sample/，同时从openCV的源码文件中找到data文件夹，并复制到sample目录下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;cp&lt;/span&gt; -r /usr/local/share/OpenCV/samples ~/Downloads/&lt;span&gt;samples 
&lt;/span&gt;&lt;span&gt;cp&lt;/span&gt; -r  ~/opencv-&lt;span&gt;3.1&lt;/span&gt;.&lt;span&gt;0&lt;/span&gt;/samples/data ~/Downloads/samples/data/&lt;span&gt;
(cv) ➜  samples  tree &lt;/span&gt;-L &lt;span&gt;1&lt;/span&gt; ~/Downloads/&lt;span&gt;samples 
&lt;/span&gt;/home/pi/Downloads/&lt;span&gt;samples
├── data
└── python&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如下是运行霍夫找直线的DEMO效果：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180112011509832-1355492951.png&quot; alt=&quot;&quot; width=&quot;640&quot;/&gt;&lt;/p&gt;
&lt;p&gt; kmeans聚类算法：(cv) ➜  python  python kmeans.py     &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180112012059816-1079371624.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt; &lt;/p&gt;
&lt;p&gt;边缘检测算法：(cv) ➜  python  python edge.py&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180112012500879-1785607865.png&quot; alt=&quot;&quot; width=&quot;402&quot; height=&quot;305&quot;/&gt;&lt;/p&gt;
&lt;p&gt;模式识别算法：(cv) ➜ python python find_obj.py&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180112012833144-20567560.png&quot; alt=&quot;&quot; width=&quot;640&quot;/&gt;&lt;/p&gt;
&lt;p&gt; 运动方向检测，光流算法：(cv) ➜  python  python lk_track.py &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/506370/201801/506370-20180112014923941-1696683927.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;参考链接&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;:: 如果您觉得不错，请推荐给更多人，帮助他们更快地解决实际问题中的坑~&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
@beautifulzzzz
智能硬件、物联网，热爱技术，关注产品
博客：http://blog.beautifulzzzz.com
园友交流群：414948975
&lt;/pre&gt;&lt;/div&gt;
</description>
<pubDate>Thu, 11 Jan 2018 18:08:00 +0000</pubDate>
<dc:creator>beautifulzzzz</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/zjutlitao/p/8261688.html</dc:identifier>
</item>
<item>
<title>jBPM学习之利用API完成流程实例 - 少年张翠山</title>
<link>http://www.cnblogs.com/shizongger/p/8271619.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/shizongger/p/8271619.html</guid>
<description>&lt;p&gt;流程引擎对象ProcessEngine是jBPM4所有的Service API之源。在jBPM4中各种服务相互依存，但所有的Service API都从ProcessEngine中获得，由此可见ProcessEngine是jBPM4工作流API的核心。ProcessEngine是由Configuration类构建的，即工作流引擎根据配置产生。ProcessEngine是线程安全的，因此他可以保存在静态变量中。&lt;/p&gt;
&lt;p&gt;因此，我们可以把获取ProcessEngine的代码编写如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;package com.springchang.jbpm01;

import org.jbpm.api.Configuration;
import org.jbpm.api.ProcessEngine;
import org.junit.Test;

public class MyTest01 {
    private static ProcessEngine processEngine; //直接将流程引擎写成静态变量
    
    //静态代码块，获取processEngine
    static {
        Configuration cfg = new Configuration();
        cfg.setResource(&quot;jbpm.cfg.xml&quot;);  
        processEngine = cfg.buildProcessEngine();
    }

    // 1，部署流程定义文档
    @Test
    public void testDeployProcessDefinition() throws Exception {
        String deploymentId = processEngine.getRepositoryService() //调用processEngine提供的接口
                .createDeployment()
                .addResourceFromClasspath(&quot;com/springchang/jbpm01/HelloWorld.jpdl.xml&quot;) //加载HelloWorld.jpdl.xml文件
                .addResourceFromClasspath(&quot;com/springchang/jbpm01/HelloWorld.png&quot;)      //加载Helloworld.png图片
                .deploy(); //发布流程定义
        System.out.println(deploymentId);
    }

}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;而本节的重点是调用jBPM4.4中给定的各种API，从流程的发起，部署，办理任务到历史任务查询等一系列的操作。首先，流程定义如图所示：&lt;br/&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1066155/201801/1066155-20180112010855238-2057845992.png&quot; alt=&quot;流程定义&quot;/&gt;&lt;/p&gt;
&lt;p&gt;对应的jPDL:&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;

&amp;lt;process name=&quot;process&quot; xmlns=&quot;http://jbpm.org/4.4/jpdl&quot;&amp;gt;
   &amp;lt;start g=&quot;118,16,48,48&quot; name=&quot;start1&quot;&amp;gt;
      &amp;lt;transition g=&quot;-66,-22&quot; name=&quot;to state1&quot; to=&quot;state1&quot;/&amp;gt;
   &amp;lt;/start&amp;gt;
   &amp;lt;!-- state活动是等待活动,需要收到一个外部的执行信号才能流转通过 --&amp;gt;
   &amp;lt;state g=&quot;96,96,92,52&quot; name=&quot;state1&quot;&amp;gt;
      &amp;lt;transition g=&quot;-60,-22&quot; name=&quot;to task1&quot; to=&quot;task1&quot;/&amp;gt;
   &amp;lt;/state&amp;gt;
   &amp;lt;!-- task活动是等待活动,在这里被分配给用户Spring Chang办理,Spring Chang办理完成提交任务后才能流转通过 --&amp;gt;
   &amp;lt;task assignee=&quot;Spring Chang&quot; g=&quot;96,180,92,52&quot; name=&quot;task1&quot;&amp;gt;
      &amp;lt;transition g=&quot;-57,-22&quot; name=&quot;to end1&quot; to=&quot;end1&quot;/&amp;gt;
   &amp;lt;/task&amp;gt;
   &amp;lt;end g=&quot;118,264,48,48&quot; name=&quot;end1&quot;/&amp;gt;
&amp;lt;/process&amp;gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;使用jBPM Service API发起并完成上面名为process的流程定义。代码如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;package com.springchang.jbpm01;

import static org.junit.Assert.*;

import org.jbpm.api.Configuration;
import org.jbpm.api.Execution;
import org.jbpm.api.ProcessEngine;
import org.jbpm.api.ProcessInstance;
import org.jbpm.api.history.HistoryProcessInstance;
import org.jbpm.api.history.HistoryTask;
import org.jbpm.api.task.Task;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class ProcessTest {
    
    private ProcessEngine processEngine;
    
    private String deploymentId;
    
    @Before
    public void setUp() throws Exception {
        processEngine = Configuration.getProcessEngine();
        deploymentId = processEngine.getRepositoryService().createDeployment()
                     .addResourceFromClasspath(&quot;com/springchang/jbpm01/process.jpdl.xml&quot;)
                     .addResourceFromClasspath(&quot;com/springchang/jbpm01/process.png&quot;)
                     .deploy();
    }

    @After
    public void tearDown() throws Exception {
        processEngine.getRepositoryService().deleteDeploymentCascade(deploymentId);
    }

    @Test
    public void test() {
        //使用执行任务，根据已经部署的名陈process,发起流程实例
        ProcessInstance processInstance = processEngine.getExecutionService().startProcessInstanceByKey(&quot;process&quot;);
        //获取流程实例id
        String pid = processInstance.getId();
        System.out.println(&quot;pid:&quot; + pid);
        //获取当前活动的执行对象
        Execution executionInState = processInstance.findActiveExecutionIn(&quot;state1&quot;);
        //断言当前活动是state1
        assertNotNull(executionInState);
        //使用执行服务：发出执行信号结束当前活动，继续流程的执行
        String executionId = executionInState.getId();
        System.out.println(&quot;executionId:&quot; + executionId);
        processEngine.getExecutionService().signalExecutionById(executionId);
        //使用执行服务：从持久化层中获取“最新”的流程实例对象
        processInstance = processEngine.getExecutionService().findProcessInstanceById(pid);
        //获取当前活动的执行对象
        Execution executionInTask = processInstance.findActiveExecutionIn(&quot;task1&quot;);
        //断言当前活动即为task
        assertNotNull(executionInTask);
        //使用任务服务:获取用户Spring Chang的任务，即task活动产生的任务
        Task task = processEngine.getTaskService().findPersonalTasks(&quot;Spring Chang&quot;).get(0);
        assertEquals(&quot;Spring Chang&quot;, task.getAssignee());
        //使用任务服务,完成任务
        processEngine.getTaskService().completeTask(task.getId());
        //使用历史服务：创建历史任务查询
        HistoryTask historyTask = processEngine.getHistoryService().createHistoryTaskQuery()
                                  .taskId(task.getId()).uniqueResult();
        //断言上一步完成的任务已经成为历史，即可通过历史任务查询获取到它
        assertNotNull(historyTask);
        //断言该流程已经结束
        //assertProcessInstanceEnded(pid);
        //使用历史服务：创建历史流程实例查询
        HistoryProcessInstance historyProcessInst = processEngine.getHistoryService()
                                                    .createHistoryProcessInstanceQuery()
                                                    .processInstanceId(pid)
                                                    .uniqueResult();
        //断言该流程已经成为历史，即可通过历史流程实例查询获取它
        assertNotNull(historyProcessInst);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上诉单元测试的代码setUp方法是部署流程定义，并调用addResourceFromClasspath方法加载流程实例文档来部署流程定义。tearDown方法作用是删除刚才部署的流程定义，并将与其相关的关联表的内容一并清空，主要的代码放在test测试方法里面。&lt;/p&gt;
</description>
<pubDate>Thu, 11 Jan 2018 17:05:00 +0000</pubDate>
<dc:creator>少年张翠山</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/shizongger/p/8271619.html</dc:identifier>
</item>
<item>
<title>Spring_Spring与AOP - hoje</title>
<link>http://www.cnblogs.com/hoje/p/8198768.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hoje/p/8198768.html</guid>
<description>&lt;p&gt;&lt;strong&gt;一、传统编程使用代理解决目标类增强问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180105011209065-1376443329.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;31.5&quot;&gt;&lt;img id=&quot;code_img_closed_414d1e23-cd6c-4d20-bb4e-07bd3a668031&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_414d1e23-cd6c-4d20-bb4e-07bd3a668031&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_414d1e23-cd6c-4d20-bb4e-07bd3a668031&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;主业务接口&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; ISomeService {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 目标方法&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doFirst();
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 目标方法&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt;     &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doSecond();
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;ISomeService&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_d92d7b45-7932-434e-963e-17d368468ff5&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_d92d7b45-7932-434e-963e-17d368468ff5&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_d92d7b45-7932-434e-963e-17d368468ff5&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;目标类&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; SomeServiceImpl &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; ISomeService {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doFirst() {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt;         System.out.println(&quot;执行doFirst()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doSecond() {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         System.out.println(&quot;执行doSecond()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;SomeServiceImpl&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;31.5&quot;&gt;&lt;img id=&quot;code_img_closed_3be330a8-47f4-4335-8eba-22a1940801b9&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_3be330a8-47f4-4335-8eba-22a1940801b9&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_3be330a8-47f4-4335-8eba-22a1940801b9&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; SystemService {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;  &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doLog() {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         System.out.println(&quot;执行日志代码&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;  &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doTx() {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         System.out.println(&quot;执行事务代码&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;SystemService&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;&lt;img id=&quot;code_img_closed_8a57b6c6-79c9-44c8-9d18-0699c8b88091&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_8a57b6c6-79c9-44c8-9d18-0699c8b88091&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_8a57b6c6-79c9-44c8-9d18-0699c8b88091&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;65&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.lang.reflect.InvocationHandler;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.lang.reflect.Method;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.lang.reflect.Proxy;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; com.jmu.service.ISomeService;
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; com.jmu.service.SomeServiceImpl;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; com.jmu.utils.SystemService;
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; 
&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt;         ISomeService target=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; SomeServiceImpl();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;         ISomeService service=(ISomeService) Proxy.newProxyInstance(target.getClass().getClassLoader(),target.getClass().getInterfaces(), &lt;span&gt;new&lt;/span&gt;&lt;span&gt; InvocationHandler() {
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;织入weaving：将系统级服务切入到主业务逻辑中&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt; &lt;span&gt;            @Override
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;             &lt;span&gt;public&lt;/span&gt; Object invoke(Object proxy, Method method, Object[] args) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Throwable {
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;                 &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt;19&lt;/span&gt; &lt;span&gt;                SystemService.doTx();
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;                 &lt;span&gt;//&lt;/span&gt;&lt;span&gt;执行目标方法&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt;                 Object result =&lt;span&gt; method.invoke(target, args);
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; &lt;span&gt;                SystemService.doLog();
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; &lt;span&gt;        });
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt; &lt;span&gt;       service.doFirst();
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt;        System.out.println(&quot;---------------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt; &lt;span&gt;       service.doSecond();
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt; 
&lt;span&gt;31&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;二、AOP术语&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;（1）切面（Aspect）&lt;/p&gt;
&lt;p&gt;   切面泛指业务逻辑。常用的切面有通知（Advice）和顾问（Advisor）。实际上就是对主业务逻辑的一种增强。&lt;/p&gt;
&lt;p&gt;（2）织入（Weaving）&lt;/p&gt;
&lt;p&gt;  织入指将切面代码插入到目标对象的过程。&lt;/p&gt;
&lt;p&gt;（3）连接点（JoinPoint）&lt;/p&gt;
&lt;p&gt; 连接点指可以被切面织入的方法。通常业务接口中的方法均为连接点。&lt;/p&gt;
&lt;p&gt;（4）切入点（Pointcut）&lt;/p&gt;
&lt;p&gt; 切入点指切面具体织入的方法。被标记为final的方法不能作为连接点和切点。&lt;/p&gt;
&lt;p&gt;（5）目标对象（Target）&lt;/p&gt;
&lt;p&gt;目标对象指将被增强的对象。&lt;/p&gt;
&lt;p&gt;（6）通知（Advice）&lt;/p&gt;
&lt;p&gt;通知是切面的一实现。，可以完成简单织入功能。通知定义了增强代码切入带目标代码的时间点，是目标方法执行之前执行，还是之后执行等。通知类型不同，切入的时间不同。&lt;/p&gt;
&lt;p&gt;切入点定义切入的位置，通知定义切入的时间。&lt;/p&gt;
&lt;p&gt;（7）顾问（Advisor）&lt;/p&gt;
&lt;p&gt; 顾问是切面的另一种实现，能够将通知以更为复杂的方式织入到目标对象中，是将通知包装为更复杂切面的装置器。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;三、AOP编程环境的搭建&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180105014406471-1061605644.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; &lt;strong&gt;四、通知（Advice）的详解&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（1）前置通知（MethodBeforeAdvice）&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33.5&quot;&gt;&lt;img id=&quot;code_img_closed_bf69171d-ee3d-4787-b2dc-1a516bee538f&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_bf69171d-ee3d-4787-b2dc-1a516bee538f&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_bf69171d-ee3d-4787-b2dc-1a516bee538f&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.lang.reflect.Method;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.aop.MethodBeforeAdvice;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;前置通知&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyMethodBeforeAdvice &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; MethodBeforeAdvice {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 当前方method：法在目标方法执行之前执行
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; method:目标方法
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; args：目标方法的参数列表
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; target：目标对象&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; before(Method method, Object[] args, Object target) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Throwable {
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 对于目标方法增强的代码写于此&lt;/span&gt;
&lt;span&gt;15&lt;/span&gt;         System.out.println(&quot;执行前置通知方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; 
&lt;span&gt;18&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyMethodBeforeAdvice&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_390c0692-6c97-4971-9e1c-9e8c304e487d&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_390c0692-6c97-4971-9e1c-9e8c304e487d&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_390c0692-6c97-4971-9e1c-9e8c304e487d&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;!-- 注册目标对象 --&amp;gt;
&lt;span&gt; 2&lt;/span&gt;     &amp;lt;bean id=&quot;someService&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop01.SomeServiceImpl&quot; /&amp;gt;
&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &amp;lt;!-- 注册切面：通知 --&amp;gt;
&lt;span&gt; 5&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop01.MyMethodBeforeAdvice&quot; /&amp;gt;
&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt;     &amp;lt;!-- 生成代理对象 --&amp;gt;
&lt;span&gt; 8&lt;/span&gt;     &amp;lt;bean id=&quot;serviceProxy&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&amp;gt;
&lt;span&gt; 9&lt;/span&gt;         &amp;lt;!-- &amp;lt;property name=&quot;targetName&quot; ref=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt; --&amp;gt;
&lt;span&gt;10&lt;/span&gt;         &amp;lt;!-- 指定目标对象 --&amp;gt;
&lt;span&gt;11&lt;/span&gt;         &amp;lt;property name=&quot;target&quot; ref=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;12&lt;/span&gt;         &amp;lt;!-- 指定切面 --&amp;gt;
&lt;span&gt;13&lt;/span&gt;         &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;14&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;applicationContext.xml&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_cb6429bb-b8c3-4ea5-a1cd-c076583072e3&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_cb6429bb-b8c3-4ea5-a1cd-c076583072e3&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_cb6429bb-b8c3-4ea5-a1cd-c076583072e3&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.junit.Test;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.ApplicationContext;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.support.ClassPathXmlApplicationContext;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; test01() {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建容器对象&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;         String resource = &quot;com/jmu/aop01/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         ApplicationContext ac=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         ISomeService service=(ISomeService) ac.getBean(&quot;serviceProxy&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        service.doFirst();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;        service.doSecond();
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; 
&lt;span&gt;18&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;31.5&quot;&gt;&lt;img id=&quot;code_img_closed_5851a2df-66e1-468f-b7dd-83359b5b6a02&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_5851a2df-66e1-468f-b7dd-83359b5b6a02&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_5851a2df-66e1-468f-b7dd-83359b5b6a02&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
&lt;span&gt;执行前置通知方法
执行doFirst()方法
&lt;/span&gt;----------&lt;span&gt;
执行前置通知方法
执行doSecond()方法&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;output&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;(2)后置通知（AfterReturningAdvice）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;后置通知：可以获取到目标方法的返回结果，但无法改变目标方法的结果&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;31.5&quot;&gt;&lt;img id=&quot;code_img_closed_17868646-ad85-4ac9-b70e-e5de64bf6d72&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_17868646-ad85-4ac9-b70e-e5de64bf6d72&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_17868646-ad85-4ac9-b70e-e5de64bf6d72&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;主业务接口&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; ISomeService {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 目标方法&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doFirst();
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 目标方法&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt; &lt;span&gt;    String doSecond();
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;ISomeService&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_76e030ad-22c0-420e-b426-ba37b78d3de5&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_76e030ad-22c0-420e-b426-ba37b78d3de5&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_76e030ad-22c0-420e-b426-ba37b78d3de5&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;目标类&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; SomeServiceImpl &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; ISomeService {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doFirst() {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt;         System.out.println(&quot;执行doFirst()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; String doSecond() {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         System.out.println(&quot;执行doSecond()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;      &lt;span&gt;return&lt;/span&gt; &quot;ABCD&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; 
&lt;span&gt;16&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;SomeServiceImpl&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;&lt;img id=&quot;code_img_closed_df8c5c9b-648c-4def-90c6-e0f0a6375a6c&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_df8c5c9b-648c-4def-90c6-e0f0a6375a6c&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_df8c5c9b-648c-4def-90c6-e0f0a6375a6c&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;63&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.lang.reflect.Method;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;后置通知：可以获取到目标方法的返回结果，但无法改变目标方法的结果&lt;/span&gt;
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyAfterReturningAdvice &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; org.springframework.aop.AfterReturningAdvice {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 在目标方法之后执行
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; returnValue：目标方法的返回值&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; afterReturning(Object returnValue, Method method, Object[] args, Object target) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Throwable {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt;         System.out.println(&quot;执行后置通知方法 reurnValue= &quot;+&lt;span&gt;returnValue);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (returnValue!=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;             returnValue =&lt;span&gt; ((String) returnValue).toLowerCase();
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;             System.out.println(&quot;修改过的结果returnValue=&quot;+&lt;span&gt;returnValue);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; 
&lt;span&gt;16&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyAfterReturningAdvice&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_4a832a7f-4a02-43e2-8788-fd311c3c2b4e&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_4a832a7f-4a02-43e2-8788-fd311c3c2b4e&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_4a832a7f-4a02-43e2-8788-fd311c3c2b4e&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;!-- 注册目标对象 --&amp;gt;
&lt;span&gt; 2&lt;/span&gt;     &amp;lt;bean id=&quot;someService&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop02.SomeServiceImpl&quot; /&amp;gt;
&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &amp;lt;!-- 注册切面：通知 --&amp;gt;
&lt;span&gt; 5&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop02.MyAfterReturningAdvice&quot; /&amp;gt;
&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt;     &amp;lt;!-- 生成代理对象 --&amp;gt;
&lt;span&gt; 8&lt;/span&gt;     &amp;lt;bean id=&quot;serviceProxy&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&amp;gt;
&lt;span&gt; 9&lt;/span&gt;         &amp;lt;property name=&quot;target&quot; ref=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;10&lt;/span&gt;         &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;11&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;applicationContext.xml&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_a3a2ca9c-822e-4fd7-b9ff-3244622defe8&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_a3a2ca9c-822e-4fd7-b9ff-3244622defe8&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_a3a2ca9c-822e-4fd7-b9ff-3244622defe8&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.junit.Test;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.ApplicationContext;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.support.ClassPathXmlApplicationContext;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; test01() {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建容器对象&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;         String resource = &quot;com/jmu/aop02/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         ApplicationContext ac=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         ISomeService service=(ISomeService) ac.getBean(&quot;serviceProxy&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        service.doFirst();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;         String result =&lt;span&gt; service.doSecond();
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;        System.out.println(result);
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; 
&lt;span&gt;19&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;31.5&quot;&gt;&lt;img id=&quot;code_img_closed_21732665-3c74-447c-b0a2-2525b9fb4d71&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_21732665-3c74-447c-b0a2-2525b9fb4d71&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_21732665-3c74-447c-b0a2-2525b9fb4d71&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
&lt;span&gt;执行doFirst()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
----------&lt;span&gt;
执行doSecond()方法
执行后置通知方法 reurnValue&lt;/span&gt;=&lt;span&gt; ABCD
修改过的结果returnValue&lt;/span&gt;=abcd
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;output&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;（3）环绕通知（MethodInterceptor）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;环绕通知：可以修改目标方法的返回结果&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_5c75b856-5d21-4eaa-9de0-f2b0fb06c2f9&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_5c75b856-5d21-4eaa-9de0-f2b0fb06c2f9&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_5c75b856-5d21-4eaa-9de0-f2b0fb06c2f9&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.aopalliance.intercept.MethodInterceptor;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.aopalliance.intercept.MethodInvocation;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;环绕通知：可以修改目标方法的返回结果&lt;/span&gt;
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyMethodIntercepter &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; MethodInterceptor {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; 
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; Object invoke(MethodInvocation invocation) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Throwable {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt;         System.out.println(&quot;执行环绕通知：目标方法执行之前&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;执行目标方法&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt;         Object result =&lt;span&gt; invocation.proceed();
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         System.out.println(&quot;执行环绕通知：目标方法执行之后&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (result!=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;             result=&lt;span&gt;((String)result).toLowerCase();
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; 
&lt;span&gt;19&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyMethodIntercepter&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_0df76154-4bdf-4257-a5f2-1de363ae8fe0&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_0df76154-4bdf-4257-a5f2-1de363ae8fe0&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_0df76154-4bdf-4257-a5f2-1de363ae8fe0&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;执行环绕通知：目标方法执行之前
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;执行doFirst()方法
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; &lt;span&gt;执行环绕通知：目标方法执行之后
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; ----------
&lt;span&gt;5&lt;/span&gt; &lt;span&gt;执行环绕通知：目标方法执行之前
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; &lt;span&gt;执行doSecond()方法
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; &lt;span&gt;执行环绕通知：目标方法执行之后
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt; abcd
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;output&lt;/span&gt;&lt;/div&gt;
&lt;p&gt; &lt;strong&gt;（4）异常通知（ThrowsAdvice）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;a、&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;异常分2种：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;运行时异常，不进行处理，也可以通过编译。若一个类继承自RunTimeException，则该异常就是运行时异常&lt;/li&gt;
&lt;li&gt;编译时异常（受查异常 Checked Exception），不进行处理，不能通过编译。若一个类继承自Exception，则该异常就是受查异常&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180106101304846-1082515682.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_4fc9236a-095a-47af-93a6-1653a1b4002e&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_4fc9236a-095a-47af-93a6-1653a1b4002e&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_4fc9236a-095a-47af-93a6-1653a1b4002e&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.aop.ThrowsAdvice;
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; 
&lt;span&gt;3&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyThrowsAdvice &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; ThrowsAdvice {
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; 
&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;当目标方法抛出与指定类型的异常具有is-a关系的异常时，执行当前方法&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; afterThrowing(Exception ex) {
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;         System.out.println(&quot;执行异常通知方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;9&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyThrowsAdvice&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;31.5&quot;&gt;&lt;img id=&quot;code_img_closed_eda31ed3-5652-42ce-941e-cccef6d014f6&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_eda31ed3-5652-42ce-941e-cccef6d014f6&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_eda31ed3-5652-42ce-941e-cccef6d014f6&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;@Override
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doFirst() {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;         System.out.println(&quot;执行doFirst()方法&quot;+3/0&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;SomeServiceImpl&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;&lt;img id=&quot;code_img_closed_eef97ee5-321b-4384-abf5-063597e0ddf4&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_eef97ee5-321b-4384-abf5-063597e0ddf4&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_eef97ee5-321b-4384-abf5-063597e0ddf4&quot; class=&quot;cnblogs_code_hide&quot;&gt;
&lt;pre&gt;
执行异常通知方法
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;output&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;b、捕获自定义异常&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_6e493b8f-68ff-4779-b0f1-b364feb8415f&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_6e493b8f-68ff-4779-b0f1-b364feb8415f&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_6e493b8f-68ff-4779-b0f1-b364feb8415f&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; UserException &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; Exception {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; UserException() {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated constructor stub&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; UserException(String message) {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;(message);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated constructor stub&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;   
&lt;span&gt;13&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;UserException&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_f4324357-d712-4d56-ae72-4e1c8c1a0c80&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_f4324357-d712-4d56-ae72-4e1c8c1a0c80&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_f4324357-d712-4d56-ae72-4e1c8c1a0c80&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; UsernameException &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; UserException {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; UsernameException() {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated constructor stub&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; UsernameException(String message) {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;(message);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated constructor stub&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; 
&lt;span&gt;13&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;UsernameException&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_f81962be-c400-407b-96b3-40c28921667d&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_f81962be-c400-407b-96b3-40c28921667d&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_f81962be-c400-407b-96b3-40c28921667d&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; PasswordException &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; UserException {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; PasswordException() {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated constructor stub&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; PasswordException(String message) {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;(message);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated constructor stub&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; 
&lt;span&gt;13&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;PasswordException&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_6c00844e-3f9a-4371-8476-ada4503be93f&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_6c00844e-3f9a-4371-8476-ada4503be93f&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_6c00844e-3f9a-4371-8476-ada4503be93f&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;主业务接口&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; ISomeService {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 目标方法&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;boolean&lt;/span&gt; login(String username,String password)&lt;span&gt;throws&lt;/span&gt;&lt;span&gt; UserException;
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt; 
&lt;span&gt;6&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;ISomeService&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_e892d43d-2aba-4849-98fd-dd7806a8b74e&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_e892d43d-2aba-4849-98fd-dd7806a8b74e&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_e892d43d-2aba-4849-98fd-dd7806a8b74e&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; SomeServiceImpl &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; ISomeService {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt; login(String username, String password) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; UserException {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&quot;Jane&quot;&lt;span&gt;.equals(username)){
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;              &lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; UsernameException(&quot;用户名输入错误！&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&quot;aaa&quot;&lt;span&gt;.equals(password)){
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;              &lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; PasswordException(&quot;密码输入错误！&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;     &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;    double a=3/0;&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; 
&lt;span&gt;16&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;SomeServiceImpl&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_dd2fe17f-c126-4323-8437-16615aae215f&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_dd2fe17f-c126-4323-8437-16615aae215f&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_dd2fe17f-c126-4323-8437-16615aae215f&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.aop.ThrowsAdvice;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyThrowsAdvice &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; ThrowsAdvice {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 当目标方法抛出UsernameException异常时，执行当前方法&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; afterThrowing(UsernameException ex) {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         System.out.println(&quot;发生用户名异常 ex=&quot; +&lt;span&gt; ex.getMessage());
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 当目标方法抛出PasswordException异常时，执行当前方法&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; afterThrowing(PasswordException ex) {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         System.out.println(&quot;发生密码异常 ex=&quot; +&lt;span&gt; ex.getMessage());
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;     
&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 当目标方法抛出其他异常时，执行当前方法&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; afterThrowing(Exception ex) {
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;         System.out.println(&quot;发生异常 ex=&quot; +&lt;span&gt; ex.getMessage());
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;     
&lt;span&gt;20&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyThrowsAdvice&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_e4e07168-adad-43a4-a5f0-6d4b0befd52b&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_e4e07168-adad-43a4-a5f0-6d4b0befd52b&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_e4e07168-adad-43a4-a5f0-6d4b0befd52b&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.junit.Test;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.ApplicationContext;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.support.ClassPathXmlApplicationContext;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; test01() &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; UserException{
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建容器对象&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;         String resource = &quot;com/jmu/aop05/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         ApplicationContext ac=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         ISomeService service=(ISomeService) ac.getBean(&quot;serviceProxy&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         service.login(&quot;gad&quot;, &quot;aaa&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; 
&lt;span&gt;16&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;测试：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
  service.login(&quot;gad&quot;, &quot;aaa&quot;);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
发生用户名异常 ex=用户名输入错误！
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在SomeServiceImpl中加入&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;double&lt;/span&gt; a=3/0;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
发生异常 ex=/ by zero
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;c、异常的两种处理方式&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;控制台输出异常&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_1a5c8b21-02ef-4de5-8f7b-942e73b5c5db&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_1a5c8b21-02ef-4de5-8f7b-942e73b5c5db&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_1a5c8b21-02ef-4de5-8f7b-942e73b5c5db&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; test01() {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建容器对象&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;         String resource = &quot;com/jmu/aop05/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         ApplicationContext ac=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         ISomeService service=(ISomeService) ac.getBean(&quot;serviceProxy&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;             service.login(&quot;Jane&quot;, &quot;111&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         } &lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (UserException e) {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated catch block&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt; &lt;span&gt;            e.printStackTrace();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;虚拟机不通过&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_5ad6ceb9-22c7-42a6-b053-d747f8eef9a5&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_5ad6ceb9-22c7-42a6-b053-d747f8eef9a5&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_5ad6ceb9-22c7-42a6-b053-d747f8eef9a5&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.junit.Test;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.ApplicationContext;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.support.ClassPathXmlApplicationContext;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; test01() &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; UserException{
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建容器对象&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;         String resource = &quot;com/jmu/aop05/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         ApplicationContext ac=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         ISomeService service=(ISomeService) ac.getBean(&quot;serviceProxy&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         service.login(&quot;Jane&quot;, &quot;1111&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; 
&lt;span&gt;16&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;五、为目标方法织入多个通知&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_29924881-64b5-4cef-b45c-20431ba40a10&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_29924881-64b5-4cef-b45c-20431ba40a10&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_29924881-64b5-4cef-b45c-20431ba40a10&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;!-- 注册目标对象 --&amp;gt;
&lt;span&gt; 2&lt;/span&gt;     &amp;lt;bean id=&quot;someService&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop06.SomeServiceImpl&quot; /&amp;gt;
&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &amp;lt;!-- 注册切面：通知 --&amp;gt;
&lt;span&gt; 5&lt;/span&gt;     &amp;lt;bean id=&quot;myBeforeAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop06.MyMethodBeforeAdvice&quot; /&amp;gt;
&lt;span&gt; 6&lt;/span&gt;     &amp;lt;bean id=&quot;myAfterAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop06.MyAfterReturningAdvice&quot; /&amp;gt;
&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt;     &amp;lt;!-- 生成代理对象 --&amp;gt;
&lt;span&gt; 9&lt;/span&gt;     &amp;lt;bean id=&quot;serviceProxy&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&amp;gt;
&lt;span&gt;10&lt;/span&gt;         &amp;lt;property name=&quot;target&quot; ref=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;11&lt;/span&gt;         &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myBeforeAdvice,myAfterAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;12&lt;/span&gt;         
&lt;span&gt;13&lt;/span&gt;         &amp;lt;!-- &amp;lt;property name=&quot;interceptorNames&quot;&amp;gt;
&lt;span&gt;14&lt;/span&gt;             &amp;lt;array&amp;gt;
&lt;span&gt;15&lt;/span&gt;                 &amp;lt;value&amp;gt;myBeforeAdvice&amp;lt;/value&amp;gt;
&lt;span&gt;16&lt;/span&gt;                 &amp;lt;value&amp;gt;myAfterAdvice&amp;lt;/value&amp;gt;
&lt;span&gt;17&lt;/span&gt;             &amp;lt;/array&amp;gt;
&lt;span&gt;18&lt;/span&gt;         &amp;lt;/property&amp;gt; --&amp;gt;
&lt;span&gt;19&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;applicationContext&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;六、无接口使用CGLIB代理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;之前&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180106110923284-710135428.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;改&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180106111340081-1128055693.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_555be7ec-99dc-45f3-b534-fc8503f50170&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_555be7ec-99dc-45f3-b534-fc8503f50170&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_555be7ec-99dc-45f3-b534-fc8503f50170&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;目标类&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; SomeService {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doFirst() {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;         System.out.println(&quot;执行doFirst()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; String doSecond() {
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         System.out.println(&quot;执行doSecond()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &quot;ABCD&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; 
&lt;span&gt;14&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;SomeService&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_48b11c22-0852-4142-b6d4-e90782615b6d&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_48b11c22-0852-4142-b6d4-e90782615b6d&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_48b11c22-0852-4142-b6d4-e90782615b6d&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;!-- 注册目标对象 --&amp;gt;
&lt;span&gt; 2&lt;/span&gt;     &amp;lt;bean id=&quot;someService&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop07.SomeService&quot; /&amp;gt;
&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &amp;lt;!-- 注册切面：通知 --&amp;gt;
&lt;span&gt; 5&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop07.MyAfterReturningAdvice&quot; /&amp;gt;
&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt;     &amp;lt;!-- 生成代理对象 --&amp;gt;
&lt;span&gt; 8&lt;/span&gt;     &amp;lt;bean id=&quot;serviceProxy&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&amp;gt;
&lt;span&gt; 9&lt;/span&gt;         &amp;lt;property name=&quot;target&quot; ref=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;10&lt;/span&gt;         &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;11&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;applicationContext&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_3a3f1c2d-3b9b-4906-a885-aaf3831978b7&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_3a3f1c2d-3b9b-4906-a885-aaf3831978b7&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_3a3f1c2d-3b9b-4906-a885-aaf3831978b7&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.junit.Test;
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.ApplicationContext;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.context.support.ClassPathXmlApplicationContext;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; test01() {
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;创建容器对象&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;         String resource = &quot;com/jmu/aop07/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         ApplicationContext ac=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         SomeService service=(SomeService) ac.getBean(&quot;serviceProxy&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        service.doFirst();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;         String result =&lt;span&gt; service.doSecond();
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;        System.out.println(result);
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; 
&lt;span&gt;19&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180106111632268-905111660.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;七、有接口（也可以）使用CGLIB&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;方法一：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180106112234862-68670067.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180106112415190-590373174.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;方法二：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/1212417/201801/1212417-20180106112852643-987438707.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; 八、顾问 Advisor&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;通知是Spring提供的一种切面，只能将切面织入到目标方法的所有方法中。&lt;/p&gt;
&lt;p&gt;顾问是Spring提供的另一种切面，其可以完成更为复杂的切面织入功能。&lt;/p&gt;
&lt;p&gt;PointAdisor是顾问的一种，可以指定具体的切入点。顾问将通知进行了包装，会根据不同的通知类型，在不同的时间点，将切面织入到不同的切入点。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;名称匹配方法切入点顾问&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_f3260438-0256-4049-a40c-85d4ad28d2c4&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_f3260438-0256-4049-a40c-85d4ad28d2c4&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_f3260438-0256-4049-a40c-85d4ad28d2c4&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; SomeServiceImpl &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; ISomeService {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doFirst() {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;         System.out.println(&quot;执行doFirst()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; String doSecond() {
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         System.out.println(&quot;执行doSecond()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;      &lt;span&gt;return&lt;/span&gt; &quot;ABCD&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; doThird() {
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt;18&lt;/span&gt;         System.out.println(&quot;执行doThird()方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; 
&lt;span&gt;21&lt;/span&gt;     
&lt;span&gt;22&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;SomeServiceImpl&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_ae9c9b7a-77db-4c85-b560-c46d54a63324&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_ae9c9b7a-77db-4c85-b560-c46d54a63324&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_ae9c9b7a-77db-4c85-b560-c46d54a63324&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;!-- 注册目标对象 --&amp;gt;
&lt;span&gt; 2&lt;/span&gt;     &amp;lt;bean id=&quot;someService&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop09.SomeServiceImpl&quot; /&amp;gt;
&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &amp;lt;!-- 注册切面：通知--&amp;gt;
&lt;span&gt; 5&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop09.MyAfterReturningAdvice&quot; /&amp;gt;
&lt;span&gt; 6&lt;/span&gt;     &amp;lt;!-- 注册切面：顾问--&amp;gt;
&lt;span&gt; 7&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvisor&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&amp;gt;
&lt;span&gt; 8&lt;/span&gt;       &amp;lt;property name=&quot;advice&quot; ref=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt; 9&lt;/span&gt;       &amp;lt;!-- 指定切入点 --&amp;gt;
&lt;span&gt;10&lt;/span&gt;       &amp;lt;!--   &amp;lt;property name=&quot;mappedName&quot; value=&quot;doFirst&quot;&amp;gt;&amp;lt;/property&amp;gt; --&amp;gt;
&lt;span&gt;11&lt;/span&gt;        &amp;lt;!-- &amp;lt;property name=&quot;mappedNames&quot; value=&quot;doFirst,doSecond&quot;&amp;gt;&amp;lt;/property&amp;gt; --&amp;gt;
&lt;span&gt;12&lt;/span&gt;        &amp;lt;property name=&quot;mappedNames&quot; value=&quot;*ir*&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;13&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;span&gt;14&lt;/span&gt;     &amp;lt;bean id=&quot;serviceProxy&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&amp;gt;
&lt;span&gt;15&lt;/span&gt;         &amp;lt;property name=&quot;target&quot; ref=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;16&lt;/span&gt;         &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvisor&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;17&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;applicationContext&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;指定切入点：这里匹配的对象是简单方法名&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
 &amp;lt;property name=&quot;mappedNames&quot; value=&quot;*ir*&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;31.5&quot;&gt;&lt;img id=&quot;code_img_closed_cc774c60-0869-496e-b43c-be490ae98e95&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_cc774c60-0869-496e-b43c-be490ae98e95&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_cc774c60-0869-496e-b43c-be490ae98e95&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;58&quot;&gt;
&lt;pre&gt;
&lt;span&gt;执行doFirst()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
----------&lt;span&gt;
执行doSecond()方法
&lt;/span&gt;----------&lt;span&gt;
执行doThird()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;output&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;正则表达式方法切入点顾问&lt;/strong&gt;&lt;/p&gt;
&lt;table border=&quot;0&quot;&gt;&lt;tbody readability=&quot;2&quot;&gt;&lt;tr&gt;&lt;td&gt;运算符&lt;/td&gt;
&lt;td&gt;名称&lt;/td&gt;
&lt;td&gt;意义&lt;/td&gt;
&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;.&lt;/td&gt;
&lt;td&gt;点号&lt;/td&gt;
&lt;td&gt;表示任意单个字符&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;加号&lt;/td&gt;
&lt;td&gt;表示前一个字符出现一次或多次&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;2&quot;&gt;&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;星号&lt;/td&gt;
&lt;td&gt;表示前一个字符出现0次或多次 &lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;&lt;img id=&quot;code_img_closed_37a102c6-87c0-4fee-8e47-2fa20aaa0b53&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_37a102c6-87c0-4fee-8e47-2fa20aaa0b53&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_37a102c6-87c0-4fee-8e47-2fa20aaa0b53&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;!-- 注册目标对象 --&amp;gt;
&lt;span&gt; 2&lt;/span&gt;     &amp;lt;bean id=&quot;someService&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop10.SomeServiceImpl&quot; /&amp;gt;
&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &amp;lt;!-- 注册切面：通知--&amp;gt;
&lt;span&gt; 5&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop10.MyAfterReturningAdvice&quot; /&amp;gt;
&lt;span&gt; 6&lt;/span&gt;     &amp;lt;!-- 注册切面：顾问--&amp;gt;
&lt;span&gt; 7&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvisor&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.support.RegexpMethodPointcutAdvisor&quot;&amp;gt;
&lt;span&gt; 8&lt;/span&gt;       &amp;lt;property name=&quot;advice&quot; ref=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt; 9&lt;/span&gt;       &amp;lt;!-- 这里的正则表达式匹配的对象是全限定方法名 --&amp;gt;
&lt;span&gt;10&lt;/span&gt;       &amp;lt;!--  &amp;lt;property name=&quot;pattern&quot; value=&quot;.*doFirst&quot;&amp;gt;&amp;lt;/property&amp;gt; --&amp;gt;
&lt;span&gt;11&lt;/span&gt;       &amp;lt;!-- &amp;lt;property name=&quot;patterns&quot; value=&quot;.*doFirst,.*doSecond&quot;&amp;gt;&amp;lt;/property&amp;gt; --&amp;gt;
&lt;span&gt;12&lt;/span&gt;       &amp;lt;property name=&quot;pattern&quot; value=&quot;.*doFirst|.*doSecond&quot;&amp;gt;&amp;lt;/property&amp;gt;&amp;lt;!-- |为p右边的键，表示或 --&amp;gt;
&lt;span&gt;13&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;span&gt;14&lt;/span&gt;     &amp;lt;bean id=&quot;serviceProxy&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.ProxyFactoryBean&quot;&amp;gt;
&lt;span&gt;15&lt;/span&gt;         &amp;lt;property name=&quot;target&quot; ref=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;16&lt;/span&gt;         &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvisor&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;17&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;applicationContext&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;这里正则表达式匹配的对象是全限定名&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&amp;lt;property name=&quot;pattern&quot; value=&quot;.*S.*&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;九、自动代理生成器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;前面代码中所使用的代理对象，均是由ProxyFactoryBean代理工具类生成的。该代理工具类存在如下缺点：&lt;/p&gt;
&lt;p&gt;1、一个代理对象只能代理一个Bean&lt;/p&gt;
&lt;p&gt;2、在客户类中获取Bean时。使用的是代理类id，而非我们定义的模目标对象Bea的id。&lt;/p&gt;
&lt;p&gt;Spring对此提供了自动代理生成器，常用的为以下2种：&lt;/p&gt;
&lt;p&gt;默认advisor自动代理器&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
    &amp;lt;!-- 注册自动代理生成器 --&amp;gt;
    &amp;lt;bean &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.autoproxy.DefaultAdvisorAutoProxyCreator&quot;&amp;gt;&amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_74a34ccd-8b23-4851-96dd-8e8c88ff78bb&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_74a34ccd-8b23-4851-96dd-8e8c88ff78bb&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_74a34ccd-8b23-4851-96dd-8e8c88ff78bb&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; test01() {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 创建容器对象&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;         String resource = &quot;com/jmu/aop11/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         ApplicationContext ac = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         ISomeService service = (ISomeService) ac.getBean(&quot;someService&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;        service.doFirst();
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;        service.doSecond();
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        service.doThird();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt;         System.out.println(&quot;--------------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt;         ISomeService service2 = (ISomeService) ac.getBean(&quot;someService2&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;        service2.doFirst();
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;        service2.doSecond();
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; &lt;span&gt;        service2.doThird();
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; 
&lt;span&gt;25&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_4ffacc5f-a06c-49b1-a9a4-fef24d409885&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_4ffacc5f-a06c-49b1-a9a4-fef24d409885&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_4ffacc5f-a06c-49b1-a9a4-fef24d409885&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;执行doFirst()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
----------&lt;span&gt;
执行doSecond()方法
&lt;/span&gt;----------&lt;span&gt;
执行doThird()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
--------------&lt;span&gt;
执行doFirst()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
----------&lt;span&gt;
执行doSecond()方法
&lt;/span&gt;----------&lt;span&gt;
执行doThird()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;output&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;DefaultAdvisorAutoProxyCreator缺点：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;不能选择目标对象&lt;/li&gt;
&lt;li&gt;不能选择切面类型，切面只能是advisor&lt;/li&gt;
&lt;li&gt;不能选择advisor，所有advisor均被作文切面织入到目标&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;Bean名称自动代理生成器&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_f73f284c-d8a3-4e2c-9d5b-71fd4090a01d&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_f73f284c-d8a3-4e2c-9d5b-71fd4090a01d&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_f73f284c-d8a3-4e2c-9d5b-71fd4090a01d&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &amp;lt;!-- 注册目标对象 --&amp;gt;
&lt;span&gt; 2&lt;/span&gt;     &amp;lt;bean id=&quot;someService&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop12.SomeServiceImpl&quot; /&amp;gt;
&lt;span&gt; 3&lt;/span&gt;     &amp;lt;bean id=&quot;someService2&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop12.SomeServiceImpl&quot; /&amp;gt;
&lt;span&gt; 4&lt;/span&gt;     &amp;lt;!-- 注册切面：通知--&amp;gt;
&lt;span&gt; 5&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvice&quot; &lt;span&gt;class&lt;/span&gt;=&quot;com.jmu.aop12.MyAfterReturningAdvice&quot; /&amp;gt;
&lt;span&gt; 6&lt;/span&gt;     &amp;lt;!-- 注册切面：顾问--&amp;gt;
&lt;span&gt; 7&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvisor&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&amp;gt;
&lt;span&gt; 8&lt;/span&gt;       &amp;lt;property name=&quot;advice&quot; ref=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt; 9&lt;/span&gt;        &amp;lt;property name=&quot;mappedNames&quot; value=&quot;doFirst&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;10&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;span&gt;11&lt;/span&gt;     &amp;lt;bean id=&quot;myAdvisor2&quot; &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.support.NameMatchMethodPointcutAdvisor&quot;&amp;gt;
&lt;span&gt;12&lt;/span&gt;       &amp;lt;property name=&quot;advice&quot; ref=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;13&lt;/span&gt;        &amp;lt;property name=&quot;mappedNames&quot; value=&quot;doSecond&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;14&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;span&gt;15&lt;/span&gt;     
&lt;span&gt;16&lt;/span&gt;     &amp;lt;!-- 注册自动代理生成器 --&amp;gt;
&lt;span&gt;17&lt;/span&gt;     &amp;lt;bean &lt;span&gt;class&lt;/span&gt;=&quot;org.springframework.aop.framework.autoproxy.BeanNameAutoProxyCreator&quot;&amp;gt;
&lt;span&gt;18&lt;/span&gt;        &amp;lt;property name=&quot;beanNames&quot; value=&quot;someService&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;19&lt;/span&gt;        &amp;lt;!--  &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvice&quot;&amp;gt;&amp;lt;/property&amp;gt; --&amp;gt;
&lt;span&gt;20&lt;/span&gt;         &amp;lt;property name=&quot;interceptorNames&quot; value=&quot;myAdvisor&quot;&amp;gt;&amp;lt;/property&amp;gt;
&lt;span&gt;21&lt;/span&gt;     &amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;applicationContext&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_435bc761-3b4b-4b23-819b-22a30f940c4b&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_435bc761-3b4b-4b23-819b-22a30f940c4b&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_435bc761-3b4b-4b23-819b-22a30f940c4b&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyTest {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    @Test
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; test01() {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 创建容器对象&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;         String resource = &quot;com/jmu/aop12/applicationContext.xml&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         ApplicationContext ac = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ClassPathXmlApplicationContext(resource);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         ISomeService service = (ISomeService) ac.getBean(&quot;someService&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;        service.doFirst();
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;        service.doSecond();
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        service.doThird();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt;         System.out.println(&quot;--------------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt;         ISomeService service2 = (ISomeService) ac.getBean(&quot;someService2&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;        service2.doFirst();
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;        service2.doSecond();
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;         System.out.println(&quot;----------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; &lt;span&gt;        service2.doThird();
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; 
&lt;span&gt;25&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;MyTest&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;输出：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;&lt;img id=&quot;code_img_closed_2de0ef63-8156-4201-9b83-d81cbeb1876f&quot; class=&quot;code_img_closed&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_2de0ef63-8156-4201-9b83-d81cbeb1876f&quot; class=&quot;code_img_opened&quot; src=&quot;http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_2de0ef63-8156-4201-9b83-d81cbeb1876f&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;59&quot;&gt;
&lt;pre&gt;
&lt;span&gt;执行doFirst()方法
执行后置通知方法 reurnValue&lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;
----------&lt;span&gt;
执行doSecond()方法
&lt;/span&gt;----------&lt;span&gt;
执行doThird()方法
&lt;/span&gt;--------------&lt;span&gt;
执行doFirst()方法
&lt;/span&gt;----------&lt;span&gt;
执行doSecond()方法
&lt;/span&gt;----------&lt;span&gt;
执行doThird()方法&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;output&lt;/span&gt;&lt;/div&gt;

</description>
<pubDate>Thu, 11 Jan 2018 16:57:00 +0000</pubDate>
<dc:creator>hoje</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/hoje/p/8198768.html</dc:identifier>
</item>
<item>
<title>SSM框架开发web项目系列（六） SpringMVC入门 - 窗外天空晴朗</title>
<link>http://www.cnblogs.com/young-z/p/8261053.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/young-z/p/8261053.html</guid>
<description>&lt;p&gt;　　我们最初的javaSE部分学习后，基本算是入门了，也熟悉了Java的语法和一些常用API，然后再深入到数据库操作、WEB程序开发，渐渐会接触到JDBC、Servlet/Jsp之类的知识，期间可能会接触一两个关系型数据库，例如MySQL/Oracle等等。像前面的MyBatis部分，主要是针对JDBC的进一步封装，使得更适用于实际项目开发过程，但是JDBC、MyBatis或者Hibernate都是针对持久层数据库操作，例如查询、更新记录等等，我们开发程序最终的展现对象是用户，而用户操作程序往往用的是什么？各种各样的浏览器，而不是通过我们后台的这些测试代码，用户看不懂代码，也不需要懂。用户只需要点击、需要输入，比如点击一个链接，跳转到一个新页面，页面中的部分数据都是从数据库中查询获取的；又或者是输入一段文本，点击提交按钮，更新的是数据库中的记录。我们要理清的是，这些页面的操作指令是怎样传递到后台服务器，然后访问到数据库的；还有数据库的数据是怎么从后台又传回前端，怎样显示到页面上的？&lt;/p&gt;
&lt;p&gt;　　如果有学习过Servlet/Jsp相关内容，应该会对上面的问题多少有些理解。首先回顾下什么是Servlet,Servlet是运行在我们服务器上的Java程序，作用于中间层，即客户端请求和服务器之间，我们发送请求，控制数据库、业务逻辑、做出响应，返回前端页面数据等等都可以通过其实现。Servlet的生命周期：1.初始化调用init()方法，2.处理客户端请求调用service()方法，3.结束程序调用destroy方法，4.最后垃圾回收。JSP本质上也是Servlet，项目启动，Web容器将JSP的代码编译成JVM能够识别的java类即Servlet。Jsp重点偏向于页面的展示，应用html、CSS、JavaScript等前端技术在这里都不成问题，而Servlet更倾向于后台的业务逻辑、控制转发等等。&lt;/p&gt;
&lt;p&gt;　　SpringMVC是在Servlet基础上进一步封装开发的一套WEB层框架，所以如果能深入理清Servlet的相关内容，那么很容易就可以上手SpringMVC，下面我们先简单回顾一下之前Servlet的实现过程。&lt;/p&gt;

&lt;p&gt;　　新建一个普通web工程或者maven web工程，通过继承HttpServlet，创建我们自定义的Servlet，如下所示&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.mmm.servlet;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.IOException;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; javax.servlet.ServletException;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; javax.servlet.http.HttpServlet;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; javax.servlet.http.HttpServletRequest;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; javax.servlet.http.HttpServletResponse;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyServletA &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; HttpServlet {

    @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; doGet(HttpServletRequest req, HttpServletResponse resp) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; ServletException, IOException {
        doPost(req, resp);
    }

    @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; doPost(HttpServletRequest req, HttpServletResponse resp) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; ServletException, IOException {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;请求转发，相当于一次请求&lt;/span&gt;
        req.getRequestDispatcher(&quot;/a.jsp&quot;&lt;span&gt;).forward(req, resp);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;响应重定向，相当于二次请求，前一次请求设置的属性值在页面中将无法获取到
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;resp.sendRedirect(&quot;./a.jsp&quot;);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里往往还要通过持久层对象访问数据库，获取或者更新数据
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取到的数据通过设置属性，然后在前端Jsp页面可以通过el表达式之类的方法拿到然后渲染样式展示出来&lt;/span&gt;
&lt;span&gt;    }
    
    
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　这里的/a.jsp，代表Jsp页面路径，为web文件根目录下例如webapp下，所以我们在webapp下简单创建a.jsp如下&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&amp;lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;&lt;span&gt;
    pageEncoding&lt;/span&gt;=&quot;UTF-8&quot;%&amp;gt;
&amp;lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&amp;gt;
&amp;lt;title&amp;gt;a.jsp&amp;lt;/title&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;&lt;span&gt;
    这是a.jsp
&lt;/span&gt;&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　然后在web文件夹下WEB-INF文件夹下web.xml中&amp;lt;web-app&amp;gt;&amp;lt;/web-app&amp;gt;节点内添加如下内容&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
  &amp;lt;servlet&amp;gt;
      &amp;lt;servlet-name&amp;gt;MyServletA&amp;lt;/servlet-name&amp;gt;
      &amp;lt;servlet-&lt;span&gt;class&lt;/span&gt;&amp;gt;com.mmm.servlet.MyServletA&amp;lt;/servlet-&lt;span&gt;class&lt;/span&gt;&amp;gt;
  &amp;lt;/servlet&amp;gt;
  &amp;lt;servlet-mapping&amp;gt;
      &amp;lt;servlet-name&amp;gt;MyServletA&amp;lt;/servlet-name&amp;gt;
      &amp;lt;url-pattern&amp;gt;/a.do&amp;lt;/url-pattern&amp;gt;
  &amp;lt;/servlet-mapping&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　这里的&amp;lt;servlet-name&amp;gt;的值在&amp;lt;servlet&amp;gt;和&amp;lt;servlet-mapping&amp;gt;中要保持一致，&amp;lt;servlet-class&amp;gt;即为我们前面自定义的Servlet全名（含包名），&amp;lt;url-pattern&amp;gt;用于匹配我们在地址栏输入的url地址。例如这里通过localhost:8080/servlet-web/a.do就可以匹配到该Servlet，从而运行到该Servlet中的相关方法，这里会请求转发到a.jsp，如下图所示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;data:image/png;base64,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&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　上面为一个最基本的从前端http请求到后台服务器，运行Servlet后，返回前端视图的过程。但是实际情况下，前端的请求不会是这样简单拿回一个静态无数据的页面，也不会只有一个，举个例子，如果上面a.do对应一个增加一条商品数据的操作，即在我们自定义的MyServlet中doPost()方法里执行添加操作，那么如果还有删改查操作，按照这里的路子，我们需要再定义MyServletB、MyServletC、MyServletD,然后web.xml添加3段对应的Servlet节点定义，再继续拓展，我们不止对商品进行增删改查，还有员工、销售记录等等进行操作，这样下去，我们得定义和配置多少个Servlet，有的人想到办法，例如商品的操作路径匹配都是a.do，然后加个参数判断，及路径后加上?action=add或者?action=del等等，这样同一类对象的操作我们将其统一匹配到同一个Servlet，在Servlet的方法内部再去根据具体的action操作类型去判断到底要执行哪种操作（运行哪段业务逻辑）。&lt;/p&gt;
&lt;p&gt;　　SpirngMVC更是将这种思想进化到了极致，我们在web,xml只定义有且只有一个Servlet，这个Servlet能匹配到所有的正常请求，然后可以根据路径精确解析到具体的执行某个类的某个方法，这里的类即控制层Controller，例如一个商品的相关操作，我们定义一个商品Controller类，类中定义各种操作方法，需要访问数据库的话，往往是通过Service层对象去调用持久层的代码实现数据库操作。下面就实例一段单独通过SpringMVC来实现中间控制层效果的小案例。&lt;/p&gt;

&lt;p&gt;　　为了方便管理jar包，这里我们可以新建一个maven web项目，pom依赖可参考前面的&lt;a href=&quot;http://www.cnblogs.com/young-z/p/7923180.html&quot; target=&quot;_blank&quot;&gt;环境搭建篇&lt;/a&gt;，这里同Servlet对比，我们仅需要一个Java类也就是上面提到的controller，然后是一个指定路径下的jsp文件，最后稍微修改一下web.xml，这三步即可简单过一遍SpringMVC的基本运行过程。下面分别详细写出这三步的内容。&lt;/p&gt;
&lt;h3&gt;　　DemoController.java&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package&lt;/span&gt;&lt;span&gt; com.mmm.web;

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.stereotype.Controller;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; org.springframework.web.bind.annotation.RequestMapping;
@Controller
@RequestMapping(&lt;/span&gt;&quot;demo&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; DemoController {
    
    @RequestMapping(value&lt;/span&gt;=&quot;/toPage&quot;&lt;span&gt;)
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String toPage() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &quot;page&quot;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　从上往下，首先&lt;span&gt;@Controller注解属于Spring系列组件bean注解之一，对应web表现层的组件，类似的还有代表业务逻辑层的@Service，代表数据库访问层的@Repositoty，通用组件&lt;span&gt;@Component等等，实际项目中，层与层之间类对象还会相互调用，基于Spring容器的IOC及依赖注入，我们又还会接触到&lt;span&gt;@Autowired，&lt;span&gt;@Autowired&lt;/span&gt;等等注解。在这里我们可以简单理解为通过&lt;span&gt;@Controller注解，Spring会识别并实例化这个bean，这个类对象的创建和管理将交由Spring容器去控制。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　　然后&lt;span&gt;@RequestMapping(&quot;demo&quot;&lt;span&gt;)，看英文单词意思应该不难理解，&lt;span&gt;&lt;span&gt;&lt;span&gt;Request&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;请求，&lt;span&gt;&lt;span&gt;&lt;span&gt;Mapping映射，请求映射，通过我们客户端例如浏览器那边过来的http请求，前面我们用过的Servlet会通过配置url匹配到访问路径从而匹配到相应的Servlet中，而在这里类似，SpringMVC会根据我们的访问路径匹配到相应的Contoller中的相应方法，是的，这里还会进一步精确匹配到方法。下面&lt;span&gt;@RequestMapping(value=&quot;/toPage&quot;&lt;span&gt;)即方法名的映射，例如这里把类和方法的映射名组合起来即为demo/toPage，在本例中，我们通过localhost:8080/spring-mvc/&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;demo/toPage,即可匹配到这个&lt;span&gt;DemoController&lt;/span&gt;的&lt;span&gt;toPage&lt;/span&gt;方法中执行。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　　可以看到方法的返回值是String字符串类型，这里可以理解为用于获取视图页面路径。下面结合Spring MVC配置文件讲解。&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　　&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;application-mvc.xml&lt;/h3&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;  
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;beans &lt;/span&gt;&lt;span&gt;xmlns&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/beans&quot;&lt;/span&gt;&lt;span&gt;  
    xmlns:xsi&lt;/span&gt;&lt;span&gt;=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;span&gt; xmlns:p&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/p&quot;&lt;/span&gt;&lt;span&gt;  
    xmlns:context&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/context&quot;&lt;/span&gt;&lt;span&gt;  
    xmlns:mvc&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/mvc&quot;&lt;/span&gt;&lt;span&gt;  
    xsi:schemaLocation&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/beans    
                        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd    
                        http://www.springframework.org/schema/context    
                        http://www.springframework.org/schema/context/spring-context-4.0.xsd    
                        http://www.springframework.org/schema/mvc    
                        http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;  
                        
     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 自动扫描开启 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
      &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;context:component-scan &lt;/span&gt;&lt;span&gt;base-package&lt;/span&gt;&lt;span&gt;=&quot;com.mmm.web&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mvc:annotation-driven&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
     
     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; Spring MVC视图解析配置&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;  
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;  
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;prefix&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;/WEB-INF/views/&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;  
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;suffix&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;.jsp&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;  
                        
                        
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;beans&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;　　这里的&lt;span&gt;&amp;lt;&lt;span&gt;context:component-scan &lt;span&gt;base-package&lt;span&gt;=&quot;com.mmm.web&quot; &lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;即用于Spring扫描识别bean注解，例如刚刚讲到的@Controller，而&lt;span&gt;&amp;lt;&lt;span&gt;mvc:annotation-driven&lt;span&gt;/&amp;gt;则&lt;span&gt;用于扫描SpringMVC相关特定注解，例如这里&lt;/span&gt;&lt;span&gt;@RequestMapping等等。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　　下面的视图解析配置即结合刚刚上面讲到的&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;视图页面路径，prefix和suffix分别为前缀和后缀的意思，结合前面的controller中方法，即页面请求转发路径的统一前后缀，前面controller中方法的返回值为&quot;page&quot;，那么组合前后缀，即为/WEB-INF/views/page.jsp，而这个路径对应哪里，如下图所示。&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;data:image/png;base64,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&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　所以我们要在这里创建一个jsp文件，views文件夹也是。&lt;/p&gt;
&lt;p&gt;　　最后在web.xml中加入如下内容&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;servlet&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;servlet-name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;dispatcher&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;servlet-name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;servlet-class&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.springframework.web.servlet.DispatcherServlet&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;servlet-class&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;init-param&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;param-name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;contextConfigLocation&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;param-name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;param-value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;classpath:/application-mvc.xml&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;param-value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;init-param&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;servlet&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;servlet-mapping&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;servlet-name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;dispatcher&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;servlet-name&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;url-pattern&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;/&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;url-pattern&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;servlet-mapping&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　我们会发现这里也是配置的Servlet，即org.springframework.web.servlet.DispatcherServlet，只不过只配置了这单独一个，映射路径匹配通用请求，同时&lt;span&gt;init-param设置初始参数即我们SpringMVC配置文件路径。这样一来，我们请求都会被SpringMVC系列组件接受、解析路径、分配到相应的Controller的相应方法。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　上面步骤结束后，我们发布项目并启动Tomcat服务器，在浏览器地址栏输入http://localhost/spring-mvc/demo/toPage,看到如下页面，即为成功&lt;/span&gt;&lt;img src=&quot;data:image/png;base64,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AAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUsQMBZxA+XriGAAAIIIIAAAggggAACuRQg4MylPnUjgAACCCCAAAIIIIAAAkUs8P8Bc1b6YAAAAARJREFUMuxWUw56BHUAAAAASUVORK5CYIIA&quot; alt=&quot;&quot; width=&quot;916&quot; height=&quot;142&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;　　通过上面基础的实例，我们能一步步理解从Servlet到web框架SpringMVC的使用，实际开发中同样遵循这些基本规则，只不过事更多的业务逻辑、视图文件等等，比如这里讲到页面跳转中的请求转发，那么是否类似Servlet还有响应重定向，还有，Controller中方法我们不一定是跳转到页面，也可以直接传递JSON数据返回前端，以及我们前面学习到的MyBatis封装持久层，那么我们在这里怎么与持久层连接起来去访问数据库查询或者更新数据，还有到底什么是业务逻辑，等等这些都是我们需要考虑的问题，后面准备分别以具体实例展开说明，欢迎一起探讨。&lt;/p&gt;
</description>
<pubDate>Thu, 11 Jan 2018 16:04:00 +0000</pubDate>
<dc:creator>窗外天空晴朗</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/young-z/p/8261053.html</dc:identifier>
</item>
<item>
<title>python爬虫入门-开发环境与小例子 - 环家伟</title>
<link>http://www.cnblogs.com/hjw1/p/8271283.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hjw1/p/8271283.html</guid>
<description>&lt;div class=&quot;container&quot; readability=&quot;21&quot;&gt;

&lt;hr/&gt;&lt;h2 id=&quot;开发环境&quot;&gt;开发环境&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;ubuntu 16.04&lt;/li&gt;
&lt;li&gt;sublime&lt;/li&gt;
&lt;li&gt;pycharm&lt;/li&gt;
&lt;li&gt;requests库&lt;br/&gt;&lt;ul&gt;&lt;li&gt;requests库安装：&lt;br/&gt;&lt;code&gt;sudo pip install requests&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;第一个例子&quot;&gt;第一个例子&lt;/h2&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;
&lt;code class=&quot; hljs avrasm&quot;&gt;import requests
r=requests&lt;span class=&quot;hljs-preprocessor&quot;&gt;.get&lt;/span&gt;(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.baidu.com&quot;&lt;/span&gt;)
r&lt;span class=&quot;hljs-preprocessor&quot;&gt;.encoding&lt;/span&gt;=&lt;span class=&quot;hljs-string&quot;&gt;&quot;utf-8&quot;&lt;/span&gt;
print r&lt;span class=&quot;hljs-preprocessor&quot;&gt;.text&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;运行结果如下，成功抓取了百度的源代码&lt;/p&gt;
&lt;p&gt;&lt;img title=&quot;&quot; src=&quot;http://img.blog.csdn.net/20180111221556494?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGp3MTU0MjI1NDM1Ng==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;这里写图片描述&quot;/&gt;&lt;/p&gt;
&lt;p&gt;现在来详细讲解&lt;br/&gt;&lt;code&gt;import requests&lt;/code&gt;&lt;br/&gt;就是导入了requests库，这是一个爬虫库&lt;/p&gt;
&lt;p&gt;&lt;code&gt;r=requests.get(&quot;http://www.baidu.com&quot;)&lt;/code&gt;&lt;br/&gt;r是一个Response 对象。我们可以从这个对象中获取所有我们想要的信息。requests.get函数参数是url，返回值是一个Response 对象。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;r.encoding=&quot;utf-8&quot;&lt;/code&gt;&lt;br/&gt;设置了网页编码，如果不加，汉字会乱码&lt;br/&gt;&lt;img title=&quot;&quot; src=&quot;http://img.blog.csdn.net/20180111222621048?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaGp3MTU0MjI1NDM1Ng==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast&quot; alt=&quot;这里写图片描述&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;print r.text&lt;/code&gt;&lt;br/&gt;打印网页内容&lt;/p&gt;
&lt;h2 id=&quot;获取请求状态码&quot;&gt;获取请求状态码&lt;/h2&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;
&lt;code class=&quot; hljs python&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;import&lt;/span&gt; requests
r=requests.get(&lt;span class=&quot;hljs-string&quot;&gt;&quot;http://www.baidu.com&quot;&lt;/span&gt;)
&lt;span class=&quot;hljs-keyword&quot;&gt;print&lt;/span&gt; r.status_code&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;运行结果&lt;/p&gt;
&lt;pre class=&quot;prettyprint&quot;&gt;
&lt;code class=&quot; hljs&quot;&gt;200&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;200表示访问成功&lt;/p&gt;
&lt;/div&gt;
</description>
<pubDate>Thu, 11 Jan 2018 15:47:00 +0000</pubDate>
<dc:creator>环家伟</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/hjw1/p/8271283.html</dc:identifier>
</item>
<item>
<title>浅谈回调函数 - 八维空间</title>
<link>http://www.cnblogs.com/bwkj/p/8271272.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bwkj/p/8271272.html</guid>
<description>&lt;p&gt;最近学习js的异步执行，用到回调函数，对这个机制不是很理解，故查了一些资料，在此整理分享一下自己的理解。&lt;/p&gt;
&lt;p&gt;维基百科对回调函数的定义：&lt;/p&gt;
&lt;p&gt;在&lt;a class=&quot;mw-redirect&quot; title=&quot;计算机程序设计&quot; href=&quot;https://zh.wikipedia.org/wiki/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1&quot;&gt;计算机程序设计&lt;/a&gt;中，&lt;strong&gt;回调函数&lt;/strong&gt;，或简称&lt;strong&gt;回调&lt;/strong&gt;（Callback 即call then back 被主函数调用运算后会返回主函数），是指通过&lt;span class=&quot;ilh-all&quot; data-orig-title=&quot;函数参数&quot; data-lang-code=&quot;en&quot; data-lang-name=&quot;英语&quot; data-foreign-title=&quot;Parameter (computer programming)&quot;&gt;&lt;span class=&quot;ilh-page&quot;&gt;&lt;a class=&quot;new&quot; href=&quot;https://zh.wikipedia.org/w/index.php?title=%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0&amp;amp;action=edit&amp;amp;redlink=1&quot;&gt;函数参数&lt;/a&gt;传递到其它代码的，某一块&lt;a class=&quot;mw-redirect&quot; title=&quot;可执行文件&quot; href=&quot;https://zh.wikipedia.org/wiki/%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6&quot;&gt;可执行代码&lt;/a&gt;的&lt;a title=&quot;引用&quot; href=&quot;https://zh.wikipedia.org/wiki/%E5%BC%95%E7%94%A8&quot;&gt;引用&lt;/a&gt;。这一设计允许了&lt;a title=&quot;抽象层&quot; href=&quot;https://zh.wikipedia.org/wiki/%E6%8A%BD%E8%B1%A1%E5%B1%A4&quot;&gt;底层&lt;/a&gt;代码调用在高层定义的&lt;a title=&quot;子程序&quot; href=&quot;https://zh.wikipedia.org/wiki/%E5%AD%90%E7%A8%8B%E5%BA%8F&quot;&gt;子程序&lt;/a&gt;。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;ilh-all&quot; data-orig-title=&quot;函数参数&quot; data-lang-code=&quot;en&quot; data-lang-name=&quot;英语&quot; data-foreign-title=&quot;Parameter (computer programming)&quot;&gt;知乎上一个网友提供的生动描述：&lt;/span&gt;&lt;/p&gt;
&lt;div readability=&quot;17&quot;&gt;
&lt;p&gt;你到一个商店买东西，刚好你要的东西没有货，于是你在店员那里留下了你的电话，过了几天店里有货了，店员就打了你的电话，然后你接到电话后就到店里去取了货。在这个例子里，你的电话号码就叫回调函数，你把电话留给店员就叫登记回调函数，店里后来有货了叫做触发了回调关联的事件，店员给你打电话叫做调用回调函数，你到店里去取货叫做响应回调事件。&lt;/p&gt;

&lt;p&gt;自己的理解：按维基百科的说明理解起来是将回调函数（代码块），作为参数传递给调用函数，由调用函数执行回调函数的代码逻辑。这和函数的调用似乎没有多大区别。但感觉这不像是回调函数，原因是没有突出‘回调’二字。在js中结合回调函数应用的上下文概念，回调函数作为参数似乎只是传递了一个函数指针（函数名）给调用函数，调用函数会触发回调函数到定义其的上下文中去执行。就像饭点到了，你自己没备蔬菜，邻居叫你过去，前一种理解似乎是这样，你等着，他家做好饭你一起吃。后一种是他做好了你打包了一份，带回家吃。自己倾向于后一种理解，原因是调用的函数不需要知道回调函数要做什么，只要知道他的名字，通知他做就好了。&lt;/p&gt;

&lt;p&gt;理解的还不是很透彻，希望大家多多指教。&lt;/p&gt;


&lt;/div&gt;
</description>
<pubDate>Thu, 11 Jan 2018 15:44:00 +0000</pubDate>
<dc:creator>八维空间</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/bwkj/p/8271272.html</dc:identifier>
</item>
<item>
<title>DNN论文分享 - Item2vec: Neural Item Embedding for Collaborative Filtering - 笨兔勿应</title>
<link>http://www.cnblogs.com/bentuwuying/p/8271262.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/bentuwuying/p/8271262.html</guid>
<description>&lt;p&gt;前置点评： 这篇文章比较朴素，创新性不高，基本是参照了google的word2vec方法，应用到推荐场景的i2i相似度计算中，但实际效果看还有有提升的。主要做法是把item视为word，用户的行为序列视为一个集合，item间的共现为正样本，并按照item的频率分布进行负样本采样，缺点是相似度的计算还只是利用到了item共现信息，1).忽略了user行为序列信息; 2).没有建模用户对不同item的喜欢程度高低。&lt;/p&gt;
&lt;p&gt;-------------------------------------------------&lt;/p&gt;
&lt;p&gt;0 背景：&lt;/p&gt;
&lt;p&gt;推荐系统中，传统的CF算法都是利用 item2item 关系计算商品间相似性。i2i数据在业界的推荐系统中起着非常重要的作用。传统的i2i的主要计算方法分两类，memory-based和model-based。&lt;/p&gt;
&lt;p&gt;作者受nlp中运用embedding算法学习word的latent representation的启发，特别是参考了google发布的的word2vec（Skip-gram with Negative Sampling，SGNS），利用item-based CF 学习item在低维 latent space的 embedding representation，优化i2i的计算。&lt;/p&gt;
&lt;p&gt;-------------------------------------------------&lt;/p&gt;
&lt;p&gt;1 回顾下google的word2vec：&lt;/p&gt;
&lt;p&gt;自然语言处理中的neural embedding尝试把 words and phrases 映射到一个低维语义和句法的向量空间中。&lt;/p&gt;
&lt;p&gt;Skip-gram的模型架构：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111233827519-541927146.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;Skip-gram是利用当前词预测其上下文词。给定一个训练序列&lt;img src=&quot;http://www.zhihu.com/equation?tex=w_%7B1%7D&quot; alt=&quot;w_{1}&quot;/&gt;,&lt;img src=&quot;http://www.zhihu.com/equation?tex=w_%7B2%7D+&quot; alt=&quot;w_{2} &quot;/&gt;,...,&lt;img src=&quot;http://www.zhihu.com/equation?tex=w_%7BT%7D+&quot; alt=&quot;w_{T} &quot;/&gt;，模型的目标函数是最大化平均的log概率：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111233846347-1775273611.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;目标函数中c中context的大小。c越大，训练样本也就越大，准确率也越高，同时训练时间也会变长。&lt;/p&gt;
&lt;p&gt;在skip-gram中，&lt;img src=&quot;http://www.zhihu.com/equation?tex=P%28w_%7Bt%2Bj%7D%7Cw_%7Bt%7D%29&quot; alt=&quot;P(w_{t+j}|w_{t})&quot;/&gt; 利用softmax函数定义如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111233904879-1818084580.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;W是整个语料库的大小。上式的梯度的计算量正比如W，W通常非常大，直接计算上式是不现实的。为了解决这个问题，google提出了两个方法，一个是hierarchical softmax，另一个方法是negative sample。negative sample的思想本身源自于对Noise Contrastive Estimation的一个简化，具体的，把目标函数修正为：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111233922363-1920312153.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://www.zhihu.com/equation?tex=P_%7Bn%7D%28w%29&quot; alt=&quot;P_{n}(w)&quot;/&gt;是噪声分布 ( noise distribution )。即训练目标是使用Logistic regression区分出目标词和噪音词。具体的Pn(w)方面有些trick，google使用的是unigram的3/4方，即&lt;img src=&quot;http://www.zhihu.com/equation?tex=U%28w%29%5E%7B3%2F4%7D%2FZ+&quot; alt=&quot;U(w)^{3/4}/Z &quot;/&gt;，好于unigram，uniform distribution。&lt;/p&gt;

&lt;p&gt;另外，由于自然语言中很多高频词出现频率极高，但包含的信息量非常小（如'is' 'a' 'the'）。为了balance低频词和高频词，利用简单的概率丢弃词&lt;img src=&quot;http://www.zhihu.com/equation?tex=w_%7Bi%7D+&quot; alt=&quot;w_{i} &quot;/&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111233941832-2085338012.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;其中&lt;img src=&quot;http://www.zhihu.com/equation?tex=f%28w_%7Bi%7D+%29&quot; alt=&quot;f(w_{i} )&quot;/&gt;是&lt;img src=&quot;http://www.zhihu.com/equation?tex=w_%7Bi%7D+&quot; alt=&quot;w_{i} &quot;/&gt;的词频，t的确定比较trick，启发式获得。实际中t大约在&lt;img src=&quot;http://www.zhihu.com/equation?tex=10%5E%7B-5%7D+&quot; alt=&quot;10^{-5} &quot;/&gt;附近。&lt;/p&gt;

&lt;p&gt;-------------------------------------------------&lt;/p&gt;
&lt;p&gt;2 Item2vec算法原理：&lt;/p&gt;
&lt;p&gt;Item2vec中把用户浏览的商品集合等价于word2vec中的word的序列，即句子（忽略了商品序列空间信息spatial information） 。出现在同一个集合的商品对视为 positive。对于集合&lt;img src=&quot;http://www.zhihu.com/equation?tex=w_%7B1%7D%2C+w_%7B2%7D%2C+...%2Cw_%7BK%7D&quot; alt=&quot;w_{1}, w_{2}, ...,w_{K}&quot;/&gt;目标函数：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111234000301-137065036.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;同word2vec，利用负采样，将&lt;img src=&quot;http://www.zhihu.com/equation?tex=p%28w_%7Bj%7D%7Cw_%7Bj%7D%29&quot; alt=&quot;p(w_{j}|w_{j})&quot;/&gt;定义为：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111234014379-224503951.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;subsample的方式也是同word2vec：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111234026863-1236285228.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;最终，利用SGD方法学习的目标函数max，得到每个商品的embedding representation，商品之间两两计算cosine相似度即为商品的相似度。 &lt;/p&gt;

&lt;p&gt;-------------------------------------------------&lt;/p&gt;
&lt;p&gt;3 Item2vec效果：&lt;/p&gt;
&lt;p&gt;对比的baseline方法是基于SVD方法的用户embedding得到的相似度，SVD分解的维度和item2vec的向量维度都取40，详细见paper。数据是应用在music领域的，作者利用web上音乐人的类别进行聚类，同一个颜色的节点表示相同类型的音乐人，结果对比如下： &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/995611/201801/995611-20180111234044769-1606819152.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;图a是item2vec的聚合效果，图b是SVD分解的聚合效果，看起来item2vec的聚合效果更好些。&lt;/p&gt;&lt;p&gt;原文&lt;a class=&quot; external&quot; href=&quot;http://link.zhihu.com/?target=https%3A//arxiv.org/pdf/1603.04259v2.pdf&quot; rel=&quot;nofollow noreferrer&quot; target=&quot;_blank&quot;&gt;&lt;span class=&quot;invisible&quot;&gt;https://&lt;span class=&quot;visible&quot;&gt;arxiv.org/pdf/1603.0425&lt;span class=&quot;invisible&quot;&gt;9v2.pdf&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;参考文献：&lt;/p&gt;
&lt;p&gt;[1] Mikolov T, Sutskever I, Chen K, Corrado GS, Dean J. Distributed representations of words and phrases and their compositionality. In Advances in neural information processing systems 2013 (pp. 3111-3119).&lt;/p&gt;
</description>
<pubDate>Thu, 11 Jan 2018 15:41:00 +0000</pubDate>
<dc:creator>笨兔勿应</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/bentuwuying/p/8271262.html</dc:identifier>
</item>
<item>
<title>基于TCP协议的项目架构之Socket流传输的实现 - 我心自在</title>
<link>http://www.cnblogs.com/10158wsj/p/8215047.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/10158wsj/p/8215047.html</guid>
<description>&lt;h2&gt;&lt;span&gt;&lt;strong&gt;项目背景&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;　　  &lt;/strong&gt;&lt;span&gt;某银行的影像平台由于使用时间长，服务器等配置原因，老影像系统满足不了现在日益增长的数据量的需求，所以急需要升级改造。传统的影像平台使用的是Oracle数据库和简单的架构来存储数据（视频、图片等），所以很难满足现在的业务需求，其中最主要的就是存储下载等速度的影响，综合考虑之后，我们给出了升级改造方案，基于Http协议的数据传输和基于TCP协议的数据传输，按照行方的要求需要用TCP协议，我们最终采用的是Socket网络传输的方案。&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;&lt;strong&gt;TCP&lt;/strong&gt;&lt;strong&gt;协议介绍&lt;/strong&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;　　TCP是一种面向连接的、可靠的、基于字节流的传输层通信协议，在简化的计算机网络OSI模型中，它完成第四层传输层所指定的功能，TCP层位于IP层之上，应用层之下的中间层，不同主机的应用层之间经常需要可靠的、像管道一样的连接，但IP层不需要提供这样的机制，而是提供不可靠的包交换。当应用层向TCP层发送用于网间传输的、用8位字节标示的数据流，TCP会把数据流分割为适当长度的报文段，之后TCP把数据包传给IP层，由它来通过网络将包传输给接收端的实体TCP层。TCP是因特网中的传输层协议，使用3次握手协议建立连接。&lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Socket&lt;/h2&gt;
&lt;p&gt;        &lt;span&gt;TCP通信是严格区分客户端与服务端的，在通信时，必须先由客户端去连接服务器才能实现通信，服务器端不可以主动连接客户端，并且服务器要事先启动，等待客户端的连接。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;        在JDK中提供了两个类用于实现TCP程序，一个是ServerSocket类，用于表示服务器，一个是Socket类，用于表示客户端。通信时，首先创建代表服务器端的ServerSocket对象，该对象相当于开启一个服务，并等待客户端的连接，然后创建代表客户端的Socket对象向服务器端发出连接请求，服务器端响应请求，两者建立连接，开始通信。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;        下面是我们通过Socket建立的模型，是多线程的，首先看服务端代码：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * socket服务端
 * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; 我心自在
 *
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Main {
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; Log logger=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;线程池&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; ExecutorService executor =&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * 静态块，初始化
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;static&lt;/span&gt;&lt;span&gt;{
        logger&lt;/span&gt;=LogFactory.getLog(SocketMain.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;线程池&lt;/span&gt;
        executor = Executors.newFixedThreadPool(Integer.parseInt(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; PropertiesUtil().
                getProperties(&lt;/span&gt;&quot;config.properties&quot;).getProperty(&quot;UserThreads&quot;&lt;span&gt;)));
        }
    &lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * 主程序入口
     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; args
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        ServerSocket server &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        Socket socket &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        PropertiesUtil PropertiesUtil &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; PropertiesUtil();
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;启动Socket服务端&lt;/span&gt;
    server=newServerSocket(Integer.parseInt(PropertiesUtil.getProperties(&quot;config.properties&quot;&lt;span&gt;)
                    .getProperty(&lt;/span&gt;&quot;port&quot;&lt;span&gt;)));
            &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (&lt;span&gt;true&lt;/span&gt;&lt;span&gt;) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;多线程接收客户端请求&lt;/span&gt;
                socket =&lt;span&gt; server.accept();
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (socket != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    executor.execute(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Controller(socket));
                }
            }
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
            logger.error(&lt;/span&gt;&quot;Main IO异常：&quot;+&lt;span&gt;e.getMessage(),e);
        } &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (server != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    server.close();
                }
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (socket != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    socket.close();
                }
            } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
                logger.error(&lt;/span&gt;&quot;Main流关闭异常：&quot;+&lt;span&gt;e.getMessage(),e);
            }
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;下面是业务处理类，支持多线程，主要用来处理业务&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; SocketController &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Runnable {
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; Socket socket;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; Log logger=LogFactory.getLog(SocketController.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; SocketController(Socket socket) {
        &lt;/span&gt;&lt;span&gt;super&lt;/span&gt;&lt;span&gt;();
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.socket =&lt;span&gt; socket;
    }
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;读取文件流&lt;/span&gt;
        String requestMethod=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        Map&lt;/span&gt;&amp;lt;String,Object&amp;gt; getMethAndNumMap=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        Map&lt;/span&gt;&amp;lt;String,Object&amp;gt; jsonMap=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        BufferedInputStream  bis &lt;/span&gt;=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;; 
        OutputStream ops &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        BufferedWriter bw &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        BufferedOutputStream bos &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        Document doc&lt;/span&gt;=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        String XMLString&lt;/span&gt;=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            bis&lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; BufferedInputStream (socket.getInputStream());
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取输出流&lt;/span&gt;
            ops =&lt;span&gt; socket.getOutputStream();
            bos &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; BufferedOutputStream(ops);
            bw &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; BufferedWriter(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; OutputStreamWriter(ops));
            &lt;/span&gt;&lt;span&gt;byte&lt;/span&gt;[] fileinfo=&lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[256&lt;span&gt;];
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                bis.read(fileinfo);
            } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e1){
                logger.error(&lt;/span&gt;&quot;流读取异常....&quot;+&lt;span&gt;e1.getMessage(),e1);
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(fileinfo!=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;){
                fileInfoString&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt;&lt;span&gt; String(fileinfo).trim();
            }
            jsonMap&lt;/span&gt;=&lt;span&gt;JSONUtil.jsonToMap(fileInfoString);
            requestMethod&lt;/span&gt;=(String) jsonMap.get(&quot;requestMethod&quot;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!(requestMethod==&lt;span&gt;null&lt;/span&gt;||&quot;&quot;&lt;span&gt;.equals(requestMethod))) {
                    &lt;/span&gt;&lt;span&gt;switch&lt;/span&gt;&lt;span&gt; (requestMethod){ 
                    &lt;/span&gt;&lt;span&gt;case&lt;/span&gt; &quot;login&quot;&lt;span&gt;:
                        Login.login(XMLString,bw,doc);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;登录接口&lt;/span&gt;
                        &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                    &lt;/span&gt;&lt;span&gt;case&lt;/span&gt; &quot;XXXX&quot;&lt;span&gt;:
                        XXX.xxx();
                        &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                    &lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;请求方法错误&lt;/span&gt;
&lt;span&gt;
                    }
                }
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (UnknownHostException e) {
            logger.error(&lt;/span&gt;&quot;Socket未知端口：&quot;+&lt;span&gt;e.getMessage(),e);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
            logger.error(&lt;/span&gt;&quot;Controller读流流异常：&quot;+&lt;span&gt;e.getMessage(),e);
        }&lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt;{
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (bw!=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
                    bw.flush();
                    bw.close();
                }
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(ops!=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;){
                    ops.close();
                }
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(bos!=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;){
                    bos.close();
                }
                bis.close();
                socket.close();
            } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
                logger.error(&lt;/span&gt;&quot;socket关闭异常：&quot;+&lt;span&gt;e.getMessage(),e);
            }
        }
    }
        &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;这里只贴出了部分代码，做个参考，基本思想就是，通过输入流接到客户端发送过来的报文，然后进行解析，为什么统一用字节流接受呢，因为我们的文件上传分两部分，一部分是文件信息，一部分是文件流，所以为了方便，统一使用字节流接收，根据字节流中的请求接口方法，调用对应的接口方法，完成业务处理。因为客户端的报文有两种，一种是XML类型的报文，另外一种是json格式的报文，这里只贴出了部分json格式的代码。差的只是一个XML的解析，解析方式很多，就不再赘述。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;下面是客户端代码，以登录为例：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoginTest {
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
        String xml &lt;/span&gt;= 
                &quot;&amp;lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot;?&amp;gt;&quot;
                    + &quot;&amp;lt;root&amp;gt;&quot;
                        + &quot;&amp;lt;requestMethod&amp;gt;login&amp;lt;/requestMethod&amp;gt;&quot;
                        + &quot;&amp;lt;userinfo&amp;gt;&quot;
                            + &quot;&amp;lt;loginname&amp;gt;test&amp;lt;/loginname&amp;gt;&quot;    
                            + &quot;&amp;lt;passwd&amp;gt;dmd1dnZndXY=&amp;lt;/passwd&amp;gt;&quot;
                        + &quot;&amp;lt;/userinfo&amp;gt;&quot;    
                    + &quot;&amp;lt;/root&amp;gt;&quot;&lt;span&gt;;
        Socket socket&lt;/span&gt;=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        BufferedWriter bw&lt;/span&gt;=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        BufferedReader br&lt;/span&gt;=&lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            socket&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; Socket(&lt;span&gt;new&lt;/span&gt; ConfigUtil().getValue(&quot;ipAddress&quot;&lt;span&gt;), 
                    Integer.parseInt(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt; ConfigUtil().getValue(&quot;port&quot;&lt;span&gt;)));
            bw&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; BufferedWriter(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; OutputStreamWriter(socket.getOutputStream()));
            bw.write(xml);
            bw.newLine();
            bw.flush();
            br&lt;/span&gt;=&lt;span&gt;new&lt;/span&gt; BufferedReader(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; InputStreamReader(socket.getInputStream()));
            System.out.println(&lt;/span&gt;&quot;服务器返回报文：&quot;+&lt;span&gt;br.readLine());
            bw.close();
            br.close();
            socket.close();
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (UnknownHostException e) {
            e.printStackTrace();
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (IOException e) {
            e.printStackTrace();
        }
    }    &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;客户端代码非常简单，基本就是以流的形式发送报文，发送到客户端，完成请求，收到服务器响应后，关闭连接，完成一次请求。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　以上只是一个简单的Socket通信模型，具体项目中涉及到很多内容，这里无法一一列举。大致思路我们就是通过Socket通信，获取客户端发送过来的报文，然后对报文进行解析，根据请求方法，调用不同的业务接口，处理不同的业务，我们的业务包括对影像资料的增删改查，文件根据不同的大小存在大数据集群中，小文件存入Hbase，大文件存入HDFS，然后根据不同的场景去查询删除或者更新。这里边涉及到的存索引，用到了Elasticsearch5.4，用来做高级检索查询。&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 11 Jan 2018 14:42:00 +0000</pubDate>
<dc:creator>我心自在</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/10158wsj/p/8215047.html</dc:identifier>
</item>
<item>
<title>用 Identity Server 4 (JWKS 端点和 RS256 算法) 来保护 Python web api - solenovex</title>
<link>http://www.cnblogs.com/cgzl/p/8270677.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/cgzl/p/8270677.html</guid>
<description>&lt;p&gt;目前正在使用asp.net core 2.0 (主要是web api)做一个项目, 其中一部分功能需要使用js客户端调用python的pandas, 所以需要建立一个python 的 rest api, 我暂时选用了hug, 官网在这: &lt;a href=&quot;http://www.hug.rest/&quot; target=&quot;_blank&quot;&gt;http://www.hug.rest/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;目前项目使用的是identity server 4, 还有一些web api和js client.&lt;/p&gt;
&lt;p&gt;项目的早期后台源码: &lt;a href=&quot;https://github.com/solenovex/asp.net-core-2.0-web-api-boilerplate&quot; target=&quot;_blank&quot;&gt;https://github.com/solenovex/asp.net-core-2.0-web-api-boilerplate&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下面开始配置identity server 4, 我使用的是windows.&lt;/p&gt;

&lt;p&gt;在 authorization server项目中的配置文件添加红色部分, 这部分就是python hug 的 api:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IEnumerable&amp;lt;ApiResource&amp;gt;&lt;span&gt; GetApiResources()
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; List&amp;lt;ApiResource&amp;gt;&lt;span&gt;
            {
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; ApiResource(SalesApiSettings.ApiName, SalesApiSettings.ApiDisplayName) {
                    UserClaims &lt;/span&gt;=&lt;span&gt; { JwtClaimTypes.Name, JwtClaimTypes.PreferredUserName, JwtClaimTypes.Email }
                },
                &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; ApiResource(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;purchaseapi&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;采购和原料库API&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;) {
                    UserClaims &lt;/span&gt;=&lt;span&gt; { JwtClaimTypes.Name, JwtClaimTypes.PreferredUserName, JwtClaimTypes.Email }
                },
                &lt;/span&gt;&lt;span&gt;new ApiResource(&quot;hugapi&quot;, &quot;Hug API&quot;) {
                    UserClaims =&lt;/span&gt;&lt;span&gt;&lt;span&gt; { JwtClaimTypes.Name, JwtClaimTypes.PreferredUserName, JwtClaimTypes.Email }
                }&lt;/span&gt;
            };
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Sales JavaScript Client&lt;/span&gt;
                &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Client
                {
                    ClientId &lt;/span&gt;=&lt;span&gt; SalesApiSettings.ClientId,
                    ClientName &lt;/span&gt;=&lt;span&gt; SalesApiSettings.ClientName,
                    AllowedGrantTypes &lt;/span&gt;=&lt;span&gt; GrantTypes.Implicit,
                    AllowAccessTokensViaBrowser &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
                    AccessTokenLifetime &lt;/span&gt;= &lt;span&gt;60&lt;/span&gt; * &lt;span&gt;10&lt;/span&gt;&lt;span&gt;,
                    AllowOfflineAccess &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
                    RedirectUris &lt;/span&gt;=           { $&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{Startup.Configuration[&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;MLH:SalesApi:ClientBase&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]}/login-callback&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, $&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{Startup.Configuration[&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;MLH:SalesApi:ClientBase&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]}/silent-renew.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; },
                    PostLogoutRedirectUris &lt;/span&gt;= { Startup.Configuration[&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;MLH:SalesApi:ClientBase&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;] },
                    AllowedCorsOrigins &lt;/span&gt;=     { Startup.Configuration[&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;MLH:SalesApi:ClientBase&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;] },
                    AlwaysIncludeUserClaimsInIdToken &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
                    AllowedScopes &lt;/span&gt;=&lt;span&gt;
                    {
                        IdentityServerConstants.StandardScopes.OpenId,
                        IdentityServerConstants.StandardScopes.Profile,
                        IdentityServerConstants.StandardScopes.Email,
                        SalesApiSettings.ApiName,
                        &lt;/span&gt;&lt;span&gt;&quot;hugapi&quot;&lt;/span&gt;&lt;span&gt;
                    }
                }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;添加 hugapi, 与authorization server配置对应.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{
        authority: &lt;/span&gt;'http://localhost:5000'&lt;span&gt;,
        client_id: &lt;/span&gt;'sales'&lt;span&gt;,
        redirect_uri: &lt;/span&gt;'http://localhost:4200/login-callback'&lt;span&gt;,
        response_type: &lt;/span&gt;'id_token token'&lt;span&gt;,
        scope: &lt;/span&gt;'openid profile salesapi &lt;span&gt;hugapi&lt;/span&gt; email'&lt;span&gt;,
        post_logout_redirect_uri: &lt;/span&gt;'http://localhost:4200'&lt;span&gt;,

        silent_redirect_uri: &lt;/span&gt;'http://localhost:4200/silent-renew.html'&lt;span&gt;,
        automaticSilentRenew: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
        accessTokenExpiringNotificationTime: &lt;/span&gt;4&lt;span&gt;,
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; silentRequestTimeout:10000,&lt;/span&gt;
        userStore: &lt;span&gt;new&lt;/span&gt;&lt;span&gt; WebStorageStateStore({ store: window.localStorage })
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;(可选) 安装virtualenv:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
pip install virtualenv
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后在某个地方建立一个目录:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
mkdir hugapi &amp;amp;&amp;amp; cd hugapi
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;建立虚拟环境:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
virtualenv venv
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;激活虚拟环境:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
venv\Scripts\activate
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后大约这样显示:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/986268/201801/986268-20180111210921019-2038418755.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;安装hug:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
pip install hug
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这时, 参考一下hug的文档. 然后建立一个简单的api. 建立文件main.py:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; hug

@hug.get(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;/home&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; root():
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;Welcome home!&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;运行:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
hug -f main.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;结果好用:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/986268/201801/986268-20180111211520144-212249182.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;然后还需要安装这些:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
pip install cryptography pyjwt hug_middleware_cors
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其中pyjwt是一个可以encode和decode JWT的库, 如果使用RS256算法的话, 还需要安装cryptography. &lt;/p&gt;
&lt;p&gt;而hug_middleware_cors是hug的一个跨域访问中间件(因为js客户端和这个api不是在同一个域名下).&lt;/p&gt;
&lt;p&gt;添加需要的引用:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; hug
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; jwt
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; json
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; urllib.request
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; jwt.algorithms &lt;span&gt;import&lt;/span&gt;&lt;span&gt; get_default_algorithms
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; hug_middleware_cors &lt;span&gt;import&lt;/span&gt; CORSMiddleware
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后正确的做法是通过Authorization Server的discovery endpoint来找到jwks_uri,&lt;/p&gt;
&lt;p&gt;identity server 4 的discovery endpoint的地址是:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://localhost:5000/.well-known/openid-configuration&quot; target=&quot;_blank&quot;&gt;http://localhost:5000/.well-known/openid-configuration&lt;/a&gt;, 里面能找到各种节点和信息:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/986268/201801/986268-20180111213116847-1816235446.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;但我还是直接写死这个jwks_uri吧:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
response = urllib.request.urlopen(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;http://localhost:5000/.well-known/openid-configuration/jwks&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
still_json &lt;/span&gt;= json.dumps(json.loads(response.read())[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keys&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;][0])
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;identity server 4的jwks_uri, 里面是public key, 它的结构是这样的:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/986268/201801/986268-20180111212418676-1175973269.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;而我使用jwt库, 的参数只能传入一个证书的json, 也可就是keys[0].&lt;/p&gt;
&lt;p&gt;所以上面的最后一行代码显得有点.......&lt;/p&gt;
&lt;p&gt;如果使用python-jose这个库会更简单一些, 但是在我windows电脑上总是安装失败, 所以还是凑合用pyjwt吧.&lt;/p&gt;
&lt;p&gt;然后让hug api使用cors中间件:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
api = hug.API(&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;)
api.http.add_middleware(CORSMiddleware(api))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后是hug的authentication部分:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;def&lt;/span&gt;&lt;span&gt; token_verify(token):
    token &lt;/span&gt;= token.replace(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Bearer &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
    rsa &lt;/span&gt;= get_default_algorithms()[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;RS256&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    cert &lt;/span&gt;=&lt;span&gt; rsa.from_jwk(still_json)
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
        result &lt;/span&gt;= jwt.decode(token, cert, algorithms=[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;RS256&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;], audience=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;hugapi&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;print&lt;/span&gt;&lt;span&gt;(result)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result
    &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; jwt.DecodeError:
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False

token_key_authentication &lt;/span&gt;= hug.authentication.token(token_verify)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;通过rsa.from_jwk(json) 就会得到key (certificate), 然后通过jwt.decode方法可以把token进行验证并decode, 算法是RS256, 这个方法要求如果token里面包含了aud, 那么方法就需要要指定audience, 也就是hugapi.&lt;/p&gt;
&lt;p&gt;最后修改api 方法, 加上验证:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
@hug.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;/home&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, requires=&lt;span&gt;token_key_authentication)
&lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; root():
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;Welcome home!&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最后运行 hug api:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
hug &lt;span&gt;-f&lt;/span&gt; main.py
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;端口应该是8000.&lt;/p&gt;
&lt;p&gt;运行js客户端,登陆, 并调用这个hug api http://localhost:8000/home:&lt;/p&gt;
&lt;p&gt;(我的js客户端是angular5的, 这个没法开源, 公司财产, 不过配置oidc-client还是很简单的, 使用)&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/986268/201801/986268-20180111213407676-75532577.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;返回200, 内容是: &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/986268/201801/986268-20180111213443051-377576137.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;看一下hug的log:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/986268/201801/986268-20180111213532519-1875115961.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;token被正确验证并解析了. 所以可以进入root方法了.&lt;/p&gt;

&lt;p&gt;其他的python api框架, 都是同样的道理.&lt;/p&gt;
&lt;p&gt;可以使用这个例子自行搭建 &lt;a href=&quot;https://github.com/IdentityServer/IdentityServer4.Samples/tree/release/Quickstarts/7_JavaScriptClient&quot; target=&quot;_blank&quot;&gt;https://github.com/IdentityServer/IdentityServer4.Samples/tree/release/Quickstarts/7_JavaScriptClient &lt;/a&gt;&lt;/p&gt;
&lt;p&gt;官方还有一个nodejs api的例子: &lt;a href=&quot;https://github.com/lyphtec/idsvr4-node-jwks&quot; target=&quot;_blank&quot;&gt;https://github.com/lyphtec/idsvr4-node-jwks&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Thu, 11 Jan 2018 13:44:00 +0000</pubDate>
<dc:creator>solenovex</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/cgzl/p/8270677.html</dc:identifier>
</item>
</channel>
</rss>