<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>工厂方法模式. - JMCui</title>
<link>http://www.cnblogs.com/jmcui/p/9988320.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jmcui/p/9988320.html</guid>
<description>&lt;h2 id=&quot;一概念&quot;&gt;一、概念&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;工厂方法模式：用来封装对象的创建。工厂方法模式（Factory Method Pattern）通过让&lt;strong&gt;子类&lt;/strong&gt;决定该创建的对象是什么，来达到将对象创建的过程封装的目的。这样，关于超类的代码和子类创建对象的代码之间就解耦了。&lt;/li&gt;
&lt;li&gt;角色：&lt;br/&gt; 1、抽象工厂（Creator）：定义了一个抽象的工厂方法，让子类实现此方法制造产品。&lt;br/&gt; 2、具体工厂（ConcreteCreator）：实现抽象工厂方法，包含具体生产产品的实现代码，返回一个产品的实例。&lt;br/&gt; 3、抽象产品（Product）：定义一个抽象的产品，为了工厂中创建产品类型的匹配。&lt;br/&gt; 4、具体产品（ConcreteProduct）：实现抽象产品，包含各自产品的特色代码。&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;二demo-实现&quot;&gt;二、Demo 实现&lt;/h2&gt;
&lt;p&gt;TOPIC：我们要定义一个披萨店，并允许个人或机构加盟，而且个人或机构可以根据当地不同的口味生产不同的披萨。&lt;/p&gt;
&lt;h4 id=&quot;抽象工厂---pizzastore.java&quot;&gt;1、抽象工厂 - PizzaStore.java&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;public abstract class PizzaStore {

    public Pizza orderPizza(String type) {
        Pizza pizza = createPizza(type);
        System.out.println(pizza.name);
        pizza.bake();
        pizza.cut();
        pizza.box();
        return pizza;
    }
    
    protected abstract Pizza createPizza(String type);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这里，我们定义了一个抽象工厂角色，并定义了一个抽象工厂方法。这样产品（Pizza）的实例化过程会交由抽象工厂的子类 —— 具体工厂去创建。&lt;/p&gt;
&lt;h4 id=&quot;抽象产品---pizza.java&quot;&gt;2、抽象产品 - Pizza.java&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;public abstract class Pizza {
    /**
     * 披萨的名字
     */
    protected String name;

    protected void bake() {
        System.out.println(&quot;烘烤25分钟...&quot;);
    }

    protected void cut() {
        System.out.println(&quot;把匹萨沿着对角线切开...&quot;);
    }

    protected void box() {
        System.out.println(&quot;包装用官方标准的盒子...&quot;);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这里，我们定义了一个抽象产品角色，之所以把产品定义成抽象的，有两个原因：一是为了在具体工厂中生产的产品可以用统一的抽象父类来接收；二是为了让加盟商可以任意的扩展自己的产品。这种设计符合我们的设计原则 —— 面向接口（或抽象）编程，不面向实现编程。&lt;/p&gt;
&lt;h4 id=&quot;具体产品&quot;&gt;3、具体产品&lt;/h4&gt;
&lt;p&gt;现在有加盟商要加盟我们的商店，他希望能够按照他们的地方特色，自定义他们要出售的披萨...那么，只要扩展 Pizza 类就可以了！&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public class CheesePizza extends Pizza {
    public CheesePizza() {
        name = &quot;这是一个奶酪披萨&quot;;
    }
    @Override
    protected void bake() {
        System.out.println(&quot;烘烤30分钟...&quot;);
    }
    @Override
    protected void cut() {
        System.out.println(&quot;把匹萨按四等分切开...&quot;);
    }
    @Override
    protected void box() {
        System.out.println(&quot;包装用奶酪披萨特制的盒子...&quot;);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;pre&gt;
&lt;code&gt;public class DurianPizza extends Pizza {
    public DurianPizza() {
        name = &quot;这是一个榴莲披萨&quot;;
    }
    @Override
    protected void bake() {
        System.out.println(&quot;烘烤45分钟...&quot;);
    }
    @Override
    protected void cut() {
        System.out.println(&quot;把匹萨按三等分切开...&quot;);
    }
    @Override
    protected void box() {
        System.out.println(&quot;包装用榴莲披萨特制的盒子...&quot;);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h4 id=&quot;具体工厂---pizzafactory.java&quot;&gt;4、具体工厂 - PizzaFactory.java&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;public class PizzaFactory extends PizzaStore {
    
    @Override
    protected Pizza createPizza(String type) {
        switch (type) {
            case &quot;cheese&quot;:
                return new CheesePizza();
            case &quot;durian&quot;:
                return new DurianPizza();
            default:
                break;
        }
        return null;
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这里，我们定义了一个具体工厂角色，继承自抽象工厂，产品（Pizza）的具体实例化代码在这里实现。&lt;/p&gt;
&lt;h4 id=&quot;测试&quot;&gt;5、测试&lt;/h4&gt;
&lt;pre&gt;
&lt;code&gt;public class Test {

    public static void main(String[] args) {
        PizzaStore store = new PizzaFactory();
        store.orderPizza(&quot;cheese&quot;);
        store.orderPizza(&quot;durian&quot;);
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhYAAAFJCAYAAADHd2RsAAAgAElEQVR4nO3d6XMU56Hv8d9oJBkwspBmhAEfr9pYkriOA5JYk3OTOokWvJxT94VjMDjJi/viJF6wnf/gVmVxcHxenooNAtt169a1r9nsusd1k2AQCKi6FS+gESJewmI0MwiXbTBaum93z6IZzUhqQY/UI74fagB1P/3006Pu6V8//cxMYMWKFaYAAAA8UDLTDQAAALMHwQIAAHiGYAEAADxDsAAAAJ4hWAAAAM8QLAAAgGcIFgAAwDMECwAA4BmCBQAA8AzBAgAAeIZgAQAAPEOwAAAAniFYAAAAzxAsAACAZwgWAADAMwQLAADgGYIFAADwDMECAAB4hmABAAA8Q7AAAACeIVgAAADPECwAAIBnCBYAAMAzBAsAAOAZggUAAPAMwQIAAHiGYAEAADxDsAAAAJ4hWAAAAM8QLAAAgGcIFgAAwDMECwAA4BmCBQAA8AzBAgAAeIZgAQAAPEOwAAAAniFYAAAAzxAsAACAZwgWAADAMwQLAADgmdLpWlFjY+N0rQouRCKRmW4CAGAWmrYei4aGhulaFSbB7wIAUCjT1mNhCwaD07k6AAAwzaY1WJimOZ2rAwAA04xgAQAAPEOwAAAAnuHtpgAAwDP0WAAAAM8QLAAAgGe4FQIAADzj/x6LYKlGQktkzFsgc958Z1Lgylcq+XpAwfg5yTA8biUAALhevg4Ww3ct0/Cdy2UGxzQzlPgncO2qSj87qdILfR61EAAA3AhfBotAIOCUHbrnOxPXd8tcDdV/V8Hzp9PL+I1phrVm06NaqRN6fXeXYlY7AQCYraY1WLi1+K57dP7Tjwu+zI0y69v0ZGtdzvT48df06pHYtLalUKrv/69atPa/6dR/dMgcujrTzQEA+JzveiwW33mPKiqrrbJ/c90DYZezl1n0D4Yu/P2TccuVLzE0Z/mwAiXWMoZ09WSphs5f//hV01l3XMdf26UjsURPhBlerc0/eVS/qHpHL+3vtaZE1bX7JXWNNva61zedUoEiOOe2mW4KAKCI+CpYBIOlWnzXvbry1Zc5Za+e+1iD0fMyBq+p9LYFmnvHfSqtWJBVr73sxXN/18jIcN767VAx+FmJrvYGNbdhRHPtn8+V3cD2jP4n/f9ol94+XqvHVjVpdahHXbHiuvVBoAAA3Ahf3QpZEAqrtGzMid46Y18+8ScNfXFJ8xvuV/DWCg1ejlnT/qLQhjYFgqPl7WXtOuL9n+dfQcDUN38LOl0N35wJqvzukYJsRzQ2YP1dlWx+WGsff0yrdFyvdh5WtGatHn9slUJ5xlrEj+1WZ2/DhPN3dSVusYTXbNamplB6ntl3QH/Y13vdbSZQAAC84Ksei4oFVU6Z1MN29ewZXYt+rur1bSpL9lCUhxZp/n0r7FGe6XpTD7uO2MUL47fBSPYulJhOwLCXCaSfBWvesPsehtTmmJk9FpZwyA4VA4r2m0r8SdZtF4oeVueLhzPqsILHlk1q0jEdONRvbVN0wvmmPUi1YaNazQPavj0RMszwGm3Z1KrNq+Pq7Jra2A4CBQDAS74KFmXlc7LK2o/B+EWVVlapdH5l7vLJnzOn23WMt55AWeI0H1xg6tb7R2QMSpU/GJIyig/2B3Tlg6C77Un/PRoszMYHtbk5pFj3AUVSTcy8ZTKmjpq1rWqqjuvY7kOKKpAzBiPv/Mge7YxktKO/V33xJjXVNihshY+oi3eeECgAAIXgq2CRWS5d1jCVczaeqPx467HOtfE99uaaKq80nJ+dss7na5mJAtY/5YsNff2+uwGdTm9HIKzmzdvUnJ4W09Gdv9Ph1GBOawWpAGKMCRZmeK1am0KKd3fK7qwYu6GTzU/U36iHtrWr3u7JiOWuwyvf+sXBAtQKAN764PerZroJNz1fjbEYvJb7dsaymkX65v1PNfTlgMoqqtLTjeEhlZTmDrzMV4cj62wbSEwoMXXloxIN9Qc1/wFDwYpkwJgCO0h0d+5IB4nR+idbLqx17c0KxbvVeSiavq3jZr7dK/JsR32y3Gntf+EFRR7apvYquXbpr//Tebjtufjw3zfwdlOf+/Yzx3lRxU3NPgYw83zVY/HFpbgWLrkzXdZ+zFlyr65d+FSXj76refXfVum8Cg1diurq2T5Vb9iokrLydL32v3Ydk60nVXfADKg0ZOWLuYaVYIz0bQu3PSvpDxO3eyXM/L0chpHRk2JY5UoS5cLr2tUciqt750FF7a9sGbPO8eYbxlI90l6n2NEd2nFodDzF0jzrcGOqAQMAgIn4KlhcivZreGgo+9aGdaVe+d3v65vzH2uw/4IVMv6u0spqVa3+kRMqUvXaD3tZu45Jg0XyZG//W1aTXTbgop3Xs22Z5cya9epotm9x7NR70WTvSWaZieYvDDvvNxmI2duZut2yTI3253TFp9aWTAQMAIAXfHUrxP78iXOfnNGCUE32DCtczLnjPucxEXvZ8T7DItO1c9Itd1obf2v2Kd0+TX/1YWG/8NU0a7ShI3GLY+fB/jy3QCaer/6Y7Dez1jUul06dciYtfyQ5xsKD9hEwAAA3wlc9FrazVjgIlEztez+cWyADMWdZV+UHpcsHxxsHMYX1Zqx/vOaaZvbbTWs2dKglbK+7RVufb8kue3qfdsRaJpz/2zdP6o0dIf1sa7uee67DmR478or2aavaq8yM9d2YsQEDAAA3AitWrJiWz5jeuHGjTpw44aps6gvFRn642VX54Lu7fPslZH60cuVK7d27d6abAY8xeBM3O44Bf/Bdj0VmucCpbpn3fluaMy9/weEhBT75IOftpgAAYGb4aozFWIGzEQXOn5YW3iVzfrV0a0VixtdfSl9dUiB6VnIxpgIAAEwPX/ZYZBkZkS7YX4ee+5Xo9FEAAOAv/g8WAACgaBT2vZUAAOCmQo8FAADwDMECAAB4hmABAAA8wxgLAADgGXosAACAZ6Y1WNTU1ExeCAAAFK1pCxZ8N4V/RCKRmW4CAGCWYowFAADwDMECAAB4hmABAAA8Q7AAAACeIVgAAADPECwAAIBnCBYAAMAzBAsAAOAZggUAAPAMwQIAAHiGYAEAADxDsAAAAJ4hWAAAAM8QLAAAgGcIFgAAwDMECwAA4BmCBQAA8AzBAgAAeIZgAQAAPEOwAAAAniFYAAAAzxAsAACAZwgWAADAMwQLAADgGYIFAADwDMECAAB4hmABAAA8Q7AAAACeIVgAAADPECwAAIBnCBYAAMAzBAsAAOAZggUAAPAMwQIAAHiGYAEAADxDsAAAAJ4hWAAAAM8QLAAAgGcIFgAAwDOlM90AIJ/GxsaZbkLRGel9g+ftOkQikZluwoT4nbrHMTA1hdr36bGALzU0NMx0E4rOyOk3ZroJRacY9rNiaKNfcAy4V8j9ih4L+FYwGJzpJgC+wLGAYkKwgG+ZpjnTTQB8gWMBxYRgAd/ixRRI4FhAMSFYwLd4MQUSOBZQTBi8CQAAPEOPBXyLqzQggWMBxYRgAd/ixRRI4FhAMeFWCAAA8Aw9FvCt67pKKy3TSPVijVTWSOXzEtMGryj4RVTBSxek4SFvGwlMA44FFBOCBXxrai+mAQ3fudR6LJNpvaCONbyoVgHrhbT076esR49du2ftBAqNYwHFhGAB33L9YlparsEVa2UsuH3i+qwX2aF7v6ORqttV/tFh6xV20INWFkZ92y/049ozeuel/TodCMx0czxhmmGt2fSoVuqEXt/dpdgs2a7pcDMfCzfKD/udH9ownQgWKHIBVy+kmeyy9jLlf/2zZupqLbz6Mf1kVSj9s2nGdeL13ToSK84XHLO+TU+21uVMjx9/Ta8eic1Ai25GxXMsjN3/U8y+t/XvB05PWzu8wL6fi2AB33JzlTZy1zKNVC60C0+pbnsZu7s4+NnJccuULzE0Z/mwAiVW9YZ09WSphs7f2HhnM7xam3+yStWXjuvVF3elr1xMs0EdT7ar/g/71Jt5NWNtVzF0VNtttMPR8dd2pcNRYlsf1S+q3tFL+3utKVF17X5JXemFimHL/GG2HQt2E8fuL7aG9l/ql79sVd/bL2p/r1chu7D7Hft+LoIFfGvSF9PSMuc+cj5Xz32sweh5GYPXVHrbAs294z6VVizIKmMvW3Kud9xBbPYL6eBnJbraG9TchhHNtX8+l3vP2i07PGy0Q8WZt/WHfb2picm5Ee37QyQ9zUwvUyTBYrTBo/+Pdunt47V6bFWTVod61FWkvTF+MOuOhfR/zKxzbGTfH9TT0KGn255Su7ld+zwLF4XDvp+LYIGiZVQvzh2cZh3Zl0/8SUNfXNL8hvsVvLVCg5dj1rS/KPxPD2UXtZa16yjp/yz/CgKmvvlb0HkV/OZMUOV3j9xQexs3tqpWZ/T2XitAuL7H2qiOJ1tVl+rZ6DswGkqSzPAaPf7YKoVuoIwTep4aXU/82G7t6oq5Xn480diA9XdVch1hrX38Ma3Scb3aeVjRmrVZdWay19/Z2zDh/FT7wms2a1NTxm0ll22bTYrtWJhQ5KiONddqVfNahSPWfqKarP1mtJcvuT8NjAb1ho4n1Vplleuu1qa2OpnxY9q9M6LGLZtylp9sv3HqqrWO1xd71fDUxMdgPjfzvk+wgG9NdpWW717y1bNndC36uarXt6kseVVWHlqk+fetGLeOwMVPx2+DkbwKKTGdF1W7TYH0UWPNG3YXEOwTd0Ot9Z8zEUUSEyYuLzt71Kn1KenA9u3aa73AmA0b9Ux7mzavjqsz+cJin/C3WC9Asl5stlvT7PU8+HSbnuww9eLeXldlEj9boefMAW1PLhNes0b1Rr9zW8bVOszUdmZfgYZD9gvrgKL9ds9LqvfFTPxuo4fV+eLhjOfIevG1TgBNOqYDh/qtJyA64Xwz+Zy0mla7t2c8H5tas56j2WA2HQtO6XH2l4SoIn2XtKqpVvXhQ+qPZu83ub15Zvr5Sfxdq9bmPu36/R4nRJgKq2HM8m72G9fHIPt+Dj4gC76VOFDHfxhlc3KmDcYvqrSySqXzK7PnjVNfvjpSj0BZ4uUguMBQRcuwjEGp8gdDum1D6jGsud8anrSdzqMmLPulPR6/5Kp8Yvtj1rn8LSeIONN7jqg7Zqq6tkFhw5BhWC82rU2qjidfbJzlInrrwBnrtbVZa8LuyqTadibSk15/9PBhZ72uls94gU+/eNvPrfXCt7k5ZF1hHUluQ7pIsts4+1GztlVN1XEdO3DIOrXk/r7yzVdkj3Yejo6W6+9VX1zp58jN81wMZtWxkL0j5J3f71ztp+ZrnP1G6XsqWb/PalN9WftQ7vJu9ptEvRMfg+z7+dFjAd+6rp3fMDNu4N7AeqyLr/ge+/AwVV5pOD87ZQ3n70QB65/yxYa+fn/yfG5f7aUqcLNdiSLW1c5F60UgfSHYr6jTu2q9cDlhpV61Iaud3T3WnPRCMmMxxa2rtmqrnGm4KNMTlV1tXduDajhlvYhmdL+aYRfL9yevXgNhNW/epub0NsR0dOfvdDg1oM3e9sT/Eu3P3N7wWrU2WS/E3Z061J96jt3PT9TfqIe2tavevpqL5a6jmM2mYyHVtEQdpvKtMn1id+bn32/S07PCuP139nEz0X6XmJ9/v3F1DIp9Px+CBYrXtSs5k8pqFumb9z/V0JcDKquoSk83hodUkufDgvLV4cg6KgOJCSWmrnxUoqH+oOY/YChYkXxRdSMa0+gdV2+FW7ZoW0vu9AGXZQKBiN7qDGvr483qePZZtVsvit2dO9Ivim7XYeZZzs3zY3fzrmtvVijerc5D0ZzxJxPNNxsf1LMd9clyp7X/hRcUeWib2gvxRPtZMR0LLtSEE7cRYtHrWDget0LvxLzeb9j3sxEs4FuTXaUFBj6XuST7/eNzltyraxc+1eWj72pe/bdVOq9CQ5eiunq2T+Ef/Gv+OiZZT7o72LpsKbWu3kvmWpdqZUa6e9PN1aRhxOzXO9XVNSp08KJiJS7vQtpdmnnKmvatkORqT+/7jd7qyV+fEZ68jLMR0UPa8cIhq/w6/XRLs5of3yrtfFkHXazDuQobbZj1fIzTFmP0eTIztiu8rl3Nobi6dx5U1L47O+b5HG++YSzVI+11ih3doR2HRu8pL82zjmI3m44FKSOr5Nlf7NtvjXVW5X1H1aPx95us6WPWO245a/qIlk9tv5ngGLSns+/nmh1HHWalSe8Rxs45H02cxUr0ld/9vuYve0DDl2L6+sxJ6yAcUdXqH+XU7yxr1THpPWFjtFu2rMbQLXcbKrklWYeLdia6SqM6eLRPgXCLOjYsnNL9z3Hvi/b3OPdU6xqXj1+PizJZ7Yy+p5d3dltXfCHVLV3oenk3v7d8v187yHTY96K79+m9aCBnmYnma2HY6QEaiPWPlrdecBvrJm/LdNxn9tJsOhYm218WbuhInEwPn0wfO86Qi1BI4YzyWrhUdaHsOvLVm8PlfjNeG8dOd/N7Gmu27/sECxQvu0v3049yp1svqHPuuE+3/eNaVbX8UBXWC2tw3vycYs6yLr6I6do5OYPVSsqsqjMe9s9ffej+EAqc+t/acTSmcMtWPftw9mcOmOYyPfzsw1o2hQM+HVbqO/TE+prRumrW64kn1qsmM9BMUMb+/8MZ8xQOWbEirr6eflfLXy/TrNGGjkQ3776D/VOer/7E7SU79KQsfyRxn/mmU2THQj7273v9E89qS7OsK/SXnZNpysmItQ8G6tVihfJUWXvfCF/P79oH+81s3/e5FQLfcpWqP/5Qqrpdql48tcrtb3e0lnUzxMm0XkgvHxzvgJ3aibX/4Mv69V+W61+eb9dzz3WM1mLfI/3NGzppvzBkbreZr4XJqw77vyff1K/1iH7VsVXPJcdAmLEj2vHHg4qm6pqsTP9BRdY+Z7UnNdAspqM7/ph8YXexfEYbE1dD4zxT6XKJ9tdYV6YtYXsdLdr6fPYADvP0Pu2ItUw4/7dvntQbO0L62dbR5zJ25BXt01a1V2U8R7PAbDsW7M2xBzy2bH1emb9Z5/f6cuoTQDPqs/bBV0I/1ROrR/fB0/te0RErpLdo7POT/bsfu98pMMX9ZpJjkH0/V2DFihWz5djDLLJx40adOHHCXeHSchn3f09m1SJXxe17ySV//cus/uIluLNy5Urt3bt3ppsxIY4FFEIh9316LOBbru8DDl1T4MR/SveskHnPt6Sy8nHKDSrwyYfW4yNXV2eAX3AsoJgQLDBLmIkXyrMRmeE7pGrriq18XmLW4BXp0ucKxM65uo8MFDeOBcwsggV867pGLltXYrrwceIxtj4P2gTMBI4FFBOCBXyrmN4OCBQSxwKKCW83BQAAnqHHAr7FVRqQwLGAYkKwgG/xYgokcCygmBAs4Fu8mAIJHAsoJoyxAAAAnqHHAr7FVRqQwLGAYkKwgG/V1NRMXgi4CXAsoJjwXSEAAMAzjLEAAACeIVgAAADPECwAAIBnCBYAAMAzBAsAAOAZggUAAPAMwQIAAHiGYAEAADxDsAAAAJ4hWAAAAM8QLAAAgGcIFgAAwDMECwAA4BmCBQAA8AzBAgAAeIZgAQAAPEOwAAAAniFYAAAAzxAsAACAZwgWAADAMwQLAADgGYIFAADwDMECAAB4hmABAAA8Q7AAAACeIVgAAADPECwAAIBnCBYAAMAzBAsAAOAZggUAAPAMwQIAAHiGYAEAADxDsAAAAJ4hWAAAAM8QLAAAgGcIFgAAwDMECwAA4BmCBQAA8AzBAgAAeIZgAQAAPEOwAAAAniFYAAAAzxAsAACAZwgWAADAMwQLAADgmdJCr6CxsbHQq8AsEolEZroJAIAbUPAei4aGhkKvArME+woAFL+C91jYgsHgdKwGAADMsGkJFqZpTsdqAADADCNYAAAAzxAsAACAZ3i7KQAA8Aw9FgAAwDMECwAA4BluhQAAAM/4t8ciWKqR0BIZ8xbInDffmRS48pVKvh5QMH5OMgyPWwkAAG6UL4PF8F3LNHzncpnBMc0LJf4JXLuq0s9OqvRCn0ctBAAAXvBVsAgEAk7ZoXu+M3F9t8zVUP13FTx/Or2M35hmWGs2PaqVOqHXd3cpZrUT3rql+l5dG/jEfrJnuikAgKRpCRZuLb7rHp3/9OOCL3OjzPo2PdlalzM9fvw1vXokNq1tyWds+0yzT++8tF+nk+HGNOvV/ssfq+rE675o71SVV92t21f/XAsa/1kfvLjGmjIy000CACT5psdi8Z33qKKy2ir7N9c9EHY5e5lF/2Dowt8/Gbdc+RJDc5YPK1BiLWNIV0+Wauj89Y9bNZ11x3X8tV06EkuerMOrtfknj+oXVe/opf291pSouna/pK7Rxl73+qYivHqTfrJKOvbqi9lta29Qr9Mu++eQqpJt8mNvz3jKF9yZCBRLfyznlyn7nxKZIwQLAPALXwSLYLBUi++6V1e++jKn7NVzH2swel7G4DWV3rZAc++4T6UVC7LqtZe9eO7vGhkZzlu/HSoGPyvR1d6g5jaMaK7987myG9ie0f+k/x/t0tvHa/XYqiatDvWoKzb9tz5Ms0HNq6p16fir6oo6U9Jt27Uvs1z6f0URLMor79DC5p+qakW7lSTGfqEdt5gAwE98cStkQSis0rIxJ3rrhHf5xJ809MUlzW+4X8FbKzR4OWZN+4tCG9qs88toeXtZu454/+f5VxAw9c3fgs559pszQZXfXZgr3GhswPq7Ktn8sNY+/phW6bhe7TysaM1aPf7YKoXyjLWIH9utzt6GCefv6krcsgiv2axNTaH0PLPvgP6wrzerfHV1tfV3/lscDR1Pqq0uuY6mTXqqKbt+O5xsfKpVdRnt6DuwXft6A1l1tFZZ29VdrU1tdTLjx5xttMeRmOE1WduRr31ulVcuUU1TIlAESvLvqs4Ym+uqHQBQCL7osahYUOWUMTO65q+ePaNr0c9Vvb5NZckeivLQIs2/b4V9NknXm3rYdcQuXhi/DUayd6HEdAKGvUwgvfXWvGH3V76pzTEzeyws4ZAdKgYU7TeV+JOs2y4UPazOFw9n1GEFjy2b1KRjOnCo39qm6ITzTfsE2rBRreYBbd+eDAHWSXzLplZtXh1XpxUM7Nsz8UtSXV2bOup7tLc3d5sie19Uj7OclSjsQNM1GkDs+p9pr1O8e5e2p4KGM+1pbQ7tSpdNbFetWpv7tOv3e9IDU83Qam15bJVT73anPQ168Ok2Pdlh6sW97sNFWcXtqmn+qapXbMwKkPmY9FgAgK/4IliUlc/JKms/BuMXVVpZpdL5lbnLJ3/OnG7XMd56AmWJ03xwgalb7x+RMShV/mBImZe6g/0BXflgbDf7ONuT/ns0WJiND2pzc0ix7gOKpJqYectkTB01a1vVVB23zsGHFLVPjmPannd+ZI92RjLa0d+rvniTmmobFLbCR9QKJ4d2HFDomTbVtT+jp5q7tXuntfyYXpDspqWeyxqta66V2bdfOw9HRwtb69zf+LTamlar4dBbiqTqqjbVl9E2Z/nWJlXHj2l3MghZC+utA416pq1Za8I9OhydPASEH3hUi9b/mxUoyicta/vWL99zVQ5FwtqXPtjeNNOtAHADfBEsMsulyxqmJuvjzio/3nqsc1l8j72ZpsorjfQtedP5fC0zUcD6p3yxoa/fdzeg0+ntCITVvHmbmtPTYjq683c6nBowaa0gFUCMMcHCDK9Va1NI8e5O2Z0VYzd0svmJ+hv10LZ21ds9GbHMdfTord/3qPHBZ9RR36zN25plnt6n3+8ZTSR2703qSUgHi3C9akPWc9UXy3keT/X0qa22SqGwtY5YKgMNKHrR+jn1fKaW7+5RosnJemMxxVWr6iqrbP/kz23s//0PDV/9Qre3/NR598dkPvr378kYujJ5xSgK33rqiHPbyzTyj5cC4H++GGMxeO1qzrSymkX65v1PNfTlgMoqqtLTjeEhlZTmdo/nq8ORdY4MJCaUmLryUYmG+oOa/4ChYEUyYEyBHSS6O3ekg8Ro/ZMtF9a69maF4t3qPBRN39ZxM9/uFXm2oz5Z7rT2v/CCIg9tU3uVckT2/N7pOUkEjA49syWszh2HJv08jYFYNO922EEqZA/tSN05icetwJAr3LJF21ry1DvhWjNYYefyqQP6oucdVTb+sxY2P6FbQveNX57PB5ld7EBhj6chWABFyxc9Fl9cimvhkjvTZe3HnCX36tqFT3X56LuaV/9tlc6r0NClqK6e7VP1ho0qKSvP6MY3nTomW0+q7oB1mV1qnSRL5hpWgjHSty3c9qykP0zcueLP38thGBk9KYZVriRRLryuXc2huLp3HlTU/qqWMescb75hLNUj7XWKHd2hHYdGx0UszbOOTD1vvaDYuq3a0lynxrBVZ6xEo00b7fFJTasKh2X2ZA/8tLfXDlLxWPb2Zq4ztfzpfb/RWz3j9fy4H2Zp9/hctsLFF5H/o9vq/4sWtvxcc8K1rpdHcTKNEZXYH+dPrgCK1rR8CVnmIMt8j0vRfg0PDWXf2rCuRCu/+33NX/aAhi/F9PWZk9bJdURVq3/khIrMeu1l7TomW0/qFoD9b1mNoVvuNlRyS3J1Lto59tbLRNuW7zkwwuvU0Wzf4tin96KBnGUmmq+FYef9JgOx0e20w0Zj3eRt6Y8NZJXJ137196gvLoVC4ZzllzsrGZC16kmXr2tc7vp5nOw5S9Rv6Ived3V616P6bO+v9E30dNb8AD0Ws4oxMqRAibuxTgD8yRffbmp//sS5T87kzrBOGnPuuE+3/eNaVbX8UBVWyAgmv5Ask73seJ9hkema/d1lg9ZGl9kDOkcf9s9ffVjYp8Ie3LihI3GLY9/B3MEGk8230oFzO8E+cacsfyQxxmK0jmV6+NmHtSxr3IlVb0udPXhCPf3ZddkhIiUQiOrg0T4F6jv0xPqa0eWXPayO+oD69r+pUxOcxMddvma9nnhivWpc9gaNy+6VOv1/rYDxE3225zld7U+NGSFYzCZm6lYIgKLli/gGPp8AAA3MSURBVFshtrNWOAiUTO17P5xbIAMxZ1lX5a1QcfngeCeiKaw3Y/3jNddMD6ZMXI3XbOhQS9hed4u2Pp89CMEeXLkj1jLh/N++eVJv7AjpZ1vb9dxzHc702JFXtE9b1V6VvOIPWGV+I/3L88+pIyME2OV++1401TDrL6vc/kb9qqPDqcue/7I9/+Sb+nV0vbWOLXquJTUINaYjr/za6UHJfo7MjG1MspfXI1a9W63lk6ViR7TjjwcT70y50XCR9EXfn53HbfetZ5DfbGMMj/uZJQCKQ2DFihUF/XyhjRs36sSJE+4ak/xCsZEfbnZVPvjuLt9+CRmmbuXKldq7d+9MNwMzqPGnb+rj//VvGvzi3Ew3BcB18k2PRWa5wKlumfd+W5ozL3/B4SEFPvlgwnvzAIqQOcKtEKDI+fIIDpyNKHD+tLTwLpnzq6VbKxIzvv5S+uqSAtGzYtg4MPsY1nFtvysEQPHyVY9FFvsbKy/YX4ee+5Xo9FEAs5PJGAug6Pk3WAC46RAsgOLni7ebAoCDt5sCRY8eCwC+QY8FUPwIFgB8wwkWDN4EihrBAoBvGMPDfKQ3UOQYYwHAP7gVAhQ9eiwA+AZjLIDiNy1HcE1NzeSFANz0+BIyoPgV/Ajmux/gViQSmbwQZjdzhB4LoMgxxgKAb3ArBCh+BAsAvsF3hQDFj2ABwD8YYwEUPYIFAN8wR/iALKDYESwA+IbzrpAAH5AFFDOCBQD/YPAmUPQIFgB8wzRGVBIsm+lmALgBBAsAvmGMDPFdIUCRI1gA8A0+eRMofgQLAP7BJ28CRY9gAcA3eLspUPwIFgD8g1shQNEjWADwDT7SGyh+BAsAvsGXkAHFj2ABwDf45E2g+BEsAPgHPRZA0SNYAPANboUAxY9gAcA3+IAsoPgRLAD4hvNdIaUEC6CYESwA+IbzAVn0WABFjWABwDcYYwEUP4IFAP9gjAVQ9AgWAHyDHgug+BEsAPgGwQIofgQLAL7Bd4UAxY9gAcA/+EhvoOgRLAD4hnMrhB4LoKgRLAD4Bp+8CRQ/ggUA/2DwJlD0CBYAfMP5SO9g2Uw3A8ANIFgA8A3D+UhvBm8CxYxgAcA/GGMBFD2OYKCAGhsbZ7oJRcfo28Pzdp0ikchMNwGgxwIopIaGhpluQtEZOf3GTDehKLGvwS/osQAKLBhkzACAmwfBAigw0zRnugkAMG0IFkCBESwA3EwIFkCBESwA3EwYvAkAADxDjwVQYPRYALiZECyAAiNYALiZcCsEAAB4hh4LoMCuq8eitEwj1Ys1Ulkjlc9LTBu8ouAXUQUvXZCGh7xtJAB4hGABFNjUgkVAw3cutR7LZJbmfsvn8KJaBaxQUfr3U9ajx67ds3YCgBcIFkCBuQ4WpeUaXLFWxoLbJ67PChxD935HI1W3q/yjw1baGPSgld4yzbDWbHpUK3VCr+/uUiwQmOkmAZgmBAvAFwKuQkUmu6y9TPlf/6zp7Lkw69v0ZGtdzvT48df06pHYtLUjn/HaZsaPexpwTLNe7b/8sapOvD7j2wz4DcECKDA3PRYjdy3TSOVCu/CU6raXsW+dBD87OW6Z8iWG5iwfVqDEqt6Qrp4s1dD56x+3bbfQNOM6/touHYklTtRmeLU2/+RR/aLqHb20v9eaElXX7pfUlV5oeoJPvrZlF/CmHWY4pKpkfbzrB8hGsAAKbNITT2mZM6Yin6vnPtZg9LyMwWsqvW2B5t5xn0orFmSVsZctOdc77oBOO1QMflaiq71BzW0Y0Vz753O54zfcSm+Oc1JN/j/apbeP1+qxVU1aHepRV76T+jTI27ZCrkcEC2AsggUww4zqxbkDNa2T1eUTf9LQF5c0v+F+BW+t0ODlmDXtLwr/00PZRa1l7TpK+j/Lv4KAqW/+FnQu5785E1T53SMF2Y5obMD6uyrZ/LDWPv6YVum4Xu08rGjNWj3+2CqF8tyKiB/brc7ehgnn7+pK3G4Ir9msTU2h9Dyz74D+sK93ym11U09qG5pCyV6Z+DFnW6o3PqW2umQ7mzbpqabsNppmgzY+1aq6jG3pO7Bd+3pHf27oeFKtVdZz012tTW11Tt2HBlZpXe0Zvf3iXvUG8pS11s1YFRQDggVQYJNd0eYbV3H17Bldi36u6vVtKkv2UJSHFmn+fSvGrSNw8dPx22Akr+BLTCdg2G0KpI9+a96w+xNWanPMMb0C4ZAdKgYU7TeV+JOs2y4UPazOFw9n1GGdtLdsUpOO6cChfiv8RCecb1onVLNho1rNA9q+PXkCD6/Rlk2t2rw6rs70ST1/27La76YeZ1qTqs9Y5Tp709PWNpjq2vuiepLzZYeirlhW3c+01ynevUvbU3U5057W5tCu0fqdv2vV2tynXb/f4wQGs6Fa6+vq1GCtI9Kb2o4GNdRKl45FFM3cQMDHCBZAgU0aLMrm5JQZjF9UaWWVSudX5i6fpz67jpJx1hMoS5zmgwtM3Xr/iIxBqfIHQ1njPQf7A7ryQdDd9qT/Hj15m40PanNzSLHuA4qkmph5W2JMHTVrW9VUHbfOy4esE2YgZ5vyzo/s0c5IRjv6e9UXb1JTbYPCVviI2idne3sDITVvfkbNGfXFrBN95+Fo4odJ6unXQq1rtUJF/Jh2v9XjhBqHFY4SVZjK3rzkM2LWaF1zrcy+/dqZWldyffsbn1Zb02o1HHpLkVR91ab6MrbP7Imor61WC8I1MiPR5PPaaMUP63notcKVSW8FigPBAiiw67oHb5hTfqNH3vVY56L4HvswN1VeaTg/O2UN5+9EAeuf8sWGvn7f3YBOp7cjELZO3tvSJ2/TjOnozt/pcGowp7WCVAAxxgQLM7xWrU0h66q+U3ZnxdgNnWx+ov5GPbStXfV2mIiNriPRUxFTd+eOdFsm3pZ89VSpOmQ9b909Sqw+z/qNVKIyRoNFuF619nJ9sZzfxamePrXVVikUtuqPpaocUPSi9XO6mT3q6WtTe229Qu9ddHoxGu3uCiuojPc8AH5EsABm2rUrOZPKahbpm/c/1dCXAyqrqEpPN4aHVJLng7Py1eHIOhcFEhNKTF35qERD/UHNf8BQsCIZMKYg/8nbzYk8rHXtzQrFu9V5KGp3L7ieb/eKPNtRnyx3WvtfeEGRh7apvUpTMmk9NWFnpMhALOpqm8Yabzk7jIXsYR2pOyfxuOJjyvRE+tTeXqfGmkOKRhvVWGfnip7ragcwUwgWQIFN1mMRGPhc5pLsz16Ys+ReXbvwqS4ffVfz6r+t0nkVGroU1dWzfQr/4F/z1zHJeszkWyMD1iVyqXWCK5lrWAnGSN+2cNuzYqQrtJfN38thGKN1mYZVriRRLryuXc2huLp3HlTU/qqiMescb75hLNUj1gk3dnSHdhwaHdOwdMw6Jmubm3pSTa8Kh2X25P+MitHNG31XyETL2e2yw1g8lt2uzOfGKXcyor72dtU1hnUw1Kg69Wn/yewygN+xtwIFljqhj/dQ7JzzMd1ZrCv1yu9+X/OXPaDhSzF9feakdVIcUdXqH+XU7yxr1THZelLd9/a/ZTWGbrnbUMktyTpctDPdXhfblu85MMLr1NFs3+LYp/eigZxlJpqvhalehP7R8lZIaKzLXsdkbXNTj/p71BeXQnVLFTYM189BerlQOKf8cmcFA7JWO2E7A4FTOtwdd9a9wemuiOhUIPe5cvOcAzOFYAHMNPv2xqcf5U63Tihz7rhPt/3jWlW1/FAVVsgIzpufU8xZ1sWXkl07J2fgZkmZPaBz9GH//NWHhX0psAc2buhI3OLYd7B/yvPVH5P9Zta6xuXpScsfSYyNmBIX9QQCUR082qdAuEVbHhktZ9as1/plZlY9dojIWa6+Q0+srxldbtnD6qgPqG//m05ImLSJPX2Kh+pUV2XnivE/+AzwK26FAAXm6mry4w+lqtul6sVTq9z+plNr2dz3XeRphxUqLh8c78Tm/oo3890Q476lMz1gM3E1XbOhQy1he90t2vp8S3bZ0/u0I9Yy4fzfvnlSb+wI6Wdb2/Xccx3O9NiRV7RPW9VeZabXN3nb3NWjk2/q19H1WeXM2BHt+GNqsKVVz/5G/aqjw5lv1/Hye9GM5bbouZbUQNaYjrzya6cXJvt5zlhf5tSLp3Q63qyWUJ+OfpQ5uBMoDoEVK1bQhwYUyMaNG3XixAl3hUvLZdz/PZlVi1wVt8dVlPz1L778EjJcP7v35ns/f0L1p1/RHw9GJ18gaeXKldq7d28BWwa4Q48FUGCu738PXVPgxH9K96yQec+3pLLyccoNKvDJh9bjI1c9FSguZs1S1Yfi6n3rIp9dgaJEsAB8xUyEhrMRmeE7pOpFUvm8xKzBK9KlzxWInXM1pgLFacX61Qqd3quDUUIFihPBAiiw6xqxPzQoXfg48Rhbnwdtgv8s/N7P9bM1NTKjXXr5Pz4c/cRPoMgQLIAC462AcOPin/9D//3PGRPYb1CkeLspAADwDD0WQIHRYwHgZkKwAAqMYAHgZkKwAAqMYAHgZsIYCwAA4Bl6LIACo8cCwM2EYAEUWE1NzeSFAGCW4LtCAACAZxhjAQAAPEOwAAAAniFYAAAAzxAsAACAZwgWAADAMwQLAADgGYIFAADwDMECAAB4hmABAAA8Q7AAAACeIVgAAADPECwAAIBnCBYAAMAzBAsAAOAZggUAAPAMwQIAAHiGYAEAADxDsAAAAJ4hWAAAAM8QLAAAgGf+P2m7xFkP5tAtAAAAAElFTkSuQmCC&quot; alt=&quot;avatar&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;三总结&quot;&gt;三、总结&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;优点：&lt;br/&gt; 1、封装变化。将创建对象的代码集中在一个对象或方法中，可以避免代码的重复。&lt;br/&gt; 2、面向接口编程。在实例化对象时，向客户隐藏了实例化的细节，用户只需要关心所需产品对应的工厂，无需关心创建细节，甚至无须知道具体产品类的类名。&lt;br/&gt; 3、开闭原则。当需要增加新产品的时候，我们只需要扩展抽象产品并增加或修改具体工厂即可。无需修改抽象工厂和抽象产品提供的接口，也无需修改其他的具体产品。&lt;br/&gt;&lt;/li&gt;
&lt;li&gt;缺点：&lt;br/&gt; 1、系统中类的个数会增加，在一定程度上增加了系统的复杂度，会给系统带来一些额外的开销。&lt;br/&gt; 2、由于考虑到系统的可扩展性，需要引入抽象层，增加了系统的抽象性和理解难度。&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Tue, 20 Nov 2018 07:20:00 +0000</pubDate>
<dc:creator>JMCui</dc:creator>
<og:description>一、概念 工厂方法模式：用来封装对象的创建。工厂方法模式（Factory Method Pattern）通过让 子类 决定该创建的对象是什么，来达到将对象创建的过程封装的目的。这样，关于超类的代码和子</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/jmcui/p/9988320.html</dc:identifier>
</item>
<item>
<title>印度帮是如何统治硅谷的？ - 极光推送</title>
<link>http://www.cnblogs.com/jpush88/p/9989099.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jpush88/p/9989099.html</guid>
<description>&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;简评：早在 80 年代，印度人就已经在硅谷开疆扩土了。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;印度人爱硅谷，这早已不是什么秘密。每年印度最聪明的人都想方设法来到硅谷，并且带来他们的家人。&lt;/p&gt;
&lt;p&gt;这赚的多是一个重要原因，但是这里是世界创新中心，这个 title 更具吸引力。&lt;/p&gt;
&lt;h2 id=&quot;硅谷的印度帮&quot;&gt;硅谷的印度帮&lt;/h2&gt;
&lt;p&gt;就目前而言，世界上最大两家科技公司都是印度领导人。微软 CEO 萨蒂亚 · 纳德拉（Satya Nadela）和谷歌的顶尖人物 CEO 桑达 · 皮采（Sundar Pichai）已经成为家喻户晓的名字，不只是印度人憧憬他们，全世界都在憧憬这两个印度人。&lt;/p&gt;
&lt;p&gt;但我们要深知，印度人在硅谷的崛起，绝不是这两年的事情！他们自 20 世纪 80 年代就已经扎根硅谷并且开始疯狂打拼。&lt;/p&gt;
&lt;p&gt;Vinod Khosla 出生于印度，后在美国卡内基大学读研究生，又读了斯坦福的 MBA，毕业工作两年后创业，创建了 Sun Microsystem，其 Java 直接影响了世界，迄今为止，还是各 PC 和手机 App 的首选语言之一。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://oscimg.oschina.net/oscnet/7ec3eacee939dae522bd98f909a6e7f284d.jpg&quot;/&gt;&lt;br/&gt;Vinod Khosla，Sun Microsystems 的联合创始人。&lt;/p&gt;
&lt;p&gt;计算机设计师 Ajay Bhatt 等其他印度人也为硅谷做出了贡献，并且他们的工作极大地影响了我们今天使用计算机的方式。Bhatt 在 20 世纪 90 年代成为英特尔的首席客户平台架构师，被誉为 USB 标准之父，并在图形和计算机架构方面拥有 31 项专利。&lt;/p&gt;
&lt;p&gt;Vinod Dham 于 1950 年出生于印度，1977 年在美国辛辛那提大学完成电气工程硕士学位。虽然对于大多数人来说，他的名字不为人知，但在硅谷 Dham 简直就是一个传奇。他被誉为「奔腾之父」，Dham 成功让英特尔成为了世界最大的 CPU 制造商。&lt;/p&gt;
&lt;p&gt;然而 Dham 没有满足，1995 年他推出 Intel 转投 AMD，发明了 AMD K6，俗称「奔腾杀手」。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://oscimg.oschina.net/oscnet/81747c00e532edd859c3f40de7c316af95e.jpg&quot;/&gt;&lt;br/&gt;「奔腾之父」Dham&lt;/p&gt;
&lt;p&gt;Sabeer Bhatia，他在 20 世纪 80 年代移居美国，并于 1996 年成为 Hotmail 的联合创始人。&lt;/p&gt;
&lt;p&gt;Shantanu Narayen，Adobe 联合创始人。&lt;/p&gt;
&lt;p&gt;硅谷的印度大佬还有非常多。而这些大佬们的示范效应，让印度最聪明的学生了找到了人生捷径。印度本科，美国研究生然后进入硅谷科技公司。&lt;/p&gt;
&lt;h2 id=&quot;印度人缺乏创造力&quot;&gt;印度人缺乏创造力？&lt;/h2&gt;
&lt;p&gt;就算如这么多生动的例子，但许多人都质疑印度人对硅谷的贡献，以及印度人缺乏创造力和独特的价值。&lt;/p&gt;
&lt;p&gt;比如之前苹果联合创始人史蒂夫·沃兹尼亚克（Woz）就在 2018 ET 商业峰会上发言，认为印度人没什么创造力。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://oscimg.oschina.net/oscnet/15e1489b04248296c6a2909dc0ddfe6a6c1.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;当时主持人问他对印度的看法，硅谷印度帮的崛起问题。沃兹说：「我不是人类学家，不太了解印度文化，不过我看那些印度领导的硅谷公司没什么重大的进展。我看到两种印度人，顶层印度人非常出色，但大多数印度人都是努力学习，工作，获得 MBA，高工资买奔驰，但是创造力在哪呢？」&lt;/p&gt;
&lt;p&gt;在 Quora 上面，有一位在硅谷工作了几十年的白人工程师认为：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;印度人替代很多白人的工作&lt;/li&gt;
&lt;li&gt;印度帮报团且排外严重&lt;/li&gt;
&lt;li&gt;印度人雇佣印度人&lt;/li&gt;
&lt;li&gt;印度人之间用印度土语沟通，而且往往有一些比较低俗的东西，如果用英语早都被打了。&lt;/li&gt;
&lt;li&gt;不可维护的垃圾代码太多&lt;/li&gt;
&lt;li&gt;存在投机和嘴炮&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;印度缺乏创造力么&quot;&gt;印度缺乏创造力么？&lt;/h2&gt;
&lt;p&gt;虽然印度确实过于重视基础教育，但是沃兹和其他人觉得印度人没有创造力是没有根据的。如果按照统计学来说，印度的人口应该有更多的具有创意的天才，比如 Vinod Dham 和 Ajay Bhatt 这种级别的。印度的教育体制需要改革才能帮助印度实现这个目标，但是仅仅因为一些片面的「故事」就判定一个种族缺乏创造力，是不负责的。&lt;/p&gt;
&lt;p&gt;Adobe 是创意的殿堂，也是印度人创立领导的。&lt;/p&gt;
&lt;p&gt;硅谷三分之一科技初创团队有印度人，美国的印度人仅占美国人口的1%，但是他们创建了 8% 美国高科技公司。所以当我们判断硅谷的印度人，应该摆事实讲道理，而不是靠我们的偏见。&lt;/p&gt;
&lt;p&gt;在 Quora 上面，一位硅谷印度人对此发表评论：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;按照数字说话，硅谷印度人占主流么？是的。&lt;/li&gt;
&lt;li&gt;影响力方面呢？绝对不是。虽然 Adobe、微软、谷歌的 CEO 都是印度人，但他们都少数极其优秀的人。&lt;/li&gt;
&lt;li&gt;在我看来，湾区的程序员水平都很平庸。而很多印度人都更愿意学习，成为更好地程序员、产品经理、设计师。如此多的中层管理都是印度人，是因为本地人不善于投资自己。所以我们采取更简单的方法：管理平庸的员工，玩政治。我知道说话很难听，但是忠言逆耳。&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Tue, 20 Nov 2018 07:14:00 +0000</pubDate>
<dc:creator>极光推送</dc:creator>
<og:description>简评：早在 80 年代，印度人就已经在硅谷开疆扩土了。 印度人爱硅谷，这早已不是什么秘密。每年印度最聪明的人都想方设法来到硅谷，并且带来他们的家人。 这赚的多是一个重要原因，但是这里是世界创新中心，这</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/jpush88/p/9989099.html</dc:identifier>
</item>
<item>
<title>MySQL日志系统：redo log与binlog - 小佬頭</title>
<link>http://www.cnblogs.com/GeekHuman/p/9989000.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/GeekHuman/p/9989000.html</guid>
<description>&lt;p&gt;日志系统主要有redo log(重做日志)和binlog(归档日志)。redo log是InnoDB存储引擎层的日志，binlog是MySQL Server层记录的日志， 两者都是记录了某些操作的日志(不是所有)自然有些重复（但两者记录的格式不同）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1505284/201811/1505284-20181120145921809-1753242177.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;图来自极客时间的mysql实践,该图是描述的是MySQL的逻辑架构。&lt;/p&gt;
&lt;h2 id=&quot;redo-log日志模块&quot;&gt;redo log日志模块&lt;/h2&gt;
&lt;p&gt;redo log是InnoDB存储引擎层的日志，又称重做日志文件，用于记录事务操作的变化，记录的是数据修改之后的值，不管事务是否提交都会记录下来。在实例和介质失败（media failure）时，redo log文件就能派上用场，如数据库掉电，InnoDB存储引擎会使用redo log恢复到掉电前的时刻，以此来保证数据的完整性。&lt;/p&gt;
&lt;p&gt;在一条更新语句进行执行的时候，InnoDB引擎会把更新记录写到redo log日志中，然后更新内存，此时算是语句执行完了，然后在空闲的时候或者是按照设定的更新策略将redo log中的内容更新到磁盘中，这里涉及到&lt;code&gt;WAL&lt;/code&gt;即&lt;code&gt;Write Ahead logging&lt;/code&gt;技术，他的关键点是先写日志，再写磁盘。&lt;/p&gt;
&lt;p&gt;有了redo log日志，那么在数据库进行异常重启的时候，可以根据redo log日志进行恢复，也就达到了&lt;code&gt;crash-safe&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;redo log日志的大小是固定的，即记录满了以后就从头循环写。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://cdn.averagejoe.wang/2018-11-20-15426953263969.jpg&quot;/&gt;&lt;/p&gt;
&lt;p&gt;图片来自极客时间，该图展示了一组4个文件的redo log日志，checkpoint之前表示擦除完了的，即可以进行写的，擦除之前会更新到磁盘中，write pos是指写的位置，当write pos和checkpoint相遇的时候表明redo log已经满了，这个时候数据库停止进行数据库更新语句的执行，转而进行redo log日志同步到磁盘中。&lt;/p&gt;
&lt;h2 id=&quot;binlog日志模块&quot;&gt;binlog日志模块&lt;/h2&gt;
&lt;p&gt;binlog是属于MySQL Server层面的，又称为归档日志，属于逻辑日志，是以二进制的形式记录的是这个语句的原始逻辑，依靠binlog是没有&lt;code&gt;crash-safe&lt;/code&gt;能力的&lt;/p&gt;
&lt;h2 id=&quot;redo-log和binlog区别&quot;&gt;redo log和binlog区别&lt;/h2&gt;
&lt;ul readability=&quot;3&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;redo log是属于innoDB层面，binlog属于MySQL Server层面的，这样在数据库用别的存储引擎时可以达到一致性的要求。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;redo log是物理日志，记录该数据页更新的内容；binlog是逻辑日志，记录的是这个更新语句的原始逻辑&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;redo log是循环写，日志空间大小固定；binlog是追加写，是指一份写到一定大小的时候会更换下一个文件，不会覆盖。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;binlog可以作为恢复数据使用，主从复制搭建，redo log作为异常宕机或者介质故障后的数据恢复使用。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;一条更新语句执行的顺序&quot;&gt;一条更新语句执行的顺序&lt;/h2&gt;
&lt;pre class=&quot;sql&quot;&gt;
&lt;code&gt;
update T set c=c+1 where ID=2;
&lt;/code&gt;
&lt;/pre&gt;
&lt;ul readability=&quot;5&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;执行器先找引擎取 ID=2 这一行。ID 是主键，引擎直接用树搜索找到这一行。如果 ID=2 这一行所在的数据页本来就在内存中，就直接返回给执行器；否则，需要先从磁盘读入内存，然后再返回。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;执行器拿到引擎给的行数据，把这个值加上 1，比如原来是 N，现在就是 N+1，得到新的一行数据，再调用引擎接口写入这行新数据。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;引擎将这行新数据更新到内存中，同时将这个更新操作记录到 redo log 里面，此时 redo log 处于 prepare 状态。然后告知执行器执行完成了，随时可以提交事务。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;执行器生成这个操作的 binlog，并把 binlog 写入磁盘。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;执行器调用引擎的提交事务接口，引擎把刚刚写入的 redo log 改成提交（commit）状态，更新完成。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;这个update语句的执行流程图，图中浅色框表示是在 InnoDB 内部执行的，深色框表示是在执行器中执行的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1505284/201811/1505284-20181120145929444-1860207826.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;图片来自极客时间.&lt;/p&gt;
</description>
<pubDate>Tue, 20 Nov 2018 07:00:00 +0000</pubDate>
<dc:creator>小佬頭</dc:creator>
<og:description>日志系统主要有redo log(重做日志)和binlog(归档日志)。redo log是InnoDB存储引擎层的日志，binlog是MySQL Server层记录的日志， 两者都是记录了某些操作的日志</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/GeekHuman/p/9989000.html</dc:identifier>
</item>
<item>
<title>.net core 中简单封装Dapper.Extensions 并使用sqlsuger自动生成实体类 - nontracey</title>
<link>http://www.cnblogs.com/nontracey/p/9988759.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/nontracey/p/9988759.html</guid>
<description>&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.Generic;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Data;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.IO;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Text;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Threading.Tasks;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Dapper;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; DapperExtensions;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Configuration;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; CommonHelper
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; dapper 帮助类
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; DapperHelper : IDapperHelper, IDisposable
    {
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; ConnectionString = &lt;span&gt;string&lt;/span&gt;&lt;span&gt;.Empty;
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; Database Connection = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 初始化 若不传则默认从appsettings.json读取Connections:DefaultConnect节点
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 传入setting:xxx:xxx形式 则会从指定的配置文件中读取内容
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 直接传入连接串则
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;conn&quot;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;jsonConfigFileName&quot;&amp;gt;&lt;/span&gt;&lt;span&gt; 配置文件名称&lt;/span&gt;&lt;span&gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; DapperHelper(&lt;span&gt;string&lt;/span&gt; conn = &lt;span&gt;&quot;&quot;&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt; jsonConfigFileName = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;appsettings.json&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, DatabaseType databaseType =&lt;span&gt; DatabaseType.Oracle)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; config = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ConfigurationBuilder()
  .SetBasePath(Directory.GetCurrentDirectory())
  .AddJsonFile(jsonConfigFileName, optional: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;)
  .Build();
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;string&lt;/span&gt;&lt;span&gt;.IsNullOrEmpty(conn))
            {
                conn &lt;/span&gt;= config.GetSection(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Connections:DefaultConnect&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;).Value;
            }
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (conn.StartsWith(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;setting:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;))
            {
                conn &lt;/span&gt;= config.GetSection(conn.Substring(&lt;span&gt;8&lt;/span&gt;&lt;span&gt;)).Value;
            }
            ConnectionString &lt;/span&gt;=&lt;span&gt; conn;
            Connection &lt;/span&gt;=&lt;span&gt; ConnectionFactory.CreateConnection(ConnectionString, databaseType);
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Database GetConnection()
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection;
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; IDbTransaction TranStart()
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (Connection.Connection.State ==&lt;span&gt; ConnectionState.Closed)
                Connection.Connection.Open();
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection.Connection.BeginTransaction();
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; TranRollBack(IDbTransaction tran)
        {
            tran.Rollback();
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (Connection.Connection.State ==&lt;span&gt; ConnectionState.Open)
                tran.Connection.Close();
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; TranCommit(IDbTransaction tran)
        {
            tran.Commit();
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (Connection.Connection.State ==&lt;span&gt; ConnectionState.Open)
                tran.Connection.Close();
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; Delete&amp;lt;T&amp;gt;(T obj, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection.Delete(obj, tran, commandTimeout);
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; Delete&amp;lt;T&amp;gt;(IEnumerable&amp;lt;T&amp;gt; list, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection.Delete(list, tran, commandTimeout);
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Dispose()
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (Connection != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
            {
                Connection.Dispose();
            }
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; T Get&amp;lt;T&amp;gt;(&lt;span&gt;string&lt;/span&gt; id, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Connection.Get&amp;lt;T&amp;gt;&lt;span&gt;(id, tran, commandTimeout);
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IEnumerable&amp;lt;T&amp;gt; GetAll&amp;lt;T&amp;gt;(&lt;span&gt;object&lt;/span&gt; predicate = &lt;span&gt;null&lt;/span&gt;, IList&amp;lt;ISort&amp;gt; sort = &lt;span&gt;null&lt;/span&gt;, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;bool&lt;/span&gt; buffered = &lt;span&gt;true&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Connection.GetList&amp;lt;T&amp;gt;&lt;span&gt;(predicate, sort, tran, commandTimeout, buffered);
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IEnumerable&amp;lt;T&amp;gt; GetPage&amp;lt;T&amp;gt;(&lt;span&gt;object&lt;/span&gt; predicate, IList&amp;lt;ISort&amp;gt; sort, &lt;span&gt;int&lt;/span&gt; page, &lt;span&gt;int&lt;/span&gt; pagesize, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;bool&lt;/span&gt; buffered = &lt;span&gt;true&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Connection.GetPage&amp;lt;T&amp;gt;&lt;span&gt;(predicate, sort, page, pagesize, tran, commandTimeout, buffered);
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;dynamic&lt;/span&gt; Insert&amp;lt;T&amp;gt;(T obj, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection.Insert(obj, tran, commandTimeout);
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; Insert&amp;lt;T&amp;gt;(IEnumerable&amp;lt;T&amp;gt; list, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {
            Connection.Insert(list, tran, commandTimeout);
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; Update&amp;lt;T&amp;gt;(T obj, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;bool&lt;/span&gt; ignoreAllKeyProperties = &lt;span&gt;true&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection.Update(obj, tran, commandTimeout, ignoreAllKeyProperties);
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; Update&amp;lt;T&amp;gt;(IEnumerable&amp;lt;T&amp;gt; list, IDbTransaction tran = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;bool&lt;/span&gt; ignoreAllKeyProperties = &lt;span&gt;true&lt;/span&gt;) &lt;span&gt;where&lt;/span&gt; T : &lt;span&gt;class&lt;/span&gt;&lt;span&gt;
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection.Update(list, tran, commandTimeout, ignoreAllKeyProperties);
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; List&amp;lt;T&amp;gt; Query&amp;lt;T&amp;gt;(&lt;span&gt;string&lt;/span&gt; sql, &lt;span&gt;object&lt;/span&gt; param = &lt;span&gt;null&lt;/span&gt;, IDbTransaction transaction = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;bool&lt;/span&gt; buffered = &lt;span&gt;true&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;, CommandType? commandType = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Connection.Connection.Query&amp;lt;T&amp;gt;&lt;span&gt;(sql, param, transaction, buffered, commandTimeout, commandType).AsList();
        }
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; Execute&amp;lt;T&amp;gt;(&lt;span&gt;string&lt;/span&gt; sql, &lt;span&gt;object&lt;/span&gt; param = &lt;span&gt;null&lt;/span&gt;, IDbTransaction transaction = &lt;span&gt;null&lt;/span&gt;, &lt;span&gt;bool&lt;/span&gt; buffered = &lt;span&gt;true&lt;/span&gt;, &lt;span&gt;int&lt;/span&gt;? commandTimeout = &lt;span&gt;null&lt;/span&gt;, CommandType? commandType = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; Connection.Connection.Execute(sql, param, transaction, commandTimeout, commandType);
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;</description>
<pubDate>Tue, 20 Nov 2018 06:24:00 +0000</pubDate>
<dc:creator>nontracey</dc:creator>
<og:description>引言 由公司需要使用dapper 同时支持多数据库 又需要支持实体类 又需要支持sql 还需要支持事务 所以采用了 dapper + dapperExtensions 并配套 生成实体类小工具的方式</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/nontracey/p/9988759.html</dc:identifier>
</item>
<item>
<title>Deppin系统 Liunx显示器分辨率异常解决方法 - Mr·Capricorn</title>
<link>http://www.cnblogs.com/LF-blog/p/9988692.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/LF-blog/p/9988692.html</guid>
<description>
&lt;p&gt;&lt;span&gt;&lt;strong&gt; Deppin 显示器分辨率异常&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;今天早上上班开机，Deppin闹脾气了。deepin的分辨率变成1024X768的了，在显示设置里面看了一个，这个是最大的分辨率设置了，找了很久都不知道什么问题。&lt;/p&gt;
&lt;p&gt;命令xrandr &lt;/p&gt;
&lt;p&gt;VGA的显示最大的还是 1024X768。如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1514597/201811/1514597-20181120094550062-1449689341.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;在网上查了好多资料，没找到相应的问题解决办法。而且我这个问题很奇怪，它是偶尔就会出现这样的情况，分辨率失调，但是过几天你不管它，它自己就好了。。。233～～&lt;/p&gt;
&lt;p&gt;然后就自己检查啊，因为昨天刚更新过系统，便怀疑是显卡驱动的问题，lspci之后能找到显卡，感觉也不是驱动问题。&lt;/p&gt;
&lt;p&gt;重启，再重启，无限重启中。。。&lt;/p&gt;

&lt;p&gt;在开机自启动里也添加脚本，指定分辨率了，可它就是不执行啊！或者说，执行了，没效果？？？&lt;/p&gt;
&lt;p&gt;在经过一个小时的摧残后，我终于发现了问题所在。。。。。。&lt;/p&gt;
&lt;p&gt;&lt;span&gt;重点来啦！！！快拿出小本本记一下！&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;原来不是软件问题，而是硬件问题啊。踏马好像是VGA松了，接触不良导致的。。。心间瞬间千万头羊驼奔腾而过。。。。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;所以！！！以后要是有小伙伴遇到类似的问题，先不要查软件，查显卡，查驱动。。。先看一下VGA松了没？&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;想要添加自定义分辨率的，请等待我的下篇博客。蟹蟹～ &lt;/p&gt;

</description>
<pubDate>Tue, 20 Nov 2018 06:13:00 +0000</pubDate>
<dc:creator>Mr&amp;#183;Capricorn</dc:creator>
<og:description>Deppin 显示器分辨率异常 今天早上上班开机，Deppin闹脾气了。deepin的分辨率变成1024X768的了，在显示设置里面看了一个，这个是最大的分辨率设置了，找了很久都不知道什么问题。 命令</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/LF-blog/p/9988692.html</dc:identifier>
</item>
<item>
<title>docker使用ssh远程连接容器(没钱买服务器又不想安装虚拟机患者必备) - 雪山飞猪</title>
<link>http://www.cnblogs.com/chenqionghe/p/9988566.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/chenqionghe/p/9988566.html</guid>
<description>&lt;p&gt;突然有需求，需要使用go语言写个ssh终端连接功能，这时候手上又没有服务器，虚拟机也没有，正好使用docker搞起来&lt;/p&gt;

&lt;p&gt;我们知道docker是可以用exec来直接访问容器的，但是还不够high，有时候要模拟服务器的登录总不能用docker exec吧，来吧，老司机带你飞！&lt;/p&gt;
&lt;p&gt;以centos为例，需要几步操作&lt;/p&gt;
&lt;p&gt;1.安装openssh-server&lt;/p&gt;
&lt;p&gt;2.初始化root用户密码&lt;/p&gt;
&lt;p&gt;3.开启sshd服务&lt;/p&gt;
&lt;p&gt;废话不多说，dockerfile献上&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;FROM&lt;/span&gt;&lt;span&gt; centos
&lt;/span&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt; yum install -y wget &amp;amp;&amp;amp; \
wget -O /etc/yum.repos.d/CentOS-Base.repo http:&lt;/span&gt;//mirrors.aliyun.com/repo/Centos-7.repo  &amp;amp;&amp;amp; \
&lt;span&gt;yum install -y passwd &amp;amp;&amp;amp; \
yum install -y openssh-server  ssh-keygen &amp;amp;&amp;amp; \
echo &lt;/span&gt;'abcd1234'&lt;span&gt; | passwd root --stdin
&lt;/span&gt;&lt;span&gt;RUN&lt;/span&gt; ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key -N &quot;&quot;&lt;span&gt; -q &amp;amp;&amp;amp; \
ssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key -N &lt;/span&gt;&quot;&quot;&lt;span&gt; -q &amp;amp;&amp;amp; \
ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key -N &lt;/span&gt;&quot;&quot;&lt;span&gt; -q
#&lt;/span&gt;&lt;span&gt;RUN&lt;/span&gt;&lt;span&gt; systemctl enable sshd
&lt;/span&gt;&lt;span&gt;CMD&lt;/span&gt; /usr/sbin/sshd &amp;amp;&amp;amp; tail -f /var/log/wtmp
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;简单解释一下，&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;安装openssh-server&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;yum install -y wget &amp;amp;&amp;amp; \
wget -O /etc/yum.repos.d/CentOS-Base.repo http:&lt;/span&gt;//mirrors.aliyun.com/repo/Centos-7.repo  &amp;amp;&amp;amp; \
&lt;span&gt;yum install -y passwd &amp;amp;&amp;amp; \
yum install -y openssh-server  ssh-keygen&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;修改root密码为abcd1234&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;echo&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;abcd1234&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; | &lt;span&gt;passwd&lt;/span&gt; root --stdin
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;创建ssh-keygen创建相关的ssh文件，-q的意思是静默模式（就是默认是需要让你回车输入的，加上这个直接跳过）&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;RUN&lt;/span&gt; ssh-keygen -t rsa -f /etc/ssh/ssh_host_rsa_key -N &quot;&quot;&lt;span&gt; -q &amp;amp;&amp;amp; \
ssh-keygen -t ecdsa -f /etc/ssh/ssh_host_ecdsa_key -N &lt;/span&gt;&quot;&quot;&lt;span&gt; -q &amp;amp;&amp;amp; \
ssh-keygen -t ed25519 -f /etc/ssh/ssh_host_ed25519_key -N &lt;/span&gt;&quot;&quot; -q
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;开启sshd服务，并用tail来前台执行阻止docker容器退出 &lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
CMD /usr/sbin/sshd &amp;amp;&amp;amp; &lt;span&gt;tail&lt;/span&gt; -f /var/log/wtmp
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;一、构建镜像&lt;/h2&gt;
&lt;p&gt;Dockerfile目录下执行，yeah，就是chenqionghe/centos镜像，你也可以弄成自己的，例如muscle/lightwegiht&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
docker build -t chenqionghe/centos .
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;二、运行容器&lt;/h2&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
docker run --name centos_ssh -p 2222:22 -it chenqionghe/centos　　
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;三、使用ssh连接容器&lt;/h2&gt;
&lt;p&gt; 这里使用了2222端口来映射容器里的22端口，运行起来就可以使用ssh连接了，输出设置好的abcd1234密码，注意，这里用的是2222映射的端口　　&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:bash;gutter:true;&quot;&gt;
➜  ~ ssh root@127.0.0.1 -p 2222
root@127.0.0.1's password:
Last login: Tue Nov 20 04:10:17 2018 from 172.17.0.1
[root@a8c8e0fbd74f ~]# ls -l /
total 56
-rw-r--r--   1 root root 12030 Oct  6 19:15 anaconda-post.log
lrwxrwxrwx   1 root root     7 Oct  6 19:14 bin -&amp;gt; usr/bin
drwxr-xr-x   5 root root   360 Nov 20 04:09 dev
drwxr-xr-x  54 root root  4096 Nov 20 04:09 etc
drwxr-xr-x   2 root root  4096 Apr 11  2018 home
lrwxrwxrwx   1 root root     7 Oct  6 19:14 lib -&amp;gt; usr/lib
lrwxrwxrwx   1 root root     9 Oct  6 19:14 lib64 -&amp;gt; usr/lib64
drwxr-xr-x   2 root root  4096 Apr 11  2018 media
drwxr-xr-x   2 root root  4096 Apr 11  2018 mnt
drwxr-xr-x   2 root root  4096 Apr 11  2018 opt
dr-xr-xr-x 223 root root     0 Nov 20 04:09 proc
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;以上就是使用docker开启ssh模拟服务器的全过程，ubuntu应该也差不多，感举的小伙伴可以试试&lt;/p&gt;
&lt;p&gt;hight起来，light weight baby! &lt;/p&gt;
</description>
<pubDate>Tue, 20 Nov 2018 06:10:00 +0000</pubDate>
<dc:creator>雪山飞猪</dc:creator>
<og:description>突然有需求，需要使用go语言写个ssh终端连接功能，这时候手上又没有服务器，虚拟机也没有，正好使用docker搞起来 docker容器开启sshd服务，模拟服务器 我们知道docker是可以用exec</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/chenqionghe/p/9988566.html</dc:identifier>
</item>
<item>
<title>AI应用开发基础傻瓜书系列4-用线性回归来理解神经网络的训练过程 - UniversalAIPlatform</title>
<link>http://www.cnblogs.com/ms-uap/p/9983758.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ms-uap/p/9983758.html</guid>
<description>&lt;p&gt;下面我们举一个简单的线性回归的例子来说明实际的反向传播和梯度下降的过程。完全看懂此文后，会对理解后续的文章有很大的帮助。&lt;/p&gt;
&lt;p&gt;为什么要用线性回归举例呢？因为&lt;span class=&quot;math inline&quot;&gt;\(y = wx+b\)&lt;/span&gt; （其中，y,w,x,b都是标量）这个函数的形式和神经网络中的&lt;span class=&quot;math inline&quot;&gt;\(Y = WX + B\)&lt;/span&gt;（其中，Y,W,X,B等都是矩阵）非常近似，可以起到用简单的原理理解复杂的事情的作用。&lt;/p&gt;

&lt;p&gt;让我们先自力更生创造一些模拟数据：&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;import numpy as np
import matplotlib.pyplot as plt
# create mock up data
# count of samples
m = 100
X = np.random.random(m)
# create some offset as noise to simulate real data
noise = np.random.normal(0,0.1,x.shape)
W = 2
B = 3
Y = W * X + B + noise
plt.plot(X, Y, &quot;b.&quot;)
plt.show()&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;得到100个数据点如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/700062/201811/700062-20181119162107854-241397869.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;好了，模拟数据制作好了，目前X是一个100个元素的集合，里面有0~100之间的随机x点，Y是一个100个元素的集合，里面有对应到每个x上的&lt;span class=&quot;math inline&quot;&gt;\(y=2x+3\)&lt;/span&gt;的值，然后再加一个或正或负的上下偏移作为噪音，来满足对实际数据的模拟效果（因为大部分真实世界的生产数据从来都不是精确的，精确只存在于数学领域）。&lt;/p&gt;
&lt;p&gt;现在我们要忘记这些模拟数据（样本值）是如何制作出来的，也就是要忘记W,B的值。我们就假设这是实际应用中收集到的模拟数据，但是我们并不知道它的原始函数是什么参数，只知道是公式&lt;span class=&quot;math inline&quot;&gt;\(y = wx + b\)&lt;/span&gt;，我们的任务就是要根据这些样本值，通过神经网络训练的方式，得到w和b的值。注意这里x和y是样本的输入和输出，不是目标变量，这一点和常见的初等数学题不一样，要及时转变概念。&lt;/p&gt;

&lt;p&gt;接下来，我们会用两种方式来训练神经网络（神经元）：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;把所有样本逐个地输入网络训练&lt;/li&gt;
&lt;li&gt;把所有样本整批的输入网络训练&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;Pseudo code伪代码如下：&lt;/p&gt;
&lt;p&gt;第一种方式：逐个样本训练&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;for 每个样本x,y:
    标量前向计算得到z值 = wx+b
    计算损失(optional)
    计算w的梯度（输入Z,Y,X的值）
    计算b的梯度（输入Z,Y,X的值）
    更新w,b的值&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;第一种方式的好处是每次计算都是标量计算，不涉及到矢量或者矩阵，便于大家理解。但是有个问题就是，如果最后几个样本的误差较大的话，会把前面已经训练得差不多的w,b的值变坏。&lt;/p&gt;
&lt;p&gt;第二种方式：批量样本训练&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;while 停止条件不满足
    矩阵前向计算得到Z值 = wX+b（其中X是所有样本的一个数组/集合）
    计算损失(optional)
    计算w的梯度
    计算b的梯度
    更新w,b的值&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;第二种方式我们用了矩阵和标量的运算，以及矩阵和矩阵的运算。由于是批量样本做为输入，所以某些个样本的误差不会对整体造成影响。&lt;/p&gt;

&lt;h2 id=&quot;定义神经网络结构&quot;&gt;定义神经网络结构&lt;/h2&gt;
&lt;p&gt;对于简单的线性回归问题，我们使用单层网络单个神经元就足够了。而且由于是线性的，我们不需要定义激活函数，这就大大简化了程序，而且便于大家循序渐进地理解。&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;def forward_calculation(w,b,X):
    z = w * x + b
    return z&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;其中，由于X是一组数据（100个），所以它是一个矢量，或者理解为一维数组。w和b都是一个标量，Z的计算结果也是一个矢量，尺寸和X一样。&lt;/p&gt;
&lt;p&gt;上面的写法，实际上是每次迭代都用所有的样本做训练，因为输入是X，是所有样本的集合。还有另外一种做法，就是每次训练，只用一个训练样本，那么就需要在主循环中进行调度，一次使用一个样本。&lt;/p&gt;
&lt;h2 id=&quot;定义代价函数&quot;&gt;定义代价函数&lt;/h2&gt;
&lt;p&gt;我们用传统的均方差函数: &lt;span class=&quot;math inline&quot;&gt;\(loss = \frac{1}{2}(z-y)^2\)&lt;/span&gt;，其中，z是每一次迭代的预测输出，y是样本标签数据。这个损失函数的直观理解如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/700062/201811/700062-20181119162132199-337548447.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;假设我们计算出初步的结果是红色虚线所示，这条直线是否合适呢？我们来计算一下图中每个点到这条直线的距离（黄色线），把这些距离的值都加起来（都是正数，不存在互相抵消的问题）成为loss，然后想办法不断改变红色直线的角度和位置，让loss最小，就意味着整体偏差最小，那么最终的那条红色直线就是我们要的结果。&lt;/p&gt;
&lt;p&gt;下面是Python的code，用于计算损失：&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;# w:weight, y:sample data, m:count of sample
def loss_calculation(z,y):
    loss = (z-y)**2    # cannot use (Z-Y)^2
    cost = loss/2
    return cost&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;其实，这个loss值可以不用计算的，因为我们使用这个损失函数的目的是要反向传播，而不是真的用这个loss值去做什么具体的运算。具体的计算是体现在求导梯度的函数中。&lt;/p&gt;
&lt;p&gt;搞明白为何用均方差MSE函数后，我们再看看MSE如何应用到反向传播中。&lt;/p&gt;
&lt;h2 id=&quot;定义针对w的梯度函数&quot;&gt;定义针对w的梯度函数&lt;/h2&gt;
&lt;p&gt;因为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[z = wx+b\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[loss = \frac{1}{2}(z-y)^2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以我们用loss的值作为基准，去求w对它的影响，也就是loss对w的偏导数：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{w}} = \frac{\partial{loss}}{\partial{z}}*\frac{\partial{z}}{\partial{w}} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{z}} = \frac{\partial{}}{\partial{z}}[\frac{1}{2}(z-y)^2] = z-y \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;而：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{z}}{\partial{w}} = \frac{\partial{}}{\partial{w}}(wx+b) = x \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{w}} = \frac{\partial{loss}}{\partial{z}}*\frac{\partial{z}}{\partial{w}} = (z-y)x \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;写成code：&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;# w:weight, X,Y:sample data, m:count of sample
def dJw(z,y,x):
    dw = (z-y)*x
    return dw&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;定义针对b的梯度函数&quot;&gt;定义针对b的梯度函数&lt;/h2&gt;
&lt;p&gt;因为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[Z = wX+b\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[loss = \frac{1}{2}(Z-Y)^2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以我们用loss的值作为基准，去求w对它的影响，也就是loss对w的偏导数：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{b}} = \frac{\partial{loss}}{\partial{Z}}*\frac{\partial{Z}}{\partial{b}} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{Z}} = \frac{\partial{}}{\partial{Z}}[(z-y)^2] = z-y \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;而：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{z}}{\partial{b}} = \frac{\partial{(wx+b)}}{\partial{b}} = 1 \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{b}} = \frac{\partial{loss}}{\partial{Z}}*\frac{\partial{Z}}{\partial{b}} = z-y \]&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;# Z:predication value, Y:sample data, m:count of sample
def dJb(z,y):
    db = z - y
    return db&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;每次迭代后更新wb的值&quot;&gt;每次迭代后更新w,b的值&lt;/h2&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;def update_weights(w, b, dw, db, eta):
    w = w - eta*dw
    b = b - eta*db
    return w,b&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;eta在本程序中恒等于0.1，这是随机梯度下降法。也可以在迭代到一定次数后，把eta的值逐步减小，变成0.01，这样会形成开始时大步前进，到后面时小步快跑的局面，利于训练准确度提高。&lt;/p&gt;
&lt;h2 id=&quot;初始化变量及参数&quot;&gt;初始化变量及参数&lt;/h2&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;# initialize_data
# step for each iteration
eta = 0.1
# set w,b=0, you can set to others values to have a try
w = 0
b = 0&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;程序主循环&quot;&gt;程序主循环&lt;/h2&gt;
&lt;p&gt;j是外循环的次数，先只训练一次看看效果。&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;for j in range(1):
    for i in range(m):
        # get x and y value for one sample
        x = X[i]
        y = Y[i]
        # get z from x,y
        z = forward_calculation(w, b, x)
        # calculate lost (optional)
        #loss = loss_calculation(z, y)
        # calculate gradient of w and b
        dw = dJw(z, y, x)
        db = dJb(z, y)
        # update w,b
        w, b = update_weights(w, b, dw, db, eta)
        print(w,b)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;程序运行结果如下：&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;0.11278289694938642 0.34606738038593576
0.4048467024747609 0.7556962791118582
0.46002740765953076 1.0072739217390403
0.6629665909817659 1.3133134892057239
......
1.8800223947881818 3.054203494854314
1.8798053702497237 3.0511601599536635
1.8722710744969668 3.0374415142130298
1.8761825822484357 3.0437127218759885&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;目标是w=2，b=3，看上去误差还比较大。我们设置外循环次数为3，再看看效果。&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;#for j in range(1):
for j in range(3):&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;......
1.950551908871318 3.01593409919309
1.9512023724525054 3.0181474143771783
1.9512839743332555 3.0189251294358055
1.950145626519112 3.0148986986722246
1.9387958775488612 3.0023925945934153&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;貌似距离理想值更进了一步。但其实这两次的结果不可比，因为我们每次都用新的随机数做为样本，而不是同一批随机数。所以大家可以自己试着把随机数保存到文件里，每次训练时读出来，这样就可以比较效果了。&lt;/p&gt;

&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;# use all the samples as a batch to train, then iteration on batch
import numpy as np
import matplotlib.pyplot as plt
# create mock up data
# count of samples
m = 100
X = np.random.random(m)
# create some offset as noise to simulate real data
noise = np.random.normal(0,0.1,X.shape)
W = 2
B = 3
Y = X * W + B + noise
plt.plot(X, Y, &quot;b.&quot;)
plt.show()


# 由于X是一组数据（100个），所以它是一个矢量，或者理解为一维数组。w和b都是一个标量，Z的计算结果也是一个矢量，尺寸和X一样。
def forward_calculation(w,b,X):
    Z = w * X + b
    return Z

# 由于是m个训练样本批量训练，所以结果要除以m，下同
# 注意X,Y,Z都是数组
def loss_calculation(Z,Y,m):
    loss = (Z-Y)**2    # cannot use (Z-Y)^2
    cost = loss.sum()/m/2
    return cost

def dJw(Z,Y,X,m):
    q = (Z-Y)*X
    dw = sum(q)/m
    return dw

def dJb(Z,Y,m):
    q = Z - Y
    db = sum(q)/m
    return db

# w,b是标量，所以代码和第一种方式相同

def update_weights(w, b, dw, db, eta):
    w = w - eta*dw
    b = b - eta*db
    return w,b

# initialize_data
# step for each iteration
eta = 0.1
# set w,b=0, you can set to others values to have a try
w = 0
b = 0
# condition 1 to stop iteration: when Q - prevQ &amp;lt; error
error = 1e-10
prevQ = 10
# condition 2 to stop iteration
max_iteration = 10000
# counter of iteration
iteration = 0

# condition 2 to stop
while iteration &amp;lt; max_iteration:
    # using current w,b to calculate Z
    Z = forward_calculation(w,b,X)
    # compare Z and Y
    Q = loss_calculation(Z, Y, m)
    # get gradient value
    dW = dJw(Z, Y, X, m)
    dB = dJb(Z, Y, m)
    # update w and b
    w, b = update_weights(w, b, dW, dB, eta)
    print(iteration,w,b)
    iteration += 1
    # condition 1 to stop

#    if abs(Q - prevQ) &amp;lt; error:
#        break
    prevQ = Q

print(Q,prevQ)
print(w,b)&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;代价函数的微小变化&quot;&gt;代价函数的微小变化&lt;/h2&gt;
&lt;p&gt;我们用传统的均方差函数: &lt;span class=&quot;math inline&quot;&gt;\(loss = \frac{1}{2}(Z-Y)^2\)&lt;/span&gt;，其中，Z是每一次迭代的预测输出，Y是样本标签数据。我们使用所有样本参与训练，因此损失函数实际为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[loss = \frac{1}{2m}\sum_{i=1}^{m}(Z_i - Y_i) ^ 2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中的分母中有个2，实际上是想在求导数时把这个2约掉，没有什么原则上的区别。&lt;/p&gt;
&lt;p&gt;由于loss是所有样本的集合，我们先对其中的所有值求总和，样本数量是m，然后除以m来求一个平均值。&lt;/p&gt;
&lt;p&gt;其实，这个loss值可以不用计算的，因为我们使用这个损失函数的目的是要反向传播，而不是真的用这个loss值去做什么具体的运算。具体的计算是体现在求导梯度的函数中。&lt;/p&gt;
&lt;h2 id=&quot;定义针对w的梯度函数-1&quot;&gt;定义针对w的梯度函数&lt;/h2&gt;
&lt;p&gt;因为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[Z = wX+b\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[loss = \frac{1}{2m}(Z-Y)^2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以我们用loss的值作为基准，去求w对它的影响，也就是loss对w的偏导数：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{w}} = \frac{\partial{loss}}{\partial{Z}}*\frac{\partial{Z}}{\partial{w}} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{Z}} = \frac{\partial{}}{\partial{Z}}[\frac{1}{2m}(Z-Y)^2] = \frac{1}{m}(Z-Y) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;而：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{z}}{\partial{w}} = \frac{\partial{}}{\partial{w}}(wX+b) = X \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{w}} = \frac{\partial{loss}}{\partial{Z}}*\frac{\partial{Z}}{\partial{w}} = \frac{1}{m}(Z-Y)X \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;写成code：&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;# w:weight, X,Y:sample data, m:count of sample
def dJw(Z,Y,X,m):
    q = (Z-Y)*X
    # because w is a scalar, so dw should be a scalar too
    dw = sum(q)/m
    return dw&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;定义针对b的梯度函数-1&quot;&gt;定义针对b的梯度函数&lt;/h2&gt;
&lt;p&gt;因为：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[Z = wX+b\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[loss = \frac{1}{2m}(Z-Y)^2\]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以我们用loss的值作为基准，去求w对它的影响，也就是loss对w的偏导数：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{b}} = \frac{\partial{loss}}{\partial{Z}}*\frac{\partial{Z}}{\partial{b}} \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{Z}} = \frac{\partial{}}{\partial{Z}}[\frac{1}{2m}(Z-Y)^2] = \frac{1}{m}(Z-Y) \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;而：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{Z}}{\partial{b}} = \frac{\partial{(wX+b)}}{\partial{b}} = 1 \]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;所以：&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;math display&quot;&gt;\[ \frac{\partial{loss}}{\partial{b}} = \frac{\partial{loss}}{\partial{Z}}*\frac{\partial{Z}}{\partial{b}} = \frac{1}{m}(Z-Y) \]&lt;/span&gt;&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;# Z:predication value, Y:sample data, m:count of sample
def dJb(Z,Y,m):
    q = Z - Y
    db = sum(q)/m
    return db&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;程序运行结果如下：&lt;/p&gt;
&lt;pre class=&quot;python&quot;&gt;
&lt;code&gt;0 0.204633398307696 0.3943112518285292
1 0.3842082815875446 0.7395242688455653
2 0.5418315944143854 1.0417326666889068
3 0.6802247732855068 1.3062739239107688
......
935 2.014844080911897 2.9912924671594148
936 2.014846970318595 2.9912909940330077
937 2.014849838514886 2.991289531720451
938 2.014852685656469 2.991288080142363
939 2.0148555118979017 2.9912866392199446
940 2.014858317392607 2.9912852088749755
941 2.0148611022928815 2.9912837890298087
0.004078652569361402 0.004078652668164296
2.0148611022928815 2.9912837890298087&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;训练过程迭代了941次，loss的前后差值小于1e-10了，达到了停止条件。可以看到最后w = 2.0148, b = 2.9912, 非常接近W=2, B=3的真实值。&lt;/p&gt;
&lt;p&gt;也可以注释掉condition 1，让迭代达到10000次，但其实结果并不会好到哪里去。&lt;/p&gt;
&lt;p&gt;孔子说：点赞是人类的美德！如果觉得有用，关闭网页前，麻烦您给点个赞！然后准备学习下一周的内容。&lt;/p&gt;
</description>
<pubDate>Tue, 20 Nov 2018 06:02:00 +0000</pubDate>
<dc:creator>UniversalAIPlatform</dc:creator>
<og:description>下面我们举一个简单的线性回归的例子来说明实际的反向传播和梯度下降的过程。完全看懂此文后，会对理解后续的文章有很大的帮助。 为什么要用线性回归举例呢？因为$y = wx+b$ （其中，y,w,x,b都是</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ms-uap/p/9983758.html</dc:identifier>
</item>
<item>
<title>Conway生命游戏 - 窗户</title>
<link>http://www.cnblogs.com/Colin-Cai/p/9986679.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Colin-Cai/p/9986679.html</guid>
<description>&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:sql;gutter:true;&quot;&gt;
　　版权申明：本文为博主窗户(Colin Cai)原创，欢迎转帖。如要转贴，必须注明原文网址

　　http://www.cnblogs.com/Colin-Cai/p/9986679.html 

　　作者：窗户

　　QQ/微信：6679072

　　E-mail：6679072@qq.com
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　1970年，英国数学家Conway发明了生命游戏。抛开元胞自动机的复杂概念，我们只是去感受一下二维的生命游戏，这其实是元胞自动机的一个特例。&lt;/p&gt;

&lt;p&gt;　　&lt;strong&gt;&lt;span&gt;生命游戏&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;　　我们先考虑有限的情况，对于mXn的方格，每个方格都会有一个状态，该状态有两个可能值：有生命、无生命。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181119221754608-1799971836.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　如上图8X8的方格，红色的格子代表状态为有生命，白色的格子代表状态为无生命。&lt;/p&gt;
&lt;p&gt;　　生命游戏是一代一代的演化，每一代就是所有格子的一组状态。我们来说演化规则，对于每个格子，我们来数这个格子所有的&lt;strong&gt;&lt;span&gt;周围格子&lt;/span&gt;&lt;/strong&gt;状态为由生命的数目。&lt;/p&gt;
&lt;p&gt;　　这里的周围格子是指：这个格子的上、下、左、右、左上、右上、左下、右下这8个格子。当然，有例外，角上的格子只有3个周围格子，而边上的格子只有5个周围格子。&lt;/p&gt;
&lt;p&gt;　　于是，我们把上面这个图的每个格子的周围有生命格子数目标注出来。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181119223120003-1217924000.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　下一代所有格子状态由以下规则确定：&lt;/p&gt;
&lt;p&gt;　　1.如果周围有生命格子的数目小于2，则下一代这个格子状态为无生命(解释为太孤单)。&lt;/p&gt;
&lt;p&gt;　　2.如果周围有生命格子的数目大于3，则下一代这个格子为无生命(解释为周围生命太多，资源消耗厉害)。&lt;/p&gt;
&lt;p&gt;　　3.如果周围有生命格子的数目等于2，则下一代这个格子的状态继续保持当前的状态。&lt;/p&gt;
&lt;p&gt;　　4.如果周围有生命格子的数目等于3，则下一代这个格子的状态为有生命。&lt;/p&gt;

&lt;p&gt;　　于是，下一代应为如下：&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181119224943257-686879315.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;　　把各代组成动画如下：&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181119225532717-609592550.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　只可惜这个到了第6代，所有的格子都变成无生命状态。&lt;/p&gt;

&lt;p&gt;　　&lt;span&gt;&lt;strong&gt;震荡子&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;　　有一类神奇的图案，可以反复不断的循环，称为震荡子。&lt;/p&gt;

&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181119233042317-1134643547.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　上面这个震荡子周期为15。&lt;/p&gt;

&lt;p&gt;　　&lt;strong&gt;&lt;span&gt;枪型图&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;　　下面这个图是Bill Gosper于1970年发现的第一个Gun，你看那一个个向右下方向而去的像不像“子弹&quot;？实际上，Gun描述的是一个无限的方格，因为子弹是在不断变多的，图形的尺寸实际上会越来越大，但在有限的方格情况下其实是震荡子(下图实际上是虚拟的从无限的方格中截取的有限图像)。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181119233744032-1731339355.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;　　这是发现的第二个Gun。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181119233807237-1793031105.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　以我的能力，我是完全不知道这两个Gun是怎么被拼出来的。&lt;/p&gt;

&lt;p&gt;　　&lt;span&gt;&lt;strong&gt;程序实现&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;　　生命游戏规则简单，我想在学习程序的过程中实现一个并不是什么难事。&lt;/p&gt;
&lt;p&gt;　　我上面的这些动画实际上也是用程序生成的，我推荐python用cv2库，它属于opencv，开发效率还是很高的。&lt;/p&gt;
&lt;p&gt;　　真想从底层动手，那就用C语言造轮子吧，只要体力好，也没什么不可以。&lt;/p&gt;
&lt;p&gt;　　如果要生成bmp，研究一下bmp文件的格式,wiki上就有，https://en.wikipedia.org/wiki/BMP_file_format&lt;/p&gt;
&lt;p&gt;　　如果想要jpeg，那么可以使用libjpeg，只是libjpeg只有从bmp文件转成jpeg，默认接口里没有从内存转的，这可能不太方便，需要的话得自己来加个接口，很多年前我加过。&lt;/p&gt;

&lt;p&gt;　　&lt;strong&gt;&lt;span&gt;计算周围生命格子数目&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;　　我想大部分的人来计算都是对于某个点，依次数周围的格子，然后挨个相加，从而计算整个矩阵的加法数量的线性系数是7（因为大多格子周围都是8个格子，要做7次加法），也就是加法数量除以矩阵规模(节点数)的极限为7。&lt;/p&gt;
&lt;p&gt;　　如果只从加法数量来说，这个规模不能让人满意。下面这个方法会好很多。&lt;/p&gt;

&lt;p&gt;　　第一步，同行的两两结对相加。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181120125530013-1422887690.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　a&lt;sub&gt;0,0&lt;/sub&gt;+a&lt;sub&gt;0,1&lt;/sub&gt; a&lt;sub&gt;0,2&lt;/sub&gt;+a&lt;sub&gt;0,3&lt;/sub&gt; a&lt;sub&gt;0,4&lt;/sub&gt;+a&lt;sub&gt;0,5&lt;/sub&gt; ...&lt;/p&gt;
&lt;p&gt;　　...&lt;/p&gt;
&lt;p&gt;　　a&lt;sub&gt;n,0&lt;/sub&gt;+a&lt;sub&gt;n,1&lt;/sub&gt; a&lt;sub&gt;n,2&lt;/sub&gt;+a&lt;sub&gt;n,3&lt;/sub&gt; a&lt;sub&gt;n,4&lt;/sub&gt;+a&lt;sub&gt;n,5&lt;/sub&gt; ... &lt;/p&gt;
&lt;p&gt;　　...&lt;/p&gt;
&lt;p&gt;　　这样使用线性系数0.5次加法&lt;/p&gt;

&lt;p&gt;　　第二步，每个格子再多加一次得到这个格子自身和左、右两格的和。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181120125754593-480762532.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　显然，这次使用加法数量系数为1。&lt;/p&gt;
&lt;p&gt;　　于是我们看到了，使用系数为1.5的加法数量就完成了每个格子自身和左、右两格的和，而本来平凡的手段这个系数为2。&lt;/p&gt;

&lt;p&gt;　　第三步，在此基础上，使用第一步、和第二步，只是第一步和第二步从矩阵的横向考虑，现在统统改成纵向。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181120130138932-602774286.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　这样就得到了每个格子以自身为中心的九宫格的九个格子之和。&lt;/p&gt;
&lt;p&gt;　　这样累计一下，系数翻个倍，为3。&lt;/p&gt;

&lt;p&gt;　　第四步，上面其实多加了自身这个格子，于是减掉自身。&lt;/p&gt;
&lt;p&gt;　　系数就变成4，比之前7要好。&lt;/p&gt;

&lt;p&gt;　　以上只是简单的说一说道理，而真正在优化卷积、中值滤波等应用的时候，要比这个复杂的多。&lt;/p&gt;

&lt;p&gt;　　&lt;strong&gt;&lt;span&gt;稀疏矩阵&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;　　先放个动画。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1151747/201811/1151747-20181120130618023-2017950921.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　我们似乎在上述动画中看到了星际战争^_^&lt;/p&gt;
&lt;p&gt;　　图像中大多数格子的状态都是无生命，这种情况下，如果还是依次去计算矩阵的每一个格子，是个很大的浪费。&lt;/p&gt;
&lt;p&gt;　　实际上，我们只需要记录其中状态为有生命的格子就行了，这是因为，下一代有生命的格子就在这一代有生命的格子的近旁。&lt;/p&gt;
&lt;p&gt;　　这就是稀疏矩阵的出发点，当然，稀疏矩阵本身有着非常多的算法，基本都是本着相近的元素会发生相互作用，从而相近的元素要给予更为快速的查找。对于完全无序的集合，稀疏矩阵的元素一旦多起来，效率非常低下。&lt;/p&gt;
&lt;p&gt;　　有兴趣的就自己去研究吧，比如四叉树就是常用的空间索引。&lt;/p&gt;


</description>
<pubDate>Tue, 20 Nov 2018 05:27:00 +0000</pubDate>
<dc:creator>窗户</dc:creator>
<og:description>1970年，英国数学家Conway发明了生命游戏。抛开元胞自动机的复杂概念，我们只是去感受一下二维的生命游戏，这其实是元胞自动机的一个特例。 生命游戏 我们先考虑有限的情况，对于mXn的方格，每个方格</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/Colin-Cai/p/9986679.html</dc:identifier>
</item>
<item>
<title>Visual Studio 2017中使用SourceLink调试ASP.NET Core源码 - LamondLu</title>
<link>http://www.cnblogs.com/lwqlun/p/9988369.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lwqlun/p/9988369.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131350632-1308827398.jpg&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;背景&quot;&gt;背景&lt;/h3&gt;
&lt;p&gt;当我们在学习ASP.NET Core或者调试ASP.NET Core程序的时候，有时候需要调试底层代码，但是当我们在Visual Studio中调试程序的时候，由于一些基础库或者第三方库缺少pdb文件，所以调试这些库的代码的时候，会出现断点不能进去的情况。&lt;/p&gt;
&lt;p&gt;例如，在如下代码中，我们希望调试一下View()方法，看看其中的内部实现&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131428587-2005859599.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;但是当我们点击F11之后，程序会直接跳到下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131434275-613568807.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;source-link&quot;&gt;Source Link&lt;/h3&gt;
&lt;p&gt;SourceLink是一组用于描述可嵌入到符号、二进制文件和包中的源代码控制元数据的包和规范。官网链接：&lt;a href=&quot;https://github.com/dotnet/sourcelink&quot; class=&quot;uri&quot;&gt;https://github.com/dotnet/sourcelink&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;SourceLink当前支持的源代码来源&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;Github&lt;/li&gt;
&lt;li&gt;Azure DevOps(VSTS)&lt;/li&gt;
&lt;li&gt;TFS&lt;/li&gt;
&lt;li&gt;Gitlab&lt;/li&gt;
&lt;li&gt;Bitbucket&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;这里个人理解就是如果你调试的程序集是通过Nuget导入的，并且该程序集的源码是寄存在Github, VSTS等源代码平台中的，使用Source Link，调试阶段就会自动从源代码平台下载指定代码，并进入断点调试&lt;/p&gt;
&lt;blockquote readability=&quot;5.8490566037736&quot;&gt;
&lt;p&gt;标注：这里需要引入.NET Symbols的概念，我对这个理解的不是太深，希望有大牛给解释一下, 我后续再做补充。相关文章&lt;a href=&quot;https://github.com/dotnet/designs/blob/master/accepted/diagnostics/debugging-with-symbols-and-sources.md&quot;&gt;Publishing and Consuming Symbols and Source for Debugging&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;如何在visual-studio-2017中使用source-link&quot;&gt;如何在Visual Studio 2017中使用Source Link&lt;/h3&gt;
&lt;p&gt;Visual Studio 2017 15.3以上版本中已经集成了Source Link, 具体开启方式如下&lt;/p&gt;
&lt;p&gt;首先在 Options &amp;gt; Debugging &amp;gt; General中关闭Just My Code, 并启用Enable Source Link Support&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131601648-701513536.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131605870-1056382533.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;然后在 Options &amp;gt; Debugging &amp;gt; Symbols中启用Microsoft Symbol Servers&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131609599-282583895.png&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;最终效果&quot;&gt;最终效果&lt;/h3&gt;
&lt;p&gt;下面我们创建一个默认的asp.net core mvc站点，并以调试方式启动项目。 这里我们还是将断点打在&lt;code&gt;HomeController&lt;/code&gt;的&lt;code&gt;Index&lt;/code&gt;方法中。&lt;/p&gt;
&lt;p&gt;当断点到达&lt;code&gt;return View()&lt;/code&gt;代码块时，我们点击F11, Visual Studio会弹出以下窗口，提示你是否想要下载源文件进行调试&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131616418-678139685.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;点击确定之后，断点就进入了&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/65831/201811/65831-20181120131734057-907697393.png&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 20 Nov 2018 05:18:00 +0000</pubDate>
<dc:creator>LamondLu</dc:creator>
<og:description>背景 当我们在学习ASP.NET Core或者调试ASP.NET Core程序的时候，有时候需要调试底层代码，但是当我们在Visual Studio中调试程序的时候，由于一些基础库或者第三方库缺少pd</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lwqlun/p/9988369.html</dc:identifier>
</item>
<item>
<title>从壹开始微服务 [ DDD ] 之九 ║从军事故事中，明白领域命令验证（上） - 老张的哲学</title>
<link>http://www.cnblogs.com/laozhang-is-phi/p/9984740.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/laozhang-is-phi/p/9984740.html</guid>
<description>&lt;p&gt;哈喽大家周二好呀，咱们又见面了，上周末掐指一算，距离 &lt;strong&gt;圣诞节 &lt;/strong&gt;只有 5 周的时间了（如果你还不知道为啥我要提圣诞节这个时间点，可以看看我的第二系列开篇《&lt;a id=&quot;post_title_link_9806335&quot; href=&quot;https://www.cnblogs.com/laozhang-is-phi/p/9806335.html&quot;&gt;之一 ║ D3模式设计初探 与 我的计划书&lt;/a&gt;》），然后我简单的思考了下这个DDD领域驱动设计还剩下的知识点，现在已经进入了第二部分，就是领域命令和领域驱动这一块，第三部分包括Identity验证和.net core api等设计点，大概就是剩了这么多，预计应该能在圣诞节前完成。还有一个就是，之前的八篇文章，已经比较完整的实现了普通框架的整体搭建，我也单独的新建了一个 &lt;strong&gt;Git分支&lt;/strong&gt;—— &lt;strong&gt;Framework8 &lt;/strong&gt;，如果你不想用领域命令、领域事件、事件回溯这些东西，仅仅就想要一个空的框架，一个包括 &lt;strong&gt;EFCore+Dtos+Automapper+IoC+Repository&lt;/strong&gt; 的空框架（就比如我的第一个系列，就是一个普通的框架，请不要再说是这是一个普通三层了，拜托😂），你就可以直接用这个&lt;strong&gt;Framework8 &lt;/strong&gt;&lt;strong&gt;分支&lt;/strong&gt;即可。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201811/1468246-20181119150956676-138794036.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;言归正传，上次咱们说到了创建新student的时候，提出来一个问题，不知道大家是否还记得，这里再给大家说明一下，还是每篇一问，希望能好好思考下，或者是看看自己是如何设计的：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;问题1&lt;/span&gt;&lt;/strong&gt;：平时是如何进行表单验证的（包括：判空、字符类型有效、业务验证：成人不能小于18岁、金额不能小于0等）？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;问题2&lt;/span&gt;&lt;/strong&gt;：如果后来验证变化了改怎么办？（比如：手机号要支持全球，或者座机；亦或者退休年龄从60岁变成65岁；）&lt;/p&gt;
&lt;blockquote readability=&quot;15&quot;&gt;
&lt;p&gt;1、JavaScript前端验证即可，后端从来不进行验证？（问题2：修改js）&lt;/p&gt;
&lt;p&gt;2、后端验证：直接在Controller中，通过写很多判断逻辑，比如 If Else等，而且CURD还需要写很多重复的判断方法？（问题2：每一个地方都需要仔细修改，额。）&lt;/p&gt;
&lt;p&gt;3、后端验证：写一个统一的验证类，或者验证机制，比如一个公共类？甚至更高级的AOP切面验证？（问题2：好像还是无法满足每个领域特例）&lt;/p&gt;
&lt;p&gt;4、后端验证：在DTO基础上，基于领域命令，通过中介者Bus分发？（当然这个就是以后我要写的）&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;其实说实话，前三种我都用过，甚至现在偶尔也还是会用，毕竟很平常的用法，但是现在我感觉第四种真的很整洁，真正的把整体项目放到了领域中，一切以领域为核心了 。这里我先把第四种的应用层 Service 方法简单写下，你就知道多么简洁了，具体的会在下面两篇文章中说到：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
 &lt;span&gt;///&lt;/span&gt;&lt;span&gt; StudentAppService 添加新 Student 
 &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
 &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Register(StudentViewModel studentViewModel)
 {
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;讲视图模型，转换成命名模型&lt;/span&gt;
     &lt;span&gt;var&lt;/span&gt; registerCommand = _mapper.Map&amp;lt;RegisterStudentCommand&amp;gt;&lt;span&gt;(studentViewModel);
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;通过Mediator处理程序分发命令
     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;执行顺序：验证 -&amp;gt; 通知 -&amp;gt; 注册&lt;/span&gt;
&lt;span&gt;
     Bus.SendCommand(registerCommand);
 }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;老张说&lt;/span&gt;：这两天我在研究，啃书的时候，发现了这个DDD领域驱动的整体流程，从前台数据传递视图模型 ，到Dto的命令模型，然后对其校验的命令验证模式，最后还有总线分发，然后就是异常通知等等，就像是一场军事战斗中的过程：&lt;/p&gt;
&lt;p&gt;这里说的命令是动作的意思，是用户发出的一个请求（从前台向后端），当然你也可以理解是改领域模型下的命令动作（从内到外），还记得我们说到的读写分离CQRS么，就是Command。&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;每一个个小的战役（领域模型），都会有自己战场的一些信息和动作数据（视图模型），当然这里有正常的消息，也有恶性攻击或者不当的操作，每一个动作执行都是一个前锋部队（领域命令模型），先锋部队把这些数据打包，加上时间戳等标识，生成命令标签，这个时候通过总线指挥官（中介者），交给参谋来处理数据命令（领域验证），进行安全甄别，将正常的、正确的往下传递，传给司令部（持久化），如果是恶性的错误信息，则通过通讯兵打包给前线（通知），每次前线执行操作，只需要看看是否有通讯兵是否有错误异常提醒，如果没有则证明执行成功。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;当然还有事件回溯和事件源，我会在以后文章说明，不知道这个栗子是否合理，如果大家看不懂也没关系，或者请下边留言，我们一起讨论讨论。&lt;/p&gt;


&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201811/1468246-20181119160208514-1607601390.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt; 说到这个领域命令，大家肯定不会陌生，或者说应该是在哪里见过，没错！就是我们在上上一篇《&lt;a id=&quot;post_title_link_9931304&quot; href=&quot;https://www.cnblogs.com/laozhang-is-phi/p/9931304.html&quot;&gt;七 ║项目第一次实现 &amp;amp; CQRS初探&lt;/a&gt;》中，说到的读写分离 CQRS 中的C —— Commend命令，这里我简单说下，为什么叫先锋官，我们把整个项目比作一个战场的化，前端一直和后端进行交互 —— 表单提交，这个时候，肯定就离不开查询和命令，查询这里暂时先不说，就说一下这个命令，前端的任何一个动作其实都是一个事件。&lt;/p&gt;
&lt;p&gt;大家肯定知道从前台DTO拿到的实体模型数据，肯定不能直接操作领域模型（&lt;span&gt;当然现在我们是直接这么操作的，直接用的是视图模型和领域模型进行交互操作，这个时候领域模型就起到了一个冲锋陷阵的作用了，其实这种设计不符合DDD领域设计的思想，因为领域模型是一切的核心，它应该是一个个司令部，不能参与到前线，他会下发出一个个的命令模型去执行&lt;/span&gt;），这个时候我们的命令模型就出现了，他充当着从前台到后台的先锋官的作用，执行一个个的命令指令，完成从视图模型到领域模型的操作和数据的过度作用。&lt;/p&gt;
&lt;p&gt;然后再通过中介者模式，通过事件总线，通过领域命令一一分发出去，然后通过验证，最后是实现（比如持久化等），然后将中间产生的错误信息，或者通知信息，再扔给了前台，所以说，领域命令就是一个先锋官，这里你也看到了，他是一个个先锋官，他的作用是起到引导的作用，是下达命令的作用，他是不负责具体的逻辑实现的，具体是为什么呢，先按下不表。咱们先看看如何定义一个领域命令。&lt;/p&gt;
&lt;h5&gt;希望上边的三段话大家可以帮忙想一想，如果想通了，但是和我写的不一样，请一定要留言！&lt;/h5&gt;

&lt;h3&gt;1、创建命令抽象基类&lt;/h3&gt;
&lt;p&gt; 在 Christ3D.Domain.Core 领域核心层中，新建Commands文件夹，并该文件夹下创建抽象命令基类 Command，这里可能有小伙伴会问，这个层的作用，我就简单再说下，这个层的作用是为了定义核心的领域知识的，说人话就是很多基类，比如 Entity 是领域模型的基类，ValueObject 是值对象的基类，这里的Command 是领域命令的基类，当然，你也可以把他放到领域层中，用一个 Base 文件夹来表示，这小问题就不要争议了。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Christ3D.Domain.Core.Commands
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 抽象命令基类
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Command 
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;时间戳&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; DateTime Timestamp { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;private&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证结果，需要引用FluentValidation&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; ValidationResult ValidationResult { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt;&lt;span&gt; Command()
        {
            Timestamp &lt;/span&gt;=&lt;span&gt; DateTime.Now;
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;定义抽象方法，是否有效&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;&lt;span&gt; IsValid();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;思考：为什么要单单顶一个抽象方法 IsValid()；&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;2、定义 StudentCommand ，领域命令模型&lt;/h3&gt;
&lt;p&gt; 上边的领域基类建好以后，我们就需要给每一个领域模型，建立领域命令了，这里有一个小小的绕，你这个时候需要静一静，想一想，&lt;/p&gt;
&lt;p&gt; 1、为什么每一个领域模型都需要一个命令模型。&lt;/p&gt;
&lt;p&gt; 2、为什么是一个抽象类。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Christ3D.Domain.Commands
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 定义一个抽象的 Student 命令模型
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 继承 Command
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 这个模型主要作用就是用来创建命令动作的，不是用来实例化存数据的，所以是一个抽象类
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; StudentCommand : Command
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Guid Id { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }&lt;span&gt;//注意：set 都是 protected 的

        &lt;/span&gt;&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Name { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Email { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DateTime BirthDate { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Phone { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;希望这个时候你已经明白了上边的两个问题了，如果不是很明白，请再好好思考下，如果已经明白了，请继续往下走。&lt;/p&gt;

&lt;h3&gt;3、基于命令模型，创建各种动作指令&lt;/h3&gt;
&lt;p&gt; 上边的模型创造出来了，咱们需要用它来实现各种动作命令了，比如 URD 操作，肯定是没有 C 查询的。这里就重点说一下创建吧，剩下两个都一样。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Christ3D.Domain.Commands
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 注册一个添加 Student 命令
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 基础抽象学生命令模型
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; RegisterStudentCommand : StudentCommand
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; set 受保护，只能通过构造函数方法赋值&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; RegisterStudentCommand(&lt;span&gt;string&lt;/span&gt; name, &lt;span&gt;string&lt;/span&gt; email, DateTime birthDate, &lt;span&gt;string&lt;/span&gt;&lt;span&gt; phone)
        {
            Name &lt;/span&gt;=&lt;span&gt; name;
            Email &lt;/span&gt;=&lt;span&gt; email;
            BirthDate &lt;/span&gt;=&lt;span&gt; birthDate;
            Phone &lt;/span&gt;=&lt;span&gt; phone;
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 重写基类中的 是否有效 方法
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 主要是为了引入命令验证 RegisterStudentCommandValidation。&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;&lt;span&gt; IsValid()
        {
            ValidationResult &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; &lt;span&gt;RegisterStudentCommandValidation&lt;/span&gt;().Validate(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);&lt;span&gt;//注意：这个就是命令验证，我们会在下边实现它
            &lt;/span&gt;&lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; ValidationResult.IsValid;
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这里你应该就能明白第一步的那个问题了吧：为什么要单单顶一个抽象方法 IsValid()；&lt;/p&gt;
&lt;p&gt;不仅仅是验证当前命令模型是否有效（无效是指：数据有错误、验证失败等等），只有有效了才可以往下继续走（比如持久化等 ），还要获取验证失败的情况下，收录哪些错误信息，并返回到前台，这个就是&lt;/p&gt;
&lt;pre&gt;
new RegisterStudentCommandValidation()
&lt;/pre&gt;
&lt;p&gt;的作用。注意这里还没有实现，我们接下来就会实现它。&lt;/p&gt;
&lt;p&gt;添加学生命令写完了，然后就是更新 UpdateStudentCommand 和 删除 RemoveStudentCommand 了，这里就不多说了。&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201811/1468246-20181120114515023-1865304950.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt; 这里为啥要说是安保官（就是起的名字，要是不贴切可以留言）呢，因为这是从前台 视图模型 到 领域模型 的一个屏障，这个就不用解释了，因为他就是一个验证的作用，当一个个命令执行的时候，需要对数据进行处理，就好像前线先锋部队执行一个个命令的时候，需要对一个个事件或者数据进行判断，有些错误的，假的数据是不能传达到领域模型中的，而我们的先锋官是不会处理这些的，他们只负责一个个命令的执行，验证工作就交给了Validations，而且是每一条命令都需要进行验证，这是肯定的。那如何创建基于命令的验证Validations呢，请往下看。&lt;/p&gt;
&lt;h3&gt;1、基于StudentCommand 创建抽象验证基类&lt;/h3&gt;
&lt;p&gt;在上边的领域命令中，我们定义一个公共的抽象命令基类，在验证中，FluentValidation已经为我们定义好了一个抽象基类 AbstractValidator，所以我们只需要继承它就行。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Christ3D.Domain.Validations
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 定义基于 StudentCommand 的抽象基类 StudentValidation
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 继承 抽象类 AbstractValidator
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 注意需要引用 FluentValidation
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 注意这里的 T 是命令模型
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;typeparam name=&quot;T&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;泛型类&lt;/span&gt;&lt;span&gt;&amp;lt;/typeparam&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;abstract&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; StudentValidation&amp;lt;T&amp;gt; : AbstractValidator&amp;lt;T&amp;gt; &lt;span&gt;where&lt;/span&gt;&lt;span&gt; T : StudentCommand
    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;受保护方法，验证Name&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ValidateName()
        {&lt;br/&gt;　　　　　　　&lt;span&gt;//定义规则，c 就是当前 StudentCommand 类&lt;/span&gt;
            RuleFor(c &lt;/span&gt;=&amp;gt;&lt;span&gt; c.Name)
                .NotEmpty().WithMessage(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;姓名不能为空&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)&lt;span&gt;//判断不能为空，如果为空则显示Message&lt;/span&gt;
                .Length(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;, &lt;span&gt;10&lt;/span&gt;).WithMessage(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;姓名在2~10个字符之间&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);&lt;span&gt;//定义 Name 的长度&lt;/span&gt;
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证年龄&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ValidateBirthDate()
        {
            RuleFor(c &lt;/span&gt;=&amp;gt;&lt;span&gt; c.BirthDate)
                .NotEmpty()
                .Must(HaveMinimumAge)&lt;span&gt;//Must 表示必须满足某一个条件，参数是一个bool类型的方法，更像是一个委托事件&lt;/span&gt;
                .WithMessage(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;学生应该14岁以上！&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证邮箱&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ValidateEmail()
        {
            RuleFor(c &lt;/span&gt;=&amp;gt;&lt;span&gt; c.Email)
                .NotEmpty()
                .EmailAddress();
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证手机号&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ValidatePhone()
        {
            RuleFor(c &lt;/span&gt;=&amp;gt;&lt;span&gt; c.Phone)
                .NotEmpty()
                .Must(HavePhone)
                .WithMessage(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;手机号应该为11位！&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证Guid&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ValidateId()
        {
            RuleFor(c &lt;/span&gt;=&amp;gt;&lt;span&gt; c.Id)
                .NotEqual(Guid.Empty);
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 表达式&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt;&lt;span&gt; HaveMinimumAge(DateTime birthDate)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; birthDate &amp;lt;= DateTime.Now.AddYears(-&lt;span&gt;14&lt;/span&gt;&lt;span&gt;);
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 表达式&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;bool&lt;/span&gt; HavePhone(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; phone)
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; phone.Length == &lt;span&gt;11&lt;/span&gt;&lt;span&gt;;
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 关于 FluentValidation 的使用，这里就不多说了，大家可以自己使用，基本的也就是这么多了，当然大家也可以自己写一些复杂的运算，这里要说的重点是，大家应该也已经发现了，每一个验证方法都是独立的，互不影响，就算是有一个出现错误（当然不是编译错误），也不会影响当前整个领域命令，也就等同于不影响当前事件操作，是不是和以前相比，不仅方便而且安全性更高了。&lt;/p&gt;
&lt;p&gt;这个时候我们定义了这个抽象的学生验证基类，剩下的就是需要针对不同的，每一个领域命令，设计领域验证了。&lt;/p&gt;

&lt;h3&gt;2、实现各个领域命令模型的验证操作&lt;/h3&gt;
&lt;p&gt;这里就简单说一个添加学生的命令验证，我们实现 StudentValidation&amp;lt;RegisterStudentCommand&amp;gt; ，并初始化相应的命令，这里可以看到，我们可以很自由针对某一个命令，随心随意的设计不同的验证，而且很好的进行管控，比如以后我们不要对名字控制了，我们只需要去掉这个方法。亦或者我们以后不仅支持手机号，还支持座机，这里就可以简单的增加一个即可。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Christ3D.Domain.Validations
{
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt; 添加学生命令模型验证
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 继承 StudentValidation 基类
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; RegisterStudentCommandValidation : StudentValidation&amp;lt;RegisterStudentCommand&amp;gt;&lt;span&gt;
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; RegisterStudentCommandValidation()
        {
            ValidateName();&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证姓名&lt;/span&gt;
            ValidateBirthDate();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证年龄&lt;/span&gt;
            ValidateEmail();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证邮箱&lt;/span&gt;
            ValidatePhone();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;验证手机号
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;可以自定义增加新的验证&lt;/span&gt;
&lt;span&gt;        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;说到了这里，相信你应该也命令了领域驱动的第一个小部分了，就是我们的每一个操作是如何生成命令并进行验证的，那聪明的你一定会问了，我们如何操作这些领域命令呢，总得有一个驱动程序吧，它们自己肯定是不会运行的，不错！请继续往下看。&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201811/1468246-20181120114526576-734290466.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;上边也说到了视图模型转成命令模型，然后在命令模型中进行验证，现在问题来了，到底是谁在运筹着这些命令，说人话就是，是谁在调用着这些命令，如果你能看懂我说到，那就恭喜你，如果不是很懂，也没关系，今天咱们先不说这个指挥官，今天先说说，我们平时是怎么玩儿的。&lt;/p&gt;
&lt;h3&gt;1、在 Action 中调用我们的领域命令&lt;/h3&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;[HttpPost]
[ValidateAntiForgeryToken]
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; ActionResult Create(StudentViewModel studentViewModel)
{
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
    {
        ViewBag.ErrorData &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 视图模型验证&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;ModelState.IsValid)
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View(studentViewModel);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;添加命令验证，采用构造函数方法实例&lt;/span&gt;
        RegisterStudentCommand registerStudentCommand = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; RegisterStudentCommand(studentViewModel.Name, studentViewModel.Email, studentViewModel.BirthDate, studentViewModel.Phone);
        
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;如果命令无效，证明有错误&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;registerStudentCommand.IsValid())
        {
            List&lt;/span&gt;&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; errorInfo = &lt;span&gt;new&lt;/span&gt; List&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt;&lt;span&gt;();
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;获取到错误，请思考这个Result从哪里来的 &lt;/span&gt;
            &lt;span&gt;foreach&lt;/span&gt; (&lt;span&gt;var&lt;/span&gt; error &lt;span&gt;in&lt;/span&gt;&lt;span&gt; registerStudentCommand.ValidationResult.Errors)
            {
                errorInfo.Add(error.ErrorMessage);
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;对错误进行记录，还需要抛给前台&lt;/span&gt;
            ViewBag.ErrorData =&lt;span&gt; errorInfo;
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View(studentViewModel);
        }
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 执行添加方法&lt;/span&gt;
&lt;span&gt;        _studentAppService.Register(studentViewModel);
        ViewBag.Sucesso &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Student Registered!&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View(studentViewModel);
    }
    &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e)
    {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View(e.Message);
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这个很好理解，就是普通的调用，这里有两个问题，可以有助于大家是否真正理解：&lt;/p&gt;
&lt;p&gt;1、new RegisterStudentCommand() 为什么是构造函数实例？&lt;/p&gt;
&lt;p&gt;2、ValidationResult.Errors 错误信息是从哪里得到的？&lt;/p&gt;
&lt;p&gt;如果这两个看懂了，给自己一个攒👍吧。这个时候，我们就需要把信息抛给前台了，怎么进行展示呢，这里我用的是自定义视图组件，如果你会可以快速看一遍，如果没有用过，请仔细看看。&lt;/p&gt;

&lt;h3&gt;2、自定义局部视图页面&lt;/h3&gt;
&lt;h4&gt;添加一个视图组件类&lt;/h4&gt;
&lt;p&gt; 在 Web 根目录下新建文件夹 ViewComponents，然后添加视图组件类 AlertsViewComponent.cs&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; Christ3D.UI.Web.ViewComponents
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; AlertsViewComponent : ViewComponent
    {
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; Alerts 视图组件
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 可以异步，也可以同步，注意方法名称，同步的时候是Invoke
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; 我写异步是为了为以后做准备
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; Task&amp;lt;IViewComponentResult&amp;gt;&lt;span&gt; InvokeAsync()
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; notificacoes = &lt;span&gt;await&lt;/span&gt; Task.Run(() =&amp;gt; (List&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt;&lt;span&gt;)ViewBag.ErrorData);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;遍历错误信息，赋值给 ViewData.ModelState&lt;/span&gt;
            notificacoes?.ForEach(c =&amp;gt; ViewData.ModelState.AddModelError(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;.Empty, c));
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View();
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;每一个视图组件一个类，固定写法，这个其实就像mvc的controller。那我们还需要配置 view，如何配置呢，请往下看。&lt;/p&gt;

&lt;h4&gt;设计视图页面&lt;/h4&gt;
&lt;p&gt;&lt;span&gt; 这里我是手动创建，不知道有没有快捷键，有知道的请留言哈&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;在 Views -&amp;gt; Shared 文件夹下，新建 Components\alerts\Default.cshtml 文件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
@if (ViewData.ModelState.ErrorCount &amp;gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;)
{
    &lt;/span&gt;&amp;lt;div &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;alert alert-danger&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;button type=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;close&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; data-dismiss=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;alert&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;×&amp;lt;/button&amp;gt;
        &amp;lt;h3 id=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;msgRetorno&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;Alert! Something went wrong:&amp;lt;/h3&amp;gt;
            &amp;lt;div asp-validation-summary=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ModelOnly&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;text-danger&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;&amp;lt;/div&amp;gt;
    &amp;lt;/div&amp;gt;&lt;span&gt;
}

@if (&lt;/span&gt;!&lt;span&gt;string&lt;/span&gt;&lt;span&gt;.IsNullOrEmpty(ViewBag.Sucesso))
{
    &lt;/span&gt;&amp;lt;div &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;alert alert-success&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;button type=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;close&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; data-dismiss=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;alert&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;×&amp;lt;/button&amp;gt;
        &amp;lt;h3 id=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;msgRetorno&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;@ViewBag.Sucesso&amp;lt;/h3&amp;gt;
    &amp;lt;/div&amp;gt;&lt;span&gt;
}   &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;在主页面内调用&lt;/h4&gt;
&lt;p&gt;这里有两种办法：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; @* 将经典验证摘要替换为自定义视图组件作为标记助手 *&lt;/span&gt;&lt;span&gt;&lt;span&gt;@&lt;/span&gt;

 @&lt;/span&gt;*方式一(可用，但不推荐) @await Component.InvokeAsync(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Alerts&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;)*&lt;span&gt;@

 &lt;/span&gt;&lt;span&gt;&amp;lt;!-- 如果使用这个方法，请记得在_ViewImports.cshtml 中，导入@addTagHelper&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;*, Christ3D.UI.Web&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;--&amp;gt;&lt;/span&gt;
 &amp;lt;vc:alerts /&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我个人推荐使用第二种方法，注意 alerts，是我们的视图名称。&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201811/1468246-20181120115212266-2014463884.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;如果你想了解更多关于自定义视图组件的知识，可以查看官网&lt;/p&gt;
&lt;p&gt;1、&lt;a href=&quot;https://docs.microsoft.com/zh-cn/aspnet/core/mvc/views/view-components?view=aspnetcore-2.1&quot; target=&quot;_blank&quot;&gt;https://docs.microsoft.com/zh-cn/aspnet/core/mvc/views/view-components?view=aspnetcore-2.1&lt;/a&gt;&lt;/p&gt;

&lt;h3&gt;3、浏览效果&lt;/h3&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201811/1468246-20181120115522912-138063110.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt; 这个时候，我们已经把视图模型，命令模型，命令验证等连接在一起，也实现了我们的目的，看似很正常，其实问题还有很多：&lt;/p&gt;
&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;这个指挥官真的指挥的很好么？&lt;/p&gt;
&lt;p&gt;为何contrller中还是会存在业务逻辑？&lt;/p&gt;
&lt;p&gt;等等。。。&lt;/p&gt;
&lt;/blockquote&gt;


&lt;p&gt; 眼看时间已经很晚，今天就暂时写到这里了。&lt;/p&gt;
&lt;p&gt;这个时候你一定会发现，这种异常数据的写法真的很不舒服，我们设计DDD领域驱动设计，目的就是为了要以领域为核心，把业务逻辑分离出去，这个虽然用到了领域命令，和命令验证，咋看分离出去了，但是调用的时候，还是没有把视图模型和命令模型穿起来，而且细心的你应该也发现了，我们的Service方法中，还是使用的领域模型，这个是不对的。那我们如何才能把视图模型，领域模型，验证模型和命令模型穿起来呢，又是如何很好的把获取错误信息从controller拨离出来呢，请听下回分解~&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468246/201811/1468246-20181120121035130-1421795892.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;



&lt;p&gt;&lt;a href=&quot;https://github.com/anjoy8/ChristDDD&quot; target=&quot;_blank&quot;&gt;https://github.com/anjoy8/ChristDDD&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://gitee.com/laozhangIsPhi/ChristDDD&quot; target=&quot;_blank&quot;&gt;https://gitee.com/laozhangIsPhi/ChristDDD&lt;/a&gt; &lt;/p&gt;

</description>
<pubDate>Tue, 20 Nov 2018 04:43:00 +0000</pubDate>
<dc:creator>老张的哲学</dc:creator>
<og:description>烽烟 哈喽大家周二好呀，咱们又见面了，上周末掐指一算，距离 圣诞节 只有 5 周的时间了（如果你还不知道为啥我要提圣诞节这个时间点，可以看看我的第二系列开篇《之一 ║ D3模式设计</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/laozhang-is-phi/p/9984740.html</dc:identifier>
</item>
</channel>
</rss>