<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>关于爬虫与反爬虫简略方案 - ljmatlight</title>
<link>http://www.cnblogs.com/ljmatlight/p/8275805.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ljmatlight/p/8275805.html</guid>
<description>&lt;p&gt;像安全与黑客从来都是相辅相成一样。&lt;br/&gt;爬虫与反爬虫也是在双方程序员的斗智斗勇的过程不断发展和成长的。&lt;/p&gt;

&lt;p&gt;抓包的目的： 分析出协议请求使用的数据，请求接口，参数等等。&lt;br/&gt;常用的抓包分析工具：&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;&lt;li&gt;Fiddler&lt;/li&gt;
&lt;li&gt;Charles&lt;/li&gt;
&lt;li&gt;Sniffer&lt;/li&gt;
&lt;li&gt;Wireshark&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;具体使用策略，请自行百度，Google。&lt;/p&gt;

&lt;h2 id=&quot;使用-httpclient-模拟请求&quot;&gt;使用 HttpClient 模拟请求&lt;/h2&gt;
&lt;p&gt;充分了解 HttpClient 的特性，使用方式等。&lt;br/&gt;&lt;a href=&quot;http://hc.apache.org/httpcomponents-client-4.5.x/index.html&quot;&gt;HttpClient4.5官方教程&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;user_agent-的使用&quot;&gt;user_agent 的使用&lt;/h2&gt;
&lt;p&gt;使用 user_agent 的伪装和轮换模拟不同的客户端。&lt;br/&gt;建立UserAgent池，可以通过以下地址获取一定量的UserAgent的信息。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;http://www.fynas.com/ua/search?b=Chrome&amp;amp;k=&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;代理ip的使用&quot;&gt;代理IP的使用&lt;/h2&gt;
&lt;p&gt;建立代理ip池，一般使用的免费或收费代理获取代理ip每秒都会有一定的频率限制。&lt;br/&gt;那么我们在使用的时候，就要在频率限制内建立自己内部的一些策略，&lt;br/&gt;当然这些策略建立在代理服务商的策略之上。因此设计实施时要考虑易维护性。&lt;/p&gt;
&lt;h3 id=&quot;http代理&quot;&gt;http代理&lt;/h3&gt;
&lt;p&gt;有些网站（包括APP、PC）具有一定的反爬虫能力，&lt;br/&gt;如拒绝代理ip直接请求接口:&lt;br/&gt;这是我使用代理ip请求登录接口时，某APP的响应：&lt;/p&gt;
&lt;pre class=&quot;cmd&quot;&gt;
&lt;code&gt;CONNECT refused by proxy&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;而使用socks代理则无此问题。这就不得不要了解http代理和socks代理的区别。&lt;/p&gt;
&lt;h3 id=&quot;socks代理&quot;&gt;socks代理&lt;/h3&gt;
&lt;p&gt;待续&lt;/p&gt;
&lt;h2 id=&quot;设置访问频率&quot;&gt;设置访问频率&lt;/h2&gt;
&lt;p&gt;即便是使用了代理ip，那么对目标接口的访问也要有一定的频率控制，&lt;br/&gt;防止目标服务方检测出频率过快，进行拒绝服务的响应。&lt;/p&gt;
&lt;h2 id=&quot;cookie-池失效和更新策略&quot;&gt;Cookie 池失效和更新策略&lt;/h2&gt;
&lt;p&gt;获取目标站点Cookie有效时间，&lt;br/&gt;将对应账号和Cookie存入Redis，&lt;br/&gt;起一个任务对账号Cookie进行定时检测，&lt;br/&gt;接近失效时间，进行提前更新Cookie信息，&lt;/p&gt;
&lt;p&gt;具体Cookie 池Cookie的失效和更新策略需要根据自己业务进行适当调整。&lt;/p&gt;

&lt;blockquote&gt;
&lt;ul&gt;&lt;li&gt;确保同一账号的请求使用的是同一个UserAgent、同一个代理ip。&lt;/li&gt;
&lt;li&gt;注意访问频率&lt;/li&gt;
&lt;li&gt;其他&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;总而言之，就是模拟正常的客户端发起对服务方的请求，伪装的越像正常的客户端，服务方越难分析出。&lt;/p&gt;
&lt;p&gt;只要是服务方能够提供服务，一般情况下都可以进行数据的爬取，&lt;br/&gt;只不过是难易程度不同。&lt;br/&gt;如果出于商业目的，要考虑付出的成本到底是否合适。&lt;/p&gt;
&lt;hr/&gt;</description>
<pubDate>Fri, 12 Jan 2018 07:10:00 +0000</pubDate>
<dc:creator>ljmatlight</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ljmatlight/p/8275805.html</dc:identifier>
</item>
<item>
<title>表单验证插件--formvalidation - xdxxdx</title>
<link>http://www.cnblogs.com/roy-blog/p/8275524.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/roy-blog/p/8275524.html</guid>
<description>&lt;p&gt;表单验证是一个非常基础的功能，当你的表单项少的时候，可以自己写验证，但是当你的表单有很多的时候，就需要一些验证的插件。今天介绍一款很好用的表单验证插件，formvalidation。其前身叫做bootstrapValidator.&lt;/p&gt;
&lt;p&gt;官网：&lt;a href=&quot;http://formvalidation.io/&quot; target=&quot;_blank&quot;&gt;http://formvalidation.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下载：目前的最新版本是收费的，但是我们可以下载之前的版本。下载地址：&lt;a href=&quot;http://down.htmleaf.com/1505/201505101833.zip&quot; target=&quot;_blank&quot;&gt;http://down.htmleaf.com/1505/201505101833.zip&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;下载之后，解压，整个文件夹里面除了最基本的js和css，还包含了很多实例，有兴趣的可以自己去看看。接下来简要介绍一下它的用法。&lt;/p&gt;
&lt;h3&gt;1.导入包&lt;/h3&gt;
&lt;p&gt;css:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt;
    href&lt;/span&gt;&lt;span&gt;=&quot;./static/formvalidation/vendor/bootstrap/css/bootstrap.min.css&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt;
    href&lt;/span&gt;&lt;span&gt;=&quot;./static/formvalidation/dist/css/formValidation.css&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;js:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;./static/formvalidation/vendor/jquery/jquery.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;./static/formvalidation/vendor/bootstrap/js/bootstrap.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;./static/formvalidation/dist/js/formValidation.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;./static/formvalidation/dist/js/framework/bootstrap.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;./static/formvalidation/dist/js/language/zh_CN.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;需要注意的是，即便你已经在项目中导入了&lt;span&gt;bootstrap.js，还是需要再导入上述的bootstrap.js文件，因为它和你之前导入的并不相同。&lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;2.表单&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;表单项的填写需要遵从两个原则，&lt;code class=&quot;html string&quot;&gt;表单项的class需标记为：form-control。并且提交按钮的id或者name不要设为sumbit,否则在验证之后会出现无法提交的情况，一个典型的表单如下所示。&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;form &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;thisForm&quot;&lt;/span&gt;&lt;span&gt; method&lt;/span&gt;&lt;span&gt;=&quot;post&quot;&lt;/span&gt;&lt;span&gt; action&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;hidden&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;type&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container-fluid &quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;col-xs-12&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;panel-body &quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;box box-danger box-padding&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;row row-margin&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;col-xs-8 col-xs-offset-1 tipinfo&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group-btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;button&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-danger&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;合伙人账号&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; /btn-group &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;form-control&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;partnerName&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;row row-margin&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;col-xs-8 col-xs-offset-1 tipinfo&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group-btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;button&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-danger&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;合伙人手机&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; /btn-group &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;form-control&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;phone&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;row row-margin&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;col-xs-8 col-xs-offset-1 tipinfo&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group-btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;button&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-danger&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;合伙人邮箱&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; /btn-group &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;form-control&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;email&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;row row-margin&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;col-xs-8 col-xs-offset-1 tipinfo&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group-btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;button&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-danger&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;真实名称&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; /btn-group &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;form-control&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;userName&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;row row-margin&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;col-xs-8 col-xs-offset-1 tipinfo&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;input-group-btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;button&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-danger&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;所属级别&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; /btn-group &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;select &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-control&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;市级合伙人&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;生活馆馆主&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;=&quot;3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;VIP合伙人&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;row row-margin&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;col-xs-5  col-xs-offset-5&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;button&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-default &quot;&lt;/span&gt;&lt;span&gt;
                                            onClick&lt;/span&gt;&lt;span&gt;=&quot;goback();&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;返回&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;amp;nbsp&amp;amp;nbsp&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;button&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-primary btn-danger&quot;&lt;/span&gt;&lt;span&gt;
                                            id&lt;/span&gt;&lt;span&gt;=&quot;submit1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;提交&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;3.加载验证器&lt;/h3&gt;
&lt;p&gt;在页面加载完整之后，通过如下js代码加载验证器。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;55&quot;&gt;
&lt;pre&gt;
$(&lt;span&gt;function&lt;/span&gt;&lt;span&gt;() {
 $(&lt;/span&gt;'#thisForm'&lt;span&gt;)
        .formValidation({
            message: &lt;/span&gt;'This value is not valid'&lt;span&gt;,
            icon: {
                valid: &lt;/span&gt;'glyphicon glyphicon-ok'&lt;span&gt;,
                invalid: &lt;/span&gt;'glyphicon glyphicon-remove'&lt;span&gt;,
                validating: &lt;/span&gt;'glyphicon glyphicon-refresh'&lt;span&gt;
            },
            fields: {
                partnerName: {
                    message: &lt;/span&gt;'The username is not valid'&lt;span&gt;,
                    validators: {
                        notEmpty: {
                            message: &lt;/span&gt;'不能为空'&lt;span&gt;
                        },
                        &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;stringLength: {
                            min: 6,
                            max: 30,
                            message: 'The username must be more than 6 and less than 30 characters long'
                        },&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
                        &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;remote: {
                            url: 'remote.php',
                            message: 'The username is not available'
                        },&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
                        &lt;span&gt;/*&lt;/span&gt;&lt;span&gt;regexp: {
                            regexp: /^[a-zA-Z0-9_\.]+$/,
                            message: 'The username can only consist of alphabetical, number, dot and underscore'
                        }&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
                    }
                },
                email: {
                    validators: {
                        notEmpty: {
                            message: &lt;/span&gt;'不能为空'&lt;span&gt;
                        },
                        emailAddress: {
                            message: &lt;/span&gt;'不是有效的邮箱地址'&lt;span&gt;,
                        }
                    }
                },
                phone: {
                    validators: {
                        notEmpty: {
                            message: &lt;/span&gt;'不能为空'&lt;span&gt;
                        },
                        phone:{
                             message: &lt;/span&gt;'不是合法电话'&lt;span&gt;,
                             country:&lt;/span&gt;'CN'&lt;span&gt;
                        }
              
                }
            }
          }
        });
});&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;相信很容易就可以看懂上述验证器的逻辑，就是一个封装好的json对象，以表单的name作为键，对每一个表单规定验证规则，以及验证失败后输出的message。以上列出了几种常见的验证规则，如果想要更多验证规则，可以从下载的文件中去找寻demo.&lt;/p&gt;
&lt;p&gt;这里再列出一些比较有用的验证规则，都是我从demo上面摘抄下来的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;--长度要求和正则表达式&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt;   username: {
                        message: &lt;/span&gt;'The username is not valid'&lt;span&gt;,
                        validators: {
                            notEmpty: {
                                message: &lt;/span&gt;'The username is required and can\'t be empty'&lt;span&gt;
                            },
                            stringLength: {
                                min: &lt;/span&gt;6&lt;span&gt;,
                                max: &lt;/span&gt;30&lt;span&gt;,
                                message: &lt;/span&gt;'The username must be more than 6 and less than 30 characters long'&lt;span&gt;
                            },
                            regexp: {
                                regexp: &lt;/span&gt;/^[a-zA-Z0-9_\.]+$/&lt;span&gt;,
                                message: &lt;/span&gt;'The username can only consist of alphabetical, number, dot and underscore'&lt;span&gt;
                            }
                        }
                    },&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;--email:&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; email: {
                        validators: {
                            notEmpty: {
                                message: 'The email address is required and can\'t be empty'
                            },
                            emailAddress: {
                                message: 'The input is not a valid email address'
                            }
                        }
                    },&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;--电话&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;      phone: {
                    validators: {
                        notEmpty: {
                            message: '不能为空'
                        },
                        phone:{
                             message: '不是合法电话',
                             country:'CN'
                        }
              
                }
            }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;--网站&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt; website: {
                        validators: {
                            uri: {
                                message: 'The input is not a valid URL'
                            }
                        }
                    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;--邮编&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  zipCode: {
                        validators: {
                            zipCode: {
                                country: 'CN',//中国邮编
                                message: 'The input is not a valid US zip code'
                            }
                        }
                    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;--密码及确认&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;      password: {
                        validators: {
                            notEmpty: {
                                message: 'The password is required and can\'t be empty'
                            }
                        }
                    },
                    confirmPassword: {
                        validators: {
                            notEmpty: {
                                message: 'The confirm password is required and can\'t be empty'
                            },
                            identical: {
                                field: 'password',
                                message: 'The password and its confirm are not the same'
                            }
                        }
                    },&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;--远程调用&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  username: {
                        message: 'The username is not valid',
                        validators: {
                            notEmpty: {
                                message: 'The username is required and can\'t be empty'
                            },
                            remote: {
                                type: 'POST',
                                url: 'remote.php',
                                message: 'The username is not available',
                                //delay: 1000
                            }
                        }
                    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;关于远程调用就是需要去访问服务端的接口，来验证输入的表单是否有效，经常出现的场景是我们需要验证一个用户名是否已经被注册过了。&lt;/p&gt;
&lt;h3&gt;4.提交表单时候手动调用验证&lt;/h3&gt;
&lt;p&gt;一般情况下，当我们提交表单的时候，需要手动调用验证，可以用如下代码来实现。针对上述表单。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
    $(&quot;#submit1&quot;).click(&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
       &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; $form = $(&quot;#thisForm&quot;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Get the FormValidation instance&lt;/span&gt;
           &lt;span&gt;var&lt;/span&gt; bv = $form.data('formValidation'&lt;span&gt;);
            bv.validate();&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;手动调用验证&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(bv.isValid()){
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里就可以执行ajax提交表单的操作了&lt;/span&gt;
&lt;span&gt;             }
    });    &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;怎么样，就是这么简单。我们来看看效果吧。当然提示错误的语言和一些标签的样式你可以自己去修改。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/998564/201801/998564-20180112141643066-1001966151.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/998564/201801/998564-20180112141753816-264657077.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 总的来说，这还是一款比较容易上手的验证器，有需要的朋友可以尝试一下。&lt;/p&gt;

</description>
<pubDate>Fri, 12 Jan 2018 06:20:00 +0000</pubDate>
<dc:creator>xdxxdx</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/roy-blog/p/8275524.html</dc:identifier>
</item>
<item>
<title>阿里安全资深专家杭特辣评中国网络安全人才之“怪现状” - 阿里聚安全</title>
<link>http://www.cnblogs.com/alisecurity/p/8275477.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/alisecurity/p/8275477.html</guid>
<description>&lt;p&gt;&lt;span data-spm-anchor-id=&quot;a313e.7916648.0.i0.6cc40f86Oy9fuG&quot;&gt;随着网络空间成为第五空间、社会基础产业全面互联网化，网络安全（或称广义的信息安全）面临的威胁越来越大，对网络安全的人才需求也呈现出井喷趋势。即使目前很多人可以自学成才，“网络空间安全”也成为一级学科，但根据《第十一届网络空间安全学科专业建设与人才培养研讨会》得出的结论，“我国网络空间安全人才年培养规模在3万人左右，已培养的信息安全专业人才总量不足10万，离目前需要的70万差距巨大。”缺口不小，但目前安全人才的历史存量和每年的增量，其结构是不是合理，是否反映了产业的需求呢？&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://epo.alicdn.com/image/46jv7hd3fuk0.jpg&quot; alt=&quot;&quot; width=&quot;650&quot; height=&quot;383&quot;/&gt;&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt;&lt;strong&gt;阿里安全资深专家杭特&lt;/strong&gt;&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt; &lt;/p&gt;
&lt;p&gt;阿里安全资深专家杭特在安全行业从业十余年，甲方和乙方公司都有经历。他认为，相对于欧美等发达国家，国内人才培养在结构和技能方面，有几个“怪现状”。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://epo.alicdn.com/image/46jv7jc80310.png&quot; alt=&quot;&quot; width=&quot;950&quot; height=&quot;425&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;&lt;strong&gt;重视“攻”， 轻视“防”&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;攻防就如同硬币的两面，哪一方面都不可或缺，因此才出现了“以攻促防”，“未知攻，焉知防”之类的金句。但现实往往不尽如人意，这些金句实际上也只做到了前面一半，后一半则明显薄弱，最终成了“虎头蛇尾”，“强弩之末”。现在安全人才在总数不够的前提下，防守人才更是极其匮乏，比例严重失调。表现形式很多：&lt;/p&gt;
&lt;p&gt;情形1、对于搞Web漏洞和渗透的人，八成以上不知道怎么搞SDL；&lt;/p&gt;
&lt;p&gt;情形2、技术类的文章，大部分都是攻击挖洞类的文章，至于防护方案，通常只有短短几句，“已将问题提交厂商”、“不要使用弱口令”、“及时更新系统”等等；&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://epo.alicdn.com/image/46jv7m76j5d0.png&quot; alt=&quot;&quot; width=&quot;950&quot; height=&quot;916&quot;/&gt;&lt;/p&gt;

&lt;p&gt;情形3、一个个基础系统被攻破，2G有伪基站、4G也能被降级劫持、Wi-Fi不可靠、蓝牙不安全，操作系统天天打补丁还能被控制。安全Geek们无所不能的同时，也得保护好自己，把自己武装到了牙齿，“我小心故我安全”，但想做到独善其身很难，你的爹妈和亲戚朋友可咋办？别说那些高大上的，密码太多记不住，这么现实的问题，让岁数大的人怎么解？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;小结&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;攻击技术很重要，相关人才也要占领高地，高价值漏洞这样的战略武器一定要有，但这绝不是网络安全的全部。打个比方，相对于目前多方都有“NUKE”（核武器）的现状，造十枚还是百枚核弹并没有区别，反而是类似于美国的TMD（战区导弹防御系统）更显重要。我们有如此多的系统需要建长城来守卫，期待更多防守人才的出现和贡献。&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;重视“攻防”， 轻视“数据”&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;大部分业界从业者认为，安全就是Security，但实际上对应的英文单词有两个，我们先来区别一下（根据NIST CPS Framework的定义）。&lt;/p&gt;
&lt;p&gt;Safety：确保生命、健康、财产、权益人数据及物理环境等方面不存在灾难性后果；&lt;/p&gt;
&lt;p&gt;Security：内外部的保护，以避免无意或者未授权的访问、改变、破坏或使用。&lt;/p&gt;
&lt;p&gt;之前网络安全大部分都属于Security的范畴，但随着IoT和ICS 的出现，动动鼠标也能物理危害人身安全，从而扩展到了Safety的领域。 由于Safety更注重能影响物理世界的安全，因此作为争夺“EIP”控制权的“攻防”是最为重要的；而Security要重点保护的，其实是“数据”的控制权。&lt;/p&gt;
&lt;p&gt;可惜的是，绝大多数的安全人才都把精力放在“攻防”上，认为只要拿到控制权，就能拿到数据，但事实真的如此？举个反例，不考虑物理攻击，现在iOS的指纹数据貌似还没有人能拿到，即使能完美越狱又如何呢？在这里笔者再引申两个问题，供大家可以思考：&lt;/p&gt;
&lt;p&gt;问题1、不借助硬件，有哪些领域的数据安全需求是和漏洞一点关系都没有的？&lt;/p&gt;
&lt;p&gt;问题2、不考虑可用性问题，一个系统给你root/admin就真的非常可怕？&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;小结&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;安全要搞清楚保护的对象是什么，而这些对象也随着产业发展不断变化。“EIP”控制权的争夺应该更多的面向与物理世界相连的设备，而其它的场景，则应该重点关注“数据”的控制权。数据已经成为DT时代的石油，是产生价值的新能源，如果还是用传统的漏洞思维来谈数据安全，是肯定做不好的，密码学久违的春天已经到了。&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;重视“单点、破坏”， 轻视“体系、建设”&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;安全有一个著名的木桶理论，“系统安全性的整体水位与最脆弱的组件水位相同”，绝大多数的人都在“集中优势兵力，从系统最薄弱的地方突破”，可是破坏容易建设难。当要保护的对象足够多、足够复杂，如何能成体系地进行安全建设，如何能将安全威胁收敛到可控的程度，是一件非常有挑战的事情，下面列举几个：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;反入侵&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;对于所有的企业，这都是个令人头疼的挑战。有句笑话，“世界上只有两种企业，一种是知道自己被入侵的，一种是不知道自己被入侵的”。反入侵需要非常体系化的架构来控制风险。很多企业借助众筹或蓝军模拟渗透找到某些脆弱点并完成修复，认为这样就能高枕无忧，这种做法只是暴漏了很小的风险，连标都没治，更别说本了。实际上SDL只是标配，WAF、RASP、各种监控、各种数据、各种算法，安全建设的任务艰巨……&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;供应链安全&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;前几年APT热火朝天，各种0day满天飞，门槛也快速提升，攻防双方的日子都不好过。东边不亮西边亮，随着XCodeGhost的爆发，xshell、CCleaner、pip、nodejs接连中招，原来还可以这么玩？目前发现的例子都是事后，还有多少掩藏在冰山之下？目前还没有特别有效的防护方案，要么太重型，要么太晚，面对连规则都没有的目标，希望渺茫。试问有哪个企业和组织可以置身事外？别以为有源码就安全了，pip和nodejs都是源码，更别说还有算法级后门了。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;防止钓鱼&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;安全培训天天讲，可是社工这一关很多人就是过不了。别看对手low，效果还异常的好，毕竟明枪易躲，暗箭难防。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;小结&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;安全本不是平等的对抗，打开恶魔的盒子不那么难，但灾后重建却异常艰难。相对于“千里之堤，溃于蚁穴”的蚂蚁，业界更需要的是为生态授粉、创造自然奇迹的蜜蜂。&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;重视“技术”， 轻视“业务”&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;安全是个技术对抗非常激烈的领域，但这并不代表技术高超就能把基本问题解决的很好，黑灰产对抗就是个非常好的例子。作为一个产业，现在的黑灰产已经形成了一个完整的链条，每个环节都有大量的从业者各司其职。相比较那些神奇的0day，除了极个别情况，黑灰产使用的技术都是相对基础的。即使如此仍然有大量网站被简单的注入或者弱口令攻破，无数个人信息都在地下黑市被贩卖，如果没有徐玉玉案件引起国家重拳，现在的情况可能更为糟糕。商业上的薅羊毛也让众多电商网站承受资损并搅乱了市场公平，但行业里相关的人才却很稀缺。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt; &lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;小结&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;有数据表明，黑灰产的市场规模已经和网络安全市场的规模相当，都是千亿规模。整个业界的技术支持配比是否应该向1：1努力？&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;重视“反向能力”， 轻视“正向能力”&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;很多人都是从渗透、逆向、分析漏洞入门的，其实这些都是反向能力，如果要达到相反的目标，也就是防止渗透、防止逆向、设计没有漏洞的系统，一种是“反反向能力”，一种是“正向能力”，两者并不相同。其实这个和汽车工业有些类似，早期自主品牌造车都是逆向起家，买辆样车大卸八块，试图造出差不多的产品，吃夹生饭的结果就是动力、油耗、安全性都与原型相去甚远。下面再举几个例子。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;逆向与混淆&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;逆向是二进制安全的基础，但对于很多公司来说，防止产品被逆向进而保护知识产权，是个硬需求。业界目前采用的常见手段就是花指令、防调试、执行流混淆、普通壳、虚拟机壳、白盒密码。除了白盒密码，其它的都属于“反反向能力”，虽然在现实场景中大量应用，但首次分析和二次分析的强度及有效度无法用数字来度量，虚拟机壳效果好一些，但通俗点讲就是对小白很难，但对专家不难。白盒密码属于“正向能力”的初级阶段，强度至少可以通过数量级（比如2^40）来衡量，但不幸的是，目前最好的白盒密码也撑不过28天（参考CCS 2017白盒挑战赛的结论）！美国已经开始高级阶段，至少10万美金的挑战赛还没人成功，东西方差距明显。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;可靠软件&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;如果要开发一个功能，并确保安全可靠，很多人意识里就那么几招，功能测试、覆盖率测试、黑盒fuzz、白盒代码扫描，技术高级点的再加上个符号执行，这些也都偏“反反向能力”，因为这些测试全通过了，也不代表是安全的。有些人可能会说“本来就没有绝对的安全”，但这些测试本质上并没有说明哪些是应该的、哪些是不应该的。而“正向能力”就是要解决这些问题，这也就是为什么别人有信心造出“无法劫持的无人机”、“功能实现正常的加解密算法和协议”。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chrome&lt;/strong&gt;&lt;strong&gt;与&lt;/strong&gt;&lt;strong&gt;NaCl&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;如果要在浏览器上运行第三方插件，对性能要求高，必须得跑x86机器码，但如何保护安全性呢？“反方向能力”基本就是inline hook、调试器监控异常、DBI、虚拟机执行，属于哪里有问题就去堵哪里的策略；“正向能力”就如同NaCl这种，确保生成的代码必须符合规范，并利用x86的体系架构，在加载的时候，只要通过验证就能确保安全性，其强度远超虚拟机。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;小结&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;精通反向能力，未必能做好正向能力。国内的反向能力与世界水平相当，但正向能力却实打实的低下，我们也应该开始重视正规军的建设了。&lt;/p&gt;

&lt;h2&gt;&lt;strong&gt;重视“人肉”， 轻视“自动化”&lt;/strong&gt;&lt;/h2&gt;
&lt;p&gt;虽说安全的本质是人性的斗争，人的因素不可或缺，但目前大量的工作都是低级重复性的。比如漏洞分析和逆向，除了少数特别复杂和高深的对象，大部分就是纯体力劳动，以下的场景很普遍。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://epo.alicdn.com/image/46jv7qo852e0.png&quot; alt=&quot;&quot; width=&quot;950&quot; height=&quot;587&quot;/&gt;&lt;/p&gt;
&lt;p align=&quot;center&quot;&gt; &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;小结&lt;/strong&gt;&lt;strong&gt;：&lt;/strong&gt;对于企业，如何才能让安全从业者从繁重的分析中解脱出来，更多的聚焦更有价值和挑战性的工作？如何能将部分能力沉淀到平台而不强烈依赖个体，进而更好的规模化、易用化？&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;总结&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;网络安全产业就像一个江湖，各色人等聚集。相对于欧美国家基础扎实（懂加密、会防护、能挖洞、擅工程）的众多名门正派，我国的人才更多的属于旁门左道（很多白帽子可能会不服气），因此在未来的人才培养和建设上，需要调整结构，鼓励更多的人去做“正向”的、结合“业务”与“数据”、“自动化”的“体系、建设”，才能解人才之渴，真正的为社会全面互联网化提供安全保障。&lt;/p&gt;
</description>
<pubDate>Fri, 12 Jan 2018 06:13:00 +0000</pubDate>
<dc:creator>阿里聚安全</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/alisecurity/p/8275477.html</dc:identifier>
</item>
<item>
<title>摸索出来的chrom调试前后台数据(Java&amp;&amp;Ajax)交互的方法分享一下咯！！！ - 别先生</title>
<link>http://www.cnblogs.com/biehongli/p/8275026.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/biehongli/p/8275026.html</guid>
<description>&lt;p&gt;&lt;span&gt;1：开始没想分享的，后来看到有大佬分享如何使用Chrom的工具进行调试，哈哈哈哼，我就借着他的博客写一下我摸索的如何进行前后台数据交互吧（注：反正是自己瞎　　捣鼓出来的，也许适合我，and我脑补一下吧，日后忘记了还可以看看，如果不适合看到的各位的话，请绕行，勿喷，谢谢）：那位大佬的博客&lt;span&gt;链接&lt;/span&gt;（拉到最下面可以看到他的系列链接，哈哈哈哼）：&lt;a href=&quot;http://www.cnblogs.com/st-leslie/p/8196493.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/st-leslie/p/8196493.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2：当数据传到你的控制层，然后传到了前台，这个时候是个人就想着进行解析数据，但是你传过来的数据格式是什么样子的，解析方式千变万化，所以这个时候使用Chrom工具进行调试，比海量百度强很多（因为如果没有那位好心的大佬贴出来自己源码的话，哈哈哈，你搜不到啊）：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3：第一种，我控制层传过来的是如此数据格式的，如下所示：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　后台打印如下所示，这个时候我想传给前台Json格式的，你可以去Json在线验证一下是否是Json格式的哦，如何转换Json就不贴了吧，百度一搜还真是一大推，而且之前也贴过了，这里主要讲如何进行Chrom调试吧：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;84&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; JSON格式的数据:{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:[{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;1000&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;24&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;56.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;计算机类别&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Storm&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;300&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;23&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hadoop&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;500&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;22&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;250&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;21&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;C++&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;100&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;陈先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;20&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Java&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;}]}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;4：传到前台打印一下，是这个B样子的：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1002211/201801/1002211-20180112130926269-442797817.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;5：然后呢，需要对数据进行解析，如果你不知道怎么解析值，百度或者自己调试，我是这么调试的：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;在Ajax返回回来的地方打了一个断点，然后呢，我这里是一刷新页面就卡在这里了，等你进行下一步或者调试操作：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1002211/201801/1002211-20180112131217972-1140222256.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;6：然后呢，切换到控制台Console，因为我返回的是结果名称是result，你在控制台直接打res，会自动提示的，然后按table键弹出来你想要的；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1002211/201801/1002211-20180112131447910-227328827.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;7：然后呢，你点.  一下（注意是.哦），然后会弹出你想要的，比如我的list，是不是有点明白我在讲什么了，哈哈哈哼。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;我这里是根据result.list，然后再根据自己写的获取json字符串格式长度（获取json格式字符串长度的方法百度一下很多的哦）；&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1002211/201801/1002211-20180112131705347-1809512756.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;获取到的json格式字符串长度如下所示：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1002211/201801/1002211-20180112132048722-747267159.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;8：重点就是如何解析自己的json格式字符串了，如下所示（需要注意的是.以后是Tab键不是Enter键，我都是手欠，哈哈哈哼，翻看上一条指令是上箭头）：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;如下所示就解析出来，你该以何种格式来解析自己的Json字符串了，不知道有没有小伙伴听清楚了：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1002211/201801/1002211-20180112132225691-2091565527.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;9：为了避免有的小伙伴，说，我靠，你说的啥，我再演示另一种，自己摸索的B玩意，总之吧，希望帮助到看到的小伙伴：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;这次数据格式是这样的，去Json在线解析，是正确的Json格式的（由于没有贴代码，如果你后台传到前台的数据格式不一样，前台解析就出现差异，但是万变不离其宗，这里只说了方法，没有贴代码，还请看到的小伙伴见谅）。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;84&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; JSON格式的数据:[{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;24&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Storm&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;56.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;计算机类别&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;1000&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;23&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hadoop&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;300&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;22&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;C&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;500&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;21&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;C++&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;别先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;250&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;},{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;20&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Java&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookAuthor&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;陈先生&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPrice&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;25.0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;数学类&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookPublish&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;科学出版社&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSum&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;100&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookMark&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortId&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bookSortName&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;:&lt;span&gt;null&lt;/span&gt;}]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1002211/201801/1002211-20180112135713301-545959117.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;这里就说这两种吧，总之，自己多摸索，万变不离其宗，哈哈哈哼，在大佬面前卖弄了，好久没主动发到博客园首页了，今天发一次吧，争取不被一分钟从博客园撤掉，哈哈哈哼（之前见大佬，说发布到博客园首页的博客被撤，愤愤不平，还专一写博对博客园，哈哈哈哼，我感觉自己写博客，也算是一种修身养性，我是不计较这些，自己写的被看到不被看到，自己提升才重要，对那些想打广告的，也许只想着曝光率吧，哈哈哈哼。2017年过去了，看了不少写总结的，看到大佬们，羞愧难当。我是没东西写，这里希冀一下吧，希望自己本命年，可以&lt;span&gt;红红火火&lt;/span&gt;，兜里多进毛爷爷吧。也希冀看到此篇博客的小伙伴2018&lt;span&gt;红红火火&lt;/span&gt;，兜里也多进毛爷爷，技术更上一层楼，哈哈哈哼，没看到的小伙伴就不祝福了哈）。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;停更......&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 12 Jan 2018 06:06:00 +0000</pubDate>
<dc:creator>别先生</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/biehongli/p/8275026.html</dc:identifier>
</item>
<item>
<title>NanUI文档  - 如何实现C#与Javascript的相互通信 - 林选臣</title>
<link>http://www.cnblogs.com/linxuanchen/p/NanUI-Examples-04-Communicate-Between-CSharp-And-JS.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/linxuanchen/p/NanUI-Examples-04-Communicate-Between-CSharp-And-JS.html</guid>
<description>&lt;p&gt;&lt;strong&gt;NanUI文档目录&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;通过之前的文章，相信您已经对NanUI有了初步的了解。但到目前为止，我们使用NanUI仅仅只是作为呈现HTML界面的容器，并未涉及CEF与C#间数据的交互。那么本文将简单介绍如何在NanUI中使用C#调用Javascript的函数以及如何在Javascript注入C#的对象、属性和方法。&lt;/p&gt;
&lt;h2 id=&quot;c调用javascript函数&quot;&gt;C#调用Javascript函数&lt;/h2&gt;
&lt;h3 id=&quot;不需要获取返回值的情况&quot;&gt;不需要获取返回值的情况&lt;/h3&gt;
&lt;p&gt;假设页面中有如下Javascript的函数&lt;strong&gt;sayHello&lt;/strong&gt;，它的作用是在DOM中创建一个包含有“Hello NanUI!”字样的p元素。&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode js&quot;&gt;
&lt;code class=&quot;sourceCode javascript&quot;&gt;&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;sayHello&lt;/span&gt;() &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt; p &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;createElement&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;p&quot;&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;va&quot;&gt;p&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;innerText&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;Hello NanUI!&quot;&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kw&quot;&gt;var&lt;/span&gt; container &lt;span class=&quot;op&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;va&quot;&gt;document&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;getElementById&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;hello-container&quot;&lt;/span&gt;)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;va&quot;&gt;container&lt;/span&gt;.&lt;span class=&quot;at&quot;&gt;appendChild&lt;/span&gt;(p)&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;示例中，该函数并没有在Javascript环境里调用，而是在页面加载完成后使用NanUI的&lt;strong&gt;ExecuteJavascript&lt;/strong&gt;方法来调用它。&lt;strong&gt;ExecuteJavascript&lt;/strong&gt;方法执行的返回结果为一个bool类型，它指示了这次有没有成功执行。&lt;/p&gt;
&lt;p&gt;在窗体的构造函数中，通过注册Formium的LoadHandler中的OnLoadEnd事件来监测页面加载完成的情况，并在页面加载成功后调用JS环境中的函数sayHello。&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;namespace CommunicateBetweenJsAndCSharp
{
    using NetDimension.NanUI;
    public partial class Form1 : Formium
    {
        public Form1()
            : base(&quot;http://res.app.local/www/index.html&quot;,false)
        {
            InitializeComponent();

            LoadHandler.OnLoadEnd += LoadHandler_OnLoadEnd;
        }

        private void LoadHandler_OnLoadEnd(object sender, Chromium.Event.CfxOnLoadEndEventArgs e)
        {
            // Check if it is the main frame when page has loaded.
            if(e.Frame.IsMain)
            {
                ExecuteJavascript(&quot;sayHello()&quot;);
            }
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;运行后，可以看到界面中显示了“Hello NanUI!”字样，说明使用ExecuteJavascript能够调用JS函数。&lt;/p&gt;
&lt;hr/&gt;&lt;h3 id=&quot;需要获取返回值的情况&quot;&gt;需要获取返回值的情况&lt;/h3&gt;
&lt;p&gt;上面的例子中通过&lt;strong&gt;ExecuteJavascript&lt;/strong&gt;方法来成功调用了JS环境中的函数。但不难发现，这种调用方式C#是没有接收到任何返回值的。但实际的项目里，我们是需要从JS环境获取到返回值的，这时候使用&lt;strong&gt;ExecuteJavascript&lt;/strong&gt;将不能满足需求，使用另外一个方法&lt;strong&gt;EvaluateJavascript&lt;/strong&gt;可以帮助我们从JS环境中获得JS函数的返回值。&lt;/p&gt;
&lt;p&gt;假如有另外一个Javascript函数&lt;strong&gt;sayHelloToSomeone&lt;/strong&gt;，它能接收一个字符传参数，在函数体中拼接并返回拼接后的字符串。&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode js&quot;&gt;
&lt;code class=&quot;sourceCode javascript&quot;&gt;&lt;span class=&quot;kw&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;at&quot;&gt;sayHelloToSomeone&lt;/span&gt;(who) &lt;span class=&quot;op&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;cf&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;Hello &quot;&lt;/span&gt; &lt;span class=&quot;op&quot;&gt;+&lt;/span&gt; who &lt;span class=&quot;op&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;st&quot;&gt;&quot;!&quot;&lt;/span&gt;&lt;span class=&quot;op&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;op&quot;&gt;}&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;同样的，在上面例子LoadHandler的OnLoadEnd事件中我们来执行&lt;strong&gt;sayHelloToSomeone&lt;/strong&gt;，并通过C#传递参数并获取拼接后的返回值。&lt;strong&gt;EvaluateJavascript&lt;/strong&gt;方法通过一个回调Action来获取JS环境中的返回值。这个Action有两个参数，第一个是返回值的集合，第二个是JS环境的异常对象，如果函数正确执行，那么第二个参数为&lt;em&gt;null&lt;/em&gt;。&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;namespace CommunicateBetweenJsAndCSharp
{
    using NetDimension.NanUI;
    public partial class Form1 : Formium
    {
        public Form1()
            : base(&quot;http://res.app.local/www/index.html&quot;,false)
        {
            InitializeComponent();

            LoadHandler.OnLoadEnd += LoadHandler_OnLoadEnd;
        }

        private void LoadHandler_OnLoadEnd(object sender, Chromium.Event.CfxOnLoadEndEventArgs e)
        {
            // Check if it is the main frame when page has loaded.
            if(e.Frame.IsMain)
            {
                EvaluateJavascript(&quot;sayHelloToSomeone('C#')&quot;, (value, exception) =&amp;gt;
                {
                    if(value.IsString)
                    {
                        // Get value from Javascript.
                        var jsValue = value.StringValue;

                        MessageBox.Show(jsValue);
                    }
                });
            }
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在上面的示例中，通过我们可以明确知道JS函数&lt;strong&gt;sayHelloToSomeone&lt;/strong&gt;的返回值一定为String类型，因此在C#的回调中直接使用Value的StringValue属性来获取JS函数的字符传返回值。但在实际的应用中，有可能并不完全知道返回值的类型，因此需要使用Value中内置的各个判断属性来逐一筛选返回值。&lt;/p&gt;
&lt;p&gt;需要注意的是，Value的类是是ChromiumFX中的&lt;strong&gt;CfrV8Value&lt;/strong&gt;类型，它是一个非常&lt;strong&gt;重要&lt;/strong&gt;的类型，基本上所有在C#与CEF间的通信都是由这个类型来完成的。&lt;/p&gt;
&lt;hr/&gt;&lt;h2 id=&quot;javascript调用c对象及方法&quot;&gt;Javascript调用C#对象及方法&lt;/h2&gt;
&lt;h3 id=&quot;简单的应用示例&quot;&gt;简单的应用示例&lt;/h3&gt;
&lt;p&gt;上面的文章中演示了如何用C#来调用Javascript中的函数，那么下面的内容将介绍如何使用Javascript来调用C#中的对象、属性和各种方法。&lt;/p&gt;
&lt;p&gt;在此之前，需要介绍NanUI窗体基类&lt;strong&gt;Formium&lt;/strong&gt;中的重要属性&lt;strong&gt;GlobalObject&lt;/strong&gt;，您可以把他理解成Javascript环境中的&lt;strong&gt;window&lt;/strong&gt;对象。如果您需要在Javascript环境下使用C#中的各种对象、属性和方法，都需要将这些对象、属性、方法注册到&lt;strong&gt;GlobalObject&lt;/strong&gt;里。&lt;/p&gt;
&lt;p&gt;下面的例子，通过在Form1的构造函数中注册一个名为&lt;strong&gt;my&lt;/strong&gt;的JS对象，并在&lt;strong&gt;my&lt;/strong&gt;内置一个只读属性&lt;strong&gt;name&lt;/strong&gt;，以及&lt;strong&gt;showCSharpMessageBox&lt;/strong&gt;、&lt;strong&gt;getArrayFromCSharp&lt;/strong&gt;、&lt;strong&gt;getObjectFromCSharp&lt;/strong&gt;三个函数。&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;//register the &quot;my&quot; object
var myObject = GlobalObject.AddObject(&quot;my&quot;);

//add property &quot;name&quot; to my, you should implemnt the getter/setter of name property by using PropertyGet/PropertySet events.
var nameProp = myObject.AddDynamicProperty(&quot;name&quot;);
nameProp.PropertyGet += (prop, args) =&amp;gt;
{
    // getter - if js code &quot;my.name&quot; executes, it'll get the string &quot;NanUI&quot;. 
    args.Retval = CfrV8Value.CreateString(&quot;NanUI&quot;);
    args.SetReturnValue(true);
};
nameProp.PropertySet += (prop, args) =&amp;gt;
{
    // setter's value from js context, here we do nothing, so it will store or igrone by your mind.
    var value = args.Value;
    args.SetReturnValue(true);
};


//add a function showCSharpMessageBox
var showMessageBoxFunc = myObject.AddFunction(&quot;showCSharpMessageBox&quot;);
showMessageBoxFunc.Execute += (func, args) =&amp;gt;
{
    //it will be raised by js code &quot;my.showCSharpMessageBox(`some text`)&quot; executed.
    //get the first string argument in Arguments, it pass by js function.
    var stringArgument = args.Arguments.FirstOrDefault(p =&amp;gt; p.IsString);

    if (stringArgument != null)
    {
        MessageBox.Show(this, stringArgument.StringValue, &quot;C# Messagebox&quot;, MessageBoxButtons.OK, MessageBoxIcon.Information);

        
    }
};

//add a function getArrayFromCSharp, this function has an argument, it will combind C# string array with js array and return to js context.
var friends = new string[] { &quot;Mr.JSON&quot;, &quot;Mr.Lee&quot;, &quot;Mr.BONG&quot; };

var getArrayFromCSFunc = myObject.AddFunction(&quot;getArrayFromCSharp&quot;);

getArrayFromCSFunc.Execute += (func, args) =&amp;gt;
{
    var jsArray = args.Arguments.FirstOrDefault(p =&amp;gt; p.IsArray);



    if (jsArray == null)
    {
        jsArray = CfrV8Value.CreateArray(friends.Length);
        for (int i = 0; i &amp;lt; friends.Length; i++)
        {
            jsArray.SetValue(i, CfrV8Value.CreateString(friends[i]));
        }
    }
    else
    {
        var newArray = CfrV8Value.CreateArray(jsArray.ArrayLength + friends.Length);

        for (int i = 0; i &amp;lt; jsArray.ArrayLength; i++)
        {
            newArray.SetValue(i, jsArray.GetValue(i));
        }

        var jsArrayLength = jsArray.ArrayLength;

        for (int i = 0; i &amp;lt; friends.Length; i++)
        {
            newArray.SetValue(i + jsArrayLength, CfrV8Value.CreateString(friends[i]));
        }


        jsArray = newArray;
    }


    //return the array to js context

    args.SetReturnValue(jsArray);

    //in js context, use code &quot;my.getArrayFromCSharp()&quot; will get an array like [&quot;Mr.JSON&quot;, &quot;Mr.Lee&quot;, &quot;Mr.BONG&quot;]
};

//add a function getObjectFromCSharp, this function has no arguments, but it will return a Object to js context.
var getObjectFormCSFunc = myObject.AddFunction(&quot;getObjectFromCSharp&quot;);
getObjectFormCSFunc.Execute += (func, args) =&amp;gt;
{
    //create the CfrV8Value object and the accssor of this Object.
    var jsObjectAccessor = new CfrV8Accessor();
    var jsObject = CfrV8Value.CreateObject(jsObjectAccessor);

    //create a CfrV8Value array
    var jsArray = CfrV8Value.CreateArray(friends.Length);

    for (int i = 0; i &amp;lt; friends.Length; i++)
    {
        jsArray.SetValue(i, CfrV8Value.CreateString(friends[i]));
    }

    jsObject.SetValue(&quot;libName&quot;, CfrV8Value.CreateString(&quot;NanUI&quot;), CfxV8PropertyAttribute.ReadOnly);
    jsObject.SetValue(&quot;friends&quot;, jsArray, CfxV8PropertyAttribute.DontDelete);


    args.SetReturnValue(jsObject);

    //in js context, use code &quot;my.getObjectFromCSharp()&quot; will get an object like { friends:[&quot;Mr.JSON&quot;, &quot;Mr.Lee&quot;, &quot;Mr.BONG&quot;], libName:&quot;NanUI&quot; }
};&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;运行项目打开CEF的DevTools窗口，在Console中输入&lt;strong&gt;my&lt;/strong&gt;，就能看到&lt;strong&gt;my&lt;/strong&gt;对象的详细信息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://img.blog.csdn.net/20180112105900765&quot; alt=&quot;这里写图片描述&quot;/&gt;&lt;/p&gt;
&lt;p&gt;执行&lt;strong&gt;my.showCSharpMessageBox(&quot;SOME TEXT FROM JS&quot;)&lt;/strong&gt;命令，将调用C#的MessageBox来现实JS函数中提供的“SOME TEXT FROM JS”字样。&lt;/p&gt;
&lt;p&gt;执行&lt;strong&gt;my.getArrayFromCSharp()&lt;/strong&gt;能够从C#中取到我们内置的字符串数组中的三个字符串。如果在函数中指定了一个数组作为参数，那么指定的这个数组将和C#的字符串数组合并。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;gt; my.getArrayFromCSharp()
[&quot;Mr.JSON&quot;, &quot;Mr.Lee&quot;, &quot;Mr.BONG&quot;]

&amp;gt; my.getArrayFromCSharp([&quot;Js_Bison&quot;, &quot;Js_Dick&quot;])
[&quot;Js_Bison&quot;, &quot;Js_Dick&quot;, &quot;Mr.JSON&quot;, &quot;Mr.Lee&quot;, &quot;Mr.BONG&quot;]&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;执行&lt;strong&gt;my.getObjectFromCSharp()&lt;/strong&gt;能够从C#返回我们拼装的对象，该对象有一个字符型的&lt;strong&gt;libName&lt;/strong&gt;属性，以及一个字符串数组&lt;strong&gt;friends&lt;/strong&gt;。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;gt; my.getObjectFromCSharp()
Object {libName: &quot;NanUI&quot;, friends: Array(3)}&lt;/code&gt;
&lt;/pre&gt;
&lt;hr/&gt;&lt;h3 id=&quot;回调函数&quot;&gt;回调函数&lt;/h3&gt;
&lt;p&gt;回调函数是Javascript里面重要和常用的功能，如果您在JS环境中注册的方法具有函数型的参数（即回调函数），通过Execute事件的Arguments可以获得回调的function，并使用CfrV8Value的&lt;strong&gt;ExecuteFunction&lt;/strong&gt;来执行回调。&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;//add a function with callback function

var callbackTestFunc = GlobalObject.AddFunction(&quot;callbackTest&quot;);
callbackTestFunc.Execute += (func,args)=&amp;gt; {
    var callback = args.Arguments.FirstOrDefault(p =&amp;gt; p.IsFunction);
    if(callback != null)
    {
        var callbackArgs = CfrV8Value.CreateObject(new CfrV8Accessor());
        callbackArgs.SetValue(&quot;success&quot;, CfrV8Value.CreateBool(true), CfxV8PropertyAttribute.ReadOnly);
        callbackArgs.SetValue(&quot;text&quot;, CfrV8Value.CreateString(&quot;Message from C#&quot;), CfxV8PropertyAttribute.ReadOnly);

        callback.ExecuteFunction(null, new CfrV8Value[] { callbackArgs });
    }
};&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在Console中执行&lt;strong&gt;callbackTest(function(result){ console.log(result); })&lt;/strong&gt;将执行匿名回调，并获取到C#回传的result对象。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;gt; callbackTest(function(result){ console.log(result); })
Object {success: true, text: &quot;Message from C#&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在大多数情况下，在Javascript中回调都是因为执行了一些异步的操作，那么如果这些异步的操作是在C#执行也是可行的，只是实现起来就比较复杂。下面将演示如何实现一个异步回调。&lt;/p&gt;
&lt;pre class=&quot;c#&quot;&gt;
&lt;code&gt;//add a function with async callback
var asyncCallbackTestFunc = GlobalObject.AddFunction(&quot;asyncCallbackTest&quot;);
asyncCallbackTestFunc.Execute += async (func, args) =&amp;gt; {
//save current context
var v8Context = CfrV8Context.GetCurrentContext();
var callback = args.Arguments.FirstOrDefault(p =&amp;gt; p.IsFunction);

//simulate async methods.
await Task.Delay(5000);

if (callback != null)
{
    //get render process context
    var rc = callback.CreateRemoteCallContext();

    //enter render process
    rc.Enter();

    //create render task
    var task = new CfrTask();
    task.Execute += (_, taskArgs) =&amp;gt;
    {
        //enter saved context
        v8Context.Enter();

        //create callback argument
        var callbackArgs = CfrV8Value.CreateObject(new CfrV8Accessor());
        callbackArgs.SetValue(&quot;success&quot;, CfrV8Value.CreateBool(true), CfxV8PropertyAttribute.ReadOnly);
        callbackArgs.SetValue(&quot;text&quot;, CfrV8Value.CreateString(&quot;Message from C#&quot;), CfxV8PropertyAttribute.ReadOnly);

        //execute callback
        callback.ExecuteFunction(null, new CfrV8Value[] { callbackArgs });


        v8Context.Exit();

        //lock task from gc
        lock (task)
        {
            Monitor.PulseAll(task);
        }
    };

    lock (task)
    {
        //post task to render process
        v8Context.TaskRunner.PostTask(task);
    }

    rc.Exit();

    GC.KeepAlive(task);
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在Console中执行&lt;strong&gt;asyncCallbackTest(function(result){ console.log(result); })&lt;/strong&gt;将执行匿名回调，大约5秒后获取到C#回传的result对象。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;gt; asyncCallbackTest(function(result){ console.log(result); })
Object {success: true, text: &quot;Message from C#&quot;}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;以上，您已经简单了解了使用NanUI如何做到C#和Javascript的相互通信。NanUI基于开源项目ChromiumFX开发，因此C#与Javascript的交互与ChomiumFX保持一致，如果需要开发更加复杂的功能，请自行搜索和参考ChromiumFX的相关API及示例。&lt;/p&gt;
&lt;h2 id=&quot;示例源码&quot;&gt;示例源码&lt;/h2&gt;
&lt;pre&gt;
&lt;code&gt;git clone https://github.com/NetDimension/NanUI-Examples-04-Communicate-Between-CSharp-And-JS.git&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;社群和帮助&quot;&gt;社群和帮助&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;GitHub&lt;/strong&gt;&lt;br/&gt;&lt;a href=&quot;https://github.com/NetDimension/NanUI/&quot; class=&quot;uri&quot;&gt;https://github.com/NetDimension/NanUI/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;交流群QQ群&lt;/strong&gt;&lt;br/&gt;521854872&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;赞助作者&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;如果你喜欢我的工作，并且希望NanUI持续的发展，请对NanUI项目进行捐助以此来鼓励和支持我继续NanUI的开发工作。你可以使用&lt;strong&gt;微信&lt;/strong&gt;或者&lt;strong&gt;支付宝&lt;/strong&gt;来扫描下面的二维码进行捐助。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://ohtrip.cn/media/beg_with_border.png&quot; alt=&quot;Screen Shot&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 12 Jan 2018 05:55:00 +0000</pubDate>
<dc:creator>林选臣</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/linxuanchen/p/NanUI-Examples-04-Communicate-Between-CSharp-And-JS.html</dc:identifier>
</item>
<item>
<title>教你用.Net来玩微信跳一跳 - Giant Liu</title>
<link>http://www.cnblogs.com/liuju150/p/WeChat-AutoJump_Net-OpenCV.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/liuju150/p/WeChat-AutoJump_Net-OpenCV.html</guid>
<description>&lt;p&gt;目前开发的所有代码都已经上传到了GitHub。欢迎大家来Star&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/GiantLiu/AutoJump&quot; target=&quot;_blank&quot;&gt;https://github.com/GiantLiu/AutoJump&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;目前程序分为“全自动版本”和“半自动版本”&lt;/p&gt;
&lt;p&gt;全自动版本&lt;/p&gt;
&lt;p&gt;WeChat.AutoJump.CMDApp&lt;/p&gt;
&lt;p&gt;当手机连接好后，打开微信跳一跳&lt;/p&gt;
&lt;p&gt;点击&quot;开始游戏&quot;后。运行此程序。就可以实现自动跳了&lt;/p&gt;
&lt;p&gt;半自动版本&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/GiantLiu/AutoJump/releases/download/1.0.0/WeChat.AutoJump.WinApp.rar&quot; target=&quot;_blank&quot;&gt;WeChat.AutoJump.WinApp&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;此版本需要鼠标左键点小黑人的底部，鼠标右键点目标位的中心&lt;/p&gt;
&lt;p&gt;然后程序就会自动跳到相应的位置&lt;/p&gt;

&lt;p&gt;程序原理&lt;br/&gt;1。将手机点击到《跳一跳》小程序界面；点击“开始游戏”后&lt;br/&gt;2。用Adb工具获取当前手机的截图，半下载到本地&lt;br/&gt;3.1。如果是半自动版本，那么就要用鼠标左右键来点击起始和目标位置&lt;br/&gt;然后程序会自动算出要跳动的距离与要点击屏幕的时间。&lt;br/&gt;3.2。如果是全自动版本，那么程序会自动算出小黑人的位置与目标的中心点，&lt;br/&gt;然后自动算距离与点击屏幕的时间。&lt;/p&gt;
&lt;p&gt;4。用Adb工具向手机发送点击屏幕蓄力命令，完成一次跳动&lt;/p&gt;
&lt;p&gt;目前程序只能支持Android设备，IOS设备只写了接口，还没有实现&lt;br/&gt;步骤：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;安卓手机打开USB调试，设置》开发者选项》USB调试&lt;/li&gt;
&lt;li&gt;电脑与手机USB线连接，确保执行&lt;code&gt;adb devices&lt;/code&gt;可以找到设备id&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;&lt;li&gt;&lt;em id=&quot;__mceDel&quot;&gt;界面转至微信跳一跳游戏，点击开始游戏&lt;br/&gt;运行自动/半自动版本程序，就可以开始游戏之路&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/45026/201801/45026-20180112113619629-433898073.png&quot; alt=&quot;&quot; width=&quot;375&quot; height=&quot;667&quot;/&gt;&lt;/p&gt;&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em&gt;&lt;em&gt; &lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;em&gt;代码关键实现&lt;br/&gt;1。通过adb拿到手机的屏幕截图，其实就是向手机发送相关的命令&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;　　第一条命令是把屏幕的截图以png格式保存到手机SD卡&lt;br/&gt;　　第二条命令是把手机SD卡里面的图片下载到本地硬盘对应的目录&lt;br/&gt;　　第三条命令是把手机里的截图删除&lt;br/&gt;　　第四条命令是发送屏幕按压命令 从X:100,Y:100这个位置向X200,Y:200这个位置移动，其中时间为500毫秒&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
adb shell screencap -p /sdcard/&lt;span&gt;1&lt;/span&gt;&lt;span&gt;.png
adb pull &lt;/span&gt;/sdcard/&lt;span&gt;1&lt;/span&gt;.png D:/Download/&lt;span&gt;
adb shell &lt;/span&gt;&lt;span&gt;rm&lt;/span&gt; /sdcard/&lt;span&gt;1&lt;/span&gt;&lt;span&gt;.png
adb shell input swipe &lt;/span&gt;&lt;span&gt;100&lt;/span&gt; &lt;span&gt;100&lt;/span&gt; &lt;span&gt;200&lt;/span&gt; &lt;span&gt;200&lt;/span&gt; &lt;span&gt;500&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这里是.net发送命令相关代码&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('9712d6ed-ce28-4e5c-8f0c-6233008ccd52')&quot; readability=&quot;33.5&quot;&gt;&lt;img id=&quot;code_img_closed_9712d6ed-ce28-4e5c-8f0c-6233008ccd52&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_9712d6ed-ce28-4e5c-8f0c-6233008ccd52&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('9712d6ed-ce28-4e5c-8f0c-6233008ccd52',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_9712d6ed-ce28-4e5c-8f0c-6233008ccd52&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; AdbCommand(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; arg)
        {
            &lt;/span&gt;&lt;span&gt;using&lt;/span&gt; (Process process = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Process())
            {
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; adbDirectoryPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;AndoridAdb&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; adbPath = Path.Combine(adbDirectoryPath, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;adb.exe&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                process.StartInfo.FileName &lt;/span&gt;=&lt;span&gt; adbPath;
                process.StartInfo.Arguments &lt;/span&gt;=&lt;span&gt; arg;
                process.StartInfo.UseShellExecute &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
                process.StartInfo.RedirectStandardInput &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;;   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;重定向标准输入   &lt;/span&gt;
                process.StartInfo.RedirectStandardOutput = &lt;span&gt;true&lt;/span&gt;;  &lt;span&gt;//&lt;/span&gt;&lt;span&gt;重定向标准输出   &lt;/span&gt;
                process.StartInfo.RedirectStandardError = &lt;span&gt;true&lt;/span&gt;;   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;重定向错误输出&lt;/span&gt;
                process.StartInfo.CreateNoWindow = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
                process.Start();
                &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; result =&lt;span&gt; process.StandardOutput.ReadToEnd();
                process.WaitForExit();
                process.Close();
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;2。如果是半自动版本，那么要先鼠标左键点小黑人的底部，然后鼠标右键点目标位置的中间。&lt;br/&gt;点完右键后。程序会自动算出两点之间距离与时间。然后就跳一步了。这个没有什么技术问题&lt;/p&gt;
&lt;p&gt;3。如果是全自动版本，那反第一步，你拿到屏幕截图后。要分析出小黑人的位置&lt;br/&gt;我这里的话。就用了EmguCV (OpenCV的.net调用)。&lt;br/&gt;我们可以用到OpenCV的模板匹配。MatchTemplate方法&lt;br/&gt;模板的话。随便找一张屏幕截图，用PS把小黑人扣出来。保存为图片就可以了&lt;br/&gt;MatchTemplate会找出匹配最高的点。然后给出坐标，这样，我们就可以算出小黑人的中心位置了&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('2b82d076-f105-47f4-8a32-0065aff31316')&quot; readability=&quot;45&quot;&gt;&lt;img id=&quot;code_img_closed_2b82d076-f105-47f4-8a32-0065aff31316&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_2b82d076-f105-47f4-8a32-0065aff31316&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('2b82d076-f105-47f4-8a32-0065aff31316',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_2b82d076-f105-47f4-8a32-0065aff31316&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;85&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; tempGrayPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Template&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Current.png&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; tempGrayImg = &lt;span&gt;new&lt;/span&gt; Image&amp;lt;Rgb, &lt;span&gt;byte&lt;/span&gt;&amp;gt;&lt;span&gt;(tempGrayPath);

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; match =&lt;span&gt; img.MatchTemplate(tempGrayImg, TemplateMatchingType.CcorrNormed);

            &lt;/span&gt;&lt;span&gt;double&lt;/span&gt; min = &lt;span&gt;0&lt;/span&gt;, max = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
            Point maxp &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Point(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;最好匹配的点&lt;/span&gt;
            Point minp = &lt;span&gt;new&lt;/span&gt; Point(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;);
            CvInvoke.MinMaxLoc(match, &lt;/span&gt;&lt;span&gt;ref&lt;/span&gt; min, &lt;span&gt;ref&lt;/span&gt; max, &lt;span&gt;ref&lt;/span&gt; minp, &lt;span&gt;ref&lt;/span&gt;&lt;span&gt; maxp);
            Console.WriteLine(min &lt;/span&gt;+ &lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; max);
            CvInvoke.Rectangle(img, &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Rectangle(maxp, &lt;span&gt;new&lt;/span&gt; Size(tempGrayImg.Width, tempGrayImg.Height)), &lt;span&gt;new&lt;/span&gt; MCvScalar(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;255&lt;/span&gt;), &lt;span&gt;3&lt;/span&gt;&lt;span&gt;);

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; startPoint = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Point();
            startPoint.X &lt;/span&gt;= maxp.X + (&lt;span&gt;int&lt;/span&gt;)(tempGrayImg.Width / &lt;span&gt;2.0&lt;/span&gt;&lt;span&gt;);
            startPoint.Y &lt;/span&gt;= maxp.Y + tempGrayImg.Height - &lt;span&gt;2&lt;/span&gt;&lt;span&gt;;
            CvInvoke.Rectangle(img, &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Rectangle(startPoint, &lt;span&gt;new&lt;/span&gt; Size(&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;)), &lt;span&gt;new&lt;/span&gt; MCvScalar(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;), &lt;span&gt;3&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/45026/201801/45026-20180112121716754-929571919.png&quot; alt=&quot;&quot; width=&quot;375&quot; height=&quot;667&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;4。目标位置计算，&lt;br/&gt;这也是程序最复杂的部分了，&lt;br/&gt;我的实现步骤为&lt;br/&gt;1：先把图片裁剪到只保留中间的1/3有效分析区域&lt;br/&gt;2：看小黑人在屏幕的左边还是右边，那么目标就会在相反的区域。这样我们就可以把目标区域的图片剪切下来&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('22c021ee-2401-4f7f-b11d-321f71472b46')&quot; readability=&quot;42&quot;&gt;&lt;img id=&quot;code_img_closed_22c021ee-2401-4f7f-b11d-321f71472b46&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_22c021ee-2401-4f7f-b11d-321f71472b46&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('22c021ee-2401-4f7f-b11d-321f71472b46',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_22c021ee-2401-4f7f-b11d-321f71472b46&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;79&quot;&gt;
&lt;pre&gt;
&lt;span&gt;///&lt;/span&gt;&lt;span&gt;/裁剪查找区域
            &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;/原图片1/3以下，小黑人以上&lt;/span&gt;
            &lt;span&gt;var&lt;/span&gt; newImgStart =&lt;span&gt; imgHeightSplit;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; newImgEnd = maxp.Y +&lt;span&gt; tempGrayImg.Height;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; newImgHeight = newImgEnd -&lt;span&gt; newImgStart;
            Rectangle rect &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Rectangle(&lt;span&gt;0&lt;/span&gt;&lt;span&gt;, newImgStart, img.Width, newImgHeight);

            CvInvoke.cvSetImageROI(sourceImg, rect);
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; newImg = &lt;span&gt;new&lt;/span&gt; Image&amp;lt;Rgb, &lt;span&gt;byte&lt;/span&gt;&amp;gt;&lt;span&gt;(sourceImg.Width, newImgHeight);
            CvInvoke.cvCopy(sourceImg, newImg, IntPtr.Zero);



            &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;/看小黑人在程序的左边还是右边
            &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;/如果在左边，那目标点就在图片的右边&lt;/span&gt;
            &lt;span&gt;bool&lt;/span&gt; targetInLeft = &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (maxp.X &amp;lt; imgWidthCenter) targetInLeft = &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;

            Rectangle halfRect;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (targetInLeft)
                halfRect &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Rectangle(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, imgWidthCenter, newImgHeight);
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
                halfRect &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Rectangle(imgWidthCenter, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, imgWidthCenter, newImgHeight);

            CvInvoke.cvSetImageROI(newImg, halfRect);
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; halfImg = &lt;span&gt;new&lt;/span&gt; Image&amp;lt;Rgb, &lt;span&gt;byte&lt;/span&gt;&amp;gt;&lt;span&gt;(imgWidthCenter, newImgHeight);
            CvInvoke.cvCopy(newImg, halfImg, IntPtr.Zero);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/45026/201801/45026-20180112122510785-1298784454.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;5。然后我们通过像素分析，找到目标的顶点&lt;br/&gt;原理是：第一个点与后一个点对比，看变化大小&lt;br/&gt;如果变化大小超过一个值。就认为是目标位了（跳一跳背景是渐变的）&lt;br/&gt;这里是方块点。顶点就是一个点。当如果目标为圆体的时候&lt;br/&gt;那顶度也能有几个像素的Y轴都是相同的。那么我们要把有几个相同的找出来。取中间位置，算为顶点&lt;br/&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/45026/201801/45026-20180112123203066-2076073303.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('31bc833f-c255-45bb-adea-1721c4d4cb10')&quot; readability=&quot;43&quot;&gt;&lt;img id=&quot;code_img_closed_31bc833f-c255-45bb-adea-1721c4d4cb10&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_31bc833f-c255-45bb-adea-1721c4d4cb10&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('31bc833f-c255-45bb-adea-1721c4d4cb10',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_31bc833f-c255-45bb-adea-1721c4d4cb10&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;81&quot;&gt;
&lt;pre&gt;
Point topPoint = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Point();
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;; i &amp;lt; halfImg.Rows; i++&lt;span&gt;)
            {
                &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; j = &lt;span&gt;0&lt;/span&gt;; j &amp;lt; halfImg.Cols - &lt;span&gt;1&lt;/span&gt;; j++&lt;span&gt;)
                {
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; cur =&lt;span&gt; halfImg[i, j];
                    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; next = halfImg[i, j + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;];
                    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (Math.Abs(RgbHelp.GetDiff(cur, next)) &amp;gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt;)
                    {
                        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; x = &lt;span&gt;2&lt;/span&gt;&lt;span&gt;;
                        next &lt;/span&gt;= halfImg[i, j +&lt;span&gt; x];
                        &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (Math.Abs(RgbHelp.GetDiff(cur, next)) &amp;gt; &lt;span&gt;2&lt;/span&gt;&lt;span&gt;)
                        {
                            x&lt;/span&gt;++&lt;span&gt;;
                            next &lt;/span&gt;= halfImg[i, j +&lt;span&gt; x];
                        }
                        topPoint.Y &lt;/span&gt;=&lt;span&gt; i;
                        topPoint.X &lt;/span&gt;= j + (&lt;span&gt;int&lt;/span&gt;)(x / &lt;span&gt;2.0&lt;/span&gt;&lt;span&gt;);
                        &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
                    }
                }
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!topPoint.IsEmpty) &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
            }
            CvInvoke.Rectangle(halfImg, &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Rectangle(topPoint, &lt;span&gt;new&lt;/span&gt; Size(&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;)), &lt;span&gt;new&lt;/span&gt; MCvScalar(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;255&lt;/span&gt;), &lt;span&gt;3&lt;/span&gt;&lt;span&gt;);

            &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;/这个顶点在原图中的位置&lt;/span&gt;
            &lt;span&gt;var&lt;/span&gt; oldTopX =&lt;span&gt; topPoint.X;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!targetInLeft) oldTopX +=&lt;span&gt; imgWidthCenter;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; oldTopY = topPoint.Y +&lt;span&gt; imgHeightSplit;
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; oldTopPoint = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Point(oldTopX, oldTopY);
            CvInvoke.Rectangle(img, &lt;/span&gt;&lt;span&gt;new&lt;/span&gt; Rectangle(oldTopPoint, &lt;span&gt;new&lt;/span&gt; Size(&lt;span&gt;1&lt;/span&gt;, &lt;span&gt;1&lt;/span&gt;)), &lt;span&gt;new&lt;/span&gt; MCvScalar(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;255&lt;/span&gt;), &lt;span&gt;3&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/45026/201801/45026-20180112123338504-1119584190.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;找到了相关的点。计算小黑人与目标的距离就不是难事了&lt;br/&gt;然后就是发送跳的命令，一个步骤就完成了&lt;br/&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/45026/201801/45026-20180112124200082-481529870.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/45026/201801/45026-20180112124254441-925384365.png&quot; alt=&quot;&quot; width=&quot;375&quot; height=&quot;667&quot;/&gt;&lt;/p&gt;


</description>
<pubDate>Fri, 12 Jan 2018 04:46:00 +0000</pubDate>
<dc:creator>Giant Liu</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/liuju150/p/WeChat-AutoJump_Net-OpenCV.html</dc:identifier>
</item>
<item>
<title>安卓电量优化之JobScheduler使用介绍 - WangLei_ClearHeart</title>
<link>http://www.cnblogs.com/leipDao/p/8268918.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/leipDao/p/8268918.html</guid>
<description>&lt;p&gt;&lt;span&gt;版权声明：本文出自汪磊的博客，转载请务必注明出处。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;一、&lt;span&gt;&lt;span&gt;JobScheduler概述&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;JobScheduler是安卓5.0版本推出的API，允许开发者在符合某些条件时创建执行在后台的任务。在Android开发中，会存在这些场景:你需要在稍后的某个时间点或者当满足某个特定的条件时执行一个任务，例如当设备接通电源适配器或者连接到WIFI，此时就可以使用&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;JobScheduler&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;了，当一系列预置的条件被满足时，JobScheduler API为你的应用执行一个操作。与AlarmManager不同的是这个执行时间是不确定的。除此之外，JobScheduler API允许同时执行多个任务。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;JobSchedule的宗旨就是把一些不是特别紧急的任务放到更合适的时机批量处理。这样做有两个好处：避免频繁的唤醒硬件模块，造成不必要的电量消耗以及避免在不合适的时间(例如低电量情况下、弱网络或者移动网络情况下的)执行过多的任务消耗电量。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;JobSchedule&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;适用版本为5.0及以上，目前还未发现兼容库支持。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;二、&lt;span&gt;&lt;span&gt;JobScheduler使用&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;使用&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;JobScheduler首先我们需要创建一个类继承自JobService且必须实现两个方法(&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;JobService继承自Service&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;)，分别是&lt;code&gt;onStartJob(JobParameters params)&lt;/code&gt;和 &lt;code&gt;onStopJob(JobParameters params)，如下:&lt;/code&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; TestJobService &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; JobService {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; onStartJob(JobParameters params) {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; 
&lt;span&gt; 6&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; onStopJob(JobParameters params) {
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; 
&lt;span&gt;12&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;当任务开始时会执行&lt;code&gt;onStartJob(JobParameters params)&lt;/code&gt;方法，这是系统用来触发已经被执行的任务。这个方法返回一个boolean值。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;如果返回值是false,系统假设这个方法返回时任务已经执行完毕。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;如果返回值是true,那么系统假定这个任务正要被执行，执行任务的重担就落在了开发者的肩上,当任务执行完毕时开发者需要自己调用&lt;code&gt;jobFinished(JobParameters params, boolean needsRescheduled)&lt;/code&gt;来通知系统。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;当系统接收到一个取消请求时，会调用&lt;code&gt;onStopJob(JobParameters params)&lt;/code&gt;方法取消正在等待执行的任务。&lt;strong&gt;很重要的一点&lt;/strong&gt;是如果&lt;code&gt;onStartJob(JobParameters params)&lt;/code&gt;返回false,那么系统假定在接收到一个取消请求时已经没有正在运行的任务。&lt;code&gt;onStopJob(JobParameters params)&lt;/code&gt;在这种情况下不会被调用。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;需要注意的是这个job service运行在你的主线程，这意味着你需要使用子线程，handler, 或者一个异步任务来运行耗时的操作以防止阻塞主线程。我们可以在&lt;span&gt;&lt;code&gt;onStartJob&lt;/code&gt;&lt;/span&gt;中利用Handler发送消息，在Handler中处理相关任务。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;code&gt;jobFinished(JobParameters params, boolean needsRescheduled)&lt;/code&gt;的两个参数中的params参数是从JobService的&lt;code&gt;onStartJob(JobParameters params)&lt;/code&gt;的params传递过来的，needsRescheduled参数是告诉系统这个任务如果由于某些原因导致执行失败是否需要重新调度执行，true需要重新调度执行，false不需要。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;最后我们需要到AndroidManifest.xml中添加一个service节点让你的应用拥有绑定和使用这个JobService的权限。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;1&lt;/span&gt; &amp;lt;&lt;span&gt;service
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;    android:name=&quot;.TestJobService&quot;
&lt;span&gt;3&lt;/span&gt;    android:permission=&quot;android.permission.BIND_JOB_SERVICE&quot; &amp;gt;
&lt;span&gt;4&lt;/span&gt; &amp;lt;/service&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;在创建完TestJobService后，我们就该创建JobScheduler对象了，创建JobScheduler对象需要通过&lt;code&gt;getSystemService( Context.JOB_SCHEDULER_SERVICE )来&lt;/code&gt;初始化：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;1&lt;/span&gt; JobScheduler tm =(JobScheduler) getSystemService(Context.JOB_SCHEDULER_SERVICE);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;接下来我们使用&lt;code&gt;JobInfo.Builder&lt;/code&gt;来构建一个JobInfo对象。JobInfo.Builder接收两个参数，第一个参数是你要运行的任务的标识符，简单理解为这个任务的ID就可以了，第二个是这个Service组件的类名。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;1&lt;/span&gt; JobInfo.Builder builder = &lt;span&gt;new&lt;/span&gt; JobInfo.Builder(kJobId++, mServiceComponent);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;mServiceComponent&lt;/span&gt;初始化如下：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;1&lt;/span&gt; mServiceComponent = &lt;span&gt;new&lt;/span&gt; ComponentName(&lt;span&gt;this&lt;/span&gt;, TestJobService.&lt;span&gt;class&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;builder允许你设置很多不同的选项来控制任务的执行，重要方法说明如下：&lt;/span&gt;&lt;/p&gt;
&lt;table border=&quot;0&quot; align=&quot;center&quot;&gt;&lt;tbody readability=&quot;18&quot;&gt;&lt;tr&gt;&lt;td&gt;&lt;span&gt;方法名&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;说明&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;&lt;span&gt;setPeriodic(long intervalMillis)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;设置任务每隔intervalMillis运行一次&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td&gt;&lt;span&gt;setMinimumLatency(long minLatencyMillis)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;这个函数能让你设置任务的延迟执行时间(单位是毫秒),这个函数与&lt;code&gt;setPeriodic(long time)&lt;/code&gt;方法不兼容，如果这两个方法同时调用了就会引起异常&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;6&quot;&gt;&lt;td&gt;&lt;span&gt;setOverrideDeadline(long maxExecutionDelayMillis)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;这个方法让你可以设置任务最晚的延迟时间。如果到了规定的时间时其他条件还未满足，你的任务也会被启动。与&lt;code&gt;setMinimumLatency(long time)&lt;/code&gt;一样，这个方法也会与&lt;code&gt;setPeriodic(long time)&lt;/code&gt;，同时调用这两个方法会引发异常&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;&lt;span&gt;setPersisted(boolean isPersisted)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;这个方法告诉系统当你的设备重启之后你的任务是否还要继续执行&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;7&quot;&gt;&lt;td&gt;&lt;span&gt;setRequiredNetworkType(int networkType)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;这个方法让你这个任务只有在满足指定的网络条件时才会被执行。默认条件是JobInfo.NETWORK_TYPE_NONE，这意味着不管是否有网络这个任务都会被执行。另外两个可选类型，一种是JobInfo.NETWORK_TYPE_ANY，它表明需要任意一种网络才使得任务可以执行。另一种是JobInfo.NETWORK_TYPE_UNMETERED，它表示设备不是蜂窝网络( 比如在WIFI连接时 )时任务才会被执行&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;4&quot;&gt;&lt;td&gt;&lt;span&gt;setRequiresCharging(boolean requiresCharging)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;这个方法告诉你的应用，只有当设备在充电时这个任务才会被执行&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;tr readability=&quot;5&quot;&gt;&lt;td&gt;&lt;span&gt;setRequiresDeviceIdle(boolean requiresDeviceIdle)&lt;/span&gt;&lt;/td&gt;
&lt;td&gt;&lt;span&gt;这个方法告诉你的任务只有当用户没有在使用该设备且有一段时间没有使用时才会启动该任务&lt;/span&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;&lt;span&gt;需要注意的是&lt;code&gt;setRequiredNetworkType(int networkType)&lt;/code&gt;, &lt;code&gt;setRequiresCharging(boolean requireCharging)&lt;/code&gt; and &lt;code&gt;setRequiresDeviceIdle(boolean requireIdle)&lt;/code&gt;者几个方法可能会使得你的任务无法执行，除非调用&lt;code&gt;setOverrideDeadline(long time)&lt;/code&gt;设置了最大延迟时间，使得你的任务在未满足条件的情况下也会被执行。一旦你预置的条件被设置，你就可以构建一个JobInfo对象，然后通过如下所示的代码将它发送到你的JobScheduler中&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;1&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;( &lt;span&gt;tm&lt;/span&gt;.schedule( builder.build() ) &amp;lt;= 0&lt;span&gt; ) {
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;something wrong&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt; }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;schedule方法会返回一个整型。如果schedule方法失败了，它会返回一个小于0的错误码。否则返回我们在JobInfo.Builder中定义的标识id。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;停止某个任务，可以调用JobScheduler对象的&lt;code&gt;cancel(int jobId)&lt;/code&gt;来实现；如果想取消所有的任务，可以调用JobScheduler对象的&lt;code&gt;cancelAll()&lt;/code&gt;来实现。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;以上就是&lt;span&gt;JobScheduler&lt;/span&gt;的介绍，是不是很简单，重要的是理解什么情况下使用&lt;span&gt;JobScheduler&lt;/span&gt;。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;三、&lt;span&gt;&lt;span&gt;JobScheduler实例举例&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;本Demo是安卓官方提供的一个例子，我们先看TestJobService类;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;48&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; TestJobService &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; JobService {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String TAG = &quot;SyncService&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onCreate() {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;.onCreate();
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         Log.i(TAG, &quot;Service created&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onDestroy() {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;.onDestroy();
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         Log.i(TAG, &quot;Service destroyed&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; 
&lt;span&gt;16&lt;/span&gt; 
&lt;span&gt;17&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; onStartCommand(Intent intent, &lt;span&gt;int&lt;/span&gt; flags, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; startId) {
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;         Messenger callback = intent.getParcelableExtra(&quot;messenger&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;         Message m =&lt;span&gt; Message.obtain();
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;         m.what =&lt;span&gt; MainActivity.MSG_SERVICE_OBJ;
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;         m.obj = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;         &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;            callback.send(m);
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt;         } &lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (RemoteException e) {
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;             Log.e(TAG, &quot;Error passing service object back to activity.&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; START_NOT_STICKY;
&lt;/span&gt;&lt;span&gt;29&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt; 
&lt;span&gt;31&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;32&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; onStartJob(JobParameters params) {
&lt;/span&gt;&lt;span&gt;33&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; We don't do any real 'work' in this sample app. All we'll
&lt;/span&gt;&lt;span&gt;34&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; do is track which jobs have landed on our service, and
&lt;/span&gt;&lt;span&gt;35&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; update the UI accordingly.&lt;/span&gt;
&lt;span&gt;36&lt;/span&gt; &lt;span&gt;       jobParamsMap.add(params);
&lt;/span&gt;&lt;span&gt;37&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (mActivity != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;38&lt;/span&gt; &lt;span&gt;            mActivity.onReceivedStartJob(params);
&lt;/span&gt;&lt;span&gt;39&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;40&lt;/span&gt;         Log.i(TAG, &quot;on start job: &quot; +&lt;span&gt; params.getJobId());
&lt;/span&gt;&lt;span&gt;41&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;42&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;43&lt;/span&gt; 
&lt;span&gt;44&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt;45&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; onStopJob(JobParameters params) {
&lt;/span&gt;&lt;span&gt;46&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Stop tracking these job parameters, as we've 'finished' executing.&lt;/span&gt;
&lt;span&gt;47&lt;/span&gt; &lt;span&gt;        jobParamsMap.remove(params);
&lt;/span&gt;&lt;span&gt;48&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (mActivity != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;49&lt;/span&gt; &lt;span&gt;            mActivity.onReceivedStopJob();
&lt;/span&gt;&lt;span&gt;50&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;51&lt;/span&gt;         Log.i(TAG, &quot;on stop job: &quot; +&lt;span&gt; params.getJobId());
&lt;/span&gt;&lt;span&gt;52&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;53&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;54&lt;/span&gt; 
&lt;span&gt;55&lt;/span&gt; &lt;span&gt;   MainActivity mActivity;
&lt;/span&gt;&lt;span&gt;56&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; LinkedList&amp;lt;JobParameters&amp;gt; jobParamsMap = &lt;span&gt;new&lt;/span&gt; LinkedList&amp;lt;JobParameters&amp;gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt;57&lt;/span&gt; 
&lt;span&gt;58&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setUiCallback(MainActivity activity) {
&lt;/span&gt;&lt;span&gt;59&lt;/span&gt;         mActivity =&lt;span&gt; activity;
&lt;/span&gt;&lt;span&gt;60&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;61&lt;/span&gt; 
&lt;span&gt;62&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;&lt;span&gt; Send job to the JobScheduler. &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;63&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; scheduleJob(JobInfo t) {
&lt;/span&gt;&lt;span&gt;64&lt;/span&gt;         Log.d(TAG, &quot;Scheduling job&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;65&lt;/span&gt;         JobScheduler tm =
&lt;span&gt;66&lt;/span&gt; &lt;span&gt;                (JobScheduler) getSystemService(Context.JOB_SCHEDULER_SERVICE);
&lt;/span&gt;&lt;span&gt;67&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(tm.schedule(t)&amp;lt;=0&lt;span&gt;){
&lt;/span&gt;&lt;span&gt;68&lt;/span&gt;             Log.i(TAG, &quot;something wrong&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;69&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;70&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;71&lt;/span&gt;     
&lt;span&gt;72&lt;/span&gt; 
&lt;span&gt;73&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt;74&lt;/span&gt; &lt;span&gt;     * Not currently used, but as an exercise you can hook this
&lt;/span&gt;&lt;span&gt;75&lt;/span&gt; &lt;span&gt;     * up to a button in the UI to finish a job that has landed
&lt;/span&gt;&lt;span&gt;76&lt;/span&gt; &lt;span&gt;     * in onStartJob().
&lt;/span&gt;&lt;span&gt;77&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;78&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; callJobFinished() {
&lt;/span&gt;&lt;span&gt;79&lt;/span&gt;         JobParameters params =&lt;span&gt; jobParamsMap.poll();
&lt;/span&gt;&lt;span&gt;80&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (params == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;81&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;82&lt;/span&gt;         } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;83&lt;/span&gt;             jobFinished(params, &lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;84&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;85&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;86&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;87&lt;/span&gt; }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;上面提到过&lt;span&gt;&lt;span&gt;JobService其实也是Service，同样具有相应生命周期方法。&lt;span&gt;TestJobService先不做详细讲解，但是要看到这个类中封装了一些&lt;span&gt;JobScheduler方法供外界调用。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;接下来我们结合MainActivity类一起看，MainActivity源码如下：&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;  1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MainActivity &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; Activity {
&lt;/span&gt;&lt;span&gt;  2&lt;/span&gt; 
&lt;span&gt;  3&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String TAG = &quot;MainActivity&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;  4&lt;/span&gt; 
&lt;span&gt;  5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MSG_UNCOLOUR_START = 0&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;  6&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MSG_UNCOLOUR_STOP = 1&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;  7&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; MSG_SERVICE_OBJ = 2&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;  8&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; UI fields.&lt;/span&gt;
&lt;span&gt;  9&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt;&lt;span&gt; defaultColor;
&lt;/span&gt;&lt;span&gt; 10&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt;&lt;span&gt; startJobColor;
&lt;/span&gt;&lt;span&gt; 11&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt;&lt;span&gt; stopJobColor;
&lt;/span&gt;&lt;span&gt; 12&lt;/span&gt; 
&lt;span&gt; 13&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; TextView mShowStartView;
&lt;/span&gt;&lt;span&gt; 14&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; TextView mShowStopView;
&lt;/span&gt;&lt;span&gt; 15&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; TextView mParamsTextView;
&lt;/span&gt;&lt;span&gt; 16&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; EditText mDelayEditText;
&lt;/span&gt;&lt;span&gt; 17&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; EditText mDeadlineEditText;
&lt;/span&gt;&lt;span&gt; 18&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; RadioButton mWiFiConnectivityRadioButton;
&lt;/span&gt;&lt;span&gt; 19&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; RadioButton mAnyConnectivityRadioButton;
&lt;/span&gt;&lt;span&gt; 20&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; CheckBox mRequiresChargingCheckBox;
&lt;/span&gt;&lt;span&gt; 21&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; CheckBox mRequiresIdleCheckbox;
&lt;/span&gt;&lt;span&gt; 22&lt;/span&gt; &lt;span&gt;    ComponentName mServiceComponent;
&lt;/span&gt;&lt;span&gt; 23&lt;/span&gt; &lt;span&gt;    TestJobService mTestService;
&lt;/span&gt;&lt;span&gt; 24&lt;/span&gt;     &lt;span&gt;//
&lt;/span&gt;&lt;span&gt; 25&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; kJobId = 0&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 26&lt;/span&gt; 
&lt;span&gt; 27&lt;/span&gt; &lt;span&gt;    @Override
&lt;/span&gt;&lt;span&gt; 28&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onCreate(Bundle savedInstanceState) {
&lt;/span&gt;&lt;span&gt; 29&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;.onCreate(savedInstanceState);
&lt;/span&gt;&lt;span&gt; 30&lt;/span&gt; &lt;span&gt;        setContentView(R.layout.sample_main);
&lt;/span&gt;&lt;span&gt; 31&lt;/span&gt;         Resources res =&lt;span&gt; getResources();
&lt;/span&gt;&lt;span&gt; 32&lt;/span&gt;         defaultColor =&lt;span&gt; res.getColor(R.color.none_received);
&lt;/span&gt;&lt;span&gt; 33&lt;/span&gt;         startJobColor =&lt;span&gt; res.getColor(R.color.start_received);
&lt;/span&gt;&lt;span&gt; 34&lt;/span&gt;         stopJobColor =&lt;span&gt; res.getColor(R.color.stop_received);
&lt;/span&gt;&lt;span&gt; 35&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Set up UI.&lt;/span&gt;
&lt;span&gt; 36&lt;/span&gt;         mShowStartView =&lt;span&gt; (TextView) findViewById(R.id.onstart_textview);
&lt;/span&gt;&lt;span&gt; 37&lt;/span&gt;         mShowStopView =&lt;span&gt; (TextView) findViewById(R.id.onstop_textview);
&lt;/span&gt;&lt;span&gt; 38&lt;/span&gt;         mParamsTextView =&lt;span&gt; (TextView) findViewById(R.id.task_params);
&lt;/span&gt;&lt;span&gt; 39&lt;/span&gt;         mDelayEditText =&lt;span&gt; (EditText) findViewById(R.id.delay_time);
&lt;/span&gt;&lt;span&gt; 40&lt;/span&gt;         mDeadlineEditText =&lt;span&gt; (EditText) findViewById(R.id.deadline_time);
&lt;/span&gt;&lt;span&gt; 41&lt;/span&gt;         mWiFiConnectivityRadioButton =&lt;span&gt; (RadioButton) findViewById(R.id.checkbox_unmetered);
&lt;/span&gt;&lt;span&gt; 42&lt;/span&gt;         mAnyConnectivityRadioButton =&lt;span&gt; (RadioButton) findViewById(R.id.checkbox_any);
&lt;/span&gt;&lt;span&gt; 43&lt;/span&gt;         mRequiresChargingCheckBox =&lt;span&gt; (CheckBox) findViewById(R.id.checkbox_charging);
&lt;/span&gt;&lt;span&gt; 44&lt;/span&gt;         mRequiresIdleCheckbox =&lt;span&gt; (CheckBox) findViewById(R.id.checkbox_idle);
&lt;/span&gt;&lt;span&gt; 45&lt;/span&gt;         mServiceComponent = &lt;span&gt;new&lt;/span&gt; ComponentName(&lt;span&gt;this&lt;/span&gt;, TestJobService.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 46&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Start service and provide it a way to communicate with us.&lt;/span&gt;
&lt;span&gt; 47&lt;/span&gt;         Intent startServiceIntent = &lt;span&gt;new&lt;/span&gt; Intent(&lt;span&gt;this&lt;/span&gt;, TestJobService.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 48&lt;/span&gt;         startServiceIntent.putExtra(&quot;messenger&quot;, &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Messenger(mHandler));
&lt;/span&gt;&lt;span&gt; 49&lt;/span&gt; &lt;span&gt;       startService(startServiceIntent);
&lt;/span&gt;&lt;span&gt; 50&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 51&lt;/span&gt; 
&lt;span&gt; 52&lt;/span&gt;     Handler mHandler = &lt;span&gt;new&lt;/span&gt; Handler(&lt;span&gt;/*&lt;/span&gt;&lt;span&gt; default looper &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt; 53&lt;/span&gt; &lt;span&gt;        @Override
&lt;/span&gt;&lt;span&gt; 54&lt;/span&gt;         &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; handleMessage(Message msg) {
&lt;/span&gt;&lt;span&gt; 55&lt;/span&gt;             &lt;span&gt;switch&lt;/span&gt;&lt;span&gt; (msg.what) {
&lt;/span&gt;&lt;span&gt; 56&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt;&lt;span&gt; MSG_UNCOLOUR_START:
&lt;/span&gt;&lt;span&gt; 57&lt;/span&gt; &lt;span&gt;                    mShowStartView.setBackgroundColor(defaultColor);
&lt;/span&gt;&lt;span&gt; 58&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 59&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt;&lt;span&gt; MSG_UNCOLOUR_STOP:
&lt;/span&gt;&lt;span&gt; 60&lt;/span&gt; &lt;span&gt;                    mShowStopView.setBackgroundColor(defaultColor);
&lt;/span&gt;&lt;span&gt; 61&lt;/span&gt;                     &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 62&lt;/span&gt;                 &lt;span&gt;case&lt;/span&gt;&lt;span&gt; MSG_SERVICE_OBJ:
&lt;/span&gt;&lt;span&gt; 63&lt;/span&gt;                     mTestService =&lt;span&gt; (TestJobService) msg.obj;
&lt;/span&gt;&lt;span&gt; 64&lt;/span&gt;                     mTestService.setUiCallback(MainActivity.&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 65&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt; 66&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 67&lt;/span&gt; &lt;span&gt;    };
&lt;/span&gt;&lt;span&gt; 68&lt;/span&gt; 
&lt;span&gt; 69&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; ensureTestService() {
&lt;/span&gt;&lt;span&gt; 70&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (mTestService == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt; 71&lt;/span&gt;             Toast.makeText(MainActivity.&lt;span&gt;this&lt;/span&gt;, &quot;Service null, never got callback?&quot;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 72&lt;/span&gt; &lt;span&gt;                    Toast.LENGTH_SHORT).show();
&lt;/span&gt;&lt;span&gt; 73&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 74&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 75&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 76&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 77&lt;/span&gt; 
&lt;span&gt; 78&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt; 79&lt;/span&gt; &lt;span&gt;     * UI onclick listener to schedule a job. What this job is is defined in
&lt;/span&gt;&lt;span&gt; 80&lt;/span&gt; &lt;span&gt;     * TestJobService#scheduleJob().
&lt;/span&gt;&lt;span&gt; 81&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt; 82&lt;/span&gt;     @SuppressLint(&quot;NewApi&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 83&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; scheduleJob(View v) {
&lt;/span&gt;&lt;span&gt; 84&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;ensureTestService()) {
&lt;/span&gt;&lt;span&gt; 85&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 86&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 87&lt;/span&gt;         JobInfo.Builder builder = &lt;span&gt;new&lt;/span&gt; JobInfo.Builder(kJobId++&lt;span&gt;, mServiceComponent);
&lt;/span&gt;&lt;span&gt; 88&lt;/span&gt; 
&lt;span&gt; 89&lt;/span&gt;         String delay =&lt;span&gt; mDelayEditText.getText().toString();
&lt;/span&gt;&lt;span&gt; 90&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (delay != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !&lt;span&gt;TextUtils.isEmpty(delay)) {
&lt;/span&gt;&lt;span&gt; 91&lt;/span&gt;             builder.setMinimumLatency(Long.valueOf(delay) * 1000&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 92&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 93&lt;/span&gt;         String deadline =&lt;span&gt; mDeadlineEditText.getText().toString();
&lt;/span&gt;&lt;span&gt; 94&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (deadline != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !&lt;span&gt;TextUtils.isEmpty(deadline)) {
&lt;/span&gt;&lt;span&gt; 95&lt;/span&gt;             builder.setOverrideDeadline(Long.valueOf(deadline) * 1000);
&lt;span&gt; 96&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 97&lt;/span&gt;         &lt;span&gt;boolean&lt;/span&gt; requiresUnmetered =&lt;span&gt; mWiFiConnectivityRadioButton.isChecked();
&lt;/span&gt;&lt;span&gt; 98&lt;/span&gt;         &lt;span&gt;boolean&lt;/span&gt; requiresAnyConnectivity =&lt;span&gt; mAnyConnectivityRadioButton.isChecked();
&lt;/span&gt;&lt;span&gt; 99&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (requiresUnmetered) {
&lt;/span&gt;&lt;span&gt;100&lt;/span&gt; &lt;span&gt;            builder.setRequiredNetworkType(JobInfo.NETWORK_TYPE_UNMETERED);
&lt;/span&gt;&lt;span&gt;101&lt;/span&gt;         } &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (requiresAnyConnectivity) {
&lt;/span&gt;&lt;span&gt;102&lt;/span&gt; &lt;span&gt;            builder.setRequiredNetworkType(JobInfo.NETWORK_TYPE_ANY);
&lt;/span&gt;&lt;span&gt;103&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;104&lt;/span&gt;         builder.setRequiresDeviceIdle(mRequiresIdleCheckbox.isChecked());
&lt;span&gt;105&lt;/span&gt;         builder.setRequiresCharging(mRequiresChargingCheckBox.isChecked());
&lt;span&gt;106&lt;/span&gt; &lt;span&gt;       mTestService.scheduleJob(builder.build());
&lt;/span&gt;&lt;span&gt;107&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;108&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt;109&lt;/span&gt; &lt;span&gt;     * cancel All jobs
&lt;/span&gt;&lt;span&gt;110&lt;/span&gt; &lt;span&gt;     * &lt;/span&gt;&lt;span&gt;@param&lt;/span&gt;&lt;span&gt; v
&lt;/span&gt;&lt;span&gt;111&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;112&lt;/span&gt;     @SuppressLint(&quot;NewApi&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;113&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; cancelAllJobs(View v) {
&lt;/span&gt;&lt;span&gt;114&lt;/span&gt;         JobScheduler tm =
&lt;span&gt;115&lt;/span&gt; &lt;span&gt;                (JobScheduler) getSystemService(Context.JOB_SCHEDULER_SERVICE);
&lt;/span&gt;&lt;span&gt;116&lt;/span&gt; &lt;span&gt;        tm.cancelAll();
&lt;/span&gt;&lt;span&gt;117&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;118&lt;/span&gt; 
&lt;span&gt;119&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt;120&lt;/span&gt; &lt;span&gt;     * UI onclick listener to call jobFinished() in our service.
&lt;/span&gt;&lt;span&gt;121&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;122&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; finishJob(View v) {
&lt;/span&gt;&lt;span&gt;123&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;ensureTestService()) {
&lt;/span&gt;&lt;span&gt;124&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;125&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;126&lt;/span&gt; &lt;span&gt;        mTestService.callJobFinished();
&lt;/span&gt;&lt;span&gt;127&lt;/span&gt;         mParamsTextView.setText(&quot;&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;128&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;129&lt;/span&gt; 
&lt;span&gt;130&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt;131&lt;/span&gt; &lt;span&gt;     * Receives callback from the service when a job has landed
&lt;/span&gt;&lt;span&gt;132&lt;/span&gt; &lt;span&gt;     * on the app. Colours the UI and post a message to
&lt;/span&gt;&lt;span&gt;133&lt;/span&gt; &lt;span&gt;     * uncolour it after a second.
&lt;/span&gt;&lt;span&gt;134&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;135&lt;/span&gt;     @SuppressLint(&quot;NewApi&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;136&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onReceivedStartJob(JobParameters params) {
&lt;/span&gt;&lt;span&gt;137&lt;/span&gt; &lt;span&gt;        mShowStartView.setBackgroundColor(startJobColor);
&lt;/span&gt;&lt;span&gt;138&lt;/span&gt;         Message m =&lt;span&gt; Message.obtain(mHandler, MSG_UNCOLOUR_START);
&lt;/span&gt;&lt;span&gt;139&lt;/span&gt;         mHandler.sendMessageDelayed(m, 1000L); &lt;span&gt;//&lt;/span&gt;&lt;span&gt; uncolour in 1 second.&lt;/span&gt;
&lt;span&gt;140&lt;/span&gt;         mParamsTextView.setText(&quot;Executing: &quot; + params.getJobId() + &quot; &quot; +&lt;span&gt; params.getExtras());
&lt;/span&gt;&lt;span&gt;141&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;142&lt;/span&gt; 
&lt;span&gt;143&lt;/span&gt;     &lt;span&gt;/**&lt;/span&gt;
&lt;span&gt;144&lt;/span&gt; &lt;span&gt;     * Receives callback from the service when a job that
&lt;/span&gt;&lt;span&gt;145&lt;/span&gt; &lt;span&gt;     * previously landed on the app must stop executing.
&lt;/span&gt;&lt;span&gt;146&lt;/span&gt; &lt;span&gt;     * Colours the UI and post a message to uncolour it after a
&lt;/span&gt;&lt;span&gt;147&lt;/span&gt; &lt;span&gt;     * second.
&lt;/span&gt;&lt;span&gt;148&lt;/span&gt;      &lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;149&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onReceivedStopJob() {
&lt;/span&gt;&lt;span&gt;150&lt;/span&gt; &lt;span&gt;        mShowStopView.setBackgroundColor(stopJobColor);
&lt;/span&gt;&lt;span&gt;151&lt;/span&gt;         Message m =&lt;span&gt; Message.obtain(mHandler, MSG_UNCOLOUR_STOP);
&lt;/span&gt;&lt;span&gt;152&lt;/span&gt;         mHandler.sendMessageDelayed(m, 2000L); &lt;span&gt;//&lt;/span&gt;&lt;span&gt; uncolour in 1 second.&lt;/span&gt;
&lt;span&gt;153&lt;/span&gt;         mParamsTextView.setText(&quot;&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;154&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;155&lt;/span&gt;     
&lt;span&gt;156&lt;/span&gt; }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;对于这个Demo我只想说一个点，&lt;span&gt;MainActivity在启动的时候onCreate()方法中47-49行启动了&lt;span&gt;TestJobService&lt;/span&gt;，并且传递了一个&lt;span&gt;&lt;span&gt;new &lt;span&gt;Messenger(mHandler)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;匿名对象，接下来我们看下TestJobService中onStartCommand方法，此方法上来就获取&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;Messenger&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;对象，并且调用send方法发送一个消息（实际调用的就是Handler的send方法，可自行点进源码查看），此消息obj为&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;TestJobService&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;类实例对象。回到MainActivity中查看mHandler，what为MSG_SERVICE_OBJ的时候：将msg的obj赋值给&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;MainActivity&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;中mTestService变量，然后调用TestJobService中setUiCallback方法，这样MainActivity与TestJobService类就互相持有彼此实例对象了，也就可以调用其内部的方法互相通信了，比如&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;TestJobService&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;中onStartJob方法调用&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;MainActivity&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;中的onReceivedStartJob方法，onReceivedStartJob方法中其实就是发送了Handler消息，最后在Handler中执行相关业务逻辑。好了Demo就说这一点，其余请自行细细查看，很简单，最后附上Demo布局文件：&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&lt;span&gt;  1&lt;/span&gt; &amp;lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
&lt;span&gt;  2&lt;/span&gt;     android:layout_width=&quot;match_parent&quot;
&lt;span&gt;  3&lt;/span&gt;     android:layout_height=&quot;match_parent&quot;
&lt;span&gt;  4&lt;/span&gt;     android:orientation=&quot;vertical&quot; &amp;gt;
&lt;span&gt;  5&lt;/span&gt; 
&lt;span&gt;  6&lt;/span&gt;     &amp;lt;&lt;span&gt;LinearLayout
&lt;/span&gt;&lt;span&gt;  7&lt;/span&gt;         android:layout_width=&quot;match_parent&quot;
&lt;span&gt;  8&lt;/span&gt;         android:layout_height=&quot;match_parent&quot;
&lt;span&gt;  9&lt;/span&gt;         android:layout_weight=&quot;1&quot;
&lt;span&gt; 10&lt;/span&gt;         android:orientation=&quot;vertical&quot;&amp;gt;
&lt;span&gt; 11&lt;/span&gt; 
&lt;span&gt; 12&lt;/span&gt;         &amp;lt;&lt;span&gt;LinearLayout
&lt;/span&gt;&lt;span&gt; 13&lt;/span&gt;             android:layout_width=&quot;match_parent&quot;
&lt;span&gt; 14&lt;/span&gt;             android:layout_height=&quot;100dp&quot;&amp;gt;
&lt;span&gt; 15&lt;/span&gt;             &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt; 16&lt;/span&gt;                 android:id=&quot;@+id/onstart_textview&quot;
&lt;span&gt; 17&lt;/span&gt;                 android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 18&lt;/span&gt;                 android:layout_height=&quot;match_parent&quot;
&lt;span&gt; 19&lt;/span&gt;                 android:layout_weight=&quot;1&quot;
&lt;span&gt; 20&lt;/span&gt;                 android:background=&quot;#999999&quot;
&lt;span&gt; 21&lt;/span&gt;                 android:gravity=&quot;center&quot;
&lt;span&gt; 22&lt;/span&gt;                 android:text=&quot;@string/onstarttask&quot;/&amp;gt;
&lt;span&gt; 23&lt;/span&gt;             &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt; 24&lt;/span&gt;                 android:id=&quot;@+id/onstop_textview&quot;
&lt;span&gt; 25&lt;/span&gt;                 android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 26&lt;/span&gt;                 android:layout_height=&quot;match_parent&quot;
&lt;span&gt; 27&lt;/span&gt;                 android:layout_weight=&quot;1&quot;
&lt;span&gt; 28&lt;/span&gt;                 android:background=&quot;@color/none_received&quot;
&lt;span&gt; 29&lt;/span&gt;                 android:gravity=&quot;center&quot;
&lt;span&gt; 30&lt;/span&gt;                 android:text=&quot;@string/onstoptask&quot;/&amp;gt;
&lt;span&gt; 31&lt;/span&gt;         &amp;lt;/LinearLayout&amp;gt;
&lt;span&gt; 32&lt;/span&gt;         &amp;lt;&lt;span&gt;Button
&lt;/span&gt;&lt;span&gt; 33&lt;/span&gt;             android:id=&quot;@+id/finished_button&quot;
&lt;span&gt; 34&lt;/span&gt;             android:layout_width=&quot;match_parent&quot;
&lt;span&gt; 35&lt;/span&gt;             android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 36&lt;/span&gt;             android:padding=&quot;20dp&quot;
&lt;span&gt; 37&lt;/span&gt;             android:layout_marginBottom=&quot;5dp&quot;
&lt;span&gt; 38&lt;/span&gt;             android:onClick=&quot;finishJob&quot;
&lt;span&gt; 39&lt;/span&gt;             android:text=&quot;@string/finish_job_button_text&quot;/&amp;gt;
&lt;span&gt; 40&lt;/span&gt; 
&lt;span&gt; 41&lt;/span&gt;         &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt; 42&lt;/span&gt;             android:id=&quot;@+id/task_params&quot;
&lt;span&gt; 43&lt;/span&gt;             android:layout_width=&quot;match_parent&quot;
&lt;span&gt; 44&lt;/span&gt;             android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 45&lt;/span&gt;             android:text=&quot;@string/defaultparamtext&quot;
&lt;span&gt; 46&lt;/span&gt;             android:gravity=&quot;center&quot;
&lt;span&gt; 47&lt;/span&gt;             android:textSize=&quot;20dp&quot;
&lt;span&gt; 48&lt;/span&gt;             android:padding=&quot;15dp&quot;
&lt;span&gt; 49&lt;/span&gt;             android:layout_marginBottom=&quot;10dp&quot; /&amp;gt;
&lt;span&gt; 50&lt;/span&gt; 
&lt;span&gt; 51&lt;/span&gt;         &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt; 52&lt;/span&gt;             android:layout_width=&quot;match_parent&quot;
&lt;span&gt; 53&lt;/span&gt;             android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 54&lt;/span&gt;             android:text=&quot;@string/constraints&quot;
&lt;span&gt; 55&lt;/span&gt;             android:layout_margin=&quot;15dp&quot;
&lt;span&gt; 56&lt;/span&gt;             android:textSize=&quot;18dp&quot;/&amp;gt;
&lt;span&gt; 57&lt;/span&gt;         &amp;lt;&lt;span&gt;LinearLayout
&lt;/span&gt;&lt;span&gt; 58&lt;/span&gt;             android:layout_width=&quot;match_parent&quot;
&lt;span&gt; 59&lt;/span&gt;             android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 60&lt;/span&gt;             android:orientation=&quot;vertical&quot;
&lt;span&gt; 61&lt;/span&gt;             android:layout_marginLeft=&quot;10dp&quot;&amp;gt;
&lt;span&gt; 62&lt;/span&gt;             &amp;lt;&lt;span&gt;LinearLayout
&lt;/span&gt;&lt;span&gt; 63&lt;/span&gt;                 android:layout_width=&quot;match_parent&quot;
&lt;span&gt; 64&lt;/span&gt;                 android:layout_height=&quot;wrap_content&quot;&amp;gt;
&lt;span&gt; 65&lt;/span&gt;                 &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt; 66&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 67&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 68&lt;/span&gt;                     android:text=&quot;@string/connectivity&quot;
&lt;span&gt; 69&lt;/span&gt;                     android:layout_marginRight=&quot;10dp&quot;/&amp;gt;
&lt;span&gt; 70&lt;/span&gt;                 &amp;lt;&lt;span&gt;RadioGroup
&lt;/span&gt;&lt;span&gt; 71&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 72&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 73&lt;/span&gt;                     android:orientation=&quot;horizontal&quot;&amp;gt;
&lt;span&gt; 74&lt;/span&gt;                     &amp;lt;RadioButton android:id=&quot;@+id/checkbox_any&quot;
&lt;span&gt; 75&lt;/span&gt;                         android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 76&lt;/span&gt;                         android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 77&lt;/span&gt;                         android:text=&quot;@string/any&quot;
&lt;span&gt; 78&lt;/span&gt;                         android:checked=&quot;false&quot; /&amp;gt;
&lt;span&gt; 79&lt;/span&gt;                     &amp;lt;RadioButton android:id=&quot;@+id/checkbox_unmetered&quot;
&lt;span&gt; 80&lt;/span&gt;                         android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 81&lt;/span&gt;                         android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 82&lt;/span&gt;                         android:text=&quot;@string/unmetered&quot;
&lt;span&gt; 83&lt;/span&gt;                         android:checked=&quot;false&quot; /&amp;gt;
&lt;span&gt; 84&lt;/span&gt;                 &amp;lt;/RadioGroup&amp;gt;
&lt;span&gt; 85&lt;/span&gt; 
&lt;span&gt; 86&lt;/span&gt;             &amp;lt;/LinearLayout&amp;gt;
&lt;span&gt; 87&lt;/span&gt;             &amp;lt;&lt;span&gt;LinearLayout
&lt;/span&gt;&lt;span&gt; 88&lt;/span&gt;                 android:layout_width=&quot;match_parent&quot;
&lt;span&gt; 89&lt;/span&gt;                 android:layout_height=&quot;wrap_content&quot;&amp;gt;
&lt;span&gt; 90&lt;/span&gt;                 &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt; 91&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 92&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 93&lt;/span&gt;                     android:text=&quot;@string/timing&quot;/&amp;gt;
&lt;span&gt; 94&lt;/span&gt;                 &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt; 95&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt; 96&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt; 97&lt;/span&gt;                     android:layout_marginLeft=&quot;15dp&quot;
&lt;span&gt; 98&lt;/span&gt;                     android:textSize=&quot;17dp&quot;
&lt;span&gt; 99&lt;/span&gt;                     android:text=&quot;@string/delay&quot;/&amp;gt;
&lt;span&gt;100&lt;/span&gt;                 &amp;lt;&lt;span&gt;EditText
&lt;/span&gt;&lt;span&gt;101&lt;/span&gt;                     android:id=&quot;@+id/delay_time&quot;
&lt;span&gt;102&lt;/span&gt;                     android:layout_width=&quot;60dp&quot;
&lt;span&gt;103&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;104&lt;/span&gt;                     android:inputType=&quot;number&quot;/&amp;gt;
&lt;span&gt;105&lt;/span&gt;                 &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt;106&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt;107&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;108&lt;/span&gt;                     android:text=&quot;@string/deadline&quot;
&lt;span&gt;109&lt;/span&gt;                     android:textSize=&quot;17dp&quot;/&amp;gt;
&lt;span&gt;110&lt;/span&gt;                 &amp;lt;&lt;span&gt;EditText
&lt;/span&gt;&lt;span&gt;111&lt;/span&gt;                     android:id=&quot;@+id/deadline_time&quot;
&lt;span&gt;112&lt;/span&gt;                     android:layout_width=&quot;60dp&quot;
&lt;span&gt;113&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;114&lt;/span&gt;                     android:inputType=&quot;number&quot;/&amp;gt;
&lt;span&gt;115&lt;/span&gt;             &amp;lt;/LinearLayout&amp;gt;
&lt;span&gt;116&lt;/span&gt;             &amp;lt;&lt;span&gt;LinearLayout
&lt;/span&gt;&lt;span&gt;117&lt;/span&gt;                 android:layout_width=&quot;match_parent&quot;
&lt;span&gt;118&lt;/span&gt;                 android:layout_height=&quot;wrap_content&quot;&amp;gt;
&lt;span&gt;119&lt;/span&gt;                 &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt;120&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt;121&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;122&lt;/span&gt;                     android:text=&quot;@string/charging_caption&quot;
&lt;span&gt;123&lt;/span&gt;                     android:layout_marginRight=&quot;15dp&quot;/&amp;gt;
&lt;span&gt;124&lt;/span&gt;                 &amp;lt;&lt;span&gt;CheckBox
&lt;/span&gt;&lt;span&gt;125&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt;126&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;127&lt;/span&gt;                     android:id=&quot;@+id/checkbox_charging&quot;
&lt;span&gt;128&lt;/span&gt;                     android:text=&quot;@string/charging_text&quot;/&amp;gt;
&lt;span&gt;129&lt;/span&gt;             &amp;lt;/LinearLayout&amp;gt;
&lt;span&gt;130&lt;/span&gt;             &amp;lt;&lt;span&gt;LinearLayout
&lt;/span&gt;&lt;span&gt;131&lt;/span&gt;                 android:layout_width=&quot;match_parent&quot;
&lt;span&gt;132&lt;/span&gt;                 android:layout_height=&quot;wrap_content&quot;&amp;gt;
&lt;span&gt;133&lt;/span&gt;                 &amp;lt;&lt;span&gt;TextView
&lt;/span&gt;&lt;span&gt;134&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt;135&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;136&lt;/span&gt;                     android:text=&quot;@string/idle_caption&quot;
&lt;span&gt;137&lt;/span&gt;                     android:layout_marginRight=&quot;15dp&quot;/&amp;gt;
&lt;span&gt;138&lt;/span&gt;                 &amp;lt;&lt;span&gt;CheckBox
&lt;/span&gt;&lt;span&gt;139&lt;/span&gt;                     android:layout_width=&quot;wrap_content&quot;
&lt;span&gt;140&lt;/span&gt;                     android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;141&lt;/span&gt;                     android:id=&quot;@+id/checkbox_idle&quot;
&lt;span&gt;142&lt;/span&gt;                     android:text=&quot;@string/idle_mode_text&quot;/&amp;gt;
&lt;span&gt;143&lt;/span&gt;             &amp;lt;/LinearLayout&amp;gt;
&lt;span&gt;144&lt;/span&gt; 
&lt;span&gt;145&lt;/span&gt;         &amp;lt;/LinearLayout&amp;gt;
&lt;span&gt;146&lt;/span&gt;         &amp;lt;&lt;span&gt;Button
&lt;/span&gt;&lt;span&gt;147&lt;/span&gt;             android:id=&quot;@+id/schedule_button&quot;
&lt;span&gt;148&lt;/span&gt;             android:layout_width=&quot;match_parent&quot;
&lt;span&gt;149&lt;/span&gt;             android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;150&lt;/span&gt;             android:layout_marginTop=&quot;20dp&quot;
&lt;span&gt;151&lt;/span&gt;             android:layout_marginLeft=&quot;40dp&quot;
&lt;span&gt;152&lt;/span&gt;             android:layout_marginRight=&quot;40dp&quot;
&lt;span&gt;153&lt;/span&gt;             android:onClick=&quot;scheduleJob&quot;
&lt;span&gt;154&lt;/span&gt;             android:text=&quot;@string/schedule_job_button_text&quot;/&amp;gt;
&lt;span&gt;155&lt;/span&gt;         &amp;lt;&lt;span&gt;Button
&lt;/span&gt;&lt;span&gt;156&lt;/span&gt;             android:id=&quot;@+id/cancel_button&quot;
&lt;span&gt;157&lt;/span&gt;             android:layout_width=&quot;match_parent&quot;
&lt;span&gt;158&lt;/span&gt;             android:layout_height=&quot;wrap_content&quot;
&lt;span&gt;159&lt;/span&gt;             android:layout_marginLeft=&quot;40dp&quot;
&lt;span&gt;160&lt;/span&gt;             android:layout_marginRight=&quot;40dp&quot;
&lt;span&gt;161&lt;/span&gt;             android:onClick=&quot;cancelAllJobs&quot;
&lt;span&gt;162&lt;/span&gt;             android:text=&quot;@string/cancel_all_jobs_button_text&quot;/&amp;gt;
&lt;span&gt;163&lt;/span&gt;     &amp;lt;/LinearLayout&amp;gt;
&lt;span&gt;164&lt;/span&gt; &amp;lt;/ScrollView&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span class=&quot;RichText CopyrightRichText-richText&quot; data-reactid=&quot;292&quot;&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;好了，本篇到此结束，希望通过本篇介绍你能正确使用JobScheduler这个强大的工具，有些任务放在适合的时机来做更加适宜。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 12 Jan 2018 03:29:00 +0000</pubDate>
<dc:creator>WangLei_ClearHeart</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/leipDao/p/8268918.html</dc:identifier>
</item>
<item>
<title>docker：（5）利用docker -v 和 Publish over SSH插件实现war包自动部署到docker - 肖哥哥</title>
<link>http://www.cnblogs.com/xiaochangwei/p/8274506.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiaochangwei/p/8274506.html</guid>
<description>&lt;p&gt;在 &lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2&quot; href=&quot;http://www.cnblogs.com/xiaochangwei/p/8205067.html&quot;&gt;docker：（3）docker容器挂载宿主主机目录&lt;/a&gt; 中介绍了运行docker时的一个重要命令 -v&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
sudo docker run -p &lt;span&gt;8822&lt;/span&gt;:&lt;span&gt;8080&lt;/span&gt; --name tomcat_xiao_volume -v /home/xiaochangwei/test:/usr/local/tomcat/webapps xiaochangwei/tomcat:v1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;将容器内部目录和宿主主机目录进行关联，这样操作宿主主机关联目录时，就会同步关联操作了容器对应目录，&lt;/p&gt;
&lt;p&gt;这在发布war包时尤其有用， 容器启动后就无需再关心了，只需要将需要更新的war包拷贝到关联的目录就可以了&lt;/p&gt;

&lt;p&gt;本篇文章就是为了简化拷贝工作&lt;/p&gt;
&lt;p&gt;&lt;a id=&quot;homepage1_HomePageDays_DaysList_ctl00_DayList_TitleUrl_0&quot; class=&quot;postTitle2&quot; href=&quot;http://www.cnblogs.com/xiaochangwei/p/8268509.html&quot;&gt;docker：（4）利用WebHook实现持续集成&lt;/a&gt; 中实现了git提交代码触发jenkins自动打包并部署到远程tomcat中，这里讲怎么部署到docker中&lt;/p&gt;

&lt;p&gt;首先已经得到war包了，下面要做的就是怎么把war包拷贝到docker容器关联的宿主主机对应目录&lt;/p&gt;
&lt;p&gt;jenkins提供了插件Publish over SSH  官方介绍&lt;a href=&quot;https://wiki.jenkins.io/display/JENKINS/Publish+Over+SSH+Plugin&quot; target=&quot;_blank&quot;&gt;https://wiki.jenkins.io/display/JENKINS/Publish+Over+SSH+Plugin&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;操作步骤：&lt;/p&gt;
&lt;p&gt;　　1.安装插件 Publish over SSH&lt;/p&gt;
&lt;p&gt;　　2.在系统管理-系统设置最后设置ssh server信息 如下：&lt;/p&gt;
&lt;p&gt;　　　　&lt;img src=&quot;http://images2017.cnblogs.com/blog/658609/201801/658609-20180112102149582-920267555.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　　　解释下：&lt;/p&gt;
&lt;p&gt;　　　　　　Passphrase 　　： 主机的登录密码&lt;/p&gt;
&lt;p&gt;　　　　　　Hostname　　　： 主机的地址&lt;/p&gt;
&lt;p&gt;　　　　　　Username　　　：主机的登录账号&lt;/p&gt;
&lt;p&gt;　　　　　　Remote Directory：根路径 （&lt;span&gt;&lt;strong&gt;注意后续的路径都是相对这个路径来操作的，最好设置为 /&lt;/strong&gt;&lt;/span&gt;）　　&lt;/p&gt;
&lt;p&gt;　　　　配置好后，点击测试配置，显示成功后保存关闭&lt;/p&gt;

&lt;p&gt;　　3. 在具体项目中勾选 Send files or execute commands over SSH after the build runs 并配置如下&lt;/p&gt;
&lt;p&gt;　　　　&lt;img src=&quot;http://images2017.cnblogs.com/blog/658609/201801/658609-20180112103902551-1227236327.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　　　解释下参数：&lt;/p&gt;
&lt;p&gt;　　　　Name　　　　： 就是上一步配置的server名字，下拉选择&lt;/p&gt;
&lt;p&gt;　　　　source File　　：就是war包路径  jenkins打包后再target目录下&lt;/p&gt;
&lt;p&gt;　　　　prefix　　　　： 就是war包路径的前缀，去掉前缀后就是war包了&lt;/p&gt;
&lt;p&gt;　　　　Remote directory： 需要放到远程服务器的目录，&lt;/p&gt;

&lt;p&gt;　　　　　　需要注意的是，这里是相对于第二步中Remote Directory的路径， 比如第2步我设置的是/root  如果这里我这只为 /package  那么对应的目标路径就是/root/packages&lt;/p&gt;
&lt;p&gt;　　　　　　这里问了更好的区分，我使用了时间戳，这就需要勾选上 Remote directory is a date format，并且非时间格式的地方都需要用引号包含起来&lt;/p&gt;
&lt;p&gt;　　　　　　比如我这里设置的是 '/packages/'yyyyMMddHHmmss-${BUILD_NUMBER}   最后的${BUILD_NUMBER}是jenkins变量，就是打包次数，和last buid对应&lt;/p&gt;
&lt;p&gt;　　　　Exec command： 是需要执行的命令，可以设置任何linx可以执行的命令或者shell脚本&lt;/p&gt;
&lt;p&gt;　　　　设置好后保存，打包测试：&lt;/p&gt;
&lt;p&gt;　　　　&lt;img src=&quot;http://images2017.cnblogs.com/blog/658609/201801/658609-20180112110553660-33656121.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　　　根据控制台输出，可以看出设置的shell命令也执行了，而且提示文件也上传到配置的服务器上了（后的137错误是因为我的阿里云服务器内存太小，自动部署到tomcat上失败了，这个与本次讲的无关，请忽略）&lt;/p&gt;
&lt;p&gt;　　　　注意此次打包号为 &lt;span&gt;&lt;strong&gt;#27&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;span&gt;到服务器上对应目录看下上传情况&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　　　&lt;img src=&quot;http://images2017.cnblogs.com/blog/658609/201801/658609-20180112110911722-1124216798.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　　　证明war包已经上传到了对应的目录了&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;span&gt;　　　　这样 就可以设置对应的目录和docker容器关联后，实现war包的自动更新发布和备份了，这里加了时间戳适合于备份，单纯的发布就不要加时间戳了&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 12 Jan 2018 02:24:00 +0000</pubDate>
<dc:creator>肖哥哥</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xiaochangwei/p/8274506.html</dc:identifier>
</item>
<item>
<title>Java基础(五)-Java序列化与反序列化 - 玉树临枫</title>
<link>http://www.cnblogs.com/yuanfy008/p/8269337.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yuanfy008/p/8269337.html</guid>
<description>&lt;p&gt;本文主要从以下方面记录：&lt;/p&gt;
&lt;p&gt;1、Java序列化和反序列化是什么？&lt;/p&gt;
&lt;p&gt;2、为什么需要序列化与反序列化？&lt;/p&gt;
&lt;p&gt;3、怎么实现Java序列化和反序列化?&lt;/p&gt;
&lt;p&gt;4、几个序列化注意事项&lt;/p&gt;

&lt;p&gt;　　通俗的来讲，序列化过程就是将对象转成二进制流存入内存或者文件，反序列化从内存或文件中读取二进制流转换成对象。&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://images2017.cnblogs.com/blog/690169/201801/690169-20180111162016285-1078625662.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;　　其实这个问题也就是它们的应用场景有哪些？这样就容易回答多了。比如文件（文本、图片等）进行传输，这些文件都是通过二进制序列的形式进行传输的（序列化过程），而接收方则要读取这些二进制数据进行相对应的转换（反序列化过程）。除了这个它主要用于网络传输（进程之间的通信等）。&lt;/p&gt;

&lt;p&gt;　　要想实现序列化有个必要条件就是要实现&lt;span&gt;Serializable接口或Externalizable接口&lt;/span&gt;。大部分可能只知道有Serializable接口没有关注Externalizable接口，那么你看了本文之后就应该知道了，后面再介绍它们的区别。&lt;/p&gt;
&lt;p&gt;　　有了上面个必要条件后还需要借助jdk中有两个类：java.io.ObjectOutputStream和java.io.ObjectInputStream，它们分别负责序列化和反序列化。我们可以看下这两个类的说明就知道是这两个类负责相对应的功能。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * An &lt;span&gt;ObjectOutputStream&lt;/span&gt; writes primitive data types and graphs of Java objects
 * to an OutputStream.  The objects can be read (reconstituted) using an
 * ObjectInputStream.  Persistent storage of objects can be accomplished by
 * using a file for the stream.  If the stream is a network socket stream, the
 * objects can be reconstituted on another host or in another process.
 *
 * &amp;lt;p&amp;gt;&lt;span&gt;Only objects that support the java.io.Serializable interface can be
 * written to streams.&lt;/span&gt;  The class of each serializable object is encoded
 * including the class name and signature of the class, the values of the
 * object's fields and arrays, and the closure of any other objects referenced
 * from the initial objects.
 * ...
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ObjectOutputStream
    &lt;/span&gt;&lt;span&gt;extends&lt;/span&gt; OutputStream &lt;span&gt;implements&lt;/span&gt; ObjectOutput, ObjectStreamConstants{}
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * &lt;span&gt;An ObjectInputStream deserializes primitive data and objects previously
 * written using an ObjectOutputStream.&lt;/span&gt;
 *
 * &amp;lt;p&amp;gt;ObjectOutputStream and ObjectInputStream can provide an application with
 * persistent storage for graphs of objects when used with a FileOutputStream
 * and FileInputStream respectively.  ObjectInputStream is used to recover
 * those objects previously serialized. Other uses include passing objects
 * between hosts using a socket stream or for marshaling and unmarshaling
 * arguments and parameters in a remote communication system.
 * ...
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ObjectInputStream
    &lt;/span&gt;&lt;span&gt;extends&lt;/span&gt; InputStream &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; ObjectInput, ObjectStreamConstants{
}    &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　下面我们以学生对象为例，将对象序列化保存至文件中，再从文件中反序列化转换成对象。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.Serializable;

&lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * @Description: 学生类 已实现序列化接口
 * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; yuanfy
 * @date 2018年1月11日 上午11:36:37 
 * &lt;/span&gt;&lt;span&gt;@version&lt;/span&gt;&lt;span&gt; 1.0
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; Student &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Serializable{

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; serialVersionUID = 6415983562512521049L&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String name;
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; age;
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String sex;
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Student(String name, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; age, String sex) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; name;
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.age =&lt;span&gt; age;
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sex =&lt;span&gt; sex;
    }
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getName() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; name;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setName(String name) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; name;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; getAge() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; age;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setAge(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; age) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.age =&lt;span&gt; age;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getSex() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; sex;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setSex(String sex) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sex =&lt;span&gt; sex;
    }
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String toString() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &quot;Student [name=&quot; + name + &quot;, age=&quot; + age + &quot;, sex=&quot; + sex + &quot;]&quot;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　上面已经定义Java对象， &lt;strong&gt;&lt;span&gt;下面进行序列化测试&lt;/span&gt;&lt;/strong&gt;。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; testSerializable() &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; FileNotFoundException, IOException{
        Student s &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Student(&quot;james&quot;, 31, &quot;man&quot;&lt;span&gt;);
        ObjectOutputStream oos &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ObjectOutputStream(&lt;span&gt;new&lt;/span&gt; FileOutputStream(&lt;span&gt;new&lt;/span&gt; File(&quot;E:\\Student.txt&quot;&lt;span&gt;)));
        oos.writeObject(s);
        oos.close();
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 　　如果电脑E盘存在的话运行肯定通过（windows系统），单元测试通过后（说明序列化过程已完成）查看Student.txt文件中的内容，如下：&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://images2017.cnblogs.com/blog/690169/201801/690169-20180111172916660-1123951721.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　上面是正常的情况， &lt;strong&gt;如果Student类没有实现Serializable接口呢？那么序列化时会存在什么样的问题&lt;/strong&gt;。我们把Student类去掉Serializable接口的实现，然后再进行序列化测试。这时你会发现单元测试后不通过，先看看报错原因：下面截图中的错误信息提示Student类没有被序列化。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/690169/201801/690169-20180111173624613-1997937339.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;　　那么为什么java.io.ObjectOutputStream类会抛出这样的异常呢，它是怎么识别有没有实现Serializable接口的。接下来，我们来看看他的源码：writeObject方法中调用了writeObject()方法，所以主要逻辑在它里面。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * Underlying writeObject/writeUnshared implementation.
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; writeObject0(Object obj, &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; unshared)
        &lt;/span&gt;&lt;span&gt;throws&lt;/span&gt;&lt;span&gt; IOException
    {
        &lt;/span&gt;&lt;span&gt;boolean&lt;/span&gt; oldMode = bout.setBlockDataMode(&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
        depth&lt;/span&gt;++&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;前面部分代码省略
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; remaining cases&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; (obj &lt;span&gt;instanceof&lt;/span&gt;&lt;span&gt; String) {
                writeString((String) obj, unshared);
            } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (cl.isArray()) {
                writeArray(obj, desc, unshared);
            } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (obj &lt;span&gt;instanceof&lt;/span&gt;&lt;span&gt; Enum) {
                writeEnum((Enum&lt;/span&gt;&amp;lt;?&amp;gt;&lt;span&gt;) obj, desc, unshared);
            } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (obj &lt;span&gt;instanceof&lt;/span&gt; Serializable) {&lt;span&gt;//&lt;/span&gt;&lt;span&gt;判断是否是Serializable的子类。&lt;/span&gt;
&lt;span&gt;                writeOrdinaryObject(obj, desc, unshared);
            } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;除了String类型、数组类型和枚举类型，其他对象如果没有实现Serializable接口，都会抛出NotSerializableException异常&lt;/span&gt;
                &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (extendedDebugInfo) {
                    &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; NotSerializableException(
                        cl.getName() &lt;/span&gt;+ &quot;\n&quot; +&lt;span&gt; debugInfoStack.toString());
                } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; NotSerializableException(cl.getName());
                }
            }
        } &lt;/span&gt;&lt;span&gt;finally&lt;/span&gt;&lt;span&gt; {
            depth&lt;/span&gt;--&lt;span&gt;;
            bout.setBlockDataMode(oldMode);
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　从中可以看出，&lt;span&gt;除了String类型、数组类型和枚举类型，其他对象如果没有实现Serializable接口，都会抛出NotSerializableException异常。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;strong&gt;接下来进行反序列化测试：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; testDeserialize() &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; FileNotFoundException, IOException, ClassNotFoundException{
        ObjectInputStream ois &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ObjectInputStream(&lt;span&gt;new&lt;/span&gt; FileInputStream(&lt;span&gt;new&lt;/span&gt; File(&quot;E:\\Student.txt&quot;&lt;span&gt;)));
        Student s &lt;/span&gt;=&lt;span&gt; (Student)&lt;strong&gt;ois.readObject()&lt;/strong&gt;;
        System.out.println(s);
        ois.close();
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;　　在进行正常的序列化测试后接着测试反序列化测试，正常来说是不会报错的。看看测试结果就明了了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/690169/201801/690169-20180111180003847-1480094960.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　同样上面是正常的情况。接下来异常的情况就能体现出Student类中&lt;strong&gt;serialVersionUID变量的作用&lt;/strong&gt;了：&lt;strong&gt;它就是验证序列化与反序列化的唯一性。&lt;/strong&gt;在序列化后修改Student类中的serialVersionUID= 61234L,然后再测试反序列化，测试结果如下：&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://images2017.cnblogs.com/blog/690169/201801/690169-20180111183339410-652750244.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt; 　　从错误提示中可以看出，会从解析出来的serialVersionUID和要转换的class中serialVersionUID做对比，判断是否相等。java.io.ObjectStreamClass关键源码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
     * Initializes class descriptor representing a non-proxy class.
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;void&lt;/span&gt;&lt;span&gt; initNonProxy(ObjectStreamClass model,
                      Class&lt;/span&gt;&amp;lt;?&amp;gt;&lt;span&gt; cl,
                      ClassNotFoundException resolveEx,
                      ObjectStreamClass superDesc)
        &lt;/span&gt;&lt;span&gt;throws&lt;/span&gt;&lt;span&gt; InvalidClassException
    {
        &lt;/span&gt;&lt;span&gt;long&lt;/span&gt; suid =&lt;span&gt; Long.valueOf(model.getSerialVersionUID());
        ObjectStreamClass osc &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (cl != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            osc &lt;/span&gt;= lookup(cl, &lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (osc.isProxy) {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; InvalidClassException(
                        &lt;/span&gt;&quot;cannot bind non-proxy descriptor to a proxy class&quot;&lt;span&gt;);
            }
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (model.isEnum !=&lt;span&gt; osc.isEnum) {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; InvalidClassException(model.isEnum ?
                        &quot;cannot bind enum descriptor to a non-enum class&quot;&lt;span&gt; :
                        &lt;/span&gt;&quot;cannot bind non-enum descriptor to an enum class&quot;&lt;span&gt;);
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里会判断serialVersionUID是否一致&lt;/span&gt;
            &lt;span&gt;if (model.serializable == osc.serializable &amp;amp;&amp;amp;
                    !cl.isArray() &amp;amp;&amp;amp;
                    suid != osc.getSerialVersionUID()) {
                &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; InvalidClassException(osc.name,
                        &lt;/span&gt;&quot;local class incompatible: &quot; +
                                &quot;stream classdesc serialVersionUID = &quot; + suid +
                                &quot;, local class serialVersionUID = &quot; +&lt;span&gt;
                                osc.getSerialVersionUID());
            }
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;后面代码略&lt;/span&gt;
&lt;span&gt;        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;　　1、对继承父类的子类序列化&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Person {
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; age;
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; weight;
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Person(&lt;span&gt;int&lt;/span&gt; age, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; weight) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.age =&lt;span&gt; age;
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.weight =&lt;span&gt; weight;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; getAge() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; age;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setAge(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; age) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.age =&lt;span&gt; age;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; getWeight() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; weight;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setWeight(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; weight) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.weight =&lt;span&gt; weight;
    }
    
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.Serializable;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; Women &lt;span&gt;extends&lt;/span&gt; Person &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Serializable{
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; serialVersionUID = -1259423203325949704L&lt;span&gt;;
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String name;
  
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Women(String name, &lt;span&gt;int&lt;/span&gt; age, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; weight) {
        &lt;/span&gt;&lt;span&gt;super&lt;/span&gt;&lt;span&gt;(age, weight);
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; name;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getName() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; name;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setName(String name) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; name;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String toString() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &quot;Student [name=&quot; + name + &quot;, age=&quot; + age + &quot;, weight=&quot; + weight + &quot;]&quot;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　单元测试代码如下，先猜错下会不会运行通过，结果又是啥？&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; test2() &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; FileNotFoundException, IOException, ClassNotFoundException{
        Women w &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Women(&quot;Scarlett Johansson&quot;, 34, 50&lt;span&gt;);
        ObjectOutputStream oos &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ObjectOutputStream(&lt;span&gt;new&lt;/span&gt; FileOutputStream(&lt;span&gt;new&lt;/span&gt; File(&quot;E:\\Women.txt&quot;&lt;span&gt;)));
        oos.writeObject(w);
        oos.close();
        
        ObjectInputStream ois &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ObjectInputStream(&lt;span&gt;new&lt;/span&gt; FileInputStream(&lt;span&gt;new&lt;/span&gt; File(&quot;E:\\Women.txt&quot;&lt;span&gt;)));
        Women s &lt;/span&gt;=&lt;span&gt; (Women)ois.readObject();
        System.out.println(s);
        ois.close();
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　测试结果如下，居然报错。该错误提示需要提供无参构造函数(During deserialization, the fields of non-serializable classes will be initialized using the public or protected no-arg constructor of the class. A no-arg constructor must be accessible to the subclass that is serializable. The fields of serializable subclasses will be restored from the stream.)，具体详情解释见这&lt;a href=&quot;https://docs.oracle.com/javase/1.5.0/docs/api/java/io/Serializable.html&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://images2017.cnblogs.com/blog/690169/201801/690169-20180111194820129-1135464786.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　当我们提供无参构造函数后再进行单元测试得到结果：Student [name=Scarlett Johansson, age=0, weight=0]。所以可以得出结论：&lt;strong&gt;父类中的字段不参与序列化，只是将其初始化而已。&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;　　2、transient 关键字&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt; 　　&lt;strong&gt;使用transient关键字来修饰变量，然后进行序列化（&lt;/strong&gt;&lt;strong&gt;&lt;strong&gt;在实现serializable接口情况下&lt;/strong&gt;&lt;/strong&gt;）效果其实和父类的序列化一样，它所修饰的变量不参与序列化。这里就不举例说明了，自己可以写个案例测试下。&lt;/p&gt;
&lt;p&gt;　　另外transient关键字只能修饰变量， 不能修饰类和方法。&lt;/p&gt;
&lt;p&gt;　　&lt;strong&gt;3、static关键字&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　&lt;/strong&gt;使用static关键字来修饰变量，不管有没有&lt;strong&gt;transient修饰，&lt;/strong&gt;同样不参与序列化&lt;strong&gt;（在实现serializable接口情况下）&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;　　4、Externalizable接口&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　 Externalizable接口extends Serializable接口，而且在其基础上增加了两个方法：writeExternal()和readExternal()。这两个方法会在序列化和反序列化还原的过程中被自动调用，以便执行一些特殊的操作。&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;&lt;span&gt;下面看案例：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.Externalizable;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.IOException;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.ObjectInput;
&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.io.ObjectOutput;

&lt;/span&gt;&lt;span&gt;/**&lt;/span&gt;&lt;span&gt;
 * @Description: 学生类 已实现序列化接口
 * &lt;/span&gt;&lt;span&gt;@author&lt;/span&gt;&lt;span&gt; yuanfy
 * @date 2018年1月11日 上午11:36:37 
 * &lt;/span&gt;&lt;span&gt;@version&lt;/span&gt;&lt;span&gt; 1.0
 &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; Student &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Externalizable{

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; serialVersionUID = 61234L&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String name;
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;transient&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; age;
    
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; String sex;
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;如果覆盖了无参构造函数就一定要显示声明无参构造函数，跟父类序列化的案例一样。&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt;&lt;span&gt; Student(){}
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Student(String name, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; age, String sex) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; name;
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.age =&lt;span&gt; age;
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sex =&lt;span&gt; sex;
    }
    
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt;  String getName() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; name;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setName(String name) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; name;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; getAge() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; age;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setAge(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; age) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.age =&lt;span&gt; age;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String getSex() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; sex;
    }
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; setSex(String sex) {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sex =&lt;span&gt; sex;
    }
    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String toString() {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &quot;Student [name=&quot; + name + &quot;, age=&quot; + age + &quot;, sex=&quot; + sex + &quot;]&quot;&lt;span&gt;;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; writeExternal(ObjectOutput out) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; IOException {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; TODO Auto-generated method stub&lt;/span&gt;
&lt;span&gt;        out.writeUTF(name);
        out.writeInt(age);
        out.writeObject(sex);
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; readExternal(ObjectInput in) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; IOException, ClassNotFoundException {
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.name =&lt;span&gt; in.readUTF();
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.age =&lt;span&gt; in.readInt();
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.sex =&lt;span&gt; (String)in.readObject();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;    @Test
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; test3() &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; FileNotFoundException, IOException, ClassNotFoundException{
        Student s1 &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Student(&quot;james&quot;, 31, &quot;man&quot;&lt;span&gt;);
        ObjectOutputStream oos &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ObjectOutputStream(&lt;span&gt;new&lt;/span&gt; FileOutputStream(&lt;span&gt;new&lt;/span&gt; File(&quot;E:\\Student.txt&quot;&lt;span&gt;)));
        oos.writeObject(s1);
        oos.close();
        
        ObjectInputStream ois &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; ObjectInputStream(&lt;span&gt;new&lt;/span&gt; FileInputStream(&lt;span&gt;new&lt;/span&gt; File(&quot;E:\\Student.txt&quot;&lt;span&gt;)));
        Student s2 &lt;/span&gt;=&lt;span&gt; (Student)ois.readObject();
        System.out.println(s2);
        ois.close();
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;　　上面是正常完整案例，其中要注意的是，&lt;span&gt;要序列化的类要提供无参构造函数，否则反序列化会报错（When an Externalizable object is reconstructed, an instance is created using the public no-arg constructor, then the readExternal method called. Serializable objects are restored by reading them from an ObjectInputStream.）详解&lt;a href=&quot;https://docs.oracle.com/javase/1.5.0/docs/api/java/io/Externalizable.html&quot; target=&quot;_blank&quot;&gt;here&lt;/a&gt;。&lt;span&gt;得出结论如下：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;span&gt;&lt;strong&gt;与Serizable对象不同，使用Externalizabled，就意味着没有任何东西可以自动序列化， 为了正常的运行，我们需要在writeExtenal()方法中将自对象的重要信息写入，从而手动的完成序列化。对于一个Externalizabled对象，对象的默认构造函数都会被调用（包括哪些在定义时已经初始化的字段），然后调用readExternal()，在此方法中必须手动的恢复数据。&lt;/strong&gt;这就说明在Externalizable接口下不管是transient或static修饰的变量，如果没有指定写入，就会序列化。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 12 Jan 2018 02:14:00 +0000</pubDate>
<dc:creator>玉树临枫</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/yuanfy008/p/8269337.html</dc:identifier>
</item>
<item>
<title>怎么让研发做好他们不重视但是对测试很重要的事情？ - 张老师的小黑屋</title>
<link>http://www.cnblogs.com/scios/p/8274415.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/scios/p/8274415.html</guid>
<description>&lt;p&gt;&lt;strong&gt;一、问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://mmbiz.qpic.cn/mmbiz_png/gV9XewCoX0H81pXLBVy21HWZaicTGGqomwuymnhE7mDr1bzFkWVdHiaxxbeic2hU99ZxcBOaaY9nSCmXJib16yQMDA/640?wx_fmt=png&amp;amp;tp=webp&amp;amp;wxfrom=5&amp;amp;wx_lazy=1&quot; alt=&quot;&quot; width=&quot;100%&quot; data-src=&quot;http://mmbiz.qpic.cn/mmbiz_png/gV9XewCoX0H81pXLBVy21HWZaicTGGqomwuymnhE7mDr1bzFkWVdHiaxxbeic2hU99ZxcBOaaY9nSCmXJib16yQMDA/0?wx_fmt=png&quot; data-ratio=&quot;0.0057143&quot; data-w=&quot;700&quot; data-type=&quot;png&quot; data-fail=&quot;0&quot;/&gt;&lt;/p&gt;
&lt;p&gt;作为测试人员，质量保障工作者，经常会面临各种各样的困难，比如：&lt;/p&gt;

&lt;ol&gt;&lt;li&gt;突然接到紧急需求或者故障单的验证，导致原本工作计划被中断，这还不算恼火，最让人恼火的是时间本来就紧张，却又在评估紧急需求的测试范围上耗费了大量时间；（测试范围不清晰）&lt;/li&gt;
&lt;li&gt;送测版本中，出现了很多违反设计标准的bug，我们花了很多时间在提bug、验bug、研发也花费了相当一部分时间去修改这类bug。问题是这类bug好像根本不应该出现；（设计规范类bug）&lt;/li&gt;
&lt;li&gt;研发提交了一个新版本，在这个版本中只修复了一个bug，回归通过上线后，却出现了几个以前没有的新问题，分析后发现是修复该bug时引入的！（测试人员不清楚回归范围）&lt;/li&gt;
&lt;li&gt;研发修改了一个小功能，为了不漏测，测试人员把系统做了一轮完整的遍历（测试人员不清楚回归范围）。&lt;/li&gt;
&lt;li&gt;提交了一个偶发性bug，研发回复说修复了。然后测试人员试了几遍没有再复现就把bug关闭了。结果到了线上以后又出现了（研发可能根本没有修改代码）；&lt;/li&gt;
&lt;li&gt;发现了一个以前出现过得bug，想不起这个bug的原因和解决方式了，也没有记录，只能重新分析一遍；（经验没有积累）&lt;/li&gt;
&lt;li&gt;在线上发现了一个bug，发紧急补丁修复了，过了一会又发现了另外一个bug，分析后发现跟第一个bug是同一个原因导致的；（研发做bug分析时不够充分）&lt;/li&gt;
&lt;li&gt;系统运维人员的能力大都是靠经验和时间积累成长下来的，组员之间的经验没有很好的传递，这导致线上出现以前出现过得问题后，运维新手不能很好的应对，导致本该他们的工作又转移到研发和测试人员身上来。（经验没有积累和传递）&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;　　基于这种情况，笔者提出了两项需要研发部门配合的改进措施。&lt;/p&gt;
&lt;p&gt;　　第一件是要求研发人员在修复bug后，在bug备注中添加必要的说明，包括“bug的原因”“怎么修改的”“这样修改会有哪些影响”；第二件工作是要求研发在需求提测时，以文字形式说明送测版本修改的内容和影响范围。其目的，一是让研发帮忙确认测试范围，其次避免研发在一些缺陷上没有找到真正的原因，再次是通过这样的方式，分析线上是否还存在未发现的可能存在的问题（问题7）&lt;/p&gt;
&lt;p&gt;　　老话说“上医治未病”。测试人员，作为项目的“医生”，我也希望部门从当前的“事后”检查，转移更多精力到“事前”的预防和“事中”的控制上来。&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　推行这两项措施对质量提升有多少帮助呢？ 投入产出值得吗？ &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　可以肯定的是，推行这项工作从一定程度上解决了开篇提到的那些问题，给测试人员的工作带来很多便利。对测试经理来说，也提供很多培训素材和工作汇报的内容；但目前在“质量提升”和“研发效率降低”两方面还没有很准确的结论。也没有很直接的证据表明，后期产品质量状况的改善跟推行这项工作有多大的关系。&lt;/p&gt;
&lt;p&gt;　　工作推行这两项工作想要推行成功，需要考虑多种条件，比如公司和团队的性质、项目阶段、团队氛围、以及要推行的范围等，所以前期一般不会很顺利。&lt;/p&gt;
&lt;p&gt;　　在上面说的因素都不是问题之后，或者说已经进入推行阶段，仍然很可能会出现其他问题，比如研发人员虽然作了备注但格式不符合要求，有人备注有人没有......&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;二、原因是什么？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　我听到最多的声音就是忙。&lt;/p&gt;
&lt;p&gt;　　我能理解，研发的压力确实很大，特别是作为一家互联网公司+创业公司，有时为了赶上进度，很多人甚至连续熬夜奋战很多天。在这种情况下，每个研发人员都把自己的精力放在重点工作上，对测试部提出来的流程和质量改进的问题难免会有一些疏忽。&lt;/p&gt;
&lt;p&gt;　　&lt;strong&gt;还有其他原因吗？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　我觉得，研发之所以不理睬我们的要求，还有一个可能的原因是研发人员没有意识到他们的一些做法给质量带来的影响，没有理解这种措施对质量的意义。&lt;/p&gt;
&lt;p&gt;　　当然，还会有其他的一些原因，比如关系不到位。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==&quot; alt=&quot;&quot; data-src=&quot;http://mmbiz.qpic.cn/mmbiz_png/gV9XewCoX0H81pXLBVy21HWZaicTGGqomaASUAH6DsttBsTyfsqVGRh7Lg5tOyymslyW97TqTQsqSPDwGoW7Eqw/0?wx_fmt=png&quot; data-ratio=&quot;0.9166667&quot; data-w=&quot;60&quot; data-type=&quot;png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;三、怎么破局？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;说一下我用过的一些方法。&lt;/p&gt;
&lt;p&gt;1、研发新员工培训：&lt;/p&gt;
&lt;p&gt;　　跟老板申请，新员工入职以后到测试部培训两周。这样一方面可以增进研发和测试人员的相互了解。另一方面，有些培训课程测试可以帮忙安排，这也可以减少研发自身培训的工作量。如果新员工经过了这样一个培训过程，他们就很清楚他们的一些做法对质量有么严重的影响，以后开发时应该也会更注意这些问题。&lt;/p&gt;
&lt;p&gt;　　测试经理可以招一个有研发经验的测试人员，这样的人可以较好的承担起培训工作。&lt;/p&gt;
&lt;p&gt;2、组织活动&lt;/p&gt;
&lt;p&gt;　　每月定期组织活动，跟研发一起去打打球、聚聚餐。既锻炼了身体，又增加了友谊。&lt;/p&gt;
&lt;p&gt;　　平时一起吃午饭也是很好的选择。&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;　　人不喜欢被强迫做事，但是人们愿意帮助朋友。对于强势部门采取强硬的手段通常不是好的做法，对方很容易利用自己的强势地位反击。在这种情况下建立友谊是更好的选择。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;3、发行质《质量简报》&lt;/p&gt;
&lt;p&gt;　　通过内部刊物，对研发人员持续引导。&lt;/p&gt;
&lt;p&gt;3、一些建议&lt;/p&gt;
&lt;p&gt;　　我们的要求其实对于研发来说并不难。而且有些问题比较适合让初级研发人员做个学习的阶段。可以跟研发经理建议，让新人负责解决标准的问题，这样的话，既不占用老员工的工作时间，又能充分利用新员工的工作积极性。而且还可以通过这个过程培养新员工，发现可塑之才。&lt;/p&gt;
&lt;p&gt;　　当然，要解决好开篇提到的那些问题，还需要测试部提升一下内功，那就是后话了。&lt;/p&gt;
&lt;p&gt;　　欢迎加我微信号来交流。欢迎关注我的微信公众号：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://images2017.cnblogs.com/blog/721089/201801/721089-20180112100322519-34967410.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 12 Jan 2018 02:07:00 +0000</pubDate>
<dc:creator>张老师的小黑屋</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/scios/p/8274415.html</dc:identifier>
</item>
</channel>
</rss>