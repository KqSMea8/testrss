<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>Python之MYsql、数据库 - 孟庆健</title>
<link>http://www.cnblogs.com/mengqingjian/p/8446551.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/mengqingjian/p/8446551.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;一、数据库的操作及安装&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1、安装&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;code class=&quot;python plain&quot;&gt; MySQL&lt;/code&gt;&lt;/strong&gt; &lt;strong&gt;&lt;code class=&quot;python plain&quot;&gt;Commu&lt;/code&gt;&lt;/strong&gt;&lt;strong&gt;&lt;code class=&quot;python plain&quot;&gt;nity&lt;/code&gt;&lt;/strong&gt; &lt;strong&gt;&lt;code class=&quot;python plain&quot;&gt;Server &lt;/code&gt;&lt;code class=&quot;python value&quot;&gt;5.7&lt;/code&gt;&lt;code class=&quot;python plain&quot;&gt;.&lt;/code&gt;&lt;code class=&quot;python value&quot;&gt;16   ----   版本&lt;/code&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、初始化&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;  mysqld&lt;/strong&gt;&lt;/em&gt; &lt;strong&gt;--inisialize-&lt;/strong&gt;&lt;strong&gt;insecure&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;3、启动&lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;  mysqld&lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;4、&lt;/strong&gt;启动MySQL客户端并连接MySQL服务&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt; mysqld&lt;/strong&gt;&lt;/em&gt; &lt;strong&gt;--initialize&lt;/strong&gt;&lt;strong&gt;-insecure命令，其默认未给root账户设置密码&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;5、查看是否MySQL启动&lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt; tasklist |findstr&lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/em&gt;&lt;strong&gt;&lt;strong&gt;mysql&lt;/strong&gt;&lt;/strong&gt;&lt;em&gt;&lt;strong&gt;&lt;em&gt;&lt;strong&gt;  &lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/em&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;6、数据库的基本命令&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;94&quot;&gt;
&lt;pre&gt;
mysqld --inisialize-insecure                                  初始化以没有密码的形式进入

mysqld                                                        启动mysqld

tasklist |findstr mysqld                                       查看是否mysql启动 
 
mysql -uroot -p                                               链接

quit                                                          退出

tskill mysql                                                  干掉mysql

mysqld --install                                              在winds 中安装mysqld

mysqladmin -uroot password 123                                设置密码
                                          
mysqld --skip-grant-tables                                    跳过受限直接启动mysqld

update mysql.user set authentication_string=
password(456) where user='root'and host='localhost';(5.7版本) 修改密码成功

update mysql.user set password=password(5.6版本)

flush privileges;                                             刷新权限

select user();                                                查看当前用户

create user 'mqj'@'localhost' identfied by '123';             创建本机账号

create user 'egon'@'%' identfied by '123'                     创建远程账号

create user 'wupeiqi'@'192.168.20.%' identified by '123'      创建远程网端账号

mysql -h192.168.20.99 -ualex -p123                            远程链接


数据库文件夹的的操作

create database db1 charset utf8;                             增加db1文件夹

show databases ;                                              查看所有数据库

show create database db1;                                     查看db1文件夹

drop database db1;                                            删除db1文件夹

alter database db1 charset gbk;                               修改db1编码

操作文件（表）
切换到文件下：
use db2                                                       切换文件夹

\c                                                            取消命令

create table t1(id int,name char(10));                        创建表



show  tables;                                                 查看当前文件下的所有表


show create table t1;                                         查看表

alter table t1 add age int;                                   增加字段

alter table t1 modify name char(12);                          改表中的名字字符
 
desc t1;                                                      查看表结构

drop table t1;                                                 删除表

操作文件的一行行内容（记录）

insert into db1.t1 values(1,'egon1'),(2,'egon2'),(3,'egon3');   增加记录

select * from t1;                                                查看所有字段对应的值

select  * from t1 where id&amp;gt;2;                                   查看id大于2的字段

select name from t1;                                             查看单个字段

update t1 set name='SB' where id=3;                              改里面的记录

delete from t1 where id=3;                                       删除一条记录

对于清空表的记录有两种方式，但是推荐使用后者
delete from t1;
truncate t1; #当数据量大的时候下，删除速度快                     整体删除


自增id
create table t2(id int primary key,name char(10)); 
create table t3(id int not null unique,name char(10)); 
create table t2(id int primary key auto_increment,name char(10)); 


补充
create table t6 select * from t5；                                  拷贝表


create table t7 select * from t5 where 1=2；                        拷贝表结构

alter tablet7 modify id int primary key auto_increment              改表结构

delete t7 set name='' ;                                             删除记录 





select database()                                             查看当前在那个文件夹下

insert into t1(id) values(1)                                   插数据的方式

select * from t1;                                              查看插入数据的内容
  
select * from t1;


数据类型
1、数字（默认都是有符号,宽度指的是显示宽度，与存储无关）
（1）tinyint [unsigned][zerofill]  (1个字节存)
        有符号：
            -128~~127
        无符号：
            0~~255
  （2） int [unsigned][zerofill]      （4个字节存）
         有符号：
             -2147483648~~2147482647
         无符号： 
             0~~4294967295     
 （3）bigint[unsigned][zerofill]   （8个字节存）
          有符号：
             -9223372036854775808~~9223372036854775808
           无符号：
             0~~494967295
2、字符（宽度指的是字符个数 与存储有关）：
     char   ：定长(简单粗暴，不够则凑够固定长度存放起来，浪费空间，存取速度快)
     varchar： 变长（精准，计算除待存放的数据长度，节省空间，存取速度慢）
3、日期
#注册时间
     datatime 2017-09-06 10:39:46
#出生年月日 ，开学时间
     data:2017-09-06
#聊天记录，上课时间
     time:10:39:46
#出生年
     year:2017
4、枚举与集合
enum枚举：规定一个范围，可有多个值，但是为该字段船只是，只能去规定范围中的一个
set集合：规定一个范围，可有多个值，但是为该字段船只是，只能去规定范围中的一个或多个




1：
整型测试
create table t1(id tinyint); 
create table t2(id int); 
create table t3(id bigint) ;

#测试
create table t4(salary float(5,2));

insert into t4 values(3.735);
insert into t4 values(3.735684);



2、char 与 varcahr测试
create table t6(name char(4));
insert into t6 values('alex')
insert into t6 values('欧德博爱')；
insert into t6 values('艾利克斯')；





create table t7(x char(5),y varchar(5));
insert into t7 values('addd','dsds') #char_length：查看字符长度
 insert into t7 values('你好啊'，'好你妹')#char_length：查看字符长度

了解
 insert into t7 values('你好啊'，'好你妹')#length:查看字节长度
 select char_length(x),char_length(y) from t7;



注意两点：
insert into t7 values('abc','abc');#length:查看字节长度
select * from t7 where y='abc    '; #去掉末尾的空格然后去比较

3、日期
create table student(
id int ,
name char(5),
born_date date,
born_year year,
reg_time datetime,
class_time time
);
insert into student values(1,'alex',now(),now(),now(),now());
insert into student values(1,'alex','2017-09-06','2017','2017-09-06 10:09:36','09:06:36');
 

4、枚举与集合
create table student1(
id int  primary key auto_increment,
name char(5),
sex enum('male','female'),
hobbies set('music','read','coding')
);

insert into student1(name,sex,hobbies) values('egon','male','music,read,coding');





1 简单查询
select * from employee;
select name,salary from employee;

2 where条件
select name,salary from employee where salary &amp;gt; 10000;
select name,salary from employee where salary &amp;gt; 10000 and salary &amp;lt; 20000;
select name,salary from employee where salary between 10000 and 20000;
select name,salary from employee where salary not between 10000 and 20000;

select name,salary from employee where salary = 10000 or salary = 20000 or salary = 30000;
select name,salary from employee where salary in (10000,20000,30000);


select * from employee where salary = 10000 or age = 18 or sex='male';

select * from employee where post_comment is Null;
select * from employee where post_comment = Null;
select * from employee where post_comment is not Null;

select * from employee where name like '%n%';

select * from employee where name like 'e__n';

3 group by分组
mysql&amp;gt; select depart_id,group_concat(name)  from employee group by depart_id;


mysql&amp;gt; select depart_id,count(id)  from employee group by depart_id;


mysql&amp;gt; select depart_id,group_concat(id)  from employee group by depart_id;


mysql&amp;gt; select depart_id,count(id)  from employee group by depart_id;


mysql&amp;gt; select depart_id,max(salary) from employee group by depart_id;


mysql&amp;gt; select depart_id,min(salary) from employee group by depart_id;


mysql&amp;gt; select depart_id,sum(salary) from employee group by depart_id;


mysql&amp;gt; select depart_id,avg(salary) from employee group by depart_id;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;二、数据库文件件的操作&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;create database db1 charset utf8; 增加db1文件夹

show databases ; 查看所有数据库

show create database db1; 查看db1文件夹

drop database db1; 删除db1文件夹

alter database db1 charset gbk; 修改db1编码&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;2、操作文件&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;切换到文件下：
use db2 切换文件夹

\c 取消命令

create table t1(id int,name char(&lt;/span&gt;10&lt;span&gt;)); 创建表


show tables; 查看当前文件下的所有表

show create table t1; 查看表

alter table t1 add age int; 增加字段

alter table t1 modify name char(&lt;/span&gt;12&lt;span&gt;); 改表中的名字字符

desc t1; 查看表结构

drop table t1; 删除表&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;3、操作文件一行行内容&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
insert into db1.t1 values(1,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;egon1&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),(2,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;egon2&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),(3,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;egon3&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;); 增加记录

select &lt;/span&gt;* &lt;span&gt;from&lt;/span&gt;&lt;span&gt; t1; 查看所有字段对应的值

select &lt;/span&gt;* &lt;span&gt;from&lt;/span&gt; t1 where id&amp;gt;2&lt;span&gt;; 查看id大于2的字段

select name &lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; t1; 查看单个字段

update t1 set name&lt;/span&gt;=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SB&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; where id=3&lt;span&gt;; 改里面的记录

delete &lt;/span&gt;&lt;span&gt;from&lt;/span&gt; t1 where id=3&lt;span&gt;; 删除一条记录

对于清空表的记录有两种方式，但是推荐使用后者
delete &lt;/span&gt;&lt;span&gt;from&lt;/span&gt;&lt;span&gt; t1;
truncate t1; &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;当数据量大的时候下，删除速度快 整体删除&lt;/span&gt;
&lt;span&gt;

自增id
create table t2(id int primary key,name char(&lt;/span&gt;10&lt;span&gt;)); 
create table t3(id int &lt;/span&gt;&lt;span&gt;not&lt;/span&gt; null unique,name char(10&lt;span&gt;)); 
create table t2(id int primary key auto_increment,name char(&lt;/span&gt;10));
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;4、一些不常用的操作&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
create table t6 select * &lt;span&gt;from&lt;/span&gt;&lt;span&gt; t5； 拷贝表

create table t7 select &lt;/span&gt;* &lt;span&gt;from&lt;/span&gt; t5 where 1=2&lt;span&gt;； 拷贝表结构

alter tablet7 modify id int primary key auto_increment 改表结构

delete t7 set name&lt;/span&gt;=&lt;span&gt;''&lt;/span&gt; ; 删除记录
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;三、数据库的设计&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;连表的有性能消耗&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;（1）、连表设计&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;方式一：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
                    &lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserType(models.Model):
                        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
                        用户类型表,个数经常变动
                        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
                        title &lt;/span&gt;= models.CharField(max_length=32&lt;span&gt;)

                    &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserInfo(models.Model):
                        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
                        用户表：讲师和班主任
                        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
                        username &lt;/span&gt;= models.CharField(max_length=32&lt;span&gt;)
                        password &lt;/span&gt;= models.CharField(max_length=64&lt;span&gt;)
                        email &lt;/span&gt;= models.CharField(max_length=32&lt;span&gt;)
                        ut &lt;/span&gt;= models.ForeignKey(to=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;UserType&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;方式二：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
                  -&lt;span&gt; choices
                        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; class UserInfo(models.Model):&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     &quot;&quot;&quot;&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     用户表&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     &quot;&quot;&quot;&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     username = models.CharField(max_length=32)&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     password = models.CharField(max_length=64)&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     email = models.CharField(max_length=32)&lt;/span&gt;
                        &lt;span&gt;#
&lt;/span&gt;                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     user_type_choices = (&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;         (1, '班主任'),&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;         (2, '讲师'),&lt;/span&gt;
                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     )&lt;/span&gt;
                        &lt;span&gt;#
&lt;/span&gt;                        &lt;span&gt;#&lt;/span&gt;&lt;span&gt;     user_type_id = models.IntegerField(choices=user_type_choices)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;四、事务&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;事务用于将某些操作的多个SQL作为原子性操作，一旦有某一个出现错误，&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;即可回滚到原来的状态，从而保证数据库数据完整性。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;五、存储&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;存储过程包含了一系列可执行的sql语句，存储过程存放于MySQL中，&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;通过调用它的名字可以执行其内部的一堆sql&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;使用存储过程的优点&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;   #1 程序与数据实现解耦&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;   #2 减少网络传输的数据量&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;六、数据库优化查询方式&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;   1、优化查询的两种方式：&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;                           &lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;                           （1）：prefetch_related&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;                           （2）：select_related&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;selsect_releated是主动连表，执行一次SQL&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;prefetch_releated不连表执行3次SQL&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;七、完整约束&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;    1、设置唯一约束&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如下：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;方法一：
create table department1(
id int,
name varchar(&lt;/span&gt;20&lt;span&gt;) unique,
comment varchar(&lt;/span&gt;100&lt;span&gt;)
);


方法二：
create table department2(
id int,
name varchar(&lt;/span&gt;20&lt;span&gt;),
comment varchar(&lt;/span&gt;100&lt;span&gt;),
constraint uk_name unique(name)
);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;八、数据库的备份&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1、备份与数据库的恢复&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
drop database day43; 删除原先的文件夹
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;show databases; 查看全部的文件夹

create database day43; 创建一个文件夹

use day43; 切换到day43这个文件夹下
source E:\\day43.sql; 恢复数据&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;1、登录MySQL恢复：&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;drop database day51;&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;create database day51;&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;source D:\\day51.sql;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;2、不登录MySQL直接在外面恢复；&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;    mysql -uroot day51 &amp;lt; D:\\day51.sql&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;（2）、恢复到指定的库中：&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;create database bak; 新建一个文件夹&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;use dak; 切换到dak这个文件夹下&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;mysql -uroot bak &amp;lt; D:\\day51.sql; 恢复数据&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; &lt;span&gt;&lt;strong&gt;九、关键字的优先级&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;from&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;where&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;group by&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;having&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;select&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;distinct&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;order by&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;limit&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
1.找到表:&lt;span&gt;from&lt;/span&gt;

2.拿着where指定的约束条件，去文件/&lt;span&gt;表中取出一条条记录

&lt;/span&gt;3&lt;span&gt;.将取出的一条条记录进行分组group by，如果没有group by，则整体作为一组

&lt;/span&gt;4&lt;span&gt;.按照select后的字段得到一张新的虚拟表，如果有聚合函数，则将组内数据进行聚合

&lt;/span&gt;5&lt;span&gt;.将4的结果过滤：having,如果有聚合函数也是先执行聚合再having过滤

&lt;/span&gt;6&lt;span&gt;.查出结果：select

&lt;/span&gt;7&lt;span&gt;.去重

&lt;/span&gt;8&lt;span&gt;.将结果按条件排序：order by

&lt;/span&gt;9.限制结果的显示条数
&lt;/pre&gt;&lt;/div&gt;



&lt;pre&gt;
&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;em id=&quot;__mceDel&quot;&gt;&lt;span&gt;&lt;strong/&gt;&lt;/span&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;&lt;/em&gt;
&lt;/pre&gt;

</description>
<pubDate>Tue, 13 Feb 2018 07:38:00 +0000</pubDate>
<dc:creator>孟庆健</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/mengqingjian/p/8446551.html</dc:identifier>
</item>
<item>
<title>国外程序员陋习，写在农历狗年前 - 麦克*堂</title>
<link>http://www.cnblogs.com/michael703/p/8446057.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/michael703/p/8446057.html</guid>
<description>&lt;p&gt;为了呼应下面以前写的文章，今天来写写国外程序员的陋习（当然不是所有人都是这样，但是也应该是我碰到比较多的）&lt;/p&gt;
&lt;p&gt;“&lt;a id=&quot;cb_post_title_url&quot; class=&quot;postTitle2&quot; href=&quot;http://www.cnblogs.com/michael703/p/5183902.html&quot;&gt;国产程序员陋习，写在农历猴年前&lt;/a&gt;”&lt;/p&gt;
&lt;p&gt;http://www.cnblogs.com/michael703/p/5183902.html&lt;/p&gt;

&lt;p&gt;从毕业以来工作10几年中和各种老外（美国，瑞士，丹麦，澳大利亚，阿根廷，希腊，德国，日本）都合作过，有开心，有痛苦，有学习，有吵架~~&lt;/p&gt;
&lt;p&gt;当然老外们有很多值得学习的地方，也有很多很专业，很厉害的，但是也有很多是比较水的。下面来写写老外们的一些不太好的陋习~~&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;写文档胜过写程序&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;文档写得好这个确实是老外的一个能力，但是有多时候是该有的内容没写，不重要的内容写了一大堆。&lt;/p&gt;
&lt;p&gt;文档一边写，一边反复的review，不写好文档不开始代码。&lt;/p&gt;
&lt;p&gt;需求不清楚，写文档&lt;/p&gt;
&lt;p&gt;改需求，写文档&lt;/p&gt;
&lt;p&gt;改设计，写文档&lt;/p&gt;
&lt;p&gt;一言不合就是写文档&lt;/p&gt;
&lt;p&gt;真正编码，猴年马月了，项目时间来不及，包给外包公司吧~~&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;表功劳胜过写程序，到处展示自己的小东西&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;写了点小东西逢人必说，到处展示。&lt;/p&gt;
&lt;p&gt;国人喜欢埋头苦干，不出风头，写好代码，实现系统功能，自己开心满意就好了。&lt;/p&gt;
&lt;p&gt;老外在你的东西上绣绣花，然后拿着你的东西到处展示，到最后显得好像你弄出来的东西，都是他的功劳，厉害大了~~&lt;/p&gt;
&lt;p&gt;当然还占着英文和资本家的优势啦。&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;吹牛能上天，满嘴跑火车&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;知道一点东西或者一点皮毛，就能吹上好一阵子&lt;/p&gt;
&lt;p&gt;关键逢人必吹，当然还会挑人的重点吹比方那些对相关知识不太懂的领导&lt;/p&gt;
&lt;p&gt;这样显得自己很牛，能吹出一番天地。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;脸皮极其厚，能屈能伸&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;开会的时候可以满嘴的说，就是不愿意写文字性的东西做确认。&lt;/p&gt;
&lt;p&gt;过几天观点可以全然和以前不一样，然后你就根本不知道他到底想干什么了。&lt;/p&gt;
&lt;p&gt;实在没法解释了，他会说我们之间可能有些misunderstanding !!!^ ^, 我就问你服不服~~&lt;/p&gt;
&lt;p&gt;能屈能伸，你得势，他可以和你刚吵过架又过来巴结你，你不得势，可以说得你体无完肤。&lt;/p&gt;
&lt;p&gt;大家都知道他能力不行，他照样继续在重要场合，说自己的一套，一个PPT到处演示。&lt;/p&gt;
&lt;p&gt;一副不管你们怎么批，我就是这个样子，你拿我怎么办吧。&lt;/p&gt;
&lt;p&gt;过了一阵子，你发现这种充数的员工，不但没被开掉，职位还挺高~~&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;上班打酱油能力一流，总显得很忙&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;可以盯着一个屏幕大半天不动，也真是厉害。&lt;/p&gt;
&lt;p&gt;老板不走，他也不走。老板不在，他总是家里有点事情先走了。&lt;/p&gt;
&lt;p&gt;找他做个事情，先是说我真的很忙的，然后说如果真需要我帮忙请告诉一下我的老板（其实有时也就是两个小时的事情） &lt;/p&gt;
&lt;p&gt;去开会时绝对不会在会议室等，而是时间快到了一路小跑，走路带风，真的是不要太忙哦~~&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;喜欢开会，会议特别多&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;各种会议能参加都参加，八竿子打不着的东西最好也要参与一下&lt;/p&gt;
&lt;p&gt;这样可能可以刷存在感，不会让老板觉得自己没事情做&lt;/p&gt;
&lt;p&gt;会议上可以坐在那里一直保持沉默，估计大脑在休息，当然也可以随便提点貌似相关的问题，显示自己的存在。&lt;/p&gt;
&lt;p&gt;会后大家讨论个东西，他总能说个两句，表示大概知道一些信息。&lt;/p&gt;
&lt;p&gt;多参加项目会议还有个好处是，有项目庆祝的时候也能混着吃喝开心，开心。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;不做决定&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;老外喜欢说，喜欢发表自己的观点，但也不太爱得罪人&lt;/p&gt;
&lt;p&gt;你说这个方案可以吗？他说不错&lt;/p&gt;
&lt;p&gt;你说另一个方案可以吗？他说也蛮好的&lt;/p&gt;
&lt;p&gt;你说两个方案你觉得哪个好？先说一大堆XXXXXXXXXX，嗯，这两个真的很难选，我觉得你们是专业的，你们做决定吧，我相信你们的决定~~ 我去~~&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;不管自己事情，爱管别人事情&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;做项目的不管管自己的项目进度，而是掺和你的架构是否正确，代码质量是不是高&lt;/p&gt;
&lt;p&gt;做测试的不安排怎么测试，一个劲的质问你的项目进度，你对某项技术是否了解&lt;/p&gt;
&lt;p&gt;做架构的不安心做架构，跑来写代码，还总觉得自己代码写得好，质量高，我只能送他三个字“算了吧~~”&lt;/p&gt;
&lt;p&gt;管别人的事情可能比较简单，只用嘴巴说说就好了&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;表面让你提意见，暗地里还不知在搞什么&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;有些总是很客气的让你提意见，搞得好像他很open很想改进&lt;/p&gt;
&lt;p&gt;但是你给他提完意见，你发现他并没有后续动作&lt;/p&gt;
&lt;p&gt;如若你戳到了他的痛处，实际上他会很记仇的，在合适的场合会反击你的&lt;/p&gt;
&lt;p&gt;不要看他表面上和你和和气气的，逮着机会就会弄你。&lt;/p&gt;
&lt;p&gt;让我想起了一句话：没有永远的朋友，只有永远的利益~~&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;学历真不等于能力&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;国外有很多名校毕业的动手能力确实也不行，但是能吹，善算计&lt;/p&gt;
&lt;p&gt;有些技术职业学校毕业的，倒是技术杠杠的，写代码能力也是一流 &lt;/p&gt;
&lt;p&gt; 但是老外的貌似对于老外持有的国外高学历还是有种敬畏感，对国人却不然&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;你的能力强弱，取决于老板对这方面的了解程度，而不是你的实力&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;很多人认为我自己能力强，是金子总会发光，然而很多情况不是这样的，因为你的老板可能不具备鉴别金子的能力。&lt;/p&gt;
&lt;p&gt;一个水平和能力不行的铜器反复的告诉老板：“我就是金子，我就是最好的”&lt;/p&gt;
&lt;p&gt;老板久而久之也就真信了，自己也为铜器的老板要显示自己有鉴别金子的能力，拿着铜器到处说这是最好的金子，当然很多人确实也没见过金子，也就相信了&lt;/p&gt;
&lt;p&gt;即便其它人知道不是金子，但他是老板，大家也只能揣着明白装糊涂了 ：）&lt;/p&gt;

&lt;p&gt; 好了，最近一直和一些老外在讨论项目，争论架构，所以也看到了他们很多真实的一面，故撰写上面的文章稍微描述一下个人体会，&lt;/p&gt;
&lt;p&gt;客不客观就由各位看客来评论了。当然此文也是为了回应以前写的“国产程序员的陋习”，老外也是有不少陋习的 ：）&lt;/p&gt;
</description>
<pubDate>Tue, 13 Feb 2018 07:24:00 +0000</pubDate>
<dc:creator>麦克*堂</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/michael703/p/8446057.html</dc:identifier>
</item>
<item>
<title>[Android] Toast问题深度剖析(二) - 云加社区</title>
<link>http://www.cnblogs.com/qcloud1001/p/8446222.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/qcloud1001/p/8446222.html</guid>
<description>&lt;p&gt;欢迎大家前往&lt;a href=&quot;https://cloud.tencent.com/developer&quot; target=&quot;_blank&quot;&gt;云+社区&lt;/a&gt;，获取更多腾讯海量技术实践干货哦~&lt;/p&gt;
&lt;blockquote readability=&quot;1.969696969697&quot;&gt;
&lt;p&gt;作者： &lt;a href=&quot;https://cloud.tencent.com/developer/user/1027752&quot; target=&quot;_blank&quot;&gt;QQ音乐技术团队&lt;/a&gt; &lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;code&gt;Toast&lt;/code&gt; 作为 &lt;code&gt;Android&lt;/code&gt; 系统中最常用的类之一，由于其方便的api设计和简洁的交互体验，被我们所广泛采用。但是，伴随着我们开发的深入，&lt;code&gt;Toast&lt;/code&gt; 的问题也逐渐暴露出来。 本系列文章将分成两篇: 第一篇，我们将分析 &lt;code&gt;Toast&lt;/code&gt; 所带来的问题 第二篇，将提供解决 &lt;code&gt;Toast&lt;/code&gt; 问题的解决方案 (注:本文源码基于Android 7.0)&lt;/p&gt;
&lt;h2&gt;1.回顾&lt;/h2&gt;
&lt;p&gt;上一篇 [[Android] Toast问题深度剖析(一)] 笔者解释了:&lt;/p&gt;
&lt;ol class=&quot;ol-level-0&quot;&gt;&lt;li&gt;&lt;code&gt;Toast&lt;/code&gt; 系统如何构建窗口（通过系统服务NotificationManager来生成系统窗口）&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Toast&lt;/code&gt; 异常出现的原因（系统调用 &lt;code&gt;Toast&lt;/code&gt;的时序紊乱）&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;而本篇的重点，在于解决我们第一章所说的 &lt;code&gt;Toast&lt;/code&gt; 问题。&lt;/p&gt;
&lt;h2&gt;2.解决思路&lt;/h2&gt;
&lt;p&gt;基于第一篇的知识，我们知道，&lt;code&gt;Toast&lt;/code&gt; 的窗口属于系统窗口，它的生成和生命周期依赖于系统服务 &lt;code&gt;NotificationManager&lt;/code&gt;。一旦 &lt;code&gt;NotificationManager&lt;/code&gt; 所管理的窗口生命周期跟我们本地的进程不一致，就会发生异常。那么，我们能不能不使用系统的窗口，而使用自己的窗口，并且由我们自己控制生命周期呢？事实上， &lt;code&gt;SnackBar&lt;/code&gt; 就是这样的方案。不过，如果不使用系统类型的窗口，就意味着你的&lt;code&gt;Toast&lt;/code&gt; 界面，无法在其他应用之上显示。(比如，我们经常看到的一个场景就是你在你的应用出调用了多次 &lt;code&gt;Toast.show&lt;/code&gt;函数，然后退回到桌面，结果发现桌面也会弹出 &lt;code&gt;Toast&lt;/code&gt;，就是因为系统的 &lt;code&gt;Toast&lt;/code&gt; 使用了系统窗口，具有高的层级)不过在某些版本的手机上，你的应用可以申请权限，往系统中添加 &lt;code&gt;TYPE_SYSTEM_ALERT&lt;/code&gt; 窗口，这也是一种系统窗口，经常用来作为浮层显示在所有应用程序之上。不过，这种方式需要申请权限，并不能做到让所有版本的系统都能正常使用。 如果我们从体验的角度来看，当用户离开了该进程，就不应该弹出另外一个进程的 &lt;code&gt;Toast&lt;/code&gt; 提示去干扰用户的。&lt;code&gt;Android&lt;/code&gt; 系统似乎也意识到了这一点，在新版本的系统更新中，限制了很多在桌面提示窗口相关的权限。所以，从体验上考虑，这个情况并不属于问题。&lt;/p&gt;
&lt;p&gt;“那么我们可以选择哪些窗口的类型呢？”&lt;/p&gt;
&lt;ol class=&quot;ol-level-0&quot;&gt;&lt;li&gt;使用子窗口: 在 &lt;code&gt;Android&lt;/code&gt; 进程内，我们可以直接使用类型为子窗口类型的窗口。在 &lt;code&gt;Android&lt;/code&gt; 代码中的直接应用是 &lt;code&gt;PopupWindow&lt;/code&gt; 或者是 &lt;code&gt;Dialog&lt;/code&gt; 。这当然可以，不过这种窗口依赖于它的宿主窗口，它可用的条件是你的宿主窗口可用&lt;/li&gt;
&lt;li&gt;采用 &lt;code&gt;View&lt;/code&gt; 系统: 使用 &lt;code&gt;View&lt;/code&gt; 系统去模拟一个 &lt;code&gt;Toast&lt;/code&gt; 窗口行为，做起来不仅方便，而且能更加快速的实现动画效果，我们的 &lt;code&gt;SnackBar&lt;/code&gt; 就是采用这套方案。这也是我们今天重点讲的方案&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;“如果采用 View 系统方案，那么我要往哪个控件中添加我的 Toast 控件呢？”&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;Android&lt;/code&gt;进程中，我们所有的可视操作都依赖于一个 &lt;code&gt;Activity&lt;/code&gt; 。 &lt;code&gt;Activity&lt;/code&gt; 提供上下文(Context)和视图窗口(Window) 对象。我们通过 &lt;code&gt;Activity.setContentView&lt;/code&gt; 方法所传递的任何 &lt;code&gt;View&lt;/code&gt;对象 都将被视图窗口( &lt;code&gt;Window&lt;/code&gt;) 中的 &lt;code&gt;DecorView&lt;/code&gt; 所装饰。而在 &lt;code&gt;DecorView&lt;/code&gt; 的子节点中，有一个 &lt;code&gt;id&lt;/code&gt; 为 &lt;code&gt;android.R.id.content&lt;/code&gt; 的 &lt;code&gt;FrameLayout&lt;/code&gt; 节点(后面简称 &lt;code&gt;content&lt;/code&gt; 节点) 是用来容纳我们所传递进去的 &lt;code&gt;View&lt;/code&gt; 对象。一般情况下，这个节点占据了除了通知栏的所有区域。这就特别适合用来作为 &lt;code&gt;Toast&lt;/code&gt; 的父控件节点。&lt;/p&gt;
&lt;p&gt;“我什么时机往这个&lt;code&gt;content&lt;/code&gt;节点中添加合适呢？这个 &lt;code&gt;content&lt;/code&gt; 节点什么时候被初始化呢？”&lt;/p&gt;
&lt;p&gt;根据不同的需求，你可能会关注以下两个时机:&lt;/p&gt;
&lt;ol class=&quot;ol-level-0&quot;&gt;&lt;li&gt;&lt;code&gt;Content&lt;/code&gt; 节点生成&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Content&lt;/code&gt; 内容显示&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;实际我们只需要将我们的 &lt;code&gt;Toast&lt;/code&gt; 添加到 &lt;code&gt;Content&lt;/code&gt; 节点中，只要满足第一条即可。如果你是为了完成性能检测，测量或者其他目的，那么你可能更关心第二条。 那么什么情况下 &lt;code&gt;Content&lt;/code&gt; 节点生成呢？刚才我们说了，&lt;code&gt;Content&lt;/code&gt; 节点包含在我们的 &lt;code&gt;DecorView&lt;/code&gt; 控件中，而 &lt;code&gt;DecorView&lt;/code&gt; 是由 &lt;code&gt;Activity&lt;/code&gt; 的 &lt;code&gt;Window&lt;/code&gt;对象所持有的控件。&lt;code&gt;Window&lt;/code&gt; 在 &lt;code&gt;Android&lt;/code&gt; 中的实现类是 &lt;code&gt;PhoneWindow&lt;/code&gt;，(这部分代码有兴趣可以自行阅读) 我们来看下源码:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code PhoneWindow.java&lt;/span&gt;
&lt;span&gt;@Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setContentView(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; layoutResID) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mContentParent == &lt;span&gt;null&lt;/span&gt;) { &lt;span&gt;//&lt;/span&gt;&lt;span&gt;mContentParent就是我们的 content 节点&lt;/span&gt;
            installDecor();&lt;span&gt;//&lt;/span&gt;&lt;span&gt;生成一个DecorView&lt;/span&gt;
        } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            mContentParent.removeAllViews();
        }
        mLayoutInflater.inflate(layoutResID， mContentParent);
        final Callback cb &lt;/span&gt;=&lt;span&gt; getCallback();
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (cb != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !&lt;span&gt;isDestroyed()) {
            cb.onContentChanged();
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;PhoneWindow&lt;/code&gt; 对象通过 &lt;code&gt;installDecor&lt;/code&gt; 函数生成 &lt;code&gt;DecorView&lt;/code&gt; 和 我们所需要的 &lt;code&gt;content&lt;/code&gt; 节点(最终会存到 &lt;code&gt;mContentParent&lt;/code&gt;) 变量中去。但是， &lt;code&gt;setContentView&lt;/code&gt; 函数需要我们主动调用，如果我并没有调用这个 &lt;code&gt;setContentView&lt;/code&gt; 函数，&lt;code&gt;installDecor&lt;/code&gt; 方法将不被调用。那么，有没有某个时刻，&lt;code&gt;content&lt;/code&gt; 节点是必然生成的呢？当然有，除了在 &lt;code&gt;setContentView&lt;/code&gt; 函数中调用&lt;code&gt;installDecor&lt;/code&gt;外，还有一个函数也调用到了这个，那就是:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code PhoneWindow.java&lt;/span&gt;
&lt;span&gt;@Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; final View getDecorView() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mDecor == &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            installDecor();
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; mDecor;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;而这个函数，将在 &lt;code&gt;Activity.findViewById&lt;/code&gt; 的时候调用:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code Activity.java&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; View findViewById(@IdRes &lt;span&gt;int&lt;/span&gt;&lt;span&gt; id) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; getWindow().findViewById(id);
}
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code Window.java&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; View findViewById(@IdRes &lt;span&gt;int&lt;/span&gt;&lt;span&gt; id) {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; getDecorView().findViewById(id);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;因此，只要我们只要调用了 &lt;code&gt;findViewById&lt;/code&gt; 函数，一样可以保证 &lt;code&gt;content&lt;/code&gt; 被正常初始化。这样我们解释了第一个”就绪”(&lt;code&gt;Content&lt;/code&gt; 节点生成)。我们再来看下第二个”就绪”，也就是 &lt;code&gt;Android&lt;/code&gt; 界面什么时候显示呢？相信你可能迫不及待的回答不是 &lt;code&gt;onResume&lt;/code&gt; 回调的时候么？实际上，在 &lt;code&gt;onResume&lt;/code&gt; 的时候，根本还没处理跟界面相关的事情。我们来看下 &lt;code&gt;Android&lt;/code&gt; 进程是如何处理 &lt;code&gt;resume&lt;/code&gt; 消息的: (注: &lt;code&gt;AcitivityThread&lt;/code&gt; 是 &lt;code&gt;Android&lt;/code&gt; 进程的入口类， &lt;code&gt;Android&lt;/code&gt; 进程处理 &lt;code&gt;resume&lt;/code&gt; 相关消息将会调用到 &lt;code&gt;AcitivityThread.handleResumeActivity&lt;/code&gt; 函数)&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code AcitivityThread.java&lt;/span&gt;
&lt;span&gt;void&lt;/span&gt;&lt;span&gt; handleResumeActivity(...) {
    ...
    ActivityClientRecord r &lt;/span&gt;=&lt;span&gt; performResumeActivity(token， clearHide);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 之后会调用call onResume&lt;/span&gt;
&lt;span&gt;    ...
    View decor &lt;/span&gt;=&lt;span&gt; r.window.getDecorView();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;调用getDecorView 生成 content节点&lt;/span&gt;
&lt;span&gt;    decor.setVisibility(View.INVISIBLE);
    ....
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (r.activity.mVisibleFromClient) {
       r.activity.makeVisible();&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;add to WM 管理&lt;/span&gt;
&lt;span&gt;    }
    ...
}
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code Activity.java&lt;/span&gt;
  &lt;span&gt;void&lt;/span&gt;&lt;span&gt; makeVisible() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;mWindowAdded) {
            ViewManager wm &lt;/span&gt;=&lt;span&gt; getWindowManager();
            wm.addView(mDecor， getWindow().getAttributes());
            mWindowAdded &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        }
        mDecor.setVisibility(View.VISIBLE);
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Android&lt;/code&gt; 进程在处理 &lt;code&gt;resume&lt;/code&gt; 消息的时候，将走以下的流程:&lt;/p&gt;
&lt;ol class=&quot;ol-level-0&quot;&gt;&lt;li&gt;调用 &lt;code&gt;performResumeActivity&lt;/code&gt; 回调 &lt;code&gt;Activity&lt;/code&gt; 的 &lt;code&gt;onResume&lt;/code&gt; 函数&lt;/li&gt;
&lt;li&gt;调用 &lt;code&gt;Window&lt;/code&gt; 的 &lt;code&gt;getDecorView&lt;/code&gt; 生成 &lt;code&gt;DecorView&lt;/code&gt; 对象和 &lt;code&gt;content&lt;/code&gt; 节点&lt;/li&gt;
&lt;li&gt;将&lt;code&gt;DecorView&lt;/code&gt;纳入 &lt;code&gt;WindowManager&lt;/code&gt; (进程内服务)的管理&lt;/li&gt;
&lt;li&gt;调用 &lt;code&gt;Activity.makeVisible&lt;/code&gt; 显示当前 &lt;code&gt;Activity&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;按照上述的流程，在 &lt;code&gt;Activity.onResume&lt;/code&gt; 回调之后，才将控件纳入本地服务 &lt;code&gt;WindowManager&lt;/code&gt; 的管理中。也就是说， &lt;code&gt;Activity.onResume&lt;/code&gt; 根本没有显示任何东西。我们不妨写个代码验证一下:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code DemoActivity.java&lt;/span&gt;

&lt;span&gt;public&lt;/span&gt;&lt;span&gt; DemoActivity extends Activity {
   &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; View view ;

    @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onCreate( Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        view &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; View(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.setContentView(view);
    }
    @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onResume() {
        super.onResume();
        Log.d(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;cdw&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;，&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;onResume :&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +view.getHeight());&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 有高度是显示的必要条件&lt;/span&gt;
&lt;span&gt;    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这里，我们通过在 &lt;code&gt;onResume&lt;/code&gt; 中获取高度的方式验证界面是否被绘制，最终我们将输出日志:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
D cdw     : onResume :&lt;span&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;那么，界面又是在什么时候完成的绘制呢？是不是在 &lt;code&gt;WindowManager.addView&lt;/code&gt; 之后呢？我们在 &lt;code&gt;onResume&lt;/code&gt;之后会调用&lt;code&gt;Activity.makeVisible&lt;/code&gt;，里面会调用 &lt;code&gt;WindowManager.addView&lt;/code&gt;。因此我们在&lt;code&gt;onResume&lt;/code&gt; 里&lt;code&gt;post&lt;/code&gt;一个消息就可以检测&lt;code&gt;WindowManager.addView&lt;/code&gt; 之后的情况：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onResume() {
        super.onResume();
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.runOnUiThread(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Runnable() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
                Log.d(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;cdw&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;，&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;onResume :&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt;view.getHeight());
            }
        });
}

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;控制台输出:&lt;/span&gt;
&lt;span&gt;01&lt;/span&gt;-&lt;span&gt;02&lt;/span&gt; &lt;span&gt;21&lt;/span&gt;:&lt;span&gt;30&lt;/span&gt;:&lt;span&gt;27.445&lt;/span&gt;  &lt;span&gt;2562&lt;/span&gt;  &lt;span&gt;2562&lt;/span&gt; D cdw     : onResume :&lt;span&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;从结果上看，我们在 &lt;code&gt;WindowManager.addView&lt;/code&gt; 之后，也并没有绘制界面。那么，Android的绘制是什么时候开始的?又是到什么时候结束?&lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;Android&lt;/code&gt; 系统中，每一次的绘制都是通过一个 &lt;code&gt;16ms&lt;/code&gt; 左右的 &lt;code&gt;VSYNC&lt;/code&gt; 信号控制的，这种信号可能来自于硬件也可能来自于软件模拟。每一次非动画的绘制，都包含：测量，布局，绘制三个函数。而一般触发这一事件的的动作有:&lt;/p&gt;
&lt;ol class=&quot;ol-level-0&quot;&gt;&lt;li&gt;&lt;code&gt;View&lt;/code&gt; 的某些属性的变更&lt;/li&gt;
&lt;li&gt;&lt;code&gt;View&lt;/code&gt; 重新布局Layout&lt;/li&gt;
&lt;li&gt;增删 &lt;code&gt;View&lt;/code&gt; 节点&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;当调用 &lt;code&gt;WindowManager.addView&lt;/code&gt; 将空间添加到 &lt;code&gt;WM&lt;/code&gt; 服务管理的时候，会调用一次Layout请求，这就触发了一次 &lt;code&gt;VSYNC&lt;/code&gt; 绘制。因此，我们只需要在 &lt;code&gt;onResume&lt;/code&gt; 里 &lt;code&gt;post&lt;/code&gt; 一个帧回调就可以检测绘制开始的时间:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ask.qcloudimg.com/http-save/yehe-1027752/pheb9crpfm.jpeg?imageView2/0/w/1620&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt; @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onResume() {
        super.onResume();
        Choreographer.getInstance().postFrameCallback(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Choreographer.FrameCallback() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; doFrame(&lt;span&gt;long&lt;/span&gt;&lt;span&gt; frameTimeNanos) {
                &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;TODO 绘制开始&lt;/span&gt;
&lt;span&gt;            }
        });
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们先来看下 &lt;code&gt;View.requestLayout&lt;/code&gt; 是怎么触发界面重新绘制的:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code View.java&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; requestLayout() {
        ....
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (mParent != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            ...
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;mParent.isLayoutRequested()) {
                mParent.requestLayout();
            }
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;View&lt;/code&gt; 对象调用 &lt;code&gt;requestLayout&lt;/code&gt; 的时候会委托给自己的父节点处理，这里之所以不称为父控件而是父节点，是因为除了控件外，还有 &lt;code&gt;ViewRootImpl&lt;/code&gt; 这个非控件类型作为父节点，而这个父节点会作为整个控件树的根节点。按照我们上面说的委托的机制，&lt;code&gt;requestLayout&lt;/code&gt; 最终将会调用到 &lt;code&gt;ViewRootImpl.requestLayout&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code ViewRootImpl.java&lt;/span&gt;
&lt;span&gt;@Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; requestLayout() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;mHandlingLayoutInLayoutRequest) {
            checkThread();
            mLayoutRequested &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
            scheduleTraversals();&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;申请绘制请求&lt;/span&gt;
&lt;span&gt;        }
    }

    &lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; scheduleTraversals() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;mTraversalScheduled) {
            mTraversalScheduled &lt;/span&gt;= &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
            ....
            mChoreographer.postCallback(
                    Choreographer.CALLBACK_TRAVERSAL， mTraversalRunnable， &lt;/span&gt;&lt;span&gt;null&lt;/span&gt;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;申请绘制&lt;/span&gt;
&lt;span&gt;            ....
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;ViewRootImpl&lt;/code&gt; 最终会将 &lt;code&gt;mTraversalRunnable&lt;/code&gt; 处理命令放到 &lt;code&gt;CALLBACK_TRAVERSAL&lt;/code&gt; 绘制队列中去:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
final &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TraversalRunnable implements Runnable {
        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
            doTraversal();&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;执行布局和绘制&lt;/span&gt;
&lt;span&gt;        }
}

&lt;/span&gt;&lt;span&gt;void&lt;/span&gt;&lt;span&gt; doTraversal() {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (mTraversalScheduled) {
            mTraversalScheduled &lt;/span&gt;= &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
            ...
            performTraversals();
            ...
        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;mTraversalRunnable&lt;/code&gt; 命令最终会调用到 &lt;code&gt;performTraversals()&lt;/code&gt; 函数:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; performTraversals() {
    final View host &lt;/span&gt;=&lt;span&gt; mView;
    ...
    host.dispatchAttachedToWindow(mAttachInfo， &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;attachWindow&lt;/span&gt;
&lt;span&gt;    ...
    getRunQueue().executeActions(attachInfo.mHandler);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;执行某个指令&lt;/span&gt;
&lt;span&gt;    ...
    childWidthMeasureSpec &lt;/span&gt;=&lt;span&gt; getRootMeasureSpec(desiredWindowWidth， lp.width);
    childHeightMeasureSpec &lt;/span&gt;=&lt;span&gt; getRootMeasureSpec(desiredWindowHeight， lp.height);
    host.measure(childWidthMeasureSpec， childHeightMeasureSpec);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;测量&lt;/span&gt;
&lt;span&gt;    ....
    host.layout(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;， &lt;span&gt;0&lt;/span&gt;， host.getMeasuredWidth()， host.getMeasuredHeight());&lt;span&gt;//&lt;/span&gt;&lt;span&gt;布局&lt;/span&gt;
&lt;span&gt;    ...
    draw(fullRedrawNeeded);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;绘制&lt;/span&gt;
&lt;span&gt;    ...
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;performTraversals&lt;/code&gt; 函数实现了以下流程:&lt;/p&gt;
&lt;ol class=&quot;ol-level-0&quot;&gt;&lt;li&gt;调用 &lt;code&gt;dispatchAttachedToWindow&lt;/code&gt; 通知子控件树当前控件被 &lt;code&gt;attach&lt;/code&gt; 到窗口中&lt;/li&gt;
&lt;li&gt;执行一个命令队列 &lt;code&gt;getRunQueue&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;执行 &lt;code&gt;meausre&lt;/code&gt; 测量指令&lt;/li&gt;
&lt;li&gt;执行 &lt;code&gt;layout&lt;/code&gt; 布局函数&lt;/li&gt;
&lt;li&gt;执行绘制 &lt;code&gt;draw&lt;/code&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;这里我们看到一句方法调用:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
getRunQueue().executeActions(attachInfo.mHandler);
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这个函数将执行一个延时的命令队列，在 &lt;code&gt;View&lt;/code&gt; 对象被 &lt;code&gt;attach&lt;/code&gt; 到 &lt;code&gt;View&lt;/code&gt;树之前，通过调用 &lt;code&gt;View.post&lt;/code&gt; 函数，可以将执行消息命令加入到延时执行队列中去:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code View.java&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt;&lt;span&gt; boolean post(Runnable action) {
        Handler handler;
        AttachInfo attachInfo &lt;/span&gt;=&lt;span&gt; mAttachInfo;
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (attachInfo != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            handler &lt;/span&gt;=&lt;span&gt; attachInfo.mHandler;
        } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Assume that post will succeed later&lt;/span&gt;
&lt;span&gt;            ViewRootImpl.getRunQueue().post(action);
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;true&lt;/span&gt;&lt;span&gt;;
        }
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; handler.post(action);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;getRunQueue().executeActions&lt;/code&gt; 函数执行的时候，会将该命令消息延后一个UI线程消息执行，这就保证了执行的这个命令消息发生在我们的绘制之后:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code RunQueue.java&lt;/span&gt;
 &lt;span&gt;void&lt;/span&gt;&lt;span&gt; executeActions(Handler handler) {
            synchronized (mActions) {
                ...
                &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;; i &amp;lt; count; i++&lt;span&gt;) {
                    final HandlerAction handlerAction &lt;/span&gt;= actions.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(i);
                    handler.postDelayed(handlerAction.action， handlerAction.delay);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;推迟一个消息&lt;/span&gt;
&lt;span&gt;                }
            }
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;所以，我们只需要在视图被 &lt;code&gt;attach&lt;/code&gt; 之前通过一个 &lt;code&gt;View&lt;/code&gt; 来抛出一个命令消息，就可以检测视图绘制结束的时间点:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code DemoActivity.java&lt;/span&gt;
&lt;span&gt; @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onResume() {
        super.onResume();
        Choreographer.getInstance().postFrameCallback(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Choreographer.FrameCallback() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; doFrame(&lt;span&gt;long&lt;/span&gt;&lt;span&gt; frameTimeNanos) {
                start &lt;/span&gt;=&lt;span&gt; SystemClock.uptimeMillis();
                log(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;绘制开始:height = &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;+&lt;span&gt;view.getHeight());
            }
        });
    }

    @Override
    &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; onCreate( Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        view &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; View(&lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        view.post(&lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Runnable() {
            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
                log(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;绘制耗时:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;+(SystemClock.uptimeMillis()-start)+&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;ms&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                log(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;绘制结束后:height = &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;+&lt;span&gt;view.getHeight());
            }
        });
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.setContentView(view);
    }
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;控制台输出:&lt;/span&gt;
&lt;span&gt;01&lt;/span&gt;-&lt;span&gt;03&lt;/span&gt; &lt;span&gt;23&lt;/span&gt;:&lt;span&gt;39&lt;/span&gt;:&lt;span&gt;27.251&lt;/span&gt; &lt;span&gt;27069&lt;/span&gt; &lt;span&gt;27069&lt;/span&gt; D cdw     : ---&amp;gt;绘制开始:height = &lt;span&gt;0&lt;/span&gt;
&lt;span&gt;01&lt;/span&gt;-&lt;span&gt;03&lt;/span&gt; &lt;span&gt;23&lt;/span&gt;:&lt;span&gt;39&lt;/span&gt;:&lt;span&gt;27.295&lt;/span&gt; &lt;span&gt;27069&lt;/span&gt; &lt;span&gt;27069&lt;/span&gt; D cdw     : ---&amp;gt;&lt;span&gt;绘制耗时:44ms
&lt;/span&gt;&lt;span&gt;01&lt;/span&gt;-&lt;span&gt;03&lt;/span&gt; &lt;span&gt;23&lt;/span&gt;:&lt;span&gt;39&lt;/span&gt;:&lt;span&gt;27.295&lt;/span&gt; &lt;span&gt;27069&lt;/span&gt; &lt;span&gt;27069&lt;/span&gt; D cdw     : ---&amp;gt;绘制结束后:height = &lt;span&gt;1232&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们带着我们上面的知识储备，来看下SnackBar是如何做的呢:&lt;/p&gt;
&lt;h2&gt;3.Snackbar&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://ask.qcloudimg.com/http-save/yehe-1027752/z5pk931dv1.png?imageView2/0/w/1620&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SnackBar&lt;/code&gt; 系统主要依赖于两个类：&lt;/p&gt;
&lt;ol class=&quot;ol-level-0&quot;&gt;&lt;li&gt;&lt;code&gt;SnackBar&lt;/code&gt; 作为门面，与业务程序交互&lt;/li&gt;
&lt;li&gt;&lt;code&gt;SnackBarManager&lt;/code&gt; 作为时序管理器， &lt;code&gt;SnackBar&lt;/code&gt; 与 &lt;code&gt;SnackBarManager&lt;/code&gt; 的交互，通过 &lt;code&gt;Callback&lt;/code&gt; 回调对象进行&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;code&gt;SnackBarManager&lt;/code&gt; 的时序管理跟 &lt;code&gt;NotifycationManager&lt;/code&gt; 的很类似不再赘述&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SnackBar&lt;/code&gt; 通过静态方法 &lt;code&gt;make&lt;/code&gt; 静态构造一个 &lt;code&gt;SnackBar&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Snackbar make(@NonNull View view， @NonNull CharSequence text，
            @Duration &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; duration) {
        Snackbar snackbar &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Snackbar(findSuitableParent(view));
        snackbar.setText(text);
        snackbar.setDuration(duration);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; snackbar;
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这里有一个关键函数 &lt;code&gt;findSuitableParent&lt;/code&gt; ，这个函数的目的就相当于我们上面的 &lt;code&gt;findViewById(R.id.content)&lt;/code&gt; 一样，给 &lt;code&gt;SnackBar&lt;/code&gt; 所定义的 &lt;code&gt;Toast&lt;/code&gt; 控件找一个合适的容器:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; ViewGroup findSuitableParent(View view) {
        ViewGroup fallback &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
        &lt;/span&gt;&lt;span&gt;do&lt;/span&gt;&lt;span&gt; {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (view instanceof CoordinatorLayout) {
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; (ViewGroup) view;
            } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt; (view instanceof FrameLayout) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (view.getId() == android.R.id.content) {&lt;span&gt;//&lt;/span&gt;&lt;span&gt;把 `Content` 节点作为容器&lt;/span&gt;
&lt;span&gt;                    ...
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; (ViewGroup) view;
                } &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
                    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; It's not the content view but we'll use it as our fallback&lt;/span&gt;
                    fallback =&lt;span&gt; (ViewGroup) view;
                }
            }
            ...
        } &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; (view != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; If we reach here then we didn't find a CoL or a suitable content view so we'll fallback&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt;&lt;span&gt; fallback;
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们发现，除了包含 &lt;code&gt;CoordinatorLayout&lt;/code&gt; 控件的情况， 默认情况下， &lt;code&gt;SnackBar&lt;/code&gt; 也是找的 &lt;code&gt;Content&lt;/code&gt; 节点。找到的这个父节点，作为 &lt;code&gt;Snackbar&lt;/code&gt; 构造器的形参:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt;&lt;span&gt; Snackbar(ViewGroup parent) {
        mTargetParent &lt;/span&gt;=&lt;span&gt; parent;
        mContext &lt;/span&gt;=&lt;span&gt; parent.getContext();
        ...
        LayoutInflater inflater &lt;/span&gt;= LayoutInflater.&lt;span&gt;from&lt;/span&gt;&lt;span&gt;(mContext);
        mView &lt;/span&gt;=&lt;span&gt; (SnackbarLayout) inflater.inflate(
                R.layout.design_layout_snackbar， mTargetParent， &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
        ...
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Snackbar&lt;/code&gt; 将生成一个 &lt;code&gt;SnackbarLayout&lt;/code&gt; 控件作为 &lt;code&gt;Toast&lt;/code&gt; 控件。最后当时序控制器 &lt;code&gt;SnackBarManager&lt;/code&gt; 回调返回的时候，通知 &lt;code&gt;SnackBar&lt;/code&gt; 显示，即将 &lt;code&gt;SnackBar.mView&lt;/code&gt; 增加到 &lt;code&gt;mTargetParent&lt;/code&gt; 控件中去。&lt;/p&gt;
&lt;p&gt;这里有人或许会有疑问，这里使用强引用，会不会造成一段时间内的内存泄漏呢？ 假如你现在弹了 &lt;code&gt;10&lt;/code&gt; 个 &lt;code&gt;Toast&lt;/code&gt; ，每个 &lt;code&gt;Toast&lt;/code&gt; 的显示时间是 &lt;code&gt;2s&lt;/code&gt; 。也就是说你的最后一个 &lt;code&gt;SnackBar&lt;/code&gt; 将被 &lt;code&gt;SnackBarManager&lt;/code&gt; 持有至少 &lt;code&gt;20s&lt;/code&gt;。而 &lt;code&gt;SnackBar&lt;/code&gt; 中又存在有父控件 &lt;code&gt;mTargetParent&lt;/code&gt; 的强引用。相当于在这20s内， 你的&lt;code&gt;mTargetParent&lt;/code&gt; 和它所持有的 &lt;code&gt;Context&lt;/code&gt; (一般是 &lt;code&gt;Activity&lt;/code&gt;)无法释放&lt;/p&gt;
&lt;p&gt;这个其实是不会的，原因在于 &lt;code&gt;SnackBarManager&lt;/code&gt; 在管理这种回调 &lt;code&gt;callback&lt;/code&gt; 的时候，采用了弱引用。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; SnackbarRecord {
        final WeakReference&lt;/span&gt;&amp;lt;Callback&amp;gt;&lt;span&gt; callback;
    ....
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但是，我们从 &lt;code&gt;SnackBar&lt;/code&gt; 的设计可以看出，&lt;code&gt;SnackBar&lt;/code&gt;无法定制具体的样式: &lt;code&gt;SnackBar&lt;/code&gt; 只能生成 &lt;code&gt;SnackBarLayout&lt;/code&gt; 这种控件和布局，可能并不满足你的业务需求。当然你也可以变更 &lt;code&gt;SnackBarLayout&lt;/code&gt; 也能达到目的。不过，有了上面的知识储备，我们完全可以写一个自己的 &lt;code&gt;Snackbar&lt;/code&gt;。&lt;/p&gt;
&lt;h2&gt;4.基于Toast的改法&lt;/h2&gt;
&lt;p&gt;从第一篇文章我们知道，我们直接在 &lt;code&gt;Toast.show&lt;/code&gt; 函数外增加 &lt;code&gt;try-catch&lt;/code&gt; 是没有意义的。因为 &lt;code&gt;Toast.show&lt;/code&gt; 实际上只是发了一条命令给 &lt;code&gt;NotificationManager&lt;/code&gt; 服务。真正的显示需要等 &lt;code&gt;NotificationManager&lt;/code&gt; 通知我们的 &lt;code&gt;TN&lt;/code&gt; 对象 &lt;code&gt;show&lt;/code&gt; 的时候才能触发。&lt;code&gt;NotificationManager&lt;/code&gt; 通知给 &lt;code&gt;TN&lt;/code&gt; 对象的消息，都会被 &lt;code&gt;TN.mHandler&lt;/code&gt; 这个内部对象进行处理&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;prism-token token language-javascript&quot;&gt;

&lt;/pre&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TN {

    final Runnable mHide &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; Runnable() {&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 通过 mHandler.post(mHide) 执行&lt;/span&gt;
&lt;span&gt;            @Override
            &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; run() {
                handleHide();
                mNextView &lt;/span&gt;= &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
            }
        };

    final Handler mHandler &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Handler() {
                @Override
                &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; handleMessage(Message msg) {
                    IBinder token &lt;/span&gt;=&lt;span&gt; (IBinder) msg.obj;
                    handleShow(token);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 处理 show 消息&lt;/span&gt;
&lt;span&gt;                }
    };
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;pre class=&quot;prism-token token language-javascript&quot;&gt;

&lt;/pre&gt;
&lt;p&gt;在&lt;code&gt;NotificationManager&lt;/code&gt; 通知给 &lt;code&gt;TN&lt;/code&gt; 对象显示的时候，&lt;code&gt;TN&lt;/code&gt; 对象将给 &lt;code&gt;mHandler&lt;/code&gt; 对象发送一条消息，并在 &lt;code&gt;mHandler&lt;/code&gt; 的 &lt;code&gt;handleMessage&lt;/code&gt; 函数中执行。 当&lt;code&gt;NotificationManager&lt;/code&gt; 通知 &lt;code&gt;TN&lt;/code&gt; 对象隐藏的时候，将通过 &lt;code&gt;mHandler.post(mHide)&lt;/code&gt; 方法，发送隐藏指令。不论采用哪种方式发送的指令，都将执行 &lt;code&gt;Handler&lt;/code&gt; 的 &lt;code&gt;dispatchMessage(Message msg)&lt;/code&gt; 函数:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;code Handler.java&lt;/span&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispatchMessage(Message msg) {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (msg.callback != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
            handleCallback(msg);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 执行 post(Runnable)形式的消息&lt;/span&gt;
        } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
            ...
            handleMessage(msg);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 执行 sendMessage形式的消息&lt;/span&gt;
&lt;span&gt;        }
    }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;因此，我们只需要在 &lt;code&gt;dispatchMessage&lt;/code&gt; 方法体内加入 &lt;code&gt;try-catch&lt;/code&gt; 就可以避免 &lt;code&gt;Toast&lt;/code&gt; 崩溃对应用程序的影响:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispatchMessage(Message msg) {
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
        super.dispatchMessage(msg);
    } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;(Exception e) {}
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;因此，我们可以定义一个安全的 &lt;code&gt;Handler&lt;/code&gt; 装饰器:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; SafelyHandlerWarpper extends Handler {

        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; Handler impl;

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; SafelyHandlerWarpper(Handler impl) {
            &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.impl =&lt;span&gt; impl;
        }

        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; dispatchMessage(Message msg) {
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
                super.dispatchMessage(msg);
            } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {}
        }

        @Override
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; handleMessage(Message msg) {
            impl.handleMessage(msg);&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;需要委托给原Handler执行&lt;/span&gt;
&lt;span&gt;        }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;由于 &lt;code&gt;TN.mHandler&lt;/code&gt; 对象复写了 &lt;code&gt;handleMessage&lt;/code&gt; 方法，因此，在 &lt;code&gt;Handler&lt;/code&gt; 装饰器里，需要将 &lt;code&gt;handleMessage&lt;/code&gt; 方法委托给 &lt;code&gt;TN.mHandler&lt;/code&gt; 执行。定义完装饰器之后，我们就可以通过反射往我们的 &lt;code&gt;Toast&lt;/code&gt; 对象中注入了：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; ToastUtils {

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Field sField_TN ;
    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Field sField_TN_Handler ;
    &lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            sField_TN &lt;/span&gt;= Toast.&lt;span&gt;class&lt;/span&gt;.getDeclaredField(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;mTN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            sField_TN.setAccessible(&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
            sField_TN_Handler &lt;/span&gt;= sField_TN.getType().getDeclaredField(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;mHandler&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            sField_TN_Handler.setAccessible(&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {}
    }

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; hook(Toast toast) {
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            Object tn &lt;/span&gt;= sField_TN.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(toast);
            Handler preHandler &lt;/span&gt;= (Handler)sField_TN_Handler.&lt;span&gt;get&lt;/span&gt;&lt;span&gt;(tn);
            sField_TN_Handler.&lt;/span&gt;&lt;span&gt;set&lt;/span&gt;(tn,&lt;span&gt;new&lt;/span&gt;&lt;span&gt; SafelyHandlerWarpper(preHandler));
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Exception e) {}
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; showToast(Context context,CharSequence cs, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; length) {
        Toast toast &lt;/span&gt;=&lt;span&gt; Toast.makeText(context,cs,length);
        hook(toast);
        toast.show();
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们再用第一章中的代码测试一下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; showToast(View view) {
        ToastUtils.showToast(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hello&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, Toast.LENGTH_LONG);
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
            Thread.sleep(&lt;/span&gt;&lt;span&gt;10000&lt;/span&gt;&lt;span&gt;);
        } &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (InterruptedException e) {}
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;等 10s 之后，进程正常运行，不会因为 &lt;code&gt;Toast&lt;/code&gt; 的问题而崩溃。&lt;/p&gt;

&lt;p class=&quot;col-article-title&quot;&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/article/1034225&quot; target=&quot;_blank&quot;&gt;[Android] Toast问题深度剖析(一)&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;col-article-title&quot;&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/article/1035535&quot; target=&quot;_blank&quot;&gt;Android基础：Fragment，看这篇就够了&lt;/a&gt;&lt;/p&gt;
&lt;p class=&quot;col-article-title&quot;&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/article/1035563&quot; target=&quot;_blank&quot;&gt;Android图像处理 - 高斯模糊的原理及实现&lt;/a&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;此文已由作者授权云加社区发布，转载请注明&lt;a href=&quot;https://cloud.tencent.com/developer/article/1034223&quot; target=&quot;_blank&quot;&gt;文章出处&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 13 Feb 2018 07:03:00 +0000</pubDate>
<dc:creator>云加社区</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/qcloud1001/p/8446222.html</dc:identifier>
</item>
<item>
<title>Laravel5.5核心架构理解 - 郁冬</title>
<link>http://www.cnblogs.com/lamp01/p/8445587.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lamp01/p/8445587.html</guid>
<description>&lt;p&gt;1、依赖注入&lt;/p&gt;
&lt;p&gt;方法传入组件名，框架会自动实例化，方法内可直接使用&lt;/p&gt;
&lt;p&gt;例如最常用的requert对象&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180212175746718-67310400.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;2、服务容器&lt;/p&gt;
&lt;p&gt;其实，Laravel 的核心就是一个 IoC 容器，Laravel 的核心本身十分轻量，并没有什么很神奇很实质性的应用功能。很多人用到的各种功能模块比如 Route（路由）、Eloquent ORM（数据库 ORM 组件）、Request（请求）以及 Response（响应）等等等等，实际上都是与核心无关的类模块提供的，这些类从注册到实例化，最终被你所使用，其实都是 Laravel 的服务容器负责的。&lt;/p&gt;
&lt;p&gt;服务提供者主要分为两个部分，&lt;code&gt;register&lt;/code&gt;（注册） 和 &lt;code&gt;boot&lt;/code&gt;（引导、初始化）&lt;/p&gt;

&lt;p&gt;3、服务提供者&lt;/p&gt;
&lt;p&gt;一个类要被容器所能够提取，必须要先注册至这个容器。既然 Laravel 称这个容器叫做服务容器，那么我们需要某个服务，就得先注册、绑定这个服务到容器，那么提供服务并绑定服务至容器的东西，就是服务提供者（Service Provider）。&lt;/p&gt;

&lt;p&gt;4、向IOC 容器添加自己的类&lt;/p&gt;
&lt;p&gt;4.1、新建validate类&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213105931921-1761131372.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;4.2、新建validateProvider&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213110042406-641608659.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;4.3、绑定validate类到Provider&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&amp;lt;?&lt;span&gt;php

namespace App\Providers;

&lt;/span&gt;&lt;span&gt;use&lt;/span&gt;&lt;span&gt; Illuminate\Support\ServiceProvider;

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt; ValidateProvider &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; ServiceProvider
{
    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
     * Bootstrap the application services.
     *
     * @return void
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; boot()
    {
        &lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;    }

    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
     * Register the application services.
     *
     * @return void
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; register()
    {
        &lt;/span&gt;&lt;span&gt;$this&lt;/span&gt;-&amp;gt;app-&amp;gt;bind('valicate',&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Validate();
        });
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;4.4、添加Provider到IOC容器&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213114309062-1002760339.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;4.5、使用&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213111322952-878315791.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;4.6、成功！&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213111346937-1650160058.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;5、门面（facade）&lt;/p&gt;
&lt;p&gt;facade用来提供统一的接口，比如无论你用哪种cache，redis还是memcache，客户端都可以用cache::get()方式来获取value，至于具体是用了redis还是memcahe，就看你在sevice provider里面绑定了哪个。cache::get()的实现方式是，继承Facade方法getFacadeAccessor，返回你在容器中绑定的key值，比如cache，然后Facade类会使用php魔术变量__callstatic(),callstatic的逻辑里面会从container里解析cache所绑定的服务，就是前面提到的service provider绑定了谁&lt;/p&gt;

&lt;p&gt; 5.1、例如config/app.php里的mail&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213141206156-814219598.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.2、这个类只返回一个mailer&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213141333093-1980063212.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.3、如果调用它的send方法，不存在的话会进入到callstatic的魔术方法&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213141539171-875412488.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.4、这个方法会得到mailer的实例，即app('mailer')&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213141639656-751005960.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213142031749-191419284.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.5、这个实例便能调用mailer类的send方法&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1128628/201802/1128628-20180213142354374-241356137.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;6、契约&lt;/p&gt;
&lt;p&gt;Laravel 的契约是一组定义框架提供的核心服务的接口。例如，&lt;code&gt;Illuminate\Contracts\Queue\Queue&lt;/code&gt; 契约定义了队列任务所需的方法，而 &lt;code&gt;Illuminate\Contracts\Mail\Mailer&lt;/code&gt; 契约定义了发送电子邮件所需的方法。框架对每个契约都提供了相应的实现。&lt;/p&gt;
&lt;p&gt;好处是实现了程序的低耦合和简单性。&lt;/p&gt;
&lt;h3 id=&quot;低耦合&quot;&gt;低耦合&lt;a class=&quot;anchorific&quot; href=&quot;https://d.laravel-china.org/docs/5.5/contracts#%E4%BD%8E%E8%80%A6%E5%90%88&quot;&gt;#&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;首先，让我们来看一些高耦合缓存实现的代码。如下:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&amp;lt;?&lt;span&gt;php

namespace App\Orders;

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Repository
{
    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
     * 缓存实例。
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;$cache&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
     * 创建一个仓库实例。
     *
     * @param  \SomePackage\Cache\Memcached  $cache
     * @return void
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;function&lt;/span&gt; __construct(\SomePackage\Cache\Memcached &lt;span&gt;$cache&lt;/span&gt;&lt;span&gt;)
    {
        &lt;/span&gt;&lt;span&gt;$this&lt;/span&gt;-&amp;gt;cache = &lt;span&gt;$cache&lt;/span&gt;&lt;span&gt;;
    }

    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
     * 按照 Id 检索订单
     *
     * @param  int  $id
     * @return Order
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;function&lt;/span&gt; find(&lt;span&gt;$id&lt;/span&gt;&lt;span&gt;)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (&lt;span&gt;$this&lt;/span&gt;-&amp;gt;cache-&amp;gt;has(&lt;span&gt;$id&lt;/span&gt;&lt;span&gt;))    {
            &lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;在这个类中，程序跟给定的缓存实现高耦合。因为我们依赖于一个扩展包的特定缓存类。一旦这个扩展包的 API 被更改了，我们的代码就必须跟着改变。&lt;/p&gt;
&lt;p&gt;同样的，如果我们想要将底层的的缓存技术（ Memcached ）替换为另一种缓存技术（ Redis ），那又得再次修改这个 &lt;code&gt;repository&lt;/code&gt; 类。而 &lt;code&gt;repository&lt;/code&gt; 类不应该了解太多关于谁提供了这些数据或是如何提供的等等。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;比起上面的做法，我们可以使用一个简单的、与扩展包无关的接口来改进我们的代码：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&amp;lt;?&lt;span&gt;php

namespace App\Orders;

&lt;/span&gt;&lt;span&gt;use&lt;/span&gt; Illuminate\Contracts\Cache\Repository &lt;span&gt;as&lt;/span&gt;&lt;span&gt; Cache;

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Repository
{
    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
     * 缓存实例。
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;$cache&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;*
     * 创建一个仓库实例。
     *
     * @param  Cache  $cache
     * @return void
     &lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;function&lt;/span&gt; __construct(Cache &lt;span&gt;$cache&lt;/span&gt;&lt;span&gt;)
    {
        &lt;/span&gt;&lt;span&gt;$this&lt;/span&gt;-&amp;gt;cache = &lt;span&gt;$cache&lt;/span&gt;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;现在，更改之后的代码没有与任何扩展包甚至是 Laravel 耦合。而契约扩展包不包含任何实现和依赖项，你可以轻松地写任何给定契约的替代实现，来实现不修改任何关于缓存消耗的代码就可以替换缓存实现。&lt;/p&gt;
</description>
<pubDate>Tue, 13 Feb 2018 07:02:00 +0000</pubDate>
<dc:creator>郁冬</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lamp01/p/8445587.html</dc:identifier>
</item>
<item>
<title>基于Citus和ASP.NET Core开发多租户应用 - MeteorSeed</title>
<link>http://www.cnblogs.com/MeteorSeed/p/8446154.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/MeteorSeed/p/8446154.html</guid>
<description>&lt;p&gt;　　Citus是基于PsotgreSQL的扩展，用于切分PsotgreSQL的数据，非常简单地实现数据“切片（sharp）”。如果不使用Citus，则需要开发者自己实现分布式数据访问层（DDAL），实现路由和结果汇总等逻辑，借助Citus可简化开发，是开发者把精力集中在具体的业务逻辑上。&lt;/p&gt;
&lt;p&gt;　　对于多租户程序来说，Citus可以帮助企业对数据进行切片，相比于传统的数据管理方式，Citus更智能，操作更为简单，运维成本更低廉。下面演示Citus的简单使用。&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
curl -sSL https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;get.docker.com/ | sh&lt;/span&gt;
sudo usermod -aG docker $USER &amp;amp;&amp;amp; exec sg docker newgrp `id -&lt;span&gt;gn`
sudo systemctl start docker

sudo curl &lt;/span&gt;-sSL https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;github.com/docker/compose/releases/download/1.19.0/docker-compose-`uname -s`-`uname -m` -o /usr/local/bin/docker-compose&lt;/span&gt;
sudo chmod +x /usr/local/bin/docker-compose
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;　　Citus有3个版本Citus Community，Citus Cloud（云端版）， Citus Enterprise（支持HA等高级特性），本文使用Citus Community。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
curl -sSLO https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;raw.githubusercontent.com/citusdata/docker/master/docker-compose.yml&lt;/span&gt;
docker-compose -p citus up -d
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
docker exec -it citus_master psql -U postgres
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
postgres=&lt;span&gt;# \password postgres          #给postgres用户设置密码
Enter &lt;/span&gt;&lt;span&gt;new&lt;/span&gt;&lt;span&gt; password: 
Enter it again: &lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
&lt;span&gt;CREATE TABLE tenants (
    id uuid NOT NULL,
    domain text NOT NULL,
    name text NOT NULL,
    description text NOT NULL,
    created_at timestamptz NOT NULL,
    updated_at timestamptz NOT NULL
);

CREATE TABLE questions (
    id uuid NOT NULL,
    tenant_id uuid NOT NULL,
    title text NOT NULL,
    votes &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; NOT NULL,
    created_at timestamptz NOT NULL,
    updated_at timestamptz NOT NULL
);

ALTER TABLE tenants ADD PRIMARY KEY (id);
ALTER TABLE questions ADD PRIMARY KEY (id, tenant_id);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
SELECT create_distributed_table(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;tenants&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
SELECT create_distributed_table(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;questions&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;tenant_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;55&quot;&gt;
&lt;pre&gt;
&lt;span&gt;INSERT INTO tenants VALUES (
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c620f7ec-6b49-41e0-9913-08cfe81199af&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, 
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;bufferoverflow.local&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Buffer Overflow&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Ask anything code-related!&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    now(),
    now());

INSERT INTO tenants VALUES (
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;b8a83a82-bb41-4bb3-bfaa-e923faab2ca4&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, 
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dboverflow.local&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Database Questions&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Figure out why your connection string is broken.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    now(),
    now());

INSERT INTO questions VALUES (
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;347b7041-b421-4dc9-9e10-c64b8847fedf&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;c620f7ec-6b49-41e0-9913-08cfe81199af&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;How do you build apps in ASP.NET Core?&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;,
    now(),
    now());

INSERT INTO questions VALUES (
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;a47ffcd2-635a-496e-8c65-c1cab53702a7&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;b8a83a82-bb41-4bb3-bfaa-e923faab2ca4&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Using postgresql for multitenant data?&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
    &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;,
    now(),
    now());&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;ul&gt;&lt;li&gt;
&lt;h2&gt;安装“Npgsql.EntityFrameworkCore.PostgreSQL”包&lt;/h2&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;　　Npgsql.EntityFrameworkCore.PostgreSQL：支持Entity Framework Core操作PostgreSQL。&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;h2&gt;安装“SaasKit.Multitenancy”包&lt;/h2&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;　　SaasKit.Multitenancy：支持ASP.NET Core开发多租户应用。&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; QuestionExchange.Models
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Question
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Guid Id { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Tenant Tenant { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Title { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; Votes { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DateTimeOffset CreatedAt { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DateTimeOffset UpdatedAt { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; QuestionExchange.Models
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Tenant
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; Guid Id { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Domain { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Name { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; Description { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DateTimeOffset CreatedAt { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DateTimeOffset UpdatedAt { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.Generic;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; QuestionExchange.Models
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; QuestionListViewModel
    {
    　　&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IEnumerable&amp;lt;Question&amp;gt; Questions { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Linq;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.EntityFrameworkCore;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; QuestionExchange.Models;
&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; QuestionExchange
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; AppDbContext : DbContext
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; AppDbContext(DbContextOptions&amp;lt;AppDbContext&amp;gt;&lt;span&gt; options)
            : &lt;/span&gt;&lt;span&gt;base&lt;/span&gt;&lt;span&gt;(options)
        {
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DbSet&amp;lt;Tenant&amp;gt; Tenants { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; DbSet&amp;lt;Question&amp;gt; Questions { &lt;span&gt;get&lt;/span&gt;; &lt;span&gt;set&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt;&lt;span&gt; C# classes and properties are PascalCase by convention, but your Postgres tables and columns are lowercase (and snake_case). 
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; The OnModelCreating method lets you override the default name translation and let Entity Framework Core know how to find 
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt; the entities in your database.
        &lt;/span&gt;&lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;/summary&amp;gt;&lt;/span&gt;
        &lt;span&gt;///&lt;/span&gt; &lt;span&gt;&amp;lt;param name=&quot;modelBuilder&quot;&amp;gt;&amp;lt;/param&amp;gt;&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; OnModelCreating(ModelBuilder modelBuilder)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; mapper = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Npgsql.NpgsqlSnakeCaseNameTranslator();
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; types =&lt;span&gt; modelBuilder.Model.GetEntityTypes().ToList();

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Refer to tables in snake_case internally&lt;/span&gt;
            types.ForEach(e =&amp;gt; e.Relational().TableName =&lt;span&gt; mapper.TranslateMemberName(e.Relational().TableName));

            &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Refer to columns in snake_case internally&lt;/span&gt;
            types.SelectMany(e =&amp;gt;&lt;span&gt; e.GetProperties())
                .ToList()
                .ForEach(p &lt;/span&gt;=&amp;gt; p.Relational().ColumnName =&lt;span&gt; mapper.TranslateMemberName(p.Relational().ColumnName));
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Collections.Generic;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Threading.Tasks;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.AspNetCore.Http;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.EntityFrameworkCore;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Caching.Memory;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Logging;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; SaasKit.Multitenancy;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; QuestionExchange.Models;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; QuestionExchange
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; CachingTenantResolver : MemoryCacheTenantResolver&amp;lt;Tenant&amp;gt;&lt;span&gt;
    {
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; AppDbContext _context;

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; CachingTenantResolver(
            AppDbContext context, IMemoryCache cache, ILoggerFactory loggerFactory)
             : &lt;/span&gt;&lt;span&gt;base&lt;/span&gt;&lt;span&gt;(cache, loggerFactory)
        {
            _context &lt;/span&gt;=&lt;span&gt; context;
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; Resolver runs on cache misses&lt;/span&gt;
        &lt;span&gt;protected&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; Task&amp;lt;TenantContext&amp;lt;Tenant&amp;gt;&amp;gt;&lt;span&gt; ResolveAsync(HttpContext context)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; subdomain =&lt;span&gt; context.Request.Host.Host.ToLower();

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; tenant = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _context.Tenants
                .FirstOrDefaultAsync(t &lt;/span&gt;=&amp;gt; t.Domain ==&lt;span&gt; subdomain);

            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (tenant == &lt;span&gt;null&lt;/span&gt;) &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; TenantContext&amp;lt;Tenant&amp;gt;&lt;span&gt;(tenant);
        }

        &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;override&lt;/span&gt;&lt;span&gt; MemoryCacheEntryOptions CreateCacheEntryOptions()
            &lt;/span&gt;=&amp;gt; &lt;span&gt;new&lt;/span&gt; MemoryCacheEntryOptions().SetAbsoluteExpiration(TimeSpan.FromHours(&lt;span&gt;2&lt;/span&gt;&lt;span&gt;));

        &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt; GetContextIdentifier(HttpContext context)
            &lt;/span&gt;=&amp;gt;&lt;span&gt; context.Request.Host.Host.ToLower();

        &lt;/span&gt;&lt;span&gt;protected&lt;/span&gt; &lt;span&gt;override&lt;/span&gt; IEnumerable&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; GetTenantIdentifiers(TenantContext&amp;lt;Tenant&amp;gt;&lt;span&gt; context)
            &lt;/span&gt;=&amp;gt; &lt;span&gt;new&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;[] { context.Tenant.Domain };
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.AspNetCore.Builder;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.AspNetCore.Hosting;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.EntityFrameworkCore;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.Configuration;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.Extensions.DependencyInjection;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; QuestionExchange.Models;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; QuestionExchange
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Startup
    {
        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Startup(IConfiguration configuration)
        {
            Configuration &lt;/span&gt;=&lt;span&gt; configuration;
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; IConfiguration Configuration { &lt;span&gt;get&lt;/span&gt;&lt;span&gt;; }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; This method gets called by the runtime. Use this method to add services to the container.&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ConfigureServices(IServiceCollection services)
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; connectionString = &lt;span&gt;&quot;&lt;span&gt;Server=192.168.99.102;Port=5432;Database=postgres;Userid=postgres;Password=yourpassword;&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

            services.AddEntityFrameworkNpgsql()
    .AddDbContext&lt;/span&gt;&amp;lt;AppDbContext&amp;gt;(options =&amp;gt;&lt;span&gt; options.UseNpgsql(connectionString));
            services.AddMultitenancy&lt;/span&gt;&amp;lt;Tenant, CachingTenantResolver&amp;gt;&lt;span&gt;();

            services.AddMvc();
        }

        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; This method gets called by the runtime. Use this method to configure the HTTP request pipeline.&lt;/span&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Configure(IApplicationBuilder app, IHostingEnvironment env)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (env.IsDevelopment())
            {
                app.UseDeveloperExceptionPage();
                app.UseBrowserLink();
            }
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;
            {
                app.UseExceptionHandler(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Home/Error&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            }

            app.UseStaticFiles();
            app.UseMultitenancy&lt;/span&gt;&amp;lt;Tenant&amp;gt;&lt;span&gt;();
            app.UseMvc(routes &lt;/span&gt;=&amp;gt;&lt;span&gt;
            {
                routes.MapRoute(
                    name: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;default&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    template: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{controller=Home}/{action=Index}/{id?}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
            });
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@inject Tenant Tenant
@model QuestionListViewModel

@{
    ViewData[&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Title&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;] = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Home Page&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
}

&lt;/span&gt;&amp;lt;div &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;row&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;div &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;col-md-12&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;h1&amp;gt;Welcome to &amp;lt;strong&amp;gt;@Tenant.Name&amp;lt;/strong&amp;gt;&amp;lt;/h1&amp;gt;
        &amp;lt;h3&amp;gt;@Tenant.Description&amp;lt;/h3&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;

&amp;lt;div &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;row&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;div &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;col-md-12&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;h4&amp;gt;Popular questions&amp;lt;/h4&amp;gt;
        &amp;lt;ul&amp;gt;&lt;span&gt;
            @foreach (&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; question &lt;span&gt;in&lt;/span&gt;&lt;span&gt; Model.Questions)
            {
                &lt;/span&gt;&amp;lt;li&amp;gt;@question.Title&amp;lt;/li&amp;gt;&lt;span&gt;
            }
        &lt;/span&gt;&amp;lt;/ul&amp;gt;
    &amp;lt;/div&amp;gt;
&amp;lt;/div&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.AspNetCore.Mvc;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; Microsoft.EntityFrameworkCore;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; QuestionExchange.Models;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Diagnostics;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Linq;
&lt;/span&gt;&lt;span&gt;using&lt;/span&gt;&lt;span&gt; System.Threading.Tasks;

&lt;/span&gt;&lt;span&gt;namespace&lt;/span&gt;&lt;span&gt; QuestionExchange.Controllers
{
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; HomeController : Controller
    {
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; AppDbContext _context;
        &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;readonly&lt;/span&gt;&lt;span&gt; Tenant _currentTenant;

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; HomeController(AppDbContext context, Tenant tenant)
        {
            _context &lt;/span&gt;=&lt;span&gt; context;
            _currentTenant &lt;/span&gt;=&lt;span&gt; tenant;
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;async&lt;/span&gt; Task&amp;lt;IActionResult&amp;gt;&lt;span&gt; Index()
        {
            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; topQuestions = &lt;span&gt;await&lt;/span&gt;&lt;span&gt; _context
                .Questions
                .Where(q &lt;/span&gt;=&amp;gt; q.Tenant.Id ==&lt;span&gt; _currentTenant.Id)
                .OrderByDescending(q &lt;/span&gt;=&amp;gt;&lt;span&gt; q.UpdatedAt)
                .Take(&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;)
                .ToArrayAsync();

            &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; viewModel = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; QuestionListViewModel
            {
                Questions &lt;/span&gt;=&lt;span&gt; topQuestions
            };

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View(viewModel);
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; IActionResult About()
        {
            ViewData[&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Message&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;] = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Your application description page.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View();
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; IActionResult Contact()
        {
            ViewData[&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Message&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;] = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Your contact page.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;

            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; View();
        }

        &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; IActionResult Error()
        {
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; View(&lt;span&gt;new&lt;/span&gt; ErrorViewModel { RequestId = Activity.Current?.Id ??&lt;span&gt; HttpContext.TraceIdentifier });
        }
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;　　首先需要修改本地Hosts文件，添加：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt;&lt;span&gt; bufferoverflow.local
&lt;/span&gt;&lt;span&gt;127.0&lt;/span&gt;.&lt;span&gt;0.1&lt;/span&gt; dboverflow.local
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　运行cmd（命令行），输入以下命令，刷新DNS：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
ipconfig /flushdns
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　分别使用不同Url浏览站点，可以看到之前插入的测试数据在不同租户下显示不同：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/270073/201802/270073-20180213135652109-655995953.png&quot; alt=&quot;&quot; width=&quot;1082&quot; height=&quot;397&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　以上，简单演示了如何基于Citus开发多租户应用。此外，Citus还比较适合开发需要快速返回查询结果的应用（比如“仪表板”等）。&lt;/p&gt;
&lt;p&gt;　　本文演示的例子比较简单，仅仅是演示了使用Citus开发多租户应用的可能。具体实践中，还涉及到具体业务以及数据库切片技巧等。建议阅读微软的《Cloud Design Patterns Book》中的Sharding模式部分，以及Citus的官方技术文档。&lt;/p&gt;

&lt;p&gt;参考资料：&lt;/p&gt;
&lt;p&gt;　　&lt;a href=&quot;https://github.com/citusdata/citus&quot; target=&quot;_blank&quot;&gt;https://github.com/citusdata/citus&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;a href=&quot;https://www.citusdata.com/blog/2018/01/22/multi-tenant-web-apps-with-dot-net-core-and-postgres&quot; target=&quot;_blank&quot;&gt;https://www.citusdata.com/blog/2018/01/22/multi-tenant-web-apps-with-dot-net-core-and-postgres&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;a href=&quot;https://docs.citusdata.com/en/v7.1/aboutcitus/what_is_citus.html&quot; target=&quot;_blank&quot;&gt;https://docs.citusdata.com/en/v7.1/aboutcitus/what_is_citus.html&lt;/a&gt;&lt;/p&gt;




</description>
<pubDate>Tue, 13 Feb 2018 06:24:00 +0000</pubDate>
<dc:creator>MeteorSeed</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/MeteorSeed/p/8446154.html</dc:identifier>
</item>
<item>
<title>小甲鱼OD学习第1讲 - 孙悟空son_ku_kong</title>
<link>http://www.cnblogs.com/Tobi/p/8446571.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Tobi/p/8446571.html</guid>
<description>
&lt;p&gt;这一讲我们的目标是修改Hello.exe对话框的标题和内容，如图所示&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;把程序放进OD，按F8一步步运行，直到程序弹出对话框为止，然后在弹出对话框位置处下断点&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;按Ctrl+F2重新载入程序，然后按F9直接运行到断点处&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;按F7进入断点里面，最后，成功看到Title和Text的位置&lt;/p&gt;
&lt;p&gt;&lt;img alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;在下面数据处直接修改字符串&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;data:image/png;base64,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&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;结束&lt;/p&gt;

</description>
<pubDate>Tue, 13 Feb 2018 06:18:00 +0000</pubDate>
<dc:creator>孙悟空son_ku_kong</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/Tobi/p/8446571.html</dc:identifier>
</item>
<item>
<title>对.Net Core结合Docker和Jexus的实践 - 微笑刺客D</title>
<link>http://www.cnblogs.com/CKExp/p/8445836.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/CKExp/p/8445836.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;　　&lt;/strong&gt;&lt;span&gt;当前的场景有两种方式将Demo实现运行，一种是我将Asp.Net Core项目通过自侦听方式启动，然后外网正常访问，第二种通过功能强大的jexus作为代理，将项目发布后部署到jexus配置下，通过修改配置文件，通过jexus进行反向代理，此时项目本身可以不需要自侦听方式。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　当前的场景是直接在主机下进行的，并没有加入到Docker容器中。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;strong&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1133736/201802/1133736-20180212224325827-1173334400.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;　　&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;首先，摆在面前的就有一个问题，我是直接根据镜像建立容器，然后在容器中安装Git获取项目、安装jexus部署项目、安装vim修改配置文件，还是直接获取项目后自启动侦听呢。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　不得不承认这两种情形都是很糟糕的，或许来说功能实现了，但是这个实现的过程是很不值得的，恰巧，我就完完全全走了一遍。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　^_^&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1、加入Docker容器，容器中加入jexus&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;　　&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;通过之前的一篇文章&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/CKExp/p/8159269.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/CKExp/p/8159269.html&lt;/a&gt;不难将Docker环境搭建起来，此处将不再制造轮子。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　一步一步分析，首先在容器中安装Git，也就意味着假如我要操作上百个容器那不是意味着我要安装上百次Git，同理jexus，也同理Vim，这是很不值得的，然后我在想，能否将这些个软件写到Dockerfile中呢，可以，但谁又会这么去做呢。&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　不扯远了，单讲讲网站启动，我在容器中通过将网站发布后，重新启动jexus，通过外网访问（&lt;strong&gt;ip:端口&lt;/strong&gt;），可以访问的通，还是很开心的，至少没出什么问题。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;strong&gt;dotnet publish -o /&lt;span&gt;var&lt;/span&gt;/www/HDShop&lt;/strong&gt;&lt;br/&gt;&lt;strong&gt;sh /usr/jexus/jws restart&lt;/strong&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;注意，这里的端口已经有了映射关系，我在建立容器的时候就已经指定了容器对外访问端口，所以网站的默认端口已经不合适了，我直接在Programcs中加入了&lt;strong&gt;UseUrls(&quot;http://*:3456&quot;)&lt;/strong&gt;,容器对外访问端口是2345.&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; IWebHost BuildWebHost(&lt;span&gt;string&lt;/span&gt;[] args) =&amp;gt;&lt;span&gt;
            WebHost.CreateDefaultBuilder(args)&lt;/span&gt;&lt;span&gt;
                .UseUrls(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;http://*:3456&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
                .UseStartup&lt;/span&gt;&amp;lt;Startup&amp;gt;&lt;span&gt;()
                .Build();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;　&lt;/strong&gt;也可以通过curl命令（&lt;strong&gt;curl ip:端口&lt;/strong&gt;）查看能否正常访问，将返回网站页面信息。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt; &lt;strong&gt;&lt;span&gt;2、加入Docker容器，容器中网站启动自侦听&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;　&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;Demo获取完毕，直接通过自侦听方式启动网站 &lt;strong&gt;dotnet run&lt;/strong&gt; 也是可以正常访问的。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　通过一组实验之后，我得到了一组信息，包含了我们想要的结果：&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1133736/201802/1133736-20180212230810437-1126996745.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　2345：3456 -&amp;gt; 此方式为主机下项目直接共享到容器中，主机可改变，双方可见，容器改变，仅容器可见，对主机文件并无影响 。采用镜像为dotnet ,并未构造自身的镜像&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　总结：不采用jexus仍然能够正常运行，jexus只是加强了更多的功能。&lt;/span&gt;&lt;span&gt;既然有无jexus对我容器内部的网站启动作用不大，那么我就可以考虑在Docker中除非有特殊情况，否则我是坚决不会将jexus加入到Docker中。&lt;/span&gt;&lt;span&gt;当然，主机上的jexus功能还是需要留着的，只是容器中jexus存在的必要性就要考虑了。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;直接通过主机上的Git获取项目&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;　　&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1133736/201802/1133736-20180212231640015-1571562217.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;通过指令将项目共享到容器中，主机上的直接修改将影响中容器内部的修改，而容器中对文件的修改却是隔离主机的，不对实际的文件进行改变。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
docker run -dit -p &lt;span&gt;2345&lt;/span&gt;:&lt;span&gt;3456&lt;/span&gt; --privileged=&lt;span&gt;true -v&lt;/span&gt; /HDShop:/HDShop microsoft/dotnet
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;span&gt;这样一来，我在主机上获得项目，直接在容器中进行编译，运行，是不错的。那么容器中Git存在的必要性被我否决掉了。通过实际操作，这是很可行的，外网也能正常访问。甚至是说，我接下来的所有操作，都将依赖这种形式。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;同样来讲，我在主机上直接修改，容器中生效，那么容器中在去安装Vim也就不必要了，除非来说容器中的文件要相对主机上的要做一些改动，那么便下载一个Vim把，毕竟容器中可没有Vim。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　敲vim命令时提示说：vim: command not found，这个时候就需要安装vim，可是当你敲&lt;/span&gt;&lt;strong&gt;apt-get install vim&lt;/strong&gt;&lt;span&gt;命令时，提示：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;        Reading package lists... Done&lt;/span&gt;&lt;br/&gt;&lt;span&gt;        Building dependency tree       &lt;/span&gt;&lt;br/&gt;&lt;span&gt;        Reading state information... Done&lt;/span&gt;&lt;br/&gt;&lt;span&gt;        E: Unable to locate package vim&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;        这时候需要敲：&lt;strong&gt;apt-get update&lt;/strong&gt;，这个命令的作用是：同步 /etc/apt/sources.list 和 /etc/apt/sources.list.d 中列出的源的索引，这样才能获取到最新的软件包。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;        等更新完毕以后再敲命令：&lt;strong&gt;apt-get install vim&lt;/strong&gt;命令即可。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;　　在此我遇到了一些问题，不知是日志信息过多还是软件安装将容器中的空间竟然占满了，以至于我想改动配置文件但无法正常保存。看到了几篇文章说docker容器所在目录承载的能力有限建议切换到其他目录下，我没有去尝试，有需要的朋友可以尝试尝试。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　遇到的场景：&lt;a href=&quot;http://blog.csdn.net/niu_hao/article/details/78873076&quot; target=&quot;_blank&quot;&gt;http://blog.csdn.net/niu_hao/article/details/78873076&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　解决方案：&lt;a href=&quot;https://www.cnblogs.com/HD/p/4807088.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/HD/p/4807088.html&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;个人推荐方案&lt;/span&gt;&lt;span&gt;：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　在没有使用dockerfile的情况下，直接通过手动部署&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　我推荐将项目直接先获取到主机，然后通过共享到容器中，直接通过主机上的vim和git方便修改文件。容器中不再加入jexus，而是采用自侦听的方式.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如果直接在容器中下载git、vim和jexus，很费时间和精力。同时浪费了容器的磁盘空间。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　主机上的jexus可用可不用，推荐还是用上，毕竟功能很多。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;span&gt;　　&lt;span&gt;开始通过Dockerfile来构建镜像，首先是来学习学习Dockerfile：&lt;a href=&quot;http://blog.csdn.net/qq_29999343/article/details/78318397&quot;&gt;http://blog.csdn.net/qq_29999343/article/details/78318397&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　&lt;span&gt;ok，接下来开始写一个Dockerfile&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;　　注意dockerfile文件的放置位置&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　当我们的项目发布如果就在项目所在文件夹，那么就在发布后的文件夹里协商Dockerfile即可，总之跟着发布后的文件夹跑&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　我尝试的时候，发布文件夹在其它目录下，然后将Dockerfile建设到项目所在文件夹，然后创建我的镜像，结果是镜像有了，容器创建成功了，&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　也将容器中的服务跑起来了但是直接访问不行。猜想主要还是当前文件夹并非发布后的文件夹造成的。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;　　编写Dockerfile：&lt;a href=&quot;https://www.cnblogs.com/savorboard/p/dotnetcore-docker.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/savorboard/p/dotnetcore-docker.ht&lt;/a&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　&lt;span&gt;&lt;strong&gt;开始&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;编&lt;/span&gt;写我的Dockerfile&lt;/strong&gt;：&lt;/span&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　　1、touch Dockerfile&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　　2、vim Dockerfile&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;　　3、内容&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
#基于microsoft/&lt;span&gt;aspnetcore镜像构建新镜像
FROM microsoft&lt;/span&gt;/&lt;span&gt;aspnetcore

#拷贝当前文件夹内容到容器指定目录
COPY . &lt;/span&gt;/&lt;span&gt;hdshop

#设置工作目录
WORKDIR &lt;/span&gt;/&lt;span&gt;hdshop

#设置对外暴露端口
EXPOSE &lt;/span&gt;&lt;span&gt;3456&lt;/span&gt;&lt;span&gt;

# 设置启动后运行指令
CMD [&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;dotnet&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hdshop.dll&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;   &lt;strong&gt;:wq&lt;/strong&gt;&lt;span&gt;保存退出&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;   通过指令&lt;strong&gt;docker build -t hdshopimage .  注意&lt;/strong&gt;末尾的点记得加上，那是指代当前目录&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　&lt;/strong&gt;&lt;span&gt;查看当前镜像&lt;strong&gt;docker images&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;　&lt;/strong&gt;根据镜像来构建新容器&lt;strong&gt; &lt;/strong&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;docker run --name firstContainer -d -p 2345:3456 hdshopimage&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;　&lt;/strong&gt;查看当前容器&lt;strong&gt;docker ps&lt;/strong&gt; 或是通过访问容器内运行着的网站，可以发现容器已经有了网站已经跑起来了。&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;　&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　注意，在写Dockerfile时，其中对外暴露的端口是容器对外暴露的端口，也就是说如果想要实现对内服务端口是80端口或者其它固定端口，那只有我们在程序中进行设置，所以推荐采用程序中的UseUrls(&quot;http://*80&quot;)进行统一设置内部端口为80端口&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　Dockerfile对于单机而言由于对外端口的唯一性，假设只在一台服务器上，从一个服务需要创建一个dockerfile来讲，是有点繁琐，但是考虑到时间线的延长，所有Dockerfile都已经写好了，假设一些容器宕机了，可以很快直接利用dockerfile进行新建，那还是很不错得。&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;&lt;span&gt;Docker 容器之间进行互联：&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;容器虽然职责是单一任务，但不可避免的会有需要与其它容器进行交互的场景，单台服务器下我们可以通过--link实现容器之间互联，这是通过网关的形式，直接在内网中进行调用，&lt;a href=&quot;http://blog.csdn.net/halcyonbaby/article/details/42112325&quot; target=&quot;_blank&quot;&gt;http://blog.csdn.net/halcyonbaby/article/details/42112325&lt;/a&gt;。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;span&gt;　　通过编写Dockerfile，实现容器根据脚本自动创建，通过jexus和docker结合使用的尝试，解答了我不少之前的问题，也让我掌握更多容器适应场景。&lt;/span&gt;&lt;strong&gt;&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/1133736/201802/1133736-20180213133932234-954843846.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;慢慢地得出一点经验，虽然可能这些经验不一定是正确的，但至少是我经历过的，有过这种经历，可比看几篇文章感觉爽快的多，还是推荐大家手脑并用，只看不做实在是难以体会到其中困难。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　之后，我想尝试下容器之间的互联操作，这次只是大概了解了一下，并没有过多的尝试。可以想象的到，容器互联之间肯定是有很多坑要踩的。&lt;/span&gt;&lt;/p&gt;

&lt;pre class=&quot;lang-java prettyprint prettyprinted&quot;&gt;
&lt;code&gt;&lt;span class=&quot;typ&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;str&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;pun&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;typ&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;typ&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;pun&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;typ&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;pun&quot;&gt;&lt;span class=&quot;pln&quot;&gt;&lt;span class=&quot;lit&quot;&gt;&lt;strong&gt;2018-2-13,望技术有成后能回来看见自己的脚步&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;

</description>
<pubDate>Tue, 13 Feb 2018 06:07:00 +0000</pubDate>
<dc:creator>微笑刺客D</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/CKExp/p/8445836.html</dc:identifier>
</item>
<item>
<title>一步一步从原理跟我学邮件收取及发送 11.完整的发送示例与go语言 - clq</title>
<link>http://www.cnblogs.com/-clq/p/8446372.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/-clq/p/8446372.html</guid>
<description>&lt;td id=&quot;main&quot;&gt;
&lt;div id=&quot;post_detail&quot;&gt;
&lt;div class=&quot;post&quot;&gt;
&lt;div class=&quot;postTitle&quot;&gt;&lt;a id=&quot;cb_post_title_url&quot; href=&quot;http://www.cnblogs.com/-clq/p/8446372.html&quot;&gt;一步一步从原理跟我学邮件收取及发送 11.完整的发送示例与go语言&lt;/a&gt;&lt;/div&gt;
&lt;div class=&quot;postText&quot; readability=&quot;60.958320226486&quot;&gt;
&lt;div id=&quot;cnblogs_post_body&quot; class=&quot;blogpost-body&quot; readability=&quot;225.49622522806&quot;&gt;
&lt;p&gt;    经过了这个系列的前几篇文章的学习，现在要写出一个完整的 smtp 邮件发送过程简直易如反掌。&lt;br/&gt;    例如我们可以轻松地写出以下的纯 C 语言代码（引用的其他C语言文件请看文末的 github 地址）：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;153&quot;&gt;
&lt;pre&gt;
#include &amp;lt;stdio.h&amp;gt;&lt;span&gt;
#include &lt;/span&gt;&amp;lt;windows.h&amp;gt;&lt;span&gt;
#include &lt;/span&gt;&amp;lt;time.h&amp;gt;&lt;span&gt;
#include &lt;/span&gt;&amp;lt;winsock.h&amp;gt;&lt;span&gt;

#include &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;lstring.c&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
#include &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;socketplus.c&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
#include &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;lstring_functions.c&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
#include &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;base64_functions.c&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;vc 下要有可能要加 lib 
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;#pragma comment (lib,&quot;*.lib&quot;)
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;#pragma comment (lib,&quot;libwsock32.a&quot;)
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;#pragma comment (lib,&quot;libwsock32.a&quot;)

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;SOCKET gSo = 0;&lt;/span&gt;
SOCKET gSo = -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;


&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行,可再优化 &lt;/span&gt;
lstring * RecvLine(SOCKET so, &lt;span&gt;struct&lt;/span&gt; MemPool * pool, lstring **&lt;span&gt; _buf)
{
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; index = -&lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; canread = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    lstring &lt;/span&gt;* r =&lt;span&gt; NULL;
    lstring &lt;/span&gt;* s =&lt;span&gt; NULL;
    lstring &lt;/span&gt;* buf = *&lt;span&gt;_buf;

    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (i=&lt;span&gt;0&lt;/span&gt;;i&amp;lt;&lt;span&gt;10&lt;/span&gt;;i++) &lt;span&gt;//&lt;/span&gt;&lt;span&gt;安全起见,不用 while ,用 for 一定次数就可以了 &lt;/span&gt;
&lt;span&gt;    {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;index = pos(&quot;\n&quot;, buf);&lt;/span&gt;
        index = pos(NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, pool), buf);

        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (index&amp;gt;-&lt;span&gt;1&lt;/span&gt;) &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
        
        canread &lt;/span&gt;= SelectRead_Timeout(so, &lt;span&gt;3&lt;/span&gt;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;是否可读取,时间&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;超时返回,单位为秒 &lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;0&lt;/span&gt; == canread) &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;
        
        s &lt;/span&gt;=&lt;span&gt; RecvBuf(so, pool);
        buf&lt;/span&gt;-&amp;gt;&lt;span&gt;Append(buf, s);
    }
    
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (index &amp;lt;&lt;span&gt;0&lt;/span&gt; ) &lt;span&gt;return&lt;/span&gt; NewString(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;, pool);
    
    r &lt;/span&gt;= substring(buf, &lt;span&gt;0&lt;/span&gt;&lt;span&gt;, index);
    buf &lt;/span&gt;= substring(buf, index + &lt;span&gt;2&lt;/span&gt;&lt;span&gt;, Length(buf));
    &lt;/span&gt;*_buf =&lt;span&gt; buf;
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; r;
}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;解码一行命令,这里比较简单就是按空格进行分隔就行了
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这是用可怕的指针运算的版本 &lt;/span&gt;
&lt;span&gt;void&lt;/span&gt; DecodeCmd(lstring * line, &lt;span&gt;char&lt;/span&gt; sp, &lt;span&gt;char&lt;/span&gt; ** cmds, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; cmds_count)
{
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; index = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; count = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    
    cmds[index] &lt;/span&gt;= line-&amp;gt;&lt;span&gt;str;
    
    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (i=&lt;span&gt;0&lt;/span&gt;; i&amp;lt;line-&amp;gt;len; i++&lt;span&gt;)
    {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (sp == line-&amp;gt;&lt;span&gt;str[i]) 
        {
            index&lt;/span&gt;++&lt;span&gt;;
            line&lt;/span&gt;-&amp;gt;str[i] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;直接修改为字符串结束符号,如果是只读的字符串这样做其实是不对的,不过效率很高 &lt;/span&gt;
&lt;span&gt;            
            cmds[index] &lt;/span&gt;= line-&amp;gt;str + i; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;指针向后移动 &lt;/span&gt;
            
            &lt;span&gt;if&lt;/span&gt; (i &amp;gt;= line-&amp;gt;len - &lt;span&gt;1&lt;/span&gt;) &lt;span&gt;break&lt;/span&gt;;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;如果是最后一定字符了就要退出,如果不是指针还要再移动一位&lt;/span&gt;
            cmds[index] = line-&amp;gt;str + i + &lt;span&gt;1&lt;/span&gt;&lt;span&gt;;
            
            count&lt;/span&gt;++&lt;span&gt;;
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (count &amp;gt;= cmds_count) &lt;span&gt;break&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;不要大于缓冲区 &lt;/span&gt;
&lt;span&gt;        }
        
    }&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;

}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;读取多行结果 &lt;/span&gt;
lstring * RecvMCmd(SOCKET so, &lt;span&gt;struct&lt;/span&gt; MemPool * pool, lstring **&lt;span&gt; _buf)
{
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; i = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; index = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; count = &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    lstring &lt;/span&gt;*&lt;span&gt; rs;
    &lt;/span&gt;&lt;span&gt;char&lt;/span&gt; c4 = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;\0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;判断第4个字符 &lt;/span&gt;
&lt;span&gt;    
    lstring &lt;/span&gt;* mline = NewString(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;, pool);

    
    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; (i=&lt;span&gt;0&lt;/span&gt;; i&amp;lt;&lt;span&gt;50&lt;/span&gt;; i++&lt;span&gt;)
    {
        rs &lt;/span&gt;= RecvLine(so, pool, _buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
&lt;span&gt;        
        mline&lt;/span&gt;-&amp;gt;&lt;span&gt;Append(mline, rs);
        LString_AppendConst(mline, &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;printf(&quot;\r\nRecvMCmd:%s\r\n&quot;, rs-&amp;gt;str); &lt;/span&gt;
            
        &lt;span&gt;if&lt;/span&gt; (rs-&amp;gt;len&amp;lt;&lt;span&gt;4&lt;/span&gt;) &lt;span&gt;break&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;长度要足够 &lt;/span&gt;
        c4 = rs-&amp;gt;str[&lt;span&gt;4&lt;/span&gt;-&lt;span&gt;1&lt;/span&gt;]; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第4个字符
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if ('\x20' == c4) break; &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&quot;\xhh&quot; 任意字符 二位十六进制&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;其实现在的转义符已经扩展得相当复杂，不建议用这个表示空格 &lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; (&lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt; == c4) &lt;span&gt;break&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第4个字符是空格就表示读取完了&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;也可以判断 &quot;250[空格]&quot; &lt;/span&gt;
&lt;span&gt;    
        
    }&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;
    &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mline;
}&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;

&lt;span&gt;void&lt;/span&gt;&lt;span&gt; main()
{
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; r;
    mempool mem, &lt;/span&gt;*&lt;span&gt; m;
    lstring &lt;/span&gt;*&lt;span&gt; s;
    lstring &lt;/span&gt;*&lt;span&gt; rs;
    lstring &lt;/span&gt;*&lt;span&gt; buf;
    lstring &lt;/span&gt;*&lt;span&gt; domain;
    lstring &lt;/span&gt;* &lt;span&gt;from&lt;/span&gt;&lt;span&gt;;
    lstring &lt;/span&gt;*&lt;span&gt; to;
    
    &lt;/span&gt;&lt;span&gt;char&lt;/span&gt; * cmds[&lt;span&gt;5&lt;/span&gt;] =&lt;span&gt; {NULL}; 
    &lt;/span&gt;&lt;span&gt;int&lt;/span&gt; cmds_count = &lt;span&gt;5&lt;/span&gt;&lt;span&gt;;
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------&lt;/span&gt;
&lt;span&gt;
    mem &lt;/span&gt;= makemem(); m = &amp;amp;mem; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;内存池,重要 &lt;/span&gt;
&lt;span&gt;    
    buf &lt;/span&gt;= NewString(&lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;, m);

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;直接装载各个 dll 函数&lt;/span&gt;
&lt;span&gt;    LoadFunctions_Socket();

    InitWinSocket(); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;初始化 socket, windows 下一定要有 &lt;/span&gt;
&lt;span&gt;

    gSo &lt;/span&gt;=&lt;span&gt; CreateTcpClient();
    r &lt;/span&gt;= ConnectHost(gSo, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;25&lt;/span&gt;&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;r = ConnectHost(gSo, &quot;smtp.163.com&quot;, 25); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;可以换成 163 的邮箱 &lt;/span&gt;

    &lt;span&gt;if&lt;/span&gt; (r == &lt;span&gt;1&lt;/span&gt;) printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;连接成功!\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------&lt;/span&gt;
    rs = RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
&lt;span&gt;
    printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    printf(rs&lt;/span&gt;-&amp;gt;str); printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    
    DecodeCmd(rs, &lt;/span&gt;&lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;, cmds, cmds_count); 
    printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\ndomain:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, cmds[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]); 
    
    domain &lt;/span&gt;= NewString(cmds[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;], m);
    
    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;EHLO&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, m);
    LString_AppendConst(s,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    s&lt;/span&gt;-&amp;gt;Append(s, domain); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;去掉这一行试试,163 邮箱就会返回错误了 &lt;/span&gt;
    LString_AppendConst(s,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

    SendBuf(gSo, s&lt;/span&gt;-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);    

    
    &lt;/span&gt;&lt;span&gt;///&lt;/span&gt;&lt;span&gt;/rs = RecvLine(gSo, m, &amp;amp;buf); //只收取一行 &lt;/span&gt;
    rs = RecvMCmd(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
&lt;span&gt;
    printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    printf(rs&lt;/span&gt;-&amp;gt;str); printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;用 base64 登录 &lt;/span&gt;
    s = NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;AUTH LOGIN\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, m);
    SendBuf(gSo, s&lt;/span&gt;-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);    
    
    rs &lt;/span&gt;= RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
    printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rs-&amp;gt;&lt;span&gt;str); 
    
    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;test1@newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, m); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;要换成你的用户名,注意 163 邮箱的话不要带后面的 @域名 部分 &lt;/span&gt;
    s =&lt;span&gt; base64_encode(s);
    LString_AppendConst(s,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    SendBuf(gSo, s&lt;/span&gt;-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);    
    
    rs &lt;/span&gt;= RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
    printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rs-&amp;gt;&lt;span&gt;str); 
    

    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;123456&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, m); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;要换成您的密码 &lt;/span&gt;
    s =&lt;span&gt; base64_encode(s);
    LString_AppendConst(s,&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    SendBuf(gSo, s&lt;/span&gt;-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);    
    
    rs &lt;/span&gt;= RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
    printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rs-&amp;gt;&lt;span&gt;str); 
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;邮件内容 &lt;/span&gt;
    &lt;span&gt;from&lt;/span&gt; = NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;test1@newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, m);
    to &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;clq@newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, m);
    
    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;MAIL FROM: &amp;lt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, m); s-&amp;gt;Append(s, &lt;span&gt;from&lt;/span&gt;); s-&amp;gt;AppendConst(s, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;注意&quot;&amp;lt;&quot; 符号和前面的空格。空格在协议中有和没有都可能，最好还是有 &lt;/span&gt;
    SendBuf(gSo, s-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);
    rs &lt;/span&gt;= RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
    printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rs-&amp;gt;&lt;span&gt;str);         
    
    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RCPT TO: &amp;lt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, m); s-&amp;gt;Append(s, to); s-&amp;gt;AppendConst(s, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    SendBuf(gSo, s&lt;/span&gt;-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);    
    rs &lt;/span&gt;= RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
    printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rs-&amp;gt;&lt;span&gt;str);     
    
    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;DATA\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, m);
    SendBuf(gSo, s&lt;/span&gt;-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);
    rs &lt;/span&gt;= RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
    printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rs-&amp;gt;&lt;span&gt;str);         
    
    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;From: \&quot;test1@newbt.net\&quot; &amp;lt;test1@newbt.net&amp;gt;\r\nTo: \&quot;clq@newbt.net\&quot; &amp;lt;clq@newbt.net&amp;gt;\r\nSubject: test\r\nDate: Sun, 21 Jan 2018 11:48:15 GMT\r\n\r\nHello World.\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, m);&lt;span&gt;//&lt;/span&gt;&lt;span&gt;邮件内容，正式的应该用一个函数生成 &lt;/span&gt;
    SendBuf(gSo, s-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);    
    
    
    s &lt;/span&gt;= NewString(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n.\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, m); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;邮件结束符 &lt;/span&gt;
    SendBuf(gSo, s-&amp;gt;str, s-&amp;gt;&lt;span&gt;len);    
    
    rs &lt;/span&gt;= RecvLine(gSo, m, &amp;amp;buf); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行 &lt;/span&gt;
    printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nRecvLine:%s\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, rs-&amp;gt;&lt;span&gt;str); 
    

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------&lt;/span&gt;
&lt;span&gt;    
    Pool_Free(&lt;/span&gt;&amp;amp;mem); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;释放内存池 &lt;/span&gt;
&lt;span&gt;    
    printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;gMallocCount:%d \r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, gMallocCount); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;看看有没有内存泄漏&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;简单的检测而已  
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;-------------------------------------------------- &lt;/span&gt;
&lt;span&gt;
    getch(); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;getch().不过在VC中好象要用getch()，必须在头文件中加上&amp;lt;conio.h&amp;gt; &lt;/span&gt;
&lt;span&gt;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;运行结果如图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/318151/201802/318151-20180213115948234-218496170.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    好了，我们用其他语言也来一个吧。但是这里有个问题：&lt;strong&gt;java 有很完善的电子邮件实现，实在是没必要再写一个&lt;/strong&gt;。我换用一下 go 语言吧，之所以用 golang ，那是因为 golang 现在真的是开发服务器程序的极佳选择，而因为它又非常的新，所以有些功能并不完善，特别是支持库方面离 java 还有比较远的距离。刚好在电子邮件方面就是，而我刚好最近 golang 又用得比较多。&lt;/p&gt;&lt;p&gt;    用过 golang 发送邮件的同学一定都知道 &lt;span&gt;&lt;strong&gt;go 语言中默认的 smtp 模块是无法在正常的 smtp 25 端口上去发送邮件的&lt;/strong&gt;&lt;/span&gt;（有兴趣的网友可以自行用 163 的邮箱试试）。原因是 golang 本身起源就是为 google 公司的需求服务的，所以很多功能都先优先做了 google 需要的部分，而对电子邮件有一点了解的网友们应该都知道 google 的 gmail 是不支持常规的 smtp 25 端口的，它需要安全连接的 ssl 接口。所以大家如果搜索 golang 的 smtp 发送示例的话，基本上都是要进行一点改造的。其实这样的改造代码都不完善，最后都会注明有问题。这个问题其实源于 golang 的 smtp 源码（我看的是 1.7 版本）中对 &quot;AUTH&quot; 命令的实现与常规不太一样，它的实现后面跟了两个参数，而经过我们前几篇的文章，大家都知道实现的只有一个参数，那就是 &quot;AUTH LOGIN&quot;。知道了这一点，要改造 golang 的源码还是比较容易的。不过 golang 和 java 一样有点过度设计的意思，所以要看懂它的代码也不是太容易（不过 golang 中的各种协议代码设计得很精巧，远远不是 java 可比的）。所以我们既然已经知道了怎样自己写一个，那还不如自己明明白白的写一个出来。以下就是一个我写的示例，对协议有一定了解的同学很容易进行改写，为了方便大家理解我就没有设计成类了，大家可以自己动手：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;95&quot;&gt;
&lt;pre&gt;
package main &lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;用于不加密环境的 smtp 发送电子邮件过程,因为不是所有的 smtp 环境都有加密支持的,不加密的适用范围更广一点,而且 smtp 服务器之间没有密码加密的过程
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;(因为对方 smtp 服务器不可能知道你的密码)所以原有的 golang 1.7.3 net/smtp 过程就不适合 smtp 之间发送邮件&lt;/span&gt;
&lt;span&gt;
import (
    &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;fmt&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;bufio&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    &quot;crypto/tls&quot;&lt;/span&gt;
    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;encoding/base64&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    &quot;errors&quot;
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    &quot;io&quot;&lt;/span&gt;
    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    &quot;net/smtp&quot; &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq add
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;    &quot;net/textproto&quot;&lt;/span&gt;
    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;strings&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
    &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;strconv&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
)

&lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; gConn net.Conn;
&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; gRead *&lt;span&gt; bufio.Reader;
&lt;/span&gt;&lt;span&gt;var&lt;/span&gt; gWrite *&lt;span&gt; bufio.Writer;

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;可以放到这样的类里&lt;/span&gt;
type TcpClient &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; {
    Conn net.Conn;
    Read &lt;/span&gt;*&lt;span&gt; bufio.Reader;
    Write &lt;/span&gt;*&lt;span&gt; bufio.Writer;
}&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;

func Connect(host &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;, port &lt;span&gt;int&lt;/span&gt;) (net.Conn, * bufio.Reader, *&lt;span&gt; bufio.Writer) {
    
    addr :&lt;/span&gt;= host + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; strconv.Itoa(port);
    conn, err :&lt;/span&gt;= net.Dial(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;tcp&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, addr);
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; nil, nil, nil
    }
    
    reader :&lt;/span&gt;=&lt;span&gt; bufio.NewReader(conn);
    writer :&lt;/span&gt;=&lt;span&gt; bufio.NewWriter(conn);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;writer.WriteString(&quot;EHLO\r\n&quot;);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;writer.Flush();
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;host, _, _ := net.SplitHostPort(addr)
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;return NewClient(conn, host)    &lt;/span&gt;
    &lt;span&gt;return&lt;/span&gt;&lt;span&gt; conn, reader, writer;
}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行,可再优化 
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;func RecvLine(conn *net.Conn) (string) {
&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;func RecvLine(conn net.Conn, reader * bufio.Reader) (string) {&lt;/span&gt;
func _RecvLine() (&lt;span&gt;string&lt;/span&gt;&lt;span&gt;) {
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;defer conn.Close();&lt;/span&gt;
    &lt;span&gt;///&lt;/span&gt;&lt;span&gt;/reader := bufio.NewReader(conn);&lt;/span&gt;
    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;reader := bufio.NewReaderSize(conn,409600)
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;line, err := reader.ReadString('\n'); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;如何设定超时?&lt;/span&gt;
    line, err := gRead.ReadString(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;如何设定超时?&lt;/span&gt;
    
    &lt;span&gt;if&lt;/span&gt; err != nil { &lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;; }
    
    line &lt;/span&gt;= strings.Split(line, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;)[&lt;span&gt;0&lt;/span&gt;]; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;还要再去掉 &quot;\r&quot;，其实不去掉也可以&lt;/span&gt;
    
    &lt;span&gt;return&lt;/span&gt;&lt;span&gt; line;
}&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;
func SendLine(line &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;){
    gWrite.WriteString(line &lt;/span&gt;+ &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    gWrite.Flush();
}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;解码一行命令,这里比较简单就是按空格进行分隔就行了&lt;/span&gt;
func DecodeCmd(line &lt;span&gt;string&lt;/span&gt;, sp &lt;span&gt;string&lt;/span&gt;) ([]&lt;span&gt;string&lt;/span&gt;&lt;span&gt;){

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;String[] tmp = line.split(sp); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;用空格分开&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;“.”和“|”都是转义字符，必须得加&quot;\\&quot;;&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;不一定是空格也有可能是其他的
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;String[] cmds = {&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;}; &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;先定义多几个，以面后面使用时产生异常&lt;/span&gt;
&lt;span&gt;    
    tmp :&lt;/span&gt;=&lt;span&gt; strings.Split(line, sp);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;var cmds = [5]string{&quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;}; &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;先定义多几个，以面后面使用时产生异常&lt;/span&gt;
    &lt;span&gt;var&lt;/span&gt; cmds = []&lt;span&gt;string&lt;/span&gt;{&lt;span&gt;&quot;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;}; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;先定义多几个，以面后面使用时产生异常
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;i:=0;&lt;/span&gt;
    &lt;span&gt;for&lt;/span&gt; i:=&lt;span&gt;0&lt;/span&gt;;i&amp;lt;len(tmp);i++&lt;span&gt; {
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; i &amp;gt;= len(cmds) { &lt;span&gt;break&lt;/span&gt;&lt;span&gt;;}
        cmds[i] &lt;/span&gt;=&lt;span&gt; tmp[i];
    }
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; []&lt;span&gt;string&lt;/span&gt;&lt;span&gt;(cmds);
}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;读取多行结果&lt;/span&gt;
func RecvMCmd() (&lt;span&gt;string&lt;/span&gt;&lt;span&gt;) {
    i :&lt;/span&gt;= &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;index := 0;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;count := 0;&lt;/span&gt;
    rs := &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;var c rune='\r';
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;var c4 rune = '\0'; &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;判断第4个字符&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;golang 似乎不支持这种表示&lt;/span&gt;
&lt;span&gt;    
    mline :&lt;/span&gt;= &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;;

    &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; i=&lt;span&gt;0&lt;/span&gt;; i&amp;lt;&lt;span&gt;50&lt;/span&gt;; i++&lt;span&gt; {
        rs &lt;/span&gt;= _RecvLine(); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;只收取一行&lt;/span&gt;
&lt;span&gt;        
        mline &lt;/span&gt;= mline + rs + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
        
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;printf(&quot;\r\nRecvMCmd:%s\r\n&quot;, rs-&amp;gt;str);&lt;/span&gt;
            
        &lt;span&gt;if&lt;/span&gt; len(rs)&amp;lt;&lt;span&gt;4&lt;/span&gt; {&lt;span&gt;break&lt;/span&gt;;} &lt;span&gt;//&lt;/span&gt;&lt;span&gt;长度要足够&lt;/span&gt;
        c4 := rs[&lt;span&gt;4&lt;/span&gt;-&lt;span&gt;1&lt;/span&gt;]; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第4个字符
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if ('\x20' == c4) break; &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;&quot;\xhh&quot; 任意字符 二位十六进制&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;其实现在的转义符已经扩展得相当复杂，不建议用这个表示空格&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;'&lt;/span&gt; &lt;span&gt;'&lt;/span&gt; == c4 { &lt;span&gt;break&lt;/span&gt;;} &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第4个字符是空格就表示读取完了&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;也可以判断 &quot;250[空格]&quot;&lt;/span&gt;
&lt;span&gt;    
        
    }&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;
    &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mline;
    
}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;简单的测试一下 smtp&lt;/span&gt;
&lt;span&gt;func test_smtp() {
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;连接
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;gConn, gRead, gWrite = Connect(&quot;newbt.net&quot;, 25);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;gConn, gRead, gWrite = Connect(&quot;newbt.net&quot;, 25);&lt;/span&gt;
    gConn, gRead, gWrite = Connect(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;smtp.163.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;25&lt;/span&gt;&lt;span&gt;);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line :=&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;解码一下,这样后面的 EHLO 才能有正确的第二个参数&lt;/span&gt;
    cmds := DecodeCmd(line, &lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    domain :&lt;/span&gt;= cmds[&lt;span&gt;1&lt;/span&gt;]; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;要从对方的应答中取出域名&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;空格分开的各个命令参数中的第二个
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;发送一个命令
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;SendLine(&quot;EHLO&quot;); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;163 这样是不行的,一定要有 domain&lt;/span&gt;
    SendLine(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;EHLO&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + &lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt; + domain); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;domain 要求其实来自 HELO 命令&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;HELO &amp;lt;SP&amp;gt; &amp;lt;domain&amp;gt; &amp;lt;CRLF&amp;gt;    
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取多行
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;line = _RecvLine();&lt;/span&gt;
    line =&lt;span&gt; RecvMCmd();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;用 base64 登录 &lt;/span&gt;
    SendLine(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;AUTH LOGIN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);    
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line =&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;s :=&quot;test1@newbt.net&quot;; &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;要换成你的用户名,注意 163 邮箱的话不要带后面的 @域名 部分 &lt;/span&gt;
    s :=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;clq_test&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;要换成你的用户名,注意 163 邮箱的话不要带后面的 @域名 部分 &lt;/span&gt;
    s = base64.StdEncoding.EncodeToString([]&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(s));
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;s = base64_encode(s);&lt;/span&gt;
&lt;span&gt;    SendLine(s);    
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line =&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line);
    

    s &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;123456&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;要换成您的密码 
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;s = base64_encode(s);&lt;/span&gt;
    s = base64.StdEncoding.EncodeToString([]&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(s));
    SendLine(s);    
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line =&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;--------------------------------------------------    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;邮件内容 
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;from := &quot;test1@newbt.net&quot;;&lt;/span&gt;
    &lt;span&gt;from&lt;/span&gt; := &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;clq_test@163.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
    to :&lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;clq@newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
    
    SendLine(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;MAIL FROM: &amp;lt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + &lt;span&gt;from&lt;/span&gt; +&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;注意&quot;&amp;lt;&quot; 符号和前面的空格。空格在协议中有和没有都可能，最好还是有 
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line =&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line);        
    
    SendLine(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RCPT TO: &amp;lt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + to+ &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line =&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line);        
    
    SendLine(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;DATA&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line =&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line)        
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt; = &quot;From: \&quot;test1@newbt.net\&quot; &amp;lt;test1@newbt.net&amp;gt;\r\nTo: \&quot;clq@newbt.net\&quot; &amp;lt;clq@newbt.net&amp;gt;\r\nSubject: test golang\r\nDate: Sun, 21 Jan 2018 11:48:15 GMT\r\n\r\nHello World.\r\n&quot;;&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;邮件内容，正式的应该用一个函数生成 &lt;/span&gt;
    s = MakeMail(&lt;span&gt;from&lt;/span&gt;,to,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;test golang&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Hello World.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    SendLine(s);    
    
    
    s &lt;/span&gt;= &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n.\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;邮件结束符 &lt;/span&gt;
&lt;span&gt;    SendLine(s);
    
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收取一行&lt;/span&gt;
    line =&lt;span&gt; _RecvLine();
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;recv:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; line)        
    
}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;

&lt;span&gt;//&lt;/span&gt;&lt;span&gt;这只是个简单的内容，真实的邮件内容复杂得多&lt;/span&gt;
func MakeMail(&lt;span&gt;from&lt;/span&gt;,to,subject,text &lt;span&gt;string&lt;/span&gt;)(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;s := &quot;From: \&quot;test1@newbt.net\&quot; &amp;lt;test1@newbt.net&amp;gt;\r\nTo: \&quot;clq@newbt.net\&quot; &amp;lt;clq@newbt.net&amp;gt;\r\nSubject: test golang\r\nDate: Sun, 21 Jan 2018 11:48:15 GMT\r\n\r\nHello World.\r\n&quot;;&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;邮件内容，正式的应该用一个函数生成 &lt;/span&gt;
    s := &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;From: \&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + &lt;span&gt;from&lt;/span&gt; + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot;\r\nTo: \&quot;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + to + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\&quot; &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + to + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nSubject: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + subject + 
        &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\nDate: Sun, 21 Jan 2018 11:48:15 GMT\r\n\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + &lt;span&gt;//&lt;/span&gt;&lt;span&gt;内容前是两个回车换行&lt;/span&gt;
        text + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\r\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
    
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; s;    

}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;这份代码可以直接使用在 163 的邮箱上，以下是 newbt 邮箱收到的 163 发送的邮件的真实截图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2017.cnblogs.com/blog/318151/201802/318151-20180213120546421-1010212193.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;    不过用到真实环境中，大家要再测试一下超时的情况，可以考虑自己加点超时，然后生成邮件的时间那里注意一下就差不多了。我后面还会给出一个直接修改自 go 源码的示例。&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;    既然说到了 gmail 是要 ssl 支持的，那么怎样开发一个支持 ssl 的发送过程呢。其实一点也不难，ssl 不过是 socket 过程的加密版本而已，有兴趣的同学大家可以看我的如下几篇文章：&lt;br/&gt;OpenSSL解惑1：原理 &lt;a href=&quot;https://baijiahao.baidu.com/s?id=1591824116725476286&amp;amp;wfr=spider&amp;amp;for=pc&quot; target=&quot;_blank&quot;&gt;https://baijiahao.baidu.com/s?id=1591824116725476286&amp;amp;wfr=spider&amp;amp;for=pc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;OpenSSL解惑2：如何强制选择协议的版本 &lt;a href=&quot;https://baijiahao.baidu.com/s?id=1591912273348927453&amp;amp;wfr=spider&amp;amp;for=pc&quot; target=&quot;_blank&quot;&gt;https://baijiahao.baidu.com/s?id=1591912273348927453&amp;amp;wfr=spider&amp;amp;for=pc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;OpenSSL解惑3：SSL_read的阻塞超时与它是否等同于recv函 &lt;a href=&quot;https://baijiahao.baidu.com/s?id=1592012048270657934&amp;amp;wfr=spider&amp;amp;for=pc&quot; target=&quot;_blank&quot;&gt;https://baijiahao.baidu.com/s?id=1592012048270657934&amp;amp;wfr=spider&amp;amp;for=pc&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;（我个人觉得第一二篇比较重要，百家号目前的问题比较多，链接代码什么的都不太好处理，大家将就看吧）&lt;/p&gt;&lt;p&gt;    总的来说，增加了 ssl 连接过程后再将 recv 函数变成 SSL_read，send 函数变成 SS_send 就可以了。对 gmail 的支持很多年前我就在 eEmail 中实现过了，不过现在 ssl 升级得比较多，估计也不能用了吧，以后等 gmail 能在国内访问了再修改了。关于协议升级的问题大家也可以看上面的提到的几篇 openssl 文章。如果使用 openssl 开发的话，要支持新的协议是非常简单的，用 golang 的话那就更不用说了。ssl 的示例，因为实在来不及了，所以以后再给出吧。&lt;/p&gt;&lt;p&gt;    另外，虽然我们没有给出 java 的示例，不过有了前面的几篇文章为基础相信大家可以轻松地写出来。&lt;/p&gt;&lt;p&gt;    再另外，我看过网友们对 golang smtp 的改造，说句不客气的，大部分都不太正确，具体原因前面已经说了过。我的做法是直接修改 golang 的源码，幸好 goalng 和以前的 delphi 一样可以方便地在不改动源码的情况下使用修改出来的另一份拷贝。我的方法是复制出来然后改掉 package 就可以了，以下是我修改过的 go1.7.3 的 smtp 源码，可以直接使用的，修改的地方其实很少，已经在 newbt 邮箱和 163 邮箱上使用过。调用的方法如下（其中 loginAuth  来自网络，不过实际上是有误的）：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;61&quot;&gt;
&lt;pre&gt;
type loginAuth &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; {
    username, password &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;
}

func LoginAuth(username, password &lt;/span&gt;&lt;span&gt;string&lt;/span&gt;&lt;span&gt;) smtp.Auth {
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &amp;amp;&lt;span&gt;loginAuth{username, password}
}

func (a &lt;/span&gt;*loginAuth) Start(server *smtp.ServerInfo) (&lt;span&gt;string&lt;/span&gt;, []&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;, error) {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;return &quot;LOGIN&quot;, []byte{}, nil
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;return &quot;LOGIN&quot;, []byte(a.username), nil &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq 原作者说这个就 ok, 其实那只是对 163 邮箱, 大多数邮件服务器还要改 smtp.go 文件本身
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;return &quot;LOGIN\r\n&quot;, []byte(a.username), nil&lt;/span&gt;
    &lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;LOGIN&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, []&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;{}, nil
}

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq 这个步骤会一直被调用直到成功或者错误&lt;/span&gt;
func (a *loginAuth) Next(fromServer []&lt;span&gt;byte&lt;/span&gt;, more &lt;span&gt;bool&lt;/span&gt;) ([]&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;, error) {
    
    fmt.Println(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;smtp server:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;(fromServer));
    
    s_fromServer :&lt;/span&gt;= strings.ToLower(&lt;span&gt;string&lt;/span&gt;&lt;span&gt;(fromServer)); 
    
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; more {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;switch string(fromServer) {&lt;/span&gt;
        &lt;span&gt;switch&lt;/span&gt;&lt;span&gt; s_fromServer {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;case &quot;Username:&quot;:&lt;/span&gt;
        &lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;username:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; []&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(a.username), nil
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;case &quot;Password:&quot;:&lt;/span&gt;
        &lt;span&gt;case&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;password:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; []&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(a.password), nil
        }&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;switch&lt;/span&gt;
    }&lt;span&gt;//&lt;/span&gt;&lt;span&gt;if&lt;/span&gt;
    &lt;span&gt;return&lt;/span&gt;&lt;span&gt; nil, nil
}&lt;/span&gt;&lt;span&gt;//
&lt;/span&gt;&lt;span&gt;
func SendMail_t1() {
    auth :&lt;/span&gt;= LoginAuth(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;test1@newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;123456&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    to :&lt;/span&gt;= []&lt;span&gt;string&lt;/span&gt;{&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;clq@newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;}

    mimes :&lt;/span&gt;= &lt;span&gt;//&lt;/span&gt;&lt;span&gt;这里写上邮件内容&lt;/span&gt;
    err2 := smtp_SendMail_new(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;newbt.net:25&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, auth, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;clq@newbt.net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, to, []&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;(mimes));
    
    fmt.Println(err);
}&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;新的文件名为 smtp_new.go ，内容如下（我其实还是推荐大家自己改前面的代码，那样更好把握，所以这份代码我默认折叠了）：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('4bbf5024-e604-4302-875e-007113a83a05')&quot; readability=&quot;109.5&quot;&gt;&lt;img id=&quot;code_img_closed_4bbf5024-e604-4302-875e-007113a83a05&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_4bbf5024-e604-4302-875e-007113a83a05&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('4bbf5024-e604-4302-875e-007113a83a05',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_4bbf5024-e604-4302-875e-007113a83a05&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;214&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Copyright 2010 The Go Authors. All rights reserved.
&lt;/span&gt;&lt;span&gt;  2&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Use of this source code is governed by a BSD-style
&lt;/span&gt;&lt;span&gt;  3&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; license that can be found in the LICENSE file.
&lt;/span&gt;&lt;span&gt;  4&lt;/span&gt; 
&lt;span&gt;  5&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Package smtp implements the Simple Mail Transfer Protocol as defined in RFC 5321.
&lt;/span&gt;&lt;span&gt;  6&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; It also implements the following extensions:
&lt;/span&gt;&lt;span&gt;  7&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    8BITMIME  RFC 1652
&lt;/span&gt;&lt;span&gt;  8&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    AUTH      RFC 2554
&lt;/span&gt;&lt;span&gt;  9&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;    STARTTLS  RFC 3207
&lt;/span&gt;&lt;span&gt; 10&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Additional extensions may be handled by clients.
&lt;/span&gt;&lt;span&gt; 11&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;
&lt;span&gt; 12&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The smtp package is frozen and not accepting new features.
&lt;/span&gt;&lt;span&gt; 13&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Some external packages provide more functionality. See:
&lt;/span&gt;&lt;span&gt; 14&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;
&lt;span&gt; 15&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;   &lt;span&gt;https://godoc.org/?q=smtp&lt;/span&gt;
&lt;span&gt; 16&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;package smtp&lt;/span&gt;
&lt;span&gt; 17&lt;/span&gt; package main &lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq
&lt;/span&gt;&lt;span&gt; 18&lt;/span&gt; 
&lt;span&gt; 19&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;用于不加密环境的 smtp 发送电子邮件过程,因为不是所有的 smtp 环境都有加密支持的,不加密的适用范围更广一点,而且 smtp 服务器之间没有密码加密的过程
&lt;/span&gt;&lt;span&gt; 20&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;(因为对方 smtp 服务器不可能知道你的密码)所以原有的 golang 1.7.3 net/smtp 过程就不适合 smtp 之间发送邮件
&lt;/span&gt;&lt;span&gt; 21&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;修改自 smtp.go[1.7.3] , 原始文件为 go1.7.3 的 net/smtp
&lt;/span&gt;&lt;span&gt; 22&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;原文件在 code, msg64, err := c.cmd(0, &quot;AUTH %s %s&quot;, mech, resp64) 处有误,因为第一个 AUTH 后面只有一个字符(指不加密的情况下) &lt;/span&gt;
&lt;span&gt; 23&lt;/span&gt; 
&lt;span&gt; 24&lt;/span&gt; &lt;span&gt;import (
&lt;/span&gt;&lt;span&gt; 25&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;crypto/tls&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 26&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;encoding/base64&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 27&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;errors&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 28&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;io&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 29&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;net&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 30&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;net/smtp&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq add&lt;/span&gt;
&lt;span&gt; 31&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;net/textproto&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 32&lt;/span&gt;     &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;strings&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt; 33&lt;/span&gt; &lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 34&lt;/span&gt; 
&lt;span&gt; 35&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; A Client represents a client connection to an SMTP server.&lt;/span&gt;
&lt;span&gt; 36&lt;/span&gt; type Client &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 37&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Text is the textproto.Conn used by the Client. It is exported to allow for
&lt;/span&gt;&lt;span&gt; 38&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; clients to add extensions.&lt;/span&gt;
&lt;span&gt; 39&lt;/span&gt;     Text *&lt;span&gt;textproto.Conn
&lt;/span&gt;&lt;span&gt; 40&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; keep a reference to the connection so it can be used to create a TLS
&lt;/span&gt;&lt;span&gt; 41&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; connection later&lt;/span&gt;
&lt;span&gt; 42&lt;/span&gt; &lt;span&gt;    conn net.Conn
&lt;/span&gt;&lt;span&gt; 43&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; whether the Client is using TLS&lt;/span&gt;
&lt;span&gt; 44&lt;/span&gt;     tls        &lt;span&gt;bool&lt;/span&gt;
&lt;span&gt; 45&lt;/span&gt;     serverName &lt;span&gt;string&lt;/span&gt;
&lt;span&gt; 46&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; map of supported extensions&lt;/span&gt;
&lt;span&gt; 47&lt;/span&gt;     ext map[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;
&lt;span&gt; 48&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; supported auth mechanisms&lt;/span&gt;
&lt;span&gt; 49&lt;/span&gt;     auth       []&lt;span&gt;string&lt;/span&gt;
&lt;span&gt; 50&lt;/span&gt;     localName  &lt;span&gt;string&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; the name to use in HELO/EHLO&lt;/span&gt;
&lt;span&gt; 51&lt;/span&gt;     didHello   &lt;span&gt;bool&lt;/span&gt;   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; whether we've said HELO/EHLO&lt;/span&gt;
&lt;span&gt; 52&lt;/span&gt;     helloError error  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; the error from the hello&lt;/span&gt;
&lt;span&gt; 53&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 54&lt;/span&gt; 
&lt;span&gt; 55&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Dial returns a new Client connected to an SMTP server at addr.
&lt;/span&gt;&lt;span&gt; 56&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The addr must include a port, as in &quot;mail.example.com:smtp&quot;.&lt;/span&gt;
&lt;span&gt; 57&lt;/span&gt; func Dial(addr &lt;span&gt;string&lt;/span&gt;) (*&lt;span&gt;Client, error) {
&lt;/span&gt;&lt;span&gt; 58&lt;/span&gt;     conn, err := net.Dial(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;tcp&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, addr)
&lt;/span&gt;&lt;span&gt; 59&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt; 60&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; nil, err
&lt;/span&gt;&lt;span&gt; 61&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 62&lt;/span&gt;     host, _, _ :=&lt;span&gt; net.SplitHostPort(addr)
&lt;/span&gt;&lt;span&gt; 63&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; NewClient(conn, host)
&lt;/span&gt;&lt;span&gt; 64&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 65&lt;/span&gt; 
&lt;span&gt; 66&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; NewClient returns a new Client using an existing connection and host as a
&lt;/span&gt;&lt;span&gt; 67&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; server name to be used when authenticating.&lt;/span&gt;
&lt;span&gt; 68&lt;/span&gt; func NewClient(conn net.Conn, host &lt;span&gt;string&lt;/span&gt;) (*&lt;span&gt;Client, error) {
&lt;/span&gt;&lt;span&gt; 69&lt;/span&gt;     text :=&lt;span&gt; textproto.NewConn(conn)
&lt;/span&gt;&lt;span&gt; 70&lt;/span&gt;     _, _, err := text.ReadResponse(&lt;span&gt;220&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 71&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt; 72&lt;/span&gt; &lt;span&gt;        text.Close()
&lt;/span&gt;&lt;span&gt; 73&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; nil, err
&lt;/span&gt;&lt;span&gt; 74&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 75&lt;/span&gt;     c := &amp;amp;Client{Text: text, conn: conn, serverName: host, localName: &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;localhost&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 76&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c, nil
&lt;/span&gt;&lt;span&gt; 77&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 78&lt;/span&gt; 
&lt;span&gt; 79&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Close closes the connection.&lt;/span&gt;
&lt;span&gt; 80&lt;/span&gt; func (c *&lt;span&gt;Client) Close() error {
&lt;/span&gt;&lt;span&gt; 81&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c.Text.Close()
&lt;/span&gt;&lt;span&gt; 82&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 83&lt;/span&gt; 
&lt;span&gt; 84&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; hello runs a hello exchange if needed.&lt;/span&gt;
&lt;span&gt; 85&lt;/span&gt; func (c *&lt;span&gt;Client) hello() error {
&lt;/span&gt;&lt;span&gt; 86&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; !&lt;span&gt;c.didHello {
&lt;/span&gt;&lt;span&gt; 87&lt;/span&gt;         c.didHello = &lt;span&gt;true&lt;/span&gt;
&lt;span&gt; 88&lt;/span&gt;         err :=&lt;span&gt; c.ehlo()
&lt;/span&gt;&lt;span&gt; 89&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt; 90&lt;/span&gt;             c.helloError =&lt;span&gt; c.helo()
&lt;/span&gt;&lt;span&gt; 91&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt; 92&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 93&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c.helloError
&lt;/span&gt;&lt;span&gt; 94&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt; 95&lt;/span&gt; 
&lt;span&gt; 96&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Hello sends a HELO or EHLO to the server as the given host name.
&lt;/span&gt;&lt;span&gt; 97&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Calling this method is only necessary if the client needs control
&lt;/span&gt;&lt;span&gt; 98&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; over the host name used. The client will introduce itself as &quot;localhost&quot;
&lt;/span&gt;&lt;span&gt; 99&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; automatically otherwise. If Hello is called, it must be called before
&lt;/span&gt;&lt;span&gt;100&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; any of the other methods.&lt;/span&gt;
&lt;span&gt;101&lt;/span&gt; func (c *Client) Hello(localName &lt;span&gt;string&lt;/span&gt;&lt;span&gt;) error {
&lt;/span&gt;&lt;span&gt;102&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt;&lt;span&gt; c.didHello {
&lt;/span&gt;&lt;span&gt;103&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; errors.New(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;smtp: Hello called after other methods&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;104&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;105&lt;/span&gt;     c.localName =&lt;span&gt; localName
&lt;/span&gt;&lt;span&gt;106&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c.hello()
&lt;/span&gt;&lt;span&gt;107&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;108&lt;/span&gt; 
&lt;span&gt;109&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; cmd is a convenience function that sends a command and returns the response&lt;/span&gt;
&lt;span&gt;110&lt;/span&gt; func (c *Client) cmd(expectCode &lt;span&gt;int&lt;/span&gt;, format &lt;span&gt;string&lt;/span&gt;, args ...&lt;span&gt;interface&lt;/span&gt;{}) (&lt;span&gt;int&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;, error) {
&lt;/span&gt;&lt;span&gt;111&lt;/span&gt;     id, err :=&lt;span&gt; c.Text.Cmd(format, args...)
&lt;/span&gt;&lt;span&gt;112&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;113&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;, err
&lt;/span&gt;&lt;span&gt;114&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;115&lt;/span&gt; &lt;span&gt;    c.Text.StartResponse(id)
&lt;/span&gt;&lt;span&gt;116&lt;/span&gt; &lt;span&gt;    defer c.Text.EndResponse(id)
&lt;/span&gt;&lt;span&gt;117&lt;/span&gt;     code, msg, err :=&lt;span&gt; c.Text.ReadResponse(expectCode)
&lt;/span&gt;&lt;span&gt;118&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; code, msg, err
&lt;/span&gt;&lt;span&gt;119&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;120&lt;/span&gt; 
&lt;span&gt;121&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; helo sends the HELO greeting to the server. It should be used only when the
&lt;/span&gt;&lt;span&gt;122&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; server does not support ehlo.&lt;/span&gt;
&lt;span&gt;123&lt;/span&gt; func (c *&lt;span&gt;Client) helo() error {
&lt;/span&gt;&lt;span&gt;124&lt;/span&gt;     c.ext =&lt;span&gt; nil
&lt;/span&gt;&lt;span&gt;125&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;250&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;HELO %s&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, c.localName)
&lt;/span&gt;&lt;span&gt;126&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;127&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;128&lt;/span&gt; 
&lt;span&gt;129&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; ehlo sends the EHLO (extended hello) greeting to the server. It
&lt;/span&gt;&lt;span&gt;130&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; should be the preferred greeting for servers that support it.&lt;/span&gt;
&lt;span&gt;131&lt;/span&gt; func (c *&lt;span&gt;Client) ehlo() error {
&lt;/span&gt;&lt;span&gt;132&lt;/span&gt;     _, msg, err := c.cmd(&lt;span&gt;250&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;EHLO %s&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, c.localName)
&lt;/span&gt;&lt;span&gt;133&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;134&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;135&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;136&lt;/span&gt;     ext := make(map[&lt;span&gt;string&lt;/span&gt;]&lt;span&gt;string&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;137&lt;/span&gt;     extList := strings.Split(msg, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;138&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; len(extList) &amp;gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;139&lt;/span&gt;         extList = extList[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;:]
&lt;/span&gt;&lt;span&gt;140&lt;/span&gt;         &lt;span&gt;for&lt;/span&gt; _, line :=&lt;span&gt; range extList {
&lt;/span&gt;&lt;span&gt;141&lt;/span&gt;             args := strings.SplitN(line, &lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;2&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;142&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; len(args) &amp;gt; &lt;span&gt;1&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;143&lt;/span&gt;                 ext[args[&lt;span&gt;0&lt;/span&gt;]] = args[&lt;span&gt;1&lt;/span&gt;&lt;span&gt;]
&lt;/span&gt;&lt;span&gt;144&lt;/span&gt;             } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;145&lt;/span&gt;                 ext[args[&lt;span&gt;0&lt;/span&gt;]] = &lt;span&gt;&quot;&quot;&lt;/span&gt;
&lt;span&gt;146&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;147&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;148&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;149&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; mechs, ok := ext[&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;AUTH&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]; ok {
&lt;/span&gt;&lt;span&gt;150&lt;/span&gt;         c.auth = strings.Split(mechs, &lt;span&gt;&quot;&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;151&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;152&lt;/span&gt;     c.ext =&lt;span&gt; ext
&lt;/span&gt;&lt;span&gt;153&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;154&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;155&lt;/span&gt; 
&lt;span&gt;156&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; StartTLS sends the STARTTLS command and encrypts all further communication.
&lt;/span&gt;&lt;span&gt;157&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Only servers that advertise the STARTTLS extension support this function.&lt;/span&gt;
&lt;span&gt;158&lt;/span&gt; func (c *Client) StartTLS(config *&lt;span&gt;tls.Config) error {
&lt;/span&gt;&lt;span&gt;159&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err := c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;160&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;161&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;162&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;220&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;STARTTLS&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;163&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;164&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;165&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;166&lt;/span&gt;     c.conn =&lt;span&gt; tls.Client(c.conn, config)
&lt;/span&gt;&lt;span&gt;167&lt;/span&gt;     c.Text =&lt;span&gt; textproto.NewConn(c.conn)
&lt;/span&gt;&lt;span&gt;168&lt;/span&gt;     c.tls = &lt;span&gt;true&lt;/span&gt;
&lt;span&gt;169&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c.ehlo()
&lt;/span&gt;&lt;span&gt;170&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;171&lt;/span&gt; 
&lt;span&gt;172&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; TLSConnectionState returns the client's TLS connection state.
&lt;/span&gt;&lt;span&gt;173&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The return values are their zero values if StartTLS did
&lt;/span&gt;&lt;span&gt;174&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; not succeed.&lt;/span&gt;
&lt;span&gt;175&lt;/span&gt; func (c *Client) TLSConnectionState() (state tls.ConnectionState, ok &lt;span&gt;bool&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;176&lt;/span&gt;     tc, ok := c.conn.(*&lt;span&gt;tls.Conn)
&lt;/span&gt;&lt;span&gt;177&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; !&lt;span&gt;ok {
&lt;/span&gt;&lt;span&gt;178&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;
&lt;span&gt;179&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;180&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; tc.ConnectionState(), &lt;span&gt;true&lt;/span&gt;
&lt;span&gt;181&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;182&lt;/span&gt; 
&lt;span&gt;183&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Verify checks the validity of an email address on the server.
&lt;/span&gt;&lt;span&gt;184&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; If Verify returns nil, the address is valid. A non-nil return
&lt;/span&gt;&lt;span&gt;185&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; does not necessarily indicate an invalid address. Many servers
&lt;/span&gt;&lt;span&gt;186&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; will not verify addresses for security reasons.&lt;/span&gt;
&lt;span&gt;187&lt;/span&gt; func (c *Client) Verify(addr &lt;span&gt;string&lt;/span&gt;&lt;span&gt;) error {
&lt;/span&gt;&lt;span&gt;188&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err := c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;189&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;190&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;191&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;250&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;VRFY %s&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, addr)
&lt;/span&gt;&lt;span&gt;192&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;193&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;194&lt;/span&gt; 
&lt;span&gt;195&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Auth authenticates a client using the provided authentication mechanism.
&lt;/span&gt;&lt;span&gt;196&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; A failed authentication closes the connection.
&lt;/span&gt;&lt;span&gt;197&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Only servers that advertise the AUTH extension support this function.&lt;/span&gt;
&lt;span&gt;198&lt;/span&gt; func (c *&lt;span&gt;Client) Auth(a smtp.Auth) error {
&lt;/span&gt;&lt;span&gt;199&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err := c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;201&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;202&lt;/span&gt;     encoding :=&lt;span&gt; base64.StdEncoding
&lt;/span&gt;&lt;span&gt;203&lt;/span&gt;     mech, resp, err := a.Start(&amp;amp;&lt;span&gt;smtp.ServerInfo{c.serverName, c.tls, c.auth})
&lt;/span&gt;&lt;span&gt;204&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;205&lt;/span&gt; &lt;span&gt;        c.Quit()
&lt;/span&gt;&lt;span&gt;206&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;207&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;208&lt;/span&gt;     resp64 := make([]&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;, encoding.EncodedLen(len(resp)))
&lt;/span&gt;&lt;span&gt;209&lt;/span&gt; &lt;span&gt;    encoding.Encode(resp64, resp)
&lt;/span&gt;&lt;span&gt;210&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;code, msg64, err := c.cmd(0, &quot;AUTH %s %s&quot;, mech, resp64); &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq 这里有误,标准就应该是先 'AUTH LOGIN' 后面并没有其他内容&lt;/span&gt;
&lt;span&gt;211&lt;/span&gt;     code, msg64, err := c.cmd(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;AUTH %s&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, mech); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq 这里有误,标准就应该是先 'AUTH LOGIN' 后面并没有其他内容&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;对于不加密的来说&lt;/span&gt;
&lt;span&gt;212&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; err ==&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;213&lt;/span&gt;         &lt;span&gt;var&lt;/span&gt; msg []&lt;span&gt;byte&lt;/span&gt;
&lt;span&gt;214&lt;/span&gt;         &lt;span&gt;switch&lt;/span&gt;&lt;span&gt; code {
&lt;/span&gt;&lt;span&gt;215&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt; &lt;span&gt;334&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;216&lt;/span&gt;             msg, err =&lt;span&gt; encoding.DecodeString(msg64)
&lt;/span&gt;&lt;span&gt;217&lt;/span&gt;         &lt;span&gt;case&lt;/span&gt; &lt;span&gt;235&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;218&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; the last message isn't base64 because it isn't a challenge&lt;/span&gt;
&lt;span&gt;219&lt;/span&gt;             msg = []&lt;span&gt;byte&lt;/span&gt;(msg64); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq 对于不加密的来说这里一般就是返回登录成功了&lt;/span&gt;
&lt;span&gt;220&lt;/span&gt;         &lt;span&gt;default&lt;/span&gt;&lt;span&gt;:
&lt;/span&gt;&lt;span&gt;221&lt;/span&gt;             err = &amp;amp;&lt;span&gt;textproto.Error{Code: code, Msg: msg64}
&lt;/span&gt;&lt;span&gt;222&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;223&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; err ==&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;224&lt;/span&gt;             resp, err = a.Next(msg, code == &lt;span&gt;334&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;225&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;226&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;227&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; abort the AUTH&lt;/span&gt;
&lt;span&gt;228&lt;/span&gt;             c.cmd(&lt;span&gt;501&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;*&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;229&lt;/span&gt; &lt;span&gt;            c.Quit()
&lt;/span&gt;&lt;span&gt;230&lt;/span&gt;             &lt;span&gt;break&lt;/span&gt;
&lt;span&gt;231&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;232&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; resp ==&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;233&lt;/span&gt;             &lt;span&gt;break&lt;/span&gt;
&lt;span&gt;234&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;235&lt;/span&gt;         resp64 = make([]&lt;span&gt;byte&lt;/span&gt;&lt;span&gt;, encoding.EncodedLen(len(resp)))
&lt;/span&gt;&lt;span&gt;236&lt;/span&gt; &lt;span&gt;        encoding.Encode(resp64, resp)
&lt;/span&gt;&lt;span&gt;237&lt;/span&gt;         code, msg64, err = c.cmd(&lt;span&gt;0&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;(resp64))
&lt;/span&gt;&lt;span&gt;238&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;239&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;240&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;241&lt;/span&gt; 
&lt;span&gt;242&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Mail issues a MAIL command to the server using the provided email address.
&lt;/span&gt;&lt;span&gt;243&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; If the server supports the 8BITMIME extension, Mail adds the BODY=8BITMIME
&lt;/span&gt;&lt;span&gt;244&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; parameter.
&lt;/span&gt;&lt;span&gt;245&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; This initiates a mail transaction and is followed by one or more Rcpt calls.&lt;/span&gt;
&lt;span&gt;246&lt;/span&gt; func (c *Client) Mail(&lt;span&gt;from&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;&lt;span&gt;) error {
&lt;/span&gt;&lt;span&gt;247&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err := c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;248&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;249&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;250&lt;/span&gt;     cmdStr := &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;MAIL FROM:&amp;lt;%s&amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;251&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; c.ext !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;252&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; _, ok := c.ext[&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;8BITMIME&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]; ok {
&lt;/span&gt;&lt;span&gt;253&lt;/span&gt;             cmdStr += &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; BODY=8BITMIME&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
&lt;span&gt;254&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;255&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;256&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;250&lt;/span&gt;, cmdStr, &lt;span&gt;from&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;257&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;258&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;259&lt;/span&gt; 
&lt;span&gt;260&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Rcpt issues a RCPT command to the server using the provided email address.
&lt;/span&gt;&lt;span&gt;261&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; A call to Rcpt must be preceded by a call to Mail and may be followed by
&lt;/span&gt;&lt;span&gt;262&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; a Data call or another Rcpt call.&lt;/span&gt;
&lt;span&gt;263&lt;/span&gt; func (c *Client) Rcpt(to &lt;span&gt;string&lt;/span&gt;&lt;span&gt;) error {
&lt;/span&gt;&lt;span&gt;264&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;25&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RCPT TO:&amp;lt;%s&amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, to)
&lt;/span&gt;&lt;span&gt;265&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;266&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;267&lt;/span&gt; 
&lt;span&gt;268&lt;/span&gt; type dataCloser &lt;span&gt;struct&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;269&lt;/span&gt;     c *&lt;span&gt;Client
&lt;/span&gt;&lt;span&gt;270&lt;/span&gt; &lt;span&gt;    io.WriteCloser
&lt;/span&gt;&lt;span&gt;271&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;272&lt;/span&gt; 
&lt;span&gt;273&lt;/span&gt; func (d *&lt;span&gt;dataCloser) Close() error {
&lt;/span&gt;&lt;span&gt;274&lt;/span&gt; &lt;span&gt;    d.WriteCloser.Close()
&lt;/span&gt;&lt;span&gt;275&lt;/span&gt;     _, _, err := d.c.Text.ReadResponse(&lt;span&gt;250&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;276&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;277&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;278&lt;/span&gt; 
&lt;span&gt;279&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Data issues a DATA command to the server and returns a writer that
&lt;/span&gt;&lt;span&gt;280&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; can be used to write the mail headers and body. The caller should
&lt;/span&gt;&lt;span&gt;281&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; close the writer before calling any more methods on c. A call to
&lt;/span&gt;&lt;span&gt;282&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Data must be preceded by one or more calls to Rcpt.&lt;/span&gt;
&lt;span&gt;283&lt;/span&gt; func (c *&lt;span&gt;Client) Data() (io.WriteCloser, error) {
&lt;/span&gt;&lt;span&gt;284&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;354&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;DATA&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;285&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;286&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; nil, err
&lt;/span&gt;&lt;span&gt;287&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;288&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &amp;amp;&lt;span&gt;dataCloser{c, c.Text.DotWriter()}, nil
&lt;/span&gt;&lt;span&gt;289&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;290&lt;/span&gt; 
&lt;span&gt;291&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; testHookStartTLS func(*tls.Config) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; nil, except for tests
&lt;/span&gt;&lt;span&gt;292&lt;/span&gt; 
&lt;span&gt;293&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; SendMail connects to the server at addr, switches to TLS if
&lt;/span&gt;&lt;span&gt;294&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; possible, authenticates with the optional mechanism a if possible,
&lt;/span&gt;&lt;span&gt;295&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; and then sends an email from address from, to addresses to, with
&lt;/span&gt;&lt;span&gt;296&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; message msg.
&lt;/span&gt;&lt;span&gt;297&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The addr must include a port, as in &quot;mail.example.com:smtp&quot;.
&lt;/span&gt;&lt;span&gt;298&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;
&lt;span&gt;299&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The addresses in the to parameter are the SMTP RCPT addresses.
&lt;/span&gt;&lt;span&gt;300&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;
&lt;span&gt;301&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The msg parameter should be an RFC 822-style email with headers
&lt;/span&gt;&lt;span&gt;302&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; first, a blank line, and then the message body. The lines of msg
&lt;/span&gt;&lt;span&gt;303&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; should be CRLF terminated. The msg headers should usually include
&lt;/span&gt;&lt;span&gt;304&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; fields such as &quot;From&quot;, &quot;To&quot;, &quot;Subject&quot;, and &quot;Cc&quot;.  Sending &quot;Bcc&quot;
&lt;/span&gt;&lt;span&gt;305&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; messages is accomplished by including an email address in the to
&lt;/span&gt;&lt;span&gt;306&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; parameter but not including it in the msg headers.
&lt;/span&gt;&lt;span&gt;307&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;
&lt;span&gt;308&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The SendMail function and the the net/smtp package are low-level
&lt;/span&gt;&lt;span&gt;309&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; mechanisms and provide no support for DKIM signing, MIME
&lt;/span&gt;&lt;span&gt;310&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; attachments (see the mime/multipart package), or other mail
&lt;/span&gt;&lt;span&gt;311&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; functionality. Higher-level packages exist outside of the standard
&lt;/span&gt;&lt;span&gt;312&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; library.
&lt;/span&gt;&lt;span&gt;313&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;func SendMail(addr string, a smtp.Auth, from string, to []string, msg []byte) error {&lt;/span&gt;
&lt;span&gt;314&lt;/span&gt; func smtp_SendMail_new(addr &lt;span&gt;string&lt;/span&gt;, a smtp.Auth, &lt;span&gt;from&lt;/span&gt; &lt;span&gt;string&lt;/span&gt;, to []&lt;span&gt;string&lt;/span&gt;, msg []&lt;span&gt;byte&lt;/span&gt;) error { &lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq  这段注释是说, msg 包含了 mime 的所有内容&lt;/span&gt;
&lt;span&gt;315&lt;/span&gt;     c, err :=&lt;span&gt; Dial(addr)
&lt;/span&gt;&lt;span&gt;316&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;317&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;318&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;319&lt;/span&gt; &lt;span&gt;    defer c.Close()
&lt;/span&gt;&lt;span&gt;320&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err = c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;321&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;322&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;323&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; ok, _ := c.Extension(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;STARTTLS&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;); ok {
&lt;/span&gt;&lt;span&gt;324&lt;/span&gt;         config := &amp;amp;&lt;span&gt;tls.Config{ServerName: c.serverName}
&lt;/span&gt;&lt;span&gt;325&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; testHookStartTLS !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;326&lt;/span&gt; &lt;span&gt;            testHookStartTLS(config)
&lt;/span&gt;&lt;span&gt;327&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;328&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; err = c.StartTLS(config); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;329&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;330&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;331&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;332&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; a != nil &amp;amp;&amp;amp; c.ext !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;333&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; _, ok := c.ext[&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;AUTH&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;]; ok {
&lt;/span&gt;&lt;span&gt;334&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; err = c.Auth(a); err != nil { &lt;span&gt;//&lt;/span&gt;&lt;span&gt;clq c.Auth(a) 这个也有交互过程&lt;/span&gt;
&lt;span&gt;335&lt;/span&gt;                 &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;336&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;337&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;338&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;339&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err = c.Mail(&lt;span&gt;from&lt;/span&gt;); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;340&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;341&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;342&lt;/span&gt;     &lt;span&gt;for&lt;/span&gt; _, addr :=&lt;span&gt; range to {
&lt;/span&gt;&lt;span&gt;343&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt; err = c.Rcpt(addr); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;344&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;345&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;346&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;347&lt;/span&gt;     w, err :=&lt;span&gt; c.Data()
&lt;/span&gt;&lt;span&gt;348&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;349&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;350&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;351&lt;/span&gt;     _, err =&lt;span&gt; w.Write(msg)
&lt;/span&gt;&lt;span&gt;352&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;353&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;354&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;355&lt;/span&gt;     err =&lt;span&gt; w.Close()
&lt;/span&gt;&lt;span&gt;356&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;357&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;358&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;359&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c.Quit()
&lt;/span&gt;&lt;span&gt;360&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;361&lt;/span&gt; 
&lt;span&gt;362&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Extension reports whether an extension is support by the server.
&lt;/span&gt;&lt;span&gt;363&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; The extension name is case-insensitive. If the extension is supported,
&lt;/span&gt;&lt;span&gt;364&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Extension also returns a string that contains any parameters the
&lt;/span&gt;&lt;span&gt;365&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; server specifies for the extension.&lt;/span&gt;
&lt;span&gt;366&lt;/span&gt; func (c *Client) Extension(ext &lt;span&gt;string&lt;/span&gt;) (&lt;span&gt;bool&lt;/span&gt;, &lt;span&gt;string&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;367&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err := c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;368&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;
&lt;span&gt;369&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;370&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; c.ext ==&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;371&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;
&lt;span&gt;372&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;373&lt;/span&gt;     ext =&lt;span&gt; strings.ToUpper(ext)
&lt;/span&gt;&lt;span&gt;374&lt;/span&gt;     param, ok :=&lt;span&gt; c.ext[ext]
&lt;/span&gt;&lt;span&gt;375&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ok, param
&lt;/span&gt;&lt;span&gt;376&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;377&lt;/span&gt; 
&lt;span&gt;378&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Reset sends the RSET command to the server, aborting the current mail
&lt;/span&gt;&lt;span&gt;379&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; transaction.&lt;/span&gt;
&lt;span&gt;380&lt;/span&gt; func (c *&lt;span&gt;Client) Reset() error {
&lt;/span&gt;&lt;span&gt;381&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err := c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;382&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;383&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;384&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;250&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RSET&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;385&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;386&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;387&lt;/span&gt; 
&lt;span&gt;388&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Quit sends the QUIT command and closes the connection to the server.&lt;/span&gt;
&lt;span&gt;389&lt;/span&gt; func (c *&lt;span&gt;Client) Quit() error {
&lt;/span&gt;&lt;span&gt;390&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err := c.hello(); err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;391&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;392&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;393&lt;/span&gt;     _, _, err := c.cmd(&lt;span&gt;221&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;QUIT&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;394&lt;/span&gt;     &lt;span&gt;if&lt;/span&gt; err !=&lt;span&gt; nil {
&lt;/span&gt;&lt;span&gt;395&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; err
&lt;/span&gt;&lt;span&gt;396&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;397&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; c.Text.Close()
&lt;/span&gt;&lt;span&gt;398&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;    可以看到 golang 的代码是写得真简洁，所以也比较好改。&lt;/p&gt;

&lt;p&gt;    一定有网友觉得我发送部分说得太多太久了，好吧，那我们下一篇插播一下 pop3 接收，到时候大家就会明白，其实还有好多内容没讲。&lt;/p&gt;

&lt;p&gt;完整代码大家可以到以下 github 地址下载或查看:    &lt;br/&gt;&lt;a href=&quot;https://github.com/clqsrc/c_lib_lstring/tree/master/email_book/book_11&quot; target=&quot;_blank&quot;&gt;https://github.com/clqsrc/c_lib_lstring/tree/master/email_book/book_11&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;--------------------------------------------------&lt;/p&gt;
&lt;p&gt;版权声明:&lt;/p&gt;
&lt;p&gt;本系列文章已授权百家号 &quot;clq的程序员学前班&quot; .&lt;/p&gt;

&lt;/div&gt;



&lt;/div&gt;

&lt;/div&gt;
&lt;/div&gt;



&lt;/td&gt;
</description>
<pubDate>Tue, 13 Feb 2018 05:25:00 +0000</pubDate>
<dc:creator>clq</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/-clq/p/8446372.html</dc:identifier>
</item>
<item>
<title>3.C++内联函数,默认参数,占位参数 - LifeYx</title>
<link>http://www.cnblogs.com/lifexy/p/8446462.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lifexy/p/8446462.html</guid>
<description>&lt;p&gt;&lt;span&gt;本章主要内容:&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;1)&lt;/strong&gt;&lt;/span&gt;内联函数&lt;span&gt;(替代宏代码段)&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;2)&lt;/strong&gt;&lt;/span&gt;默认参数&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;3)&lt;/strong&gt;&lt;/span&gt;占位参数&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.C++&lt;span&gt;的&lt;/span&gt;&lt;/strong&gt;&lt;strong&gt;内联函数分析&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.1&lt;/strong&gt;&lt;strong&gt;讲解内联函数之前&lt;/strong&gt;&lt;strong&gt;,&lt;span&gt;首先回忆下之前讲的&lt;/span&gt;&lt;span&gt;define&lt;/span&gt;&lt;span&gt;宏定义&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;之前讲过宏定义会经过预处理器进行文本替换&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;缺点就在于没有类型检查&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;没有任何编译过程&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;编译器根本不知道类型是什么&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;所以&lt;/span&gt;,C++&lt;span&gt;中&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;当需要某个类型的常量时&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;可以使用&lt;/span&gt;&lt;span&gt;const&lt;/span&gt;&lt;span&gt;&lt;span&gt;常量&lt;/span&gt;来替代宏常数&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;如&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;const&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; A=&lt;span&gt;3&lt;/span&gt;;      &amp;lt;---&amp;gt;      &lt;span&gt;#define&lt;/span&gt; A 3
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.2&lt;span&gt;那如果&lt;/span&gt;&lt;span&gt;#define&lt;/span&gt; &lt;span&gt;定义的是宏代码段&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;例子如下&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
#include &amp;lt;stdio.h&amp;gt;
&lt;span&gt;#define&lt;/span&gt;  MAX(A,B)       (A&amp;gt;B?A:B)
&lt;span&gt;int&lt;/span&gt;&lt;span&gt; main()
{
&lt;/span&gt;&lt;span&gt;int&lt;/span&gt; a=&lt;span&gt;5&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;int&lt;/span&gt; b=&lt;span&gt;4&lt;/span&gt;&lt;span&gt;;
printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,MAX(++&lt;span&gt;a,b)); 
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;输出结果&lt;/span&gt;:&lt;/p&gt;

&lt;p&gt;&lt;span&gt;这就是宏定义的缺点&lt;/span&gt;,&lt;span&gt;因为上面的&lt;/span&gt;&lt;span&gt;printf()&lt;/span&gt;&lt;span&gt;会被预处理器展开为&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
printf(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%d&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, ((++a) &amp;gt; b ? (++a) : b ) );
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;从而&lt;/span&gt;a&lt;span&gt;被加了&lt;span&gt;两次&lt;/span&gt;&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;所以输出结果为&lt;/span&gt;&lt;span&gt;7.&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;1.3&lt;span&gt;所以&lt;/span&gt;&lt;span&gt;C++&lt;/span&gt;&lt;span&gt;便添加了内联函数来代替宏代码段&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;内联函数用&lt;/span&gt;&lt;strong&gt;&lt;span&gt;inline&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;关键字&lt;/span&gt;&lt;/strong&gt;声明&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;比如上面的&lt;/span&gt;&lt;span&gt;MAX(A,B)&lt;/span&gt;&lt;span&gt;宏&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;则可以替换为&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
inline &lt;span&gt;int&lt;/span&gt; MAX(&lt;span&gt;int&lt;/span&gt; a, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; b)
{
&lt;/span&gt;&lt;span&gt;return&lt;/span&gt; a &amp;gt; b ?&lt;span&gt; a : b ;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;而内联函数和普通函数两者区别&lt;/span&gt;:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;普通函数:&lt;/span&gt;&lt;/strong&gt;每次调用前&lt;/span&gt;,CPU&lt;span&gt;都会保存现场&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;入栈&lt;/span&gt;&lt;span&gt;),&lt;/span&gt;&lt;span&gt;调用完后还要恢复现场&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;出栈&lt;/span&gt;&lt;span&gt;)&lt;/span&gt;&lt;span&gt;等额外开销&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;span&gt;内联函数:&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;就会在每次调用的地方&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;将内联函数里的代码段&lt;/span&gt;&lt;span&gt;”内联地”&lt;/span&gt;&lt;span&gt;展开&lt;/span&gt;,&lt;span&gt;所以省去了额外的开销&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;注意&lt;/span&gt;:&lt;/strong&gt;&lt;span&gt;当内联函数里的代码过多&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;且流程复杂时&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;编译器可能会拒绝该函数的内联请求&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;从而变成普通函数&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.函数的参数默认值&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;C++&lt;span&gt;中允许为函数提供参数默认值&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;主要有两种定义方式&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;&lt;span&gt;1)&lt;/span&gt;&lt;span&gt;函数声明时&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;int&lt;/span&gt; show(&lt;span&gt;int&lt;/span&gt; x=&lt;span&gt;10&lt;/span&gt;); &lt;span&gt;//&lt;/span&gt;&lt;span&gt;声明show函数,并定义参数x默认值为10&lt;br/&gt;&lt;/span&gt;
&lt;span&gt;int&lt;/span&gt;&lt;span&gt; main()
{
 show();
}

&lt;/span&gt;&lt;span&gt;int&lt;/span&gt; show(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; x)
{
 printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;x=%d\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,x);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;输出结果&lt;/span&gt;:&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2)没有函数声明时&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt; int&lt;/span&gt; show(&lt;span&gt;int&lt;/span&gt; x=&lt;span&gt;10&lt;/span&gt;)     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;定义参数x默认值为10&lt;/span&gt;&lt;span&gt;
{
  printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;x=%d\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,x);
}

&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; main()
{
  show();
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;输出结果&lt;/span&gt;:&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;2.1当有多个默认参数时&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;1)定义时,参数的默认值必须从右向左定义,&lt;span&gt;例如&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt;int&lt;/span&gt; show(&lt;span&gt;int&lt;/span&gt; x, &lt;span&gt;int&lt;/span&gt; y,&lt;span&gt;int&lt;/span&gt; z=&lt;span&gt;10&lt;/span&gt;);        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;定义正确&lt;/span&gt;

&lt;span&gt;int&lt;/span&gt; show(&lt;span&gt;int&lt;/span&gt; x, &lt;span&gt;int&lt;/span&gt; y=&lt;span&gt;8&lt;/span&gt;,&lt;span&gt;int&lt;/span&gt; z=&lt;span&gt;10&lt;/span&gt;);      &lt;span&gt;//&lt;/span&gt;&lt;span&gt;定义正确

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;int show(int x=6, int y=8,int z);     &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;定义错误,没有从右开始定义

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;int show(int x, int y=8,int z);       &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;定义错误,没有从右开始定义&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2)调用函数时&lt;/span&gt;,&lt;span&gt;参数则从左向右匹配&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;例如&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
#include &amp;lt;stdio.h&amp;gt;
&lt;span&gt;int&lt;/span&gt; show(&lt;span&gt;int&lt;/span&gt; x, &lt;span&gt;int&lt;/span&gt; y=&lt;span&gt;8&lt;/span&gt;,&lt;span&gt;int&lt;/span&gt; z=&lt;span&gt;10&lt;/span&gt;&lt;span&gt;);  

&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; main()
{
  show(&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;);              &lt;span&gt;//&lt;/span&gt;&lt;span&gt;x=6,y=8,z=10;&lt;/span&gt;&lt;span&gt;
  show(&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;,&lt;span&gt;7&lt;/span&gt;);            &lt;span&gt;//&lt;/span&gt;&lt;span&gt;x=6,y=7,z=10;&lt;/span&gt;&lt;span&gt;
  show(&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;,&lt;span&gt;7&lt;/span&gt;,&lt;span&gt;8&lt;/span&gt;);          &lt;span&gt;//&lt;/span&gt;&lt;span&gt;x=6,y=7,z=8;&lt;/span&gt;
&lt;span&gt;  return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
}

&lt;/span&gt;&lt;span&gt;int&lt;/span&gt; show(&lt;span&gt;int&lt;/span&gt; x,&lt;span&gt;int&lt;/span&gt; y,&lt;span&gt;int&lt;/span&gt;&lt;span&gt; z)
{
printf(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;x=%d  y=%d  z=%d\n&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,x,y,z);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;输出结果&lt;/span&gt;:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
x=&lt;span&gt;6&lt;/span&gt;  y=&lt;span&gt;8&lt;/span&gt;  z=&lt;span&gt;10&lt;/span&gt;&lt;span&gt;

x&lt;/span&gt;=&lt;span&gt;6&lt;/span&gt;  y=&lt;span&gt;7&lt;/span&gt;  z=&lt;span&gt;10&lt;/span&gt;&lt;span&gt;

x&lt;/span&gt;=&lt;span&gt;6&lt;/span&gt;  y=&lt;span&gt;7&lt;/span&gt;  z=&lt;span&gt;8&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;3.C++&lt;/strong&gt;&lt;strong&gt;函数的占位参数&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;占位参数&lt;/span&gt;,&lt;span&gt;是指该函数的参数只有类型声明&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;却没有参数名&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;注意:&lt;/strong&gt;该占位参数在函数体内是无法被使用的&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;实例&lt;/span&gt;1:&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;int&lt;/span&gt; func(&lt;span&gt;int&lt;/span&gt; x,&lt;span&gt;int&lt;/span&gt;&lt;span&gt; );

... ...

func(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;);   &lt;span&gt;//&lt;/span&gt;&lt;span&gt;调用func函数&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;实例&lt;/span&gt;2&lt;span&gt;，使用占位参数&lt;/span&gt;&lt;span&gt;+&lt;/span&gt;&lt;span&gt;默认参数一起使用&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;int&lt;/span&gt; func(&lt;span&gt;int&lt;/span&gt; =&lt;span&gt;0&lt;/span&gt;,&lt;span&gt;int&lt;/span&gt; =&lt;span&gt;0&lt;/span&gt;&lt;span&gt;);

... ...

&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt; main()
{
&lt;/span&gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;调用func函数&lt;/span&gt;&lt;span&gt;*/&lt;/span&gt;&lt;span&gt;
  func();
  func(&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
  func(&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;,&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);  
&lt;/span&gt;&lt;span&gt;  return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;从实例&lt;/span&gt;2&lt;span&gt;可以看到&lt;/span&gt;&lt;span&gt;,&lt;/span&gt;&lt;span&gt;其实&lt;span&gt;占位参数和默认参数&lt;/span&gt;主要目的是为了兼容代码&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt; 未完待续,下章接着来学习C++函数重载~&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 13 Feb 2018 05:03:00 +0000</pubDate>
<dc:creator>LifeYx</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lifexy/p/8446462.html</dc:identifier>
</item>
<item>
<title>在.NetCore中使用Myrmec检测文件真实格式 - RocketRobin</title>
<link>http://www.cnblogs.com/rocketRobin/p/8446273.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/rocketRobin/p/8446273.html</guid>
<description>&lt;h2&gt;Myrmec 是什么？&lt;/h2&gt;
&lt;p&gt;Myrmec 是一个用于检测文件格式的库，Myrmec不同于其它库或者手写检测代码，Myrmec不依赖文件扩展名（在实际使用中，你的用户很可能使用虚假的扩展名欺骗你的应用程序），Myrmec会检测文件的二进制头，并在其元数据库中匹配来获得文件的格式。&lt;/p&gt;
&lt;p&gt;例如Jpg图片的二进制头是 &quot;FF D8 FF DB&quot; 那么Myrmec会匹配到这个文件头，并获得两个结果--&quot;jpg&quot;和&quot;jpeg&quot;。&lt;/p&gt;
&lt;h2&gt;如何使用&lt;/h2&gt;
&lt;p&gt;首先安装 nuget 包&lt;/p&gt;
&lt;p&gt; &lt;span class=&quot;cnblogs_code&quot;&gt;Install-Package Myrmec&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;或者通过 DotnetCli&lt;/p&gt;
&lt;p&gt; &lt;span class=&quot;cnblogs_code&quot;&gt;dotnet add package Myrmec&lt;/span&gt; &lt;/p&gt;
&lt;h3&gt;编写匹配代码&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 创建嗅探器&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; Sniffer sniffer = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Sniffer();
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 使用元数据填充嗅探器&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;sniffer.Populate(FileTypes.CommonFileTypes);
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 获取要匹配文件的文件头，一般20个字节就够了，有的格式可能需要更长&lt;/span&gt;
&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;[] fileHead =&lt;span&gt; ReadFileHead();
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 匹配并获取结果&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt; List&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; results = sniffer.Match(fileHead)
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;为什么结果是List&amp;lt;String&amp;gt;？&lt;/h3&gt;
&lt;p&gt;许多时候一个文件格式会对应多个扩展名，比如jpg。还有的时候多种文件格式都是一种文件格式，比如 zip、apk、pptx 它们都是zip achive ，所以当你匹配了一个zip文件，那么你最少会获得3个扩展名。当结果是空时，说明没有匹配到结果。&lt;/p&gt;

&lt;h3&gt;查询多个结果或者一个&lt;/h3&gt;
&lt;p&gt;会有这样的情况：文件格式A 的文件头是 &quot;ff,11,22&quot; ,文件格式B 的 文件头是“ff,11,22,33”，这时候你要匹配的文件头是&quot;ff,11,22,33,44&quot;，那么它最多会匹配到这两个结果，并返回他们包含的所有扩展名&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 这会在匹配到第一个结果时就返回
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; default is false&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt; List&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; results = sniffer.Match(fileHead,&lt;span&gt;false&lt;/span&gt;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt; 
&lt;span&gt;5&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 这会匹配到所有的结果&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt; List&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; results = sniffer.Match(fileHead,&lt;span&gt;true&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;添加自定义的文件头&lt;/h3&gt;
&lt;p&gt;也许你创建了一种文件格式，或者你所使用的文件格式不在元数据中，这时你可以使用下面的代码将其加入元数据：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; data = &lt;span&gt;new&lt;/span&gt; &lt;span&gt;byte&lt;/span&gt;&lt;span&gt;[]
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;{
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;0x11&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;0x22&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;0x33&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt; &lt;span&gt;};
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; sniffer.Add(data, &lt;span&gt;new&lt;/span&gt;[] { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;what&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;file&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; });
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;注意这个新添加的格式拥有3个扩展名。&lt;/p&gt;
&lt;h3&gt;获取MimeType&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; List&amp;lt;&lt;span&gt;string&lt;/span&gt;&amp;gt; result =&lt;span&gt; sniffer.Match(head);
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; mimeType = MimeTypes.GetMimeType(result.First());
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;或者&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;string&lt;/span&gt; mimeType = MimeTypes.GetMimeType(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;png&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;);
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;在下一个版本中，获取MimeType将会被替换成string 的扩展方法。&lt;/p&gt;

&lt;h3&gt;元数据来源&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/List_of_file_signatures&quot; rel=&quot;nofollow&quot;&gt;元数据来自维基百科 List of file signatures&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;RoadMap&lt;/h3&gt;
&lt;p&gt;接下来要做的事就是支持 带有偏移量的 文件格式，例如&lt;/p&gt;
&lt;p&gt; &lt;span class=&quot;cnblogs_code&quot;&gt;ff,&lt;span&gt;11&lt;/span&gt;,ff&lt;/span&gt; 起始偏移10字节&lt;/p&gt;
&lt;p&gt;以及  &lt;span class=&quot;cnblogs_code&quot;&gt;&lt;span&gt;11&lt;/span&gt;,ff,??,??,??,&lt;span&gt;11&lt;/span&gt;,??,fd&lt;/span&gt; 这种含有跳跃的文件格式。&lt;/p&gt;
&lt;p&gt;不过事实上他们两个是一种形式，预计下一个版本就会发布对其的支持。&lt;/p&gt;
&lt;p&gt;支持 .net standard.现在是.net core 2，在未来会调整到.net standard&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/rocketRobin/myrmec&quot; target=&quot;_blank&quot;&gt;github地址：https://github.com/rocketRobin/myrmec&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.nuget.org/packages/Myrmec/&quot; target=&quot;_blank&quot;&gt;nuget地址：https://www.nuget.org/packages/Myrmec/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;欢迎大家试用，提出意见与建议&lt;/p&gt;

&lt;h3&gt;为什么github仓库是英文的？&lt;/h3&gt;
&lt;p&gt;作为一个中文开发者，我没有在github仓库中使用中文，因为我希望能够长久的开发这个项目，并希望世界各地的开发者都能使用这个库，或者参与开发，为了此目的，我在github上使用的是英文。&lt;/p&gt;
</description>
<pubDate>Tue, 13 Feb 2018 03:11:00 +0000</pubDate>
<dc:creator>RocketRobin</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/rocketRobin/p/8446273.html</dc:identifier>
</item>
</channel>
</rss>