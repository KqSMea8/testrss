<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>集合中存的是引用，分析一道容易混淆的Java面试题 - hsm_computer</title>
<link>http://www.cnblogs.com/JavaArchitect/p/8614961.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/JavaArchitect/p/8614961.html</guid>
<description>&lt;p&gt;    我们自定义的类是以引用的形式放入集合，如果使用不当，会引发非常隐蔽的错误。就拿我经常问到的一个面试题来说明这个知识点。&lt;/p&gt;
&lt;p&gt;    第一步，我们定义一个Car类型的类，其中只有一个int类型id属性。&lt;/p&gt;
&lt;p&gt;    第二步，创建一个Car类的实例，假设是c，设置它的id是1。&lt;/p&gt;
&lt;p&gt;    第三步，我们通过new关键字创建两个不同的ArrayList，分别是a1和a2，这里请注意我的描述，是创建两个不同的ArrayList，而不是一个，并把第二步里创建的c对象分别放入a1和a2。&lt;/p&gt;
&lt;p&gt;    第四步，我们在a1这个ArrayList里，拿出c对象，并把它的id设置成2，同时不对存放在a2里的c对象做任何的修改。&lt;/p&gt;
&lt;p&gt;    我的问题是，完成上述四步后，a2里存放的c对象的id是多少？1还是2？&lt;/p&gt;
&lt;p&gt;    我们通过如下的CopyDemo.java来分析这个问题：    &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
1    &lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.ArrayList;
&lt;/span&gt;2    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第一步，创建一个Car类，其中只有一个属性i&lt;/span&gt;
3    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;通过构造函数，我们可以设置i的值，而且有针对i的get和set方法&lt;/span&gt;
4    &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Car {
&lt;/span&gt;1        &lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; i;
&lt;/span&gt;2        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; getI() {&lt;span&gt;return&lt;/span&gt;&lt;span&gt; i;}
&lt;/span&gt;3        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setI(&lt;span&gt;int&lt;/span&gt; i) {&lt;span&gt;this&lt;/span&gt;.i =&lt;span&gt; i;    }
&lt;/span&gt;4        &lt;span&gt;public&lt;/span&gt; Car(&lt;span&gt;int&lt;/span&gt; i)    {&lt;span&gt;this&lt;/span&gt;.i =&lt;span&gt; i;    }
&lt;/span&gt;5&lt;span&gt;    }
&lt;/span&gt;6    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; CopyDemo {
&lt;/span&gt;7        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
&lt;/span&gt;8           &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第二步，创建一个Car的实例，其中的id是1 &lt;/span&gt;
9           Car c = &lt;span&gt;new&lt;/span&gt; Car(1&lt;span&gt;);
&lt;/span&gt;10           &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第三步，创建两个不同的ArrayList&lt;/span&gt;
11           ArrayList&amp;lt;Car&amp;gt; a1 = &lt;span&gt;new&lt;/span&gt; ArrayList&amp;lt;Car&amp;gt;&lt;span&gt;();
&lt;/span&gt;12           ArrayList&amp;lt;Car&amp;gt; a2 = &lt;span&gt;new&lt;/span&gt; ArrayList&amp;lt;Car&amp;gt;&lt;span&gt;();
&lt;/span&gt;13           &lt;span&gt;//&lt;/span&gt;&lt;span&gt;通过add方法把c分别加入到a1和a2里&lt;/span&gt;
14&lt;span&gt;           a1.add(c);
&lt;/span&gt;15&lt;span&gt;           a2.add(c);
&lt;/span&gt;16           &lt;span&gt;//&lt;/span&gt;&lt;span&gt;第四步，修改a1中的c对象，但不修改a2中的c对象&lt;/span&gt;
17           a1.get(0).setI(2&lt;span&gt;);
&lt;/span&gt;18           &lt;span&gt;//&lt;/span&gt;&lt;span&gt;最后通过打印查看a2里c对象的id&lt;/span&gt;
19           System.out.println(a2.get(0&lt;span&gt;).getI());
&lt;/span&gt;20&lt;span&gt;        }
&lt;/span&gt;21    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;    根据第19行的输出，虽然我们并没对a2里存放的c对象做任何的操作，但它的值也被改成了2，根据我面试下来的结果，估计有一半的初级程序员（工作经验3年以下）会回答错。&lt;/p&gt;
&lt;p&gt;    原因是我们之前提到过的：集合里存放的是引用。下面我们来详细说明这点。&lt;/p&gt;
&lt;p&gt;    第一，当执行完Car c = new Car(1);操作后，Java虚拟机会在内存里开辟一块空间存放id是1的c对象，假设这块空间的首地址是1000，那么c其实是指向1000号空间的引用。&lt;/p&gt;
&lt;p&gt;    第二，我们其实是把c这个引用放入到两个不同的ArrayList里，大家可以通过下图来观察下效果。&lt;/p&gt;
&lt;p&gt;    &lt;img src=&quot;https://images2018.cnblogs.com/blog/1226172/201803/1226172-20180321063215702-2103828216.png&quot; alt=&quot;&quot; width=&quot;418&quot; height=&quot;214&quot;/&gt;&lt;/p&gt;

&lt;p&gt;    从上图里我们能看到，a1和a2里第一个元素存放的其实都是c这个引用。通过这个引用，都能指向到存放在1000号内存里id是1的这个c对象。&lt;/p&gt;
&lt;p&gt;    当我们通过a1修改存放在其中的c对象时，其实是通过c这个引用直接改变了1000号里的id，由于a2里存放的引用也是指向1000号内存，所以虽然我们并没有改变过a2里的c对象，但a2里的值也跟着变了。&lt;/p&gt;
&lt;p&gt;    在实际项目里，可能会遇到类似的问题。比如我们把同一份变量放入两个不同的集合对象里，我们的本意是，在一个集合里给该变量做个备份，只在另外一个集合里修改。但根据上文的描述，即使我们只在其中一个集合里做修改，这个修改会影响到另外一个我们企图做备份的集合，这和我们想当然的结果不一样。&lt;/p&gt;
&lt;p&gt;    如果要正确地实现“一个集合做备份另一个集合做修改”的效果，我们就得通过clone方法来实现深拷贝了，来看DeepCopy.java这个例子。    &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
1    &lt;span&gt;import&lt;/span&gt;&lt;span&gt; java.util.ArrayList;
&lt;/span&gt;2    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;实现Cloneable接口，重写其中的clone方法&lt;/span&gt;
3    &lt;span&gt;class&lt;/span&gt; CarForDeepCopy &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; Cloneable {
&lt;/span&gt;4        &lt;span&gt;private&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; i;
&lt;/span&gt;5        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; getI() {&lt;span&gt;return&lt;/span&gt;&lt;span&gt; i;}
&lt;/span&gt;6        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; setI(&lt;span&gt;int&lt;/span&gt; i) {&lt;span&gt;this&lt;/span&gt;.i =&lt;span&gt; i;}
&lt;/span&gt;7    &lt;span&gt;//&lt;/span&gt;&lt;span&gt;构造函数&lt;/span&gt;
8        &lt;span&gt;public&lt;/span&gt; CarForDeepCopy(&lt;span&gt;int&lt;/span&gt;&lt;span&gt; i)
&lt;/span&gt;9        {&lt;span&gt;this&lt;/span&gt;.i =&lt;span&gt; i;}
&lt;/span&gt;10        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;调用父类的clone完成对象的拷贝&lt;/span&gt;
11        &lt;span&gt;public&lt;/span&gt; Object clone() &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; CloneNotSupportedException 
&lt;/span&gt;12    {  &lt;span&gt;return&lt;/span&gt; &lt;span&gt;super&lt;/span&gt;&lt;span&gt;.clone();    }
&lt;/span&gt;13&lt;span&gt;    }
&lt;/span&gt;14    &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; DeepCopy {
&lt;/span&gt;15        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
&lt;/span&gt;16            CarForDeepCopy c1 = &lt;span&gt;new&lt;/span&gt; CarForDeepCopy(1&lt;span&gt;);
&lt;/span&gt;17         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;通过clone方法把c1做个备份         &lt;/span&gt;
18            CarForDeepCopy c2 = &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;19            &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;20                c2 =&lt;span&gt; (CarForDeepCopy)c1.clone();
&lt;/span&gt;21            } &lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (CloneNotSupportedException e) {
&lt;/span&gt;22&lt;span&gt;                e.printStackTrace();
&lt;/span&gt;23&lt;span&gt;            }
&lt;/span&gt;24            ArrayList&amp;lt;CarForDeepCopy&amp;gt; a1 = &lt;span&gt;new&lt;/span&gt; ArrayList&amp;lt;CarForDeepCopy&amp;gt;&lt;span&gt;();
&lt;/span&gt;25            ArrayList&amp;lt;CarForDeepCopy&amp;gt; a2 = &lt;span&gt;new&lt;/span&gt; ArrayList&amp;lt;CarForDeepCopy&amp;gt;&lt;span&gt;();
&lt;/span&gt;26&lt;span&gt;            a1.add(c1);
&lt;/span&gt;27&lt;span&gt;            a2.add(c2);
&lt;/span&gt;28            &lt;span&gt;//&lt;/span&gt;&lt;span&gt;修改a1中的c对象的id为2 &lt;/span&gt;
29        a1.get(0).setI(2&lt;span&gt;);
&lt;/span&gt;30        &lt;span&gt;//&lt;/span&gt;&lt;span&gt;输出依然是1&lt;/span&gt;
31            System.out.println(a2.get(0&lt;span&gt;).getI());
&lt;/span&gt;32&lt;span&gt;        }
&lt;/span&gt;33    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;    为了实现clone，我们自定义的类必须要像第3行那样实现Cloneable接口；同时像第11行那样重写clone方法。其中我们可以像第12行那样，通过super调用父类的clone方法来完成内容的拷贝。&lt;/p&gt;
&lt;p&gt;    在第20行里，我们通过调用c1对象的clone方法在内存里创建另外一个CarForDeepCopy对象，随后当我们通过第26和27行把c1和c2放入到两个ArrayList后，在内存里存储的结构如下图所示。&lt;/p&gt;
&lt;p&gt;    &lt;img src=&quot;https://images2018.cnblogs.com/blog/1226172/201803/1226172-20180321063406573-1087782217.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;    从中我们能看到，c1被clone后，系统会开辟一块新的空间用以存放和c1相同的内容，并用c2指向这块内存。&lt;/p&gt;
&lt;p&gt;    这样a1和a2两个ArrayList就通过c1和c2这两个不同的引用指向了两块不同的内存空间，所以a1的修改不会影响到a2对象。&lt;/p&gt;

</description>
<pubDate>Tue, 20 Mar 2018 22:35:00 +0000</pubDate>
<dc:creator>hsm_computer</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/JavaArchitect/p/8614961.html</dc:identifier>
</item>
<item>
<title>Readiness 探测 - 每天5分钟玩转 Docker 容器技术（144） - CloudMan</title>
<link>http://www.cnblogs.com/CloudMan6/p/8606866.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/CloudMan6/p/8606866.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;span&gt;除了 Liveness 探测&lt;/span&gt;&lt;span&gt;，Kubernetes Health Check 机制还包括 Readiness 探测。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;用户通过 Liveness 探测可以告诉 Kubernetes 什么时候通过重启容器实现自愈；Readiness 探测则是告诉 Kubernetes 什么时候可以将容器加入到 Service 负载均衡池中，对外提供服务。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;Readiness 探测的配置语法与 Liveness 探测完全一样，下面是个例子：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/775365/201803/775365-20180320052731153-2049165013.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;这个配置文件只是将前面例子中的 &lt;/span&gt;&lt;code&gt;&lt;span&gt;liveness&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 替换为了 &lt;/span&gt;&lt;code&gt;&lt;span&gt;readiness&lt;/span&gt;&lt;/code&gt;&lt;span&gt;，我们看看有什么不同的效果。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/775365/201803/775365-20180320052742996-1486081007.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;Pod &lt;/span&gt;&lt;code&gt;&lt;span&gt;readiness&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 的 &lt;/span&gt;&lt;code&gt;&lt;span&gt;READY&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 状态经历了如下变化：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot; readability=&quot;1&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;刚被创建时，&lt;/span&gt;&lt;code&gt;&lt;span&gt;READY&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 状态为不可用。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;15 秒后（initialDelaySeconds + periodSeconds），第一次进行 Readiness 探测并成功返回，设置 &lt;/span&gt;&lt;code&gt;&lt;span&gt;READY&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 为可用。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;30 秒后，&lt;/span&gt;&lt;code&gt;&lt;span&gt;/tmp/healthy&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 被删除，连续 3 次 Readiness 探测均失败后，&lt;/span&gt;&lt;code&gt;&lt;span&gt;READY&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 被设置为不可用。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;span&gt;&lt;span&gt;通过 &lt;/span&gt;&lt;code&gt;&lt;span&gt;kubectl describe pod readiness&lt;/span&gt;&lt;/code&gt;&lt;span&gt; 也可以看到 Readiness 探测失败的日志。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/775365/201803/775365-20180320052756036-1882709376.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;下面对 Liveness 探测和 Readiness 探测做个比较：&lt;/span&gt;&lt;/p&gt;
&lt;ol class=&quot; list-paddingleft-2&quot; readability=&quot;3&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;span&gt;Liveness 探测和 Readiness 探测是两种 Health Check 机制，如果不特意配置，Kubernetes 将对两种探测采取相同的默认行为，即通过判断容器启动进程的返回值是否为零来判断探测是否成功。&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;span&gt;两种探测的配置方法完全一样，支持的配置参数也一样。不同之处在于探测失败后的行为：Liveness 探测是重启容器；Readiness 探测则是将容器设置为不可用，不接收 Service 转发的请求。&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;span&gt;Liveness 探测和 Readiness 探测是独立执行的，二者之间没有依赖，所以可以单独使用，也可以同时使用。&lt;span&gt;用 Liveness 探测判断容器是否需要重启以实现自愈；用 Readiness 探测判断容器是否已经准备好对外提供服务&lt;/span&gt;。&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;span&gt;理解了 Liveness 探测和 Readiness 探测的原理，下一节我们会讨论如何在业务场景中使用 Health Check。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;书籍：&lt;br/&gt;&lt;/strong&gt;&lt;/span&gt;&lt;span&gt;1.《每天5分钟玩转Docker容器技术》&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;a href=&quot;https://item.jd.com/16936307278.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;https://item.jd.com/16936307278.html&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;2.《每天5分钟玩转OpenStack》&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;https://item.jd.com/12086376.html&quot; target=&quot;_blank&quot;&gt;https://item.jd.com/12086376.html&lt;/a&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img title=&quot;https://i.imgsafe.org/68/68da21ce15.png&quot; src=&quot;https://i.imgsafe.org/68/68da21ce15.png&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 20 Mar 2018 22:24:00 +0000</pubDate>
<dc:creator>CloudMan</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/CloudMan6/p/8606866.html</dc:identifier>
</item>
<item>
<title>面向对象之六大设计原则 - 灵动生活</title>
<link>http://www.cnblogs.com/ywqu/p/8614914.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/ywqu/p/8614914.html</guid>
<description>&lt;p align=&quot;center&quot;&gt;&lt;strong&gt;六大设计原则&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;br/&gt;&lt;strong&gt;一、单一职责原则&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;    1.定义：应该有且仅有一个原因引起类的变更。&lt;/p&gt;
&lt;p&gt;    2.单一职责的好处&lt;/p&gt;
&lt;p&gt;        a.类的复制性降低，实现什么职责都有清晰明确的定义&lt;/p&gt;
&lt;p&gt;        b.可读性提高，复杂性降低，那当然可读性提高了&lt;/p&gt;
&lt;p&gt;        c.可维护性的提高，可读性提高，当然更容易维护&lt;/p&gt;
&lt;p&gt;        d.变更引起的风险降低，本身变更是必不可少的，接口的单一职责做的好，一个接口修改只针对响应的实现类有影响，对其他接口无影响，对系统的扩展性和维护性都有非常大的帮助&lt;/p&gt;
&lt;p&gt;    3.总结：现实中想要全部按照单一职责原则很难在项目中得到提现，需要考虑的问题比较多，环境、工作量、人员技术水平以及资源等等；对于接口再设计的时候一定要做到单一；而对于实现类就需要多方面考虑；生搬硬套单一职责原则会引起类的剧增，反而给维护带来非常多的麻烦；俗话说原则是死的人是活的；具体问题还需据对应对&lt;/p&gt;
&lt;p&gt;    4.结合我们酷客多产品接口设计案列，非常明显可以体验出单一职责的好处&lt;/p&gt;
&lt;p&gt;        例如：酷客多小程序产品详情页面，相对将页面价格信息和促销信息数据的获取独立成两个单独接口；酷客多营销插件的更新迭代是比较频繁，不时新增一种营销插件；而将促销信息接口独立出后，后续无论增加多少种插件，也只需要调整促销信息接口即可，对应商品详情其他数据接口无需任何改动。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;二、里氏替换原则&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;    1.定义：&lt;/p&gt;
&lt;p&gt;        a.如果对每一个类型为S的对象01，都有类型为T的对象02，使得以T定义的所有程序P在所有的对象01都带换成02时，程序P的行为没有发生变化，那么类型S是类型T的子类型&lt;/p&gt;
&lt;p&gt;        b.所有引用基类的地方必须能透明地使用其子类的对象；通俗的说，就是所有能使用父类的地方都可以替换为子类，不会产生任何错误或异常，但是反过来就不行了，有子类出现的地方，父类未必就能适应&lt;/p&gt;
&lt;p&gt;    2.规范:&lt;/p&gt;
&lt;p&gt;        a.子类必须完全实现父类的方法&lt;/p&gt;
&lt;p&gt;            i.做系统设计时，经常会定义一个接口或抽象类，然后编码实现，调用类则直接传入接口或抽象类，这里就是使用了里氏替换原则&lt;/p&gt;
&lt;p&gt;            ii.在类种调用其它类时务必要使用父类或接口，如果不能使用父类或接口，则说明类的设计已经违背了LSP原则&lt;/p&gt;
&lt;p&gt;            iii.如果子类不能完整地实现父类的方法，或者父类的某些方法在子类中已经发生“畸变”，则建议断开负责继承关系，采用依赖、聚集、组合等关系代替继承&lt;/p&gt;
&lt;p&gt;        b.子类可以有自己的个性,子类同时也可以有属于自己的属性和方法&lt;/p&gt;
&lt;p&gt;        c.覆盖或实现父类的方法时输入参数可以被放大&lt;/p&gt;
&lt;p&gt;        d.覆写或实现父类的方法时输出结果可以被缩小&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;三、依赖倒置原则&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;    1.定义：&lt;/p&gt;
&lt;p&gt;        a.高层模块不应该依赖底层模块，两则都应该依赖其抽象&lt;/p&gt;
&lt;p&gt;        b.抽象不应该依赖细节&lt;/p&gt;
&lt;p&gt;            i.什么是抽象:抽象就是指接口或抽象类，两者都是不能直接被实例化的&lt;/p&gt;
&lt;p&gt;            ii.什么是细节:细节就是实现类，实现接口或继承抽象类而产生的类就是细节，特点就是可以直接实例化，也就是new产生一个对象&lt;/p&gt;
&lt;p&gt;        c.细节应该依赖抽象&lt;/p&gt;
&lt;p&gt;    2.作用：依赖倒置原则可以减少类间的耦合性，提高系统的稳定性，降低并行开发引起的风险，提高代码的可读性和可维护性&lt;/p&gt;
&lt;p&gt;    3.依赖的三种写法&lt;/p&gt;
&lt;p&gt;        a.构造函数传递依赖对象&lt;/p&gt;
&lt;p&gt;        b.Setter方法传递依赖对象&lt;/p&gt;
&lt;p&gt;        c.接口声明传递依赖对象&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;四、接口隔离原则&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;    1.定义:&lt;/p&gt;
&lt;p&gt;        a.客户端不应该依赖它不需要的接口。依赖是什么？依赖它需要的接口，客户端需要什么接口就提供什么接口，把不需要的接口剔除掉，对接口进行细化，保证接口的纯洁性&lt;/p&gt;
&lt;p&gt;        b.类间的依赖关系应该建立在最小的接口上。最小的接口也是需要细化的，接口的纯洁性如上，只是一个实物的两种不同的描述&lt;/p&gt;
&lt;p&gt;    2.接口隔离原则的四层含义&lt;/p&gt;
&lt;p&gt;        a.接口要尽量小&lt;/p&gt;
&lt;p&gt;        b.接口要高内聚&lt;/p&gt;
&lt;p&gt;        c.定制服务&lt;/p&gt;
&lt;p&gt;        d.接口设计是有限度的&lt;/p&gt;
&lt;p&gt;    3.总结：&lt;/p&gt;
&lt;p&gt;        a.一个接口只服务于一个子模块或业务逻辑&lt;/p&gt;
&lt;p&gt;        b.通过业务逻辑压缩接口中的public方法，接口时常去回顾，尽量让接口达到“满身筋骨肉”，而不是“肥嘟嘟”的一大堆方法；&lt;/p&gt;
&lt;p&gt;        c.已经污染了的接口，尽量去修改，若变更的风险比较大，则采用适配器模式进行转化处理。适配器模式可以单独查阅设计模式一书中相关信息&lt;/p&gt;
&lt;p&gt;        d.了解环境，拒绝盲从。每个项目或产品都有特定的化境因素，别看到大师是这样做的你就照抄；环境不同，接口拆分的标准就不同。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;五、迪米特法则&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;    1.定义：迪米特法则也称为最小知识原则，描述的规则：一个对象应该对其他对象有最少的了解，通俗的说，一个类应该对自己需要耦合或调用的类知道的最少，你的内部是如何复杂和我没关系，我就知道你提供的这么公开方法，我就调用这么多，其他一概不关心&lt;/p&gt;
&lt;p&gt;    2.迪米特法则对类的低耦合提出了明确要求，其包含3层含义&lt;/p&gt;
&lt;p&gt;        a.只和朋友交流。两个对象之间的耦合就成为朋友关系，这种关系的类型有很多，例如组合、聚合‘依赖等&lt;/p&gt;
&lt;p&gt;        b.朋友间也是有距离的。一个类公开的属性或方法越多，修改时涉及的面也就越大，变更引起的风险扩散也就越大，因此为了保持距离，设计时需要反复衡量减少public方法和属性。&lt;/p&gt;
&lt;p&gt;        c.是自己的就是自己的：如果一个方法放在奔雷中，既不增加类间关系，对本类不产生负面影响，那就放置在本类中&lt;/p&gt;
&lt;p&gt;    3.总结：迪米特法则的核心观念就类间解耦，弱耦合，只有弱耦合了以后，类的复用率才可以提高，而这样的要求结果回产生大量的中转和跳转类，导致系统的复杂性提供，同时也为维护带来了难度。因此，在实际项目中，需要适度地考虑这个原则，别为了套用原则而做项目。视情况而定。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;六、开闭原则&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1.定义：一个软件实体如类、模块和函数应该对扩展开放，对修改关闭。&lt;/p&gt;
&lt;p&gt;  扩展开放：意思是指当我们针对一个需求有变化时，我们通过扩展来实现变化，，这样对系统的最小化开发，修改也少，风险也小&lt;/p&gt;
&lt;p&gt;  修改关闭：关闭修改应该变化，这样极大降低系统的风险，保持历史代码的纯洁性，提高系统的稳定性。&lt;/p&gt;
&lt;p&gt;    2.好处&lt;/p&gt;
&lt;p&gt;        a.开闭原则可以提供复用性&lt;/p&gt;
&lt;p&gt;        b.开闭原则可以提供可维护性&lt;/p&gt;
&lt;p&gt;    3.总结：开闭原则是一个非常虚地原则，前面5个原则是对开闭原则地具体解释，但是开闭原则并不局限这么多，它“虚”得没有边界，就像“好好学习，天天向上”得口号一样，告诉我们要好好学习，但是学什么，怎么学没有告诉我们，需要我们去体会和掌握，开闭原则也是一样。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;六大设计原则总结&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;六大设计原则得核心其实是开闭原则，开闭原则具有理想主义的色彩，它是&lt;a href=&quot;https://baike.baidu.com/item/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1&quot; target=&quot;_blank&quot;&gt;面向对象设计&lt;/a&gt;的终极目标。因此，针对开闭原则的实现方法，一直都有面向对象设计的大师费尽心机，研究开闭原则的实现方式。而对于其他五大设计原则，都可以看作是开闭原则的实现方法。&lt;/p&gt;

&lt;p&gt;　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　作者：酷客多小程序 刘慈&lt;/p&gt;

</description>
<pubDate>Tue, 20 Mar 2018 17:56:00 +0000</pubDate>
<dc:creator>灵动生活</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/ywqu/p/8614914.html</dc:identifier>
</item>
<item>
<title>Spring MVC注解式开发 - 大道方圆</title>
<link>http://www.cnblogs.com/xdecode/p/8614735.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xdecode/p/8614735.html</guid>
<description>&lt;p&gt;MVC注解式开发即处理器基于注解的类开发, 对于每一个定义的处理器, 无需在xml中注册.&lt;/p&gt;
&lt;p&gt;只需在代码中通过对类与方法的注解, 即可完成注册.&lt;/p&gt;
&lt;h3&gt;定义处理器&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;@Controller&lt;/strong&gt;: 当前类为处理器&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;@RequestMapping&lt;/strong&gt;: 当前方法为处理器方法, 方法名随意, 对于请求进行处理与响应.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;@Controller    
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyController {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     @RequestMapping(value = &quot;/hello.do&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ModelAndView doControl(HttpServletRequest request,
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;                                   HttpServletResponse response) {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         ModelAndView mv = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         mv.addObject(&quot;message&quot;, &quot;执行方法&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         mv.setViewName(&quot;welcome, neil!&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mv;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; 
&lt;span&gt;13&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;可以在RequestMapping对请求进行限制, 例如&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     @RequestMapping(value=&quot;/hello.do&quot;, params={&quot;name=neil&quot;, &quot;!age&quot;}, method=RequestMethod.POST)
&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote readability=&quot;11&quot;&gt;
&lt;p&gt;method=RequestMethod.POST &lt;strong&gt;限定提交类型为POST&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;params={&quot;name=neil&quot;, &quot;!age&quot;}  限定请求中&lt;strong&gt;必须携带参数name&lt;/strong&gt;, 值为neil, 不可以携带参数age&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3&gt;接受请求参数&lt;/h3&gt;
&lt;p&gt;如果请求中参数名与处理器方法参数名一致, 那么可以直接获取.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     @RequestMapping(value=&quot;/hello.do&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; ModelAndView doControll(String name, &lt;span&gt;int&lt;/span&gt;&lt;span&gt; age) {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         System.out.println(&quot;Name : &quot; + name + &quot;, Age: &quot; +&lt;span&gt; age);
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;         ModelAndView mv = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mv;
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果参数名&lt;strong&gt;不一致&lt;/strong&gt;, 则需要通过&lt;strong&gt;@RequestParam&lt;/strong&gt;进行定位.&lt;/p&gt;
&lt;p&gt;@RequestParam有三个属性&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;name / value: 指定请求参数的名称.&lt;/li&gt;
&lt;li&gt;required: 参数是否必须, 若为false, 则表示参数有没有均可.&lt;/li&gt;
&lt;li&gt;defaultValue: 请求中没有携带参数时, 指定当前参数默认值.&lt;/li&gt;
&lt;/ul&gt;&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; doControll(@RequestParam(name = &quot;username&quot;) String name, @RequestParam(name = &quot;userage&quot;) &lt;span&gt;int&lt;/span&gt; age)
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;路径变量@PathVariable&lt;/h3&gt;
&lt;p&gt;对处理器方法中的参数, 可以来自于请求携带的参数, 也可以来自于URI中的变量, 即路径变量.&lt;/p&gt;
&lt;p&gt;与上述正常参数一样, 如果路径变量名与接收其值的参数名不一致, 则需要通过参数指出路径变量名称.&lt;/p&gt;
&lt;p&gt;如下所示, 注意username与name, age与age.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     @RequestMapping(value=&quot;/&lt;strong&gt;{username}/{age}&lt;/strong&gt;/hello.do&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; ModelAndView doControll(@PathVariable(&quot;username&quot;) String name, @RequestParam &lt;span&gt;int&lt;/span&gt;&lt;span&gt; age) {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         System.out.println(&quot;Name : &quot; + name + &quot;, Age: &quot; +&lt;span&gt; age);
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;         ModelAndView mv = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mv;
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;处理器方法返回值&lt;/h3&gt;
&lt;p&gt;使用@Controller注解的处理器, 其方法返回值常用的有如下四种:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;ModelAndView&lt;/li&gt;
&lt;li&gt;Void&lt;/li&gt;
&lt;li&gt;Object, 自定义类型对象&lt;/li&gt;
&lt;li&gt;String&lt;/li&gt;
&lt;/ul&gt;&lt;h4&gt;1, 返回ModelAndView&lt;/h4&gt;
&lt;p&gt;处理器方法完成后, 需要跳转到其他资源, 且需要在跳转的资源之间传递数据, 则返回ModelAndView即可.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ModelAndView doControll(){
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;         ModelAndView modelAndView = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 传递的数据&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;         modelAndView.addObject(&quot;name&quot;, &quot;neil&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;         modelAndView.setViewName(&quot;/user.do&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; modelAndView;
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;2, 返回Void&lt;/h4&gt;
&lt;p&gt;请求处理后, 无需跳转, 可以放处理器返回void, 例如Ajax异步请求响应.&lt;/p&gt;
&lt;p&gt;如果需要跳转, 也可以通过操作ServletAPI进行sendRedirect或者forward.&lt;/p&gt;
&lt;h4&gt;3, 返回Object&lt;/h4&gt;
&lt;p&gt;处理器可以返回Object对象, 此时不是作为逻辑视图出现的, 而是直接在页面展示数据用的.&lt;/p&gt;
&lt;p&gt;返回Object对象, 需要使用@ResponseBody注解, 将转换后的JSON数据放入响应体重.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     @RequestMapping(value=&quot;/hello.do&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;    @ResponseBody
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ModelAndView doControll() {
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; Student(&quot;neil&quot;, 998&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;前端获取到数据&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;    FR.ajax({
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;         url: &quot;hello.do&quot;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         complete: &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(data) {
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;             alert(data.name + &quot; &quot; +&lt;span&gt; data.age);
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;     })
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 同样, 也可以返回集合List, Map等等.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     @RequestMapping(value=&quot;/hello.do&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;    @ResponseBody
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ModelAndView doControll() {
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;         List&amp;lt;Student&amp;gt; list = &lt;span&gt;new&lt;/span&gt; ArrayList&amp;lt;Student&amp;gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;         list.add(&lt;span&gt;new&lt;/span&gt; Student(&quot;a&quot;, 11&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;         list.add(&lt;span&gt;new&lt;/span&gt; Student(&quot;b&quot;, 22&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;         list.add(&lt;span&gt;new&lt;/span&gt; Student(&quot;c&quot;, 33&lt;span&gt;));
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; list;
&lt;/span&gt;&lt;span&gt;9&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;    FR.ajax({
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;         url: &quot;hello.do&quot;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         complete: &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(data) {
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;             $(data).each(&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(index)) {
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;                 alert(data[index].name +&lt;span&gt; data[index].age);
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;     })
&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;4, 返回String&lt;/h4&gt;
&lt;p&gt;返回字符串可能有以下三种场景:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;逻辑视图名&lt;/li&gt;
&lt;li&gt;Redirect重定向&lt;/li&gt;
&lt;li&gt;Forward转发&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;逻辑视图名&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;处理器返回的字符串可以指定逻辑视图名, 通过视图解析器解析将其转为物理视图地址.&lt;/p&gt;
&lt;p&gt;最终真实的访问路径=“前缀”+逻辑视图名+“后缀”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1285727/201803/1285727-20180321002335539-42311196.jpg&quot; alt=&quot;&quot; width=&quot;498&quot; height=&quot;79&quot;/&gt;&lt;/p&gt;
&lt;p&gt;如果不指定前后缀, 也可以直接返回物理视图名, 如&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
1 return &quot;/WEB-INF/admin/welcome.jsp&quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Redirect重定向&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
1 return &quot;redirect:/admin/next.action&quot;;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;相当于response.sendRedirect()，转发后浏览器的地址栏变为转发后的地址.&lt;/p&gt;
&lt;p&gt;由于新发起一个request，原来的参数在转发时就不能传递到下一个url，&lt;/p&gt;
&lt;p&gt;如果要传参数可以在url后边拼接参数&amp;amp;a=1&amp;amp;b=2&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Forward转发&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
1 return &quot;forward:/admin/forward.action&quot;;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;相当于request.getRequestDispatcher().forward(request,response), 转发后浏览器地址栏还是原来的地址。&lt;/p&gt;
&lt;p&gt;转发并没有执行新的request和response，而是和转发前的请求共用一个request和response.&lt;/p&gt;
&lt;p&gt;参数可以直接复用转发前的.&lt;/p&gt;

</description>
<pubDate>Tue, 20 Mar 2018 16:58:00 +0000</pubDate>
<dc:creator>大道方圆</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xdecode/p/8614735.html</dc:identifier>
</item>
<item>
<title>Django+xadmin打造在线教育平台（二） - zhang_derek</title>
<link>http://www.cnblogs.com/derek1184405959/p/8592800.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/derek1184405959/p/8592800.html</guid>
<description>&lt;h2&gt;三、xadmin后台管理&lt;/h2&gt;
&lt;h3&gt;&lt;span&gt;3.1.xadmin的安装&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;django2.0的安装（源码安装方式）：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
https://github.com/sshwsfc/xadmin/tree/django2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;把zip文件放到pip目录下，运行下面命令安装：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
pip install xadmin-django2
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('00e016d6-1bb0-4c20-bdde-99655c1e2c2a')&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_00e016d6-1bb0-4c20-bdde-99655c1e2c2a&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_00e016d6-1bb0-4c20-bdde-99655c1e2c2a&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('00e016d6-1bb0-4c20-bdde-99655c1e2c2a',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_00e016d6-1bb0-4c20-bdde-99655c1e2c2a&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;是文件README.rst 出现了 Unicode 解码错误，这个文件是没有什么用处的，可以新建一个同名的空白文件替换掉

 首先下载zip源码包：github.com&lt;/span&gt;/sshwsfc/&lt;span&gt;xadmin

 解压后，打开README.rst文件，清空里面的内容，然后保存。

再压缩成zip，放到pip目录下：C:\Users\Administrator\AppData\Local\Programs\Python\Python36\Lib\site&lt;/span&gt;-&lt;span&gt;packages\pip

此时打开cmd进行安装：pip install xadmin&lt;/span&gt;-master.zip
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;其它版本&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;如果上面安装提示错误：&lt;/p&gt;
&lt;p&gt;更换安装源（使用豆瓣源）&lt;/p&gt;
&lt;p&gt;安装xadmin的命令如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
pip install -i https://pypi.douban.com/simple xadmin-django2
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装成功后，同时也安装了很多依赖的包，后面也需要用到。&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;3.2.xadmin的设置&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt; （1）新建Python Package &quot;extra_apps&quot;,把源码xadmin文件夹放到extra_apps文件夹下面，此时目录结构如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180318182428076-1487071853.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（2）把extra_apps右键mark为Source Root并在settings中加入&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
sys.path.insert(0,os.path.join(BASE_DIR, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;extra_apps&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;))
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180318182732844-1440437261.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（3）因为我们用源码的xadmin,所以要卸载之前安装的&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
pip uinstall xadmin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(4)配置路由&lt;/p&gt;
&lt;p&gt;把admin改成xadmin&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; urls.py&lt;/span&gt;

&lt;span&gt;from&lt;/span&gt; django.urls &lt;span&gt;import&lt;/span&gt;&lt;span&gt; path

&lt;/span&gt;&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

urlpatterns &lt;/span&gt;=&lt;span&gt; [
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;xadmin/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, xadmin.site.urls),
]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(5)注册app&lt;/p&gt;
&lt;p&gt;把下面两个app注册到settings.py的INSTALLED_APPS中&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
&lt;span&gt;'&lt;/span&gt;&lt;span&gt;xadmin&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;crispy_forms&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(6)重新生成数据库&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;python manage.py makemigrations

python manage.py migrate&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(7)设置成中文&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
LANGUAGE_CODE = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;zh-hans&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;

TIME_ZONE &lt;/span&gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;Asia/Shanghai&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;

USE_I18N &lt;/span&gt;=&lt;span&gt; True

USE_L10N &lt;/span&gt;=&lt;span&gt; True

USE_TZ &lt;/span&gt;= False
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(8)创建一个管理员用户&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
python manage.py createsuperuser
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;现在就可以运行了 &lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
python manage.py runserver 
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;访问后台：http://127.0.0.1:8000/xadmin&lt;/p&gt;
&lt;p&gt; 可以看到成功进入管理界面&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180318184029740-1337000224.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;datetimefield报错问题解决：&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;当我们点增加用户信息，会报错&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180318185454652-1278100785.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;可以看到报的是xadmin/widgets中第80行&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;def&lt;/span&gt; render(self, name, value, attrs=&lt;span&gt;None):
        input_html &lt;/span&gt;= [ht &lt;span&gt;for&lt;/span&gt; ht &lt;span&gt;in&lt;/span&gt; super(AdminSplitDateTime, self).render(name, value, attrs).split(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &lt;span&gt;if&lt;/span&gt; ht != &lt;span&gt;''&lt;/span&gt;&lt;span&gt;]
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; return input_html&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; mark_safe(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;div class=&quot;datetime clearfix&quot;&amp;gt;&amp;lt;div class=&quot;input-group date bootstrap-datepicker&quot;&amp;gt;&amp;lt;span class=&quot;input-group-addon&quot;&amp;gt;&amp;lt;i class=&quot;fa fa-calendar&quot;&amp;gt;&amp;lt;/i&amp;gt;&amp;lt;/span&amp;gt;%s&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
                         &lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;span class=&quot;input-group-btn&quot;&amp;gt;&amp;lt;button class=&quot;btn btn-default&quot; type=&quot;button&quot;&amp;gt;%s&amp;lt;/button&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
                         &lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;div class=&quot;input-group time bootstrap-clockpicker&quot;&amp;gt;&amp;lt;span class=&quot;input-group-addon&quot;&amp;gt;&amp;lt;i class=&quot;fa fa-clock-o&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
                         &lt;span&gt;'&lt;/span&gt;&lt;span&gt;&amp;lt;/i&amp;gt;&amp;lt;/span&amp;gt;%s&amp;lt;span class=&quot;input-group-btn&quot;&amp;gt;&amp;lt;button class=&quot;btn btn-default&quot; type=&quot;button&quot;&amp;gt;%s&amp;lt;/button&amp;gt;&amp;lt;/span&amp;gt;&amp;lt;/div&amp;gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; % (input_html[0], _(u&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Today&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;), input_html[1], _(u&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Now&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)))
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;上面贴出来的最后一行代码就是widgets.py的第80行代码。&lt;/p&gt;
&lt;p&gt;可以看出这句代码是希望用“\n”把input_html里的两个标签拆开，但两个标签之间没有换行，所以没能拆分，导致报错。&lt;/p&gt;
&lt;p&gt;input_html[1]就是报错的代码，因为input_html里只有一个元素。&lt;/p&gt;
&lt;p&gt; &lt;strong&gt;&lt;span&gt;解决办法：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;既然“\n”不能拆分标签，那么就换一种拆分方式，使用“/&amp;gt;&amp;lt;”拆分。&lt;/p&gt;
&lt;p&gt;原代码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
input_html = [ht &lt;span&gt;for&lt;/span&gt; ht &lt;span&gt;in&lt;/span&gt; super(AdminSplitDateTime, self).render(name, value, attrs).split(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;\n&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &lt;span&gt;if&lt;/span&gt; ht != &lt;span&gt;''&lt;/span&gt;]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;修改后代码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
input_html = [ht &lt;span&gt;for&lt;/span&gt; ht &lt;span&gt;in&lt;/span&gt; super(AdminSplitDateTime, self).render(name, value, attrs).split(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &lt;span&gt;if&lt;/span&gt; ht != &lt;span&gt;''&lt;/span&gt;&lt;span&gt;]
input_html[0] &lt;/span&gt;= input_html[0] + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
input_html[&lt;/span&gt;1] = &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + input_html[1]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;再运行就正常了&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;3.3.users app的models注册&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;（1）在users下面创建adminx.py,代码如下：&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; EmailVerifyRecord

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;xadmin中这里是继承object，不再是继承admin&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; EmailVerifyRecordAdmin(object):
    &lt;/span&gt;&lt;span&gt;pass&lt;/span&gt;&lt;span&gt;

xadmin.site.register(EmailVerifyRecord,EmailVerifyRecordAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;(2)完善功能，增加显示字段，搜索和过滤&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;修改users/adminx.py,代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; EmailVerifyRecord

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;xadmin中这里是继承object，不再是继承admin&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; EmailVerifyRecordAdmin(object):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 显示的列&lt;/span&gt;
    list_display = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 搜索的字段，不要添加时间搜索&lt;/span&gt;
    search_fields = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 过滤&lt;/span&gt;
    list_filter = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]

xadmin.site.register(EmailVerifyRecord,EmailVerifyRecordAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;刷新后的界面：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180318200400264-1783863862.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;users中&lt;/span&gt;Banner也注册进去&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; BannerAdmin(object):
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


xadmin.site.register(Banner,BannerAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;1.4.剩余app model注册&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;（1）course&lt;/p&gt;
&lt;p&gt;代码如下： 注意外键&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;74&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; course/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; Course, Lesson, Video, CourseResource
&lt;br/&gt;&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;课程&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
    
    list_display &lt;/span&gt;= [ &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;detail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;degree&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;learn_times&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;detail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;degree&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [ &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;detail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;degree&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;learn_times&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; LessonAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;章节&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
    
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;这里course__name是根据课程名称过滤&lt;/span&gt;
    list_filter = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; VideoAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;视频&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
    
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;lesson&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;lesson&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;lesson&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseResourceAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;课程资源&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
    
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;download&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;download&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;download&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将管理器与model进行注册关联&lt;/span&gt;
&lt;span&gt;xadmin.site.register(Course, CourseAdmin)
xadmin.site.register(Lesson, LessonAdmin)
xadmin.site.register(Video, VideoAdmin)
xadmin.site.register(CourseResource, CourseResourceAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;（2）organizations&lt;/p&gt;
&lt;p&gt; 代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;71&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; organization/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; CityDict, CourseOrg, Teacher



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CityDictAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;城市&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
    
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseOrgAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;机构&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
    
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt; ]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;city__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;address&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; TeacherAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;老师&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
    
    list_display &lt;/span&gt;= [ &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;org&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_years&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_company&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;org&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_years&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_company&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;org__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_years&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_company&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


xadmin.site.register(CityDict, CityDictAdmin)
xadmin.site.register(CourseOrg, CourseOrgAdmin)
xadmin.site.register(Teacher, TeacherAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(3)operation&lt;/p&gt;
&lt;p&gt;代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;81&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; operation/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; UserAsk, UserCourse, UserMessage, CourseComments, UserFavorite


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserAskAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户表单我要学习&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mobile&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course_name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mobile&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course_name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mobile&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course_name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;#
&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserCourseAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户课程学习&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserMessageAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户消息后台&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;message&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;has_read&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;message&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;has_read&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;message&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;has_read&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseCommentsAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户评论后台&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;comments&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;comments&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;comments&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserFavoriteAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户收藏后台&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将后台管理器与models进行关联注册。&lt;/span&gt;
&lt;span&gt;xadmin.site.register(UserAsk, UserAskAdmin)
xadmin.site.register(UserCourse, UserCourseAdmin)
xadmin.site.register(UserMessage, UserMessageAdmin)
xadmin.site.register(CourseComments, CourseCommentsAdmin)
xadmin.site.register(UserFavorite, UserFavoriteAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 全部代码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('37db26fd-a641-42b2-9fe8-bb713292a6c0')&quot; readability=&quot;43.5&quot;&gt;&lt;img id=&quot;code_img_closed_37db26fd-a641-42b2-9fe8-bb713292a6c0&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_37db26fd-a641-42b2-9fe8-bb713292a6c0&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('37db26fd-a641-42b2-9fe8-bb713292a6c0',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_37db26fd-a641-42b2-9fe8-bb713292a6c0&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;82&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; EmailVerifyRecord,Banner

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;xadmin中这里是继承object，不再是继承admin&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; EmailVerifyRecordAdmin(object):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 显示的列&lt;/span&gt;
    list_display = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 搜索的字段&lt;/span&gt;
    search_fields = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 过滤&lt;/span&gt;
    list_filter = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; BannerAdmin(object):
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


xadmin.site.register(EmailVerifyRecord,EmailVerifyRecordAdmin)
xadmin.site.register(Banner,BannerAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;users/adminx.py&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('75467015-e7b2-4f8a-b0c3-5de6799d70c9')&quot; readability=&quot;52&quot;&gt;&lt;img id=&quot;code_img_closed_75467015-e7b2-4f8a-b0c3-5de6799d70c9&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_75467015-e7b2-4f8a-b0c3-5de6799d70c9&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('75467015-e7b2-4f8a-b0c3-5de6799d70c9',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_75467015-e7b2-4f8a-b0c3-5de6799d70c9&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;99&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; course/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; Course, Lesson, Video, CourseResource


&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; Course的admin管理器&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;课程&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [ &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;detail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;degree&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;learn_times&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;detail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;degree&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [ &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;detail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;degree&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;learn_times&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; LessonAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;章节&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;这里course__name是根据课程名称过滤&lt;/span&gt;
    list_filter = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; VideoAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;视频&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;lesson&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;lesson&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;lesson&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseResourceAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;课程资源&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;download&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;download&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;course__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;download&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将管理器与model进行注册关联&lt;/span&gt;
&lt;span&gt;xadmin.site.register(Course, CourseAdmin)
xadmin.site.register(Lesson, LessonAdmin)
xadmin.site.register(Video, VideoAdmin)
xadmin.site.register(CourseResource, CourseResourceAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;course/adminx.py&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('bb16f5d3-af2b-4613-86e2-cb046f0c2397')&quot; readability=&quot;50.5&quot;&gt;&lt;img id=&quot;code_img_closed_bb16f5d3-af2b-4613-86e2-cb046f0c2397&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_bb16f5d3-af2b-4613-86e2-cb046f0c2397&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('bb16f5d3-af2b-4613-86e2-cb046f0c2397',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_bb16f5d3-af2b-4613-86e2-cb046f0c2397&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;96&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; organization/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; CityDict, CourseOrg, Teacher


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CityDictAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;城市&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseOrgAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;机构&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt; ]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;desc&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;city__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;address&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; TeacherAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;老师&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [ &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;org&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_years&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_company&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;org&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_years&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_company&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;org__name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_years&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;work_company&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


xadmin.site.register(CityDict, CityDictAdmin)
xadmin.site.register(CourseOrg, CourseOrgAdmin)
xadmin.site.register(Teacher, TeacherAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;organization/adminx.py&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('75d5f27e-4ac0-4bd5-b1ea-59a7c1e9ec7a')&quot; readability=&quot;55.5&quot;&gt;&lt;img id=&quot;code_img_closed_75d5f27e-4ac0-4bd5-b1ea-59a7c1e9ec7a&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_75d5f27e-4ac0-4bd5-b1ea-59a7c1e9ec7a&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('75d5f27e-4ac0-4bd5-b1ea-59a7c1e9ec7a',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_75d5f27e-4ac0-4bd5-b1ea-59a7c1e9ec7a&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;106&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; operation/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; UserAsk, UserCourse, UserMessage, CourseComments, UserFavorite


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserAskAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户表单我要学习&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mobile&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course_name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mobile&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course_name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;mobile&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course_name&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;#
&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserCourseAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户课程学习&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserMessageAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户消息后台&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;message&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;has_read&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;message&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;has_read&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;message&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;has_read&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseCommentsAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户评论后台&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;comments&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;comments&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;comments&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]



&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserFavoriteAdmin(object):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;用户收藏后台&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;

    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将后台管理器与models进行关联注册。&lt;/span&gt;
&lt;span&gt;xadmin.site.register(UserAsk, UserAskAdmin)
xadmin.site.register(UserCourse, UserCourseAdmin)
xadmin.site.register(UserMessage, UserMessageAdmin)
xadmin.site.register(CourseComments, CourseCommentsAdmin)
xadmin.site.register(UserFavorite, UserFavoriteAdmin)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;operation/adminx.py&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;此时项目目录结构：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180319220652071-893797621.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 运行项目，进后台管理界面如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180319221430160-2028663219.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3&gt; &lt;span&gt;1.5.xadmin的全局配置&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;将全局配置修改:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;如左上角：django Xadmin。下面的我的公司&lt;/li&gt;
&lt;li&gt;主题修改，app名称汉化，菜单收叠。&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt; &lt;strong&gt;&lt;span&gt;使用Xadmin的主题功能。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;把全站的配置放在users\adminx.py中:&lt;/p&gt;
&lt;p&gt; （1）添加主题功能&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; xadmin &lt;span&gt;import&lt;/span&gt;&lt;span&gt; views

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 创建xadmin的最基本管理器配置，并与view绑定&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; BaseSetting(object):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 开启主题功能&lt;/span&gt;
    enable_themes =&lt;span&gt; True
    use_bootswatch &lt;/span&gt;=&lt;span&gt; True

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将基本配置管理与view绑定&lt;/span&gt;
xadmin.site.register(views.BaseAdminView,BaseSetting)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;没添加主题前，右上角界面&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180319230322547-1402985317.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;添加主题后，可以选择自己喜欢的主题&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180319230607607-187280081.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（2）全局配置&lt;/p&gt;
&lt;p&gt; 修改django admin 和下面的我的公司收起菜单&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 全局修改，固定写法&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; GlobalSettings(object):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 修改title&lt;/span&gt;
    site_title = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;NBA后台管理界面&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
    &lt;span&gt;#&lt;/span&gt;&lt;span&gt; 修改footer&lt;/span&gt;
    site_footer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;科比的公司&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
    &lt;span&gt;#&lt;/span&gt;&lt;span&gt; 收起菜单&lt;/span&gt;
    menu_style = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;accordion&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;

&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将title和footer信息进行注册&lt;/span&gt;
xadmin.site.register(views.CommAdminView,GlobalSettings)
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('fd370cd6-d002-4b6e-ae9d-c8d1c21e38ac')&quot; readability=&quot;44.5&quot;&gt;&lt;img id=&quot;code_img_closed_fd370cd6-d002-4b6e-ae9d-c8d1c21e38ac&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_fd370cd6-d002-4b6e-ae9d-c8d1c21e38ac&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('fd370cd6-d002-4b6e-ae9d-c8d1c21e38ac',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_fd370cd6-d002-4b6e-ae9d-c8d1c21e38ac&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;84&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/adminx.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; EmailVerifyRecord,Banner

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; xadmin &lt;span&gt;import&lt;/span&gt;&lt;span&gt; views

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 创建xadmin的最基本管理器配置，并与view绑定&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; BaseSetting(object):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 开启主题功能&lt;/span&gt;
    enable_themes =&lt;span&gt; True
    use_bootswatch &lt;/span&gt;=&lt;span&gt; True

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 全局修改，固定写法&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; GlobalSettings(object):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 修改title&lt;/span&gt;
    site_title = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;NBA后台管理界面&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
    &lt;span&gt;#&lt;/span&gt;&lt;span&gt; 修改footer&lt;/span&gt;
    site_footer = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;科比的公司&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
    &lt;span&gt;#&lt;/span&gt;&lt;span&gt; 收起菜单&lt;/span&gt;
    menu_style = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;accordion&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;


&lt;span&gt;#&lt;/span&gt;&lt;span&gt;xadmin中这里是继承object，不再是继承admin&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; EmailVerifyRecordAdmin(object):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 显示的列&lt;/span&gt;
    list_display = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 搜索的字段&lt;/span&gt;
    search_fields = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 过滤&lt;/span&gt;
    list_filter = [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;email&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;send_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; BannerAdmin(object):
    list_display &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    search_fields &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]
    list_filter &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;image&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;url&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]


xadmin.site.register(EmailVerifyRecord,EmailVerifyRecordAdmin)
xadmin.site.register(Banner,BannerAdmin)

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将基本配置管理与view绑定&lt;/span&gt;
&lt;span&gt;xadmin.site.register(views.BaseAdminView,BaseSetting)

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 将title和footer信息进行注册&lt;/span&gt;
xadmin.site.register(views.CommAdminView,GlobalSettings)
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;users/adminx.py全部代码&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;再进后台的界面，如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180319233039295-650921567.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（3）修改app的名字&lt;/p&gt;
&lt;p&gt; 在apps.py里面配置app的显示名称&lt;/p&gt;
&lt;p&gt; &lt;span&gt;&lt;strong&gt;以users/apps.py为例，其它三个同样操作&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;默认apps.py里面的代码&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.apps &lt;span&gt;import&lt;/span&gt;&lt;span&gt; AppConfig


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UsersConfig(AppConfig):
    name &lt;/span&gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;users&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;修改后：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.apps &lt;span&gt;import&lt;/span&gt;&lt;span&gt; AppConfig


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; UsersConfig(AppConfig):
    name &lt;/span&gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;users&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;还要在users/__init__.py中引用apps.py的配置&lt;/p&gt;
&lt;p&gt;添加代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/__init__.py&lt;/span&gt;
&lt;span&gt;
default_app_config &lt;/span&gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;users.apps.UsersConfig&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其它三个app也同样方法改成显示中文&lt;/p&gt;
&lt;p&gt; 大功告成&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180319235410622-1853397281.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h2&gt;四、完成登录、注册、找回密码和激活验证码功能&lt;/h2&gt;
&lt;h3&gt;&lt;span&gt;4.1.首页和登录页面的配置&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;（1）把html文件中index.html拷贝到templates文件夹内&lt;/p&gt;
&lt;p&gt; （2）新建static目录用来存放静态文件&lt;/p&gt;
&lt;p&gt;在settings.py中设置路径&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
STATICFILES_DIRS =&lt;span&gt; (
    os.path.join(BASE_DIR,&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180320002726863-865536158.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;(3)引用静态文件&lt;/p&gt;
&lt;p&gt; &lt;span&gt;使用ctrl+f查找出所有“../”， 然后ctrl+r 全部替换为“/static/”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180320003214028-1163045413.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;(4)配置静态文件的url&lt;/p&gt;
&lt;p&gt;MxOnline/urls.py中&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; MxOnline/urls.py&lt;/span&gt;

&lt;span&gt;import&lt;/span&gt;&lt;span&gt; xadmin

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.urls &lt;span&gt;import&lt;/span&gt;&lt;span&gt; path

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.views.generic &lt;span&gt;import&lt;/span&gt;&lt;span&gt; TemplateView

urlpatterns &lt;/span&gt;=&lt;span&gt; [
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;xadmin/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, xadmin.site.urls),
    path(&lt;/span&gt;&lt;span&gt;''&lt;/span&gt;, TemplateView.as_view(template_name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(5)登录页面&lt;/p&gt;
&lt;p&gt;把login.html拷贝到templates文件夹下&lt;/p&gt;
&lt;p&gt;&lt;span&gt;使用ctrl+f查找出所有“../”， 然后ctrl+r 全部替换为“/static/”&lt;/span&gt;&lt;/p&gt;
&lt;p&gt; 配置login的url&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; MxOnline/urls.py&lt;/span&gt;
&lt;span&gt;
urlpatterns &lt;/span&gt;=&lt;span&gt; [
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;xadmin/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, xadmin.site.urls),
    path(&lt;/span&gt;&lt;span&gt;''&lt;/span&gt;, TemplateView.as_view(template_name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, TemplateView.as_view(template_name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;更改index.html里面跳转到登录界面的url&lt;/p&gt;
&lt;p&gt;原始样子&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; &amp;lt;a style=&quot;color:white&quot; class=&quot;fr registerbtn&quot; href=&quot;register.html&quot;&amp;gt;注册&amp;lt;/a&amp;gt; &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; &amp;lt;a style=&quot;color:white&quot; class=&quot;fr loginbtn&quot; href=&quot;login.html&quot;&amp;gt;登录&amp;lt;/a&amp;gt;  &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;取消注释，将login.html改为“login/”&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;color:white&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr registerbtn&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;register.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;注册&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;color:white&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr loginbtn&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/login/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;登录&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;现在可以访问index页面，然后点‘’登录”,跳转到登录页面了&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;4.2.用户登录&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;（1）修改login的路由&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.views.generic &lt;span&gt;import&lt;/span&gt;&lt;span&gt; TemplateView
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; users &lt;span&gt;import&lt;/span&gt;&lt;span&gt; views


urlpatterns &lt;/span&gt;=&lt;span&gt; [
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;xadmin/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, xadmin.site.urls),
    path(&lt;/span&gt;&lt;span&gt;''&lt;/span&gt;, TemplateView.as_view(template_name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),name=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
    path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,views.user_login,name = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),     &lt;span&gt;#&lt;/span&gt;&lt;span&gt;修改login路由&lt;/span&gt;
]
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;（2）写login的视图&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;45&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.shortcuts &lt;span&gt;import&lt;/span&gt;&lt;span&gt; render
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.contrib.auth &lt;span&gt;import&lt;/span&gt;&lt;span&gt; authenticate,login

&lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; user_login(request):
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; request.method == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;POST&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 获取用户提交的用户名和密码&lt;/span&gt;
        user_name = request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,None)
        pass_word &lt;/span&gt;= request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,None)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 成功返回user对象,失败None&lt;/span&gt;
        user = authenticate(username=user_name,password=&lt;span&gt;pass_word)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 如果不是null说明验证成功&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; user &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; None:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 登录&lt;/span&gt;
&lt;span&gt;            login(request,user)
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,{&lt;span&gt;'&lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;:&lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户名或密码错误&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;})
    
    &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt; request.method == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;GET&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(3)更改login.html&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('89d58782-c98f-4703-8084-0292d21f985b')&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_89d58782-c98f-4703-8084-0292d21f985b&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_89d58782-c98f-4703-8084-0292d21f985b&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('89d58782-c98f-4703-8084-0292d21f985b',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_89d58782-c98f-4703-8084-0292d21f985b&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
 &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;form &lt;/span&gt;&lt;span&gt;action&lt;/span&gt;&lt;span&gt;=&quot;/login/&quot;&lt;/span&gt;&lt;span&gt; method&lt;/span&gt;&lt;span&gt;=&quot;post&quot;&lt;/span&gt;&lt;span&gt; autocomplete&lt;/span&gt;&lt;span&gt;=&quot;off&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;='hidden' &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;='csrfmiddlewaretoken' &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;='mymQDzHWl2REXIfPMg2mJaLqDfaS1sD5' &lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-group marb20 &quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;用&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;户&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;username&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;account_l&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;手机号/邮箱&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-group marb8 &quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;密&lt;span&gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&lt;/span&gt;码&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;password_l&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;请输入您的密码&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;error btns login-form-tips&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLoginTips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ msg }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;auto-box marb38&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;forgetpwd.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;忘记密码？&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-green&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLoginBtn&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;submit&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;立即登录 &amp;gt; &quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;='hidden' &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;='csrfmiddlewaretoken' &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;='5I2SlleZJOMUX9QbwYLUIAOshdrdpRcy' &lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;
                    {% csrf_token %}
                &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;login.html&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180320223335228-699696671.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;如果用户登录错误，应该有提示错误信息，下面代码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;error btns login-form-tips&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLoginTips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ msg }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180320224207590-829122713.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;（4）修改index.html&lt;/p&gt;
&lt;p&gt;原始index.html的代码&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div  &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot; header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;top&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;服务电话：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;33333333&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;登录后跳转&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;

                        
                         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;color:white&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr registerbtn&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;register.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;注册&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;color:white&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr loginbtn&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/login/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;登录&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;personal&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;user fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;bobby&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;down fr&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/top_down.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;20&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;20&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/image/2016/12/default_big_14.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;userdetail&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;80&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;80&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/image/2016/12/default_big_14.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;django&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;bobby&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;personcenter fl&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;usercenter-info.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;进入个人中心&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/logout/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;退出&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;


                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 我们应该做个验证，当用户已登录状态的时候，显示用户姓名和图像及其个人中心信息&lt;/p&gt;
&lt;p&gt; 如果没有登录，则显示登录和注册&lt;/p&gt;
&lt;p&gt;更改代码如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180320223942989-589091497.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('23f3437d-8535-47a4-a3a2-b7eb8e6dd702')&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_23f3437d-8535-47a4-a3a2-b7eb8e6dd702&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_23f3437d-8535-47a4-a3a2-b7eb8e6dd702&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('23f3437d-8535-47a4-a3a2-b7eb8e6dd702',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_23f3437d-8535-47a4-a3a2-b7eb8e6dd702&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div  &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot; header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;top&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% if request.user.is_authenticated %}
                &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;personal&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;user fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;bobby&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;down fr&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/top_down.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;20&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;20&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/image/2016/12/default_big_14.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;userdetail&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;80&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;80&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/image/2016/12/default_big_14.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;django&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;bobby&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;personcenter fl&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;usercenter-info.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;进入个人中心&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/logout/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;退出&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% else %}
                &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;服务电话：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;33333333&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;b&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;登录后跳转&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;

                        
                         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;color:white&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr registerbtn&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;register.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;注册&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;color:white&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr loginbtn&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/login/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;登录&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        



                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% endif %}
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;index.html&lt;/span&gt;&lt;/div&gt;
&lt;p&gt; （5）增加邮箱登录&lt;/p&gt;
&lt;p&gt; 让用户可以通过邮箱或者用户名都可以登录，用自定义authenticate方法&lt;/p&gt;
&lt;p&gt;这里是继承ModelBackend类来做的验证&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('0e5d6ae3-679d-4b2b-9bf8-f49739ab8463')&quot; readability=&quot;51.5&quot;&gt;&lt;img id=&quot;code_img_closed_0e5d6ae3-679d-4b2b-9bf8-f49739ab8463&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_0e5d6ae3-679d-4b2b-9bf8-f49739ab8463&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('0e5d6ae3-679d-4b2b-9bf8-f49739ab8463',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_0e5d6ae3-679d-4b2b-9bf8-f49739ab8463&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;98&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; ModelBackend:
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
    Authenticates against settings.AUTH_USER_MODEL.
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt; authenticate(self, request, username=None, password=None, **&lt;span&gt;kwargs):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; username &lt;span&gt;is&lt;/span&gt;&lt;span&gt; None:
            username &lt;/span&gt;=&lt;span&gt; kwargs.get(UserModel.USERNAME_FIELD)
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            user &lt;/span&gt;=&lt;span&gt; UserModel._default_manager.get_by_natural_key(username)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; UserModel.DoesNotExist:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; Run the default password hasher once to reduce the timing&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; difference between an existing and a nonexistent user (#20760).&lt;/span&gt;
&lt;span&gt;            UserModel().set_password(password)
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; user.check_password(password) &lt;span&gt;and&lt;/span&gt;&lt;span&gt; self.user_can_authenticate(user):
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; user

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; user_can_authenticate(self, user):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        Reject users with is_active=False. Custom user models that don't have
        that attribute are allowed.
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        is_active &lt;/span&gt;= getattr(user, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;is_active&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, None)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; is_active &lt;span&gt;or&lt;/span&gt; is_active &lt;span&gt;is&lt;/span&gt;&lt;span&gt; None

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; _get_user_permissions(self, user_obj):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; user_obj.user_permissions.all()

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; _get_group_permissions(self, user_obj):
        user_groups_field &lt;/span&gt;= get_user_model()._meta.get_field(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;groups&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        user_groups_query &lt;/span&gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;group__%s&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; %&lt;span&gt; user_groups_field.related_query_name()
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; Permission.objects.filter(**&lt;span&gt;{user_groups_query: user_obj})

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; _get_permissions(self, user_obj, obj, from_name):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        Return the permissions of `user_obj` from `from_name`. `from_name` can
        be either &quot;group&quot; or &quot;user&quot; to return permissions from
        `_get_group_permissions` or `_get_user_permissions` respectively.
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; user_obj.is_active &lt;span&gt;or&lt;/span&gt; user_obj.is_anonymous &lt;span&gt;or&lt;/span&gt; obj &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; None:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; set()

        perm_cache_name &lt;/span&gt;= &lt;span&gt;'&lt;/span&gt;&lt;span&gt;_%s_perm_cache&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; %&lt;span&gt; from_name
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; hasattr(user_obj, perm_cache_name):
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; user_obj.is_superuser:
                perms &lt;/span&gt;=&lt;span&gt; Permission.objects.all()
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
                perms &lt;/span&gt;= getattr(self, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;_get_%s_permissions&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; %&lt;span&gt; from_name)(user_obj)
            perms &lt;/span&gt;= perms.values_list(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;content_type__app_label&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;codename&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).order_by()
            setattr(user_obj, perm_cache_name, {&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%s.%s&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; % (ct, name) &lt;span&gt;for&lt;/span&gt; ct, name &lt;span&gt;in&lt;/span&gt;&lt;span&gt; perms})
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; getattr(user_obj, perm_cache_name)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; get_user_permissions(self, user_obj, obj=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        Return a set of permission strings the user `user_obj` has from their
        `user_permissions`.
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; self._get_permissions(user_obj, obj, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;user&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; get_group_permissions(self, user_obj, obj=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        Return a set of permission strings the user `user_obj` has from the
        groups they belong.
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; self._get_permissions(user_obj, obj, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;group&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; get_all_permissions(self, user_obj, obj=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; user_obj.is_active &lt;span&gt;or&lt;/span&gt; user_obj.is_anonymous &lt;span&gt;or&lt;/span&gt; obj &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; None:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; set()
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; hasattr(user_obj, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;_perm_cache&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;):
            user_obj._perm_cache &lt;/span&gt;=&lt;span&gt; set()
            user_obj._perm_cache.update(self.get_user_permissions(user_obj))
            user_obj._perm_cache.update(self.get_group_permissions(user_obj))
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; user_obj._perm_cache

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; has_perm(self, user_obj, perm, obj=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; user_obj.is_active:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; perm &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self.get_all_permissions(user_obj, obj)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; has_module_perms(self, user_obj, app_label):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        Return True if user_obj has any permissions in the given app_label.
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; user_obj.is_active:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; perm &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self.get_all_permissions(user_obj):
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; perm[:perm.index(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)] ==&lt;span&gt; app_label:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; True
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get_user(self, user_id):
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            user &lt;/span&gt;= UserModel._default_manager.get(pk=&lt;span&gt;user_id)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; UserModel.DoesNotExist:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; None
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; user &lt;span&gt;if&lt;/span&gt; self.user_can_authenticate(user) &lt;span&gt;else&lt;/span&gt; None
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;ModelBackend源码&lt;/span&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.contrib.auth.backends &lt;span&gt;import&lt;/span&gt;&lt;span&gt; ModelBackend
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; UserProfile
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.db.models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; Q

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;邮箱和用户名都可以登录&lt;/span&gt;&lt;span&gt;
#&lt;/span&gt;&lt;span&gt; 基础ModelBackend类，因为它有authenticate方法&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CustomBackend(ModelBackend):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; authenticate(self, request, username=None, password=None, **&lt;span&gt;kwargs):
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 不希望用户存在两个，get只能有一个。两个是get失败的一种原因 Q为使用并集查询&lt;/span&gt;
            user = UserProfile.objects.get(Q(username=username)|Q(email=&lt;span&gt;username))

            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; django的后台中密码加密：所以不能password==password&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; UserProfile继承的AbstractUser中有def check_password(self, raw_password):&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt;&lt;span&gt; user.check_password(password):
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; user
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; Exception as e:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; None
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('36ce46fc-65d8-488e-bc50-004a0ef345c6')&quot; readability=&quot;40&quot;&gt;&lt;img id=&quot;code_img_closed_36ce46fc-65d8-488e-bc50-004a0ef345c6&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_36ce46fc-65d8-488e-bc50-004a0ef345c6&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('36ce46fc-65d8-488e-bc50-004a0ef345c6',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_36ce46fc-65d8-488e-bc50-004a0ef345c6&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;75&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/views.py&lt;/span&gt;

&lt;span&gt;from&lt;/span&gt; django.shortcuts &lt;span&gt;import&lt;/span&gt;&lt;span&gt; render
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.contrib.auth &lt;span&gt;import&lt;/span&gt;&lt;span&gt; authenticate,login

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.contrib.auth.backends &lt;span&gt;import&lt;/span&gt;&lt;span&gt; ModelBackend
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; UserProfile
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.db.models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; Q

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;邮箱和用户名都可以登录&lt;/span&gt;&lt;span&gt;
#&lt;/span&gt;&lt;span&gt; 基础ModelBackend类，因为它有authenticate方法&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CustomBackend(ModelBackend):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; authenticate(self, request, username=None, password=None, **&lt;span&gt;kwargs):
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 不希望用户存在两个，get只能有一个。两个是get失败的一种原因 Q为使用并集查询&lt;/span&gt;
            user = UserProfile.objects.get(Q(username=username)|Q(email=&lt;span&gt;username))

            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; django的后台中密码加密：所以不能password==password&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; UserProfile继承的AbstractUser中有def check_password(self, raw_password):&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt;&lt;span&gt; user.check_password(password):
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; user
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; Exception as e:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; None

&lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; user_login(request):
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; request.method == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;POST&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 获取用户提交的用户名和密码&lt;/span&gt;
        user_name = request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,None)
        pass_word &lt;/span&gt;= request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,None)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 成功返回user对象,失败None&lt;/span&gt;
        user = authenticate(username=user_name,password=&lt;span&gt;pass_word)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 如果不是null说明验证成功&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; user &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; None:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 登录&lt;/span&gt;
&lt;span&gt;            login(request,user)
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,{&lt;span&gt;'&lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;:&lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户名或密码错误&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;})

    &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt; request.method == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;GET&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;users/views.py&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;MxOnline/settings.py添加如下代码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
AUTHENTICATION_BACKENDS =&lt;span&gt; (
    &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;users.views.CustomBackend&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,
)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后通过邮箱也可以实现登录了&lt;/p&gt;
&lt;h3&gt;&lt;span&gt;4.3.用form实现登录&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;（1）把前面views中的user_login()函数改成基于类的形式&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; django.views.generic.base &lt;span&gt;import&lt;/span&gt;&lt;span&gt; View

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoginView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self,request):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; post(self,request):
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 获取用户提交的用户名和密码&lt;/span&gt;
        user_name = request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, None)
        pass_word &lt;/span&gt;= request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, None)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 成功返回user对象,失败None&lt;/span&gt;
        user = authenticate(username=user_name, password=&lt;span&gt;pass_word)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 如果不是null说明验证成功&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; user &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; None:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 登录&lt;/span&gt;
&lt;span&gt;            login(request, user)
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, {&lt;span&gt;'&lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;: &lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户名或密码错误&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;})
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;继承的View类&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('5e6399f6-0be0-41b2-a13d-73b4974a030b')&quot; readability=&quot;56.5&quot;&gt;&lt;img id=&quot;code_img_closed_5e6399f6-0be0-41b2-a13d-73b4974a030b&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_5e6399f6-0be0-41b2-a13d-73b4974a030b&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('5e6399f6-0be0-41b2-a13d-73b4974a030b',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_5e6399f6-0be0-41b2-a13d-73b4974a030b&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;108&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; View:
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
    Intentionally simple parent class for all views. Only implements
    dispatch-by-method and simple sanity checking.
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;

    http_method_names &lt;/span&gt;= [&lt;span&gt;'&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;post&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;put&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;patch&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;delete&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;options&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;trace&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;]

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__init__&lt;/span&gt;(self, **&lt;span&gt;kwargs):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        Constructor. Called in the URLconf; can contain helpful extra
        keyword arguments, and other things.
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; Go through keyword arguments, and either save their values to our&lt;/span&gt;
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; instance, or raise an error.&lt;/span&gt;
        &lt;span&gt;for&lt;/span&gt; key, value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; kwargs.items():
            setattr(self, key, value)

    @classonlymethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; as_view(cls, **&lt;span&gt;initkwargs):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;Main entry point for a request-response process.&lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;for&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; initkwargs:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; cls.http_method_names:
                &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt; TypeError(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;You tried to pass in the %s method name as a &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
                                &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;keyword argument to %s(). Don't do that.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
                                % (key, cls.&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;))
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; hasattr(cls, key):
                &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt; TypeError(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;%s() received an invalid keyword %r. as_view &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
                                &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;only accepts arguments that are already &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
                                &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;attributes of the class.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; % (cls.&lt;span&gt;__name__&lt;/span&gt;&lt;span&gt;, key))

        &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; view(request, *args, **&lt;span&gt;kwargs):
            self &lt;/span&gt;= cls(**&lt;span&gt;initkwargs)
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; hasattr(self, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;get&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;) &lt;span&gt;and&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; hasattr(self, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;):
                self.head &lt;/span&gt;=&lt;span&gt; self.get
            self.request &lt;/span&gt;=&lt;span&gt; request
            self.args &lt;/span&gt;=&lt;span&gt; args
            self.kwargs &lt;/span&gt;=&lt;span&gt; kwargs
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; self.dispatch(request, *args, **&lt;span&gt;kwargs)
        view.view_class &lt;/span&gt;=&lt;span&gt; cls
        view.view_initkwargs &lt;/span&gt;=&lt;span&gt; initkwargs

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; take name and docstring from class&lt;/span&gt;
        update_wrapper(view, cls, updated=&lt;span&gt;())

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; and possible attributes set by decorators&lt;/span&gt;
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; like csrf_exempt from dispatch&lt;/span&gt;
        update_wrapper(view, cls.dispatch, assigned=&lt;span&gt;())
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; view

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; dispatch(self, request, *args, **&lt;span&gt;kwargs):
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; Try to dispatch to the right method; if a method doesn't exist,&lt;/span&gt;
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; defer to the error handler. Also defer to the error handler if the&lt;/span&gt;
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; request method isn't on the approved list.&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; request.method.lower() &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self.http_method_names:
            handler &lt;/span&gt;=&lt;span&gt; getattr(self, request.method.lower(), self.http_method_not_allowed)
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            handler &lt;/span&gt;=&lt;span&gt; self.http_method_not_allowed
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; handler(request, *args, **&lt;span&gt;kwargs)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; http_method_not_allowed(self, request, *args, **&lt;span&gt;kwargs):
        logger.warning(
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Method Not Allowed (%s): %s&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, request.method, request.path,
            extra&lt;/span&gt;={&lt;span&gt;'&lt;/span&gt;&lt;span&gt;status_code&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;: 405, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;request&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;: request}
        )
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; HttpResponseNotAllowed(self._allowed_methods())

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; options(self, request, *args, **&lt;span&gt;kwargs):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;Handle responding to requests for the OPTIONS HTTP verb.&lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        response &lt;/span&gt;=&lt;span&gt; HttpResponse()
        response[&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Allow&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.join(self._allowed_methods())
        response[&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Content-Length&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;] = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt;&lt;span&gt; response

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; _allowed_methods(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; [m.upper() &lt;span&gt;for&lt;/span&gt; m &lt;span&gt;in&lt;/span&gt; self.http_method_names &lt;span&gt;if&lt;/span&gt; hasattr(self, m)]
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View类源码参考&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;基于类的urls配置&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; users.views &lt;span&gt;import&lt;/span&gt;&lt;span&gt; LoginView

　　path(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,LoginView.as_view(),name = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;),
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;（2）users下新建form.py文件&lt;/p&gt;
&lt;p&gt; 代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/forms.py&lt;/span&gt;

&lt;span&gt;from&lt;/span&gt; django &lt;span&gt;import&lt;/span&gt;&lt;span&gt; forms

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 登录表单验证&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoginForm(forms.Form):
    &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 用户名密码不能为空&lt;/span&gt;
    username = forms.CharField(required=&lt;span&gt;True)
    password &lt;/span&gt;= forms.CharField(required=True,min_length=5)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;（3）定义好forms后利用它来做验证，并完善错误提示信息&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;49&quot;&gt;
&lt;pre&gt;
&lt;span&gt;from&lt;/span&gt; .forms &lt;span&gt;import&lt;/span&gt;&lt;span&gt; LoginForm

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoginView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self,request):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; post(self,request):
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 实例化&lt;/span&gt;
        login_form =&lt;span&gt; LoginForm(request.POST)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; login_form.is_valid():
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 获取用户提交的用户名和密码&lt;/span&gt;
            user_name = request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, None)
            pass_word &lt;/span&gt;= request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, None)
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 成功返回user对象,失败None&lt;/span&gt;
            user = authenticate(username=user_name, password=&lt;span&gt;pass_word)
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 如果不是null说明验证成功&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; user &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; None:
                &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 登录&lt;/span&gt;
&lt;span&gt;                login(request, user)
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 只有当用户名或密码不存在时，才返回错误信息到前端&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, {&lt;span&gt;'&lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;: &lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户名或密码错误&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login_form&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:login_form})
            
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; form.is_valid（）已经判断不合法了，所以这里不需要再返回错误信息到前端了&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,{&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login_form&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;:login_form})
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('e57aa52e-f967-47d9-8071-3e532cc3fdd2')&quot; readability=&quot;42.5&quot;&gt;&lt;img id=&quot;code_img_closed_e57aa52e-f967-47d9-8071-3e532cc3fdd2&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_e57aa52e-f967-47d9-8071-3e532cc3fdd2&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('e57aa52e-f967-47d9-8071-3e532cc3fdd2',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_e57aa52e-f967-47d9-8071-3e532cc3fdd2&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;80&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; users/views.py&lt;/span&gt;

&lt;span&gt;from&lt;/span&gt; django.shortcuts &lt;span&gt;import&lt;/span&gt;&lt;span&gt; render
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.contrib.auth &lt;span&gt;import&lt;/span&gt;&lt;span&gt; authenticate,login

&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.contrib.auth.backends &lt;span&gt;import&lt;/span&gt;&lt;span&gt; ModelBackend
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; UserProfile
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.db.models &lt;span&gt;import&lt;/span&gt;&lt;span&gt; Q
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; django.views.generic.base &lt;span&gt;import&lt;/span&gt;&lt;span&gt; View
&lt;/span&gt;&lt;span&gt;from&lt;/span&gt; .forms &lt;span&gt;import&lt;/span&gt;&lt;span&gt; LoginForm

&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;邮箱和用户名都可以登录&lt;/span&gt;&lt;span&gt;
#&lt;/span&gt;&lt;span&gt; 基础ModelBackend类，因为它有authenticate方法&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CustomBackend(ModelBackend):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; authenticate(self, request, username=None, password=None, **&lt;span&gt;kwargs):
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 不希望用户存在两个，get只能有一个。两个是get失败的一种原因 Q为使用并集查询&lt;/span&gt;
            user = UserProfile.objects.get(Q(username=username)|Q(email=&lt;span&gt;username))

            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; django的后台中密码加密：所以不能password==password&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; UserProfile继承的AbstractUser中有def check_password(self, raw_password):&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt;&lt;span&gt; user.check_password(password):
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; user
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; Exception as e:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; None


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; LoginView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self,request):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; post(self,request):
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 实例化&lt;/span&gt;
        login_form =&lt;span&gt; LoginForm(request.POST)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; login_form.is_valid():
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 获取用户提交的用户名和密码&lt;/span&gt;
            user_name = request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;username&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, None)
            pass_word &lt;/span&gt;= request.POST.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;password&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, None)
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 成功返回user对象,失败None&lt;/span&gt;
            user = authenticate(username=user_name, password=&lt;span&gt;pass_word)
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 如果不是null说明验证成功&lt;/span&gt;
            &lt;span&gt;if&lt;/span&gt; user &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; None:
                &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 登录&lt;/span&gt;
&lt;span&gt;                login(request, user)
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;index.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 只有当用户名或密码不存在时，才返回错误信息到前端&lt;/span&gt;
            &lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, {&lt;span&gt;'&lt;/span&gt;&lt;span&gt;msg&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;: &lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户名或密码错误&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login_form&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:login_form})

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; form.is_valid（）已经判断不合法了，所以这里不需要再返回错误信息到前端了&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,{&lt;span&gt;'&lt;/span&gt;&lt;span&gt;login_form&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;:login_form})
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;views.py&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;（4）完善login.html的错误提示信息&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-group marb20 {% if login_form.errors.username %}errorput{% endif %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;用&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;户&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;username&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;account_l&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;手机号/邮箱&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-group marb8 {% if login_form.errors.username %}errorput{% endif %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;密&lt;span&gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&lt;/span&gt;码&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;password_l&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;请输入您的密码&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;error btns login-form-tips&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLoginTips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% for key,error in login_form.errors.items %}
                            {{ error }}
                        {% endfor %}
                        {{ msg }}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;主要修改两处&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180321002120135-778108352.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('ae298d5b-dab8-4542-bb8f-2ef1a97662d5')&quot; readability=&quot;33.5&quot;&gt;&lt;img id=&quot;code_img_closed_ae298d5b-dab8-4542-bb8f-2ef1a97662d5&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_ae298d5b-dab8-4542-bb8f-2ef1a97662d5&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('ae298d5b-dab8-4542-bb8f-2ef1a97662d5',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_ae298d5b-dab8-4542-bb8f-2ef1a97662d5&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;renderer&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;webkit&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;http-equiv&lt;/span&gt;&lt;span&gt;=&quot;X-UA-Compatible&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;IE=Edge,chrome=1&quot;&lt;/span&gt; &lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕学在线网登录&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text/css&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/static/css/reset.css&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text/css&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/static/css/login.css&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;dialog&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsDialog&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;提示弹出框&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;successbox dialogbox&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsSuccessTips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;成功提交&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;close jsCloseDialog&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/dig_close.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;cont&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;您的需求提交成功！&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div  &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;noactivebox dialogbox&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsUnactiveForm&quot;&lt;/span&gt; &lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;邮件验证提示&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;close jsCloseDialog&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/dig_close.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/send.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;我们已经向您的邮箱&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;green&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsEmailToActive&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;12@13.com&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;发送了邮件，&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;br&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;为保证您的账号安全，请及时验证邮箱&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;a&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsGoToEmail&quot;&lt;/span&gt;&lt;span&gt; target&lt;/span&gt;&lt;span&gt;=&quot;_blank&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;http://mail.qq.com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;去邮箱验证&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;zy_success upmove&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;display: none;&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;sendE2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;没收到，您可以查看您的垃圾邮件和被过滤邮件，也可以再次发送验证邮件（&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;c5c&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;60s&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;）&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;sendE&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;没收到，您可以查看您的垃圾邮件和被过滤邮件，&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;br&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;也可以&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;c5c green&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsSenEmailAgin&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;cursor: pointer;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;再次发送验证邮件&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bg&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;dialogBg&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;header&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;c-box fff-box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp header-box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl hd-tips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕学在线网，在线学习平台！&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr hd-bar&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;服务电话：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;33333333&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;login.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;[登录]&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;register.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;[注册]&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;header&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;c-box bg-box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;login-box clearfix&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;hd-login clearfix&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;index-logo&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;index.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;用户登录&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;index-font&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;index.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;回到首页&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl slide&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;imgslide&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;imgs&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;483&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;472&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/mysql.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;483&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;472&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/mysql.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;483&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;472&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/mysql.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;unslider-arrow prev&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;unslider-arrow next&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl form-box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;帐号登录&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt; 
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;form &lt;/span&gt;&lt;span&gt;action&lt;/span&gt;&lt;span&gt;=&quot;/login/&quot;&lt;/span&gt;&lt;span&gt; method&lt;/span&gt;&lt;span&gt;=&quot;post&quot;&lt;/span&gt;&lt;span&gt; autocomplete&lt;/span&gt;&lt;span&gt;=&quot;off&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;='hidden' &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;='csrfmiddlewaretoken' &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;='mymQDzHWl2REXIfPMg2mJaLqDfaS1sD5' &lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-group marb20 {% if login_form.errors.username %}errorput{% endif %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;用&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;户&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;username&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;account_l&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;手机号/邮箱&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-group marb8 {% if login_form.errors.username %}errorput{% endif %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;密&lt;span&gt;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&amp;amp;nbsp;&lt;/span&gt;码&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;password_l&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;password&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;请输入您的密码&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;error btns login-form-tips&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLoginTips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% for key,error in login_form.errors.items %}
                            {{ error }}
                        {% endfor %}
                        {{ msg }}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;auto-box marb38&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;forgetpwd.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;忘记密码？&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn btn-green&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLoginBtn&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;submit&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;立即登录 &amp;gt; &quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;='hidden' &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;='csrfmiddlewaretoken' &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;='5I2SlleZJOMUX9QbwYLUIAOshdrdpRcy' &lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;
                    {% csrf_token %}
                &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;form-p&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;没有慕学在线网帐号？&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;register.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;[立即注册]&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/js/jquery.min.js&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/js/unslider.js&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;/static/js/login.js&quot;&lt;/span&gt;&lt;span&gt;  type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;login.html&lt;/span&gt;&lt;/div&gt;
&lt;p&gt; 显示效果，当不输入用户名，密码小与五位数的时候的提示信息如下：&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180321000905894-1147195683.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;&lt;strong&gt;上一篇：&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/derek1184405959/p/8590360.html&quot;&gt;&lt;span&gt;Django+xadmin打造在线教育平台（一）&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Tue, 20 Mar 2018 16:32:00 +0000</pubDate>
<dc:creator>zhang_derek</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/derek1184405959/p/8592800.html</dc:identifier>
</item>
<item>
<title>Python创建容器和集合之源码分析 - 小兵千睿</title>
<link>http://www.cnblogs.com/xiaobingqianrui/p/8613100.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xiaobingqianrui/p/8613100.html</guid>
<description>&lt;p&gt;　　_collections_abc.py文件中提供了许多抽象基类，这些类将集合分解成许多互相独立的属性集&lt;br/&gt;　　__all__ = [&quot;Awaitable&quot;, &quot;Coroutine&quot;,&lt;br/&gt;           　　&quot;AsyncIterable&quot;, &quot;AsyncIterator&quot;, &quot;AsyncGenerator&quot;,&lt;br/&gt;          　　 &quot;Hashable&quot;, &quot;Iterable&quot;, &quot;Iterator&quot;, &quot;Generator&quot;, &quot;Reversible&quot;,&lt;br/&gt;           　　&quot;Sized&quot;, &quot;Container&quot;, &quot;Callable&quot;, &quot;Collection&quot;,&lt;br/&gt;           　　&quot;Set&quot;, &quot;MutableSet&quot;,&lt;br/&gt;           　　&quot;Mapping&quot;, &quot;MutableMapping&quot;,&lt;br/&gt;           　　&quot;MappingView&quot;, &quot;KeysView&quot;, &quot;ItemsView&quot;, &quot;ValuesView&quot;,&lt;br/&gt;           　　&quot;Sequence&quot;, &quot;MutableSequence&quot;,&lt;br/&gt;           　　&quot;ByteString&quot;,&lt;br/&gt;           　　]&lt;/p&gt;
&lt;p&gt;　　接下来对__all__中的部分基类作说明&lt;/p&gt;

&lt;p&gt;　　以下基类都包含_check_methods方法，检查类中是否实现特定函数&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;def&lt;/span&gt; _check_methods(C, *&lt;span&gt;methods):
    mro &lt;/span&gt;= C.&lt;span&gt;__mro__&lt;/span&gt;
    &lt;span&gt;for&lt;/span&gt; method &lt;span&gt;in&lt;/span&gt;&lt;span&gt; methods:
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; B &lt;span&gt;in&lt;/span&gt;&lt;span&gt; mro:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; method &lt;span&gt;in&lt;/span&gt; B.&lt;span&gt;__dict__&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; B.&lt;span&gt;__dict__&lt;/span&gt;[method] &lt;span&gt;is&lt;/span&gt;&lt;span&gt; None:
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;
        &lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; True
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;1. Hashable&lt;/h2&gt;
&lt;p&gt;　　Hashable基类要求子类实现__hash__方法，hash函数需要使用这个方法，如果这个方法被实现了就意味着当前对象的不可变的&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt; Hashable(metaclass=&lt;span&gt;ABCMeta):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__hash__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; 0
 
    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__subclasshook__&lt;/span&gt;&lt;span&gt;(cls, C):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; cls &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Hashable:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _check_methods(C, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__hash__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; NotImplemented
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;2. Iterable&lt;/h2&gt;
&lt;p&gt;　　Iterable基类要求子类实现__iter__方法， for语句，生成器表达式和iter()都需要使用这个函数　&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt; Iterable(metaclass=&lt;span&gt;ABCMeta):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; False:
            &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt;&lt;span&gt; None

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__subclasshook__&lt;/span&gt;&lt;span&gt;(cls, C):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; cls &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Iterable:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _check_methods(C, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; NotImplemented
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;3. Iterator&lt;/h2&gt;
&lt;p&gt;　　Iterator基类继承Iterable类，要求子类实现__next__方法，迭代对象的实现需要实现该函数&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Iterator(Iterable):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__next__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Return the next item from the iterator. When exhausted, raise StopIteration&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;raise&lt;/span&gt;&lt;span&gt; StopIteration

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__subclasshook__&lt;/span&gt;&lt;span&gt;(cls, C):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; cls &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Iterator:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _check_methods(C, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;'&lt;/span&gt;&lt;span&gt;__next__&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; NotImpleented
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;4. Sized&lt;/h2&gt;
&lt;p&gt;　　Sized基类要求子类实现__len__方法，len()函数需要使用这个方法，它也很稳妥地实现了__bool__方法&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt; Sized(metaclass=&lt;span&gt;ABCMeta):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__len__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; 0

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__subclasshook__&lt;/span&gt;&lt;span&gt;(cls, C):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; cls &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Sized:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _check_methods(C, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__len__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; NotImplemented
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;5. Container&lt;/h2&gt;
&lt;p&gt;　　Container基类需要子类实现__contains__()方法，这个方法实现了in运算符&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt; Container(metaclass=&lt;span&gt;ABCMeta):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;(self, x):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__subclasshook__&lt;/span&gt;&lt;span&gt;(cls, C):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; cls &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Container:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _check_methods(C, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; NotImplemented
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;6. Collection&lt;/h2&gt;
&lt;p&gt;　　Collection类多继承Sized、Iterable、Container类&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Collection(Sized, Iterable, Container):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__subclasshook__&lt;/span&gt;&lt;span&gt;(cls, C):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; cls &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Collection:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _check_methods(C,  &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__len__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; NotImplemented
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;7. Callable&lt;/h2&gt;
&lt;p&gt;　　Callable基类需要子类实现__call__方法，可调用对象的实现需要使用__call__方法&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt; Callable(metaclass=&lt;span&gt;ABCMeta):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__call__&lt;/span&gt;(self, *args, **&lt;span&gt;kwds):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__subclasshook__&lt;/span&gt;&lt;span&gt;(cls, C):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; cls &lt;span&gt;is&lt;/span&gt;&lt;span&gt; Callable:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; _check_methods(C, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;__call__&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; NotImplemented
&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;1. class Set(Collection)&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;49.5&quot;&gt;&lt;img id=&quot;code_img_closed_040d1a9a-dfaa-490d-8ff2-ad8cb57b2e15&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_040d1a9a-dfaa-490d-8ff2-ad8cb57b2e15&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_040d1a9a-dfaa-490d-8ff2-ad8cb57b2e15&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;94&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Set(Collection):

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;A set is a finite, iterable container.

    This class provides concrete generic implementations of all
    methods except for __contains__, __iter__ and __len__.

    To override the comparisons (presumably for speed, as the
    semantics are fixed), redefine __le__ and __ge__,
    then the other operations will automatically follow suit.
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;

    &lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__le__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; len(self) &amp;gt;&lt;span&gt; len(other):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; elem &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; elem &lt;span&gt;not&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; True

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__lt__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; len(self) &amp;lt; len(other) &lt;span&gt;and&lt;/span&gt; self.&lt;span&gt;__le__&lt;/span&gt;&lt;span&gt;(other)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__gt__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; len(self) &amp;gt; len(other) &lt;span&gt;and&lt;/span&gt; self.&lt;span&gt;__ge__&lt;/span&gt;&lt;span&gt;(other)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__ge__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; len(self) &amp;lt;&lt;span&gt; len(other):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; elem &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; elem &lt;span&gt;not&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; True

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__eq__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; len(self) == len(other) &lt;span&gt;and&lt;/span&gt; self.&lt;span&gt;__le__&lt;/span&gt;&lt;span&gt;(other)

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; _from_iterable(cls, it):
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;Construct an instance of the class from any iterable input.

        Must override this method if the class constructor signature
        does not accept an iterable for an input.
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt;&lt;span&gt; cls(it)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__and__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Iterable):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; self._from_iterable(value &lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt; other &lt;span&gt;if&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self)

    &lt;/span&gt;&lt;span&gt;__rand__&lt;/span&gt; = &lt;span&gt;__and__&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt;&lt;span&gt; isdisjoint(self, other):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Return True if two sets have a null intersection.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; True

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__or__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Iterable):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        chain &lt;/span&gt;= (e &lt;span&gt;for&lt;/span&gt; s &lt;span&gt;in&lt;/span&gt; (self, other) &lt;span&gt;for&lt;/span&gt; e &lt;span&gt;in&lt;/span&gt;&lt;span&gt; s)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self._from_iterable(chain)

    &lt;/span&gt;&lt;span&gt;__ror__&lt;/span&gt; = &lt;span&gt;__or__&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt; &lt;span&gt;__sub__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Iterable):
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
            other &lt;/span&gt;=&lt;span&gt; self._from_iterable(other)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; self._from_iterable(value &lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self
                                   &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; value &lt;span&gt;not&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__rsub__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Iterable):
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
            other &lt;/span&gt;=&lt;span&gt; self._from_iterable(other)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; self._from_iterable(value &lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other
                                   &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; value &lt;span&gt;not&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__xor__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Set):
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Iterable):
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
            other &lt;/span&gt;=&lt;span&gt; self._from_iterable(other)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; (self - other) | (other -&lt;span&gt; self)

    &lt;/span&gt;&lt;span&gt;__rxor__&lt;/span&gt; = &lt;span&gt;__xor__&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt;&lt;span&gt; _hash(self):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;Compute the hash value of a set.

        Note that we don't define __hash__: not all sets are hashable.
        But if you define a hashable set type, its __hash__ should
        call this function.

        This must be compatible __eq__.

        All sets ought to compare equal if they contain the same
        elements, regardless of how they are implemented, and
        regardless of the order of the elements; so there's not much
        freedom for __eq__ or __hash__.  We match the algorithm used
        by the built-in frozenset type.
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        MAX &lt;/span&gt;=&lt;span&gt; sys.maxsize
        MASK &lt;/span&gt;= 2 * MAX + 1&lt;span&gt;
        n &lt;/span&gt;=&lt;span&gt; len(self)
        h &lt;/span&gt;= 1927868237 * (n + 1&lt;span&gt;)
        h &lt;/span&gt;&amp;amp;=&lt;span&gt; MASK
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; x &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self:
            hx &lt;/span&gt;=&lt;span&gt; hash(x)
            h &lt;/span&gt;^= (hx ^ (hx &amp;lt;&amp;lt; 16) ^ 89869747)  * 3644798167&lt;span&gt;
            h &lt;/span&gt;&amp;amp;=&lt;span&gt; MASK
        h &lt;/span&gt;= h * 69069 + 907133923&lt;span&gt;
        h &lt;/span&gt;&amp;amp;=&lt;span&gt; MASK
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; h &amp;gt;&lt;span&gt; MAX:
            h &lt;/span&gt;-= MASK + 1
        &lt;span&gt;if&lt;/span&gt; h == -1&lt;span&gt;:
            h &lt;/span&gt;= 590923713
        &lt;span&gt;return&lt;/span&gt; h
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;　　通过源码看到Set类实现了用于set类型的比较操作和算术运算符的实现：&lt;/p&gt;
&lt;p&gt;　　__le__　　__lt__　　__gt__　　__ge__　　__eq__&lt;/p&gt;
&lt;p&gt;　　_from_iterable(如果类的构造函数不接受iterable作为参数的话必须重写该方法)&lt;/p&gt;
&lt;p&gt;　　__and__　　__rand__　　__or__　　　__ror__ &lt;/p&gt;
&lt;p&gt;　　__sub__　　__rsub__　　__xor__　　__rxor__&lt;/p&gt;
&lt;p&gt;　　_hash(__hash__()应该调用该函数)&lt;/p&gt;
&lt;h2&gt;2. class MutableSet(Set)&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40.5&quot;&gt;&lt;img id=&quot;code_img_closed_977e6b85-6b3c-481a-b6a6-91f783babf74&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_977e6b85-6b3c-481a-b6a6-91f783babf74&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_977e6b85-6b3c-481a-b6a6-91f783babf74&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;76&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; MutableSet(Set):
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;A mutable set is a finite, iterable container.

    This class provides concrete generic implementations of all
    methods except for __contains__, __iter__, __len__,
    add(), and discard().

    To override the comparisons (presumably for speed, as the
    semantics are fixed), all you have to do is redefine __le__ and
    then the other operations will automatically follow suit.
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;

    &lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; add(self, value):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;Add an element.&lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;raise&lt;/span&gt;&lt;span&gt; NotImplementedError

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; discard(self, value):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;Remove an element.  Do not raise an exception if absent.&lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;raise&lt;/span&gt;&lt;span&gt; NotImplementedError

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; remove(self, value):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;Remove an element. If not a member, raise a KeyError.&lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; value &lt;span&gt;not&lt;/span&gt; &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self:
            &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; KeyError(value)
        self.discard(value)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; pop(self):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;Return the popped value.  Raise KeyError if empty.&lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;
        it &lt;/span&gt;=&lt;span&gt; iter(self)
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            value &lt;/span&gt;=&lt;span&gt; next(it)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; StopIteration:
            &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; KeyError
        self.discard(value)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; value

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; clear(self):
        &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;This is slow (creates N new iterators!) but effective.&lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; True:
                self.pop()
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; KeyError:
            &lt;/span&gt;&lt;span&gt;pass&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt; &lt;span&gt;__ior__&lt;/span&gt;&lt;span&gt;(self, it):
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; it:
            self.add(value)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iand__&lt;/span&gt;&lt;span&gt;(self, it):
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt; (self -&lt;span&gt; it):
            self.discard(value)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__ixor__&lt;/span&gt;&lt;span&gt;(self, it):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; it &lt;span&gt;is&lt;/span&gt;&lt;span&gt; self:
            self.clear()
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(it, Set):
                it &lt;/span&gt;=&lt;span&gt; self._from_iterable(it)
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; it:
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self:
                    self.discard(value)
                &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
                    self.add(value)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__isub__&lt;/span&gt;&lt;span&gt;(self, it):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; it &lt;span&gt;is&lt;/span&gt;&lt;span&gt; self:
            self.clear()
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; it:
                self.discard(value)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; self
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;　　子类需要实现两个@abstractmethod方法，add和discard&lt;/p&gt;
&lt;p&gt;　　具体方法有：&lt;/p&gt;
&lt;p&gt;　　add　　discard　　remove　　pop　　clear　　&lt;/p&gt;
&lt;p&gt;　　__ior__　　__ixor__　　__isub__&lt;/p&gt;
&lt;h2&gt;3. class Mapping(Collection)&lt;/h2&gt;
&lt;p&gt;　　首先通过源码看一下KeysView、ItemsView和ValuesView的实现&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;&lt;img id=&quot;code_img_closed_eb49ae72-3277-4c9e-801e-73ec331f3194&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_eb49ae72-3277-4c9e-801e-73ec331f3194&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_eb49ae72-3277-4c9e-801e-73ec331f3194&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;71&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; MappingView(Sized):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; = &lt;span&gt;'&lt;/span&gt;&lt;span&gt;_mapping&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__init__&lt;/span&gt;&lt;span&gt;(self, mapping):
        self._mapping &lt;/span&gt;=&lt;span&gt; mapping

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__len__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; len(self._mapping)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__repr__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;{0.__class__.__name__}({0._mapping!r})&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.format(self)


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; KeysView(MappingView, Set):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; _from_iterable(self, it):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; set(it)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;(self, key):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self._mapping

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt; &lt;span&gt;from&lt;/span&gt;&lt;span&gt; self._mapping


&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; ItemsView(MappingView, Set):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @classmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; _from_iterable(self, it):
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; set(it)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;(self, item):
        key, value &lt;/span&gt;=&lt;span&gt; item
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            v &lt;/span&gt;=&lt;span&gt; self._mapping[key]
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; KeyError:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; v &lt;span&gt;is&lt;/span&gt; value &lt;span&gt;or&lt;/span&gt; v ==&lt;span&gt; value

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self._mapping:
            &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt;&lt;span&gt; (key, self._mapping[key])

&lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt; ValuesView(MappingView):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;(self, value):
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self._mapping:
            v &lt;/span&gt;=&lt;span&gt; self._mapping[key]
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; v &lt;span&gt;is&lt;/span&gt; value &lt;span&gt;or&lt;/span&gt; v ==&lt;span&gt; value:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; True
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self._mapping:
            &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt; self._mapping[key]
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;　　Mapping源码实现&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37.5&quot;&gt;&lt;img id=&quot;code_img_closed_3f8c1dfb-e9b5-4985-82ff-ad72e903b9b3&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_3f8c1dfb-e9b5-4985-82ff-ad72e903b9b3&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_3f8c1dfb-e9b5-4985-82ff-ad72e903b9b3&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;70&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Mapping(Collection):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;A Mapping is a generic container for associating key/value
    pairs.

    This class provides concrete generic implementations of all
    methods except for __getitem__, __iter__, and __len__.

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__getitem__&lt;/span&gt;&lt;span&gt;(self, key):
        &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; KeyError

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; get(self, key, default=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D.get(k[,d]) -&amp;gt; D[k] if k in D, else d.  d defaults to None.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self[key]
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; KeyError:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; default

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;(self, key):
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            self[key]
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; KeyError:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; True

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; keys(self):
        &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;D.keys() -&amp;gt; a set-like object providing a view on D's keys&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt;&lt;span&gt; KeysView(self)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; items(self):
        &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;D.items() -&amp;gt; a set-like object providing a view on D's items&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ItemsView(self)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; values(self):
        &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;D.values() -&amp;gt; an object providing a view on D's values&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt;&lt;span&gt; ValuesView(self)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__eq__&lt;/span&gt;&lt;span&gt;(self, other):
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; isinstance(other, Mapping):
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; NotImplemented
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; dict(self.items()) ==&lt;span&gt; dict(other.items())

    &lt;/span&gt;&lt;span&gt;__reversed__&lt;/span&gt; = None
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;h2&gt;4. class MutableMapping(Mapping)&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;&lt;img id=&quot;code_img_closed_dc985897-4273-446b-a078-f8323ab6584d&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_dc985897-4273-446b-a078-f8323ab6584d&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_dc985897-4273-446b-a078-f8323ab6584d&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;95&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; MutableMapping(Mapping):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;A MutableMapping is a generic container for associating
    key/value pairs.

    This class provides concrete generic implementations of all
    methods except for __getitem__, __setitem__, __delitem__,
    __iter__, and __len__.

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__setitem__&lt;/span&gt;&lt;span&gt;(self, key, value):
        &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; KeyError

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__delitem__&lt;/span&gt;&lt;span&gt;(self, key):
        &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; KeyError

    &lt;/span&gt;&lt;span&gt;__marker&lt;/span&gt; =&lt;span&gt; object()

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; pop(self, key, default=&lt;span&gt;__marker&lt;/span&gt;&lt;span&gt;):
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;D.pop(k[,d]) -&amp;gt; v, remove specified key and return the corresponding value.
          If key is not found, d is returned if given, otherwise KeyError is raised.
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            value &lt;/span&gt;=&lt;span&gt; self[key]
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; KeyError:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; default &lt;span&gt;is&lt;/span&gt; self.&lt;span&gt;__marker&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;
            &lt;span&gt;return&lt;/span&gt;&lt;span&gt; default
        &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;del&lt;/span&gt;&lt;span&gt; self[key]
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; value

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; popitem(self):
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;D.popitem() -&amp;gt; (k, v), remove and return some (key, value) pair
           as a 2-tuple; but raise KeyError if D is empty.
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            key &lt;/span&gt;=&lt;span&gt; next(iter(self))
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; StopIteration:
            &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; KeyError
        value &lt;/span&gt;=&lt;span&gt; self[key]
        &lt;/span&gt;&lt;span&gt;del&lt;/span&gt;&lt;span&gt; self[key]
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; key, value

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; clear(self):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D.clear() -&amp;gt; None.  Remove all items from D.&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; True:
                self.popitem()
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; KeyError:
            &lt;/span&gt;&lt;span&gt;pass&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt; update(*args, **&lt;span&gt;kwds):
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt; D.update([E, ]**F) -&amp;gt; None.  Update D from mapping/iterable E and F.
            If E present and has a .keys() method, does:     for k in E: D[k] = E[k]
            If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v
            In either case, this is followed by: for k, v in F.items(): D[k] = v
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; &lt;span&gt;not&lt;/span&gt;&lt;span&gt; args:
            &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt; TypeError(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;descriptor 'update' of 'MutableMapping' object &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;
                            &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;needs an argument&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        self, &lt;/span&gt;*args =&lt;span&gt; args
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; len(args) &amp;gt; 1&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt; TypeError(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;update expected at most 1 arguments, got %d&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; %&lt;span&gt;
                            len(args))
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; args:
            other &lt;/span&gt;=&lt;span&gt; args[0]
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; isinstance(other, Mapping):
                &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other:
                    self[key] &lt;/span&gt;=&lt;span&gt; other[key]
            &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt; hasattr(other, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;keys&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;):
                &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; key &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other.keys():
                    self[key] &lt;/span&gt;=&lt;span&gt; other[key]
            &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; key, value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; other:
                    self[key] &lt;/span&gt;=&lt;span&gt; value
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; key, value &lt;span&gt;in&lt;/span&gt;&lt;span&gt; kwds.items():
            self[key] &lt;/span&gt;=&lt;span&gt; value

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; setdefault(self, key, default=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;D.setdefault(k[,d]) -&amp;gt; D.get(k,d), also set D[k]=d if k not in D&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; self[key]
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; KeyError:
            self[key] &lt;/span&gt;=&lt;span&gt; default
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; default
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;h2&gt;5. class Sequence(Reversible, Collection)&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38.5&quot;&gt;&lt;img id=&quot;code_img_closed_3d39f10c-63a6-4c5e-8a08-ea6915261c97&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_3d39f10c-63a6-4c5e-8a08-ea6915261c97&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_3d39f10c-63a6-4c5e-8a08-ea6915261c97&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;72&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; Sequence(Reversible, Collection):

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;All the operations on a read-only sequence.

    Concrete subclasses must override __new__ or __init__,
    __getitem__, and __len__.
    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;

    &lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__getitem__&lt;/span&gt;&lt;span&gt;(self, index):
        &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; IndexError

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iter__&lt;/span&gt;&lt;span&gt;(self):
        i &lt;/span&gt;=&lt;span&gt; 0
        &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; True:
                v &lt;/span&gt;=&lt;span&gt; self[i]
                &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt;&lt;span&gt; v
                i &lt;/span&gt;+= 1
        &lt;span&gt;except&lt;/span&gt;&lt;span&gt; IndexError:
            &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt; &lt;span&gt;__contains__&lt;/span&gt;&lt;span&gt;(self, value):
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; v &lt;span&gt;in&lt;/span&gt;&lt;span&gt; self:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; v &lt;span&gt;is&lt;/span&gt; value &lt;span&gt;or&lt;/span&gt; v ==&lt;span&gt; value:
                &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; True
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; False

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__reversed__&lt;/span&gt;&lt;span&gt;(self):
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; i &lt;span&gt;in&lt;/span&gt;&lt;span&gt; reversed(range(len(self))):
            &lt;/span&gt;&lt;span&gt;yield&lt;/span&gt;&lt;span&gt; self[i]

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; index(self, value, start=0, stop=&lt;span&gt;None):
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;S.index(value, [start, [stop]]) -&amp;gt; integer -- return first index of value.
           Raises ValueError if the value is not present.
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;
        &lt;span&gt;if&lt;/span&gt; start &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; None &lt;span&gt;and&lt;/span&gt; start &amp;lt;&lt;span&gt; 0:
            start &lt;/span&gt;= max(len(self) +&lt;span&gt; start, 0)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; stop &lt;span&gt;is&lt;/span&gt; &lt;span&gt;not&lt;/span&gt; None &lt;span&gt;and&lt;/span&gt; stop &amp;lt;&lt;span&gt; 0:
            stop &lt;/span&gt;+=&lt;span&gt; len(self)

        i &lt;/span&gt;=&lt;span&gt; start
        &lt;/span&gt;&lt;span&gt;while&lt;/span&gt; stop &lt;span&gt;is&lt;/span&gt; None &lt;span&gt;or&lt;/span&gt; i &amp;lt;&lt;span&gt; stop:
            &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; self[i] ==&lt;span&gt; value:
                    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; i
            &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; IndexError:
                &lt;/span&gt;&lt;span&gt;break&lt;/span&gt;&lt;span&gt;
            i &lt;/span&gt;+= 1
        &lt;span&gt;raise&lt;/span&gt;&lt;span&gt; ValueError

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; count(self, value):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S.count(value) -&amp;gt; integer -- return number of occurrences of value&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; sum(1 &lt;span&gt;for&lt;/span&gt; v &lt;span&gt;in&lt;/span&gt; self &lt;span&gt;if&lt;/span&gt; v == value)
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
&lt;h2&gt;6. class MutableSequence(Sequence)&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;&lt;img id=&quot;code_img_closed_1299308e-46d6-4033-ac1f-ae1760a5bda7&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_1299308e-46d6-4033-ac1f-ae1760a5bda7&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_1299308e-46d6-4033-ac1f-ae1760a5bda7&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;79&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; MutableSequence(Sequence):

    &lt;/span&gt;&lt;span&gt;__slots__&lt;/span&gt; =&lt;span&gt; ()

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;All the operations on a read-write sequence.

    Concrete subclasses must provide __new__ or __init__,
    __getitem__, __setitem__, __delitem__, __len__, and insert().

    &lt;/span&gt;&lt;span&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;span&gt;

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__setitem__&lt;/span&gt;&lt;span&gt;(self, index, value):
        &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; IndexError

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__delitem__&lt;/span&gt;&lt;span&gt;(self, index):
        &lt;/span&gt;&lt;span&gt;raise&lt;/span&gt;&lt;span&gt; IndexError

    @abstractmethod
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; insert(self, index, value):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S.insert(index, value) -- insert value before index&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;raise&lt;/span&gt;&lt;span&gt; IndexError

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; append(self, value):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S.append(value) -- append value to the end of the sequence&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
        self.insert(len(self), value)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; clear(self):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S.clear() -&amp;gt; None -- remove all items from S&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            &lt;/span&gt;&lt;span&gt;while&lt;/span&gt;&lt;span&gt; True:
                self.pop()
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; IndexError:
            &lt;/span&gt;&lt;span&gt;pass&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt;&lt;span&gt; reverse(self):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S.reverse() -- reverse *IN PLACE*&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
        n &lt;/span&gt;=&lt;span&gt; len(self)
        &lt;/span&gt;&lt;span&gt;for&lt;/span&gt; i &lt;span&gt;in&lt;/span&gt; range(n//2&lt;span&gt;):
            self[i], self[n&lt;/span&gt;-i-1] = self[n-i-1&lt;span&gt;], self[i]

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; extend(self, values):
        &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;S.extend(iterable) -- extend sequence by appending elements from the iterable&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
        &lt;span&gt;for&lt;/span&gt; v &lt;span&gt;in&lt;/span&gt;&lt;span&gt; values:
            self.append(v)

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; pop(self, index=-1&lt;span&gt;):
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;S.pop([index]) -&amp;gt; item -- remove and return item at index (default last).
           Raise IndexError if list is empty or index is out of range.
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;
        v &lt;/span&gt;=&lt;span&gt; self[index]
        &lt;/span&gt;&lt;span&gt;del&lt;/span&gt;&lt;span&gt; self[index]
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; v

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; remove(self, value):
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;S.remove(value) -- remove first occurrence of value.
           Raise ValueError if the value is not present.
        &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;
        &lt;span&gt;del&lt;/span&gt;&lt;span&gt; self[self.index(value)]

    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt; &lt;span&gt;__iadd__&lt;/span&gt;&lt;span&gt;(self, values):
        self.extend(values)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; self
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;View Code&lt;/span&gt;&lt;/div&gt;
</description>
<pubDate>Tue, 20 Mar 2018 16:07:00 +0000</pubDate>
<dc:creator>小兵千睿</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xiaobingqianrui/p/8613100.html</dc:identifier>
</item>
<item>
<title>【.NetCore】基于jenkins以及gitlab的持续编译及发布 - OMango</title>
<link>http://www.cnblogs.com/OMango/p/8605871.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/OMango/p/8605871.html</guid>
<description>&lt;p&gt;&lt;strong&gt;前沿&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　其实本来是想把标题叫做持续集成的，只是后来看看研究出的内容，就只有发布这一个动作，自动化测试等内容也未涉及到，所以改名叫持续编译及发布应该更加贴切吧？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;问题背景&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　其实目前我们传统方式上的发布方式，一般都是开发人员本地打包，然后传给测试，测试完成之后，发包到项目经理或者实施人员，最后进行部署，对于非互联网项目也许通过人力操作，也可以很好的完成，虽然可能会磕磕碰碰，但是对于互联网的产品，这种方式就显得低效了，每次迭代开发打包验证可能都要花掉不少时间，测试部署也要花掉不少时间，在这种情况下，自动化方案也就显得尤其重要&lt;/p&gt;
&lt;p&gt;　　按照面向对象理解就是将编译发布等操作进行封装抽象，减少重复的过程（果然万物皆对象么）&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;什么是jenkins&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　那标题既然是基于jenkins，那什么是jenkins呢？百度解释我就抄一个过来了：Jenkins是一个开源软件项目，是基于Java开发的一种持续集成工具，用于监控持续重复的工作，旨在提供一个开放易用的软件平台，使软件的持续集成变成可能。&lt;/p&gt;
&lt;p&gt;　　那既然是持续集成的工具，那发布功能肯定也是有的，SO我们就采用jenkins来实现我们的诉求，想想啥时候我们公司也可以有真正的持续集成方式出现呢？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;安装技能准备：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　rpm安装方法：&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
rpm -ivh XXXX.rpm
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;jenkins安装&amp;amp;配置&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;安装:&lt;/p&gt;
&lt;p&gt;　　1、要安装jenkins，那就必须得先安装JDK，先从官方找个jdk的地址（rpm安装）：&lt;a id=&quot;jdk-8u161-oth-JPRXXXjdk-8u161-linux-x64.rpm&quot; class=&quot;download&quot; name=&quot;jdk-8u161-oth-JPRXXXjdk-8u161-linux-x64.rpm&quot; href=&quot;http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html&quot;&gt;jdk-8u161-linux-x64.rpm&lt;/a&gt;，找那个jdk-8u161-linux-x64.rpm，rpm安装之。&lt;/p&gt;
&lt;p&gt;　　2、jenkins的rpm下载，给个地址：&lt;a href=&quot;https://pkg.jenkins.io/redhat-stable/jenkins-2.89.4-1.1.noarch.rpm&quot;&gt;jenkins-2.89.4-1.1.noarch.rpm&lt;/a&gt;，然后rpm安装之&lt;/p&gt;
&lt;p&gt;　　3、安装完关闭防火墙（或者开放8080端口也可以）&lt;/p&gt;
&lt;p&gt;　　4、service jenkins start；开启jenkins&lt;/p&gt;
&lt;p&gt;配置:&lt;/p&gt;
&lt;p&gt;　　浏览器打开ip:8080&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180319225848307-1811699286.png&quot; alt=&quot;&quot; width=&quot;966&quot; height=&quot;512&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;　　根据红字部分目录，找到密钥信息输入&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180319230049959-187486629.png&quot; alt=&quot;&quot; width=&quot;989&quot; height=&quot;654&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　选择第一个推荐安装，等待一段时间，则安装结束，第一步的初始化配置就到这里结束了&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;.NETCore安装&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　&lt;a href=&quot;https://www.microsoft.com/net/learn/get-started/linux/centos&quot; target=&quot;_blank&quot;&gt;参照微软官方安装方法&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;git安装&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　&lt;/strong&gt;既然我们要基于gitlab跟jenkins，那必须还得装一个git才能pull源码到本地啊，安装方式如下：一句一句执行（参照&lt;a href=&quot;https://www.cnblogs.com/gsliuruigang/p/7899803.html&quot; target=&quot;_blank&quot;&gt;https://www.cnblogs.com/gsliuruigang/p/7899803.html&lt;/a&gt;）&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;yum&lt;/span&gt; -y groupinstall &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Development Tools&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;下载编译工具&lt;/span&gt;
&lt;span&gt;yum&lt;/span&gt; -y &lt;span&gt;install&lt;/span&gt; zlib-devel &lt;span&gt;perl&lt;/span&gt;-ExtUtils-MakeMaker asciidoc xmlto openssl-devel&lt;span&gt;//&lt;/span&gt;&lt;span&gt;下载依赖包&lt;/span&gt;
&lt;span&gt;wget&lt;/span&gt; https:&lt;span&gt;//&lt;/span&gt;&lt;span&gt;github.com/git/git/archive/v2.16.2.tar.gz&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;下载文件&lt;/span&gt;
&lt;span&gt;tar&lt;/span&gt; -zxf v2.&lt;span&gt;16.2&lt;/span&gt;.&lt;span&gt;tar&lt;/span&gt;.gz&lt;span&gt;//&lt;/span&gt;&lt;span&gt;解压文件&lt;/span&gt;
cd git-&lt;span&gt;2.16&lt;/span&gt;.&lt;span&gt;2&lt;/span&gt;/&lt;br/&gt;autoconf&lt;br/&gt;&lt;span&gt;
.&lt;/span&gt;/configure --prefix=/usr/local/&lt;span&gt;git
&lt;/span&gt;&lt;span&gt;make&lt;/span&gt; &amp;amp;&amp;amp; &lt;span&gt;make&lt;/span&gt; &lt;span&gt;install&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;编译安装&lt;/span&gt;
export PATH=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/usr/local/git/bin:$PATH&lt;/span&gt;&lt;span&gt;&quot;//&lt;/span&gt;&lt;span&gt;配置全局路径
source &lt;/span&gt;/etc/profile&lt;span&gt;//&lt;/span&gt;&lt;span&gt;使配置生效&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;gitlab配置&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　登录ip:8080,到管理插件的地方，安装&lt;a class=&quot;display-name&quot; href=&quot;https://wiki.jenkins-ci.org/display/JENKINS/GitLab+Plugin&quot;&gt;GitLab Plugin&lt;/a&gt;插件，如下图所示&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320211342497-920716911.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;　　打开gitlab地址——&amp;gt;个人设置——&amp;gt;account——&amp;gt;复制Private token备用&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320211908384-1121997096.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　jenkins——&amp;gt;系统管理——&amp;gt;系统设置——&amp;gt;找到gitlab&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320211725277-717589509.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　点击add按钮&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320212158821-861446409.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　最后点击test connection，显示success的话那就是连接是成功的了&lt;/p&gt;


&lt;p&gt;&lt;strong&gt;任务构建&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　回到jenkins首页——&amp;gt;新建任务——&amp;gt;输入名称——&amp;gt;生成&lt;/p&gt;
&lt;p&gt;　　1、General&lt;/p&gt;
&lt;p&gt;　　如下图所示，gitlabconnection选择之前配置的信息&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320213138131-1986307253.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;　　2、源码管理&lt;/p&gt;
&lt;p&gt;　　源码管理主要配置源码库的信息，具体配置如下两图所示，如果以上操作没报错，就是说明成功了，如果报错的话会在Repository URL下面有红字提示，jenkins的branch Specifier会对输入的分支进行构建，所以要选择一个当前库中存在的分支填写。Credentials可以选择通过ssh或者通过http进行，如果通过ssh的话 需要通过公私钥的方式进行认证，我们这边选用用户名密码的方式进行，所以选择Username with password这个选项&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320213213690-93437330.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320213226023-1151919409.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;3、构建触发器&lt;/p&gt;
&lt;p&gt;　　构建触发器我们选择Poll SCM，如下图所示，这个表示每隔5分钟构建一次，当然也可以选择webhook的方式，通过提交来进行构建，这个在以后需要的时候我会去研究（目前我司还没这需求）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320214341673-133427377.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　4、构建&lt;/p&gt;
&lt;p&gt;　　这些linux的命令应该都是比较简单的，大家应该都能明白，其实就是模仿人工操作到一个目录下 执行dotnet restore 以及dotnet publish动作，最后publish的目录我设置成了bin/release下面&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320214749566-70167105.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　5、执行构建&lt;/p&gt;
&lt;p&gt;　　点击立即构建，如果不抱错的话，/var/lib/jenkins/workspace/test/bin/release下就会有编译好的代码&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;持续发布&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　以上我们只是将代码从gitlab中获取并且执行了编译，那编译之后呢如何发布到指定的服务器呢，总不能直接就拿jenkins的服务器使用吧，所以接下来我们要做的就是将编译好的程序发布到需要的服务器，还好，jenkins也考虑到了这个需求，有一个publish over ssh插件可以很好的帮我们完成这个工作。&lt;/p&gt;
&lt;p&gt;　　我们回到之前下载插件的地方，下载publish over ssh&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320220930909-1094366838.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　回到之前配置gitlab的地方，现在多出了Publish over SSH的配置，如下图所示，我们这里也是选择了使用用户名密码的方式进行操作（同样可以使用ssh的方式进行授权登录）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320221302530-1753112826.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;　　这里配置好了后，我们重新进入任务里，发现多出了一个构建环境，如下所示，红字可以不用管（应该是jenkins的bug）&lt;/p&gt;
&lt;p&gt;　　Source files表示要复制的文件信息（ps:这里的目录是相对于workspace的）&lt;/p&gt;
&lt;p&gt;　　remove prefix是去除前缀的意思，否则会创建相应的文件夹，这边我只需要文件，所以整个都去除了&lt;/p&gt;
&lt;p&gt;　　remote directory 这个文件夹如果不存在的话，那么会在服务端进行创建&lt;/p&gt;
&lt;p&gt;　　Exec command 拷贝成功后要执行的命令，这里一般的话 都是写个脚本放在服务端，直接执行服务端上的脚本，这里由于dotnet test.dll命令运行后，进程是不会结束的，所以，这里的这个文件我实际上是写了个空文件，真实使用的话可以使用Supervisor开启进程守护，每次发布之后杀掉相应进程，然后由进程守护去启动程序&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/465472/201803/465472-20180320233304658-102484763.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;　　点击构建，如果没问题的话，你应该在对应的服务器的目录下看到了publish出来的内容，如果构建失败的话，这里的控制台输出也有非常详细的日志记录，通过日志记录应该是比较容易发现问题的&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;总结&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　jenkins是一个很强大的工具，目前也只是因为公司的需要开始研究，很多功能也还未接触到，包括自动化测试等，后续的方向上，应该是朝着docker以及k8s的方向研究，结合自动化的测试方案，完成真正的持续集成。&lt;/p&gt;
&lt;p&gt;　　docker方案思考，也是给大家一个思路，其实也就是把构建的脚本换成docker build的方式，再pull到镜像库中，最后通知目标服务器重新拉取镜像生成，运行，问题在于历史的版本库的序号如何一步步生成？&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　遗留的问题：针对于数据库的持续集成或者发布，到底要如何去实现？&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;作者： Mango&lt;/p&gt;
&lt;p&gt;出处： &lt;a href=&quot;http://www.cnblogs.com/OMango/&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/OMango/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;关于自己：专注.Net桌面开发以及Web后台开发，开始接触微服务、docker等互联网相关（最近被互联网架构搞的死去活来- -）&lt;/p&gt;
&lt;p&gt;本文版权归作者和博客园共有，欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文链接，如有问题， 可站内信告知.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;　　&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Tue, 20 Mar 2018 15:50:00 +0000</pubDate>
<dc:creator>OMango</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/OMango/p/8605871.html</dc:identifier>
</item>
<item>
<title>springMvc(一) - 江南小俊</title>
<link>http://www.cnblogs.com/jnxj/p/8613639.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jnxj/p/8613639.html</guid>
<description>&lt;h2&gt;1.1作用：负责拦截请求并分派给相应的处理器处理&lt;/h2&gt;
&lt;h2&gt;1.2配置DispatcherServlet（web.xml）&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1348264/201803/1348264-20180320232753120-2143556781.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1348264/201803/1348264-20180320232810116-1634233607.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h2&gt;2.1实现Controller接口，对应上面配置的第一种适配器&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1348264/201803/1348264-20180320232819078-1046989468.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;2.2实现HttpRequestHandler接口，对应上面配置的第二种适配器&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1348264/201803/1348264-20180320232826491-177458477.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h2&gt;4.1 spring3.1之前的映射器和适配器的配置类&lt;/h2&gt;
&lt;p&gt;（1）映射器org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping&lt;/p&gt;
&lt;p&gt;（2）适配器org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter&lt;/p&gt;
&lt;h2&gt;4.2 spring3.1之后的映射器和适配器的配置类&lt;/h2&gt;
&lt;p&gt;（1）映射器org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&lt;/p&gt;
&lt;p&gt;（2）适配器org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&lt;/p&gt;
&lt;p&gt;（3）使用&amp;lt;mvc:annotation-driven&amp;gt;&amp;lt;/mvc:annotation-driven&amp;gt;可以替代上面两个&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://images2018.cnblogs.com/blog/1348264/201803/1348264-20180320232842805-1675592623.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;4.3 扫描Handler类，开启组件扫描，方便快捷，只要配置包名&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1348264/201803/1348264-20180320232851117-743059097.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;4.4 编写Handler类&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1348264/201803/1348264-20180320232859452-1387049139.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（1）      在类名上使用@Controller注解类&lt;/p&gt;
&lt;p&gt;（2）      使用@RequestMapping()配置映射url&lt;/p&gt;
&lt;h2&gt;5.配置等相关文件&lt;/h2&gt;
&lt;h2&gt;5.1pom.xml&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_29f348ac-2638-48d8-9b10-50cab543a2a9&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_29f348ac-2638-48d8-9b10-50cab543a2a9&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_29f348ac-2638-48d8-9b10-50cab543a2a9&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;  1&lt;/span&gt; &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;properties&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;  2&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;project.build.sourceEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;UTF-8&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;project.build.sourceEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;  3&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;project.reporting.outputEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;UTF-8&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;project.reporting.outputEncoding&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;  4&lt;/span&gt; 
&lt;span&gt;  5&lt;/span&gt;         
&lt;span&gt;  6&lt;/span&gt; 
&lt;span&gt;  7&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; log4j日志包版本号 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;  8&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;slf4j.version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.7.18&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;slf4j.version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;  9&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;log4j.version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.2.17&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;log4j.version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 10&lt;/span&gt; 
&lt;span&gt; 11&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;properties&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 12&lt;/span&gt;     
&lt;span&gt; 13&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependencies&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 14&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 添加fastjson &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 15&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 16&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;com.alibaba&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 17&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;fastjson&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 18&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.1.41&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 19&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 20&lt;/span&gt; 
&lt;span&gt; 21&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 添加日志相关jar包 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 22&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 23&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;log4j&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 24&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;log4j&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 25&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;${log4j.version}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 26&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 27&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 28&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.slf4j&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 29&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;slf4j-api&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 30&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;${slf4j.version}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 31&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 32&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 33&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.slf4j&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 34&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;slf4j-log4j12&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 35&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;${slf4j.version}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 36&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 37&lt;/span&gt; 
&lt;span&gt; 38&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; log end &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 39&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 映入JSON &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 40&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 41&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.codehaus.jackson&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 42&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;jackson-mapper-asl&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 43&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.9.13&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 44&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 45&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 46&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 47&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;com.fasterxml.jackson.core&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 48&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;jackson-core&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 49&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;2.8.0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 50&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 51&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 52&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 53&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;com.fasterxml.jackson.core&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 54&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;jackson-databind&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 55&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;2.8.0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 56&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 57&lt;/span&gt; 
&lt;span&gt; 58&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 59&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;commons-fileupload&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 60&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;commons-fileupload&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 61&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.3.1&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 62&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 63&lt;/span&gt; 
&lt;span&gt; 64&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 65&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;commons-io&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 66&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;commons-io&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 67&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;2.4&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 68&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 69&lt;/span&gt; 
&lt;span&gt; 70&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 71&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;commons-codec&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 72&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;commons-codec&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 73&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.9&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 74&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 75&lt;/span&gt;     
&lt;span&gt; 76&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 添加jstl依赖 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 77&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 78&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;jstl&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 79&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;jstl&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 80&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1.2&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 81&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 82&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 83&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;junit&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 84&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;junit&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 85&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;3.8.1&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 86&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;test&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 87&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 88&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; https://mvnrepository.com/artifact/org.springframework/spring-webmvc &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 89&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 90&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;org.springframework&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 91&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;spring-webmvc&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 92&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;4.3.14.RELEASE&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 93&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 94&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 95&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 96&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;javax.servlet&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;groupId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 97&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;javax.servlet-api&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;artifactId&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 98&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;3.1.0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;version&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 99&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;provided&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;scope&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;100&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependency&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;101&lt;/span&gt; 
&lt;span&gt;102&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dependencies&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;pom.xml&lt;/span&gt;&lt;/div&gt;
&lt;h2&gt;5.2log4j.properties&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33.5&quot;&gt;&lt;img id=&quot;code_img_closed_1c4f8a52-6d17-4936-aab0-6bdf52da9b67&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_1c4f8a52-6d17-4936-aab0-6bdf52da9b67&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_1c4f8a52-6d17-4936-aab0-6bdf52da9b67&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;# \u65E5\u5FD7\u6536\u96C6\u5668\u7684\u64CD\u4F5C
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;log4j.rootLogger=DEBUG, stdout, file
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;# \u5C06\u65E5\u5FD7\u4FE1\u606F\u5B9A\u5411\u5230\u63A7\u5236\u53F0
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;log4j.appender.stdout=org.apache.log4j.ConsoleAppender
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;log4j.appender.stdout.Target=System.out
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;log4j.appender.stdout.layout.ConversionPattern=%d&lt;/span&gt;{&lt;span&gt;yyyy-MM-dd HH&lt;/span&gt;:&lt;span&gt;mm:ss&lt;/span&gt;}&lt;span&gt; %-5p %c&lt;/span&gt;{&lt;span&gt;1&lt;/span&gt;}&lt;span&gt;:%L - %m%n
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt; &lt;span&gt;# \u5C06\u65E5\u5FD7\u4FE1\u606F\u5B9A\u5411\u5230\u6587\u4EF6\u4E2D
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;log4j.appender.file=org.apache.log4j.RollingFileAppender
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;log4j.appender.file.File=D:/log/springmvc-01/log4j-application.log
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;log4j.appender.file.MaxFileSize=5MB
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; &lt;span&gt;log4j.appender.file.MaxBackupIndex=10
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;log4j.appender.file.layout=org.apache.log4j.PatternLayout
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;log4j.appender.file.layout.ConversionPattern=%d&lt;/span&gt;{&lt;span&gt;yyyy-MM-dd HH&lt;/span&gt;:&lt;span&gt;mm:ss&lt;/span&gt;}&lt;span&gt; %-5p %c&lt;/span&gt;{&lt;span&gt;1&lt;/span&gt;}&lt;span&gt;:%L - %m%n&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;log4j&lt;/span&gt;&lt;/div&gt;
&lt;h2&gt;5.3springmvc.xml&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33.5&quot;&gt;&lt;img id=&quot;code_img_closed_4b2a60cb-8661-46ea-9366-3aab7ec608ec&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_4b2a60cb-8661-46ea-9366-3aab7ec608ec&quot; class=&quot;code_img_opened&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_4b2a60cb-8661-46ea-9366-3aab7ec608ec&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;62&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;&amp;lt;?&lt;/span&gt;&lt;span&gt;xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;?&amp;gt;&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;beans &lt;/span&gt;&lt;span&gt;xmlns&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/beans&quot;&lt;/span&gt;
&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;    xmlns:xsi&lt;/span&gt;&lt;span&gt;=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;&lt;span&gt; xmlns:mvc&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/mvc&quot;&lt;/span&gt;
&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;    xmlns:context&lt;/span&gt;&lt;span&gt;=&quot;http://www.springframework.org/schema/context&quot;&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;    xsi:schemaLocation&lt;/span&gt;&lt;span&gt;=&quot;
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;        http://www.springframework.org/schema/beans 
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;        http://www.springframework.org/schema/beans/spring-beans.xsd
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;        http://www.springframework.org/schema/mvc 
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;        http://www.springframework.org/schema/mvc/spring-mvc.xsd    
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;        http://www.springframework.org/schema/context 
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;        http://www.springframework.org/schema/context/spring-context.xsd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;userController&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;/home&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;com.jnxj.springmvc.controller.UserController&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;userController2&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;com.jnxj.springmvc.controller.UserController2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;14&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;com.jnxj.springmvc.controller.UserController3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;15&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 开启组件扫描，不用一个一个配置handler &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;context:component-scan &lt;/span&gt;&lt;span&gt;base-package&lt;/span&gt;&lt;span&gt;=&quot;com.jnxj.springmvc.controller&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;context:component-scan&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;17&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 处理器映射器  通过bean的name去处理url&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;18&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;19&lt;/span&gt;            &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 另一种非注解处理器映射器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;20&lt;/span&gt;            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;21&lt;/span&gt;                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;mappings&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;22&lt;/span&gt;                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;props&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;23&lt;/span&gt;                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;prop &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;=&quot;/home1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;userController&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;24&lt;/span&gt;                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;prop &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;=&quot;/home2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;userController2&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;25&lt;/span&gt;                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;props&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;26&lt;/span&gt;                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;27&lt;/span&gt;            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;28&lt;/span&gt;            
&lt;span&gt;29&lt;/span&gt;            &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注解的映射器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;30&lt;/span&gt;            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;31&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注解适配器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;32&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;33&lt;/span&gt;         
&lt;span&gt;34&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 使用下面这个可以代替上面两个注解映射器和适配器 
&lt;/span&gt;&lt;span&gt;35&lt;/span&gt; &lt;span&gt;            默认加载很多方法，比如json的视图解析器
&lt;/span&gt;&lt;span&gt;36&lt;/span&gt;         &lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;37&lt;/span&gt;        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;  &amp;lt;mvc:annotation-driven&amp;gt;&amp;lt;/mvc:annotation-driven&amp;gt; &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;38&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 处理器适配器 ,实现HandlerAdapter接口&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;39&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;40&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 另一种处理器适配器 ,实现HttpRequestHandler接口&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;41&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;42&lt;/span&gt;        
&lt;span&gt;43&lt;/span&gt;         &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 视图解释器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;44&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;45&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;beans&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;springmvc.xml&lt;/span&gt;&lt;/div&gt;

</description>
<pubDate>Tue, 20 Mar 2018 15:34:00 +0000</pubDate>
<dc:creator>江南小俊</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/jnxj/p/8613639.html</dc:identifier>
</item>
<item>
<title>微信小程序调接口常见问题解决方法 - DFrain</title>
<link>http://www.cnblogs.com/wenrain/p/8613634.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wenrain/p/8613634.html</guid>
<description>&lt;p&gt;第一次调接口时遇见的bug。&lt;/p&gt;
&lt;p&gt;注意：接口的域名不能使用 IP 地址或 localhost，且不能带端口号；&lt;/p&gt;
&lt;p&gt;微信小程序如何调接口？&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;wx.request({
  url: &lt;/span&gt;'http://miniapp/system/user/test'&lt;span&gt;, 
  method: &lt;/span&gt;&quot;POST&quot;&lt;span&gt;,
  header: {
    &lt;/span&gt;'content-type': 'application/json'&lt;span&gt;
  },
  success: &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; (res) {
    console.log(res)
  }
})&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;结果微信开发者工具报错。合法域名校验出错，不在一下request合法域名列表中，请参考。。。。如下图&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/698403/201803/698403-20180320232203671-258722031.png&quot; alt=&quot;&quot; width=&quot;1039&quot; height=&quot;134&quot;/&gt;&lt;/p&gt;
&lt;p&gt;查了一堆古籍，都是说在微信公众平台改配置。对于刚开发，学习，测试阶段的同学们来说，太复杂。&lt;/p&gt;
&lt;p&gt;最简单的解决方法：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;打开微信开发者工具，左上角点击“&lt;strong&gt;设置&lt;/strong&gt;“&lt;/li&gt;
&lt;li&gt;点击最下面一行”&lt;strong&gt;项目设置&lt;/strong&gt;“，（此时左边会弹出一个弹框）&lt;/li&gt;
&lt;li&gt;勾选上弹框上最后一行”&lt;strong&gt;不校验安全域名、TLS 版本以及 HTTPS 证书&lt;/strong&gt;“&lt;/li&gt;
&lt;li&gt;完美解决。&lt;/li&gt;
&lt;/ol&gt;
</description>
<pubDate>Tue, 20 Mar 2018 15:32:00 +0000</pubDate>
<dc:creator>DFrain</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/wenrain/p/8613634.html</dc:identifier>
</item>
<item>
<title>消息队列的使用 RabbitMQ - 张居斜</title>
<link>http://www.cnblogs.com/yaolin1228/p/8610471.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yaolin1228/p/8610471.html</guid>
<description>&lt;p&gt;RabbitMQ 是一款开源且比较流行的消息中间件。但用起来还是比较麻烦，有人封装了一层， 这就是 EasyNetQ 。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;一、安装&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、安装 Erlang: &lt;a href=&quot;http://www.erlang.org/download.html&quot; rel=&quot;nofollow&quot;&gt;http://www.erlang.org/download.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;2、安装 RabbitMQ server : &lt;a href=&quot;http://www.rabbitmq.com/download.html&quot; rel=&quot;nofollow&quot;&gt;http://www.rabbitmq.com/download.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;3、安装 RabbitMQ management API tool : &lt;a href=&quot;http://www.rabbitmq.com/management.html&quot; rel=&quot;nofollow&quot;&gt;http://www.rabbitmq.com/management.html&lt;/a&gt; (web 页面管理工具)&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;找到 rabbitmq-plugins 所在文件夹(一般在 sbin 文件夹下）&lt;/li&gt;
&lt;li&gt;在文件夹下运行 cmd&lt;/li&gt;
&lt;li&gt;在 cmd 中运行 rabbitmq-plugins &lt;span class=&quot;hljs-built_in&quot;&gt;enable rabbitmq_management&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;4、 重启 RabbitMq 服务&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;二、集群 (Cluster)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;此处指的是负载均衡集群：将任务分配给有资源的服务器处理。&lt;/p&gt;
&lt;p&gt;此处有三种模型&lt;/p&gt;
&lt;p&gt;模式  1、最基础的集群（无需负载均衡功能）&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; bus = RabbitHutch.CreateBus(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;host=myhost.svj.com ,sechost.svj.com&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;);&lt;span&gt;//&lt;/span&gt;&lt;span&gt; 创建连接时，指定多主机地址完成集群&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在连接的主机域名处，添加多个域名，域名之间以逗号分隔， 当连接首个域名失败，则会尝试连接后面的域名，若失败继续向后连接，依次寻找可连接主机。&lt;/p&gt;

&lt;p&gt;模式 2、随机选择域名 （具备基础的负载均衡功能， 适用于多个服务调用 RabbitMQ 服务）&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; bus = RabbitHutch.CreateBus(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;host=myfirsthost,mysecondhost&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, x =&amp;gt; x.Register&amp;lt;IClusterHostSelectionStrategy&amp;lt;ConnectionFactoryInfo&amp;gt;, RandomClusterHostSelectionStrategy&amp;lt;ConnectionFactoryInfo&amp;gt;&amp;gt;());
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;模式 3、使用专业的负载均衡器&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;三、镜像队列(Mirror Queue)&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;使用镜像队列的前提条件是完成了集群。&lt;/p&gt;
&lt;p&gt;将 queue 镜像到集群中的其他节点的队列上， 防止单点队列失效，以及 Message 丢失 。&lt;/p&gt;
&lt;p&gt;镜像队列的设置可以在  web 页面中设置&lt;/p&gt;
&lt;p&gt;Policies &amp;gt; Add / update a policy. 完成，队列的更新。 &lt;/p&gt;
&lt;p&gt;如果需要查看其节点以及镜像 ，可以点击此处查看&lt;strong&gt;&lt;span&gt; https://www.rabbitmq.com/ha.html#how-to-check-i-a-queue-is-mirrored&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt; 注意： 使用了队列镜像后， 在发布确认时，必须所有镜像队列都同步了消息，才能返回 isComplete 为 true 算是发布完成&lt;/p&gt;
&lt;p&gt;以上皆为参考 &lt;a href=&quot;https://github.com/EasyNetQ/EasyNetQ/wiki/Quick-Start&quot; target=&quot;_blank&quot;&gt;https://github.com/EasyNetQ/EasyNetQ/wiki/Quick-Start&lt;/a&gt; &lt;/p&gt;
</description>
<pubDate>Tue, 20 Mar 2018 15:31:00 +0000</pubDate>
<dc:creator>张居斜</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/yaolin1228/p/8610471.html</dc:identifier>
</item>
</channel>
</rss>