<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>高可用之KeepAlived(一)：基本概念和配置文件分析 - 骏马金龙</title>
<link>http://www.cnblogs.com/f-ck-need-u/p/8483807.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/f-ck-need-u/p/8483807.html</guid>
<description>&lt;p&gt;&lt;strong&gt;KeepAlived系列文章：&lt;span&gt;&lt;strong&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/7576137.html#lvs&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;http://www.cnblogs.com/f-ck-need-u/p/7576137.html&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;a&gt;&lt;span&gt;本文目录：&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/8483807.html#blog1&quot;&gt;&lt;span&gt;1. 概述&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/8483807.html#blog2&quot;&gt;&lt;span&gt;2. VRRP协议&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/8483807.html#blog3&quot;&gt;&lt;span&gt;3. KeepAlived架构模型&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/8483807.html#blog4&quot;&gt;&lt;span&gt;4. 安装KeepAlived&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/8483807.html#blog5&quot;&gt;&lt;span&gt;5. 配置keepalived的日志&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/8483807.html#blog6&quot;&gt;&lt;span&gt;6. keepalived配置文件详解&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;KeepAlived主要有两个功能：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;(1).能够对RealServer进行健康状况检查，支持4层、5层和7层协议进行健康检查；&lt;/li&gt;
&lt;li&gt;(2).对负载均衡调度器实现高可用，防止Director单点故障。&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;在keepalived设计之初，它只是LVS周边的一个辅助工具，用于LVS的监控状况检查，因此它和LVS的兼容性非常好。如果某一个realserver节点宕了，keepalived会将此节点从管理列表中踢出去，当此节点恢复后又将此节点加回管理列表，这样能够就让realserver负载均衡变的智能化。但是，此时的调度器存在单点故障的可能性，因此有必要对其实现高可用。&lt;/p&gt;
&lt;p&gt;实现LVS高可用可以使用多种软件来实现，如heartbeat，但是heartbeat本身不能实现ipvs的健康状况检查，需要搭配Ldirectord(安装完heartbeat就有了)来进行健康检查。所幸的是keepalived后来也加入了高可用的功能，而且配置起来也相当简单。相比于heartbeat+Ldirectord，keepalived的检查速度极快，故障转移也极快，布置也简单的多。所以一般来说，要管理ipvs，都会选择使用keepalived。下图列出了构建LVS高可用的几种工具：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/733013/201802/733013-20180228150653277-897782256.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;keepalived实现故障转移的功能是通过VRRP(virtual router redundancy protocol虚拟路由器冗余协议)协议来实现的。 在keepalived正常工作的时候，主节点(master)会不断的发送心跳信息给备节点(backup)，当备节点不能在一定时间内收到主节点的心跳信息时，备节点会认为主节点宕了，然后会接管主节点上的资源，并继续向外提供服务保证其可用性。当主节点恢复的时候，备节点会自动让出资源并再次自动成为备节点。&lt;/p&gt;
&lt;p&gt;注意，使用keepalived监控、高可用LVS集群时(即常说的keepalived+lvs)，并不需要在Director上使用ipvsadm等管理工具额外配置ipvs规则。因为keepalived中集合了管理ipvs规则的组件(即稍后模型图中的ipvs wrapper)，可以直接在keepalived的配置文件中配置ipvs相关规则，在解析配置文件时会通过特定的组件将规则发送到内核中的ipvs模块。&lt;/p&gt;


&lt;p&gt;VRRP协议的出现是为了解决&lt;strong&gt;静态路由&lt;/strong&gt;的单点故障，它是通过一种竞选机制来将路由任务交给某个vrrp路由器的。&lt;/p&gt;
&lt;p&gt;在VRRP物理结构中，有多个物理的VRRP路由器，其中有一台称为&quot;master&quot;即主节点路由器，其他的都是&quot;backup&quot;备节点路由器，谁是master谁是backup，这是通过他们的优先级来定义竞选的。&lt;/p&gt;
&lt;p&gt;在VRRP虚拟结构中，虚拟路由器是通过&quot;MAC+VRID&quot;的形式来标识的，如&quot;00-00-5E-00-01-{VRID}&quot;。在VRRP虚拟结构中，不管谁是master，对外都是相同的MAC和VIP，客户端主机并不需要因为master的改变而修改自己的路由配置。&lt;/p&gt;
&lt;p&gt;VRRP结构中路由器之间的通信是通过IP多播的方式实现的(也可以配置为其它通信方式)。但是，只有master节点才会发送VRRP广告包(vrrp advertisement message)。当master节点宕掉的时候，backup中优先级最高的VRRP设备会抢占并升级为master。&lt;/p&gt;


&lt;p&gt;Keepalived服务启动的时候，将产生三个相关进程，一个父进程和两个子进程。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;PID    &lt;span class=&quot;hljs-number&quot;&gt;111&lt;/span&gt;     Keepalived  &amp;lt;-- Parent process &lt;span class=&quot;hljs-keyword&quot;&gt;fork&lt;/span&gt; &lt;span class=&quot;hljs-keyword&quot;&gt;and&lt;/span&gt; monitor children
       &lt;span class=&quot;hljs-number&quot;&gt;112&lt;/span&gt;     \&lt;span class=&quot;hljs-number&quot;&gt;_&lt;/span&gt; Keepalived   &amp;lt;-- VRRP child
       &lt;span class=&quot;hljs-number&quot;&gt;113&lt;/span&gt;     \&lt;span class=&quot;hljs-number&quot;&gt;_&lt;/span&gt; Keepalived   &amp;lt;-- Healthchecking child
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;父进程负责fork和监控子进程，因此父进程也称为WatchDog。两个子进程都会开启本地套接字Unix Domain Socket。当keepalived服务启动后，父进程会通过unxi domain socket每隔5秒发送一个&quot;Hello&quot;消息给子进程，如果父进程无法发送消息给子进程，将认为子进程出现问题，于是会重启子进程。&lt;/p&gt;
&lt;p&gt;下图是keepalived设计架构图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/733013/201802/733013-20180227223514634-2123816260.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;code&gt;Checkers组件&lt;/code&gt;：负责RealServer的健康状况检查，并在LVS的拓扑中移除、添加RealServer。它支持layer4/5/7层的协议检查。该组件使用独立的子进程负责，但被父进程监控。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;VRRP组件&lt;/code&gt;：提供Director的故障转移功能从而实现Director的高可用。该组件可独立提供功能，无需LVS的支持。该组件使用独立的子进程负责，但被父进程监控。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;System Call组件&lt;/code&gt;：提供读取自定义脚本的功能。该组件在使用时，将临时产生一个子进程来执行任务。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;IPVS wrapper组件&lt;/code&gt;：负责将配置文件中IPVS相关规则发送到内核的ipvs模块。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Netlink Reflector&lt;/code&gt;：用来设定、监控vrrp的vip地址。&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;使用keepalived，完全可以yum安装。本文仅给出编译安装的方法，后文的所有配置都使用yum安装的keepalived。&lt;/p&gt;
&lt;p&gt;官方各版本源码下载地址：&lt;span&gt;&lt;a href=&quot;http://www.keepalived.org/download.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;http://www.keepalived.org/download.html&lt;/span&gt;&lt;/a&gt;&lt;/span&gt;。以下是编译安装keepalived-1.2.19版本的过程。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;yum -y &lt;span class=&quot;hljs-operator&quot;&gt;&lt;span class=&quot;hljs-keyword&quot;&gt;install&lt;/span&gt; openssl-devel

tar xf keepalived-&lt;span class=&quot;hljs-number&quot;&gt;1.2&lt;/span&gt;.19.tar.gz
cd keepalived-&lt;span class=&quot;hljs-number&quot;&gt;1.2&lt;/span&gt;.19
./configure 
make &amp;amp;&amp;amp; make &lt;span class=&quot;hljs-keyword&quot;&gt;install&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;其中./configure的·--with-kernel-dir·是在管理LVS时需要使用的，如果不用配合LVS，则可以不用此选项。&lt;/p&gt;
&lt;p&gt;再做一下编译安装的规范行为。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;ln &lt;span class=&quot;hljs-operator&quot;&gt;-s&lt;/span&gt; /usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/keepalived-&lt;span class=&quot;hljs-number&quot;&gt;1.2&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;19&lt;/span&gt; /usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/keepalived
&lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;MANPATH /usr/local/keepalived/share/man&quot;&lt;/span&gt; &amp;gt;&amp;gt;/etc/man.config
&lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;hljs-string&quot;&gt;&quot;export PATH=/usr/local/keepalived/sbin:&lt;span class=&quot;hljs-variable&quot;&gt;$PATH&lt;/span&gt;&quot;&lt;/span&gt; &amp;gt; /etc/profile.d/keepalived.sh
chmod +x /etc/profile.d/keepalived.sh
. /etc/profile.d/keepalived.sh
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;编译安装后，在安装目录下生成以下一些目录，其中keepalived程序在sbin目录下。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;[root&lt;span class=&quot;hljs-variable&quot;&gt;@xuexi&lt;/span&gt; ~]
[root&lt;span class=&quot;hljs-variable&quot;&gt;@xuexi&lt;/span&gt; keepalived]
bin  etc  lib  sbin  share
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在etc目录下，有配置文件、SysV管理脚本和大量配置文件示例。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;[root&lt;span class=&quot;hljs-variable&quot;&gt;@xuexi&lt;/span&gt; keepalived]
keepalived  rc.d  sysconfig
[root&lt;span class=&quot;hljs-variable&quot;&gt;@xuexi&lt;/span&gt; keepalived]
keepalived.conf  samples
[root&lt;span class=&quot;hljs-variable&quot;&gt;@xuexi&lt;/span&gt; keepalived]
keepalived
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;但需要注意的是，这里提供的SysV服务管理脚本是错误的，原因是脚本中的keepalived命令路径错误。所以修改该文件。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;
&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;start&lt;/span&gt;&lt;/span&gt;() {
    &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; -n $&lt;span class=&quot;hljs-string&quot;&gt;&quot;Starting &lt;span class=&quot;hljs-variable&quot;&gt;$prog&lt;/span&gt;: &quot;&lt;/span&gt;
    daemon keepalived &lt;span class=&quot;hljs-variable&quot;&gt;${KEEPALIVED_OPTIONS}&lt;/span&gt;
    RETVAL=$?
    &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt;
    [ &lt;span class=&quot;hljs-variable&quot;&gt;$RETVAL&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-eq&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ] &amp;amp;&amp;amp; touch /var/lock/subsys/&lt;span class=&quot;hljs-variable&quot;&gt;$prog&lt;/span&gt;
}

&lt;span class=&quot;hljs-function&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;start&lt;/span&gt;&lt;/span&gt;() {
    &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt; -n $&lt;span class=&quot;hljs-string&quot;&gt;&quot;Starting &lt;span class=&quot;hljs-variable&quot;&gt;$prog&lt;/span&gt;: &quot;&lt;/span&gt;
    daemon /usr/&lt;span class=&quot;hljs-built_in&quot;&gt;local&lt;/span&gt;/keepalived/sbin/keepalived &lt;span class=&quot;hljs-variable&quot;&gt;${KEEPALIVED_OPTIONS}&lt;/span&gt;
    RETVAL=$?
    &lt;span class=&quot;hljs-built_in&quot;&gt;echo&lt;/span&gt;
    [ &lt;span class=&quot;hljs-variable&quot;&gt;$RETVAL&lt;/span&gt; &lt;span class=&quot;hljs-operator&quot;&gt;-eq&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;0&lt;/span&gt; ] &amp;amp;&amp;amp; touch /var/lock/subsys/&lt;span class=&quot;hljs-variable&quot;&gt;$prog&lt;/span&gt;
}
&lt;/code&gt;
&lt;/pre&gt;


&lt;p&gt;默认keeepalived的日志会记录到/var/log/messages中。可以配置keepalived使其记录到其它文件中。&lt;/p&gt;
&lt;p&gt;先修改/etc/sysconfig/keepalived文件，以下是原文内容。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;












KEEPALIVED_OPTIONS=&lt;span class=&quot;hljs-string&quot;&gt;&quot;-D&quot;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;要配置独立的日志，将其中的&quot;KEEPALIVED_OPTIONS&quot;改为如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&lt;span class=&quot;hljs-setting&quot;&gt;KEEPALIVED_OPTIONS=&lt;span class=&quot;hljs-value&quot;&gt;&lt;span class=&quot;hljs-string&quot;&gt;&quot;-D -S 0&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上面配置使用local0这个设备来记录日志，因此去修改rsyslog的配置文件/etc/rsyslog.conf，添加该设备记录日志的级别和路径。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-preprocessor&quot;&gt;# Keepalived log config&lt;/span&gt;
local0.*                           /var/&lt;span class=&quot;hljs-built_in&quot;&gt;log&lt;/span&gt;/keepalived.&lt;span class=&quot;hljs-built_in&quot;&gt;log&lt;/span&gt;
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;再重启rsyslog。&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;service&lt;/span&gt; rsyslog restart
&lt;/code&gt;
&lt;/pre&gt;


&lt;p&gt;配置文件分为3部分：全局部分、VRRPd部分(即实现高可用部分)以及LVS虚拟服务部分(健康状况检查以及管理的集群服务)。&lt;/p&gt;
&lt;p&gt;选项很多，具体的意义可以man keepalived.conf。默认内容如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;! Configuration File &lt;span class=&quot;hljs-keyword&quot;&gt;for&lt;/span&gt; keepalived

global_defs {                    
   notification_email {          
     acassen@firewall.loc
     failover@firewall.loc
     sysadmin@firewall.loc
   }
   notification_email_from Alexandre.Cassen@firewall.loc  
   smtp_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.1&lt;/span&gt;
   smtp_connect_timeout &lt;span class=&quot;hljs-number&quot;&gt;30&lt;/span&gt;
   router_id LVS_DEVEL         

        
}


vrrp_instance VI_1 {         
    state MASTER           
    interface eth0         
    virtual_router_id &lt;span class=&quot;hljs-number&quot;&gt;51&lt;/span&gt;   
                           
    priority &lt;span class=&quot;hljs-number&quot;&gt;100&lt;/span&gt;           
                           
    advert_int &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;           
    authentication {       
        auth_&lt;span class=&quot;hljs-built_in&quot;&gt;type&lt;/span&gt; PASS
        auth_pass &lt;span class=&quot;hljs-number&quot;&gt;1111&lt;/span&gt;     
    }
virtual_ipaddress {      
                         
                         
                         
        &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.16&lt;/span&gt; label eth0:&lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.17&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.18&lt;/span&gt;
        &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.19&lt;/span&gt;/&lt;span class=&quot;hljs-number&quot;&gt;24&lt;/span&gt; dev eth1
    }
}


virtual_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.100&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;443&lt;/span&gt; { 
    delay_loop &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;                     
    lb_algo rr                       
    lb_kind NAT                      
    nat_mask &lt;span class=&quot;hljs-number&quot;&gt;255.255&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;255.0&lt;/span&gt;
    persistence_timeout &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;           
    protocol TCP                     

    real_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;201.100&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;443&lt;/span&gt; {   
        weight &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;       
        SSL_GET {      
            url {      
              path /   
              digest ff20ad2481f97b1754ef3e12ecd3a9cc  
                                
                                
              status_code &lt;span class=&quot;hljs-number&quot;&gt;200&lt;/span&gt;
            }
            url {
              path /mrtg/
              digest &lt;span class=&quot;hljs-number&quot;&gt;9&lt;/span&gt;b3a0c85a887a256d6939da88aabd8&lt;span class=&quot;hljs-built_in&quot;&gt;cd&lt;/span&gt;
            }
            connect_timeout &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;           
            nb_get_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;              
            delay_before_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;        
                                        
        }
    }
}

virtual_server &lt;span class=&quot;hljs-number&quot;&gt;10.10&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;10.2&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1358&lt;/span&gt; {
    delay_loop &lt;span class=&quot;hljs-number&quot;&gt;6&lt;/span&gt;
    lb_algo rr 
    lb_kind NAT
    persistence_timeout &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;
    protocol TCP

    sorry_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.200&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1358&lt;/span&gt;    
                                         

    real_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.2&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1358&lt;/span&gt; {
        weight &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
        HTTP_GET {
            url { 
              path /testurl/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            url { 
              path /testurl2/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            url { 
              path /testurl3/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            connect_timeout &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            nb_get_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            delay_before_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
        }
    }

    real_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.3&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1358&lt;/span&gt; {
        weight &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
        HTTP_GET {
            url { 
              path /testurl/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334c
            }
            url { 
              path /testurl2/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334c
            }
            connect_timeout &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            nb_get_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            delay_before_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
        }
    }
}

virtual_server &lt;span class=&quot;hljs-number&quot;&gt;10.10&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;10.3&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1358&lt;/span&gt; {
    delay_loop &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
    lb_algo rr 
    lb_kind NAT
    nat_mask &lt;span class=&quot;hljs-number&quot;&gt;255.255&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;255.0&lt;/span&gt;
    persistence_timeout &lt;span class=&quot;hljs-number&quot;&gt;50&lt;/span&gt;
    protocol TCP

    real_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.4&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1358&lt;/span&gt; {
        weight &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
        HTTP_GET {
            url { 
              path /testurl/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            url { 
              path /testurl2/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            url { 
              path /testurl3/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            connect_timeout &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            nb_get_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            delay_before_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
        }
    }

    real_server &lt;span class=&quot;hljs-number&quot;&gt;192.168&lt;/span&gt;.&lt;span class=&quot;hljs-number&quot;&gt;200.5&lt;/span&gt; &lt;span class=&quot;hljs-number&quot;&gt;1358&lt;/span&gt; {
        weight &lt;span class=&quot;hljs-number&quot;&gt;1&lt;/span&gt;
        HTTP_GET {
            url { 
              path /testurl/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            url { 
              path /testurl2/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            url { 
              path /testurl3/test.jsp
              digest &lt;span class=&quot;hljs-number&quot;&gt;640205&lt;/span&gt;b7b0&lt;span class=&quot;hljs-built_in&quot;&gt;fc&lt;/span&gt;66c1ea91c463fac6334d
            }
            connect_timeout &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            nb_get_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
            delay_before_retry &lt;span class=&quot;hljs-number&quot;&gt;3&lt;/span&gt;
        }
    }
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;关于配置文件中的几种时间间隔：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;advert_int N1：vrrp主备之间发送和接收心跳信息的时间间隔。和Checker组件无关。&lt;/li&gt;
&lt;li&gt;delay_loop N2：是健康状况检查的时间间隔。每隔几秒就检查一次。&lt;/li&gt;
&lt;li&gt;connect_timeout N3：连接RS的超时时间，连接不上说明不健康，需要重试连接来判定RS是否故障。&lt;/li&gt;
&lt;li&gt;nb_get_retry N4：一个节点不健康的判定重试次数。要重试N次，N次内都不健康说明节点故障了。&lt;/li&gt;
&lt;li&gt;delay_before_retry N5：判定某节点不健康后过N秒再进行重试判定。&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;N2和N5的区别在于：当上一次健康检查结果是正常的，将会隔N2秒再检查。如果某次检查不健康，即联系不上RS，则每隔N5秒重试一次，直到N4次后才判定该RS已经故障。因此，最终需要&lt;code&gt;N3+N4*N5&lt;/code&gt;才能判定一个节点的故障。&lt;/p&gt;
&lt;p&gt;虽然健康检查的失败次数是可以指定的，但一般都会设置多于1次防止误伤。另外，成功的检查只需一次即可。&lt;/p&gt;
&lt;p&gt;keepalived支持4层、5层和7层的健康状况检查，按检查类型又可分为TCP检查(4层)、HTTP检查(5层)、SSL_HTTP检查(5层)以及自定义的MISC检查(可实现7层)。其中：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;TCP_CHECK：通过TCP连接来检查后端RS是否健康。&lt;/li&gt;
&lt;li&gt;HTTP_GET：通过获取指定页面来检查后端RS是否健康。是否健康是根据是否匹配digest、status_code来判断的。&lt;/li&gt;
&lt;li&gt;SSL_GET：和HTTP_GET一样，只不过使用的协议是HTTPS。&lt;/li&gt;
&lt;li&gt;MISC_CHECK：通过加载自定义健康状况检查的脚本来检查对象是否健康，要求这些脚本中健康与否的返回值为0或1。&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;使用MISC_CHECK检查时，方式如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;hljs bash&quot;&gt;&lt;span class=&quot;hljs-title&quot;&gt;MISC_CHECK&lt;/span&gt; {
    &lt;span class=&quot;hljs-title&quot;&gt;misc_path&lt;/span&gt; /path_to_script/script.sh
    (or misc_path “ /path_to_script/script.sh &amp;lt;arg_list&amp;gt;”)
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/7048359.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;回到Linux系列文章大纲：http://www.cnblogs.com/f-ck-need-u/p/7048359.html&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/7576137.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;回到网站架构系列文章大纲：http://www.cnblogs.com/f-ck-need-u/p/7576137.html&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/7586194.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;回到数据库系列文章大纲：http://www.cnblogs.com/f-ck-need-u/p/7586194.html&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;span&gt;&lt;strong&gt;&lt;a href=&quot;http://www.cnblogs.com/f-ck-need-u/p/8483807.html&quot; target=&quot;_blank&quot;&gt;&lt;span&gt;转载请注明出处：http://www.cnblogs.com/f-ck-need-u/p/8483807.html&lt;/span&gt;&lt;/a&gt;&lt;/strong&gt;&lt;/span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;注：若您觉得这篇文章还不错请点击右下角推荐，您的支持能激发作者更大的写作热情，非常感谢！&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Wed, 28 Feb 2018 07:18:00 +0000</pubDate>
<dc:creator>骏马金龙</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/f-ck-need-u/p/8483807.html</dc:identifier>
</item>
<item>
<title>关于 JS 拖拽功能的冲突问题及解决方法 - 叙帝利</title>
<link>http://www.cnblogs.com/nzbin/p/8481241.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/nzbin/p/8481241.html</guid>
<description>&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;我在之前写过关于 JS 拖拽的文章，实现方式和网上能搜到的方法大致相同，别无二致，但是在一次偶然的测试中发现，这种绑定事件的方式可能会和其它的拖拽事件产生冲突，由此产生了对于事件绑定的思考。本文主要介绍解决这种冲突的方法，其实就是事件绑定的时机问题。&lt;/p&gt;
&lt;h2&gt;问题来源&lt;/h2&gt;
&lt;p&gt;这个问题是在类似如下 CodePen 例子中发现的，在有拖拽功能的页面中添加一个原生 input range 元素，可以发现 input range 的拖拽失效了。&lt;/p&gt;
&lt;p class=&quot;codepen&quot; data-height=&quot;360&quot; data-theme-id=&quot;dark&quot; data-slug-hash=&quot;NyepZX&quot; data-default-tab=&quot;result&quot; data-user=&quot;nzbin&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;drag with conflict issue&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/nzbin/pen/NyepZX/&quot;&gt;drag with conflict issue&lt;/a&gt; by Zongbin (&lt;a href=&quot;https://codepen.io/nzbin&quot;&gt;@nzbin&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;让我们看一下拖拽方法代码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; draggable = &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(modal, handle) {
...
  $(handle).on(&lt;/span&gt;'mousedown'&lt;span&gt;, dragStart);
  $(document).on(&lt;/span&gt;'mousemove'&lt;span&gt;, dragMove);
  $(document).on(&lt;/span&gt;'mouseup'&lt;span&gt;, dragEnd);
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;几乎网上的大部分拖拽案例都是上面这种绑定事件的方法。起初以为是 jQuery 事件绑定的问题，其实完全不相关，使用原生 JS 同样会遇到这种问题。&lt;/p&gt;
&lt;p&gt;再看一下拖拽的事件绑定，很明显，在 document 上绑定的事件和 input range 的拖拽事件冲突了。其实，document 作为最上层的节点，它上面不应该绑定其它事件（事件代理除外），如果绑定，必须是临时性绑定，否则一定会造成冲突。&lt;/p&gt;
&lt;h2&gt;解决方法&lt;/h2&gt;
&lt;p&gt;知道问题所在之后，解决方法也非常简单，其中参考了 jQuery UI 的处理方式。&lt;/p&gt;
&lt;p&gt;我们可以在拖拽开始的时候绑定 document 的事件，然后在拖拽结束的时候移除 document 的事件。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;var&lt;/span&gt; draggable = &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(modal, handle) {
...
  &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; dragStart = &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(e) {
...
    $(document).on(&lt;/span&gt;'mousemove'&lt;span&gt;, dragMove)
               .on(&lt;/span&gt;'mouseup'&lt;span&gt;, dragEnd);
  }
...

  &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; dragEnd = &lt;span&gt;function&lt;/span&gt;&lt;span&gt;(e) {
    $(document).off(&lt;/span&gt;'mousemove'&lt;span&gt;)
               .off(&lt;/span&gt;'mouseup'&lt;span&gt;);
...
  }

  $(handle).on(&lt;/span&gt;'mousedown'&lt;span&gt;, dragStart);
  
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;下面 CodePen 中的 input range 已经可以正常拖动了。&lt;/p&gt;
&lt;p class=&quot;codepen&quot; data-height=&quot;360&quot; data-theme-id=&quot;dark&quot; data-slug-hash=&quot;WMLjyL&quot; data-default-tab=&quot;result&quot; data-user=&quot;nzbin&quot; data-embed-version=&quot;2&quot; data-pen-title=&quot;drag with conflict issue fixed&quot;&gt;See the Pen &lt;a href=&quot;https://codepen.io/nzbin/pen/WMLjyL/&quot;&gt;drag with conflict issue fixed&lt;/a&gt; by Zongbin (&lt;a href=&quot;https://codepen.io/nzbin&quot;&gt;@nzbin&lt;/a&gt;) on &lt;a href=&quot;https://codepen.io&quot;&gt;CodePen&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;我们可以通过控制台的 Event Listener 查看绑定的事件，在平时的工作中，切记不要污染全局的默认事件。一般情况下，工作中并不会遇到本文所说的这一情况，但是如果真的碰到了，需要知道问题的所在。&lt;/p&gt;
</description>
<pubDate>Wed, 28 Feb 2018 06:46:00 +0000</pubDate>
<dc:creator>叙帝利</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/nzbin/p/8481241.html</dc:identifier>
</item>
<item>
<title>10分钟入门kubernetes(上) - 卿哥聊技术</title>
<link>http://www.cnblogs.com/huashao1985/p/8483074.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/huashao1985/p/8483074.html</guid>
<description>&lt;p&gt;kubernetes简称k8s, 主要用途是automate deployment, scaling, and managment of containerized applications。是目前非常火的docker集群部署管理方案，适用于部署microservice架构。是google15年的经验积淀。这就要说说google为啥要用container了，因为那个时候还没有virtual machine这个技术，当然现在发现这个方向的应用前景比virtual machine集群效果要好。提到kubernetes，不能不说CNCF，CNCF出品，必属精品。现在k8s和envoy(lyft的神作)打得火热，感觉是未来云服务商的主流架构，GKE是google k8s engine也是kubernetes的原始应用，不过Azure好像现在也开始支持k8s，amazon的ecs如果不是用的k8s做后端那么也势必会迁移到k8s。&lt;/p&gt;
&lt;p&gt;alternative solution to k8s:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;docker swarm&lt;/li&gt;
&lt;li&gt;hashicorp nomad&lt;/li&gt;
&lt;li&gt;apache mesos&lt;/li&gt;
&lt;li&gt;rancher&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;k8s的诞生&lt;/h2&gt;
&lt;p&gt;k8s的前身是google的Borg，google没有选择开源Borg，估计是因为内部依赖比较多，而是从头build了k8s，所以说k8s的架构从一开始就站在google15年大型container管理经验的肩上，根正苗红。Google 2015年发表了著名的Borg paper “Large-scale cluster management at Google with Borg”，从而将秘密昭示天下。&lt;/p&gt;
&lt;p&gt;下面是一个趣闻，说mesos是怎么诞生的，当时伯克利的一群科学家和google做Borg的工程师酒后闲聊，弄明白了Borg的核心原理，然后就搞出了mesos，所以mesos反而是抢在了k8s的前面，提前成为了很多大公司包括twitter，verizon在内的解决方案，k8s这个正品反而由硅谷的startup率先尝试。所以江湖传言说需求大还是要靠mesos就是这么来的，但是k8s正在飞速的证明自己的成熟度。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1321773/201802/1321773-20180228122922003-2122510495.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h2&gt;k8s 架构&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1321773/201802/1321773-20180228123352141-1977788029.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;k8s could be deployed as services on VMs or bare-metal machines.&lt;/p&gt;
&lt;h2&gt;k8s 的安装，本文仅限于单机版minikube&lt;/h2&gt;
&lt;p&gt;安装minikube&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
https://github.com/kubernetes/minikube
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装kubectl&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
https://kubernetes.io/docs/tasks/tools/install-kubectl/#install-kubectl-binary-via-curl
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;安装virtualbox&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
https://www.virtualbox.org/wiki/Downloads
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt; k8s dashboard&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot;&gt;
&lt;pre&gt;
minikube dashboard
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在dashboard里create app redis，name redis，然后查看：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
$ kubectl get pods
NAME                     READY     STATUS    RESTARTS   AGE
redis-76d7657885-rk6tm   1/1       Running   0          1m
$ kubectl get deployment
NAME      DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
redis     1         1         1            1           2m
$ kubectl get replicaset
NAME               DESIRED   CURRENT   READY     AGE
redis-76d7657885   1         1         1         2m
$ kubectl get nodes
NAME       STATUS    ROLES     AGE       VERSION
minikube   Ready     &amp;lt;none&amp;gt;    14d       v1.9.0
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;kubectl 应用&lt;/h2&gt;
&lt;p&gt;check redis logs并与redis进行简单交互：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
$ kubectl logs redis-76d7657885-rk6tm
1:C 27 Feb 21:47:54.141 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo
1:C 27 Feb 21:47:54.141 # Redis version=4.0.8, bits=64, commit=00000000, modified=0, pid=1, just started
1:C 27 Feb 21:47:54.141 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf
1:M 27 Feb 21:47:54.146 * Running mode=standalone, port=6379.
1:M 27 Feb 21:47:54.147 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128.
1:M 27 Feb 21:47:54.147 # Server initialized
1:M 27 Feb 21:47:54.147 * Ready to accept connections
$ kubectl exec -ti redis-76d7657885-rk6tm -- redis-cli
127.0.0.1:6379&amp;gt; set foo bar
OK
127.0.0.1:6379&amp;gt; get foo
&quot;bar&quot;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;查看pod的yaml输出，object存于etcd中&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
$get pods redis-76d7657885-rk6tm -o yaml
apiVersion: v1
kind: Pod
metadata:
  creationTimestamp: 2018-02-27T21:47:43Z
  generateName: redis-76d7657885-
  labels:
    k8s-app: redis
    pod-template-hash: &quot;3283213441&quot;
  name: redis-76d7657885-rk6tm
  ...
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;刚才是通过dashboard的create button创建的pod，下面通过yaml创建pod：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
$ cat pod.yaml 
apiVersion: v1
kind: Pod
metadata:
  name: qingge
spec:
  containers:
  - name: nginx
    image: nginx
$ kubectl create -f pod.yaml
pod &quot;qingge&quot; created
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;显示pods&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
$ kubectl get pods
NAME                     READY     STATUS              RESTARTS   AGE
qingge                  0/1       ContainerCreating   0          6s
redis-76d7657885-rk6tm   1/1       Running             0          16m
$ kubectl get pods
NAME                     READY     STATUS    RESTARTS   AGE
qingge                  1/1       Running   0          1m
redis-76d7657885-rk6tm   1/1       Running   0          17m
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;启动proxy：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
$ kubectl proxy
Starting to serve on 127.0.0.1:8001
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;访问proxy：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;53&quot;&gt;
&lt;pre&gt;
$ curl localhost:8001
{
  &quot;paths&quot;: [
    &quot;/api&quot;,
    &quot;/api/v1&quot;,
    &quot;/apis&quot;,
    &quot;/apis/&quot;,
...
&lt;/pre&gt;
&lt;p&gt;  $ curl localhost:8001/api/v1&lt;/p&gt;
&lt;p&gt;  {&lt;/p&gt;
&lt;p&gt;  &quot;kind&quot;: &quot;APIResourceList&quot;,&lt;/p&gt;
&lt;p&gt;  &quot;groupVersion&quot;: &quot;v1&quot;,&lt;/p&gt;
&lt;p&gt;  &quot;resources&quot;: [&lt;/p&gt;
&lt;p&gt;    {&lt;/p&gt;
&lt;p&gt;      &quot;name&quot;: &quot;bindings&quot;,&lt;/p&gt;
&lt;p&gt;      &quot;singularName&quot;: &quot;&quot;,&lt;/p&gt;
&lt;p&gt;      &quot;namespaced&quot;: true,&lt;/p&gt;
&lt;p&gt;      &quot;kind&quot;: &quot;Binding&quot;,&lt;/p&gt;
&lt;p&gt;      &quot;verbs&quot;: [&lt;/p&gt;
&lt;p&gt;        &quot;create&quot;&lt;/p&gt;
&lt;p&gt;      ]&lt;/p&gt;
&lt;p&gt;... &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;delete pods:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
$ kubectl delete pods qingge
&lt;/pre&gt;
&lt;p&gt;　pod &quot;qingge&quot; deleted&lt;/p&gt;
&lt;p&gt;$ kubectl get pods&lt;/p&gt;
&lt;p&gt;NAME                     READY     STATUS    RESTARTS   AGE&lt;/p&gt;
&lt;p&gt;redis-76d7657885-rk6tm   1/1       Running   0          28m&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;namespace:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
$ kubectl get ns
NAME          STATUS    AGE
default       Active    14d
kube-public   Active    14d
kube-system   Active    14d
$ kubectl get pods --all-namespaces
NAMESPACE     NAME                                    READY     STATUS    RESTARTS   AGE
default       redis-76d7657885-rk6tm                  1/1       Running   0          33m
kube-system   kube-addon-manager-minikube             1/1       Running   1          14d
kube-system   kube-dns-54cccfbdf8-mhr9h               3/3       Running   3          14d
kube-system   kubernetes-dashboard-77d8b98585-5r7qv   1/1       Running   1          14d
kube-system   storage-provisioner                     1/1       Running   1          14d
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;添加quota 限制：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
$ kubectl create quota qingge --hard=pods=1
resourcequota &quot;qingge&quot; created
$ kubectl get quota
NAME      AGE
qingge   12s
$ kubectl get quota qingge -o yaml
apiVersion: v1
kind: ResourceQuota
metadata:
  creationTimestamp: 2018-02-27T22:24:08Z
  name: qingge
  namespace: default
  resourceVersion: &quot;2185&quot;
  selfLink: /api/v1/namespaces/default/resourcequotas/qingge
  uid: ed5ec545-1c0c-11e8-aa17-08002725a271
spec:
  hard:
    pods: &quot;1&quot;
status:
  hard:
    pods: &quot;1&quot;
  used:
    pods: &quot;1&quot;&lt;/pre&gt;
&lt;p&gt;$ kubectl create -f pod.yaml&lt;/p&gt;
&lt;p&gt;Error from server (Forbidden): error when creating &quot;pod.yaml&quot;: pods &quot;qingge&quot; is forbidden: exceeded quota: qingge, requested: pods=1, used: pods=1, limited: pods=1 &lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;修改quota 把spec中的pods改为2，然后就可以添加pod了&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
$ kubectl edit resourcequota oreilly
resourcequota &quot;qingge&quot; edited
$ kubectl create -f pod.yaml
pod &quot;qingge&quot; created
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;观察删除redis后会自动被replica恢复：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
$ kubectl delete pods redis-76d7657885-rk6tm
pod &quot;redis-76d7657885-rk6tm&quot; deleted
$ kubectl get pods
NAME                     READY     STATUS              RESTARTS   AGE
redis-76d7657885-lnmps   0/1       ContainerCreating   0          2s
redis-76d7657885-rk6tm   0/1       Terminating         0          43m
$ kubectl get pods
NAME                     READY     STATUS        RESTARTS   AGE
redis-76d7657885-lnmps   1/1       Running       0          6s
redis-76d7657885-rk6tm   0/1       Terminating   0          44m
$ kubectl get pods
NAME                     READY     STATUS    RESTARTS   AGE
redis-76d7657885-lnmps   1/1       Running   0          8s
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;添加nginx&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;50&quot;&gt;
&lt;pre&gt;
$ more rs.yaml
apiVersion: extensions/v1beta1
kind: ReplicaSet
metadata:
  name: nginx
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      name: nginx-pod
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx-containers
        image: nginx&lt;/pre&gt;
&lt;p&gt;$ kubectl create -f rs.yaml &lt;/p&gt;
&lt;p&gt;replicaset &quot;nginx&quot; created&lt;/p&gt;
&lt;p&gt;$ kubectl get replicaset&lt;/p&gt;
&lt;p&gt;NAME               DESIRED   CURRENT   READY     AGE&lt;/p&gt;
&lt;p&gt;nginx              2         1         1         7s&lt;/p&gt;
&lt;p&gt;redis-76d7657885   1         1         1         50m&lt;/p&gt;
&lt;p&gt;$ kubectl get pods&lt;/p&gt;
&lt;p&gt;NAME                     READY     STATUS    RESTARTS   AGE&lt;/p&gt;
&lt;p&gt;nginx-dr4t9              1/1       Running   0          33s&lt;/p&gt;
&lt;p&gt;redis-76d7657885-lnmps   1/1       Running   0          6m&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;测试删除后自动回复：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
$ kubectl delete pods nginx-dr4t9
pod &quot;nginx-dr4t9&quot; deleted
$ kubectl get pods
NAME                     READY     STATUS              RESTARTS   AGE
nginx-g8spl              1/1       Running             0          3s
nginx-mflm7              0/1       ContainerCreating   0          2s
redis-76d7657885-lnmps   1/1       Running             0          8m
$ kubectl get pods
NAME                     READY     STATUS    RESTARTS   AGE
nginx-g8spl              1/1       Running   0          6s
nginx-mflm7              1/1       Running   0          5s
redis-76d7657885-lnmps   1/1       Running   0          8m
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;选择label：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
$ kubectl get pods -l app=nginx
NAME          READY     STATUS    RESTARTS   AGE
nginx-g8spl   1/1       Running   0          3h
nginx-mflm7   1/1       Running   0          3h
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;添加label：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
$ kubectl get pods -Lapp
NAME                     READY     STATUS    RESTARTS   AGE       APP
nginx-g8spl              1/1       Running   0          3h        nginx
nginx-mflm7              1/1       Running   0          3h        nginx
redis-76d7657885-lnmps   1/1       Running   0          3h        
$ kubectl label pods redis-76d7657885-lnmps app=redis
pod &quot;redis-76d7657885-lnmps&quot; labeled
$ kubectl get pods -Lapp
NAME                     READY     STATUS    RESTARTS   AGE       APP
nginx-g8spl              1/1       Running   0          3h        nginx
nginx-mflm7              1/1       Running   0          3h        nginx
redis-76d7657885-lnmps   1/1       Running   0          3h        redis
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;添加多个label，显示所有label&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
$ kubectl label pods nginx-g8spl foo=bar
pod &quot;nginx-g8spl&quot; labeled
$ kubectl get pods --show-labels
NAME                     READY     STATUS    RESTARTS   AGE       LABELS
nginx-g8spl              1/1       Running   0          3h        app=nginx,foo=bar
nginx-mflm7              1/1       Running   0          3h        app=nginx
redis-76d7657885-lnmps   1/1       Running   0          3h        app=redis,k8s-app=redis,pod-template-hash=3283213441
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;思考：如果此时overwrite 一个app=nginx的pod会有什么后果：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
$ kubectl label pods nginx-g8spl app=foobar --overwrite
pod &quot;nginx-g8spl&quot; labeled
$ kubectl get pods --show-labels
NAME                     READY     STATUS    RESTARTS   AGE       LABELS
nginx-g8spl              1/1       Running   0          3h        app=foobar,foo=baz
nginx-mflm7              1/1       Running   0          3h        app=nginx
nginx-mlhjs              1/1       Running   0          1m        app=nginx
redis-76d7657885-lnmps   1/1       Running   0          3h        app=redis,k8s-app=redis,pod-template-hash=3283213441
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;答：会额外多生成一个nginx pod，因为replicaset为label app=nginx定义的数量是2，所以它会始终维护数量为2&lt;/p&gt;
&lt;p&gt;添加service：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
$ cat svc.yaml 
apiVersion: v1
kind: Service
metadata:
  name: nginx
spec:
  ports:
  - name: main
    port: 80
  selector:
    app: nginx
  type: NodePort
&lt;/pre&gt;
&lt;p&gt;$ kubectl create -f svc.yaml&lt;/p&gt;
&lt;p&gt;service &quot;nginx&quot; created&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;查看并启动服务，会在浏览器中看到nginx的欢迎界面，port number是30978&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
$ kubectl get svc
NAME         TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE
kubernetes   ClusterIP   10.96.0.1        &amp;lt;none&amp;gt;        443/TCP        14d
nginx        NodePort    10.110.210.218   &amp;lt;none&amp;gt;        80:30978/TCP   5s&lt;br/&gt;$ minikube service nginx&lt;/pre&gt;
&lt;p&gt;  $ kubectl get endpoints&lt;/p&gt;
&lt;p&gt;NAME         ENDPOINTS                     AGE&lt;/p&gt;
&lt;p&gt;kubernetes   10.0.2.15:8443                14d&lt;/p&gt;
&lt;p&gt;nginx        172.17.0.6:80,172.17.0.7:80   1h&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;下面来个牛逼的操作，scale：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
$ kubectl scale rs nginx --replicas=5
replicaset &quot;nginx&quot; scaled
$ kubectl get rs
NAME               DESIRED   CURRENT   READY     AGE
nginx              5         5         5         5h
redis-76d7657885   1         1         1         5h
$ kubectl get pods
NAME                     READY     STATUS    RESTARTS   AGE
nginx-d8n5h              1/1       Running   0          13s
nginx-g8spl              1/1       Running   0          5h
nginx-mflm7              1/1       Running   0          5h
nginx-mlhjs              1/1       Running   0          1h
nginx-nc5z7              1/1       Running   0          13s
nginx-t228t              1/1       Running   0          13s
redis-76d7657885-lnmps   1/1       Running   0          5h
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我已经create了一个busybox，下面通过busybox来观察nginx：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
$ kubectl exec -ti busybox-7c6c97f7cb-s6trg -- /bin/sh
/ # 
/ # nslookup nginx
Server:    10.96.0.10
Address 1: 10.96.0.10 kube-dns.kube-system.svc.cluster.local

Name:      nginx
Address 1: 10.110.210.218 nginx.default.svc.cluster.local
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;访问nginx：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
/ # wget 10.110.210.218
Connecting to 10.110.210.218 (10.110.210.218:80)
index.html           100% |*************************************************************************************************************************|   612   0:00:00 ETA
/ # head index.html 
&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;
&amp;lt;style&amp;gt;
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;好了，今天到此为止，更多内容下回分解&lt;/p&gt;
</description>
<pubDate>Wed, 28 Feb 2018 06:20:00 +0000</pubDate>
<dc:creator>卿哥聊技术</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/huashao1985/p/8483074.html</dc:identifier>
</item>
<item>
<title>Java对象的序列化和反序列化 - Ryan.Miao</title>
<link>http://www.cnblogs.com/woshimrf/p/java-serialize.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/woshimrf/p/java-serialize.html</guid>
<description>&lt;h2 id=&quot;前言&quot;&gt;前言&lt;/h2&gt;
&lt;p&gt;序列化和反序列化看起来用的不多，但用起来就很关键，因为稍一不注意就会出现问题。序列化的应用场景在哪里？当然是数据存储和传输。比如缓存，需要将对象复刻到硬盘存储，即使断电也可以重新反序列化恢复。下面简单理解序列化的用法以及注意事项。&lt;/p&gt;
&lt;h2 id=&quot;如何序列化&quot;&gt;如何序列化&lt;/h2&gt;
&lt;p&gt;Java中想要序列化一个对象，必须实现&lt;code&gt;Serializable&lt;/code&gt;接口。然后就可以持久化和反序列化了。下面是一个简单用法。&lt;/p&gt;
&lt;p&gt;项目测试代码：&lt;br/&gt;&lt;a href=&quot;https://github.com/Ryan-Miao/someTest/blob/master/src/main/java/com/test/java/serial/TestSerialize.java&quot; class=&quot;uri&quot;&gt;https://github.com/Ryan-Miao/someTest/blob/master/src/main/java/com/test/java/serial/TestSerialize.java&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;我们给一个测试类：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;package com.test.java.serial;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;import lombok.Builder;&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;import lombok.Data;&lt;/span&gt;

&lt;span class=&quot;kw&quot;&gt;import java.io.Serializable;&lt;/span&gt;

&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@author &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;Ryan Miao&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;fu&quot;&gt;@Data&lt;/span&gt;
&lt;span class=&quot;fu&quot;&gt;@Builder&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Foo &lt;span class=&quot;kw&quot;&gt;implements&lt;/span&gt; Serializable {

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String LOGGER = &lt;span class=&quot;st&quot;&gt;&quot;logger&quot;&lt;/span&gt;;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String PUB_STATIC_FINAL = &lt;span class=&quot;st&quot;&gt;&quot;publicStaticFinal&quot;&lt;/span&gt;;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; String PUB_STATIC;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; String fa;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String fb;
    &lt;span class=&quot;kw&quot;&gt;transient&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; String ta;
    &lt;span class=&quot;kw&quot;&gt;transient&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; String tb;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后，测试序列化和反序列的数据是否丢失。&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;16&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; TestSerialize {

    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String filename = &lt;span class=&quot;st&quot;&gt;&quot;D:/test.txt&quot;&lt;/span&gt;;

    &lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testSer&lt;/span&gt;() &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; IOException, ClassNotFoundException {
        &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; Foo foo = Foo.&lt;span class=&quot;fu&quot;&gt;builder&lt;/span&gt;()
                .&lt;span class=&quot;fu&quot;&gt;fa&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;fa&quot;&lt;/span&gt;)
                .&lt;span class=&quot;fu&quot;&gt;fb&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;fb&quot;&lt;/span&gt;)
                .&lt;span class=&quot;fu&quot;&gt;ta&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;ta&quot;&lt;/span&gt;)
                .&lt;span class=&quot;fu&quot;&gt;tb&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;tb&quot;&lt;/span&gt;)
                .&lt;span class=&quot;fu&quot;&gt;build&lt;/span&gt;();

        Foo.&lt;span class=&quot;fu&quot;&gt;PUB_STATIC&lt;/span&gt;  = &lt;span class=&quot;st&quot;&gt;&quot;test&quot;&lt;/span&gt;;

        ObjectOutputStream os = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ObjectOutputStream(
                &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; FileOutputStream(filename));
        os.&lt;span class=&quot;fu&quot;&gt;writeObject&lt;/span&gt;(foo);
        os.&lt;span class=&quot;fu&quot;&gt;flush&lt;/span&gt;();
        os.&lt;span class=&quot;fu&quot;&gt;close&lt;/span&gt;();

    }

    &lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testRead&lt;/span&gt;() &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; IOException, ClassNotFoundException {
        ObjectInputStream is = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ObjectInputStream(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; FileInputStream(filename));
        Foo foo2 = (Foo) is.&lt;span class=&quot;fu&quot;&gt;readObject&lt;/span&gt;();
        is.&lt;span class=&quot;fu&quot;&gt;close&lt;/span&gt;();

        Assert.&lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;fa&quot;&lt;/span&gt;, foo2.&lt;span class=&quot;fu&quot;&gt;getFa&lt;/span&gt;());
        Assert.&lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;fb&quot;&lt;/span&gt;, foo2.&lt;span class=&quot;fu&quot;&gt;getFb&lt;/span&gt;());
        Assert.&lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;, foo2.&lt;span class=&quot;fu&quot;&gt;getTa&lt;/span&gt;());
        Assert.&lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;, foo2.&lt;span class=&quot;fu&quot;&gt;getTb&lt;/span&gt;());

        Assert.&lt;span class=&quot;fu&quot;&gt;assertNull&lt;/span&gt;(foo2.&lt;span class=&quot;fu&quot;&gt;PUB_STATIC&lt;/span&gt;);
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;显然，&lt;code&gt;transient&lt;/code&gt;修饰的字段不能被序列化，至于静态字段，这里不做测试，但要清楚。静态字段只和class类相关，和实例无关。而序列化是针对实例的，所以无所谓对比内容变化。那么，静态字段反序列化后数据是什么样子的呢？当然是类变量本身应该的样子。如果没有初始化，则是默认值， 本测试中的结果为null。&lt;/p&gt;
&lt;h2 id=&quot;为什么可以序列化&quot;&gt;为什么可以序列化&lt;/h2&gt;
&lt;p&gt;我们只要实现了&lt;code&gt;Serialiable&lt;/code&gt;就可以序列化，那么为什么呢？查看&lt;code&gt;ObjectOutputStream&lt;/code&gt;的&lt;code&gt;writeObject&lt;/code&gt;方法。&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;17&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;co&quot;&gt;// remaining cases&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;kw&quot;&gt;instanceof&lt;/span&gt; String) {
    &lt;span class=&quot;fu&quot;&gt;writeString&lt;/span&gt;((String) obj, unshared);
} &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (cl.&lt;span class=&quot;fu&quot;&gt;isArray&lt;/span&gt;()) {
    &lt;span class=&quot;fu&quot;&gt;writeArray&lt;/span&gt;(obj, desc, unshared);
} &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;kw&quot;&gt;instanceof&lt;/span&gt; Enum) {
    &lt;span class=&quot;fu&quot;&gt;writeEnum&lt;/span&gt;((Enum&amp;lt;?&amp;gt;) obj, desc, unshared);
} &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;kw&quot;&gt;instanceof&lt;/span&gt; Serializable) {
    &lt;span class=&quot;fu&quot;&gt;writeOrdinaryObject&lt;/span&gt;(obj, desc, unshared);
} &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; {
    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (extendedDebugInfo) {
        &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; NotSerializableException(
            cl.&lt;span class=&quot;fu&quot;&gt;getName&lt;/span&gt;() + &lt;span class=&quot;st&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;&lt;/span&gt; + debugInfoStack.&lt;span class=&quot;fu&quot;&gt;toString&lt;/span&gt;());
    } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; NotSerializableException(cl.&lt;span class=&quot;fu&quot;&gt;getName&lt;/span&gt;());
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;显然，只针对String，Enum以及Serializable做了处理，因此想要序列化必须要实现这个接口。当然，String和Enum也实现了Serializable。&lt;/p&gt;
&lt;h2 id=&quot;如何自定义序列化java基础类库中的arraylist等为什么用transient还能序列化&quot;&gt;如何自定义序列化，Java基础类库中的ArrayList等为什么用transient还能序列化&lt;/h2&gt;
&lt;p&gt;简单的对象，对于不想序列化的字段，只要声明为&lt;code&gt;transient&lt;/code&gt;就好。而有时候，我想对部分字段处理后序列化。比如ArrayList中存储数据的&lt;code&gt;transient Object[] elementData;&lt;/code&gt;。我们知道ArrayList是可以序列化的，根源就在于自定义这里了。下面跟踪&lt;code&gt;ObjectOutputStream&lt;/code&gt;源码，知道自定义的执行部分就可以验证了。&lt;/p&gt;
&lt;p&gt;入口： java.io.ObjectOutputStream#writeObject&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;writeObject&lt;/span&gt;(Object obj) &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (enableOverride) {
        &lt;span class=&quot;fu&quot;&gt;writeObjectOverride&lt;/span&gt;(obj);
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt;;
    }
    &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;fu&quot;&gt;writeObject0&lt;/span&gt;(obj, &lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;);
    } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (IOException ex) {
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (depth == &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) {
            &lt;span class=&quot;fu&quot;&gt;writeFatalException&lt;/span&gt;(ex);
        }
        &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; ex;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;然后，核心方法&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;19&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;writeObject0&lt;/span&gt;(Object obj, &lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; unshared)
        &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; IOException{
    &lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; oldMode = bout.&lt;span class=&quot;fu&quot;&gt;setBlockDataMode&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;);depth++;
    &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
        &lt;span class=&quot;co&quot;&gt;//省略若干行&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (;;) {
            &lt;span class=&quot;co&quot;&gt;// 省略若干行&lt;/span&gt;
            desc = ObjectStreamClass.&lt;span class=&quot;fu&quot;&gt;lookup&lt;/span&gt;(cl, &lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;);
            &lt;span class=&quot;co&quot;&gt;//省略若干行&lt;/span&gt;
        }
        &lt;span class=&quot;co&quot;&gt;//省略若干行&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;kw&quot;&gt;instanceof&lt;/span&gt; String) {
            &lt;span class=&quot;fu&quot;&gt;writeString&lt;/span&gt;((String) obj, unshared);
        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (cl.&lt;span class=&quot;fu&quot;&gt;isArray&lt;/span&gt;()) {
            &lt;span class=&quot;fu&quot;&gt;writeArray&lt;/span&gt;(obj, desc, unshared);
        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;kw&quot;&gt;instanceof&lt;/span&gt; Enum) {
            &lt;span class=&quot;fu&quot;&gt;writeEnum&lt;/span&gt;((Enum&amp;lt;?&amp;gt;) obj, desc, unshared);
        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (obj &lt;span class=&quot;kw&quot;&gt;instanceof&lt;/span&gt; Serializable) {
            &lt;span class=&quot;fu&quot;&gt;writeOrdinaryObject&lt;/span&gt;(obj, desc, unshared);
        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;co&quot;&gt;//....&lt;/span&gt;
        }
    } &lt;span class=&quot;kw&quot;&gt;finally&lt;/span&gt; {
        depth--;
        bout.&lt;span class=&quot;fu&quot;&gt;setBlockDataMode&lt;/span&gt;(oldMode);
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这里，显然可以看到真正的执行序列化代码是&lt;code&gt;writeOrdinaryObject(obj, desc, unshared);&lt;/code&gt;。 但直接追踪进去发现里面有许多初始化的字段是在之前做的处理。因此，先卖个关子，看前面初始化的部分，只找到我们想要初始化的字段即可。&lt;/p&gt;
&lt;p&gt;进入&lt;code&gt;desc = ObjectStreamClass.lookup(cl, true);&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; ObjectStreamClass &lt;span class=&quot;fu&quot;&gt;lookup&lt;/span&gt;(Class&amp;lt;?&amp;gt; cl, &lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; all) {
    &lt;span class=&quot;co&quot;&gt;//省略若干行&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (entry == &lt;span class=&quot;kw&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
            entry = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ObjectStreamClass(cl);
        } &lt;span class=&quot;kw&quot;&gt;catch&lt;/span&gt; (Throwable th) {
            entry = th;
        }
        &lt;span class=&quot;co&quot;&gt;//.....&lt;/span&gt;
    }
    &lt;span class=&quot;co&quot;&gt;//省略若干行&lt;/span&gt;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;进入&lt;code&gt;entry = new ObjectStreamClass(cl);&lt;/code&gt;这里就是真正的初始化地方，前面省略的代码是缓存处理，当然缓存使用的ConcurrentHashMap。&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;16&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; ObjectStreamClass(&lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; Class&amp;lt;?&amp;gt; cl) {
    &lt;span class=&quot;co&quot;&gt;//省略无数行以及括号&lt;/span&gt;
    writeObjectMethod = &lt;span class=&quot;fu&quot;&gt;getPrivateMethod&lt;/span&gt;(cl, &lt;span class=&quot;st&quot;&gt;&quot;writeObject&quot;&lt;/span&gt;,
                            &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Class&amp;lt;?&amp;gt;[] { ObjectOutputStream.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt; },
                            Void.&lt;span class=&quot;fu&quot;&gt;TYPE&lt;/span&gt;);
    readObjectMethod = &lt;span class=&quot;fu&quot;&gt;getPrivateMethod&lt;/span&gt;(cl, &lt;span class=&quot;st&quot;&gt;&quot;readObject&quot;&lt;/span&gt;,
                            &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Class&amp;lt;?&amp;gt;[] { ObjectInputStream.&lt;span class=&quot;fu&quot;&gt;class&lt;/span&gt; },
                            Void.&lt;span class=&quot;fu&quot;&gt;TYPE&lt;/span&gt;);
    &lt;span class=&quot;co&quot;&gt;//省略无数行&lt;/span&gt;&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;没错，费了这么大劲就是为了找到这两个method。通过反射，获取到目标class的两个私有方法&lt;code&gt;writeObject&lt;/code&gt;, &lt;code&gt;readObject&lt;/code&gt;。这两个就是自定义方法所在。&lt;/p&gt;
&lt;p&gt;初始化完毕之后，我们再来继续序列化的代码. 回到刚才的核心方法，找到&lt;code&gt;writeOrdinaryObject(obj, desc, unshared);&lt;/code&gt;， 进入，然后，继续找到&lt;code&gt;writeSerialData(obj, desc);&lt;/code&gt;, 到这里就是真正执行序列化的代码了。&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;14&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;
&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;writeSerialData&lt;/span&gt;(Object obj, ObjectStreamClass desc)
        &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; IOException
{
    ObjectStreamClass.&lt;span class=&quot;fu&quot;&gt;ClassDataSlot&lt;/span&gt;[] slots = desc.&lt;span class=&quot;fu&quot;&gt;getClassDataLayout&lt;/span&gt;();
    &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;; i &amp;lt; slots.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;; i++) {
        ObjectStreamClass slotDesc = slots[i].&lt;span class=&quot;fu&quot;&gt;desc&lt;/span&gt;;
        &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (slotDesc.&lt;span class=&quot;fu&quot;&gt;hasWriteObjectMethod&lt;/span&gt;()) {
            &lt;span class=&quot;co&quot;&gt;//....&lt;/span&gt;
            &lt;span class=&quot;kw&quot;&gt;try&lt;/span&gt; {
                curContext = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;SerialCallbackContext&lt;/span&gt;(obj, slotDesc);
                bout.&lt;span class=&quot;fu&quot;&gt;setBlockDataMode&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;);
                slotDesc.&lt;span class=&quot;fu&quot;&gt;invokeWriteObject&lt;/span&gt;(obj, &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;);
                bout.&lt;span class=&quot;fu&quot;&gt;setBlockDataMode&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;);
                bout.&lt;span class=&quot;fu&quot;&gt;writeByte&lt;/span&gt;(TC_ENDBLOCKDATA);
            } &lt;span class=&quot;kw&quot;&gt;finally&lt;/span&gt; {
                &lt;span class=&quot;co&quot;&gt;//...&lt;/span&gt;
            }

            curPut = oldPut;
        } &lt;span class=&quot;kw&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;fu&quot;&gt;defaultWriteFields&lt;/span&gt;(obj, slotDesc);
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;显然，判断&lt;code&gt;writeObject&lt;/code&gt;这个method是否初始化了，如果有，则直接调用这个方法，没有则默认处理。到此，跟踪完毕，我想要自定义序列化只要重写&lt;code&gt;writeObject&lt;/code&gt;, &lt;code&gt;readObject&lt;/code&gt;这两个方法即可。&lt;/p&gt;
&lt;h3 id=&quot;下面看看arraylist是怎么做的&quot;&gt;下面看看ArrayList是怎么做的&lt;/h3&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;writeObject&lt;/span&gt;(java.&lt;span class=&quot;fu&quot;&gt;io&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;ObjectOutputStream&lt;/span&gt; s)
    &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; java.&lt;span class=&quot;fu&quot;&gt;io&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;IOException&lt;/span&gt;{
    &lt;span class=&quot;co&quot;&gt;// Write out element count, and any hidden stuff&lt;/span&gt;
    &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; expectedModCount = modCount;
    s.&lt;span class=&quot;fu&quot;&gt;defaultWriteObject&lt;/span&gt;();

    &lt;span class=&quot;co&quot;&gt;// Write out size as capacity for behavioural compatibility with clone()&lt;/span&gt;
    s.&lt;span class=&quot;fu&quot;&gt;writeInt&lt;/span&gt;(size);

    &lt;span class=&quot;co&quot;&gt;// Write out all elements in the proper order.&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;; i&amp;lt;size; i++) {
        s.&lt;span class=&quot;fu&quot;&gt;writeObject&lt;/span&gt;(elementData[i]);
    }

    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (modCount != expectedModCount) {
        &lt;span class=&quot;kw&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ConcurrentModificationException();
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;因为数组被设置不允许序列化，先默认序列化其他信息，然后单独处理数组里的内容，挨着写入元素。然后，对应读取方法也要改。&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;readObject&lt;/span&gt;(java.&lt;span class=&quot;fu&quot;&gt;io&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;ObjectInputStream&lt;/span&gt; s)
    &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; java.&lt;span class=&quot;fu&quot;&gt;io&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;IOException&lt;/span&gt;, ClassNotFoundException {
    elementData = EMPTY_ELEMENTDATA;

    &lt;span class=&quot;co&quot;&gt;// Read in size, and any hidden stuff&lt;/span&gt;
    s.&lt;span class=&quot;fu&quot;&gt;defaultReadObject&lt;/span&gt;();

    &lt;span class=&quot;co&quot;&gt;// Read in capacity&lt;/span&gt;
    s.&lt;span class=&quot;fu&quot;&gt;readInt&lt;/span&gt;(); &lt;span class=&quot;co&quot;&gt;// ignored&lt;/span&gt;

    &lt;span class=&quot;kw&quot;&gt;if&lt;/span&gt; (size &amp;gt; &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;) {
        &lt;span class=&quot;co&quot;&gt;// be like clone(), allocate array based upon size not capacity&lt;/span&gt;
        &lt;span class=&quot;fu&quot;&gt;ensureCapacityInternal&lt;/span&gt;(size);

        Object[] a = elementData;
        &lt;span class=&quot;co&quot;&gt;// Read in all elements in the proper order.&lt;/span&gt;
        &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i=&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;; i&amp;lt;size; i++) {
            a[i] = s.&lt;span class=&quot;fu&quot;&gt;readObject&lt;/span&gt;();
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;为什么要这么做？因为数组元素有很多空余空间，对我们来说不需要序列化。通过这样自定义，把需要的元素序列化，可以节省空间。&lt;/p&gt;
&lt;h2 id=&quot;serialversionuid为什么有的有有的没有什么时候用意义是什么&quot;&gt;serialVersionUID为什么有的有，有的没有，什么时候用，意义是什么&lt;/h2&gt;
&lt;p&gt;以下内容来自： &lt;a href=&quot;https://www.cnblogs.com/ouym/p/6654798.html&quot; class=&quot;uri&quot;&gt;https://www.cnblogs.com/ouym/p/6654798.html&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;什么是serialversionuid&quot;&gt;什么是serialVersionUID ?&lt;/h3&gt;
&lt;p&gt;serialVersionUID表示：“串行化版本统一标识符”（serial version universal identifier），简称UID&lt;/p&gt;
&lt;p&gt;serialVersionUID必须定义成下面这种形式：static final long serialVersionUID = xxxL;&lt;/p&gt;
&lt;p&gt;serialVersionUID 用来表明类的不同版本间的兼容性。有两种生成方式： 一个是默认的1L；另一种是根据类名、接口名、成员方法及属性等来生成一个64位的哈希字段 。&lt;/p&gt;
&lt;h3 id=&quot;为什么要声明serialversionuid&quot;&gt;为什么要声明serialVersionUID&lt;/h3&gt;
&lt;p&gt;java.io.ObjectOutputStream代表对象输出流，它的writeObject(Object obj)方法可对参数指定的obj对象进行序列化，把得到的字节序列写到一个目标输出流中。 java.io.ObjectInputStream代表对象输入流，它的readObject()方法从一个源输入流中读取字节序列，再把它们反序列化为一个对象，并将其返回。&lt;/p&gt;
&lt;p&gt;只有实现了Serializable或Externalizable接口的类的对象才能被序列化。&lt;/p&gt;
&lt;p&gt;Externalizable接口继承自Serializable接口，实现Externalizable接口的类完全由自身来控制序列化的行为，而仅实现Serializable接口的类可以采用默认的序列化方式 。 凡是实现Serializable接口的类都有一个表示序列化版本标识符的静态变量：&lt;code&gt;private static final long serialVersionUID;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;类的serialVersionUID的默认值完全依赖于Java编译器的实现，对于同一个类，用不同的Java编译器编译，有可能会导致不同的serialVersionUID。显式地定义serialVersionUID有两种用途：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;在某些场合，希望类的不同版本对序列化兼容，因此需要确保类的不同版本具有相同的serialVersionUID；在某些场合，不希望类的不同版本对序列化兼容，&lt;br/&gt;因此需要确保类的不同版本具有不同的serialVersionUID。&lt;/li&gt;
&lt;li&gt;当你序列化了一个类实例后，希望更改一个字段或添加一个字段，不设置serialVersionUID，所做的任何更改都将导致无法反序化旧有实例，并在反序列化时抛出一个异常。&lt;br/&gt;如果你添加了serialVersionUID，在反序列旧有实例时，新添加或更改的字段值将设为初始化值（对象为null，基本类型为相应的初始默认值），字段被删除将不设置。&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;注意事项&quot;&gt;注意事项&lt;/h2&gt;
&lt;ol readability=&quot;-1&quot;&gt;&lt;li&gt;序列化时，只对对象的状态进行保存，而不管对象的方法；&lt;/li&gt;
&lt;li&gt;当一个父类实现序列化，子类自动实现序列化，不需要显式实现Serializable接口；&lt;/li&gt;
&lt;li&gt;当一个对象的实例变量引用其他对象，序列化该对象时也把引用对象进行序列化；&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;并非所有的对象都可以序列化，,至于为什么不可以，有很多原因了,比如：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;安全方面的原因，比如一个对象拥有private，public等field，对于一个要传输的对象，比如写到文件，或者进行rmi传输等等，在序列化进行传输的过程中，这个对象的private等域是不受保护的。&lt;/li&gt;
&lt;li&gt;资源分配方面的原因，比如socket，thread类，如果可以序列化，进行传输或者保存，也无法对他们进行重新的资源分 配，而且，也是没有必要这样实现。&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;h2 id=&quot;参考&quot;&gt;参考&lt;/h2&gt;
</description>
<pubDate>Wed, 28 Feb 2018 04:46:00 +0000</pubDate>
<dc:creator>Ryan.Miao</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/woshimrf/p/java-serialize.html</dc:identifier>
</item>
<item>
<title>借腾讯开源 VasDolly，谈谈 Android 签名和多渠道打包的原理！ - 承香墨影</title>
<link>http://www.cnblogs.com/plokmju/p/8482993.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/plokmju/p/8482993.html</guid>
<description>&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a4bced365?w=900&amp;amp;h=500&amp;amp;f=jpeg&amp;amp;s=98161&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;一前言&quot;&gt;一、前言&lt;/h2&gt;
&lt;p&gt;Hi，大家好，我是承香墨影！&lt;/p&gt;
&lt;p&gt;当我们需要发布一款 App 到应用市场的时候，一般需要我们针对不同的市场生产不同的渠道包，它们使用的是同一套代码，只是会包含一些各自的渠道信息，用于我们做数据分析。&lt;/p&gt;
&lt;p&gt;前几天，企鹅电竞团队开源了自己的 Android Apk 多渠道打包工具：VasDolly，比美团的 Walle 更全面一些。&lt;/p&gt;
&lt;p&gt;正好借这个机会，来讲解一下 Android 的不同版本的签名机制的差异。&lt;/p&gt;
&lt;h2 id=&quot;二android-的签名&quot;&gt;二、Android 的签名&lt;/h2&gt;
&lt;h3 id=&quot;应用签名&quot;&gt;2.1 应用签名&lt;/h3&gt;
&lt;p&gt;通过对 Apk 进行签名，开发者可以证明对 Apk 的所有权和控制权，可用于安装和更新其应用。而在 Android 设备上的安装 Apk ，如果是一个没有被签名的 Apk，则会被拒绝安装。&lt;/p&gt;
&lt;p&gt;在安装 Apk 的时候，软件包管理器也会验证 Apk 是否已经被正确签名，并且通过签名证书和数据摘要验证是否合法没有被篡改。只有确认安全无篡改的情况下，才允许安装在设备上。&lt;/p&gt;
&lt;p&gt;简单来说，APK 的签名主要作用有两个：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;证明 APK 的所有者。&lt;/li&gt;
&lt;li&gt;允许 Android 市场和设备校验 APK 的正确性。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;而在 Android 中，支持两种应用签名的方案：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;基于 &lt;strong&gt;JAR 签名方案&lt;/strong&gt;（v1 方案）。&lt;/li&gt;
&lt;li&gt;Android Nougat（7.0） 中引入的 &lt;strong&gt;APK 签名方案 v2&lt;/strong&gt;（v2 方案）。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;既然签名方案在升级，v1 方案一定有一些缺陷的地方，接下来我们先来了解一下这两个方案的细节。&lt;/p&gt;
&lt;h3 id=&quot;v1-签名方案&quot;&gt;2.2 v1 签名方案&lt;/h3&gt;
&lt;p&gt;v1 签名方案，并不会保护 Apk 内的所有内容，有一些例外部分，被修改也并不会导致签名失效。例如：ZIP 元数据。&lt;/p&gt;
&lt;p&gt;这样，在验证 APK 签名的时候，就需要处理大量不可信（尚未经过验证）的数据结构，然后还需要过滤并舍弃掉这部分不受签名保护的数据，再进行签名校验。也就是说你可以在已签名的文件中，增加一些不被签名保护的内容，这将导致受攻击的可能增大。&lt;/p&gt;
&lt;p&gt;另外，v1 方案是对 APK 内部的被保护的原始文件（未压缩），单独进行计算数据摘要，所以在验证期间，也需要对每个文件进行减压再进行签名校验，来验证是否被篡改。所以在验证 APK 签名的时候，必须解压 APK 的所有已压缩的文件条目进行数据摘要的校验，而这些，都将需要花费更多的时间和内存。&lt;/p&gt;
&lt;p&gt;正是因为 v1 方案的缺陷，Android 7.0 开始，才引入了 APK 签名方案 v2。&lt;/p&gt;
&lt;h3 id=&quot;v2-签名方案&quot;&gt;2.3 v2 签名方案&lt;/h3&gt;
&lt;p&gt;APK 签名方案 v2 是一种全文件的签名方案，该方案能够对 APK 所有受保护的部分进行签名保护，从能能够发现它们被篡改。&lt;/p&gt;
&lt;p&gt;在 APK 验证期间，v2 方案会将 APK 文件视为 Blob，并对整个文件进行签名检查。对 APK 进行的任何修改（包括对 ZIP 元数据的修改），都会使 APK 签名作废。&lt;/p&gt;
&lt;p&gt;使用 APK 签名方案 v2 进行签名时，会在 APK 文件中，插入一个 &lt;strong&gt;APK 签名块&lt;/strong&gt;，该分块位于“ZIP 中央目录”部分之前并紧邻该部分。在“APK 签名分块”内，v2 签名和签名者身份信息会存储在 &lt;strong&gt;APK 签名方案 v2 分块&lt;/strong&gt;中。&lt;/p&gt;
&lt;p&gt;该分块包含多个 &quot;ID-值&quot; 对，所采用的封装方式有助于更轻松地在 APK 中找到该分块。APK 的 v2 签名会存储为一个 &quot;ID-值&quot; 对，其中 ID 为 &lt;strong&gt;0x7109871a&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a4ca9325b?w=779&amp;amp;h=152&amp;amp;f=jpeg&amp;amp;s=30908&quot;/&gt;&lt;/p&gt;
&lt;p&gt;上图是签名前后，APK 文件结构的对比。可以看到在 v2 已签名的 APK 中，包含了 4 个部分。&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;ZIP 条目的内容。&lt;/li&gt;
&lt;li&gt;APK 签名分块（APK Signing Block）。&lt;/li&gt;
&lt;li&gt;ZIP 中央目录。&lt;/li&gt;
&lt;li&gt;ZIP 中央目录结尾。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;APK 签名方案 v2 负责保护第 1、3、4 部分的完整性，以及第 2 部分包含的 &lt;strong&gt;APK 签名方案 v2 分块&lt;/strong&gt;中的 &lt;code&gt;signed data&lt;/code&gt; 分块的完整性。&lt;/p&gt;
&lt;p&gt;第 1、3 和 4 部分的完整性通过其内容的一个或多个摘要来保护，这些摘要存储在 &lt;code&gt;signed data&lt;/code&gt; 分块中，而这些分块则通过一个或多个签名来保护。&lt;/p&gt;
&lt;p&gt;第 1、3 和 4 部分的摘要信息，采用一种类似两级 Merkle 树的方式进行计算，所以效率上会提高很多。这个就比较复杂了，大家有兴趣再深入研究。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a4cdb014b?w=823&amp;amp;h=292&amp;amp;f=jpeg&amp;amp;s=40181&quot;/&gt;&lt;/p&gt;
&lt;p&gt;既然已经有了 v2 方案，我们是否可以完全舍弃 v1 方案，只使用 v2 方案呢？&lt;/p&gt;
&lt;p&gt;从官方文档了解到，因为 APK 签名方案 v2 是在 Android 7.0 中引入的，为了使 APK 可以在 Android 6.0 以及更低的版本中正常安装，应该&lt;strong&gt;先使用 JAR签名（v1 签名）对 APK 进行签名然后再使用 v2 方案对其进行签名&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;而在实际测试中，这种仅使用 v2 方案不使用 v1 方案的情况，是可以编译通过的，并且在 Android 7.0 之上的设备上也是可以安装和运行，但是在 7.0 之下，因为不检测 v2 签名，而 APK 又不存在 v1 签名，在安装的时候，会提示没有签名的错误。&lt;/p&gt;
&lt;p&gt;为了保证兼容性的问题，在 7.0 以上的设备中，也是兼容了 v1 签名的方案。所以 v2 签名方案，暂时并不是一个强制的方案。&lt;/p&gt;
&lt;p&gt;优先级是：&lt;strong&gt;优先校验 v2 方案，没有或者不存在校验机制，则校验 v1 方案&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a536759b4?w=657&amp;amp;h=427&amp;amp;f=jpeg&amp;amp;s=37260&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;两种方案对比&quot;&gt;2.4 两种方案对比&lt;/h3&gt;
&lt;p&gt;到这里，我想应该对 v1 和 v2 签名方案应该已经有一定了解了。v2 签名既然是升级版，就是为了解决 v1 签名方案的一些问题。&lt;/p&gt;
&lt;p&gt;1、效率问题&lt;/p&gt;
&lt;p&gt;v1 方案，会在 &lt;code&gt;/META-INF/MANIFEST.MF&lt;/code&gt; 文件中，记录所有需要校验签名的文件的数据摘要，并且这里生产数据摘要是依据压缩前的源文件，而在打包的过程中，这些文件又会被压缩。&lt;/p&gt;
&lt;p&gt;所以在验证签名的过程中，需要先解压出原始文件，才能计算数据摘要从而验证它，而这个过程，会消耗更多的时间和内存。&lt;/p&gt;
&lt;p&gt;v2 签名方案，是对 APK 文件本身进行数据摘要计算，也就是说它只计算一个文件（v1 会计算 Apk 内的很多文件），这样就不存在解压 APK 的操作，效率和内存都得到优化。&lt;/p&gt;
&lt;p&gt;2、安全问题&lt;/p&gt;
&lt;p&gt;v1 方案，它只会对 APK 内部，部分文件进行校验，并不会对 APK 的完整性进行校验。因此，签名后，我们依然可以修改 APK 文件，例如：美团的多渠道方案就是在 &lt;code&gt;/META-INF/&lt;/code&gt; 目录下，添加一个空文件，使用文件名来标志渠道。&lt;/p&gt;
&lt;p&gt;而 v2 签名是针对整个 APK 进行校验，所以对 APK 的任何改动，都无法通过 v2 签名的验证，这样安全性会更高。&lt;/p&gt;
&lt;p&gt;关于签名校验的耗时上，主要影响的是安装耗时，这里有一份实验室数据（Nexus 6P、Android 7.1.1）可供参考。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a55cb3c70?w=686&amp;amp;h=230&amp;amp;f=jpeg&amp;amp;s=29958&quot;/&gt;&lt;/p&gt;
&lt;p&gt;差不多 2.x 倍的差距，v2 签名对 APK 的安装还是有不少提升的。&lt;/p&gt;
&lt;h2 id=&quot;三常见的多渠道方案&quot;&gt;三、常见的多渠道方案&lt;/h2&gt;
&lt;p&gt;多渠道的需求点，在于同一个 App，需要有一些不同来区分它们，最常见的场景就是 Android 国内的市场，对不同的市场使用不同的渠道包，它们的代码是一致的，只是一个渠道号的数据不一样。这样区分的好处在于数据更清晰，我们知道那个渠道的用户是优质用户。&lt;/p&gt;
&lt;h3 id=&quot;被废弃的方案&quot;&gt;3.1 被废弃的方案&lt;/h3&gt;
&lt;p&gt;既然签名方案在升级，多渠道的方案也需要升级。曾经有一写可行的方案，基本上已经被废弃了。例如：Gradle Plugin 配置不同的 Flavors、利用 ApkTool 解包改数据再重新打包并重新签名。&lt;/p&gt;
&lt;p&gt;这些方案都有一些局限性。例如 Gradle Flavors 方案，每个渠道都需要重新打包，非常的耗时，并且生成的渠道包 DEX 的 CRC 值都不一致，不利于我们使用热更新的方案；而 ApkTool 的方案，首先 解包→打包→重新签名 的过程同样耗时，其次在于，不稳定，可能升级了 Gradle Plugin 的版本之后，会导致解包失败。&lt;/p&gt;
&lt;p&gt;所以我们在想，一个高效的多渠道打包方案，有几个关键单需要注意。&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;不能破坏签名。&lt;/li&gt;
&lt;li&gt;不能重新打包。&lt;/li&gt;
&lt;li&gt;读取信息，必须高效。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;不破坏签名就限制了不能解包以及重新签名，势必对效率有所提高。&lt;/p&gt;
&lt;p&gt;而除了 VasDolly 之外，市面上流传比较广的就是 美团 给出的 Walle 方案，这里就以它们的原理进行简单的讲解。&lt;/p&gt;
&lt;h3 id=&quot;v1-签名下的常见多渠道方案&quot;&gt;3.2 v1 签名下的常见多渠道方案&lt;/h3&gt;
&lt;p&gt;v1 下对签名的校验比较弱了，美团给出了完整的解决方案。前面也介绍过，就是在以及打包签名好的 Apk 中，向 &lt;code&gt;/META-INF&lt;/code&gt; 目录下，写入一个空文件，以文件名来标识渠道号。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a56f13bc3?w=294&amp;amp;h=234&amp;amp;f=jpeg&amp;amp;s=18134&quot;/&gt;&lt;/p&gt;
&lt;p&gt;首先，使用这样的方案，并不会破坏 v1 签名，所以效率会很高。&lt;/p&gt;
&lt;p&gt;而在腾讯的 VasDolly 中，其实是向 Apk 文件的 EOCD 部分，增加渠道的信息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a83b94207?w=355&amp;amp;h=428&amp;amp;f=jpeg&amp;amp;s=38732&quot;/&gt;&lt;/p&gt;
&lt;p&gt;APK 文件本质上是一个 ZIP 包，而 EOCD 就是上图所示的第三部分，并且这部分是不被 v1 签名校验的，可以用来记录我们的渠道信息。&lt;/p&gt;
&lt;h3 id=&quot;v2-签名下的多渠道方案&quot;&gt;3.3 v2 签名下的多渠道方案&lt;/h3&gt;
&lt;p&gt;v2 方案下，其实腾讯 VasDolly 和美团的 Walle 方案，并没有什么区别，因为验证更强了，大家可操作的区域就只有那么多了。&lt;/p&gt;
&lt;p&gt;前面也提到过，使用 v2 签名后的 APK 文件结构中，插入了一个 APK Signing Block 的签名块。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a8903f103?w=716&amp;amp;h=73&amp;amp;f=jpeg&amp;amp;s=16856&quot; alt=&quot;apk-sections&quot;/&gt;&lt;/p&gt;
&lt;p&gt;在这个 APK 文件结构下，只有 块2 ，也就是记录 APK v2 签名信息的区域，不是全部参与 v2 签名的校验，所以大家都在这部分做文章。&lt;/p&gt;
&lt;p&gt;APK Signing Block 中包含了多个 &quot;ID-值&quot; 的键值对，而 v2 签名的信息，会记录在 ID 为 &lt;code&gt;0x7109871a&lt;/code&gt; 中，而不会校验其他 ID 下的值。&lt;/p&gt;
&lt;p&gt;因此，基于 v2 签名的多渠道方案就这样诞生了：&lt;strong&gt;在 APK 签名块中添加一个额外的 ID-值，用于记录渠道信息&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id=&quot;四可商用的多渠道打包方案&quot;&gt;四、可商用的多渠道打包方案&lt;/h2&gt;
&lt;p&gt;在 VasDolly 开源之前，市面上支持 v2 签名的多渠道打包方案，就属美团的 Walle 了，下面简单比对一下它们的优缺点。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a9626b38f?w=543&amp;amp;h=300&amp;amp;f=jpeg&amp;amp;s=48592&quot;/&gt;&lt;/p&gt;
&lt;p&gt;具体你想使用哪种方案，就看你的实际需要了。&lt;/p&gt;
&lt;p&gt;美团 Walle Github 地址：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Meituan-Dianping/walle&quot; class=&quot;uri&quot;&gt;https://github.com/Meituan-Dianping/walle&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Walle 扫码直达&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a8f08f6d6?w=280&amp;amp;h=280&amp;amp;f=jpeg&amp;amp;s=39182&quot;/&gt;&lt;/p&gt;
&lt;p&gt;腾讯 VasDolly Github 地址：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Tencent/VasDolly/&quot; class=&quot;uri&quot;&gt;https://github.com/Tencent/VasDolly/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;VasDolly 扫码直达&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/28/161dab4a962918f1?w=280&amp;amp;h=280&amp;amp;f=jpeg&amp;amp;s=39637&quot;/&gt;&lt;/p&gt;
&lt;p&gt;部分图片来源以及参考资料：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://source.android.com/security/apksigning/v2&quot; class=&quot;uri&quot;&gt;https://source.android.com/security/apksigning/v2&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Tencent/VasDolly/wiki/VasDolly%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86&quot;&gt;https://github.com/Tencent/VasDolly/wiki/VasDolly%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://tech.meituan.com/mt-apk-packaging.html&quot; class=&quot;uri&quot;&gt;https://tech.meituan.com/mt-apk-packaging.html&lt;/a&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;今天在公众号后台回复成长『&lt;strong&gt;成长&lt;/strong&gt;』，将会得到我整理的一些学习资料，也能回复『&lt;strong&gt;加群&lt;/strong&gt;』，一起学习进步。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;推荐阅读：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/2/26/161d07b07acda462?w=600&amp;amp;h=600&amp;amp;f=jpeg&amp;amp;s=54770&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 28 Feb 2018 04:44:00 +0000</pubDate>
<dc:creator>承香墨影</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/plokmju/p/8482993.html</dc:identifier>
</item>
<item>
<title>【ASP.NET Core】解决“The required antiforgery cookie &quot;xxx&quot; is not present”的错误 - 东邪独孤</title>
<link>http://www.cnblogs.com/tcjiaan/p/8482734.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/tcjiaan/p/8482734.html</guid>
<description>&lt;p&gt;当你在页面上用 form post 内容时，可能会遇到以下异常：&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;The required antiforgery cookie &quot;????????&quot; is not present.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;咱们来重现一下错误。新建一个 ASP.NET Core 项目，模板选【空】就行了，这是老周最喜欢的项目模板，空 == 自由。&lt;/p&gt;
&lt;p&gt;在项目下建一个目录，叫 Pages，用来放 Razor 页面；然后建一个 Index.cshtml 页。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228111927348-186980931.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;之所以叫 Index.cshtml，是因为 Index 是默认页的名字，这样输入根 URL 就能访问。如果不叫 Index 呢，比如这样。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228112139682-656088913.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;此时你可以在根 URL 后面加上 demo 来访问，如果想在根目录下访问，也可以在 Startup.ConfigureServices 方法中配置页面路由。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; ConfigureServices(IServiceCollection services)
        {
            services.AddMvc().AddRazorPagesOptions(o &lt;/span&gt;=&amp;gt;&lt;span&gt;
            {
               &lt;em&gt;&lt;strong&gt; o.Conventions.AddPageRoute(&lt;/strong&gt;&lt;/em&gt;&lt;/span&gt;&lt;em&gt;&lt;strong&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Demo&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;/strong&gt;&lt;/em&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;);&lt;/strong&gt;&lt;/em&gt;
            });
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;写路径时一定要注意大小写，在浏览器中输入时不需要注意，但在编程时要注意。AddPageRoute 方法是个扩展方法，pagename 参数表明你要的目标页面，比如我要到达 /Demo 页，route 参数设置路由，空字符串表示根路径。即我在浏览器中输入 http://somehost/，就能定位到 http://somehost/Demo 页。&lt;/p&gt;
&lt;p&gt;如果 pagename 为 /users/newone，route 参数为 new，那么，你访问 http://somehost/new 就会指向 http://somehost/users/newone。&lt;/p&gt;
&lt;p&gt;你得注意的是，这个 razor page 的路由规则只用于 Web Pages，不是 MVC 的路由规则，这个设置对 MVC 是不起作用的，MVC 可以用类似 {controller]/{action}/{id} 的路由，这个相信你很熟练了（当然，前提是你写过 MVC 应用）。&lt;/p&gt;

&lt;p&gt;顺便在 Configure 方法中加上 use 代码，不管是 Web Pages 还是 MVC 都要加上。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
        &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; Configure(IApplicationBuilder app, IHostingEnvironment env)
        {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (env.IsDevelopment())
            {
                app.UseDeveloperExceptionPage();
            }

       &lt;em&gt;&lt;strong&gt;     app.UseMvc();&lt;/strong&gt;&lt;/em&gt;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;现在可以弄一下页面了。打开页面，你发现找不到对应的 PageModel 类，这里老周推荐用 _ViewImports 文件来处理。&lt;/p&gt;
&lt;p&gt;在 Pages 目录下添加一个视图导入文件。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228113450487-119970496.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;然后，引入要用的命名空间。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@using WebSample09
@using WebSample09.Pages&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;但是这不够完善，还要加一行。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
@namespace WebSample09.Pages
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;@namespace 指令用来设定 Razor 页所生成代码的命名空间，这样就可以确保页面与 PageModel 类型处于同一个命名空间，可以避免将来发生各种错误。&lt;/p&gt;

&lt;p&gt;保存并关闭导入页，回到刚刚添加的页面。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@page
@model DemoModel

&lt;/span&gt;&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;doctype html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;utf-8&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width, initial-scale=1.0, user-scalable=no&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;示例&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;form &lt;/span&gt;&lt;span&gt;method&lt;/span&gt;&lt;span&gt;=&quot;post&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;parm&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;请随便输入：&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;parm&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;submit&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;提交&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;打开对应的 PageModel 类代码，写一个 OnPost 方法。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; OnPost(&lt;span&gt;string&lt;/span&gt;&lt;span&gt; parm)
        {
            ViewData[&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;data&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;] = $&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;你输入的的值是：{parm}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
        }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在 POST 之后，通过 parm 参数（与页面 form 元素中字段命名相同，会自动赋值）获取输入的内容，存到 ViewData 中，为了在页面上显示，我们回到刚才的页面，加一个 p 元素，用来显示输入内容。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
  &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;@ViewData[&quot;data&quot;]?.ToString()&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;好，现在可以测试了。&lt;/p&gt;

&lt;p&gt;运行，进入页面。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228120803634-635784788.png&quot; alt=&quot;&quot; width=&quot;450&quot;/&gt;&lt;/p&gt;

&lt;p&gt;输入内容，点按钮提交，会收到 400 错误。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228120916301-1154652098.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;


&lt;p&gt;此时 Console Log 记录下一个异常。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228121106862-642520614.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;即我们开头所说的那个错误，这个验证主要为了安全考虑，防止别人盗了你的数据然后跨域欺骗服务器。&lt;/p&gt;

&lt;p&gt;那么，咋解决呢？说出来你可能不信，很简单。&lt;/p&gt;
&lt;p&gt;打开刚刚咱们加到项目中的那个视图导入页，然后添加一个 form 元素的 Tag Helper 就行了。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
@addTagHelper  Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper, Microsoft.AspNetCore.Mvc.TagHelpers
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;格式是这样的，很常规，就是 .net 类型的表示方法，用英文的逗号隔开，前面是类型（包括命名空间），后面是程序集名称。&lt;/p&gt;
&lt;p&gt; 添加标记帮助器前，代码编辑器中是显示为这种颜色的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228121816134-488155407.png&quot; alt=&quot;&quot; width=&quot;360&quot;/&gt;&lt;/p&gt;
&lt;p&gt;添加标记帮助器后，显示为这种颜色。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228121922569-843684253.png&quot; alt=&quot;&quot; width=&quot;360&quot;/&gt;&lt;/p&gt;

&lt;p&gt;这时候就可以了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/367389/201802/367389-20180228122059777-955482093.png&quot; alt=&quot;&quot; width=&quot;380&quot;/&gt;&lt;/p&gt;

&lt;p&gt;咱们不妨对比一下，看看应用标记 Helper 前后输出到客户端的 HTML 有啥不同。&lt;/p&gt;
&lt;p&gt;在未使用标记帮助器前，提交时会出现 400 错误，生成的 HTML 如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;form &lt;/span&gt;&lt;span&gt;method&lt;/span&gt;&lt;span&gt;=&quot;post&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;parm&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;请随便输入：&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;parm&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;submit&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;提交&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;基本是原文输出。&lt;/p&gt;

&lt;p&gt;应用 form 元素帮助器后，生成的 HTML 如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;form &lt;/span&gt;&lt;span&gt;method&lt;/span&gt;&lt;span&gt;=&quot;post&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;parm&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;请随便输入：&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;parm&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;submit&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;提交&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;em&gt;&lt;strong&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;__RequestVerificationToken&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;hidden&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;CfDJ8DEAGDEorWJFuzYOfcGEJpSWrKHd5Qrw4jdARVRF3SwAS-TChnUQHEsFWxtXTk7IDCmpRAB241ucR6kdZA-sRBHnsyOe01ymGLs-DONlZYmB-MzvmXgJmKcn2ZrYMN-Br8fj25nX_zvuwzhyNQ42Das&quot; /&lt;/span&gt;&lt;/strong&gt;&lt;/em&gt;&lt;span&gt;&lt;em&gt;&lt;strong&gt;&amp;gt;&lt;/strong&gt;&lt;/em&gt;&lt;br/&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;多了一个名为 __RequestVerificationToken 的隐藏元素，标识当前请求会话，防止被人冒用。&lt;/p&gt;

&lt;p&gt;顺便补充一下，如果你想导入各种 Tag Helper ，可以把类型名改为 * （星号，通配符）。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
@addTagHelper  *, Microsoft.AspNetCore.Mvc.TagHelpers
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;好了，今天的内容扯到这儿了，88。&lt;/p&gt;

</description>
<pubDate>Wed, 28 Feb 2018 04:31:00 +0000</pubDate>
<dc:creator>东邪独孤</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/tcjiaan/p/8482734.html</dc:identifier>
</item>
<item>
<title>Java基础系列--final、finally关键字 - 唯一浩哥</title>
<link>http://www.cnblogs.com/V1haoge/p/8482909.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/V1haoge/p/8482909.html</guid>
<description>&lt;p&gt;原创作品，可以转载，但是请标注出处地址：&lt;a id=&quot;Editor_Edit_hlEntryLink&quot; title=&quot;view: Java基础系列--final关键字&quot; href=&quot;http://www.cnblogs.com/V1haoge/p/8482909.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/V1haoge/p/8482909.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一、概述&lt;/p&gt;
&lt;p&gt;　　final是Java关键字中最常见之一，表示“最终的，不可更改”之意，在Java中也正是这个意思。&lt;/p&gt;
&lt;p&gt;　　有final修饰的内容，就会变得与众不同，它们会变成终极存在，其内容成为固定的存在。&lt;/p&gt;
&lt;p&gt;　　finally关键字不同于final关键字，这是一个需要与异常体系结构配合使用的关键字，旨在定义必须要进行操作，一般用于在发生异常的时候进行一些收尾操作。&lt;/p&gt;
&lt;p&gt;二、final作用&lt;/p&gt;
&lt;p&gt;2.1 final修饰变量&lt;/p&gt;
&lt;p&gt;　　变量被final修饰就会变成为常量，常量被保存在方法区中。&lt;/p&gt;
&lt;p&gt;　　变量一旦被final修饰，必须手动进行初始化，未进行初始化的final常量是无法通过编译的。&lt;/p&gt;
&lt;p&gt;　　如果只有final修饰的变量的初始化可以采用：&lt;/p&gt;
&lt;p&gt;　　　　--定义时赋值&lt;/p&gt;
&lt;p&gt;　　　　--代码块赋值&lt;/p&gt;
&lt;p&gt;　　　　--构造器赋值&lt;/p&gt;
&lt;p&gt;　　如果被static和final同时修饰的变量的初始化可以采用：&lt;/p&gt;
&lt;p&gt;　　　　--定义时赋值&lt;/p&gt;
&lt;p&gt;　　　　--静态代码块赋值&lt;/p&gt;
&lt;p&gt;　　一旦final变量被static修饰，那么它就脱离了对象的组织（代码块、构造器都是对象的组织），升级为类的组织，所以需要在类级别的静态代码块中进行初始化。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; FinalTest {
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; i = 1&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt; j = 2&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; m = 3&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; n = 4&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　或&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; FinalTest {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; i;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt;&lt;span&gt; j;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; m;
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;    {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         i = 1&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         n = 3&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　如果将上面的代码改成：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; FinalTest {
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; i;
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;int&lt;/span&gt;&lt;span&gt; j;
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; m;
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; n;
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　上面代码第2行和第5行会报错，原因就是未进行初始化。&lt;/p&gt;
&lt;p&gt;　　那么我们总结下final和static的现象，用于区分二者：&lt;/p&gt;
&lt;p&gt;　　　　&lt;span&gt;static修饰将内容脱离对象成为类成员。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　　　&lt;span&gt;final修饰将内容改造成必须被手动初始化的成员，一旦赋值，不再改变。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　二者可以同时存在，各起各的作用。&lt;/p&gt;
&lt;p&gt;2.2 final修饰方法&lt;/p&gt;
&lt;p&gt;　　被final修饰的方法，可以被子类继承，但是不能被子类重写，也就是说这个方法在此以后其内部的实现就是固定不变的了，不能被改变。&lt;/p&gt;
&lt;p&gt;2.3 final修饰类&lt;/p&gt;
&lt;p&gt;　　被final修饰的类，被称之为最终类，其不再拥有子类，不可再进行扩展，最常见的final类就是String类。&lt;/p&gt;
&lt;p&gt;　　String类被final修饰之后，其每个对象都是不变的，一旦定义就不再发生改变。&lt;/p&gt;
&lt;p&gt;2.4 final修饰局部变量&lt;/p&gt;
&lt;p&gt;　　final修饰的局部变量，该变量就不再是保存在栈空间中，而是保存在方法区中，不会随方法结束而失效，放大了局部变量的生命周期。&lt;/p&gt;
&lt;p&gt;　　最常使用的地方就是局部内部类在访问方法的局部变量的情况下，这些局部变量就需要使用final修饰，因为当局部内部类访问局部变量时，会放大局部变量的作用域，局部变量一般在方法结束时就失效了，但是却有可能任然被内部类的对象持有使用。将该局部变量定义为final之后，它不再保存于栈空间，而是保存在方法区中，自然不会因为方法的结束而丢失。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; outMethod(){
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;        &lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt; s = 1&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         &lt;span&gt;class&lt;/span&gt;&lt;span&gt; innerClass{
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;             &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; innerMethod(){
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt; &lt;span&gt;                System.out.println(s);
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　如果去掉第2行的final，第5行就会报错。&lt;/p&gt;
&lt;p&gt; 2.5 final修饰方法参数&lt;/p&gt;
&lt;p&gt;　　如果方法的参数被final修饰，那么这个参数的值在从方法调用时赋值开始就不能再改变，不能被重新赋值（不能改成他值）。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt; outMethod(&lt;span&gt;final&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; s){
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;        s = 1;&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　如上代码，方法参数s为final的，那么若去掉第2行的代码，为s重新赋值，则会报错。&lt;/p&gt;
&lt;p&gt;三、finally作用&lt;/p&gt;
&lt;p&gt;　　finally只有一种用法，那就是在try...catch..语句末尾使用。语法如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;try&lt;/span&gt;&lt;span&gt;{
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;someExecute&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt; }&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;(Execption e){
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;someExecute&lt;/span&gt;
&lt;span&gt;5&lt;/span&gt; }&lt;span&gt;finally&lt;/span&gt;&lt;span&gt;{
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt;someExecute&lt;/span&gt;
&lt;span&gt;7&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　finally块中的语句是一定会被执行的，无论是否会发生异常，重点：这里的异常指的是在try块中的部分，如果实在try块之前发生了异常，还没来得及执行try块语句，那么finally块中的内容也不会被执行，所以finally针对的是try块中的内容而设的。&lt;/p&gt;
&lt;p&gt;　　如果在try块或catch块中存在return语句，那么，finally块中的内容必然会在return之前执行。&lt;/p&gt;
&lt;p&gt;　　finally经常用于发生异常的情况下关闭打开的资源，比如io流，网络资源等。&lt;/p&gt;

</description>
<pubDate>Wed, 28 Feb 2018 04:06:00 +0000</pubDate>
<dc:creator>唯一浩哥</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/V1haoge/p/8482909.html</dc:identifier>
</item>
<item>
<title>css实现多行多列的布局 - 站住，别跑</title>
<link>http://www.cnblogs.com/zjjDaily/p/8482856.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/zjjDaily/p/8482856.html</guid>
<description>&lt;p&gt;&lt;span&gt;1.两列多行：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1040666/201802/1040666-20180228102304008-301998703.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt; HTML:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;box1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
    box1:实现两列多行布局
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;111&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;222&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;333&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;CSS:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;.box1 &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 500px&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #EEEEEE&lt;/span&gt;;
}&lt;span&gt;
.box1 ul &lt;/span&gt;{&lt;span&gt;
  clear&lt;/span&gt;:&lt;span&gt; both&lt;/span&gt;;&lt;span&gt;
  overflow&lt;/span&gt;:&lt;span&gt; hidden&lt;/span&gt;;
}&lt;span&gt;
.box1 ul li &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 48%&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  margin-bottom&lt;/span&gt;:&lt;span&gt; 10px&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; skyblue&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;
}&lt;span&gt;
.box1 ul li:nth-child(even) &lt;/span&gt;{&lt;span&gt;
  margin-left&lt;/span&gt;:&lt;span&gt; 4%&lt;/span&gt;;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 　　这用到了nth-child（），兼容ie9及以上的浏览器，中间的空隙就是两个并排div宽度之和，100%减去后剩下的宽度；&lt;/p&gt;
&lt;p&gt;　　 既然提到了nth-child（）,那么就要说一下nth-of-type（），也是只兼容ie9及以上的浏览器。它与nth-child的区别是：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如果要让第二个p标签背景为红色，那么，p:nth-child(4)这个能实现效果；而p:nth-of-type(2)，就能实现。所以nth-of-type不管p标签前面有多少内容，都只认p的第二个元素。而nth-child却是找它父级的第几个元素。在这种情况下nth-of-type的优点就体现出来了。&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2.多行多列&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1040666/201802/1040666-20180228104321586-949813932.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;HTML：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;box2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
    box2:多行多列
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                111
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                222
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                333
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                444
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt; CSS:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;.box2 &lt;/span&gt;{&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #EEEEEE&lt;/span&gt;;&lt;span&gt;
  margin-top&lt;/span&gt;:&lt;span&gt; 20px&lt;/span&gt;;&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 500px&lt;/span&gt;;
}&lt;span&gt;
.box2 ul &lt;/span&gt;{&lt;span&gt;
  overflow&lt;/span&gt;:&lt;span&gt; hidden&lt;/span&gt;;&lt;span&gt;
  margin-left&lt;/span&gt;:&lt;span&gt; -10px&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #EEEEEE&lt;/span&gt;;
}&lt;span&gt;
.box2 ul li &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 33.3333%&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 50px&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;&lt;span&gt;
  padding-left&lt;/span&gt;:&lt;span&gt; 10px&lt;/span&gt;;&lt;span&gt;
  box-sizing&lt;/span&gt;:&lt;span&gt; border-box&lt;/span&gt;;&lt;span&gt;
  margin-bottom&lt;/span&gt;:&lt;span&gt; 10px&lt;/span&gt;;
}&lt;span&gt;
.box2 ul li .com &lt;/span&gt;{&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; inherit&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; skyblue&lt;/span&gt;;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 　　这里实现的原理是：子级使用padding-left（元素间的间隙）和box-sizing:border-box，父级使用margin-left负值，这个值和子级padding-left是一样的。li里面加div只是为了让效果明显，不然给li加上背景，由于box-sizing：border-box的存在，li看起来就是没效果全部连在一起的。&lt;/p&gt;
&lt;p&gt;　　如果要实现2列，4列，5列等多列，只需修改li的宽度（平均分配）就行了。&lt;/p&gt;
&lt;p&gt;　　这种做法兼容ie8及以上的浏览器，在ie7下，每个li的宽度大概比正常的少2%左右，比如3列，正常显示的话，每个li宽度是33.333%，但是ie7下需设置31.333%，才能基本正常显示。。。这具体的原因没深究，后面有时间再来补这个坑&lt;span&gt;×××&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3.圣杯布局：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1040666/201802/1040666-20180228111403590-728927346.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;HTML:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;box3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;圣杯布局(使用浮动)顶部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            中间自适应宽度,注意这个center是在left的div前面
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;left&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            左部固定宽度
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            右部固定宽度
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;footer&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;圣杯布局底部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;CSS：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;.box3 &lt;/span&gt;{&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #EEEEEE&lt;/span&gt;;&lt;span&gt;
  color&lt;/span&gt;:&lt;span&gt; white&lt;/span&gt;;&lt;span&gt;
  margin-top&lt;/span&gt;:&lt;span&gt; 20px&lt;/span&gt;;
}&lt;span&gt;
.box3 .header &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #008000&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 50px&lt;/span&gt;;
}&lt;span&gt;
.box3 .container &lt;/span&gt;{&lt;span&gt;
  clear&lt;/span&gt;:&lt;span&gt; both&lt;/span&gt;;&lt;span&gt;
  overflow&lt;/span&gt;:&lt;span&gt; hidden&lt;/span&gt;;&lt;span&gt;
  padding&lt;/span&gt;:&lt;span&gt; 0 130px 0 100px&lt;/span&gt;;
}&lt;span&gt;
.box3 .container .left &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #008B8B&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  margin-left&lt;/span&gt;:&lt;span&gt; -100%&lt;/span&gt;;&lt;span&gt;
  position&lt;/span&gt;:&lt;span&gt; relative&lt;/span&gt;;&lt;span&gt;
  left&lt;/span&gt;:&lt;span&gt; -100px&lt;/span&gt;;
}&lt;span&gt;
.box3 .container .center &lt;/span&gt;{&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #00BFFF&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;
}&lt;span&gt;
.box3 .container .right &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 130px&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #FA8072&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  margin-left&lt;/span&gt;:&lt;span&gt; -130px&lt;/span&gt;;&lt;span&gt;
  position&lt;/span&gt;:&lt;span&gt; relative&lt;/span&gt;;&lt;span&gt;
  right&lt;/span&gt;:&lt;span&gt; -130px&lt;/span&gt;;
}&lt;span&gt;
.box3 .footer &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #222222&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 30px&lt;/span&gt;;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　圣杯布局最主要的是中间那并列的3个div，上下两个div，我只是拿来充数的。。。　　&lt;/p&gt;
&lt;p&gt;　　实现过程大致如下：1.这三个div的HTML摆放的先后顺序是有讲究的，center这个显示在中间的div，在html里是排在最前面的，然后是left，最后是right。&lt;/p&gt;
&lt;p&gt;　　　　　　　　　　　2.在container没有设置padding，left这个div和right这个div都没设置margin与相对定位relative之前，三个div都float：left。这时候页面上显示的是center独占一行，然后是left这个div，然后是right这个div&lt;/p&gt;
&lt;p&gt;　　　　　　　　　　　3.然后left这个div设置margin-left：-100%。这样left就能从第二排蹦到第一排最左边并覆盖center这个div。&lt;/p&gt;
&lt;p&gt;　　　　　　　　　　　4.right这个div设置margin-left: -130px;这个值是它自己宽度的大小。然后right这个div也蹦到第一排最右边并覆盖center这个div。&lt;/p&gt;
&lt;p&gt;　　　　　　　　　　　5.这个时候container设置padding，这个padding的大小是left与right这两个div分别的宽度，然后left与right这两个div分别再设置相对定位，移动自己宽度的距离，就正常显示了。&lt;/p&gt;
&lt;p&gt;　　这种布局方式ie7都兼容，ie6没有测试过。。。&lt;/p&gt;
&lt;p&gt;&lt;span&gt;4.仿圣杯布局&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1040666/201802/1040666-20180228114050793-1960281833.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;HTML：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;box4&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;圣杯布局2(使用定位)顶部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;left&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            左部固定宽度
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            中间自适应宽度，无需考虑顺序
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            右部固定宽度
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;footer&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;圣杯布局2底部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;CSS:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;.box4 &lt;/span&gt;{&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #EEEEEE&lt;/span&gt;;&lt;span&gt;
  color&lt;/span&gt;:&lt;span&gt; white&lt;/span&gt;;&lt;span&gt;
  margin-top&lt;/span&gt;:&lt;span&gt; 20px&lt;/span&gt;;
}&lt;span&gt;
.box4 .header &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #008000&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 50px&lt;/span&gt;;
}&lt;span&gt;
.box4 .container &lt;/span&gt;{&lt;span&gt;
  clear&lt;/span&gt;:&lt;span&gt; both&lt;/span&gt;;&lt;span&gt;
  overflow&lt;/span&gt;:&lt;span&gt; hidden&lt;/span&gt;;&lt;span&gt;
  padding&lt;/span&gt;:&lt;span&gt; 0 130px 0 100px&lt;/span&gt;;&lt;span&gt;
  position&lt;/span&gt;:&lt;span&gt; relative&lt;/span&gt;;
}&lt;span&gt;
.box4 .container .left &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #008B8B&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  position&lt;/span&gt;:&lt;span&gt; absolute&lt;/span&gt;;&lt;span&gt;
  top&lt;/span&gt;:&lt;span&gt; 0px&lt;/span&gt;;&lt;span&gt;
  left&lt;/span&gt;:&lt;span&gt; 0px&lt;/span&gt;;
}&lt;span&gt;
.box4 .container .center &lt;/span&gt;{&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #00BFFF&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;
}&lt;span&gt;
.box4 .container .right &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 130px&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #FA8072&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  position&lt;/span&gt;:&lt;span&gt; absolute&lt;/span&gt;;&lt;span&gt;
  top&lt;/span&gt;:&lt;span&gt; 0px&lt;/span&gt;;&lt;span&gt;
  right&lt;/span&gt;:&lt;span&gt; 0px&lt;/span&gt;;
}&lt;span&gt;
.box4 .footer &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #222222&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 30px&lt;/span&gt;;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　这种方式实现的思路是：左右两边绝对定位，然后中间的div设置padding，也能达到同样的效果。也不用在意中间的三个div的排版顺序，我一直都在用这种方式。&lt;/p&gt;
&lt;p&gt;　　也兼容ie7，ie6没测试过&lt;/p&gt;
&lt;p&gt;&lt;span&gt;5.双飞翼布局&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1040666/201802/1040666-20180228114639969-1758523849.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;HTML：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;box5&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;双飞翼布局顶部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center-in&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                中间自适应宽度,注意这个center是在left的div前面
            &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;left&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            左部固定宽度
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            右部固定宽度
        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;footer&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;双飞翼布局底部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;CSS:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;.box5 &lt;/span&gt;{&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #EEEEEE&lt;/span&gt;;&lt;span&gt;
  color&lt;/span&gt;:&lt;span&gt; white&lt;/span&gt;;&lt;span&gt;
  margin-top&lt;/span&gt;:&lt;span&gt; 20px&lt;/span&gt;;
}&lt;span&gt;
.box5 .header &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #008000&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 50px&lt;/span&gt;;
}&lt;span&gt;
.box5 .container &lt;/span&gt;{&lt;span&gt;
  clear&lt;/span&gt;:&lt;span&gt; both&lt;/span&gt;;&lt;span&gt;
  overflow&lt;/span&gt;:&lt;span&gt; hidden&lt;/span&gt;;
}&lt;span&gt;
.box5 .container .left &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #008B8B&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  margin-left&lt;/span&gt;:&lt;span&gt; -100%&lt;/span&gt;;
}&lt;span&gt;
.box5 .container .center &lt;/span&gt;{&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #00BFFF&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;
}&lt;span&gt;
.box5 .container .center .center-in &lt;/span&gt;{&lt;span&gt;
  margin&lt;/span&gt;:&lt;span&gt; 0 130px 0 100px&lt;/span&gt;;
}&lt;span&gt;
.box5 .container .right &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 130px&lt;/span&gt;;&lt;span&gt;
  float&lt;/span&gt;:&lt;span&gt; left&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #FA8072&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 100px&lt;/span&gt;;&lt;span&gt;
  margin-left&lt;/span&gt;:&lt;span&gt; -130px&lt;/span&gt;;
}&lt;span&gt;
.box5 .footer &lt;/span&gt;{&lt;span&gt;
  width&lt;/span&gt;:&lt;span&gt; 100%&lt;/span&gt;;&lt;span&gt;
  background&lt;/span&gt;:&lt;span&gt; #222222&lt;/span&gt;;&lt;span&gt;
  height&lt;/span&gt;:&lt;span&gt; 30px&lt;/span&gt;;
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　双飞翼布局和圣杯布局看起来都差不多，但是最大的不同就是：双飞翼布局中center中间的这个div里面还有一个div，主要通过这个div的margin值来达到布局的目的。然后left和right这两个div都不用再设置相对定位relative。其它的都基本一样&lt;/p&gt;
&lt;p&gt;　　兼容ie7，ie6未测试过。&lt;/p&gt;

&lt;p&gt;　　还有许多多行多列的布局方式，比如css3的flex，inline-block等等。。只要有思路，再难的布局都能实现。 &lt;/p&gt;

</description>
<pubDate>Wed, 28 Feb 2018 03:55:00 +0000</pubDate>
<dc:creator>站住，别跑</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/zjjDaily/p/8482856.html</dc:identifier>
</item>
<item>
<title>微信开发系列——微信订阅号前端开发利器：WeUI - 懒得安分</title>
<link>http://www.cnblogs.com/landeanfen/p/8473755.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/landeanfen/p/8473755.html</guid>
<description>&lt;p&gt;前言：年前的两个星期，学习了下微信公众号的开发。后端基本能够基于盛派的第三方sdk能搞定大部分事宜。剩下的就是前端了，关于手机端的浏览器的兼容性，一直是博主的一块心病，因为博主一直专注于bootstrap的相关组件学习，知道bootstrap做响应式没有任何问题，所以曾经尝试过直接用bootstrap来布局，对于一些简单的栅格布局，bootstrap没有任何问题，可是一旦涉及前端组件这一块的时候，总是找不到合适的移动端组件，什么都要自己去实现，这个开发成本就大了去了。于是乎博主打算另辟蹊径，找找基于微信开发的移动端UI组件，最后找到了微信官方开发的一套前端组件：WeUI。&lt;/p&gt;
&lt;p&gt;本文原创地址：&lt;a href=&quot;http://www.cnblogs.com/landeanfen/p/8473755.html&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/landeanfen/p/8473755.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;WeUI 是一套同微信原生视觉体验一致的基础样式库，由微信官方设计团队为微信内网页和微信小程序量身设计，令用户的使用感知更加统一。有了这个作为基础，妈妈再也不用担心微信开发的浏览器兼容性问题了，微信官方推出的东西应该比较靠谱吧！&lt;/p&gt;
&lt;p&gt;WeUI开源地址：&lt;a href=&quot;https://github.com/Tencent/weui&quot; target=&quot;_blank&quot;&gt;https://github.com/Tencent/weui&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;WeUI使用示例：&lt;a href=&quot;https://weui.io/&quot; target=&quot;_blank&quot;&gt;https://weui.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;基于jquery的WeUI：&lt;a href=&quot;http://jqweui.com/&quot; target=&quot;_blank&quot;&gt;http://jqweui.com/&lt;/a&gt;（提供了大量的第三方组件库）&lt;/p&gt;

&lt;p&gt; 考虑到一些园友对于第三方组件的使用不知道如何下手或者不太熟悉，博主不厌其烦从最基础的开始，手把手教你入门WeUI。已经很熟悉的园友请直接跳过此段，前往官方网站查看demo。&lt;/p&gt;
&lt;h2&gt;1、引用必须的文件&lt;/h2&gt;
&lt;p&gt;如果你用的是原始的开发方式，比如基于jQuery的开发，那么你首先需要去Github上面将WeUI的源文件down下来，然后引入到你的项目；如果是基于npm管理组件，使用npm命令的方式引入WeUI组件即可。这里博主使用的是原始的开发方式。&lt;strong&gt;需要说明的是，如果你只需要WeUI的css样式支持，那么你只需要引入weui.css文件即可；如果除了样式之外，还需要WeUI的js组件支持，那么你还需要引用另外一个包：&lt;a href=&quot;https://github.com/Tencent/weui.js&quot; target=&quot;_blank&quot;&gt;weui.js&lt;/a&gt;。&lt;/strong&gt;今天这篇，博主就先介绍下基础的WeUI样式库，先来看看WeUI到底能为我们带来啥，以后如果有机会再来分享WeUI.js以及jquery.WeUI.js的相关技术。&lt;/p&gt;
&lt;p&gt;这里首先引入必须的css样式文件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;官方的demo里面为了使演示的效果更好，还引入了example.css文件，但这个并不是必须的！&lt;/p&gt;
&lt;h2&gt;2、最基础的组件样式&lt;/h2&gt;
&lt;p&gt;第一个例子我们还是用最基础的表单来说明。我们来看看下面一个基础的个人资料录入的页面效果：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html &lt;/span&gt;&lt;span&gt;lang&lt;/span&gt;&lt;span&gt;=&quot;zh-cmn-Hans&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;WeUI测试&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;--example&lt;/span&gt;&lt;span&gt;.css可以不引用--&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/example/example.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cells__title&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;填写个人资料&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cells weui-cells_form&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;姓名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;请输入姓名&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;QQ&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;number&quot;&lt;/span&gt;&lt;span&gt; pattern&lt;/span&gt;&lt;span&gt;=&quot;[0-9]*&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;QQ号&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-cell_vcode&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;手机号&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;tel&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;请输入手机号&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;button &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-vcode-btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;获取验证码&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;button&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;出生日期&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;date&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;注册时间&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;datetime-local&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;性别&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cells weui-cells_radio&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-check__label&quot;&lt;/span&gt;&lt;span&gt; for&lt;/span&gt;&lt;span&gt;=&quot;x11&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;男&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;radio&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-check&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;radio1&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;x11&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-checked&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-check__label&quot;&lt;/span&gt;&lt;span&gt; for&lt;/span&gt;&lt;span&gt;=&quot;x12&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;女&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;radio&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;radio1&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-check&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;x12&quot;&lt;/span&gt;&lt;span&gt; checked&lt;/span&gt;&lt;span&gt;=&quot;checked&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-checked&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;爱好&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cells weui-cells_checkbox&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-check__label&quot;&lt;/span&gt;&lt;span&gt; for&lt;/span&gt;&lt;span&gt;=&quot;s11&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;checkbox&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-check&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;checkbox1&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;s11&quot;&lt;/span&gt;&lt;span&gt; checked&lt;/span&gt;&lt;span&gt;=&quot;checked&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-checked&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;篮球&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-check__label&quot;&lt;/span&gt;&lt;span&gt; for&lt;/span&gt;&lt;span&gt;=&quot;s12&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;checkbox&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;checkbox1&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-check&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;s12&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-checked&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;足球&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-check__label&quot;&lt;/span&gt;&lt;span&gt; for&lt;/span&gt;&lt;span&gt;=&quot;s13&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;checkbox&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;checkbox1&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-check&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;s13&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-checked&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;游泳&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-cell_select&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;select &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-select&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;select1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;selected&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;微信号&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;QQ号&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;=&quot;3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;Email&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-cell_vcode&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;验证码&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;请输入验证码&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-vcode-img&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;~/Content/weui-master/dist/example/images/vcode.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn-area&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn weui-btn_primary&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;javascript:&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;showTooltips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;确定&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;我们用google浏览器的移动端模式测试效果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180227145742002-191409296.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180227144903450-110548439.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;代码说明&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（1）网页上面的  &lt;span class=&quot;cnblogs_code&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta&lt;/span&gt; &lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt; &lt;span&gt;content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; 这一句必须要有，这个和WeUI无关，是浏览器的显示比例问题。建议各位准备做移动端开发之前可以百度下viewport的含义，这样更容易理解响应式。根据博主的理解，加这一句是告诉浏览器在不同的设备上面的显示比例问题。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（2）最外面必须要有一个大的容器div，即上述代码里面的 &lt;span class=&quot;cnblogs_code&quot;&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt; &lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt; 这个标签；页面的所有标签必须放在这个里面；&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（3）上述代码里面的radio和checkbox的效果是可以切换的。比如上述代码改下可以将性别这一项变成多选选，爱好这一项变成单选，你只需要将radio和checkbox切换即可。&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;3、其他基础组件效果示例&lt;/h2&gt;
&lt;p&gt;有了上面的基础表单作为基础，我们演示其他示例就简单很多了。这里并不会将WeUI官网上面的例子挨个演示个遍，只是抽其中几个来演示和讲解。&lt;/p&gt;
&lt;p&gt;（1）switch开关&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;　　&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cells__title&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;开关&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cells weui-cells_form&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-cell_switch&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;是否显示&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-switch&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;checkbox&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-cell_switch&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;是否置顶（兼容IE浏览器写法）&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;switchCP&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-switch-cp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;switchCP&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-switch-cp__input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;checkbox&quot;&lt;/span&gt;&lt;span&gt; checked&lt;/span&gt;&lt;span&gt;=&quot;checked&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-switch-cp__box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180227154745117-1356457579.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（2）文本框搜索组件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;48&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html &lt;/span&gt;&lt;span&gt;lang&lt;/span&gt;&lt;span&gt;=&quot;zh-cmn-Hans&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;WeUI测试&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;&lt;span&gt;
    @*&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;--example&lt;/span&gt;&lt;span&gt;.css可以不引用--&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;*@
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/example/example.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-search-bar&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;searchBar&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;form &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-search-bar__form&quot;&lt;/span&gt;&lt;span&gt; onsubmit&lt;/span&gt;&lt;span&gt;=&quot;return false;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-search-bar__box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-search&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;search&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-search-bar__input&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;searchInput&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;搜索&quot;&lt;/span&gt;&lt;span&gt; required &lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;javascript:&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-clear&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;searchClear&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-search-bar__label&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;searchText&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-icon-search&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;搜索&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;form&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;javascript:&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-search-bar__cancel-btn&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;searchCancel&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;取消&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cells searchbar-result&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;searchResult&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/scripts/jquery-1.9.1.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
    $(&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; $searchBar &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#searchBar&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
            $searchResult &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#searchResult&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
            $searchText &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#searchText&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
            $searchInput &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#searchInput&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
            $searchClear &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#searchClear&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;),
            $searchCancel &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#searchCancel&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);

        &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; hideSearchResult(){
            $searchResult.hide();
            $searchInput.val(&lt;/span&gt;&lt;span&gt;''&lt;/span&gt;&lt;span&gt;);
        }
        &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; cancelSearch(){
            hideSearchResult();
            $searchBar.removeClass(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;weui-search-bar_focusing&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
            $searchText.show();
        }

        $searchText.on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
            $searchBar.addClass(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;weui-search-bar_focusing&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
            $searchInput.focus();
        });
        $searchInput
            .on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;blur&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;(&lt;/span&gt;&lt;span&gt;!&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;.value.length) cancelSearch();
            }).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keydown&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; (event) {
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; (event.keyCode &lt;/span&gt;&lt;span&gt;==&lt;/span&gt; &lt;span&gt;13&lt;/span&gt;&lt;span&gt;) {
                    alert(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;执行搜索&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
                }
            });
        ;
        $searchClear.on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
            hideSearchResult();
            $searchInput.focus();
        });
        $searchCancel.on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
            cancelSearch();
            $searchInput.blur();
        });
    });
    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果如下&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180227161517756-355928318.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;（3）正在加载、暂无更多、查看更多效果&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html &lt;/span&gt;&lt;span&gt;lang&lt;/span&gt;&lt;span&gt;=&quot;zh-cmn-Hans&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;WeUI测试&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-loadmore&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-loading&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-loadmore__tips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;正在加载&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-loadmore weui-loadmore_line&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-loadmore__tips&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;暂无数据&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-panel__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;#&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;border-bottom: 1px solid #e5e5e5;border-top: 1px solid #e5e5e5;&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell weui-cell_access weui-cell_link&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;font-size:16px;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;查看更多&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果展示&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180227163251439-1262172047.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;这些东西虽然不难，但如果全部都要我们自己去实现，估计也得花不少时间吧。&lt;/p&gt;

&lt;h2&gt;1、简单的弹出层&lt;/h2&gt;
&lt;p&gt;虽然在移动端大部分情况下不建议使用弹出操作，但某些情况下，弹出一些东西操作起来其实也挺方便的，还是那句话：存在即合理。没有最好的方式，只有最适合的方式。我们来看博主简单封装的一段弹出层代码。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html &lt;/span&gt;&lt;span&gt;lang&lt;/span&gt;&lt;span&gt;=&quot;zh-cmn-Hans&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;WeUI测试&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;style &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/css&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
        #kongzhi .weui-cell__bd &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
            text-align&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; left&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;
        &lt;span&gt;}&lt;/span&gt;&lt;span&gt;

            #kongzhi .weui-cell__bd label &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
                color&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; #31c1d5&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
                display&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; inline-block&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
                font-size&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; 14px&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
                padding&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; 5px 5px 3px 5px&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;
            &lt;span&gt;}&lt;/span&gt;&lt;span&gt;

            #kongzhi .weui-cell__bd .active &lt;/span&gt;&lt;span&gt;{&lt;/span&gt;&lt;span&gt;
                color&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; white&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
                background-color&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; #31c1d5&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;&lt;span&gt;
                border-radius&lt;/span&gt;&lt;span&gt;:&lt;/span&gt;&lt;span&gt; 5px&lt;/span&gt;&lt;span&gt;;&lt;/span&gt;
            &lt;span&gt;}&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn-area&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn weui-btn_primary&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;javascript:&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;showQuery&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;查询条件&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;弹出层begin&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;dialogs&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;js_dialog&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;diaquery&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;opacity: 1; display: none;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-mask&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-dialog&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;width:92%;max-width:372px;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-dialog__bd&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;padding-left:0px;padding-right:10px;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;kongzhi&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;区域:&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;上海&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;北京&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;重庆&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;姓名:&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;text&quot;&lt;/span&gt;&lt;span&gt; placeholder&lt;/span&gt;&lt;span&gt;=&quot;请输入姓名&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;生日:&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;input &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-input&quot;&lt;/span&gt;&lt;span&gt; type&lt;/span&gt;&lt;span&gt;=&quot;date&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__hd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;label &lt;/span&gt;&lt;span&gt;for&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-label&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;性别:&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;label&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-cell__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;select &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-select&quot;&lt;/span&gt;&lt;span&gt; name&lt;/span&gt;&lt;span&gt;=&quot;select1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;selected&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;微信号&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;=&quot;2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;QQ号&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;option &lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;=&quot;3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;Email&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;option&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;select&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-dialog__ft&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;javascript:;&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-dialog__btn weui-dialog__btn_default&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;取消&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;javascript:;&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;query&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-dialog__btn weui-dialog__btn_primary&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;查询&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;弹出层end&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/scripts/jquery-1.9.1.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;var&lt;/span&gt;&lt;span&gt; $diaquery &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#diaquery&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;);
        $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#dialogs&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.weui-dialog__btn&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
            $(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;).parents(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.js_dialog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).fadeOut(&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt;);
        });
        $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#showQuery&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
            $diaquery.fadeIn(&lt;/span&gt;&lt;span&gt;200&lt;/span&gt;&lt;span&gt;);
        });
    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;效果展示&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180227170735236-381946606.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;以上都是一些最基础的Dom操作，如果需要在项目里面用起来，可以进行简单的dialog组件封装。&lt;/p&gt;
&lt;h2&gt;2、图片全屏预览&lt;/h2&gt;
&lt;p&gt;第二个例子博主不打算再演示原生的WeUI效果了，来看一个基于jquery的WeUI封装示例。&lt;/p&gt;
&lt;p&gt; 首先引入必须的文件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;      
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/css/jquery-weui.css&quot;&lt;/span&gt;&lt;span&gt; rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;  
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在body最后面引入js&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;　　 &amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/scripts/jquery-1.9.1.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/js/jquery-weui.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/js/swiper.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;需要说明的是这个效果需要jquery-weui.js组件的支持。你需要去down这个组件的dist目录，然后引用dist目录下面的swiper.js文件。这块有问题的可以单独留言。&lt;/p&gt;
&lt;p&gt;引入了文件之后，然后第二部就是我们的html了&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn-area&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn weui-btn_primary&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;javascript:&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;showQuery&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;浏览图片&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最后是js初始化&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;var&lt;/span&gt;&lt;span&gt; pb1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $.photoBrowser({
            items: [
              &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Content/jquery-weui-master/dist/demos/images/swiper-1.jpg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
              &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Content/jquery-weui-master/dist/demos/images/swiper-2.jpg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
              &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Content/jquery-weui-master/dist/demos/images/swiper-3.jpg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
            ]
        });

        $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#showQuery&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
            pb1.open();  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;打开&lt;/span&gt;
&lt;span&gt;        });&lt;br/&gt;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180228103622148-675047294.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt; 这里是通过图片的物理路径去动态渲染生成img标签的。效果还不过！除此之外，swiper组件还提供了带图片文字描述的效果，和PC端的焦点图效果一样一样的。&lt;/p&gt;
&lt;p&gt;我们将上述js代码稍作修改：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;var&lt;/span&gt;&lt;span&gt; pb1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $.photoBrowser({
            items: [
                {
                    image: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Content/jquery-weui-master/dist/demos/images/swiper-1.jpg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    caption: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;文字描述1&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                },
                {
                    image: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Content/jquery-weui-master/dist/demos/images/swiper-2.jpg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    caption: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;文字描述2&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                },
                {
                    image: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Content/jquery-weui-master/dist/demos/images/swiper-3.jpg&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
                    caption: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;文字描述3&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;
                }
            ]
        });

        $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#showQuery&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
            pb1.open();  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;打开&lt;/span&gt;
&lt;span&gt;        });
    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180228104217356-1692258496.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt; 当然，大部分情况下，我们在实际使用的时候这种通过已经存在的图片文件的路径渲染的场景不是很多，更多的是通过页面上已经存在的img标签的来渲染图片的。我们来个例子试试水。&lt;/p&gt;
&lt;p&gt;比如我们复制一段网页内容，里面是图文混合的。然后用js去提取其中图片的src。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html &lt;/span&gt;&lt;span&gt;lang&lt;/span&gt;&lt;span&gt;=&quot;zh-cmn-Hans&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;WeUI测试&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;      
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/css/jquery-weui.css&quot;&lt;/span&gt;&lt;span&gt; rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;  
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;style &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/css&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn-area&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-btn weui-btn_primary&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;javascript:&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;showQuery&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;浏览正文图片&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;article &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;content&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-article&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;“寻找龙海名片”福建省摄影大赛征稿启事&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;content&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;text-align: justify;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-media-box__thumb&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/1.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;100%&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100%&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;text-align: center;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt; 
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/2.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;809&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/3.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;589&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/4.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;608&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/5.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/6.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;608&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;article&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

   

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/scripts/jquery-1.9.1.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/js/jquery-weui.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/js/swiper.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;var&lt;/span&gt;&lt;span&gt; collection &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; [];
        $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#content img&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).each(&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; (key, item) {
            collection.push($(item).attr(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;));
        });
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; pb1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $.photoBrowser({
            items: collection
        });

        $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#showQuery&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
            pb1.open(&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;);  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;打开第一张图片&lt;/span&gt;
&lt;span&gt;        });
    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180228110535274-1292639735.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;我们继续优化下，将最上面的按钮去掉，然后给每个图片加上点击事件，这样是不是更加真实呢！&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;!&lt;/span&gt;&lt;span&gt;DOCTYPE html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;html &lt;/span&gt;&lt;span&gt;lang&lt;/span&gt;&lt;span&gt;=&quot;zh-cmn-Hans&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;charset&lt;/span&gt;&lt;span&gt;=&quot;UTF-8&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;meta &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;viewport&quot;&lt;/span&gt;&lt;span&gt; content&lt;/span&gt;&lt;span&gt;=&quot;width=device-width,initial-scale=1,user-scalable=0,viewport-fit=cover&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;WeUI测试&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/Content/weui-master/dist/style/weui.css&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;      
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;link &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/css/jquery-weui.css&quot;&lt;/span&gt;&lt;span&gt; rel&lt;/span&gt;&lt;span&gt;=&quot;stylesheet&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;  
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;head&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;container&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page navbar js_show&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;page__bd&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;article &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;content&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;weui-article&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;“寻找龙海名片”福建省摄影大赛征稿启事&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;content&quot;&lt;/span&gt;&lt;span&gt; style&lt;/span&gt;&lt;span&gt;=&quot;text-align: justify;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;weui-media-box__thumb&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/201802091018361725920180210172813933.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;100%&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100%&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;style&lt;/span&gt;&lt;span&gt;=&quot;text-align: center;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt; 
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/151825461301820180210172339803.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;809&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/151825460457920180210172330085.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;589&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/151825460714020180210172332855.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;608&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/151825462155720180210172349410.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;alt&lt;/span&gt;&lt;span&gt;=&quot;《寻找龙海名片》——福建省摄影大赛征稿启事&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/Content/jquery-weui-master/dist/demos/images/151825460838220180210172335668.jpg&quot;&lt;/span&gt;&lt;span&gt; width&lt;/span&gt;&lt;span&gt;=&quot;1080&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;608&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;fr-fic fr-dii&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;article&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/scripts/jquery-1.9.1.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/js/jquery-weui.min.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;=&quot;~/Content/jquery-weui-master/dist/js/swiper.js&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;var&lt;/span&gt;&lt;span&gt; collection &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; [];
        $(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#content img&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).each(&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; (key, item) {
            collection.push($(item).attr(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;src&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;));
            $(item).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
                pb1.open(key);
            });
        });
        &lt;/span&gt;&lt;span&gt;var&lt;/span&gt;&lt;span&gt; pb1 &lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt; $.photoBrowser({
            items: collection
        });
    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;body&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;html&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;效果如下&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180228111816513-891300138.gif&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;在寻找微信前端框架的时候，关注过各种微信公众号，发现一个叫“爱摄汇”的公众号，它的前端效果就是基于WeUI去做的，跟着学习了下，觉得它功能简单，但是页面效果做得还可以，对摄影有兴趣或者想学习WeUI基础方法的园友可以关注看看。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/459756/201802/459756-20180228141631417-1050180918.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 至此本篇基本结束。就这么泛泛总结了下，花了几乎两天时间，写点东西不容易。如果大家有其他关于WeUI的使用问题，可以留言！等以后再用到更多WeUI的高级功能，再来跟大家做分享。如果你觉得本文能够帮助你，可以右边随意 &lt;strong&gt;打赏 &lt;/strong&gt;博主。&lt;/p&gt;
&lt;p&gt;本文原创出处：&lt;a href=&quot;http://www.cnblogs.com/landeanfen/&quot; target=&quot;_blank&quot;&gt;http://www.cnblogs.com/landeanfen/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;欢迎各位转载，但是未经作者本人同意，转载文章之后&lt;strong&gt;必须在文章页面明显位置给出作者和原文连接&lt;/strong&gt;，否则保留追究法律责任的权利&lt;/p&gt;
</description>
<pubDate>Wed, 28 Feb 2018 03:48:00 +0000</pubDate>
<dc:creator>懒得安分</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/landeanfen/p/8473755.html</dc:identifier>
</item>
<item>
<title>基于agenda的Nodejs定时任务管理框架搭建 - 小侠同学</title>
<link>http://www.cnblogs.com/souvenir/p/8480182.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/souvenir/p/8480182.html</guid>
<description>&lt;h2&gt;0、背景&lt;/h2&gt;
&lt;p&gt;　　在大型项目中，定时任务的应用场景越来越广。一般来说，按照微服务的思想，我们会将定时任务单独部署一套服务，核心的业务接口独立到另一个服务中，从而降低相互之间的耦合程度。在需要使用定时任务时，只需要由定时任务微服务定时向核心业务服务发起异步接口调用。&lt;/p&gt;
&lt;p&gt;　　基于NodeJS来搭建这样一套定时任务的话，我们可以使用现有比较成熟的第三方框架来快速搭建，开发人员只需要关注定时任务的实现逻辑即可。&lt;/p&gt;

&lt;h2&gt;1、agenda&lt;/h2&gt;
&lt;p&gt;　　在github搜索nodejs schedule的话会有很多类库，比如node-schedule，agenda，node-cron等。之所以选择agenda的话主要由两个原因：1、agenda接口简单，还可使用人类可读的cron表达式；2、agenda提供了完整的Restful API接口，以及可统计查看操作的UI界面。&lt;/p&gt;
&lt;p&gt;　　这样的话，&lt;strong&gt;我们只要在代码中提前定义好定时任务处理逻辑，然后就可以在界面在新增或者移除定时任务安排，而无需重新上线。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　下面我们就开始从头搭建基于agenda的定时任务。&lt;/p&gt;

&lt;h2&gt;2、基础环境准备&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;MongoDB：agenda需要使用MongoDB来存储定时任务数据。建议大家使用docker进行一建安装，操作简单，删除也方便。只需要docker中搜索mongo，选择安装默认推荐的官方版即可。&lt;/li&gt;
&lt;li&gt;agenda：定时任务管理框架，文档参考：&lt;a href=&quot;https://github.com/agenda/agenda#creating-jobs&quot; target=&quot;_blank&quot;&gt;https://github.com/agenda/agenda&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;agendash：基于agenda的UI管理界面，文档参考：&lt;a href=&quot;https://github.com/agenda/agendash&quot; target=&quot;_blank&quot;&gt;https://github.com/agenda/agendash&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;express：用于配合agendash启动WEB服务&lt;/li&gt;
&lt;li&gt;nirvana-logger：非必选，nodejs日志输出框架，文档参考：&lt;a href=&quot;https://www.npmjs.com/package/nirvana-logger&quot; target=&quot;_blank&quot;&gt;https://www.npmjs.com/package/nirvana-logger&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3、样例代码&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 框架引入&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; express = require('express'&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; app =&lt;span&gt; express();
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; Agenda = require('agenda'&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; Agendash = require('agendash'&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; L = require('nirvana-logger')('agenda'&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; agenda初始化，并连接MongoDB&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt; &lt;span&gt;var&lt;/span&gt; agenda = &lt;span&gt;new&lt;/span&gt; Agenda({db: {address: 'mongodb://localhost:32768/agenda'&lt;span&gt;}});
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; 
&lt;span&gt;12&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 定义一个测试任务&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt; agenda.define('testJob', &lt;span&gt;function&lt;/span&gt;&lt;span&gt; (job, done) {
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;   &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;     L('hello',job.attrs.data, &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Date())
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;    done()
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;   }&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (err) {
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;     done(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Error(err))
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;  }
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; &lt;span&gt;})
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt; 
&lt;span&gt;22&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; agenda框架启动&lt;/span&gt;
&lt;span&gt;23&lt;/span&gt; agenda.on('ready', &lt;span&gt;function&lt;/span&gt;&lt;span&gt; () {
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt;   L(&quot;====&amp;gt;&amp;gt;&amp;gt;agenda启动成功&amp;lt;&amp;lt;&amp;lt;&amp;lt;===&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; &lt;span&gt;  agenda.start();
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt; &lt;span&gt;})
&lt;/span&gt;&lt;span&gt;27&lt;/span&gt; 
&lt;span&gt;28&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Agendash UI界面&lt;/span&gt;
&lt;span&gt;29&lt;/span&gt; app.listen(3000&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;30&lt;/span&gt; app.use('/dash', Agendash(agenda));
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;13行：定义一个任务，名称为testJob，后续我们可以通过该名字安排定时任务。第二个参数是一个函数，用于处理我们的业务逻辑，需要注意的是，我们需要在任务完成之后主动调用done方法，这样agenda才会将任务标记为完成。&lt;/p&gt;
&lt;p&gt;17行：如果任务执行过程中出现异常（比如网络请求异常）时，需要向done传入一个error对象，agenda会将此任务标记为fail状态。&lt;/p&gt;
&lt;p&gt;23行：在agenda连接MongoDB成功后，会触发ready的钩子，我们才能在这里开始安排定时任务，并且让agenda开始执行定时任务扫描。&lt;/p&gt;
&lt;p&gt;29行：在3000端口启动express，同时使用agendash框架启动agenda的WEB管理界面。&lt;/p&gt;

&lt;p&gt;执行node命令启动该js文件，如果能在命令行看到“agenda启动成功”则表示agenda连接数据库成功并且成功启动。&lt;/p&gt;

&lt;p&gt;其实细心的同学可以，我们在上面的代码中只是定义了任务，但是并没有对进行对任务进行定时运行。&lt;/p&gt;
&lt;p&gt;所以接下来我们将演示如何在WEB界面上对定时任务进进行查询，新增以及删除的操作。&lt;/p&gt;
&lt;p&gt;现在我们可以打开：&lt;a href=&quot;http://localhost:3000/dash/#&quot;&gt;http://localhost:3000/dash/#&lt;/a&gt; 来查看web界面。&lt;/p&gt;

&lt;p&gt;&lt;span&gt;4、定时任务界面管理&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;打开agendash的默认界面是这样&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/606186/201802/606186-20180228110718472-1719072791.png&quot; alt=&quot;&quot;/&gt; &lt;/p&gt;
&lt;p&gt;从界面上也可以看出，我们现在的确并未启动任何定时任务。&lt;/p&gt;

&lt;h3&gt;4.1 新增定时任务&lt;/h3&gt;
&lt;p&gt;点击【Schedule job】，在后面弹出create job界面：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/606186/201802/606186-20180228111202729-2091540196.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt; &lt;strong&gt;Job name&lt;/strong&gt;：我们需要使用的任务名称，即我们在程序中提前设置好的任务，比如刚才定义的testJob&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Schedule&lt;/strong&gt;：安排定时任务，这里我们输入希望定时任务执行的时间点，比如5 minutes。这里时间的支持具体请参考：&lt;a href=&quot;https://github.com/agenda/human-interval&quot; target=&quot;_blank&quot;&gt;https://github.com/agenda/human-interval&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Repeat every：&lt;/strong&gt;循环执行定时任务，这里输入循环间隔时间。比如5 seconds。&lt;strong&gt;这里需要注意的是schedule安排的任务只会执行一次，repeat任务会一直循环执行。所以这二者一般只需要按需求填一个即可。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Job data&lt;/strong&gt;：向定时任务传入的额外数据，我们可以在任务执行时通过job.attr.data获取到这些参数。&lt;/p&gt;
&lt;p&gt;点击保存后，我们的定时任务就开始运行，可以看到控制台开始循环执行打印日志：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/606186/201802/606186-20180228112327877-1905415989.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;同时WEB界面数据将会更新，我们也能看到定时任务的运行状态：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/606186/201802/606186-20180228112517200-963781281.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;schedule安排一次性的定时任务也是类似的操作，大家可以自己尝试。&lt;/p&gt;
&lt;p&gt;值得注意的是，&lt;strong&gt;我们定义的任务，是可以被重复执行定时任务。&lt;/strong&gt;&lt;/p&gt;

&lt;h3&gt;4.2 移除定时任务&lt;/h3&gt;
&lt;p&gt;点击某一个定时任务，就能查看到任务的详细信息以及相关操作。&lt;/p&gt;
&lt;p&gt;点击右上角的【delete selected】即可删除该定时任务。 &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/606186/201802/606186-20180228112826985-1123811618.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;h2&gt;5、几个注意点&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;定时任务的时间除了使用cron表达式以外，还只能简单的英文表达，具体要参考&lt;a href=&quot;https://github.com/agenda/human-interval&quot; target=&quot;_blank&quot;&gt;https://github.com/agenda/human-interval&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;定时任务在执行过程中会将设置为锁定状态，任务执行完成以后再将任务锁定状态解除。所以如果任务在执行过程中，程序退出的话，那么就会导致任务一直处于锁定状态，agenda默认10分钟后自动解锁任务。&lt;/li&gt;
&lt;li&gt;为避免定时任务重复执行，一般来讲定时任务微服务我们只需要部署一个实例即可。核心的业务接口处于负载均衡的考虑，可以按业务量多部署几个实例。&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Wed, 28 Feb 2018 03:45:00 +0000</pubDate>
<dc:creator>小侠同学</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/souvenir/p/8480182.html</dc:identifier>
</item>
</channel>
</rss>