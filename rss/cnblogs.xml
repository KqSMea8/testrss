<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>基于hi-nginx的web开发（python篇）——cookie和会话管理 - hi-nginx</title>
<link>http://www.cnblogs.com/hi-nginx/p/8667802.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/hi-nginx/p/8667802.html</guid>
<description>&lt;p&gt;hi-nginx通过redis管理会话。&lt;/p&gt;
&lt;p&gt;要开启管理，需要做三件事。&lt;/p&gt;
&lt;p&gt;第一件开启userid:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
        userid                  on&lt;span&gt;;
&lt;/span&gt;        userid_name             SESSIONID&lt;span&gt;;
&lt;/span&gt;        userid_domain           localhost&lt;span&gt;;
&lt;/span&gt;        userid_path             /&lt;span&gt;;
&lt;/span&gt;        userid_expires          300s&lt;span&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;这个功能是nginx内建的，可以直接使用。需要注意的是，hi-nginx只认识SESSIONID的userid_name。&lt;/p&gt;
&lt;p&gt;第二件是配置redis服务器:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
        hi_redis_host 127.0.0.1&lt;span&gt;;
&lt;/span&gt;        hi_redis_port 6379&lt;span&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;当然，你应该先安装redis并确保它运行。&lt;/p&gt;
&lt;p&gt;第三件是在location段开启会话管理：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;    location  /  {
            hi_need_session on&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;            hi_session_expires 300s&lt;span&gt;;
&lt;/span&gt;            hi_python_script python/index/py&lt;span&gt;;
&lt;/span&gt;    }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;整个nginx配置写下来，就是：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;server {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     listen 8080&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;     server_name localhost&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt;         userid                  on&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         userid_name             SESSIONID&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         userid_domain           localhost&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         userid_path             /&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         userid_expires          300s&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; 
&lt;span&gt;11&lt;/span&gt;         hi_redis_host 127.0.0.1&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         hi_redis_port 6379&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; 
&lt;span&gt;14&lt;/span&gt;     
&lt;span&gt;15&lt;/span&gt; &lt;span&gt;    location / {
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;         hi_need_cache off&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;         hi_cache_expires 5s&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; 
&lt;span&gt;19&lt;/span&gt;         hi_need_session on&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;         hi_session_expires 300s&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;         hi_python_script python/index.py&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;需要注意是，应该确保hi_session_expires和userid_expires的值保持一致。&lt;/p&gt;
&lt;p&gt;配置写完后，记得reload或者restart nginx。&lt;/p&gt;

&lt;p&gt;接下来就是使用会话管理的api了。&lt;/p&gt;
&lt;p&gt;说来太简单，都不好意思写出来，用req.has_session,req.get_session和res.session即可:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
@app.route(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;^/session/?$&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;GET&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;])
&lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; session(req,res,param):
    k&lt;/span&gt;=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
    v&lt;/span&gt;=&lt;span&gt;0
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; req.has_session(k):
        v&lt;/span&gt;=&lt;span&gt;int(req.get_session(k))
        res.session(k,str(v&lt;/span&gt;+1&lt;span&gt;))
    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
        res.session(k,str(v))
    res.content(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;{}={}&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.format(k,v))
    res.status(&lt;/span&gt;200)
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;那么，cookie怎么办？人们使用cookie的一大用途建立会话机制。上文已经把会话管理的使用说清楚了。所以使用hi.py框架时不需要特别留意cookie的管理。当然，如果你想自己管理cookie，hi-nginx也提供req.has_cookie和req.get_cookie两个只读api。如果要写api，可以使用res.header来写。比如：&lt;/p&gt;
&lt;p&gt;在location段中添加hi_need_cookies on&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;    location / {
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;         hi_need_cache off&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;         hi_cache_expires 5s&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;         hi_need_cookies on&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;         hi_need_session on&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;         hi_session_expires 300s&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt;         hi_python_script python/index.py&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt;     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在操作函数中在添加相关操作:&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;51&quot;&gt;
&lt;pre&gt;
@app.route(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;^/session/?$&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,[&lt;span&gt;'&lt;/span&gt;&lt;span&gt;GET&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;])
&lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; session(req,res,param):
    k&lt;/span&gt;=&lt;span&gt;'&lt;/span&gt;&lt;span&gt;test&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;
    v&lt;/span&gt;=&lt;span&gt;0
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; req.has_session(k):
        v&lt;/span&gt;=&lt;span&gt;int(req.get_session(k))
        res.session(k,str(v&lt;/span&gt;+1&lt;span&gt;))
    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
        res.session(k,str(v))
    cv&lt;/span&gt;=&lt;span&gt;v
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; req.has_cookie(k):
        cv&lt;/span&gt;=&lt;span&gt;int(req.get_cookie(k))
        res.header(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Set-Cookie&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;{}={};Path={};Domain={}&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;.format(k,cv+1,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;localhost&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
    &lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;:
        res.header(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Set-Cookie&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;{}={};Path={};Domain={}&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;.format(k,cv,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;localhost&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;))
    res.content(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;session:{0}={1},cookie:{0}={2}&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;.format(k,v,cv))
    res.status(&lt;/span&gt;200)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;如上所见，在hi.py中操控和管理cookie和会话是非常方便的,用来写个登陆或者购物车什么的，配合hi.py的jinja2模板引擎，简直易如反掌。&lt;/p&gt;

</description>
<pubDate>Wed, 28 Mar 2018 23:15:00 +0000</pubDate>
<dc:creator>hi-nginx</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/hi-nginx/p/8667802.html</dc:identifier>
</item>
<item>
<title>Django+xadmin打造在线教育平台（七） - zhang_derek</title>
<link>http://www.cnblogs.com/derek1184405959/p/8666782.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/derek1184405959/p/8666782.html</guid>
<description>&lt;h2&gt;十、授课教师&lt;/h2&gt;
&lt;h3&gt;&lt;span&gt; 10.1.讲师列表页&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;拷贝teacher-list.html和teacher-detail.html到templates目录下&lt;/p&gt;
&lt;p&gt; 先改teacher-list.html，同样继承base.html&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180328210312052-1957196556.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; （1）urls配置&lt;/p&gt;
&lt;p&gt;organazition/urls.py&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;　　#&lt;/span&gt;&lt;span&gt; 讲师列表&lt;/span&gt;
    re_path(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;teacher/list/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, TeacherListView.as_view(), name=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teacher_list&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;),
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(2)给Teacher Model添加一个年龄字段&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
teacher_age = models.IntegerField(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;年龄&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,default=25)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;（3）view和模板&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 讲师列表&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; TeacherListView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self, request):
        all_teachers &lt;/span&gt;=&lt;span&gt; Teacher.objects.all()
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;teachers-list.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,{
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;all_teachers&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:all_teachers,
        })&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{% for teacher in all_teachers %}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/org/teacher/detail/1/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;picpic&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;scrollLoading&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ teacher.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr btn2 bdsharebuttonbox&quot;&lt;/span&gt;&lt;span&gt;
                                 data-text&lt;/span&gt;&lt;span&gt;=&quot;授课教师-奥巴马-慕学在线&quot;&lt;/span&gt;&lt;span&gt;
                                 data-desc&lt;/span&gt;&lt;span&gt;=&quot;我在#慕课网#发现了教师“奥巴马”，对学习中的小伙伴很有帮助，一起来看看吧。&quot;&lt;/span&gt;&lt;span&gt;
                                 data-comment&lt;/span&gt;&lt;span&gt;=&quot;奥巴马金牌讲师，从业年限：5年&quot;&lt;/span&gt;
                                 &lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;分享&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;#&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;bds_more&quot;&lt;/span&gt;&lt;span&gt; data-cmd&lt;/span&gt;&lt;span&gt;=&quot;more&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/org/teacher/detail/1/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.name }}&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key picbig&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;金牌讲师&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;cont&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作年限：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_years }}年&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作职位：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_position }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;就职公司：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_company }}&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;年龄：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.teacher_age }}岁&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;教学特点：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.points }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;buy buyservice&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;/org/teacher/detail/1/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;br&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;查看&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;br&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;详情&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                {% endfor %}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;10.2.分页&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 讲师列表&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; TeacherListView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self, request):
        all_teachers &lt;/span&gt;=&lt;span&gt; Teacher.objects.all()
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 总共有多少老师使用count进行统计&lt;/span&gt;
        teacher_nums =&lt;span&gt; all_teachers.count()
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 进行分页&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            page &lt;/span&gt;= request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;page&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, 1&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; PageNotAnInteger:
            page &lt;/span&gt;= 1&lt;span&gt;
        p &lt;/span&gt;= Paginator(all_teachers, 1, request=&lt;span&gt;request)
        teachers &lt;/span&gt;=&lt;span&gt; p.page(page)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teachers-list.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, {
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;all_teachers&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: teachers,
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teacher_nums&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: teacher_nums
        })&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pageturn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pagelist&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                            {% if all_teachers.has_previous %}
                                &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;long&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;?{{ all_teachers.previous_page_number.querystring }}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;上一页&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                            {% endif %}

                            {% for page in all_teachers.pages %}
                                {% if page %}
                                    {% ifequal page all_teachers.number %}
                                        &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;?{{ page.querystring }}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ page }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                                    {% else %}
                                        &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;?{{ page.querystring }}&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;page&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ page }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                                    {% endifequal %}
                                {% else %}
                                    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;none&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;...&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                                {% endif %}
                            {% endfor %}
                            {% if all_teachers.has_next %}
                                &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;long&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;?{{ all_teachers.next_page_number.querystring }}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;下一页&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                            {% endif %}
                        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180328220535619-1380007513.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h3&gt;&lt;span&gt;10.3.排序&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;46&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 讲师列表&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; TeacherListView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self, request):
        all_teachers &lt;/span&gt;=&lt;span&gt; Teacher.objects.all()
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 总共有多少老师使用count进行统计&lt;/span&gt;
        teacher_nums =&lt;span&gt; all_teachers.count()

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 人气排序&lt;/span&gt;
        sort = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; sort:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; sort == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;hot&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
                all_teachers &lt;/span&gt;= all_teachers.order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;讲师排行榜&lt;/span&gt;
        sorted_teacher = Teacher.objects.all().order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)[:3&lt;span&gt;]
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 进行分页&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            page &lt;/span&gt;= request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;page&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, 1&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; PageNotAnInteger:
            page &lt;/span&gt;= 1&lt;span&gt;
        p &lt;/span&gt;= Paginator(all_teachers, 1, request=&lt;span&gt;request)
        teachers &lt;/span&gt;=&lt;span&gt; p.page(page)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teachers-list.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, {
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;all_teachers&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: teachers,
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teacher_nums&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: teacher_nums,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sorted_teacher&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:sorted_teacher,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:sort,
        })&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;排序&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl tab_header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;{% if sort &lt;/span&gt;&lt;span&gt;== &lt;/span&gt;&lt;span&gt;'' %}class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;{% endif %}&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;?sort=&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全部&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;{% if sort &lt;/span&gt;&lt;span&gt;== &lt;/span&gt;&lt;span&gt;'hot' %}class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;{% endif %}&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;?sort=hot&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;人气 &amp;amp;#8595;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;讲师排行榜&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right layout&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;head&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;讲师排行榜&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            {% for hot_teacher in sorted_teacher %}
            &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;num fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/6/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;50&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;50&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;scrollLoading&quot;&lt;/span&gt;&lt;span&gt;  src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ hot_teacher.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/6/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;{{ hot_teacher.name }}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ hot_teacher.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作年限：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ hot_teacher.work_years }}年&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
            {% endfor %}
    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;span&gt;10.4.讲师详情页展示&lt;/span&gt;&lt;/h3&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 讲师详情&lt;/span&gt;
    re_path(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;teacher/detail/(?P&amp;lt;teacher_id&amp;gt;\d+)/&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, TeacherDetailView.as_view(), name=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teacher_detail&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;),
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;42&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt;讲师详情&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; TeacherDetailView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self,request,teacher_id):
        teacher &lt;/span&gt;= Teacher.objects.get(id=&lt;span&gt;int(teacher_id))
        all_course &lt;/span&gt;= Course.objects.filter(teacher=&lt;span&gt;teacher)
        
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 讲师排行榜&lt;/span&gt;
        sorted_teacher = Teacher.objects.all().order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)[:3&lt;span&gt;]
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request,&lt;span&gt;'&lt;/span&gt;&lt;span&gt;teacher-detail.html&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;,{
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;teacher&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:teacher,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;all_course&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:all_course,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sorted_teacher&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:sorted_teacher,
        })&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;讲师信息&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;picpic&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ teacher.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl btn1 collectionbtn&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLeftBtn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                                     {% if has_teacher_faved %}已收藏{% else %}收藏{% endif %}
                                &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr btn2 shareBtn bdsharebuttonbox&quot;&lt;/span&gt;&lt;span&gt;
                                      data-text&lt;/span&gt;&lt;span&gt;=&quot;授课教师-李老师-慕学网&quot;&lt;/span&gt;&lt;span&gt;
                                      data-desc&lt;/span&gt;&lt;span&gt;=&quot;我在#慕课网#发现了&quot;&lt;/span&gt;&lt;span&gt;
                                      data-comment&lt;/span&gt;&lt;span&gt;=&quot;李老师，工作年限：5年；学历：本科；所在公司：阿里巴巴&amp;amp;nbsp;；经典案例：django入门和深入；flask入门&quot;&lt;/span&gt;&lt;span&gt;
                                      data-url&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/10/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;分享&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;#&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;bds_more&quot;&lt;/span&gt;&lt;span&gt; data-cmd&lt;/span&gt;&lt;span&gt;=&quot;more&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/10/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.name }}&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key picbig&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;金牌讲师&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;cont&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作年限：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_years }}年&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;就职公司：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_company }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作职位：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_position }}&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;教学特点：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.points }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;全部课程&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;head&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;tab_header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/10/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全部课程&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;companycenter&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;group_list brief&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                            {% for teacher_course in all_course %}
                            &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_5 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'course:course_detail' teacher_course.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;214&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;scrollLoading&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ teacher_course.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'course:course_detail' teacher_course.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;时长：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.learn_times }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：{{ teacher_course.students }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.course_org.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr  notlogin&quot;&lt;/span&gt;&lt;span&gt; data-favid&lt;/span&gt;&lt;span&gt;=&quot;15&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.fav_nums }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                            {% endfor %}
                        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;教师机构&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;butler_detail_list&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right butler-company-box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;head&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.org.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;知名高校，权威教学&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pic&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:org_home' teacher.org.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;150&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;80&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ teacher.org.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:org_home' teacher.org.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.org.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center tell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;地址：{{ teacher.org.address }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsRightBtn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{% if has_org_faved %}已收藏{% else %}收藏{% endif %}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;讲师排行榜&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right layout&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;head&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;讲师排行榜&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% for hot_teacher in sorted_teacher %}
                        &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;num fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:teacher_detail' hot_teacher.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;50&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;50&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;scrollLoading&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ hot_teacher.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:teacher_detail' hot_teacher.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;bobby&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ hot_teacher.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作年限：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ hot_teacher.work_years }}年&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% endfor %}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;&lt;span&gt;10.5.收藏功能&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;view和前端&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 教师收藏和机构收藏&lt;/span&gt;
        has_teacher_faved =&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; UserFavorite.objects.filter(user=request.user, fav_type=3, fav_id=&lt;span&gt;teacher.id):
            has_teacher_faved &lt;/span&gt;=&lt;span&gt; True

        has_org_faved &lt;/span&gt;=&lt;span&gt; False
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; UserFavorite.objects.filter(user=request.user, fav_type=2, fav_id=&lt;span&gt;teacher.org.id):
            has_org_faved &lt;/span&gt;= True
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{% if has_teacher_faved %}已收藏{% else %}收藏{% endif %}

&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsRightBtn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{% if has_org_faved %}已收藏{% else %}收藏{% endif %}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;teacher-detail.html Ajax代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;53&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{% block custom_js %}
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收藏分享&lt;/span&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; add_fav(current_elem, fav_id, fav_type){
    $.ajax({
        cache: &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;,
        type: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;POST&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
        url:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{% url &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;org:add_fav&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; %}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
        data:{&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:fav_id, &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:fav_type},
        async: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
        beforeSend:&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(xhr, settings){
            xhr.setRequestHeader(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;X-CSRFToken&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{{ csrf_token }}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        },
        success: &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(data) {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;(data.status &lt;/span&gt;&lt;span&gt;==&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;){
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;(data.msg &lt;/span&gt;&lt;span&gt;==&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户未登录&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;){
                    window.location.href&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/login/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;{
                    alert(data.msg)
                }

            }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(data.status &lt;/span&gt;&lt;span&gt;==&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;){
                current_elem.text(data.msg)
            }
        },
    });
}

$(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#jsLeftBtn&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
    add_fav($(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;), {{ teacher.id }}, &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;);
});

$(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#jsRightBtn&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
    add_fav($(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;), {{ teacher.org.id }}, &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
});
&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
{% endblock %}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('9e1ed98b-4bf9-4a8c-9d34-3297623d6bfa')&quot; readability=&quot;41.5&quot;&gt;&lt;img id=&quot;code_img_closed_9e1ed98b-4bf9-4a8c-9d34-3297623d6bfa&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_9e1ed98b-4bf9-4a8c-9d34-3297623d6bfa&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('9e1ed98b-4bf9-4a8c-9d34-3297623d6bfa',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_9e1ed98b-4bf9-4a8c-9d34-3297623d6bfa&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;78&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{#templates/teacher-detail.html#}

{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}讲师详情{% endblock %}

{% block custom_bread %}
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;crumbs&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;index.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;首页&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&amp;gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:teacher_list' %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;授课讲师&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&amp;gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;讲师详情&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
{% endblock %}


{% block content %}
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp butler-detail-box butler-diaryd-box clearfix&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl list&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;butler_detail_list clearfix&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;brief&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;picpic&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ teacher.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl btn1 collectionbtn&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsLeftBtn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                                     {% if has_teacher_faved %}已收藏{% else %}收藏{% endif %}
                                &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr btn2 shareBtn bdsharebuttonbox&quot;&lt;/span&gt;&lt;span&gt;
                                      data-text&lt;/span&gt;&lt;span&gt;=&quot;授课教师-李老师-慕学网&quot;&lt;/span&gt;&lt;span&gt;
                                      data-desc&lt;/span&gt;&lt;span&gt;=&quot;我在#慕课网#发现了&quot;&lt;/span&gt;&lt;span&gt;
                                      data-comment&lt;/span&gt;&lt;span&gt;=&quot;李老师，工作年限：5年；学历：本科；所在公司：阿里巴巴&amp;amp;nbsp;；经典案例：django入门和深入；flask入门&quot;&lt;/span&gt;&lt;span&gt;
                                      data-url&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/10/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;分享&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;#&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;bds_more&quot;&lt;/span&gt;&lt;span&gt; data-cmd&lt;/span&gt;&lt;span&gt;=&quot;more&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/10/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.name }}&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key picbig&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;金牌讲师&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;cont&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作年限：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_years }}年&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;就职公司：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_company }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作职位：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.work_position }}&lt;span&gt;&amp;amp;nbsp;&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;教学特点：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.points }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;butler_detail_cont clearfix&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;left layout&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;head&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;tab_header&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;/diary/hk_detail/10/&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全部课程&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt; &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;companycenter&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;group_list brief&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                            {% for teacher_course in all_course %}
                            &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_5 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'course:course_detail' teacher_course.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;214&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;scrollLoading&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ teacher_course.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'course:course_detail' teacher_course.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;时长：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.learn_times }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：{{ teacher_course.students }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.course_org.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr  notlogin&quot;&lt;/span&gt;&lt;span&gt; data-favid&lt;/span&gt;&lt;span&gt;=&quot;15&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher_course.fav_nums }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                            {% endfor %}



                        &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;div class=&quot;pageturn&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;ul class=&quot;pagelist&quot;&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;li class=&quot;active&quot;&amp;gt;&amp;lt;a href=&quot;?page=1&quot;&amp;gt;1&amp;lt;/a&amp;gt;&amp;lt;/li&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;/ul&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;&amp;lt;/div&amp;gt;&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;


        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr list&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;butler_detail_list&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right butler-company-box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;head&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.org.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;知名高校，权威教学&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pic&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:org_home' teacher.org.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;150&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;80&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ teacher.org.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:org_home' teacher.org.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ teacher.org.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center tell&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;地址：{{ teacher.org.address }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;btn&quot;&lt;/span&gt;&lt;span&gt; id&lt;/span&gt;&lt;span&gt;=&quot;jsRightBtn&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{% if has_org_faved %}已收藏{% else %}收藏{% endif %}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;butler_detail_cont&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;butler_list_box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right layout&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;head&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;讲师排行榜&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% for hot_teacher in sorted_teacher %}
                        &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dl &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;num fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;1&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:teacher_detail' hot_teacher.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;50&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;50&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;scrollLoading&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{{ MEDIA_URL }}{{ hot_teacher.image }}&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dt&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:teacher_detail' hot_teacher.id %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;bobby&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ hot_teacher.name }}&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;工作年限：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;{{ hot_teacher.work_years }}年&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dd&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;dl&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                        {% endfor %}
                    &lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
{% endblock %}


{% block custom_js %}
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;收藏分享&lt;/span&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; add_fav(current_elem, fav_id, fav_type){
    $.ajax({
        cache: &lt;/span&gt;&lt;span&gt;false&lt;/span&gt;&lt;span&gt;,
        type: &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;POST&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
        url:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{% url &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;org:add_fav&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt; %}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;,
        data:{&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:fav_id, &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;fav_type&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:fav_type},
        async: &lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;,
        beforeSend:&lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(xhr, settings){
            xhr.setRequestHeader(&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;X-CSRFToken&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;{{ csrf_token }}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        },
        success: &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(data) {
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;(data.status &lt;/span&gt;&lt;span&gt;==&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;fail&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;){
                &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt;(data.msg &lt;/span&gt;&lt;span&gt;==&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户未登录&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;){
                    window.location.href&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/login/&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
                }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt;&lt;span&gt;{
                    alert(data.msg)
                }

            }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;&lt;span&gt;(data.status &lt;/span&gt;&lt;span&gt;==&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;){
                current_elem.text(data.msg)
            }
        },
    });
}

$(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#jsLeftBtn&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
    add_fav($(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;), {{ teacher.id }}, &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;);
});

$(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;#jsRightBtn&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;).on(&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;click&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;, &lt;/span&gt;&lt;span&gt;function&lt;/span&gt;&lt;span&gt;(){
    add_fav($(&lt;/span&gt;&lt;span&gt;this&lt;/span&gt;&lt;span&gt;), {{ teacher.org.id }}, &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;);
});
&lt;/span&gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
{% endblock %}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;teacher-detail.html&lt;/span&gt;&lt;/div&gt;

&lt;h3&gt;&lt;span&gt;10.6.配置全局导航&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;（1）index.html继承base.html&lt;/p&gt;
&lt;p&gt;注意首页有个单独的“index.js”&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1299879/201803/1299879-20180329002113830-206595600.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('c2f2d690-0629-4eb6-96eb-4a0a2d6c66db')&quot; readability=&quot;32.5&quot;&gt;&lt;img id=&quot;code_img_closed_c2f2d690-0629-4eb6-96eb-4a0a2d6c66db&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_c2f2d690-0629-4eb6-96eb-4a0a2d6c66db&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('c2f2d690-0629-4eb6-96eb-4a0a2d6c66db',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_c2f2d690-0629-4eb6-96eb-4a0a2d6c66db&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;60&quot;&gt;
&lt;pre&gt;
&lt;span&gt;{% extends 'base.html' %}
{% load staticfiles %}
{% block title %}课程机构列表{% endblock %}

{% block custom_bread %}
{% endblock %}

{% block content %}
    &lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;banner&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;imgslide&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;imgs&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;http://www.imooc.com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;1200&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;478&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/banner/2016/11/57a801860001c34b12000460.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;http://www.projectsedu.com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;1200&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;478&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/banner/2016/11/57aa86a0000145c512000460.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;http://www.projectsedu.com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;1200&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;478&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/banner/2016/11/57a801860001c34b12000460_z4Vb8zl.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;http://www.projectsedu.com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;1200&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;478&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/banner/2016/11/57aa86a0000145c512000460_nMwvoQD.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;http://www.projectsedu.com&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;1200&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;478&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/banner/2016/11/57aa86a0000145c512000460_GXIBATC.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;


                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;unslider-arrow prev&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;unslider-arrow next&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;


            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;banner end&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;feature start&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;feature&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;feature1&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pic&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/feature1.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;专业权威&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;feature2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pic&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/feature2.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;课程最新&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;feature3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pic&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/feature3.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;名师授课&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;feature4&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;pic&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/feature4.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;center&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;数据真实&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;feature end&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt;module1 start&lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;公开课程&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1 eachmod&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_1 left&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;228&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;614&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/module1_1.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fisrt_word&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;名师授课&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;br&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;专业权威&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;more&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;course-list.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;查看更多课程 &amp;gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right group_list&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_2 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;imgslide2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;imgs&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;470&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;300&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/12/python文件处理.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;470&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;300&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/12/python面向对象.jpg&quot;&lt;/span&gt; &lt;span&gt;/&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;unslider-arrow2 prev&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;unslider-arrow2 next&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_3 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;233&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/11/mysql.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;django入门&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;django入门&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;难度：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;初级&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：3&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_4 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;233&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/11/57035ff200014b8a06000338-240-135.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;java入门&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;java入门&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;难度：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;中级&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;北京大学&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;北京大学&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_5 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;233&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/11/540e57300001d6d906000338-240-135.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;python入门&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;python入门&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;难度：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;中级&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;南京大学&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;南京大学&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_6 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;233&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/11/57035ff200014b8a06000338-240-135_dHfj8Nq.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;java入门2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;java入门2&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;难度：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;高级&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网2&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_7 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;233&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/11/57035ff200014b8a06000338-240-135_0nFiBSI.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;java入门3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;java入门3&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;难度：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;初级&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：1&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网3&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module1_8 box&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;233&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;190&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/courses/2016/11/540e57300001d6d906000338-240-135_MSIqfvw.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;des&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;course-detail.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2 &lt;/span&gt;&lt;span&gt;title&lt;/span&gt;&lt;span&gt;=&quot;python入门2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;python入门2&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;难度：&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;i &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;中级&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;i&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;学习人数：0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;bottom&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fl&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网666&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网666&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;star fr&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;0&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module greybg&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;课程机构&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h1&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module3 eachmod&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;module3_1 left&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;228&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;463&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/images/module3_1.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;fisrt_word&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;名校来袭&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;br&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;权威认证&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;more&quot;&lt;/span&gt;&lt;span&gt; href&lt;/span&gt;&lt;span&gt;=&quot;org-list.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;查看更多机构 &amp;gt;&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;right&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/imooc.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/bjdx.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;北京大学&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;北京大学&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/qhdx-logo.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;清华大学&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;清华大学&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/njdx.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;南京大学&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;南京大学&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;five&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/imooc_klgAUn5.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网2&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网2&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/imooc_Gn1sRjp.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网3&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/imooc_Y2Tonsq.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网3&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网3&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/imooc_OO2ykYP.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网4&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网4&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/imooc_V0TJOyb.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网5&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网5&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;five&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/11/imooc_qEaMov1.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕课网666&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕课网666&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/12/bjdx.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕学网&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕学网&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/12/imooc_Gn1sRjp.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;python培训机构&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;python培训机构&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/12/bjdx_cCpdUw8.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;vuejs培训&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;vuejs培训&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/12/imooc_klgAUn5.png&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;nodejs培训&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;nodejs培训&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;five&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;org-detail-homepage.html&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;company&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;width&lt;/span&gt;&lt;span&gt;=&quot;184&quot;&lt;/span&gt;&lt;span&gt; height&lt;/span&gt;&lt;span&gt;=&quot;100&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;/static/media/org/2016/12/bjdx_bcd0m07.jpg&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;score&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;circle&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                    &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;全国知名&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;h2&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;span &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;key&quot;&lt;/span&gt;&lt;span&gt; title&lt;/span&gt;&lt;span&gt;=&quot;慕学在线&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;慕学在线&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;span&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;p&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;

                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;section&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
{% endblock %}
{% block custom_js %}
&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;script &lt;/span&gt;&lt;span&gt;type&lt;/span&gt;&lt;span&gt;=&quot;text/javascript&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{% static 'js/index.js' %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;script&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
{% endblock %}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;index.html&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;(2)配置全局导航和全局&quot;active&quot;状态&lt;/p&gt;
&lt;p&gt;base.html里面设置&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;div &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;wp&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;{% if request.path &lt;/span&gt;&lt;span&gt;== &lt;/span&gt;&lt;span&gt;'/' %}class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;{% endif %}&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'index' %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;首页&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;{% if request.path|slice:'7' &lt;/span&gt;&lt;span&gt;== &lt;/span&gt;&lt;span&gt;'/course' %}class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;{% endif %}&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'course:course_list' %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;span&gt;
                                    公开课&lt;/span&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;img &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;hot&quot;&lt;/span&gt;&lt;span&gt; src&lt;/span&gt;&lt;span&gt;=&quot;{% static 'images/nav_hot.png' %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;{% if request.path|slice:'12' &lt;/span&gt;&lt;span&gt;== &lt;/span&gt;&lt;span&gt;'/org/teacher' %}class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;{% endif %}&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:teacher_list' %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;授课教师&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;li &lt;/span&gt;&lt;span&gt;{% if request.path|slice:'9' &lt;/span&gt;&lt;span&gt;== &lt;/span&gt;&lt;span&gt;'/org/list' %}class&lt;/span&gt;&lt;span&gt;=&quot;active&quot;&lt;/span&gt;&lt;span&gt;{% endif %}&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                                &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;a &lt;/span&gt;&lt;span&gt;href&lt;/span&gt;&lt;span&gt;=&quot;{% url 'org:org_list' %}&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;授课机构&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;a&lt;/span&gt;&lt;span&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;li&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;ul&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
                    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;div&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;说明：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;request.path  可以获取当前访问页面的相对url&lt;/li&gt;
&lt;li&gt;比如“http://127.0.0.1:8000/org/teacher_list/”，则request.path  就是“/org/teacher_list/”&lt;/li&gt;
&lt;li&gt;比如&quot;http://127.0.0.1:8000/org/teacher/detail/1/&quot;，则request.path 就是“/org/teacher/detail/1/”&lt;/li&gt;
&lt;li&gt;slice:12   是过滤器，取前七位数&lt;/li&gt;
&lt;li&gt;利用这种发发可以达到全局的“active”效果，而不用每个子页面都要去设置“active”了&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;span&gt;10.7.全局搜索功能&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;通过url中加参数keywords来达到全局搜索的功能&lt;/p&gt;
&lt;p&gt;以Course搜索为例：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
 　　　　&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 搜索功能&lt;/span&gt;
        search_keywords = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keywords&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; search_keywords:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; icontains是包含的意思（不区分大小写）&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; Q可以实现多个字段，之间是or的关系&lt;/span&gt;
            all_courses = all_courses.filter(Q(name__icontains=search_keywords) | Q(desc__icontains=search_keywords) |&lt;span&gt; Q(
                detail__icontains&lt;/span&gt;=search_keywords))
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('35569ad2-d809-4ba3-8da3-25d3f929e86d')&quot; readability=&quot;38.5&quot;&gt;&lt;img id=&quot;code_img_closed_35569ad2-d809-4ba3-8da3-25d3f929e86d&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_35569ad2-d809-4ba3-8da3-25d3f929e86d&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('35569ad2-d809-4ba3-8da3-25d3f929e86d',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_35569ad2-d809-4ba3-8da3-25d3f929e86d&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;72&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; CourseListView(View):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;课程列表&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;
    &lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self, request):
        all_courses &lt;/span&gt;= Course.objects.all().order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-add_time&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 热门课程推荐&lt;/span&gt;
        hot_courses = Course.objects.all().order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)[:3&lt;span&gt;]
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 搜索功能&lt;/span&gt;
        search_keywords = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keywords&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; search_keywords:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 在name字段进行操作,做like语句的操作。i代表不区分大小写&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; or操作使用Q&lt;/span&gt;
            all_courses = all_courses.filter(Q(name__icontains=search_keywords) | Q(desc__icontains=search_keywords) |&lt;span&gt; Q(
                detail__icontains&lt;/span&gt;=&lt;span&gt;search_keywords))
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 排序&lt;/span&gt;
        sort = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; sort:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; sort == &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:
                all_courses &lt;/span&gt;= all_courses.order_by(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;-students&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
            &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt; sort == &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;hot&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:
                all_courses &lt;/span&gt;= all_courses.order_by(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 分页&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            page &lt;/span&gt;= request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;page&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, 1&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; PageNotAnInteger:
            page &lt;/span&gt;= 1&lt;span&gt;
        p &lt;/span&gt;= Paginator(all_courses,2 , request=&lt;span&gt;request)
        courses &lt;/span&gt;=&lt;span&gt; p.page(page)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;course-list.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, {
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;all_courses&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:courses,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;: sort,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;hot_courses&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:hot_courses,

        })&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;course/views.py&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;搜索的代码放在deco-common js中：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt;//&lt;/span&gt;&lt;span&gt;顶部搜索栏搜索方法&lt;/span&gt;
&lt;span&gt;function&lt;/span&gt;&lt;span&gt; search_click(){
    &lt;/span&gt;&lt;span&gt;var&lt;/span&gt; type = $('#jsSelectOption').attr('data-value'&lt;span&gt;),
        keywords &lt;/span&gt;= $('#search_keywords'&lt;span&gt;).val(),
        request_url &lt;/span&gt;= ''&lt;span&gt;;
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(keywords == &quot;&quot;&lt;span&gt;){
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;
    }
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;(type == &quot;course&quot;&lt;span&gt;){
        request_url &lt;/span&gt;= &quot;/course/list?keywords=&quot;+&lt;span&gt;keywords
    }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(type == &quot;teacher&quot;&lt;span&gt;){
        request_url &lt;/span&gt;= &quot;/org/teacher/list?keywords=&quot;+&lt;span&gt;keywords
    }&lt;/span&gt;&lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt;(type == &quot;org&quot;&lt;span&gt;){
        request_url &lt;/span&gt;= &quot;/org/list?keywords=&quot;+&lt;span&gt;keywords
    }
    window.location.href &lt;/span&gt;=&lt;span&gt; request_url
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;课程机构搜索功能&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 机构搜索功能&lt;/span&gt;
        search_keywords = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keywords&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; search_keywords:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 在name字段进行操作,做like语句的操作。i代表不区分大小写&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; or操作使用Q&lt;/span&gt;
            all_orgs = all_orgs.filter(Q(name__icontains=search_keywords) | Q(desc__icontains=search_keywords))
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('7f7562d9-0ee8-49f2-9c34-53c96690b110')&quot; readability=&quot;41.5&quot;&gt;&lt;img id=&quot;code_img_closed_7f7562d9-0ee8-49f2-9c34-53c96690b110&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_7f7562d9-0ee8-49f2-9c34-53c96690b110&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('7f7562d9-0ee8-49f2-9c34-53c96690b110',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_7f7562d9-0ee8-49f2-9c34-53c96690b110&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;78&quot;&gt;
&lt;pre&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; OrgView(View):
    &lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;&lt;span&gt;课程机构&lt;/span&gt;&lt;span&gt;'''&lt;/span&gt;

    &lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self, request):
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 所有课程机构&lt;/span&gt;
        all_orgs =&lt;span&gt; CourseOrg.objects.all()

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 所有城市&lt;/span&gt;
        all_citys =&lt;span&gt; CityDict.objects.all()

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 机构搜索功能&lt;/span&gt;
        search_keywords = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keywords&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; search_keywords:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 在name字段进行操作,做like语句的操作。i代表不区分大小写&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; or操作使用Q&lt;/span&gt;
            all_orgs = all_orgs.filter(Q(name__icontains=search_keywords) | Q(desc__icontains=&lt;span&gt;search_keywords))
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 城市筛选&lt;/span&gt;
        city_id = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;city&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; city_id:
            all_orgs &lt;/span&gt;= all_orgs.filter(city_id=&lt;span&gt;int(city_id))

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 类别筛选&lt;/span&gt;
        category = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;ct&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; category:
            all_orgs &lt;/span&gt;= all_orgs.filter(category=&lt;span&gt;category)

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 热门课程机构排名&lt;/span&gt;
        hot_orgs = all_orgs.order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)[:3&lt;span&gt;]
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 学习人数和课程数筛选&lt;/span&gt;
        sort = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;&quot;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; sort:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; sort == &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;students&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:
                all_orgs &lt;/span&gt;= all_orgs.order_by(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;-students&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
            &lt;/span&gt;&lt;span&gt;elif&lt;/span&gt; sort == &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;courses&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;:
                all_orgs &lt;/span&gt;= all_orgs.order_by(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;-course_nums&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 有多少家机构&lt;/span&gt;
        org_nums =&lt;span&gt; all_orgs.count()
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 对课程机构进行分页&lt;/span&gt;
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; 尝试获取前台get请求传递过来的page参数&lt;/span&gt;
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; 如果是不合法的配置参数默认返回第一页&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            page &lt;/span&gt;= request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;page&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, 1&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; PageNotAnInteger:
            page &lt;/span&gt;= 1
        &lt;span&gt;#&lt;/span&gt;&lt;span&gt; 这里指从allorg中取五个出来，每页显示5个&lt;/span&gt;
        p = Paginator(all_orgs, 2, request=&lt;span&gt;request)
        orgs &lt;/span&gt;=&lt;span&gt; p.page(page)

        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;org-list.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, {
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;all_orgs&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: orgs,
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;all_citys&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: all_citys,
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;org_nums&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: org_nums,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;city_id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:city_id,
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;category&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: category,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;hot_orgs&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:hot_orgs,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:sort,
        })&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;OrgView&lt;/span&gt;&lt;/div&gt;

&lt;p&gt;授课老师搜索功能&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 搜索功能&lt;/span&gt;
        search_keywords = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keywords&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; search_keywords:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 在name字段进行操作,做like语句的操作。i代表不区分大小写&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; or操作使用Q&lt;/span&gt;
            all_teachers = all_teachers.filter(name__icontains=search_keywords)
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; onclick=&quot;cnblogs_code_show('efbc5592-33fd-4d9e-ae9a-10892a10fb63')&quot; readability=&quot;39&quot;&gt;&lt;img id=&quot;code_img_closed_efbc5592-33fd-4d9e-ae9a-10892a10fb63&quot; class=&quot;code_img_closed&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif&quot; alt=&quot;&quot;/&gt;&lt;img id=&quot;code_img_opened_efbc5592-33fd-4d9e-ae9a-10892a10fb63&quot; class=&quot;code_img_opened&quot; onclick=&quot;cnblogs_code_hide('efbc5592-33fd-4d9e-ae9a-10892a10fb63',event)&quot; src=&quot;https://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif&quot; alt=&quot;&quot;/&gt;&lt;div id=&quot;cnblogs_code_open_efbc5592-33fd-4d9e-ae9a-10892a10fb63&quot; class=&quot;cnblogs_code_hide&quot; readability=&quot;73&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 讲师列表&lt;/span&gt;
&lt;span&gt;class&lt;/span&gt;&lt;span&gt; TeacherListView(View):
    &lt;/span&gt;&lt;span&gt;def&lt;/span&gt;&lt;span&gt; get(self, request):
        all_teachers &lt;/span&gt;=&lt;span&gt; Teacher.objects.all()
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 总共有多少老师使用count进行统计&lt;/span&gt;
        teacher_nums =&lt;span&gt; all_teachers.count()

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 搜索功能&lt;/span&gt;
        search_keywords = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;keywords&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; search_keywords:
            &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 在name字段进行操作,做like语句的操作。i代表不区分大小写&lt;/span&gt;
            &lt;span&gt;#&lt;/span&gt;&lt;span&gt; or操作使用Q&lt;/span&gt;
            all_teachers = all_teachers.filter(name__icontains=&lt;span&gt;search_keywords)
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 人气排序&lt;/span&gt;
        sort = request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;''&lt;/span&gt;&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; sort:
            &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; sort == &lt;span&gt;'&lt;/span&gt;&lt;span&gt;hot&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:
                all_teachers &lt;/span&gt;= all_teachers.order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;)

        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;讲师排行榜&lt;/span&gt;
        sorted_teacher = Teacher.objects.all().order_by(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;-click_nums&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;)[:3&lt;span&gt;]
        &lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt; 进行分页&lt;/span&gt;
        &lt;span&gt;try&lt;/span&gt;&lt;span&gt;:
            page &lt;/span&gt;= request.GET.get(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;page&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, 1&lt;span&gt;)
        &lt;/span&gt;&lt;span&gt;except&lt;/span&gt;&lt;span&gt; PageNotAnInteger:
            page &lt;/span&gt;= 1&lt;span&gt;
        p &lt;/span&gt;= Paginator(all_teachers, 1, request=&lt;span&gt;request)
        teachers &lt;/span&gt;=&lt;span&gt; p.page(page)
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; render(request, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teachers-list.html&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;, {
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;all_teachers&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: teachers,
            &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;teacher_nums&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;: teacher_nums,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sorted_teacher&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:sorted_teacher,
            &lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;sort&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;:sort,
        })&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;span class=&quot;cnblogs_code_collapse&quot;&gt;TeacherListView&lt;/span&gt;&lt;/div&gt;

</description>
<pubDate>Wed, 28 Mar 2018 17:51:00 +0000</pubDate>
<dc:creator>zhang_derek</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/derek1184405959/p/8666782.html</dc:identifier>
</item>
<item>
<title>Spring MVC核心技术 - 大道方圆</title>
<link>http://www.cnblogs.com/xdecode/p/8667463.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xdecode/p/8667463.html</guid>
<description>&lt;h3&gt;目录&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;异常处理&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;类型转换器&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据验证&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;文件上传与下载&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;拦截器&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;hr/&gt;&lt;h3&gt; 异常处理&lt;/h3&gt;
&lt;p&gt;Spring MVC中, 系统的DAO, Service, Controller层出现异常, 均通过throw Exception向上抛出,&lt;/p&gt;
&lt;p&gt;最后由中央处理器DispatchServlet交由全局异常处理器进行异常处理, 如下图所示&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1285727/201803/1285727-20180328234146442-744453865.png&quot; alt=&quot;&quot; width=&quot;588&quot; height=&quot;466&quot;/&gt;&lt;/p&gt;
&lt;p&gt;常用的Spring MVC异常处理方式主要有三种:&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;使用系统定义好的异常处理器SimpleMappingExceptionResolver&lt;/li&gt;
&lt;li&gt;使用自定义异常处理器&lt;/li&gt;
&lt;li&gt;使用异常注解&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;SimpleMappingExceptionResolver&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;只需要在配置文件中注册该异常处理器Bean即可, 无需显式调用, 当异常发生时会自动执行该类.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;defaultErrorView&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;/errors/error.jsp&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(1) 声明一个自定义的异常类&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; NameException &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; Exception {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; NameException() {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;();
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; NameException(String message) {
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         &lt;span&gt;super&lt;/span&gt;&lt;span&gt;(message);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     
&lt;span&gt;11&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(2) 注册异常处理器&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.servlet.handler.SimpleMappingExceptionResolver&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;defaultErrorView&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;/errors/error.jsp&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;exceptionAttribute&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;ex&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;exceptionMappings&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;5&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;props&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt;                 &lt;strong&gt;&lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;prop &lt;/span&gt;&lt;span&gt;key&lt;/span&gt;&lt;span&gt;=&quot;com.test.exceptions.NameException&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;/errors/nameError.jsp&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;prop&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;&lt;/strong&gt;
&lt;span&gt;7&lt;/span&gt;             &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;props&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;8&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;9&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;exceptionMapping: Properties类型属性, 用于指定具体的不同类型异常对应的响应页面.&lt;/p&gt;
&lt;p&gt;defaultErrorView: 默认的异常响应页面, 若发生的异常不是自定义的异常, 则使用默认响应页面.&lt;/p&gt;
&lt;p&gt;exceptionAttribute: 捕获到的异常对象, 一般异常响应页面中使用.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;自定义异常处理器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;SimpleMappingExceptionResolver可以在发生异常的时候进行页面跳转, 但是如果想要在捕获到特定异常后, &lt;/p&gt;
&lt;p&gt;执行一些操作, 则需要自定义异常. 自定义异常处理器需要实现HandlerExceptionResolver接口, 并且该类&lt;/p&gt;
&lt;p&gt;需要在配置文件中进行注册.&lt;/p&gt;
&lt;p&gt;(1) 定义异常处理器&lt;/p&gt;
&lt;p&gt;当一个类实现了HandlerExceptionResolver接口后, 只要有异常发生, 都会执行resolveException方法.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyHandlerExceptionResolver &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; HandlerExceptionResolver {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ModelAndView resolveException(HttpServletRequest request,
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; &lt;span&gt;            HttpServletResponse response, Object handler, Exception ex) {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         
&lt;span&gt; 6&lt;/span&gt;         ModelAndView mv = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         mv.addObject(&quot;ex&quot;&lt;span&gt;, ex);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         mv.setViewName(&quot;/errors/error.jsp&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         
&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(ex &lt;span&gt;instanceof&lt;/span&gt;&lt;span&gt; NameException) {
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 执行一些操作&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt;             mv.setViewName(&quot;/errors/nameError.jsp&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;         
&lt;span&gt;15&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mv;
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; 
&lt;span&gt;18&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(2) 注册异常处理器&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注册异常处理器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;com.test.resolvers.MyHandlerExceptionResolver&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;异常处理注解&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;使用注解@ExceptionHandler可以将一个方法指定为异常处理方法, 该注解有一个可选属性value,&lt;/p&gt;
&lt;p&gt;可用于指定该注解方法所需要处理的异常类. &lt;/p&gt;
&lt;p&gt;定义一个顶层Controller, 处理所有异常, 其他Controller继承该类即可实现异常集中管理.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;@Controller    
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; BaseController {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; 
&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 处理NameException异常&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;     @ExceptionHandler(NameException.&lt;span&gt;class&lt;/span&gt;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ModelAndView handlerNameException(Exception ex) {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         ModelAndView mv = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         mv.addObject(&quot;ex&quot;&lt;span&gt;, ex);
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 执行一些操作&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;         mv.setViewName(&quot;/errors/nameError.jsp&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mv;
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; 
&lt;span&gt;14&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;类型转换器&lt;/h3&gt;
&lt;p&gt;可以将用户web端提交的数据, 在后台转为需要的数据类型.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;自定义类型转换器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;若要定义类型转换器, 则需要实现Converter接口, 该Convert接口有两个泛型:&lt;/p&gt;
&lt;p&gt;第一个为待转换类型, 第二个为目标类型, 该接口方法convert用于实现转换.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; MyDateConverter &lt;span&gt;implements&lt;/span&gt; Converter&amp;lt;String, Date&amp;gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; Date convert(String source) {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;         SimpleDateFormat sdf = &lt;span&gt;new&lt;/span&gt; SimpleDateFormat(&quot;yyyy-MM-dd&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         &lt;span&gt;try&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt;&lt;span&gt; sdf.parse(source);
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         } &lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (ParseException e) {   
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;            e.printStackTrace();
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;null&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt; 
&lt;span&gt;13&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;类型转换器定义完毕后, 需要在配置文件中进行注册, 然后注册一个转换服务Bean, 将转换器注入给该Bean, &lt;/p&gt;
&lt;p&gt;最后由处理器适配器来使用该转换服务器Bean. 该Bean由ConversionServiceFactory工厂创建, 工厂有Set集合属性, &lt;/p&gt;
&lt;p&gt;可以提供多种转换功能的Bean来处理多种数据类型转换.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注册类型转换器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;myDateConverter&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;com.test.converters.MyDateConverter&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt; 3&lt;/span&gt;     
&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注册转换服务对象 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;conversionService&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.context.support.ConversionServiceFactoryBean&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;converters&quot;&lt;/span&gt;&lt;span&gt; ref&lt;/span&gt;&lt;span&gt;=&quot;myDateConverter&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt; 8&lt;/span&gt;     
&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注册mvc注解驱动 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mvc:annotation-driven &lt;/span&gt;&lt;span&gt;conversion-service&lt;/span&gt;&lt;span&gt;=&quot;conversionService&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;数据验证&lt;/h3&gt;
&lt;p&gt;主要是校验客户端发来的数据是否合法, 例如不能为空, 或者长度不符合等等. Spring MVC没有校验功能,&lt;/p&gt;
&lt;p&gt;但是支持JSR303-Bean Validation, 可以用实现该规范的Hibernate Validator校验框架.&lt;/p&gt;
&lt;p&gt;(1) 配置验证器&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 生成验证器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;myValidator&quot;&lt;/span&gt;&lt;span&gt; class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.validation.beanvalidation.LocalValidatorFactoryBean&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;providerClass&quot;&lt;/span&gt;&lt;span&gt; value&lt;/span&gt;&lt;span&gt;=&quot;org.hibernate.validator.HibernateValidator&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(2) 在Bean上添加验证注解&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Student {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     
&lt;span&gt; 3&lt;/span&gt;     @NotNull(message=&quot;姓名不能为空&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     @Size(min=3, max=6, message=&quot;姓名长度应在{min}-{max}个字符&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; String name;
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     
&lt;span&gt; 7&lt;/span&gt;     @Min(value=0, message=&quot;成绩不能小于{value}&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     @Max(value=100, message=&quot;成绩不能大于{value}&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt; &lt;span&gt;double&lt;/span&gt;&lt;span&gt; score;
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     
&lt;span&gt;11&lt;/span&gt;     
&lt;span&gt;12&lt;/span&gt;     @NotNull(message=&quot;电话不能为空&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;     @Pattern(regexp=&quot;^1[34578]\\d{9}$&quot;, message=&quot;手机号格式不正确&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;     &lt;span&gt;private&lt;/span&gt;&lt;span&gt; String mobile;
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; 
&lt;span&gt;16&lt;/span&gt; &lt;span&gt;        ......
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(3) 修改Controller&lt;/p&gt;
&lt;p&gt;在需要校验的参数前面加上@Validated注解, 同时追加一个BindingResult参数, 用于获取验证异常信息.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;@Controller    
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; @RequestMapping(&quot;/test&quot;&lt;span&gt;)    
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyController {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt; 
&lt;span&gt; 5&lt;/span&gt;     @RequestMapping(&quot;/register.do&quot;&lt;span&gt;)
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt;&lt;span&gt; ModelAndView doRegister(&lt;strong&gt;@Validated Student student, BindingResult br&lt;/strong&gt;) {
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;         
&lt;span&gt; 8&lt;/span&gt;         ModelAndView mv = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; ModelAndView();
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;         mv.addObject(&quot;student&quot;&lt;span&gt;, student);
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;         mv.setViewName(&quot;/WEB-INF/jsp/welcome.jsp&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;         
&lt;span&gt;12&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt; errorCount =&lt;span&gt; br.getErrorCount();
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(errorCount &amp;gt; 0&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;             FieldError nameError = br.getFieldError(&quot;name&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;             
&lt;span&gt;16&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (nameError != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;) {
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;                 String nameErrorMSG =&lt;span&gt; nameError.getDefaultMessage();
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;                 mv.addObject(&quot;nameErrorMSG&quot;&lt;span&gt;, nameErrorMSG);
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt;             mv.setViewName(&quot;/index.jsp&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;         
&lt;span&gt;23&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt;&lt;span&gt; mv;
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;文件上传与下载&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;上传&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Spring MVC中文件上传需要添加Apache Commons FileUpload相关的jar包,&lt;/p&gt;
&lt;p&gt;基于该jar, Spring中提供了MultipartResolver实现类: CommonsMultipartResolver.&lt;/p&gt;
&lt;p&gt;注册该Bean到配置文件中&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
   &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;id&lt;/span&gt;&lt;span&gt;=&quot;multipartResolver&quot;&lt;/span&gt;&lt;span&gt;  
        class&lt;/span&gt;&lt;span&gt;=&quot;org.springframework.web.multipart.commons.CommonsMultipartResolver&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;  
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 上传文件大小上限，单位为字节（10MB） &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;maxUploadSize&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;  
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;10485760&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;  
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;  
        &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 请求的编码格式，必须和jSP的pageEncoding属性一致，以便正确读取表单的内容，默认为ISO-8859-1 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;property &lt;/span&gt;&lt;span&gt;name&lt;/span&gt;&lt;span&gt;=&quot;defaultEncoding&quot;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
            &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;UTF-8&lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;value&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
        &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;property&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
    &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;bean&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Spring MVC会将上传的文件绑定到MultipartFile对象, 该对象提供获取内容, 文件名等方法.&lt;/p&gt;
&lt;p&gt;通过transferTo方法可以将文件存储到磁盘.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1285727/201803/1285727-20180329002634028-1239331494.jpg&quot; alt=&quot;&quot; width=&quot;233&quot; height=&quot;190&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt;      &lt;span&gt;//&lt;/span&gt;&lt;span&gt;上传文件会自动绑定到MultipartFile中&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt;      @RequestMapping(value=&quot;/upload&quot;,method=&lt;span&gt;RequestMethod.POST)
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;      &lt;span&gt;public&lt;/span&gt;&lt;span&gt; String upload(HttpServletRequest request,
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;             @RequestParam(&quot;description&quot;&lt;span&gt;) String description,
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;             @RequestParam(&quot;file&quot;) MultipartFile file) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt; 
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;        System.out.println(description);
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;         &lt;span&gt;//&lt;/span&gt;&lt;span&gt;如果文件不为空，写入上传路径&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt;         &lt;span&gt;if&lt;/span&gt;(!&lt;span&gt;file.isEmpty()) {
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;上传文件路径&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt;             String path = request.getServletContext().getRealPath(&quot;/images/&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;上传文件名&lt;/span&gt;
&lt;span&gt;13&lt;/span&gt;             String filename =&lt;span&gt; file.getOriginalFilename();
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;             File filepath = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; File(path,filename);
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;判断路径是否存在，如果不存在就创建一个&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt;             &lt;span&gt;if&lt;/span&gt; (!&lt;span&gt;filepath.getParentFile().exists()) { 
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;                filepath.getParentFile().mkdirs();
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; &lt;span&gt;            }
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt;             &lt;span&gt;//&lt;/span&gt;&lt;span&gt;将上传文件保存到一个目标文件当中&lt;/span&gt;
&lt;span&gt;20&lt;/span&gt;             file.transferTo(&lt;span&gt;new&lt;/span&gt; File(path + File.separator +&lt;span&gt; filename));
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &quot;success&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt;         } &lt;span&gt;else&lt;/span&gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt;             &lt;span&gt;return&lt;/span&gt; &quot;error&quot;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;24&lt;/span&gt; &lt;span&gt;        }
&lt;/span&gt;&lt;span&gt;25&lt;/span&gt; 
&lt;span&gt;26&lt;/span&gt;      }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;下载&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下载比较简单, Spring MVC中提供了ResponseEntity类型, 可以很方便的返回HTTPHeaders, HttpStatus.&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;41&quot;&gt;
&lt;pre&gt;
     @RequestMapping(value=&quot;/download&quot;&lt;span&gt;)
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; ResponseEntity&amp;lt;&lt;span&gt;byte&lt;/span&gt;[]&amp;gt;&lt;span&gt; download(HttpServletRequest request,
             @RequestParam(&lt;/span&gt;&quot;filename&quot;&lt;span&gt;) String filename,
             Model model)&lt;/span&gt;&lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;下载文件路径&lt;/span&gt;
        String path = request.getServletContext().getRealPath(&quot;/images/&quot;&lt;span&gt;);
        File file &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt; File(path + File.separator +&lt;span&gt; filename);
        HttpHeaders headers &lt;/span&gt;= &lt;span&gt;new&lt;/span&gt;&lt;span&gt; HttpHeaders();  
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;下载显示的文件名，解决中文名称乱码问题  &lt;/span&gt;
        String downloadFielName = &lt;span&gt;new&lt;/span&gt; String(filename.getBytes(&quot;UTF-8&quot;),&quot;iso-8859-1&quot;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;通知浏览器以attachment（下载方式）打开图片&lt;/span&gt;
        headers.setContentDispositionFormData(&quot;attachment&quot;&lt;span&gt;, downloadFielName); 
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;application/octet-stream ： 二进制流数据（最常见的文件下载）。&lt;/span&gt;
&lt;span&gt;        headers.setContentType(MediaType.APPLICATION_OCTET_STREAM);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; ResponseEntity&amp;lt;&lt;span&gt;byte&lt;/span&gt;[]&amp;gt;&lt;span&gt;(FileUtils.readFileToByteArray(file),    
                headers, HttpStatus.CREATED);  
     }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;拦截器&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;拦截器注册与使用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Spring MVC中拦截器需要实现HandlerInterceptor接口, 该接口包含三个方法&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;preHandle(req, res, handler)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在处理器方法之前执行, 返回boolean, 若为true, 则紧接着执行处理器方法, 且会将&lt;/p&gt;
&lt;p&gt;afterCompletion()方法放入一个专门的方法栈中等待执行.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;postHandler(req, res, handler, ModelAndView)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在处理器方法之后执行, 处理器方法若未执行, 则该方法不执行.&lt;/p&gt;
&lt;p&gt;该方法可以修改处理器方法返回的结果, 并可以跳转到其他页面.&lt;/p&gt;
&lt;p&gt;afterCompletion(req, res, handler, exception)&lt;/p&gt;
&lt;p&gt;当preHandle返回ture后, 会将该方法放入等待区, 等所有请求响应结束, 执行该方法.&lt;/p&gt;
&lt;p&gt;即中央处理器渲染了响应页面之后执行, 此时对ModelAndView修改也不会影响到页面结果.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1285727/201803/1285727-20180329003905947-1533470515.jpg&quot; alt=&quot;&quot; width=&quot;408&quot; height=&quot;165&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;43&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; OneInterceptor &lt;span&gt;implements&lt;/span&gt;&lt;span&gt; HandlerInterceptor {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt; 
&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;boolean&lt;/span&gt;&lt;span&gt; preHandle(HttpServletRequest request,
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;             HttpServletResponse response, Object handler) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;         System.out.println(&quot;执行OneIntercepor ---- preHandle() ------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;         &lt;span&gt;return&lt;/span&gt; &lt;span&gt;false&lt;/span&gt;&lt;span&gt;;
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; 
&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; postHandle(HttpServletRequest request,
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; &lt;span&gt;            HttpServletResponse response, Object handler,
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;             ModelAndView modelAndView) &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;         System.out.println(&quot;执行OneIntercepor ---- postHandle() ------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt; 
&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; afterCompletion(HttpServletRequest request,
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;            HttpServletResponse response, Object handler, Exception ex)
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt;             &lt;span&gt;throws&lt;/span&gt;&lt;span&gt; Exception {
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;         System.out.println(&quot;执行OneIntercepor ---- afterCompletion() ------&quot;&lt;span&gt;);
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;20&lt;/span&gt; 
&lt;span&gt;21&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;在配置文件中注册&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt;     &lt;span&gt;&amp;lt;!--&lt;/span&gt;&lt;span&gt; 注册拦截器 &lt;/span&gt;&lt;span&gt;--&amp;gt;&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt;     &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mvc:interceptors&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt;         &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mvc:interceptor&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;4&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;mvc:mapping &lt;/span&gt;&lt;span&gt;path&lt;/span&gt;&lt;span&gt;=&quot;/**&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;5&lt;/span&gt;             &lt;span&gt;&amp;lt;&lt;/span&gt;&lt;span&gt;bean &lt;/span&gt;&lt;span&gt;class&lt;/span&gt;&lt;span&gt;=&quot;com.test.interceptors.OneInterceptor&quot;&lt;/span&gt;&lt;span&gt;/&amp;gt;&lt;/span&gt;
&lt;span&gt;6&lt;/span&gt;         &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;mvc:interceptor&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;span&gt;7&lt;/span&gt;     &lt;span&gt;&amp;lt;/&lt;/span&gt;&lt;span&gt;mvc:interceptors&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&amp;lt;mvc:mapping/&amp;gt;用于指定当前拦截器拦截的请求路径, /**表示拦截所有请求.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;多个拦截器&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;当有多个拦截器时, 形成拦截器链, 拦截器链执行顺序与注册顺序一致, 需要注意的是,&lt;/p&gt;
&lt;p&gt;当一个拦截器preHandle()返回false时, 上部的拦截器链将被断开, 后续的处理器以及对于的postHandle()&lt;/p&gt;
&lt;p&gt;都无法执行, 只有已经执行通过的拦截器的afterCompletion()方法会执行.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1285727/201803/1285727-20180329004641364-1020477892.jpg&quot; alt=&quot;&quot; width=&quot;527&quot; height=&quot;351&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实际运用&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;权限校验: 判断当前请求是否登陆, 若未登录或者无权限, 返回对应的界面.&lt;/li&gt;
&lt;li&gt;性能监控: 监控系统指定方法执行的时间, 寻找系统性能调优点.&lt;/li&gt;
&lt;li&gt;日志打印: 记录请求日志, 用于系统监控, 信息统计与分析等等.&lt;/li&gt;
&lt;li&gt;......&lt;/li&gt;
&lt;/ul&gt;
</description>
<pubDate>Wed, 28 Mar 2018 17:05:00 +0000</pubDate>
<dc:creator>大道方圆</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xdecode/p/8667463.html</dc:identifier>
</item>
<item>
<title>麻省理工18年春软件构造课程阅读10“抽象数据类型” - 李秋豪</title>
<link>http://www.cnblogs.com/liqiuhao/p/8667447.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/liqiuhao/p/8667447.html</guid>
<description>&lt;p&gt;&lt;span&gt;&lt;strong&gt;本文内容来自&lt;a href=&quot;http://web.mit.edu/6.031/www/sp18/&quot;&gt;MIT_6.031_sp18: Software Construction&lt;/a&gt;课程的Readings部分，采用&lt;a href=&quot;http://creativecommons.org/licenses/by-sa/4.0/&quot;&gt;CC BY-SA 4.0&lt;/a&gt;协议。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;由于我们学校（哈工大）大二软件构造课程的大部分素材取自此，也是推荐的阅读材料之一，于是打算做一些翻译工作，自己学习的同时也能帮到一些懒得看英文的朋友。另外，该课程的阅读资料中有许多练习题，但是没有标准答案，所给出的“正确答案”均为译者所写，有错误的地方还请指出。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;em&gt;（更新：从第10章开始，只提供正确答案，不再翻译错误答案）&lt;/em&gt;&lt;/span&gt;&lt;/p&gt;

&lt;hr/&gt;
&lt;p&gt;&lt;span&gt;译者：&lt;a href=&quot;http://www.cnblogs.com/liqiuhao/&quot;&gt;李秋豪&lt;/a&gt; &lt;a href=&quot;http://jiangjiawei.pw/blog/&quot;&gt;江家伟&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;审校：&lt;a href=&quot;http://www.cnblogs.com/liqiuhao/&quot;&gt;李秋豪&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;V1.0 Thu Mar 29 00:41:23 CST 2018&lt;/span&gt;&lt;/p&gt;

&lt;h4 id=&quot;本次课程的目标&quot;&gt;&lt;span&gt;本次课程的目标&lt;/span&gt;&lt;/h4&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;理解“抽象数据类型(ADT)”&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;理解“表示独立”&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;在这篇阅读中，我们将会讲解一个重要的概念——抽象数据类型，它会帮助我们将数据结构的使用和数据结构的具体实现分开。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;抽象数据类型解决了一个很危险的问题：使用者可能对类型的内部表示做假设。我们在后面会探讨为什么这种假设是危险的，以及如何避免它。我们也会讨论操作符的分类和如何设计好的抽象数据类型。&lt;/span&gt;&lt;/p&gt;

&lt;h3 id=&quot;java中的访问控制&quot;&gt;&lt;span&gt;Java中的访问控制&lt;/span&gt;&lt;/h3&gt;
&lt;blockquote readability=&quot;0.83333333333333&quot;&gt;
&lt;p&gt;&lt;span&gt;阅读: &lt;a href=&quot;http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html&quot;&gt;&lt;strong&gt;Controlling Access to Members of a Class&lt;/strong&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;阅读小练习&quot;&gt;&lt;span&gt;阅读小练习&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;阅读以下代码并回答问题：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;    &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Wallet {
        &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; amount;

        &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;loanTo&lt;/span&gt;(Wallet that) {
            &lt;span class=&quot;co&quot;&gt;// put all of this wallet's money into that wallet&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;/*A*/&lt;/span&gt;       that.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt; += &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt;;
&lt;span class=&quot;co&quot;&gt;/*B*/&lt;/span&gt;       amount = &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;;
        }

        &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;main&lt;/span&gt;(String[] args) {
&lt;span class=&quot;co&quot;&gt;/*C*/&lt;/span&gt;       Wallet w = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Wallet&lt;/span&gt;();
&lt;span class=&quot;co&quot;&gt;/*D*/&lt;/span&gt;       w.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt; = &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;;
&lt;span class=&quot;co&quot;&gt;/*E*/&lt;/span&gt;       w.&lt;span class=&quot;fu&quot;&gt;loanTo&lt;/span&gt;(w);
        }
    }

    &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Person {
        &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; Wallet w;

        &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;getNetWorth&lt;/span&gt;() {
&lt;span class=&quot;co&quot;&gt;/*F*/&lt;/span&gt;       &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; w.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt;;
        }

        &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;isBroke&lt;/span&gt;() {
&lt;span class=&quot;co&quot;&gt;/*G*/&lt;/span&gt;       &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; Wallet.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt; == &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;;
        }
    }&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1072319/201803/1072319-20180329004642420-924899143.png&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;假设程序在运行 &lt;code&gt;/*A*/&lt;/code&gt; 语句后立即停止，上图列出了此时的内部状态，请问各个数字所标出的方框内应该填上什么？&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1 -&amp;gt; w&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2 -&amp;gt; that&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;3 -&amp;gt; loanTo&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;4 -&amp;gt; 200&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Access control A&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;关于语句 &lt;code&gt;/*A*/&lt;/code&gt;，以下哪一个说法是正确的？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;that.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt; += &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt;;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Access control B&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;关于语句 &lt;code&gt;/*B*/&lt;/code&gt;，以下哪一个说法是正确的？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;amount = &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] 在Java中允许对 &lt;code&gt;amount&lt;/code&gt; 的索引&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Access control C&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;关于语句 &lt;code&gt;/*C*/&lt;/code&gt;，以下哪一个说法是正确的？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;Wallet w = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;Wallet&lt;/span&gt;();&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] 在Java中允许对 &lt;code&gt;Wallet()&lt;/code&gt; 构造函数的调用&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Access control D&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;关于语句 &lt;code&gt;/*D*/&lt;/code&gt;，以下哪一个说法是正确的？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;w.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt; = &lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] 在Java中允许对 &lt;code&gt;w.amount&lt;/code&gt; 的访问&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Access control E&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;关于语句 &lt;code&gt;/*E*/&lt;/code&gt; ，以下哪一个说法是正确的？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;w.&lt;span class=&quot;fu&quot;&gt;loanTo&lt;/span&gt;(w);&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] 在Java中允许对 &lt;code&gt;loanTo()&lt;/code&gt; 的调用&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] 在这句代码执行之后，&lt;code&gt;w&lt;/code&gt;指向的&lt;code&gt;Wallet&lt;/code&gt;对象的金额将会是0&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Access control F&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;关于语句 &lt;code&gt;/*F*/&lt;/code&gt;，以下哪一个说法是正确的？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; w.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt;;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul readability=&quot;-0.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;span&gt;[x] 这里关于 &lt;code&gt;w.amount&lt;/code&gt; 的索引不会被允许，因为 &lt;code&gt;amount&lt;/code&gt; 是在另一个类中的私有区域&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span&gt;[x] 这个非法访问会被静态捕捉&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Access control G&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;关于语句 &lt;code&gt;/*G*/&lt;/code&gt;，以下哪一个说法是正确的？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; Wallet.&lt;span class=&quot;fu&quot;&gt;amount&lt;/span&gt; == &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] 这里关于 &lt;code&gt;Wallet.amount&lt;/code&gt; 的索引不会被允许，因为 &lt;code&gt;amount&lt;/code&gt; 是一个私有地址&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] 这里关于 &lt;code&gt;Wallet.amount&lt;/code&gt; 的索引不会被允许，因为 &lt;code&gt;amount&lt;/code&gt; 是一个实例变量&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] 这个非法访问会被静态捕捉&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;什么是抽象&quot;&gt;&lt;span&gt;什么是抽象&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;抽象数据类型是软件工程中一个普遍原则的实例，从它衍生出很多意思相近的名词。这里列出了几个能够表达其中思想的词：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;抽象：&lt;/strong&gt; 忽略底层的细节而在高层思考&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;模块化：&lt;/strong&gt;将系统分为一个模块，每个模块可以单独的进行设计、实现、测试、推倒，并且在剩下的开发中进行复用。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;封装：&lt;/strong&gt;在模块的外部建立起一道“围墙”，使它只对自己内部的行为负责，并且系统别处的bug不会影响到它内部的正确性。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;信息隐藏：&lt;/strong&gt;将模块的实现细节隐藏，使未来更改模块内部时不必改变外部代码。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;功能分离：&lt;/strong&gt;一个模块仅仅负责一个特性/功能，而不是将一个特性运用在很多模块上或一个模块拥有很多特性。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;作为一个软件工程师，你应该知道这些名词，因为你会在以后的工作中经常遇到它们。这些思想的本质目的都是为了实现我们这门课的三个目标：远离bug、易于理解、可改动。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;事实上，我们在之前的课程中已经碰到过这些思想，特别是在设计方法和规格说明的时候：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;抽象：规格说明使得使用者只需要弄懂规格说明并遵守前置条件，而不是让他们去弄懂底层的代码实现&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;模块化：单元测试和规格说明都帮助了将方法模块化&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;封装：方法中的局部变量都是被封装的，因为他们仅仅可以在方法内部使用。与此相对的是全局变量和指向可变对象的别名，它们会对封装带来很大损害。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;信息隐藏：规格说明就是一种信息隐藏，它使得实现者可以自由的更改实现代码。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;功能分离：一个规格说明应该是逻辑明确的，即它不能有很多特性，而应该完成好一个功能。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;从今天的课程开始，我们将跳出对方法的抽象，看看对数据的抽象。但是在我们描述数据抽象时方法也会扮演很重要的角色。&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;用户定义类型&quot;&gt;&lt;span&gt;用户定义类型&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;在早期的编程语言中，用户只能自己定义方法，而所有的类型都是规定好的（例如整型、布尔型、字符串等等）。而现代编程语言允许用户自己定义类型对数据进行抽象，这是软件开发中的一个巨大进步。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;对数据进行抽象的核心思想就是类型是通过其对应的操作来区分的：一个整型就是你能对它进行加法和乘法的东西；一个布尔型就是你能对它进行取反的东西；一个字符串就是你能对它进行链接或者取子字符串的东西，等等。在一定意义上，用户在以前的编程语言上似乎已经能够定义自己的类型了，例如定义一个名叫Date的结构体，里面用int表示天数和年份。但是真正使得抽象类型变得新颖不同的是对操作的强调：用户不用管这个类型里面的数据是怎么保存表示的，就好像是程序员不用管编译器是怎么存储整数一样。起作用的只是类型对应的操作。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;和很多现代语言一样，在Java中内置类型和用户定义类型之间的关系很模糊。例如在 &lt;code&gt;java.lang&lt;/code&gt;中的类 &lt;code&gt;Integer&lt;/code&gt; 和 &lt;code&gt;Boolean&lt;/code&gt; 就是内置的——Java标准中规定它们必须存在，但是它们的定义又是和用户定义类型的方式一样的。另外，Java中还保留了原始类型，它们不是类和对象，例如 &lt;code&gt;int&lt;/code&gt; 和 &lt;code&gt;boolean&lt;/code&gt; ，用户无法对它们进行继承。&lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;阅读小练习-1&quot;&gt;&lt;span&gt;阅读小练习&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Abstract Data Types&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;思考抽象数据类型 &lt;code&gt;Bool&lt;/code&gt;，它有如下操作：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;true&lt;/strong&gt; : Bool&lt;br/&gt;&lt;strong&gt;false&lt;/strong&gt; : Bool&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;and&lt;/strong&gt; : Bool × Bool → Bool&lt;br/&gt;&lt;strong&gt;or&lt;/strong&gt; : Bool × Bool → Bool&lt;br/&gt;&lt;strong&gt;not&lt;/strong&gt; : Bool → Bool&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;头两个操作构建了这个类型对应的两个值，后三个操作对应逻辑操作 和、或、取非。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;以下哪些选项可以是 &lt;code&gt;Bool&lt;/code&gt; 具体的实现方法（并且满足上面的操作符）？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] 一个比特位，1代表true，0代表false&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] 一个&lt;code&gt;int&lt;/code&gt;值，5代表true，8代表false&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] 一个对&lt;code&gt;String&lt;/code&gt;对象的索引，&lt;code&gt;&quot;false&quot;&lt;/code&gt;代表true， &lt;code&gt;&quot;true&quot;&lt;/code&gt; 代表false&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] 一个&lt;code&gt;int&lt;/code&gt;值，大于1的质数代表true，其余的代表false&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;类型和操作的分类&quot;&gt;&lt;span&gt;类型和操作的分类&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;对于类型，不管是内置的还是用户定义的，都可以被分为&lt;strong&gt;可改变&lt;/strong&gt; 和 &lt;strong&gt;不可变&lt;/strong&gt;两种。其中可改变类型的对象能够被改变：它们提供了改变对象内容的操作，这样的操作执行后可以改变其他对该对象操作的返回值。所以 &lt;code&gt;Date&lt;/code&gt; 就是可改变的，因为你可以通过调用&lt;code&gt;setMonth&lt;/code&gt;操作改变 &lt;code&gt;getMonth&lt;/code&gt; 操作的返回值。但 &lt;code&gt;String&lt;/code&gt; 就是不可改变的，因为它的操作符都是创建一个新的 &lt;code&gt;String&lt;/code&gt; 对象而不是改变现有的这个。有时候一个类型会提供两种形式，一种是可改变的一种是不可改变的。例如 &lt;code&gt;StringBuilder&lt;/code&gt;就是一种可改变的字符串类型。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;而抽象类型的操作符大致分类：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;创建者creator：&lt;/strong&gt;创建一个该类型的新对象。一个创建者可能会接受一个对象作为参数，但是这个对象的类型不能是它创建对象对应的类型。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;生产者producer：&lt;/strong&gt;通过接受同类型的对象创建新的对象。例如， &lt;code&gt;String&lt;/code&gt;类里面的 &lt;code&gt;concat&lt;/code&gt; 方法就是一个生产者，它接受两个字符串然后据此产生一个新的字符串。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;观察者observer：&lt;/strong&gt;接受一个同类型的对象然后返回一个不同类型的对象/值。例如&lt;code&gt;List&lt;/code&gt;的 &lt;code&gt;size&lt;/code&gt; 方法，它返回一个 &lt;code&gt;int&lt;/code&gt;。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;改造者mutator：&lt;/strong&gt;改变对象的内容，例如 &lt;code&gt;List&lt;/code&gt;的 &lt;code&gt;add&lt;/code&gt; 方法，它会在列表中添加一个元素。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;我们可以将这种区别用映射来表示：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;creator : t* → T&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;producer : T+, t* → T&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;observer : T+, t* → t&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;mutator : T+, t* → void | t | T&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;其中T代表抽象类型本身；t代表其他的类型；&lt;code&gt;+&lt;/code&gt;代表这个参数可能出现一次或多次；&lt;code&gt;*&lt;/code&gt;代表这个参数可能出现零次或多次。例如， &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#concat-java.lang.String-&quot;&gt;&lt;code&gt;String.concat()&lt;/code&gt;&lt;/a&gt; 这个接受两个参数的生产者：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;concat : String × String → String&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;有些观察者不会接受其他类型的参数，例如：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;而有些则会接受很多参数：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#regionMatches-boolean-int-java.lang.String-int-int-&quot;&gt;regionMatches&lt;/a&gt; : String × boolean × int × String × int × int → boolean&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;构造者通常都是用构造函数实现的，例如 &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList--&quot;&gt;&lt;code&gt;new ArrayList()&lt;/code&gt;&lt;/a&gt; ，但是有的构造体是静态方法（类方法），例如 &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/util/Arrays.html#asList-T...-&quot;&gt;&lt;code&gt;Arrays.asList()&lt;/code&gt;&lt;/a&gt;和 &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#valueOf-boolean-&quot;&gt;&lt;code&gt;String.valueOf&lt;/code&gt;&lt;/a&gt; ，这样的静态方法也称为&lt;strong&gt;工厂方法。&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;改造者通常没有返回值（&lt;code&gt;void&lt;/code&gt;）。一个没有返回值的方法&lt;strong&gt;一定有副作用&lt;/strong&gt; ，因为不然这个方法就没有任何意义了。但是不是所有的改造者都没有返回值。例如&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/util/Set.html#add-E-&quot;&gt;&lt;code&gt;Set.add()&lt;/code&gt;&lt;/a&gt; 会返回一个布尔值用来提示这个集合是否被改变了。在Java图形库接口中，&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/awt/Container.html#add-java.awt.Component-&quot;&gt;&lt;code&gt;Component.add()&lt;/code&gt;&lt;/a&gt; 会将它自己这个对象返回，因此&lt;code&gt;add()&lt;/code&gt;可以被&lt;a href=&quot;http://en.wikipedia.org/wiki/Method_chaining&quot;&gt;连续链式调用&lt;/a&gt;。&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;抽象数据类型的例子&quot;&gt;&lt;span&gt;抽象数据类型的例子&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;int&lt;/strong&gt; 是Java中的原始整数类型，它是不可变类型，没有改造者。&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;creators: 字面量 &lt;code&gt;0&lt;/code&gt;, &lt;code&gt;1&lt;/code&gt;, &lt;code&gt;2&lt;/code&gt;, …&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;producers: 算术符 &lt;code&gt;+&lt;/code&gt;, &lt;code&gt;-&lt;/code&gt;, &lt;code&gt;*&lt;/code&gt;, &lt;code&gt;/&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;observers: 比较符号 &lt;code&gt;==&lt;/code&gt;, &lt;code&gt;!=&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;mutators: 无&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;List&lt;/strong&gt; 是Java中的列表类型，它是可更改类型。另外，&lt;code&gt;List&lt;/code&gt;也是一个接口，所以对于它的实现可以有很多类，例如 &lt;code&gt;ArrayList&lt;/code&gt; 和 &lt;code&gt;LinkedList&lt;/code&gt;.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;String&lt;/strong&gt; 是Java中的字符串类型，它是不可变类型。&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;creators: &lt;code&gt;String&lt;/code&gt; 构造函数, &lt;code&gt;valueOf&lt;/code&gt; 静态方法（工厂方法）&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;producers: &lt;code&gt;concat&lt;/code&gt;, &lt;code&gt;substring&lt;/code&gt;, &lt;code&gt;toUpperCase&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;observers: &lt;code&gt;length&lt;/code&gt;, &lt;code&gt;charAt&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;mutators: 无&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;这个分类告诉了我们一些有用的术语，但它不是完美的。例如对于复杂的数据类型，有些操作可能既是生产者也是改造者。&lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;阅读小练习-2&quot;&gt;&lt;span&gt;阅读小练习&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Operations&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;下面都是我们从Java库中选取的几个抽象数据类型的操作，试着通过阅读文档将这些操作分类。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;提示：注意类型本身是不是参数或者返回值，同时记住实例方法（没有&lt;code&gt;static&lt;/code&gt;关键词的）有一个隐式的参数。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#valueOf-java.lang.String-&quot;&gt;&lt;code&gt;Integer.valueOf()&lt;/code&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;creator&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html#mod-java.math.BigInteger-&quot;&gt;&lt;code&gt;BigInteger.mod()&lt;/code&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;producer&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/util/List.html#addAll-java.util.Collection-&quot;&gt;&lt;code&gt;List.addAll()&lt;/code&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;mutator&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#toUpperCase--&quot;&gt;&lt;code&gt;String.toUpperCase()&lt;/code&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;producer&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/util/Set.html#contains-java.lang.Object-&quot;&gt;&lt;code&gt;Set.contains()&lt;/code&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;observer&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#keySet--&quot;&gt;&lt;code&gt;Map.keySet()&lt;/code&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;observer&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#readLine--&quot;&gt;&lt;code&gt;BufferedReader.readLine()&lt;/code&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;mutator&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;抽象类型是通过它的操作定义的&quot;&gt;&lt;span&gt;抽象类型是通过它的操作定义的&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;这一节的重要思想就是&lt;strong&gt;抽象类型是通过它的操作定义的.&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;对于类型T来说，它的操作集合和规格说明完全定义和构造了它的特性。例如，当我们谈到&lt;code&gt;List&lt;/code&gt;类型时，我们并没有特指一个数组或者链接链表，而是一系列模糊的值——哪些对象可以是&lt;code&gt;List&lt;/code&gt;类型——满足该类型的规格说明和操作规定，例如 &lt;code&gt;get()&lt;/code&gt;, &lt;code&gt;size()&lt;/code&gt;, 等等。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1072319/201803/1072319-20180329004704410-603452053.png&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;上一段说到的“模糊的值”是指我们不能去检查数据具体是在类型中怎么存储的，而是要通过特定的操作去处理。例如上图中画出的，通过规格说明这道“防火墙”，我们将类型中具体的实现和这些实现共享的私有数据封装起来，而用户只能看到和使用接口上的操作。&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;设计抽象类型&quot;&gt;&lt;span&gt;设计抽象类型&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;设计一个抽象类型包括选择合适的操作以及它们对应的行为，这里列出了几个重要的规则。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;设计&lt;strong&gt;少量，简单，可以组合实现强大功能&lt;/strong&gt;的操作而非设计很多复杂的操作。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;每个操作都应该有一个被明确定义的目的，并且应该设计为对不同的数据结构有&lt;strong&gt;一致的&lt;/strong&gt;行为，而不是针对某些特殊情况。例如，或许我们不应该为&lt;code&gt;List&lt;/code&gt;类型添加一个&lt;code&gt;sum&lt;/code&gt;操作。因为这虽然可能对想要操作一个整数列表的用户有帮助，但是如果用户想要操作一个字符串列表呢？或者一个嵌套的列表? 所有这些特殊情况都将会使得&lt;code&gt;sum&lt;/code&gt;成为一个难以理解和使用的操作。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;操作集合应该&lt;strong&gt;充分地&lt;/strong&gt;考虑到用户的需求，也就是说，用户可以用这个操作集合做他们可能想做的计算。一个较好测试方法是检查抽象类型的每个属性是否都能被操作集提取出来。例如，如果没有&lt;code&gt;get&lt;/code&gt;操作，我们就不能提取列表中的元素。抽象类型的基本信息的提取也不应该特别困难。例如，&lt;code&gt;size&lt;/code&gt;方法对于&lt;code&gt;List&lt;/code&gt;并不是必须的，因为我们可以用&lt;code&gt;get&lt;/code&gt;增序遍历整个列表，直到&lt;code&gt;get&lt;/code&gt;执行失败，但是这既不高效，也不方便。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;抽象类型可以是通用的：例如，列表、集合，或者图。或者它可以是适用于特定领域的：一个街道的地图，一个员工数据库，一个电话簿等等。但是&lt;strong&gt;一个抽象类型不能兼有上述二者的特性&lt;/strong&gt;。被设计用来代表一个纸牌序列的&lt;code&gt;Deck&lt;/code&gt;类型不应该有一个通用的&lt;code&gt;add&lt;/code&gt;方法来向类型实例中添加任意对象，比如整型和字符串类型。反过来说，对于像&lt;code&gt;dealCards&lt;/code&gt;这样的只对特定领域(译者注：纸牌游戏)有效的方法，把它加入&lt;code&gt;List&lt;/code&gt;这样的通用类型中也是没有意义的。&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;表示独立&quot;&gt;&lt;span&gt;表示独立&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;特别地，一个好的抽象数据类型应该是&lt;strong&gt;表示独立&lt;/strong&gt;的。这意味着它的使用和它的内部表示（实际的数据结构和实现）无关，所以内部表示的改变将对外部的代码没有影响。例如，&lt;code&gt;List&lt;/code&gt;就是表示独立的——它的使用与它是用数组还是连接链表实现无关。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;如果一个操作完全在规格说明中定义了前置条件和后置条件，使用者就知道他应该依赖什么，而你也可以安全的对内部实现进行更改（遵循规格说明）。&lt;/span&gt;&lt;/p&gt;
&lt;h3 id=&quot;例子-字符串的不同表示&quot;&gt;&lt;span&gt;例子: 字符串的不同表示&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;让我们先来看看一个表示独立的例子，然后想想它为什么很有用。下面的 &lt;code&gt;MyString&lt;/code&gt;抽象类型是我们举出的例子，虽然它远远没有Java中的&lt;code&gt;String&lt;/code&gt;操作多，规格说明也有些不同，但是还是有解释力的。下面是规格说明：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;12&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/** MyString represents an immutable sequence of characters. */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; MyString { 

    &lt;span class=&quot;co&quot;&gt;//////////////////// Example of a creator operation ///////////////&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;/** @param b a boolean value&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;string representation of b, either &quot;true&quot; or &quot;false&quot; */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; MyString &lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; b) { &lt;span class=&quot;kw&quot;&gt;... &lt;/span&gt;}

    &lt;span class=&quot;co&quot;&gt;//////////////////// Examples of observer operations ///////////////&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;/** @return number of characters in this string */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;() { &lt;span class=&quot;kw&quot;&gt;... &lt;/span&gt;}

    &lt;span class=&quot;co&quot;&gt;/** @param i character position (requires 0 &amp;lt;= i &amp;lt; string length)&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;character at position i */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i) { &lt;span class=&quot;kw&quot;&gt;... &lt;/span&gt;}

    &lt;span class=&quot;co&quot;&gt;//////////////////// Example of a producer operation ///////////////    &lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;/** Get the substring between start (inclusive) and end (exclusive).&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@param start &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;starting index&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@param end &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;ending index.  Requires 0 &amp;lt;= start &amp;lt;= end &amp;lt;= string length.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;string consisting of charAt(start)...charAt(end-1) */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; MyString &lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; start, &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; end) { &lt;span class=&quot;kw&quot;&gt;... &lt;/span&gt;}
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;使用者只需要/只能知道这个类型的公共方法和规格说明。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;现在让我们看一个&lt;code&gt;MyString&lt;/code&gt;简单的表示方法，仅仅使用一个字符数组，而且它的大小刚好是字符串的长度，没有多余的空间：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;[] a;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;如果使用这种表示方法，我们对操作的实现可能就是这样的：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;22&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; MyString &lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; b) {
    MyString s = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;MyString&lt;/span&gt;();
    s.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt; = b ? &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;[] { 't', 'r', 'u', 'e' } 
            : &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;[] { 'f', 'a', 'l', 's', 'e' };
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; s;
}

&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;() {
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; a.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;;
}

&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i) {
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; a[i];
}

&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; MyString &lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; start, &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; end) {
    MyString that = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;MyString&lt;/span&gt;();
    that.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;[end - start];
    System.&lt;span class=&quot;fu&quot;&gt;arraycopy&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt;, start, that.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, end - start);
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; that;
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;这里想一个问题：为什么 &lt;code&gt;charAt&lt;/code&gt; 和 &lt;code&gt;substring&lt;/code&gt; 不去检查参量在合法的范围内？你认为这种类型的对象对于非法的输入会有什么反应？&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;下面的快照图展示了在使用者进行&lt;code&gt;substring&lt;/code&gt;操作后的数据状态：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1072319/201803/1072319-20180329004721316-1288959237.png&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;);
MyString t = s.&lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;);&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;这种实现有一个性能上的问题，因为这个数据类型是不可变的，那么 &lt;code&gt;substring&lt;/code&gt; 实际上没有必要真正去复制子字符串到一个新的数组中。它可以仅仅指向原来的 &lt;code&gt;MyString&lt;/code&gt; 字符数组，并且记录当前的起始位置和终止位置。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;为了实现这种优化，我们可以将内部表示改为：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;[] a;
&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; start;
&lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; end;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;通过这种新的表示方法，我们可以这样实现操作：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;18&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; MyString &lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;boolean&lt;/span&gt; b) {
    MyString s = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;MyString&lt;/span&gt;();
    s.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt; = b ? &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;[] { 't', 'r', 'u', 'e' } 
            : &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt;[] { 'f', 'a', 'l', 's', 'e' };
    s.&lt;span class=&quot;fu&quot;&gt;start&lt;/span&gt; = &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;;
    s.&lt;span class=&quot;fu&quot;&gt;end&lt;/span&gt; = s.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;;
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; s;
}

&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;() {
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; end - start;
}

&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i) {
  &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; a[start + i];
}

&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; MyString &lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; start, &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; end) {
    MyString that = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;MyString&lt;/span&gt;();
    that.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt; = &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;a&lt;/span&gt;;
    that.&lt;span class=&quot;fu&quot;&gt;start&lt;/span&gt; = &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;start&lt;/span&gt; + start;
    that.&lt;span class=&quot;fu&quot;&gt;end&lt;/span&gt; = &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;start&lt;/span&gt; + end;
    &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; that;
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;现在进行&lt;code&gt;substring&lt;/code&gt;操作后的数据状态：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1072319/201803/1072319-20180329004729783-1509654914.png&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;);
MyString t = s.&lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;);&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;因为 &lt;code&gt;MyString&lt;/code&gt;的使用者只使用到了它的公共方法和规格说明（没有使用私有的存储表示），我们可以“私底下”完成这种优化而不用担心影响使用者的代码。这就是表示独立的力量。&lt;/span&gt;&lt;/p&gt;
&lt;h4 id=&quot;阅读小练习-3&quot;&gt;&lt;span&gt;阅读小练习&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Representation 1&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;思考下面这个抽象类型：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Represents a family that lives in a household together.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * A family always has at least one person in it.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Families are mutable.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Family {
    &lt;span class=&quot;co&quot;&gt;// the people in the family, sorted from oldest to youngest, with no duplicates.&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; people;

    &lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;a list containing all the members of the family, with no duplicates.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; people;
    }
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;下面是一个使用者的代码：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;client1&lt;/span&gt;(Family f) {
    &lt;span class=&quot;co&quot;&gt;// get youngest person in the family&lt;/span&gt;
    Person baby = f.&lt;span class=&quot;fu&quot;&gt;people&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;get&lt;/span&gt;(f.&lt;span class=&quot;fu&quot;&gt;people&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;size&lt;/span&gt;()-&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;);
    ...
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;假设所有的代码都能顺利运行（ &lt;code&gt;Family&lt;/code&gt; 和 &lt;code&gt;client1&lt;/code&gt;）并通过测试。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;现在 &lt;code&gt;Family&lt;/code&gt;的数据表示从 &lt;code&gt;List&lt;/code&gt; 变为了 &lt;code&gt;Set&lt;/code&gt; ：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Represents a family that lives in a household together.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * A family always has at least one person in it.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Families are mutable.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Family {
    &lt;span class=&quot;co&quot;&gt;// the people in the family&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Set&amp;lt;Person&amp;gt; people;

    &lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;a list containing all the members of the family, with no duplicates.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(people);
    }
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;以下哪一个选项是在 &lt;code&gt;Family&lt;/code&gt; 更改后对 &lt;code&gt;client1&lt;/code&gt; 的影响？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;client1&lt;/code&gt; 依赖于 &lt;code&gt;Family&lt;/code&gt;的数据表示, 并且这种依赖会导致静态错误。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Representation 2&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;原始版本:&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Represents a family that lives in a&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * household together. A family always&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * has at least one person in it.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Families are mutable. */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Family {
    &lt;span class=&quot;co&quot;&gt;// the people in the family,&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;// sorted from oldest to youngest,&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;// with no duplicates.&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; people;

    &lt;span class=&quot;co&quot;&gt;/** @return a list containing all&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  the members of the family,&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  with no duplicates. */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; people;
    }
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;新版本：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Represents a family that lives in a&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * household together. A family always&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * has at least one person in it.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Families are mutable. */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Family {
    &lt;span class=&quot;co&quot;&gt;// the people in the family&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Set&amp;lt;Person&amp;gt; people;


    &lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;a list containing all&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * the members of the family,&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * with no duplicates. */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(people);
    }
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;使用者 &lt;code&gt;client2&lt;/code&gt;的代码：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;client2&lt;/span&gt;(Family f) {
    &lt;span class=&quot;co&quot;&gt;// get size of the family&lt;/span&gt;
    &lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; familySize = f.&lt;span class=&quot;fu&quot;&gt;people&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;size&lt;/span&gt;();
    ...
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;以下哪一个选项是新版本对 &lt;code&gt;client2&lt;/code&gt; 的影响？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;client2&lt;/code&gt; 依赖于 &lt;code&gt;Family&lt;/code&gt;的表示，这种依赖不会被捕捉错误但是会（幸运地）得到正确答案。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Representation 3&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;原始版本：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Represents a family that lives in a&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * household together. A family always&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * has at least one person in it.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Families are mutable. */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Family {
    &lt;span class=&quot;co&quot;&gt;// the people in the family,&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;// sorted from oldest to youngest,&lt;/span&gt;
    &lt;span class=&quot;co&quot;&gt;// with no duplicates.&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; people;

    &lt;span class=&quot;co&quot;&gt;/** @return a list containing all&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  the members of the family,&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     *  with no duplicates. */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; people;
    }
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;新版本：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Represents a family that lives in a&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * household together. A family always&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * has at least one person in it.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Families are mutable. */&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Family {
    &lt;span class=&quot;co&quot;&gt;// the people in the family&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Set&amp;lt;Person&amp;gt; people;


    &lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;a list containing all&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * the members of the family,&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * with no duplicates. */&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;(people);
    }
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;使用者 &lt;code&gt;client3&lt;/code&gt;的代码：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;client3&lt;/span&gt;(Family f) {
    &lt;span class=&quot;co&quot;&gt;// get any person in the family&lt;/span&gt;
    Person anybody = f.&lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;().&lt;span class=&quot;fu&quot;&gt;get&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;);
    ...
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;以下哪一个选项是新版本对 &lt;code&gt;client3&lt;/code&gt; 的影响？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;client3&lt;/code&gt; 独立于 &lt;code&gt;Family&lt;/code&gt;的数据表示, 所以它依然能正确的工作&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Representation 4&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;对于上面的&lt;code&gt;Family&lt;/code&gt;数据类型，对每行/段判断他是规格说明（specification）还是数据表示（representation）还是具体实现（implementation）？&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Represents a family that lives in a household together.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * A family always has at least one person in it.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; * Families are mutable.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt; */&lt;/span&gt;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;--&amp;gt; 规格说明&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Family {&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;--&amp;gt; 规格说明&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;    &lt;span class=&quot;co&quot;&gt;// the people in the family, sorted from oldest to youngest, with no duplicates.&lt;/span&gt;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;--&amp;gt; 数据表示&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; List&amp;lt;Person&amp;gt; people;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;--&amp;gt; 数据表示&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;  &lt;span class=&quot;co&quot;&gt;/**&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     * &lt;/span&gt;&lt;span class=&quot;kw&quot;&gt;@return &lt;/span&gt;&lt;span class=&quot;co&quot;&gt;a list containing all the members of the family, with no duplicates.&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;     */&lt;/span&gt;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;--&amp;gt; 规格说明&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;7&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; List&amp;lt;Person&amp;gt; &lt;span class=&quot;fu&quot;&gt;getMembers&lt;/span&gt;() {&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;--&amp;gt; 规格说明&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; people;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;--&amp;gt; 具体实现&lt;/span&gt;&lt;/p&gt;

&lt;h2 id=&quot;抽象数据类型在java中的实现&quot;&gt;&lt;span&gt;抽象数据类型在Java中的实现&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;让我们总结一下我们在这篇文章中讨论过的主要思想以及使用JAVA语言特性实现它们的具体方法，这些思想对于使用任何语言编程一般都是适用的。重点在于有很多种方式来实现，很重要的一点是：既要对大概念（比如构造操作：creator operation）有较好的理解，也要理解它们不同的实现方式。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;这个表中有三项我们还没有在之前的阅读中讲过：&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;span&gt;使用接口来定义一个抽象数据类型。我们已经看到 &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/?java/util/List.html&quot;&gt;&lt;code&gt;List&lt;/code&gt;&lt;/a&gt; 和 &lt;a href=&quot;http://docs.oracle.com/javase/8/docs/api/?java/util/ArrayList.html&quot;&gt;&lt;code&gt;ArrayList&lt;/code&gt;&lt;/a&gt; 这些例子，并且我们将会在以后的阅读中讨论接口。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;使用枚举类型(&lt;code&gt;enum&lt;/code&gt;)定义一个抽象数据类型。枚举对于有固定取值集合的ADTs(例如一周中有周一、周二等等)来说,是很理想的类型。我们将会在以后的阅读中讨论枚举。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;用不变的对象作为构造者操作。这种模式在不可变类型中很常见，在不可变类型中，最简单或者空（emptiest译者：喵喵喵？）的值仅仅是一个属性为public的不变量，基于这个不变量，生产者被用来从中构造更复杂的值。&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;测试抽象数据类型&quot;&gt;&lt;span&gt;测试抽象数据类型&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;当我们测试一个抽象数据类型的时候，我们分别测试它的各个操作。而这些测试不可避免的要互相交互：我们只能通过观察者来判断其他的操作的测试是否成功，而测试观察者的唯一方法是创建对象然后使用观察者。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;下面是我们测试 &lt;code&gt;MyString&lt;/code&gt; 类型时对输入空间的一种可能划分方案：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;26&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;co&quot;&gt;// testing strategy for each operation of MyString:&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;// valueOf():&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    true, false&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;// length(): &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    string len = 0, 1, n&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    string = produced by valueOf(), produced by substring()&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;// charAt(): &lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    string len = 1, n&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    i = 0, middle, len-1&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    string = produced by valueOf(), produced by substring()&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;// substring():&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    string len = 0, 1, n&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    start = 0, middle, len&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    end = 0, middle, len&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    end-start = 0, n&lt;/span&gt;
&lt;span class=&quot;co&quot;&gt;//    string = produced by valueOf(), produced by substring()&lt;/span&gt;&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;span&gt;现在我们试着用测试用例覆盖每一个分区。注意到 &lt;code&gt;assertEquals&lt;/code&gt; 并不能直接应用于 &lt;code&gt;MyString&lt;/code&gt;对象，因为我们没有在 &lt;code&gt;MyString&lt;/code&gt;上定义判断相等的操作，所以我们只能使用之前定义的 &lt;code&gt;valueOf&lt;/code&gt;, &lt;code&gt;length&lt;/code&gt;, &lt;code&gt;charAt&lt;/code&gt;, 以及 &lt;code&gt;substring&lt;/code&gt;，例如：&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;38&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;span&gt;&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testValueOfTrue&lt;/span&gt;() {
    MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;);
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;, s.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;());
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('t', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('r', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('u', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('e', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;));
}

&lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testValueOfFalse&lt;/span&gt;() {
    MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;);
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, s.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;());
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('f', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('a', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('l', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('s', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('e', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;));
}

&lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testEndSubstring&lt;/span&gt;() {
    MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;true&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;);
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;, s.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;());
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('u', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('e', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;));
}

&lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testMiddleSubstring&lt;/span&gt;() {
    MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;);
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, s.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;());
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('a', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;));
}

&lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testSubstringIsWholeString&lt;/span&gt;() {
    MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;);
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;5&lt;/span&gt;, s.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;());
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('f', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('a', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('l', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;2&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('s', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;));
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;('e', s.&lt;span class=&quot;fu&quot;&gt;charAt&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;4&lt;/span&gt;));
}

&lt;span class=&quot;fu&quot;&gt;@Test&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;testSubstringOfEmptySubstring&lt;/span&gt;() {
    MyString s = MyString.&lt;span class=&quot;fu&quot;&gt;valueOf&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;false&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;).&lt;span class=&quot;fu&quot;&gt;substring&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;);
    &lt;span class=&quot;fu&quot;&gt;assertEquals&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;, s.&lt;span class=&quot;fu&quot;&gt;length&lt;/span&gt;());
}&lt;/code&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h4 id=&quot;阅读小练习-4&quot;&gt;&lt;span&gt;阅读小练习&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;Partition covering&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;哪一个测试覆盖了分区“&lt;code&gt;charAt()&lt;/code&gt; 以及字符串长度=1”？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;testMiddleSubstring&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;哪一个测试覆盖了分区“子字符串的子字符串”？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;testSubstringOfEmptySubstring&lt;/code&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;哪一个测试覆盖了分区“&lt;code&gt;valueOf(true)&lt;/code&gt;”？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;&lt;span&gt;[x] &lt;code&gt;testValueOfTrue&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;span&gt;[x] &lt;code&gt;testEndSubstring&lt;/code&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;&lt;strong&gt;Unit testing an ADT&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;code&gt;testValueOfTrue&lt;/code&gt;测试的是哪一个“单元”？&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;valueOf&lt;/code&gt; 操作&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;length&lt;/code&gt; 操作&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;[x] &lt;code&gt;charAt&lt;/code&gt; 操作&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;总结&quot;&gt;&lt;span&gt;总结&lt;/span&gt;&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;抽象数据类型(ADT)是通过它们对应的操作区分的。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;操作可以分类为创建者、生产者、观察者、改造者。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;ADT的标识由它的操作集合和规格说明组成。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;一个好的ADT应该是简单，逻辑明确并且表示独立的。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;对于ADT的测试应该对每一个操作进行测试，并同时利用到创建者、生产者、观察者、改造者。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;T将本次阅读的内容和我们的三个目标联系起来：&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;&lt;strong&gt;远离bug.&lt;/strong&gt; 一个好的ADT会在使用者和实现者之间建立“契约”，使用者知道应该如何使用，而实现者有足够的自由决定具体实现。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;易于理解.&lt;/strong&gt; 一个好的ADT会将其内部的代码和信息隐藏起来，而使用者只需要理解它的规格说明和操作即可。&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;&lt;strong&gt;可改动.&lt;/strong&gt; 表示独立使得实现者可以在不通知使用者的情况下对ADT内部进行改动。&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Wed, 28 Mar 2018 16:48:00 +0000</pubDate>
<dc:creator>李秋豪</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/liqiuhao/p/8667447.html</dc:identifier>
</item>
<item>
<title>2018初面试总结 - AmorR</title>
<link>http://www.cnblogs.com/AmorR/p/8661296.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/AmorR/p/8661296.html</guid>
<description>&lt;h2 class=&quot;md-end-block md-heading&quot;&gt;&lt;span&gt;前言&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;　　最近参加了一场面试，对此，做了一下小总结&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h2 class=&quot;md-end-block md-heading&quot;&gt;&lt;span&gt;笔试&lt;/span&gt;&lt;/h2&gt;
&lt;ol class=&quot;ol-list&quot; start=&quot;&quot; readability=&quot;1&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;XHTML和HTML的具体区别是什么？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;前端页面有哪三层构成，分别是什么？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;H5为什么要写！DOCTYPE HTML？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;DOCTYPE的作用是什么？严格模式和兼容模式有什么区别？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;上面4个问题是具有逻辑性的，循序渐进，&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;h4 class=&quot;md-end-block md-heading&quot;&gt;&lt;span&gt;在面试的时候面试官有问对于面试题目有什么看法？&lt;/span&gt;&lt;/h4&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;2应该在4后面，DOCTYPE决定了三体&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol class=&quot;ol-list&quot; start=&quot;&quot; readability=&quot;2&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;请描述一下cookie 和 sessionStroneg 和 lacalStrage的区别？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;如何实现浏览器老多个标签页之间的通信？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;什么是跨域？跨域请求职员的方法有哪些？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;请写出几种IE6 bug 的解决方法？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;页面导入样式时，使用link 和@import有什么区别？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;4题，因为自己之前做项目只是兼容到IE9，所以这个没有完整的回答&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol class=&quot;ol-list&quot; start=&quot;&quot; readability=&quot;1&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;ajax请求的时候get和post方式的区别？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;ajax请求是，如何解析json数据？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;ajax技术体系的组成部分有哪些？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;ajax都有哪些优缺点？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;3题&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;XMLHttpRequest =&amp;gt;一个用于在后台与服务器交换对象&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;JS-=&amp;gt;向服务器发送请求，更新页面&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;CSS=&amp;gt;封装数据&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol class=&quot;ol-list&quot; start=&quot;&quot; readability=&quot;-2&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;请写出身份证号码的正则表达式？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;没有写答案。 我自己对火星文真的不熟悉，一般都是工具生成，只是会在代码中简单的应用一下&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol class=&quot;ol-list&quot; start=&quot;&quot; readability=&quot;3&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;Vue中active-class是哪个组件的属性？嵌套如有是怎么定义的？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;Vue中v-model是什么？怎么使用？vue中标签怎么绑定？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;MVVM框架是什么？他和其他框架（juery）的区别是什么？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;请详细说下vue生命周期？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;具体使用vue的理解？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;vue组件是怎么定义的？父组件怎么给子组件传值？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;都是vue最基础的知识和一些小细节&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 class=&quot;md-end-block md-heading&quot;&gt;&lt;span&gt;面试&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;一般第一个问题都会让自我介绍一下&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;我一般都是简单的介绍一下自己，和应聘的岗位，为什么学习前端，和大概的工作经历&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;JS的数据类型是什么？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;8&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;我觉得这个问题的考察点是在于对ES6有没有了解。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;undefined，Null，Number，String，Boolean，引用类型Object，ES6新增Symbol，表示独一无二的。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;数组怎么进行去重？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;5&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;用ES6 新语法Set ， 转换为对象，再用Array.from转换为数组&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;移动端的触摸事件有了解不？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;21&quot;&gt;
&lt;ul class=&quot;ul-list&quot; data-mark=&quot;-&quot; readability=&quot;1.5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;touchstart: 当手指触摸屏幕时候触发；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;touchmove: 当手指在屏幕上滑动的时候连续触发；可以调用阻止默认事件preventDefault()阻止屏幕滚动；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;touchend: 手指离开屏幕时触发；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;touchcancel: 系统停止跟踪触摸时触发；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;以上的这些时间都会冒泡，而且都可以取消冒泡，而且，对于以上事件也提供了和鼠标事件中常用的属性：bubble,cancelable,view,clientX,clientY,screenX,screenY,detail,altKey,shiftKey,ctrKey和metaKey。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;除了上面这些属性外，触摸事件还提供了下面这些属性：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;ul-list&quot; data-mark=&quot;-&quot; readability=&quot;0&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;touches: 跟踪返回Touch对象的数组；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;targetTouchs: 特定事件目标的Touch对象的数组；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;changeTouchs: 上次触摸以来改变了的Touch对象的数组；&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;每个Touch对象包含一下的属性：&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ul class=&quot;ul-list&quot; data-mark=&quot;-&quot; readability=&quot;5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;clientX: 触摸目标在浏览器中的x坐标&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;clientY: 触摸目标在浏览器中的y坐标&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;identifier: 标识触摸的唯一ID。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;pageX: 触摸目标在当前DOM中的x坐标&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;pageY: 触摸目标在当前DOM中的y坐标&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;screenX: 触摸目标在屏幕中的x坐标&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;screenY: 触摸目标在屏幕中的y坐标&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;target: 触摸的DOM节点目标。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;做项目中有遇到跨域吗？&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;13&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;跨域就是域名，协议，端口号，有一个不相同&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;解决跨域一般用Jsonp，Cors，反向代理。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;jsonp 核心是动态创建script标签，生成动态src&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;Cors核心是服务器，会自动生成请求头&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;反向代理核心是用代理服务器去接受浏览器的请求，再将请求转发客户端&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span&gt;闭包&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;blockquote readability=&quot;6&quot;&gt;
&lt;p&gt;&lt;span class=&quot;md-line md-end-block&quot;&gt;&lt;span class=&quot;md-expand&quot;&gt;闭包就是有权访问另外一个函数作用域的函数。闭包可以保存私有变量，闭包可以避免全局污染，避免内存泄露。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h6 class=&quot;md-end-block md-heading&quot;&gt;&lt;span&gt;记于2018年3月&lt;/span&gt;&lt;/h6&gt;
&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Wed, 28 Mar 2018 16:26:00 +0000</pubDate>
<dc:creator>AmorR</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/AmorR/p/8661296.html</dc:identifier>
</item>
<item>
<title>Redis持久化 - 武培轩</title>
<link>http://www.cnblogs.com/wupeixuan/p/8667335.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wupeixuan/p/8667335.html</guid>
<description>&lt;p&gt;Redis是内存型数据库，为了使Redis在重启之后仍能保证数据不丢失，需要将数据从内存中同步到硬盘中，这一过程就是持久化。&lt;/p&gt;
&lt;p&gt;Redis支持两种持久化的方式，一种是RDB持久化，另一种是AOF持久化，可以单独使用其中一种或将二者结合使用，或者关闭持久化功能。&lt;/p&gt;

&lt;p&gt;Redis持久化提供了多种方式：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;RDB 持久化可以在指定的时间间隔内生成数据集的时间点快照（point-in-time snapshot）。&lt;/li&gt;
&lt;li&gt;AOF 持久化记录服务器执行的所有写操作命令，并在服务器启动时，通过重新执行这些命令来还原数据集。 AOF 文件中的命令全部以 Redis 协议的格式来保存，将写命令添加到 AOF 文件（Append Only File）的末尾。 Redis 还可以在后台对 AOF 文件进行重写（rewrite），使得 AOF 文件的体积不会超出保存数据集状态所需的实际大小。&lt;/li&gt;
&lt;li&gt;Redis 可以同时使用 AOF 持久化和 RDB 持久化。 在这种情况下， 当 Redis 重启时， 它会优先使用 AOF 文件来还原数据集， 因为 AOF 文件保存的数据集通常比 RDB 文件所保存的数据集更完整。&lt;/li&gt;
&lt;li&gt;关闭持久化功能，让数据只在服务器运行时存在。&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;rdb持久化&quot;&gt;RDB持久化&lt;/h2&gt;
&lt;p&gt;在默认情况下， Redis 将数据库快照保存在名字为 dump.rdb 的二进制文件中。&lt;/p&gt;
&lt;p&gt;可以对 Redis 进行设置， 让它在“ N 秒内数据集至少有 M 个改动”这一条件被满足时， 自动保存一次数据集。&lt;/p&gt;
&lt;p&gt;你也可以通过调用 SAVE 或者 BGSAVE ， 手动让 Redis 进行数据集保存操作。&lt;/p&gt;
&lt;p&gt;比如说， 以下设置会让 Redis 在满足“ 60 秒内有至少有 1000 个键被改动”这一条件时， 自动保存一次数据集：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;save 60 1000&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;这种持久化方式被称为快照（snapshot）。&lt;/p&gt;
&lt;p&gt;Redis.conf配置 ：默认是如下配置&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;save 900 1 
save 300 10
save 60 10000&lt;/code&gt;
&lt;/pre&gt;
&lt;ul&gt;&lt;li&gt;900秒之内，如果超过1个key被修改，则发起快照保存&lt;/li&gt;
&lt;li&gt;300秒内，如果超过10个key被修改，则发起快照保存&lt;/li&gt;
&lt;li&gt;1分钟之内，如果1万个key被修改，则发起快照保存&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;rdb工作机制&quot;&gt;RDB工作机制&lt;/h3&gt;
&lt;p&gt;当 Redis 需要保存 dump.rdb 文件时， 服务器执行以下操作：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;Redis 调用 fork() ，同时拥有父进程和子进程。&lt;/li&gt;
&lt;li&gt;子进程将数据集写入到一个临时 RDB 文件中。&lt;/li&gt;
&lt;li&gt;当子进程完成对新 RDB 文件的写入时，Redis 用新 RDB 文件替换原来的 RDB 文件，并删除旧的 RDB 文件。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;这样的好处就是可以 copy-on-write。&lt;/p&gt;
&lt;h3 id=&quot;rdb的优点&quot;&gt;RDB的优点&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;RDB 是一个非常紧凑（compact）的文件，它保存了 Redis 在某个时间点上的数据集。 这种文件非常适合用于进行备份。&lt;/li&gt;
&lt;li&gt;RDB 非常适用于灾难恢复（disaster recovery）：它只有一个文件，并且内容都非常紧凑，可以（在加密后）将它传送到别的数据中心（存储介质）。&lt;/li&gt;
&lt;li&gt;RDB 可以最大化 Redis 的性能：父进程在保存 RDB 文件时唯一要做的就是 fork 出一个子进程，然后这个子进程就会处理接下来的所有保存工作，父进程无须执行任何磁盘 I/O 操作。&lt;/li&gt;
&lt;li&gt;RDB 在恢复大数据集时的速度比 AOF 的恢复速度要快。&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;rdb的缺点&quot;&gt;RDB的缺点&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;如果你需要尽量避免在服务器故障时丢失数据，那么 RDB 不适合你。 虽然 Redis 允许你设置不同的保存点（save point）来控制保存 RDB 文件的频率， 但是， 因为RDB 文件需要保存整个数据集的状态， 所以它并不是一个轻松的操作。 因此你可能会至少 5 分钟才保存一次 RDB 文件。 在这种情况下， 一旦发生故障停机， 你就可能会丢失好几分钟的数据。&lt;/li&gt;
&lt;li&gt;每次保存 RDB 的时候，Redis 都要 fork() 出一个子进程，并由子进程来进行实际的持久化工作。 在数据集比较庞大时， fork() 可能会非常耗时，造成服务器在某某毫秒内停止处理客户端； 如果数据集非常巨大，并且 CPU 时间非常紧张的话，那么这种停止时间甚至可能会长达整整一秒。 虽然 AOF 重写也需要进行 fork() ，但无论 AOF 重写的执行间隔有多长，数据的耐久性都不会有任何损失。&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;aof持久化&quot;&gt;AOF持久化&lt;/h2&gt;
&lt;p&gt;AOF 持久化，每一个写命令都通过write函数追加到 appendonly.aof 中。&lt;/p&gt;
&lt;p&gt;可以通过修改配置文件来打开 AOF 功能：&lt;br/&gt;&lt;code&gt;appendfsync yes&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;配置完成后，AOF 就可以做到全程持久化，只需要在配置文件中设置appendonly yes（默认为no），开启 AOF 之后，Redis 每执行一个修改数据的命令，都会把它添加到 AOF 文件中，当 Redis 重启时，程序就可以通过重新执行 AOF 文件中的命令来达到重建数据集的目的。&lt;/p&gt;
&lt;p&gt;Redis.conf默认配置&lt;/p&gt;
&lt;pre class=&quot;conf&quot;&gt;
&lt;code&gt;appendfsync no         #让操作系统来决定何时同步
appendfsync always     #每次有数据修改发生时都会写入AOF文件
appendfsync everysec   #每秒钟同步一次，该策略为AOF的缺省策略&lt;/code&gt;
&lt;/pre&gt;
&lt;table&gt;&lt;thead/&gt;&lt;tbody readability=&quot;1&quot;&gt;&lt;tr class=&quot;odd&quot;&gt;&lt;td&gt;always&lt;/td&gt;
&lt;td&gt;每个写命令都同步&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;even&quot;&gt;&lt;td&gt;everysec&lt;/td&gt;
&lt;td&gt;每秒同步一次&lt;/td&gt;
&lt;/tr&gt;&lt;tr class=&quot;odd&quot; readability=&quot;2&quot;&gt;&lt;td&gt;no&lt;/td&gt;
&lt;td&gt;让操作系统来决定何时同步&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;p&gt;always 选项会严重减低服务器的性能；everysec 选项比较合适，可以保证系统奔溃时只会丢失一秒左右的数据，并且 Redis 每秒执行一次同步对服务器性能几乎没有任何影响；no 选项并不能给服务器性能带来多大的提升，而且也会增加系统奔溃时数据丢失的数量。&lt;/p&gt;
&lt;p&gt;随着服务器写请求的增多，AOF 文件会越来越大；Redis 提供了一种将 AOF 重写的特性，能够去除 AOF 文件中的冗余写命令。&lt;/p&gt;
&lt;h3 id=&quot;aof重写&quot;&gt;AOF重写&lt;/h3&gt;
&lt;p&gt;因为 AOF 的运作方式是不断地将命令追加到文件的末尾， 所以随着写入命令的不断增加， AOF 文件的体积也会变得越来越大。&lt;/p&gt;
&lt;p&gt;例如， 如果你对一个计数器调用了 100 次 INCR ， 那么仅仅是为了保存这个计数器的当前值， AOF 文件就需要使用 100 条记录（entry）。&lt;/p&gt;
&lt;p&gt;然而在实际上， 只使用一条 SET 命令已经足以保存计数器的当前值了， 其余 99 条记录实际上都是多余的。&lt;/p&gt;
&lt;p&gt;为了处理这种情况， Redis 支持一种有趣的特性： 可以在不打断服务客户端的情况下， 对 AOF 文件进行重建（rebuild）。&lt;/p&gt;
&lt;p&gt;执行 BGREWRITEAOF 命令， Redis 将生成一个新的 AOF 文件， 这个文件包含重建当前数据集所需的最少命令。&lt;/p&gt;
&lt;p&gt;Redis 2.2 需要自己手动执行 BGREWRITEAOF 命令； Redis 2.4 则可以自动触发 AOF 重写， redis.conf配置文件如下。&lt;/p&gt;
&lt;pre class=&quot;conf&quot;&gt;
&lt;code&gt;# 自动重写AOF文件
#
# 如果AOF日志文件大到指定百分比，Redis能够通过 BGREWRITEAOF 自动重写AOF日志文件。
#
# 工作原理：Redis记住上次重写时AOF日志的大小（或者重启后没有写操作的话，那就直接用此时的AOF文件），
# 基准尺寸和当前尺寸做比较。如果当前尺寸超过指定比例，就会触发重写操作。
#
# 你还需要指定被重写日志的最小尺寸，这样避免了达到约定百分比但尺寸仍然很小的情况还要重写。
#
# 指定百分比为0会禁用AOF自动重写特性。

auto-aof-rewrite-percentage 100
auto-aof-rewrite-min-size 64mb&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;aof工作机制&quot;&gt;AOF工作机制&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;Redis 执行 fork() ，现在同时拥有父进程和子进程。&lt;/li&gt;
&lt;li&gt;子进程开始将新 AOF 文件的内容写入到临时文件。&lt;/li&gt;
&lt;li&gt;对于所有新执行的写入命令，父进程一边将它们累积到一个内存缓存中，一边将这些改动追加到现有 AOF 文件的末尾： 这样即使在重写的中途发生停机，现有的 AOF 文件也还是安全的。&lt;/li&gt;
&lt;li&gt;当子进程完成重写工作时，它给父进程发送一个信号，父进程在接收到信号之后，将内存缓存中的所有数据追加到新 AOF 文件的末尾。&lt;/li&gt;
&lt;li&gt;Redis 用新文件替换旧文件，之后所有命令都会直接追加到新 AOF 文件的末尾。&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;aof的优点&quot;&gt;AOF的优点&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;使用 AOF 持久化会让 Redis 变得非常耐久（much more durable）：你可以设置不同的 fsync 策略，比如无 fsync ，每秒钟一次 fsync ，或者每次执行写入命令时 fsync 。 AOF 的默认策略为每秒钟 fsync 一次，在这种配置下，Redis 仍然可以保持良好的性能，并且就算发生故障停机，也最多只会丢失一秒钟的数据（ fsync 会在后台线程执行，所以主线程可以继续努力地处理命令请求）。&lt;/li&gt;
&lt;li&gt;AOF 文件是一个只进行追加操作的日志文件（append only log）， 因此对 AOF 文件的写入不需要进行 seek ， 即使日志因为某些原因而包含了未写入完整的命令（比如写入时磁盘已满，写入中途停机，等等）， redis-check-aof 工具也可以轻易地修复这种问题。&lt;/li&gt;
&lt;li&gt;Redis 可以在 AOF 文件体积变得过大时，自动地在后台对 AOF 进行重写： 重写后的新 AOF 文件包含了恢复当前数据集所需的最小命令集合。 整个重写操作是绝对安全的，因为 Redis 在创建新 AOF 文件的过程中，会继续将命令追加到现有的 AOF 文件里面，即使重写过程中发生停机，现有的 AOF 文件也不会丢失。 而一旦新 AOF 文件创建完毕，Redis 就会从旧 AOF 文件切换到新 AOF 文件，并开始对新 AOF 文件进行追加操作。&lt;/li&gt;
&lt;li&gt;AOF 文件有序地保存了对数据库执行的所有写入操作， 这些写入操作以 Redis 协议的格式保存， 因此 AOF 文件的内容非常容易被人读懂， 对文件进行分析（parse）也很轻松。 导出（export） AOF 文件也非常简单： 举个例子， 如果你不小心执行了 FLUSHALL 命令， 但只要 AOF 文件未被重写， 那么只要停止服务器， 移除 AOF 文件末尾的 FLUSHALL 命令， 并重启 Redis ， 就可以将数据集恢复到 FLUSHALL 执行之前的状态。&lt;/li&gt;
&lt;/ul&gt;&lt;h3 id=&quot;aof的缺点&quot;&gt;AOF的缺点&lt;/h3&gt;
&lt;ul&gt;&lt;li&gt;对于相同的数据集来说，AOF 文件的体积通常要大于 RDB 文件的体积。&lt;/li&gt;
&lt;li&gt;根据所使用的 fsync 策略，AOF 的速度可能会慢于 RDB 。 在一般情况下， 每秒 fsync 的性能依然非常高， 而关闭 fsync 可以让 AOF 的速度和 RDB 一样快， 即使在高负荷之下也是如此。 不过在处理巨大的写入载入时，RDB 可以提供更有保证的最大延迟时间（latency）。&lt;/li&gt;
&lt;li&gt;AOF 在过去曾经发生过这样的 bug ： 因为个别命令的原因，导致 AOF 文件在重新载入时，无法将数据集恢复成保存时的原样。 （举个例子，阻塞命令 BRPOPLPUSH 就曾经引起过这样的 bug 。） 测试套件里为这种情况添加了测试： 它们会自动生成随机的、复杂的数据集， 并通过重新载入这些数据来确保一切正常。 虽然这种 bug 在 AOF 文件中并不常见， 但是对比来说， RDB 几乎是不可能出现这种 bug 的。&lt;/li&gt;
&lt;/ul&gt;&lt;h2 id=&quot;rdb-和-aof-的选择&quot;&gt;RDB 和 AOF 的选择&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;如果可以承受数分钟以内的数据丢失，那么你可以只使用 RDB 持久。&lt;/li&gt;
&lt;li&gt;AOF 将 Redis 执行的每一条命令追加到磁盘中，处理巨大的写入会降低 Redis 的性能。&lt;/li&gt;
&lt;li&gt;Redis 支持同时开启 RDB 和 AOF,系统重启后，Redis 会优先使用 AOF 来恢复数据，这样丢失的数据会最少。&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Wed, 28 Mar 2018 16:06:00 +0000</pubDate>
<dc:creator>武培轩</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/wupeixuan/p/8667335.html</dc:identifier>
</item>
<item>
<title>linux小白成长之路2————yum安装火狐浏览器 - 云开发</title>
<link>http://www.cnblogs.com/cloud-dev/p/linux-xiao-bai-cheng-zhang-zhi-lu2yum-an-zhuang-hu.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/cloud-dev/p/linux-xiao-bai-cheng-zhang-zhi-lu2yum-an-zhuang-hu.html</guid>
<description>&lt;h2 id=&quot;toc_0&quot;&gt;1.使用终端：&lt;/h2&gt;
&lt;p&gt;CentOS左上角：应用程序&amp;gt;收藏&amp;gt;终端&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1340917/201803/1340917-20180328235718029-194935292.jpg&quot; alt=&quot;&quot;/&gt;￼&lt;/p&gt;
&lt;h2 id=&quot;toc_1&quot;&gt;2.使用root权限安装软件：&lt;/h2&gt;
&lt;p&gt;输入：sudo -i&lt;br/&gt;输入密码(上篇安装linux虚拟机时设定的登录密码，也是超级管理员密码)。&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1340917/201803/1340917-20180328235642792-2022913283.jpg&quot; alt=&quot;&quot;/&gt;￼&lt;/p&gt;
&lt;p&gt;现在已切换为root账户了，以后安装软件时都是用root账户。&lt;/p&gt;
&lt;h2 id=&quot;toc_2&quot;&gt;3.更新yum&lt;/h2&gt;
&lt;p&gt;linux下建议用yum安装软件，简单方便。&lt;br/&gt;第一次运行yum安装软件前，建议更新yum：&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1340917/201803/1340917-20180328235642971-1259410206.jpg&quot; alt=&quot;&quot;/&gt;￼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1340917/201803/1340917-20180328235643409-217210382.jpg&quot; alt=&quot;&quot;/&gt;￼&lt;/p&gt;
&lt;h2 id=&quot;toc_3&quot;&gt;4.yum安装火狐浏览器&lt;/h2&gt;
&lt;p&gt;命令：yum -y install firefox&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1340917/201803/1340917-20180328235717922-1449444459.jpg&quot; alt=&quot;&quot;/&gt;￼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1340917/201803/1340917-20180328235700966-1312944632.jpg&quot; alt=&quot;&quot;/&gt;￼&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1340917/201803/1340917-20180328235643078-2142929652.jpg&quot; alt=&quot;&quot;/&gt;￼&lt;/p&gt;

</description>
<pubDate>Wed, 28 Mar 2018 15:57:00 +0000</pubDate>
<dc:creator>云开发</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/cloud-dev/p/linux-xiao-bai-cheng-zhang-zhi-lu2yum-an-zhuang-hu.html</dc:identifier>
</item>
<item>
<title>SpringAOP-JDK 动态代理和 CGLIB 代理 - 蜗居在小黑屋操控世界</title>
<link>http://www.cnblogs.com/huangjuncong/p/8667278.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/huangjuncong/p/8667278.html</guid>
<description>&lt;h4&gt;在 Spring 中 AOP 代理使用 JDK 动态代理和 CGLIB 代理来实现，默认如果目标对象是接口，则使用 JDK 动态代理，否则使用 CGLIB 来生成代理类。&lt;/h4&gt;
&lt;h4&gt;1.JDK 动态代理&lt;/h4&gt;
&lt;p&gt;那么接口（UserServiceBo）、目标对象（被代理对象 UserServiceImpl）、代理对象（&lt;code&gt;$Proxy0&lt;/code&gt;）三者具体关系可以使用下图表示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1202638/201803/1202638-20180328232532965-1510847146.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;正如上图可知 JDK 动态代理是对接口进行的代理；代理类实现了接口，并继承了 Proxy 类；目标对象与代理对象没有什么直接关系，只是它们都实现了接口，并且代理对象执行方法时候内部最终是委托目标对象执行具体的方法。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;示例如下：&lt;/p&gt;
&lt;p&gt;JDK 代理是对接口进行代理，所以首先写一个接口类：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;interface&lt;/span&gt;&lt;span&gt; UserService {

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;  &lt;span&gt;int&lt;/span&gt;&lt;span&gt; add();
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;然后实现该接口如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserServiceImpl implements UserService {

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; add() {
        System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;执行add方法&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;JDK 动态代理是需要实现 InvocationHandler 接口，因此创建一个 InvocationHandler 的实现类：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;40&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; MyInvocationHandler implements InvocationHandler {

    &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; Object target;

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; MyInvocationHandler(Object target) {
        super();
        &lt;/span&gt;&lt;span&gt;this&lt;/span&gt;.target =&lt;span&gt; target;
    }

    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        &lt;/span&gt;&lt;span&gt;//1&lt;/span&gt;
        System.&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;********&lt;/span&gt;&lt;span&gt;begin &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;+method.getName()+&lt;span&gt;&quot;********&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;//2&lt;/span&gt;
        Object result =&lt;span&gt; method.invoke(target, args);
        &lt;/span&gt;&lt;span&gt;//3&lt;/span&gt;
        System.&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;********end &lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;+method.getName()+&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;*********&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
    }

    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Object getProxy(){
        &lt;/span&gt;&lt;span&gt;//4&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; Proxy.newProxyInstance(Thread.currentThread().getContextClassLoader(), target.getClass().getInterfaces(), &lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
    }

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;接着进行测试，代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {

  &lt;/span&gt;&lt;span&gt;//5&lt;/span&gt;&lt;span&gt;打开这个开关，可以把生成的代理类保存到磁盘&lt;/span&gt;
 System.getProperties().put(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;sun.misc.ProxyGenerator.saveGeneratedFiles&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;true&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);  
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;6创建目标对象（被代理对象）&lt;/span&gt;
  UserService service = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; UserServiceImpl();
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;7创建一个InvocationHandler实例，并传递被代理对象&lt;/span&gt;
  MyInvocationHandler handler = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; MyInvocationHandler(service);
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;8生成代理类&lt;/span&gt;
  UserService proxy =&lt;span&gt; (UserService) handler.getProxy();
  proxy.add();
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;其中&lt;strong&gt;代码6&lt;/strong&gt; 创建了一个 UserServiceImpl 的实例对象，这个对象就是要被代理的目标对象。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;代码7&lt;/strong&gt; 创建了一个 InvocationHandler 实例，并传递被代理目标对象 service 给内部变量 target。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;代码8&lt;/strong&gt; 调用 MyInvocationHandler 的 getProxy 方法使用 JDK 生成一个代理对象。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;代码5&lt;/strong&gt; 设置系统属性变量 sun.misc.ProxyGenerator.saveGeneratedFiles 为 true，这是为了让代码（8）生成的代理对象的字节码文件保存到磁盘。&lt;/p&gt;

&lt;p&gt;接着我们进行反编译看核心的代码，运行后会在项目的 com.sun.proxy 下面会生成 $Proxy0.class 类，经反编译后核心 Java 代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;38&quot;&gt;
&lt;pre&gt;
&lt;span&gt;package com.sun.proxy;
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;
import java.lang.reflect.UndeclaredThrowableException;
import proxy.JDK.UserServiceBo;

&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; final &lt;span&gt;class&lt;/span&gt;&lt;span&gt; $Proxy0
  extends Proxy
  implements UserService
{
  &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Method m1;
  &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Method m3;
  &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Method m0;
  &lt;/span&gt;&lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt;&lt;span&gt; Method m2;

  &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; $Proxy0(InvocationHandler paramInvocationHandler)
  {
    super(paramInvocationHandler);
  }

  &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; final &lt;span&gt;int&lt;/span&gt;&lt;span&gt; add()
  {
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
    {
    &lt;/span&gt;&lt;span&gt;//9&lt;/span&gt;&lt;span&gt;第一个参数是代理类本身，第二个是实现类的方法，第三个是参数&lt;/span&gt;
      &lt;span&gt;return&lt;/span&gt; h.invoke(&lt;span&gt;this&lt;/span&gt;, m3, &lt;span&gt;null&lt;/span&gt;&lt;span&gt;);
    }
    &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt; (Error|&lt;span&gt;RuntimeException localError)
    {
      &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt;&lt;span&gt; localError;
    }
    &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (Throwable localThrowable)
    {
      &lt;/span&gt;&lt;span&gt;throw&lt;/span&gt; &lt;span&gt;new&lt;/span&gt;&lt;span&gt; UndeclaredThrowableException(localThrowable);
    }
  }

 ...省略

  &lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt;
  {
    &lt;/span&gt;&lt;span&gt;try&lt;/span&gt;&lt;span&gt;
    {

      m3 &lt;/span&gt;= Class.forName(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;proxy.JDK.UserService&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;).getMethod(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;new&lt;/span&gt; Class[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;]);
    ...省略
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt;;
    }
    &lt;/span&gt;&lt;span&gt;catch&lt;/span&gt;&lt;span&gt; (NoSuchMethodException localNoSuchMethodException)
    ...省略
  }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;可以看到代理类 &lt;code&gt;$Proxy0&lt;/code&gt; 中 &lt;strong&gt;代码9&lt;/strong&gt;  中的 h 就是 main 函数里面创建的 MyInvocationHandler 的实例，h.invoke(this, m3, null) 实际就是调用的 MyInvocationHandler 的 invoke 方法，&lt;/p&gt;
&lt;p&gt;而后者则是委托给被代理对象进行执行，这里可以对目标对象方法进行拦截，然后对其功能进行增强。另外 代码8 生成的 proxy 对象实际就是 &lt;code&gt;$Proxy0&lt;/code&gt; 的一个实例，当调用 proxy.add() 时候，&lt;/p&gt;
&lt;p&gt;实际是调用的代理类 &lt;code&gt;$Proxy0&lt;/code&gt; 的 add 方法，后者内部则委托给 MyInvocationHandler 的 invoke 方法，invoke 方法内部有调用了目标对象 service 的 add 方法。&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;因此，JDK 动态代理机制总结如下：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JDK 动态代理机制只能对接口进行代理，其原理是动态生成一个代理类，这个代理类实现了目标对象的接口，目标对象和代理类都实现了接口，但是目标对象和代理类的 Class 对象是不一样的，所以两者是没法相互赋值的。&lt;/strong&gt;&lt;/p&gt;


&lt;h4&gt;CGLIB 动态代理&lt;/h4&gt;
&lt;p&gt;相比 JDK 动态代理对接口进行代理，CGLIB 则是对实现类进行代理，这意味着无论目标对象是否有接口，都可以使用 CGLIB 进行代理。&lt;/p&gt;
&lt;p&gt;那么接口（UserServiceBo）、目标对象（被代理对象 UserServiceImpl），代理对象（&lt;code&gt;UserServiceImpl$$EnhancerByCGLIB$$d0bce05a&lt;/code&gt;）三者具体关系可以使用下图表示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1202638/201803/1202638-20180328234449354-1724588947.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;可知接口和代理对象没有啥关系，代理对象是继承了目标对象和实现了 Factory 接口。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;例子如下：&lt;/p&gt;
&lt;p&gt;使用 CGLIB 进行代理需要实现 MethodInterceptor，创建一个方法拦截器 CglibProxy 类：&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; CglibProxy implements MethodInterceptor {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;
    &lt;span&gt;private&lt;/span&gt; Enhancer enhancer = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; Enhancer();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;
    &lt;span&gt;public&lt;/span&gt;&lt;span&gt; Object getProxy(Class clazz) {
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;12 设置被代理类的Class对象&lt;/span&gt;
&lt;span&gt;        enhancer.setSuperclass(clazz);
        &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;13 设置拦截器回调&lt;/span&gt;
        enhancer.setCallback( &lt;span&gt;this&lt;/span&gt;&lt;span&gt;);
        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; enhancer.create();
    }


    @Override
    &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; Object intercept(Object obj, Method method, Object[] args, MethodProxy proxy) throws Throwable {
        System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;.println(obj.getClass().getName()+&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;.&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;+&lt;span&gt;method.getName());
       Object result &lt;/span&gt;=&lt;span&gt; proxy.invokeSuper(obj, args);

        &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; result;
    }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;测试类如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; testCglibProxy() {

&lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;14 生成代理类到本地&lt;/span&gt;
 System.setProperty(DebuggingClassWriter.DEBUG_LOCATION_PROPERTY, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/Users/zhuizhumengxiang/Downloads&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;15 生成目标对象&lt;/span&gt;
    UserServiceImpl service = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; UserServiceImpl();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;16 创建CglibProxy对象&lt;/span&gt;
    CglibProxy cp = &lt;span&gt;new&lt;/span&gt;&lt;span&gt; CglibProxy();
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;17 生成代理类&lt;/span&gt;
    UserServiceBo proxy =&lt;span&gt; (UserServiceBo) cp.getProxy(service.getClass());
    proxy.add();
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;执行上面代码会在 &lt;code&gt;/Users/huangjuncong/Downloads&lt;/code&gt; 目录生成代理类 &lt;code&gt;UserServiceImpl$$EnhancerByCGLIB$$d0bce05a.class&lt;/code&gt; 文件，反编译后部分代码如下：&lt;/p&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; UserServiceImpl$$EnhancerByCGLIB$$d0bce05a extends UserServiceImpl
  implements Factory
{
&lt;/span&gt;&lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; CGLIB$STATICHOOK1()
  {
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;18 空参数&lt;/span&gt;
    CGLIB$emptyArgs = &lt;span&gt;new&lt;/span&gt; Object[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;19 获取UserServiceImpl的add方法列表&lt;/span&gt;
    Method[] tmp191_188 = ReflectUtils.findMethods(&lt;span&gt;new&lt;/span&gt; String[] { &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;()I&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; }, (localClass2 = Class.forName(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;zlx.cglib.zlx.UserServiceImpl&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)).getDeclaredMethods());
    CGLIB$add$&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;$Method = tmp191_188[&lt;span&gt;0&lt;/span&gt;&lt;span&gt;];

    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;20  创建CGLIB$add$0，根据创建一个MethodProxy&lt;/span&gt;
    CGLIB$add$&lt;span&gt;0&lt;/span&gt;$Proxy = MethodProxy.create(localClass2, localClass1, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;()I&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;add&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;, &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;CGLIB$add$0&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);

  }
  &lt;/span&gt;&lt;span&gt;static&lt;/span&gt;&lt;span&gt;
  {
    CGLIB$STATICHOOK1();
  }
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;(21)&lt;/span&gt;
  final &lt;span&gt;int&lt;/span&gt; CGLIB$add$&lt;span&gt;0&lt;/span&gt;&lt;span&gt;()
  {
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; super.add();
  }
  &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;(22)&lt;/span&gt;
  &lt;span&gt;public&lt;/span&gt; final &lt;span&gt;int&lt;/span&gt;&lt;span&gt; add()
  {
    ...省略
    &lt;/span&gt;&lt;span&gt;//&lt;/span&gt;&lt;span&gt;23 获取拦截器，这里为CglibProxy的实例&lt;/span&gt;
    MethodInterceptor tmp17_14 = &lt;span&gt;this&lt;/span&gt;&lt;span&gt;.CGLIB$CALLBACK_0;
    &lt;/span&gt;&lt;span&gt;if&lt;/span&gt; (tmp17_14 != &lt;span&gt;null&lt;/span&gt;&lt;span&gt;)
    { &lt;br/&gt;&lt;/span&gt;&lt;span&gt;　　　　//&lt;/span&gt;&lt;span&gt;24 调用拦截器的intercept方法&lt;/span&gt;
      Object tmp36_31 = tmp17_14.intercept(&lt;span&gt;this&lt;/span&gt;, CGLIB$add$&lt;span&gt;0&lt;/span&gt;$Method, CGLIB$emptyArgs, CGLIB$add$&lt;span&gt;0&lt;/span&gt;&lt;span&gt;$Proxy);
      tmp36_31;
      &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; tmp36_31 == &lt;span&gt;null&lt;/span&gt; ? &lt;span&gt;0&lt;/span&gt;&lt;span&gt; : ((Number)tmp36_31).intValue();
    }
    &lt;/span&gt;&lt;span&gt;return&lt;/span&gt;&lt;span&gt; super.add();
  }
 }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;代码18&lt;/strong&gt; 创建了一个 &lt;code&gt;CGLIB$emptyArgs&lt;/code&gt;，因为 add 方法是无入参的，所以这里创建的 Object 对象个数为0，这对象是 CglibProxy 拦截器的 intercept 的第三个参数。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;代码19&lt;/strong&gt; 获取 UserServiceImpl 的 add 方法列表，并把唯一方法赋值给 &lt;code&gt;CGLIB$add$0$Method&lt;/code&gt;，这个对象是 CglibProxy 拦截器的 intercept 第二个参数。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;代码20&lt;/strong&gt; 创建了一个 MethodProxy 对象，当调用 MethodProxy 对象的 invokeSuper 方法时候会直接调用代理对象的 &lt;code&gt;CGLIB$add$0&lt;/code&gt; 方法，也就是直接调用父类 UserServiceImpl 的 add 方法，这避免了一次反射调用，创建的 MethodProxy 对象是 CglibProxy 拦截器的 intercept 的第四个参数。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;代码22&lt;/strong&gt; 是代理类的 add 方法，代码（17）生成的代理对象 proxy 就是 &lt;code&gt;UserServiceImpl$$EnhancerByCGLIB$$d0bce05a&lt;/code&gt; 的一个实例，当调用 proxy.add() 方法时候就是调用的代码（22），从代码（22）可知内部调用了拦截器 CglibProxy 的 intercept 方法，可知 intercept 的第一个参数就是代理对象本身。&lt;/p&gt;

&lt;p&gt;　　&lt;strong&gt;因此CGLIB代理的总结如下：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　　　&lt;strong&gt;CGLIB 是对目标对象本身进行代理，所以无论目标对象是否有接口，都可以对目标对象进行代理，其原理是使用字节码生成工具在内存生成一个继承目标对象的代理类，然后创建代理对象实例。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　　　由于代理类的父类是目标对象，所以代理类是可以赋值给目标对象的，自然如果目标对象有接口，代理对象也是可以赋值给接口的。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　　　CGLIB 动态代理中生成的代理类的字节码相比 JDK 来说更加复杂。&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;总的来说&lt;/span&gt;：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;　　JDK 使用反射机制调用目标类的方法，CGLIB 则使用类似索引的方式直接调用目标类方法，所以 JDK 动态代理生成代理类的速度相比 CGLIB 要快一些，但是运行速度比 CGLIB 低一些，并且 JDK 代理只能对有接口的目标对象进行代理。&lt;/strong&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 28 Mar 2018 15:51:00 +0000</pubDate>
<dc:creator>蜗居在小黑屋操控世界</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/huangjuncong/p/8667278.html</dc:identifier>
</item>
<item>
<title>Java 小记 — RabbitMQ 的实践与思考 - 捷义</title>
<link>http://www.cnblogs.com/youclk/p/8650100.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/youclk/p/8650100.html</guid>
<description>&lt;h2 id=&quot;前言&quot;&gt;前言&lt;/h2&gt;
&lt;p&gt;本篇随笔将汇总一些我对消息队列 RabbitMQ 的认识，顺便谈谈其在高并发和秒杀系统中的具体应用。&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201803/801714-20180326120103934-964448163.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;预备示例&quot;&gt;1. 预备示例&lt;/h2&gt;
&lt;p&gt;想了下，还是先抛出一个简单示例，随后再根据其具体应用场景进行扩展，我觉得这样表述条理更清晰些。&lt;/p&gt;
&lt;p&gt;RabbitConfig：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;8&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; RabbitConfig {

    &lt;span class=&quot;fu&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Queue &lt;span class=&quot;fu&quot;&gt;callQueue&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Queue(MQConstant.&lt;span class=&quot;fu&quot;&gt;CALL&lt;/span&gt;);
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Client：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;12&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Client {

    &lt;span class=&quot;fu&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; RabbitTemplate rabbitTemplate;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;sendCall&lt;/span&gt;(String content) {
        &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;dv&quot;&gt;0&lt;/span&gt;; i &amp;lt; &lt;span class=&quot;dv&quot;&gt;10000&lt;/span&gt;; i++) {
            String message = i + &lt;span class=&quot;st&quot;&gt;&quot;-&quot;&lt;/span&gt; + content;
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(String&lt;span class=&quot;fu&quot;&gt;.format&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;Sender: &lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;&lt;/span&gt;, message));
            rabbitTemplate.&lt;span class=&quot;fu&quot;&gt;convertAndSend&lt;/span&gt;(MQConstant.&lt;span class=&quot;fu&quot;&gt;CALL&lt;/span&gt;, message);
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Server：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Server {

    &lt;span class=&quot;fu&quot;&gt;@RabbitHandler&lt;/span&gt;
    &lt;span class=&quot;fu&quot;&gt;@RabbitListener&lt;/span&gt;(queues = MQConstant.&lt;span class=&quot;fu&quot;&gt;CALL&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;callProcess&lt;/span&gt;(String message) &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; InterruptedException {
        Thread.&lt;span class=&quot;fu&quot;&gt;sleep&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;1000&lt;/span&gt;);
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(String&lt;span class=&quot;fu&quot;&gt;.format&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;Receiver: reply(&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&quot;%s\&quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;) Yes, I just saw your message!&quot;&lt;/span&gt;, message));
    }

}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Result：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Sender: Hello, are you there!
Receiver: reply(&quot;Hello, are you there!&quot;) Yes, I just saw your message!&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;以上示例会在 rabbitmq 中创建一条队列 CALL， 消息在其中等待消费：&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201803/801714-20180328100550608-264530594.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;在此基础上的简单扩展我就不再写案例了，比如领域模块完成了其核心业务规则之后可能需要更新缓存、写个邮件、记个复杂日志、做个统计报表等等，这些不需要及时反馈或者耗时的附属业务都可以通过异步队列分发，以此来提升核心业务的响应速度，同时如此处理能让领域边界更加清晰，代码的可维护性和持续拓展的能力也会有所提升。&lt;/p&gt;
&lt;h2 id=&quot;削峰&quot;&gt;2. 削峰&lt;/h2&gt;
&lt;p&gt;上个示例中我提到的应用场景是解耦和通知，再接着扩展，因其具备良好的缓冲性质，所以还有一个非常适合的应用场景那就是削峰。对于突如其来的极高并发请求，我们可以先瞬速地将其加入队列并回复用户一个友好提示，然后服务器可在其能承受的范围内慢慢处理，以此来防止突发的 CPU 和内存 “爆表”。&lt;/p&gt;
&lt;p&gt;改造之后对于发送方来说当然是比较爽的，他只是将请求加入消息队列而已，处理压力都归到了消费端。接着思考，这样处理有没有副作用？如果这个请求刚好是线程阻塞的，那还要加入队列慢慢排队处理，那不是完蛋了，用户要猴年马月才能得到反馈？所以针对此，我觉得应该将消费端的方法改为异步调用（即多线程）以提升吞吐量，在 Spring Boot 中的写法也非常简单：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Server {

    &lt;span class=&quot;fu&quot;&gt;@Async&lt;/span&gt;
    &lt;span class=&quot;fu&quot;&gt;@RabbitHandler&lt;/span&gt;
    &lt;span class=&quot;fu&quot;&gt;@RabbitListener&lt;/span&gt;(queues = MQConstant.&lt;span class=&quot;fu&quot;&gt;CALL&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;callProcess&lt;/span&gt;(String message) &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; InterruptedException {
        Thread.&lt;span class=&quot;fu&quot;&gt;sleep&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;100&lt;/span&gt;);
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(String&lt;span class=&quot;fu&quot;&gt;.format&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;Receiver: reply(&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&quot;%s\&quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;) Yes, I just saw your message!&quot;&lt;/span&gt;, message));
    }

}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;参照示例一的方法，我发布了 10000 条消息加入队列，且消费端的调用每次阻塞一秒，那可有意思了，什么时候能处理完？但如果开几百个线程同时处理的话，那几十秒就够了，当然具体多少合适还应根据具体的业务场景和服务器配置酌情考虑。另外，别忘了配线程池：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; AsyncConfig {

    &lt;span class=&quot;fu&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Executor &lt;span class=&quot;fu&quot;&gt;asyncExecutor&lt;/span&gt;(){
        ThreadPoolTaskExecutor executor = &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ThreadPoolTaskExecutor&lt;/span&gt;();
        executor.&lt;span class=&quot;fu&quot;&gt;setCorePoolSize&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;);
        executor.&lt;span class=&quot;fu&quot;&gt;setMaxPoolSize&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;500&lt;/span&gt;);
        executor.&lt;span class=&quot;fu&quot;&gt;setQueueCapacity&lt;/span&gt;(&lt;span class=&quot;dv&quot;&gt;10&lt;/span&gt;);

        executor.&lt;span class=&quot;fu&quot;&gt;setThreadNamePrefix&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;MyExecutor-&quot;&lt;/span&gt;);

        executor.&lt;span class=&quot;fu&quot;&gt;setRejectedExecutionHandler&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; ThreadPoolExecutor.&lt;span class=&quot;fu&quot;&gt;CallerRunsPolicy&lt;/span&gt;());
        executor.&lt;span class=&quot;fu&quot;&gt;initialize&lt;/span&gt;();
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; executor;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2 id=&quot;exchange&quot;&gt;3. Exchange&lt;/h2&gt;
&lt;p&gt;RabbitMQ 可能为 N 个应用同时提供服务，要是你和你的蓝颜知己突然心有灵犀，在不同的业务上使用了同一个 routingKey，想想就刺激。因此，队列多了自然要进行分组管理，限定好 Exchange 的规则，接下来就可以独自玩耍了。&lt;/p&gt;
&lt;p&gt;MQConstant：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; MQConstant {

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String EXCHANGE = &lt;span class=&quot;st&quot;&gt;&quot;YOUCLK-MESSAGE-EXCHANGE&quot;&lt;/span&gt;;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String CALL = MQConstant.&lt;span class=&quot;fu&quot;&gt;EXCHANGE&lt;/span&gt; + &lt;span class=&quot;st&quot;&gt;&quot;.CALL&quot;&lt;/span&gt;;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String ALL = MQConstant.&lt;span class=&quot;fu&quot;&gt;EXCHANGE&lt;/span&gt; + &lt;span class=&quot;st&quot;&gt;&quot;.#&quot;&lt;/span&gt;;
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;RabbitConfig：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;11&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Configuration&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; RabbitConfig {

    &lt;span class=&quot;fu&quot;&gt;@Bean&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Queue &lt;span class=&quot;fu&quot;&gt;callQueue&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Queue(MQConstant.&lt;span class=&quot;fu&quot;&gt;CALL&lt;/span&gt;);
    }

    &lt;span class=&quot;fu&quot;&gt;@Bean&lt;/span&gt;
    TopicExchange &lt;span class=&quot;fu&quot;&gt;exchange&lt;/span&gt;() {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;TopicExchange&lt;/span&gt;(MQConstant.&lt;span class=&quot;fu&quot;&gt;EXCHANGE&lt;/span&gt;);
    }

    &lt;span class=&quot;fu&quot;&gt;@Bean&lt;/span&gt;
    Binding &lt;span class=&quot;fu&quot;&gt;bindingExchangeMessage&lt;/span&gt;(Queue queueMessage, TopicExchange exchange) {
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; BindingBuilder.&lt;span class=&quot;fu&quot;&gt;bind&lt;/span&gt;(queueMessage).&lt;span class=&quot;fu&quot;&gt;to&lt;/span&gt;(exchange).&lt;span class=&quot;fu&quot;&gt;with&lt;/span&gt;(MQConstant.&lt;span class=&quot;fu&quot;&gt;ALL&lt;/span&gt;);
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;此时我们再去查队列 CALL，可以看到已经绑定了Exchange：&lt;br/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/801714/201803/801714-20180328221125169-140426434.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;当然 Exchange 的作用远不止如此，以上示例为 Topic 模式，除此之外还有 Direct、Headers 和 Fanout 模式，写法都差不多，感兴趣的童鞋可以去查看 “&lt;a href=&quot;https://www.rabbitmq.com/getstarted.html&quot;&gt;官方文档&lt;/a&gt;” 进行更深入了解。&lt;/p&gt;
&lt;h2 id=&quot;延时队列&quot;&gt;4. 延时队列&lt;/h2&gt;
&lt;p&gt;延时任务的场景相信小伙伴们都接触过，特别是抢购的时候，在规定时间内未付款订单就被回收了。微信支付的 API 里面也有一个支付完成后的延时再确认消息推送，实现原理应该都差不多。&lt;/p&gt;
&lt;p&gt;利用 RabbitMQ 实现该功能首先要了解他的两个特性，分别是 Time-To-Live Extensions 和 Dead Letter Exchanges，字面意思上就能理解个大概，一个是生存时间，一个是死信。整个过程也很容易理解，TTL 相当于一个缓冲队列，等待其过期之后消息会由 DLX 转发到实际消费队列，如此便实现了他的延时过程。&lt;/p&gt;
&lt;p&gt;MQConstant：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;9&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; MQConstant {

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String PER_DELAY_EXCHANGE = &lt;span class=&quot;st&quot;&gt;&quot;PER_DELAY_EXCHANGE&quot;&lt;/span&gt;;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String DELAY_EXCHANGE = &lt;span class=&quot;st&quot;&gt;&quot;DELAY_EXCHANGE&quot;&lt;/span&gt;;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String DELAY_CALL_TTL = &lt;span class=&quot;st&quot;&gt;&quot;DELAY_CALL_TTL&quot;&lt;/span&gt;;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; String CALL = &lt;span class=&quot;st&quot;&gt;&quot;CALL&quot;&lt;/span&gt;;

}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;ExpirationMessagePostProcessor：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;10&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; ExpirationMessagePostProcessor &lt;span class=&quot;kw&quot;&gt;implements&lt;/span&gt; MessagePostProcessor {
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;final&lt;/span&gt; Long ttl;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ExpirationMessagePostProcessor&lt;/span&gt;(Long ttl) {
        &lt;span class=&quot;kw&quot;&gt;this&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;ttl&lt;/span&gt; = ttl;
    }

    &lt;span class=&quot;fu&quot;&gt;@Override&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; Message &lt;span class=&quot;fu&quot;&gt;postProcessMessage&lt;/span&gt;(Message message) &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; AmqpException {
        message.&lt;span class=&quot;fu&quot;&gt;getMessageProperties&lt;/span&gt;()
                .&lt;span class=&quot;fu&quot;&gt;setExpiration&lt;/span&gt;(ttl.&lt;span class=&quot;fu&quot;&gt;toString&lt;/span&gt;());
        &lt;span class=&quot;kw&quot;&gt;return&lt;/span&gt; message;
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Client：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Client {

    &lt;span class=&quot;fu&quot;&gt;@Autowired&lt;/span&gt;
    &lt;span class=&quot;kw&quot;&gt;private&lt;/span&gt; RabbitTemplate rabbitTemplate;

    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;sendCall&lt;/span&gt;(String content) {
        &lt;span class=&quot;kw&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;dt&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;dv&quot;&gt;1&lt;/span&gt;; i &amp;lt;= &lt;span class=&quot;dv&quot;&gt;3&lt;/span&gt;; i++) {
            &lt;span class=&quot;dt&quot;&gt;long&lt;/span&gt; expiration = i * &lt;span class=&quot;dv&quot;&gt;5000&lt;/span&gt;;
            String message = i + &lt;span class=&quot;st&quot;&gt;&quot;-&quot;&lt;/span&gt; + content;
            System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(String&lt;span class=&quot;fu&quot;&gt;.format&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;Sender: &lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;&lt;/span&gt;, message));
            rabbitTemplate.&lt;span class=&quot;fu&quot;&gt;convertAndSend&lt;/span&gt;(MQConstant.&lt;span class=&quot;fu&quot;&gt;DELAY_CALL_TTL&lt;/span&gt;, (Object) message, &lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;ExpirationMessagePostProcessor&lt;/span&gt;(expiration));

        }
    }
}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Server：&lt;/p&gt;
&lt;div class=&quot;sourceCode&quot; readability=&quot;13&quot;&gt;
&lt;pre class=&quot;sourceCode java&quot;&gt;
&lt;code class=&quot;sourceCode java&quot;&gt;&lt;span class=&quot;fu&quot;&gt;@Component&lt;/span&gt;
&lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kw&quot;&gt;class&lt;/span&gt; Server {

    &lt;span class=&quot;fu&quot;&gt;@Async&lt;/span&gt;
    &lt;span class=&quot;fu&quot;&gt;@RabbitHandler&lt;/span&gt;
    &lt;span class=&quot;fu&quot;&gt;@RabbitListener&lt;/span&gt;(queues = MQConstant.&lt;span class=&quot;fu&quot;&gt;CALL&lt;/span&gt;)
    &lt;span class=&quot;kw&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;dt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;fu&quot;&gt;callProcess&lt;/span&gt;(String message) &lt;span class=&quot;kw&quot;&gt;throws&lt;/span&gt; InterruptedException {
        String date = (&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; SimpleDateFormat(&lt;span class=&quot;st&quot;&gt;&quot;HH:mm:ss&quot;&lt;/span&gt;))&lt;span class=&quot;fu&quot;&gt;.format&lt;/span&gt;(&lt;span class=&quot;kw&quot;&gt;new&lt;/span&gt; Date());
        System.&lt;span class=&quot;fu&quot;&gt;out&lt;/span&gt;.&lt;span class=&quot;fu&quot;&gt;println&lt;/span&gt;(String&lt;span class=&quot;fu&quot;&gt;.format&lt;/span&gt;(&lt;span class=&quot;st&quot;&gt;&quot;Receiver: reply(&lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;\&quot;%s\&quot;&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;) Yes, I just saw your message!- &lt;/span&gt;&lt;span class=&quot;ch&quot;&gt;%s&lt;/span&gt;&lt;span class=&quot;st&quot;&gt;&quot;&lt;/span&gt;, message, date));
    }

}&lt;/code&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Result：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Sender: 1-Hello, are you there!
Sender: 2-Hello, are you there!
Sender: 3-Hello, are you there!
Receiver: reply(&quot;1-Hello, are you there!&quot;) Yes, I just saw your message!- 23:04:12
Receiver: reply(&quot;2-Hello, are you there!&quot;) Yes, I just saw your message!- 23:04:17
Receiver: reply(&quot;3-Hello, are you there!&quot;) Yes, I just saw your message!- 23:04:22&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;结果一目了然，分别在队列中延迟了 5秒，10秒，15秒，当然，以上只是我的简单示例，童鞋们可翻阅官方文档（“ &lt;a href=&quot;https://www.rabbitmq.com/ttl.html&quot;&gt;ttl&lt;/a&gt; ” &amp;amp;&amp;amp; “ &lt;a href=&quot;https://www.rabbitmq.com/dlx.html&quot;&gt;dlx&lt;/a&gt; ”）进一步深入学习。&lt;/p&gt;
&lt;h2 id=&quot;结语&quot;&gt;结语&lt;/h2&gt;
&lt;p&gt;本篇随笔不该就这么结束，但晚上心情不好，百感交集，无法继续写作，无奈至此。近期正在寻觅新的工作机会，我的微信：youclk，无论有没有推荐的，给我点鼓励，谢谢!&lt;/p&gt;
</description>
<pubDate>Wed, 28 Mar 2018 15:36:00 +0000</pubDate>
<dc:creator>捷义</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/youclk/p/8650100.html</dc:identifier>
</item>
<item>
<title>一个有味道的函数 - 贾顺名</title>
<link>http://www.cnblogs.com/jiasm/p/8667206.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/jiasm/p/8667206.html</guid>
<description>&lt;blockquote readability=&quot;7&quot;&gt;
&lt;p&gt;最近想到了一个&lt;em&gt;自认为&lt;/em&gt;很有意思的面试题&lt;br/&gt;如何实现一个&lt;code&gt;compose&lt;/code&gt;函数。&lt;br/&gt;函数接收数个参数，参数均为&lt;code&gt;Function&lt;/code&gt;类型，右侧函数的执行结果将作为左侧函数执行的参数来调用。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; compose(arg =&amp;gt; `${arg}%`, arg =&amp;gt; arg.toFixed(2), arg =&amp;gt; arg + 10)(5) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 15.00%&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; compose(arg =&amp;gt; arg.toFixed(2), arg =&amp;gt; arg + 10)(5) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 15.00&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt; compose(arg =&amp;gt; arg + 10)(5) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 15&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;执行结果如上述代码，有兴趣的同学可以先自己实现一下再来看后续的。&lt;/p&gt;
&lt;h2 id=&quot;1-0实现方案&quot;&gt;1.0实现方案&lt;/h2&gt;
&lt;p&gt;大致的思路为：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;获取所有的参数&lt;/li&gt;
&lt;li&gt;调用最后一个函数，并接收返回值&lt;/li&gt;
&lt;li&gt;如果没有后续的函数，返回数据，如果有，将返回值放入下一个函数中执行&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;所以这种情况用递归来实现会比较清晰一些&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; compose (...funcs) {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;   &lt;span&gt;return&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; exec (arg) {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;     let func =&lt;span&gt; funcs.pop()
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     let result = func(arg) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 执行函数，获取返回值&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt; 
&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 如果后续还有函数，将返回值放入下一个函数执行&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 如果后续没有了，直接返回&lt;/span&gt;
&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; funcs.length ?&lt;span&gt; exec(result) : result
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt; &lt;span&gt;  }
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;这样，我们就实现了上述的&lt;code&gt;compose&lt;/code&gt;函数。&lt;br/&gt;真是可喜可贺，可喜可贺。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;本文完。&lt;/strong&gt;&lt;/p&gt;
&lt;hr/&gt;&lt;p&gt;&lt;img src=&quot;http://blog.jiasm.org/images/koajs-code-review/pic-1.jpg&quot; alt=&quot;&quot;/&gt;&lt;br/&gt;&lt;img src=&quot;http://blog.jiasm.org/images/koajs-code-review/pic-1.jpg&quot; alt=&quot;&quot;/&gt;&lt;br/&gt;&lt;img src=&quot;http://blog.jiasm.org/images/koajs-code-review/pic-1.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;好了，如果现实生活中开发做需求也是如此爽快不做作就好了，但是，产品总是会来的，需求总是会改的。&lt;/p&gt;
&lt;h2 id=&quot;2-0需求变更&quot;&gt;2.0需求变更&lt;/h2&gt;
&lt;p&gt;我们现在有如下要求，函数需要支持&lt;code&gt;Promise&lt;/code&gt;对象，而且要兼容普通函数的方式。&lt;br/&gt;示例代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 为方便阅读修改的排版&lt;/span&gt;
&lt;span&gt; 2&lt;/span&gt; &lt;span&gt;compose(
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;   arg =&amp;gt; &lt;span&gt;new&lt;/span&gt; Promise((resolve, reject) =&amp;gt;
&lt;span&gt; 4&lt;/span&gt;     setTimeout(_ =&amp;gt;
&lt;span&gt; 5&lt;/span&gt;       resolve(arg.toFixed(2&lt;span&gt;)),
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;       1000
&lt;span&gt; 7&lt;/span&gt; &lt;span&gt;    )
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt; &lt;span&gt;  ),
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;   arg =&amp;gt; arg + 10
&lt;span&gt;10&lt;/span&gt; )(5).then(data =&amp;gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;   console.log(data) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 15.00&lt;/span&gt;
&lt;span&gt;12&lt;/span&gt; })
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;我们有如下代码调用，对&lt;code&gt;toFixed&lt;/code&gt;函数的调用添加&lt;code&gt;1000ms&lt;/code&gt;的延迟。&lt;del&gt;让用户觉得这个函数执行很慢，方便下次优化&lt;/del&gt;&lt;/p&gt;
&lt;p&gt;所以，我们就需要去修改&lt;code&gt;compose&lt;/code&gt;函数了。&lt;br/&gt;我们之前的代码只能支持普通函数的处理，现在因为添加了&lt;code&gt;Promise&lt;/code&gt;对象的原因，所以我们要进行如下修改：&lt;/p&gt;
&lt;p&gt;首先，异步函数改为同步函数是不存在的&lt;code&gt;readFile/readFileSync&lt;/code&gt;这类除外。&lt;br/&gt;所以，最简单的方式就是，我们将普通函数改为异步函数，也就是在普通函数外包一层&lt;code&gt;Promise&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;39&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; compose (...funcs) {
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;   &lt;span&gt;return&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; exec (arg) {
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; Promise((resolve, reject) =&amp;gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;       let func =&lt;span&gt; funcs.pop()
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt; 
&lt;span&gt; 6&lt;/span&gt;       let result = promiseify(func(arg)) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 执行函数，获取返回值，并将返回值转换为`Promise`对象&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt;       &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 注册`Promise`的`then`事件，并在里边进行下一次函数执行的准备&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt;       &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 判断后续是否还存在函数，如果有，继续执行&lt;/span&gt;
&lt;span&gt;10&lt;/span&gt;       &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 如果没有，直接返回结果&lt;/span&gt;
&lt;span&gt;11&lt;/span&gt;       result.then(data =&amp;gt; funcs.length ?
&lt;span&gt;12&lt;/span&gt;         exec(data).then(resolve).&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;(reject) :
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt; &lt;span&gt;        resolve(data)
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;       ).&lt;span&gt;catch&lt;/span&gt;&lt;span&gt;(reject)
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt; &lt;span&gt;    })
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt; &lt;span&gt;  }
&lt;/span&gt;&lt;span&gt;17&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt; 
&lt;span&gt;19&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 判断参数是否为`Promise`&lt;/span&gt;
&lt;span&gt;20&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; isPromise (pro) {
&lt;/span&gt;&lt;span&gt;21&lt;/span&gt;   &lt;span&gt;return&lt;/span&gt; pro &lt;span&gt;instanceof&lt;/span&gt;&lt;span&gt; Promise
&lt;/span&gt;&lt;span&gt;22&lt;/span&gt; &lt;span&gt;}
&lt;/span&gt;&lt;span&gt;23&lt;/span&gt; 
&lt;span&gt;24&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 将参数转换为`Promise`&lt;/span&gt;
&lt;span&gt;25&lt;/span&gt; &lt;span&gt;function&lt;/span&gt;&lt;span&gt; promiseify (pro) {
&lt;/span&gt;&lt;span&gt;26&lt;/span&gt;   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 如果结果为`Promise`，直接返回&lt;/span&gt;
&lt;span&gt;27&lt;/span&gt;   &lt;span&gt;if&lt;/span&gt; (isPromise(pro)) &lt;span&gt;return&lt;/span&gt;&lt;span&gt; pro
&lt;/span&gt;&lt;span&gt;28&lt;/span&gt;   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 如果结果为这些基本类型，说明是普通函数&lt;/span&gt;
&lt;span&gt;29&lt;/span&gt;   &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 我们给他包一层`Promise.resolve`&lt;/span&gt;
&lt;span&gt;30&lt;/span&gt;   &lt;span&gt;if&lt;/span&gt; (['string', 'number', 'regexp', 'object'].includes(&lt;span&gt;typeof&lt;/span&gt; pro)) &lt;span&gt;return&lt;/span&gt;&lt;span&gt; Promise.resolve(pro)
&lt;/span&gt;&lt;span&gt;31&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;我们针对&lt;code&gt;compose&lt;/code&gt;代码的改动主要是集中在这几处：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;将&lt;code&gt;compose&lt;/code&gt;的返回值改为了&lt;code&gt;Promise&lt;/code&gt;对象，这个是必然的，因为内部可能会包含&lt;code&gt;Promise&lt;/code&gt;参数，所以我们一定要返回一个&lt;code&gt;Promise&lt;/code&gt;对象&lt;/li&gt;
&lt;li&gt;将各个函数执行的返回值包装为了&lt;code&gt;Promise&lt;/code&gt;对象，为了统一返回值。&lt;/li&gt;
&lt;li&gt;处理函数返回值，监听&lt;code&gt;then&lt;/code&gt;和&lt;code&gt;catch&lt;/code&gt;、并将&lt;code&gt;resolve&lt;/code&gt;和&lt;code&gt;reject&lt;/code&gt;传递了过去。&lt;/li&gt;
&lt;/ol&gt;&lt;hr/&gt;&lt;h2 id=&quot;3-0终极版&quot;&gt;3.0终极版&lt;/h2&gt;
&lt;p&gt;现在，我们又得到了一个新的需求，我们想要在其中某些函数执行中跳过部分代码，先执行后续的函数，等到后续函数执行完后，再拿到返回值执行剩余的代码：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;44&quot;&gt;
&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;compose(
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;   data =&amp;gt; &lt;span&gt;new&lt;/span&gt; Promise((resolve, reject) =&amp;gt; resolve(data + 2.5&lt;span&gt;)),
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;   data =&amp;gt; &lt;span&gt;new&lt;/span&gt; Promise((resolve, reject) =&amp;gt; resolve(data + 2.5&lt;span&gt;)),
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;   async &lt;span&gt;function&lt;/span&gt; c (data, next) { &lt;span&gt;//&lt;/span&gt;&lt;span&gt; async/await为Promise语法糖，不赘述&lt;/span&gt;
&lt;span&gt; 5&lt;/span&gt;     data += 10 &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 数值 + 10&lt;/span&gt;
&lt;span&gt; 6&lt;/span&gt;     let result = await next(data) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 先执行后续的代码&lt;/span&gt;
&lt;span&gt; 7&lt;/span&gt; 
&lt;span&gt; 8&lt;/span&gt;     result -= 5  &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 数值 - 5&lt;/span&gt;
&lt;span&gt; 9&lt;/span&gt; 
&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;return&lt;/span&gt;&lt;span&gt; result
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt; &lt;span&gt;  },
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;   (data, next) =&amp;gt; &lt;span&gt;new&lt;/span&gt; Promise((resolve, reject) =&amp;gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;     next(data).then(data =&amp;gt;&lt;span&gt; {
&lt;/span&gt;&lt;span&gt;14&lt;/span&gt;       data = data / 100 &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 将数值除以100限制百分比&lt;/span&gt;
&lt;span&gt;15&lt;/span&gt;       resolve(`${data}%&lt;span&gt;`)
&lt;/span&gt;&lt;span&gt;16&lt;/span&gt;     }).&lt;span&gt;catch&lt;/span&gt;(reject) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 先执行后续的代码&lt;/span&gt;
&lt;span&gt;17&lt;/span&gt; &lt;span&gt;  }),
&lt;/span&gt;&lt;span&gt;18&lt;/span&gt;   &lt;span&gt;function&lt;/span&gt; d (data) { &lt;span&gt;return&lt;/span&gt; data + 20&lt;span&gt; }
&lt;/span&gt;&lt;span&gt;19&lt;/span&gt; )(15).then(console.log) &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 0.45%&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;拿到需求后，陷入沉思。。。&lt;br/&gt;好好地顺序执行代码，突然就变成了这个鸟样，随时可能会跳到后边的函数去。&lt;br/&gt;所以我们分析这个新需求的效果：&lt;/p&gt;
&lt;p&gt;我们在函数执行到一半时，执行了&lt;code&gt;next&lt;/code&gt;，&lt;code&gt;next&lt;/code&gt;的返回值为后续函数的执行返回值。&lt;br/&gt;也就是说，我们在&lt;code&gt;next&lt;/code&gt;中处理，直接调用队列中的下一个函数即可；&lt;br/&gt;然后监听&lt;code&gt;then&lt;/code&gt;和&lt;code&gt;catch&lt;/code&gt;回调，即可在当前函数中获取到返回值；&lt;br/&gt;拿到返回值后就可以执行我们后续的代码。&lt;/p&gt;
&lt;p&gt;然后他的实现呢，也是非常的简单，我们只需要修改如下代码即可完成操作：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 在这里会强行调用`exec`并传入参数&lt;/span&gt;
&lt;span&gt;2&lt;/span&gt; &lt;span&gt;//&lt;/span&gt;&lt;span&gt; 而`exec`的执行，则意味着`funcs`集合中又一个函数被从队列中取出来&lt;/span&gt;
&lt;span&gt;3&lt;/span&gt; promiseify(func(arg, arg =&amp;gt; exec(arg)))
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;也就是说，我们会提前执行下一个函数，而且下一个函数的&lt;code&gt;then&lt;/code&gt;事件注册是在我们当前函数内部的，当我们拿到返回值后，就可以进行后续的处理了。&lt;br/&gt;而我们所有的函数是存放在一个队列里的，在我们提前执行完毕该函数后，后续的执行也就不会再出现了。避免了一个函数被重复执行的问题。&lt;/p&gt;
&lt;p&gt;如果看到这里已经很明白了，那么恭喜，你已经了解了实现&lt;code&gt;koajs&lt;/code&gt;最核心的代码：&lt;br/&gt;&lt;strong&gt;中间件的实现方式&lt;/strong&gt;、&lt;strong&gt;洋葱模型&lt;/strong&gt;&lt;br/&gt;&lt;img src=&quot;http://blog.jiasm.org/images/koajs-code-review/pic-2.png&quot; alt=&quot;&quot;/&gt;&lt;br/&gt;想必现在整个函数周遭散发着&lt;code&gt;洋葱&lt;/code&gt;的味道。&lt;/p&gt;
&lt;h2 id=&quot;参考资料&quot;&gt;参考资料&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/koajs/compose/blob/master/index.js&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;koa-compose&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;相关示例代码仓库&quot;&gt;相关示例代码仓库&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/Jiasm/notebook/blob/master/compose.js&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;1.0，普通函数&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;https://github.com/Jiasm/notebook/blob/master/compose-promise.js&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;2.0，Promise函数&lt;/a&gt;&lt;br/&gt;&lt;a href=&quot;https://github.com/Jiasm/notebook/blob/master/compose-promise-with-next.js&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;3.0，支持洋葱模型&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Wed, 28 Mar 2018 15:35:00 +0000</pubDate>
<dc:creator>贾顺名</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/jiasm/p/8667206.html</dc:identifier>
</item>
</channel>
</rss>