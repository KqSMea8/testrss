<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>互联网发展的三个阶段 - 极息烟云</title>
<link>http://www.cnblogs.com/focus-yun/p/9941085.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/focus-yun/p/9941085.html</guid>
<description>&lt;p&gt;&lt;strong&gt;互联网发展的三个阶段&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;三个阶段&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1）PC互联网（PC Internet）&lt;/p&gt;
&lt;p&gt;2）移动互联网（Mobile Internet）&lt;/p&gt;
&lt;p&gt;3）物联网（IOT Internet Of Things）&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;互动与互联&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;互动1.0&lt;/p&gt;
&lt;p&gt;　　门户网站，企业门户网站，提供一些信息服务&lt;/p&gt;
&lt;p&gt;互动2.0&lt;/p&gt;
&lt;p&gt;　　Google、百度，搜索互动&lt;/p&gt;
&lt;p&gt;　　新浪微博，微博关注的网络效应&lt;/p&gt;
&lt;p&gt;互联3.0&lt;/p&gt;
&lt;p&gt;　　微信，facebook，让我们互联，新诞生的一些具有影响力的名词，群主，朋友圈等&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;发展特点&lt;/strong&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;1）业务功能越来越多，越来越复杂&lt;/p&gt;
&lt;p&gt;2）万物互联，数据量越来越大&lt;/p&gt;
&lt;p&gt;3）请求量越来越多，需要更好的更高的用户体验需求&lt;/p&gt;
&lt;p&gt;4）业务持续快速迭代交付的能力&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/647966/201811/647966-20181110234125205-21967325.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 10 Nov 2018 15:39:00 +0000</pubDate>
<dc:creator>极息烟云</dc:creator>
<og:description>互联网发展的三个阶段 三个阶段 1）PC互联网（PC Internet） 2）移动互联网（Mobile Internet） 3）物联网（IOT Internet Of Things） 互动与互联 互动</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/focus-yun/p/9941085.html</dc:identifier>
</item>
<item>
<title>HALCON视觉算子相关函数中文说明System(2) - 风口商学院</title>
<link>http://www.cnblogs.com/fksxy/p/9941083.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/fksxy/p/9941083.html</guid>
<description>&lt;p&gt;16.6  Parameters&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;get_system_&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：根据HALCON系统参数获取关于当前的信息。&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;set_system&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：HALCON系统参数的设置。&lt;/p&gt;

&lt;p&gt;16.7  Serial&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;clear_serial&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：清除一个串行连接的缓冲。&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;close_all_serials&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：关闭所有的串行设备。&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;close_serial&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：关闭一个串行设备。&lt;/p&gt;
&lt;ol start=&quot;4&quot;&gt;&lt;li&gt;get_serial_param&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：获取一个串行设备的参数。&lt;/p&gt;
&lt;ol start=&quot;5&quot;&gt;&lt;li&gt;open_serial&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：打开一个串行设备。&lt;/p&gt;
&lt;ol start=&quot;6&quot;&gt;&lt;li&gt;read_serial&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：读取一个串行设备。&lt;/p&gt;
&lt;ol start=&quot;7&quot;&gt;&lt;li&gt;set_serial_param&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：设置一个串行设备的参数。&lt;/p&gt;
&lt;ol start=&quot;8&quot;&gt;&lt;li&gt;write_serial&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：写入一个串行设备。&lt;/p&gt;

&lt;p&gt;16.8  Sockets&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;close_socket&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：关闭一个插口（接口）。&lt;/p&gt;
&lt;ol start=&quot;2&quot;&gt;&lt;li&gt;get_next_socket_data_type&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：决定下一个插口（接口）数据的HALCON数据类型。&lt;/p&gt;
&lt;ol start=&quot;3&quot;&gt;&lt;li&gt;get_socket_timeout&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：获取一个插口（接口）的超时。&lt;/p&gt;
&lt;ol start=&quot;4&quot;&gt;&lt;li&gt;open_socket_accept&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：打开一个接受连接请求的插口（接口）。&lt;/p&gt;
&lt;ol start=&quot;5&quot;&gt;&lt;li&gt;open_socket_connect&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：打开一个插口到一个已存在的插口。&lt;/p&gt;
&lt;ol start=&quot;6&quot;&gt;&lt;li&gt;receive_image&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接接收一副图像。&lt;/p&gt;
&lt;ol start=&quot;7&quot;&gt;&lt;li&gt;receive_region&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接接收区域。&lt;/p&gt;
&lt;ol start=&quot;8&quot;&gt;&lt;li&gt;receive_tuple&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接接收一个元组。&lt;/p&gt;
&lt;ol start=&quot;9&quot;&gt;&lt;li&gt;receive_xld&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接接收一个XLD对象。&lt;/p&gt;
&lt;ol start=&quot;10&quot;&gt;&lt;li&gt;send_image&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接发送一副图像。&lt;/p&gt;
&lt;ol start=&quot;11&quot;&gt;&lt;li&gt;send_region&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接发送区域。&lt;/p&gt;
&lt;ol start=&quot;12&quot;&gt;&lt;li&gt;send_tuple&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接发送一个元组。&lt;/p&gt;
&lt;ol start=&quot;13&quot;&gt;&lt;li&gt;send_xld&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：通过插口连接发送一个XLD对象。&lt;/p&gt;
&lt;ol start=&quot;14&quot;&gt;&lt;li&gt;set_socket_timeout&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：设置一个插口的超时。&lt;/p&gt;
&lt;ol start=&quot;15&quot;&gt;&lt;li&gt;socket_accept_connect&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;功能：接受一个监听插口的连接请求。&lt;/p&gt;
</description>
<pubDate>Sat, 10 Nov 2018 15:38:00 +0000</pubDate>
<dc:creator>风口商学院</dc:creator>
<og:description>16.6 Parameters 功能：根据HALCON系统参数获取关于当前的信息。 功能：HALCON系统参数的设置。 16.7 Serial 功能：清除一个串行连接的缓冲。 功能：关闭所有的串行设备</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/fksxy/p/9941083.html</dc:identifier>
</item>
<item>
<title>人脸识别FaceNet+TensorFlow - dskit</title>
<link>http://www.cnblogs.com/dskit/p/9941079.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/dskit/p/9941079.html</guid>
<description>&lt;p align=&quot;left&quot;&gt; 一、本文目标&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;利用facenet源码实现从摄像头读取视频，实时检测并识别视频中的人脸。换句话说：把facenet源码中contributed目录下的real_time_face_recognition.py运行起来。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;二、需要具备的条件&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;1、准备好的Tensorflow环境&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;2、摄像头（可用视频文件替代）&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;3、准备好的facenet源码并安装依赖包&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;4、训练好的人脸检测模型&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;5、训练好的人脸识别分类模型&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;三、准备工作&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;1、搭建Tensorflow环境&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;如何编译搭建见《Ubuntu16.04+TensorFlowr1.12环境搭建指南》。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;2、准备摄像头&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;如果使用虚拟机，首先确保摄像头连接的虚拟机，连接方式见下图：&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/78343/201811/78343-20181110233418109-1549031380.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;摄像头连接的虚拟机成功后，在/dev目录下会看到video0文件，需要确保当前用户有摄像头的访问权限：&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;sudo chown jack:jack /dev/video0&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;如果没有摄像头，可用视频文件替代，只需将real_time_face_recognition.py中&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;video_capture = cv2.VideoCapture(0)&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;这行代码替换为:&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;video_capture = cv2.VideoCapture(VIDEOPATH)&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;事实上，在虚拟上使用摄像头做实时视频流的人脸识别，很可能会出现“select timeout”错误，这是由于CPU的处理能力不知导致，这时也可以用视频来替代摄像头来进行实验。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;建议在HOST上安装xshell+xmanager来访问虚拟机，显示人脸检查的视频窗口必须xmanager配合xshell使用（具体安装方式不再赘述）。也可以直接在虚拟机的terminal中运行real_time_face_recognition.py，而无需安装xmanager。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;3、准备好的facenet源码并安装依赖包&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;（1）下载源码&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;cd /data&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;git clone https://github.com/davidsandberg/facenet.git&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;cd facenet&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;（2）设置PYTHONPATH&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;sudo vi ~/.bashrc&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;在文件最后添加：&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;export PYTHONPATH =/data/facenet/src&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;source ~/.bashrc&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;（3）安装依赖包&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;workon tfenv&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;pip install -U –-upgrade pip&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;pip install -U h5py matplotlib==2.2.3 Pillow requests psutil opencv-python&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;（4）准备源码&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;为了跟tensorflow r1.12兼容，需要需要facenet.py源码中&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;create_input_pipeline函数，在函数的第一行添加&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;with tf.name_scope(&quot;tempscope&quot;):&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;添加后，别忘了后面的代码缩减哦。&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;4、准备人脸检测模型&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;直接从https://drive.google.com/file/d/1EXPBSXwTaqrSC0OhUdXNmKSh9qJUQ55-/view下载已经训练好的模型20180402-114759，国内需要FQ才能下载，不FQ大概率可以搜索从国内某些网盘上下载。文件大约4GB，建议用迅雷等工具下载。文件解压到/data/models目录,解压后文件如下:&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;20180402-114759.pb&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;model-20180402-114759.ckpt-275.data-00000-of-00001&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;model-20180402-114759.ckpt-275.index&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;model-20180402-114759.meta&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;5、训练人脸识别分类模型&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;（1）从http://vis-www.cs.umass.edu/lfw/lfw.tgz下载LFW数据集到/data/datasets目录&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;cd /data/datasets&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;mkdir -p lfw/raw&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;tar xvf lfw.tgz -C lfw/raw --strip-components=1&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;(2) 训练分类模型&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt; 对齐LFW 数据集：&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;workon tfenv&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;cd /data/facenet&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;for N in {1..4}; do \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;python src/align/align_dataset_mtcnn.py \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;/data/datasets/lfw/raw \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;/data/datasets/lfw/lfw_mtcnnpy_160 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--image_size 160 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--margin 32 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--random_order \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--gpu_memory_fraction 0.25 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;&amp;amp; done&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;训练分类模型：&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;python src/classifier.py TRAIN \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;/data/datasets/lfw/lfw_mtcnnpy_160 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;/data/models/20180402-114759/20180402-114759.pb \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;/data/models/lfw_classifier.pkl \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--batch_size 1000 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--min_nrof_images_per_class 40 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--nrof_train_images_per_class 35 \&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;--use_split_dataset&lt;/p&gt;
&lt;p&gt;四、运行人脸识别&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;配置检测模型和分类模型，修改face.py文件&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;facenet_model_checkpoint = os.path.dirname(__file__) + &quot;/../model_checkpoints/20170512-110547&quot;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;classifier_model = os.path.dirname(__file__) + &quot;/../model_checkpoints/my_classifier_1.pkl&quot;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;为：&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;facenet_model_checkpoint = &quot;/data/models/20180402-114759&quot;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;classifier_model =&quot;/data/models/lfw_classifier.pkl&quot;&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;运行人脸识别代码了！祝你好运！&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;workon tfenv&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;cd /data/facenet/contributed&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;python real_time_face_recognition.py&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;到这里，如果顺利的话，你应该看到小视频窗口了，人脸会被框出来，并在旁边显示识别的人名。识别出的人名肯定是不准确的，让人脸识别更高效更准确，并能在生产实践中应用，建议仔细研读facenet的源码和wifi:&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;https://github.com/davidsandberg/facenet/&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt;https://github.com/davidsandberg/facenet/wiki&lt;/p&gt;
&lt;p align=&quot;left&quot;&gt; &lt;/p&gt;
</description>
<pubDate>Sat, 10 Nov 2018 15:36:00 +0000</pubDate>
<dc:creator>dskit</dc:creator>
<og:description>一、本文目标 利用facenet源码实现从摄像头读取视频，实时检测并识别视频中的人脸。换句话说：把facenet源码中contributed目录下的real_time_face_recognition</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/dskit/p/9941079.html</dc:identifier>
</item>
<item>
<title>Docker Client源码分析（一） - 情猿</title>
<link>http://www.cnblogs.com/langshiquan/p/9933624.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/langshiquan/p/9933624.html</guid>
<description>&lt;h2 id=&quot;主要内容&quot;&gt;主要内容：&lt;/h2&gt;
&lt;p&gt;Docker Client在Docker中的定位，以及Docker Client源码的初步分析。&lt;br/&gt;本文选取Docker拆分为DockerCE（社区版）和DockerEE（企业版）之后的Docker-CE的第一个稳定版本v17.06.0-ce。&lt;br/&gt;&lt;a href=&quot;https://github.com/docker/docker-ce&quot; class=&quot;uri&quot;&gt;https://github.com/docker/docker-ce&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;docker背景&quot;&gt;Docker背景：&lt;/h2&gt;
&lt;p&gt;Docker Client是绝大部分用户使用Docker的入口，例如一次docker pull请求，需要经过很多层调用，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468540/201811/1468540-20181110004018941-115839007.png&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Client创建一个docker pull的请求，发送给Deamon的http server，server接受之后通过Router路由到相应的的Handler，  Handler便会创建一个PostImageCreate的Job交给Engine执行（不同的Job功能不同，需要的底层功能也不同）， 该Job会先去Docker Registory拉取镜像，之后交给Graph Dirver，Graph Dirver再将镜像存储到本地的roootfs中。    &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上述过程中，我们发现Client不做任何的操作，而是构建请求，发送给Deamon执行。&lt;br/&gt;那么我们会想，如果绕过Client，是否也可以向Deamon发送请求呢？答案是可以的，如下图：&lt;br/&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468540/201811/1468540-20181110004826455-13420929.png&quot;/&gt;&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;Client可以访问Deamon的API，那么用户也可以直接访问Deamon的API，而且为了方便二次开发，Docker同时提供了很多语言的SDK供开发者选择，例如Docker Client for python。  &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;下面我们正式进入Client。&lt;/p&gt;
&lt;h2 id=&quot;docker-client为什么选择了golang&quot;&gt;Docker Client为什么选择了golang？&lt;/h2&gt;
&lt;p&gt;这个问题其实准确的说是“为什么Docker会选择golang来开发”，go有很多优点，下面我们细数一下&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;python的那种简洁
&lt;ul&gt;&lt;li&gt;行末不强制分号&lt;/li&gt;
&lt;li&gt;支持多值返回&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;c的那种高效
&lt;ul&gt;&lt;li&gt;编译性语言&lt;/li&gt;
&lt;li&gt;保留指针（被称为21世纪的C语言）&lt;/li&gt;
&lt;li&gt;极少的运行时依赖（部署简单）&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;java的那种安全
&lt;ul&gt;&lt;li&gt;内存管理（垃圾回收）&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;语言层面支持并发
&lt;ul&gt;&lt;li&gt;关键字支持：go select chan&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;博主认为Docker创建之初，最重要的一点是部署简单，运行时依赖极少，仅仅依赖glibc，它是linux最底层的API，几乎其他任何库都会依赖于glibc。Docker是部署到用户的机器上的，最重要的是通用性，所以运行时依赖越少越好。此些恰恰原因也是Docker Client使用golang开发的主要原因。&lt;br/&gt;有的读者会想，我没学习过golang，会不会影响我学习Docker Client源码？其实语言只是一种工具，编程语言大同小异，简单看看语法，就能够阅读个大概，博主写了一些Java于golang针对相同需求的不同实现的例子，简单查看过后，便可以进行接下来的阅读。&lt;a href=&quot;https://www.cnblogs.com/langshiquan/p/9937866.html&quot; class=&quot;uri&quot;&gt;https://www.cnblogs.com/langshiquan/p/9937866.html&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;docker-client执行流程&quot;&gt;Docker Client执行流程&lt;/h2&gt;
&lt;h3 id=&quot;一.initialization阶段&quot;&gt;一.initialization阶段&lt;/h3&gt;
&lt;ol&gt;&lt;li&gt;初始化日志配置&lt;br/&gt;&lt;/li&gt;
&lt;li&gt;初始化DockerCli实例，填充Stdin，Stdout，Stderr&lt;/li&gt;
&lt;li&gt;初始化Command根命令并组装
&lt;ul&gt;&lt;li&gt;添加Help等通用配置&lt;/li&gt;
&lt;li&gt;添加所有支持的子命令的配置&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;具体见下面的代码：&lt;/p&gt;
&lt;h5 id=&quot;client入口componentsclicmddockerdocker.go&quot;&gt;Client入口:components/cli/cmd/docker/docker.go&lt;/h5&gt;
&lt;pre class=&quot;go&quot;&gt;
&lt;code&gt;package main
// import省略
func main() {
    // Set terminal emulation based on platform as required.
        // 获取Stdin，Stdout，Stderr
    stdin, stdout, stderr := term.StdStreams()
        // 1.初始化日志配置
    logrus.SetOutput(stderr)
        //  2.初始化DockerCli实例，填充Stdin，Stdout，Stderr
    dockerCli := command.NewDockerCli(stdin, stdout, stderr)
        // 3.初始化Command根命令并组装
    cmd := newDockerCommand(dockerCli)
        // 执行，判断err结果
    if err := cmd.Execute(); err != nil {
        if sterr, ok := err.(cli.StatusError); ok {
            if sterr.Status != &quot;&quot; {
                fmt.Fprintln(stderr, sterr.Status)
            }
            // StatusError should only be used for errors, and all errors should
            // have a non-zero exit status, so never exit with 0
            if sterr.StatusCode == 0 {
                os.Exit(1)
            }
            os.Exit(sterr.StatusCode)
        }
        fmt.Fprintln(stderr, err)
        os.Exit(1)
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上面提到了一个DockerCli和Command二个对象，接下来对其进行一些说明&lt;/p&gt;
&lt;h5 id=&quot;dockercli数据结构&quot;&gt;DockerCli数据结构&lt;/h5&gt;
&lt;pre&gt;
&lt;code&gt;// DockerCli is an instance the docker command line client.  
// 此结构体是核心的结构体，每个子命令的执行都会用到它
type DockerCli struct {   
    configFile         *configfile.ConfigFile    // ~/.docker/config.json文件的配置信息
    in                    *InStream                   // Stdin        
    out                  *OutStream                // Stdout
    err                   io.Writer                     // Stderr
    client               client.APIClient            //  用于与deamon通讯（重要）
    defaultVersion  string                          //  版本信息
    server              ServerInfo                    // ServerInfo信息
                                HasExperimental bool    // 是否开启试验性功能
                                OSType          string     // 操作系统类型
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;command数据结构&quot;&gt;Command数据结构&lt;/h5&gt;
&lt;pre&gt;
&lt;code&gt;// Command is just that, a command for your application.
type Command struct{
    Use string    
// Use is the one-line usage message. 代表的命令，例如image
    Short string     
// Short is the short description shown in the 'help' output.  help的简单信息
    PersistentPreRunE func(cmd *Command, args []string) error   
// PersistentPreRunE: PersistentPreRun but returns an error.    // 在运行前执行
    RunE func(cmd *Command, args []string) error    
// RunE: Run but returns an error.    // 真正的运行
    commands []*Command    
// commands is the list of commands supported by this program.    // 支持的子命令集合
    parent *Command  
// parent is a parent command for this command.        // 父命令
    Args PositionalArgs
// Expected arguments  举例：docker pull tomcat   此次的tomcat对应此处
    flags *flag.FlagSet   
// flags is full set of flags.            // 参数的集合
// 省略其他不常用的属性
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h5 id=&quot;command组装代码&quot;&gt;Command组装代码：&lt;/h5&gt;
&lt;pre&gt;
&lt;code&gt;对于docker组装子Command：components/cli/command/commands/commands.go
对于docker image组装子Command：components/cli/command/images/cmd.go&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;二.prerun阶段&quot;&gt;二.PreRun阶段&lt;/h3&gt;
&lt;p&gt;Client的生命周期很短，用户按下回车的时候开始，运行完便结束，Client的声明周期绝大程度上绑定在命令行框架（Docker Client使用的命令行框架是cobra）之上，所以几乎所有的命令行工具，都会存在这几个过程。&lt;br/&gt;PreRun阶段无非做一些参数解析、全局的配置等等，接下来，我们看看Docker Client在此阶段都做了哪些事情。&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;解析参数&lt;/li&gt;
&lt;li&gt;Client级别的配置
&lt;ul&gt;&lt;li&gt;是否开启debug&lt;/li&gt;
&lt;li&gt;设置日志级别&lt;/li&gt;
&lt;li&gt;配置文件位置&lt;/li&gt;
&lt;li&gt;版本号&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;初始化DockerCli上下文（上一步实例化，但是并不完整，一些属性依赖与用户的输入参数）
&lt;ul&gt;&lt;li&gt;初始化DockerCli.APIClient&lt;/li&gt;
&lt;li&gt;初始化Server的基本信息（操作系统类型等）&lt;/li&gt;
&lt;li&gt;初始化配置文件位置&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;校验命令
&lt;ul&gt;&lt;li&gt;版本是否支持&lt;/li&gt;
&lt;li&gt;操作系统类型是否支持&lt;/li&gt;
&lt;li&gt;实验性功能是否支持&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;pre class=&quot;go&quot;&gt;
&lt;code&gt;// components/cli/cmd/docker/docker.go
func newDockerCommand(dockerCli *command.DockerCli) *cobra.Command {
        // 绑定在根命令上的参数，即docker命令
    opts := cliflags.NewClientOptions()
    var flags *pflag.FlagSet
        // docker根命令
    cmd := &amp;amp;cobra.Command{
        Use:              &quot;docker [OPTIONS] COMMAND [ARG...]&quot;,
        Short:            &quot;A self-sufficient runtime for containers&quot;,
        SilenceUsage:     true,
        SilenceErrors:    true,
        TraverseChildren: true,
        Args:             noArgs,
        RunE: func(cmd *cobra.Command, args []string) error {
            if opts.Version {
                showVersion()
                return nil
            }
            return command.ShowHelp(dockerCli.Err())(cmd, args)
        },
                // 二、PreRun阶段的入口
        PersistentPreRunE: func(cmd *cobra.Command, args []string) error {
            // daemon command is special, we redirect directly to another binary
            if cmd.Name() == &quot;daemon&quot; {
                return nil
            }
            // flags must be the top-level command flags, not cmd.Flags()
            opts.Common.SetDefaultOptions(flags)
            dockerPreRun(opts)
                        // 3. 初始化DockerCli上下文，重要函数dockerCli.Initialize，见下面代码块
            if err := dockerCli.Initialize(opts); err != nil {
                return err
            }
                        // 4. 校验命令
            return isSupported(cmd, dockerCli)
        },
    }
    cli.SetupRootCommand(cmd)

    flags = cmd.Flags()
        // 通过传递地址，讲解析之后的参数，传递到options中
    flags.BoolVarP(&amp;amp;opts.Version, &quot;version&quot;, &quot;v&quot;, false, &quot;Print version information and quit&quot;)
    flags.StringVar(&amp;amp;opts.ConfigDir, &quot;config&quot;, cliconfig.Dir(), &quot;Location of client config files&quot;)
    opts.Common.InstallFlags(flags)

    setFlagErrorFunc(dockerCli, cmd, flags, opts)

    setHelpFunc(dockerCli, cmd, flags, opts)

    cmd.SetOutput(dockerCli.Out())
        // 加入docker deamon命令
    cmd.AddCommand(newDaemonCommand())
        // 组装所有子命令入口
    commands.AddCommands(cmd, dockerCli)

    setValidateArgs(dockerCli, cmd, flags, opts)

    return cmd
}&lt;/code&gt;
&lt;/pre&gt;
&lt;pre class=&quot;go:components/cli/cli/cli.go&quot;&gt;
&lt;code&gt;// dockerCli.Initialize函数
func (cli *DockerCli) Initialize(opts *cliflags.ClientOptions) error {
        // LoadDefaultConfigFile尝试加载默认配置文件，如果没有找到，则返回初始化的ConfigFile结构
    cli.configFile = LoadDefaultConfigFile(cli.err)

    var err error
        // 此client是向docker deamon发送请求的APIClient
    // client.APIClient是一个很大的接口，有很多函数
    cli.client, err = NewAPIClientFromFlags(opts.Common, cli.configFile)
    if tlsconfig.IsErrEncryptedKey(err) {
        var (
            passwd string
            giveup bool
        )
        passRetriever := passphrase.PromptRetrieverWithInOut(cli.In(), cli.Out(), nil)

        for attempts := 0; tlsconfig.IsErrEncryptedKey(err); attempts++ {
            // some code and comments borrowed from notary/trustmanager/keystore.go
            passwd, giveup, err = passRetriever(&quot;private&quot;, &quot;encrypted TLS private&quot;, false, attempts)
            // Check if the passphrase retriever got an error or if it is telling us to give up
            if giveup || err != nil {
                return errors.Wrap(err, &quot;private key is encrypted, but could not get passphrase&quot;)
            }

            opts.Common.TLSOptions.Passphrase = passwd
                        // NewAPIClientFromFlags creates a new APIClient from command line flags
            cli.client, err = NewAPIClientFromFlags(opts.Common, cli.configFile)
        }
    }

    if err != nil {
        return err
    }

    cli.defaultVersion = cli.client.ClientVersion()

    if ping, err := cli.client.Ping(context.Background()); err == nil {
        cli.server = ServerInfo{
            HasExperimental: ping.Experimental,
            OSType:          ping.OSType,
        }

        // since the new header was added in 1.25, assume server is 1.24 if header is not present.
        if ping.APIVersion == &quot;&quot; {
            ping.APIVersion = &quot;1.24&quot;
        }

        // if server version is lower than the current cli, downgrade
        if versions.LessThan(ping.APIVersion, cli.client.ClientVersion()) {
            cli.client.UpdateClientVersion(ping.APIVersion)
        }
    }

    return nil
}
&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;三.run阶段&quot;&gt;三.Run阶段&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;真正的具体的命令执行也很简单，Docker的Client不做任何实质性的功能，所有的请求都是发送给deamon来处理，所以做的事情很简单，具体如下&lt;/code&gt;
&lt;/pre&gt;
&lt;ol&gt;&lt;li&gt;参数处理，构建请求&lt;/li&gt;
&lt;li&gt;向Docker daemon发送请求&lt;/li&gt;
&lt;li&gt;处理响应&lt;/li&gt;
&lt;li&gt;打印结果&lt;/li&gt;
&lt;li&gt;返回状态&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;下文将以docker image list = docker images 命令为例：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// 组装的时候，会调取这个方法
func newListCommand(dockerCli command.Cli) *cobra.Command {
    cmd := *NewImagesCommand(dockerCli)
    cmd.Aliases = []string{&quot;images&quot;, &quot;list&quot;}
    cmd.Use = &quot;ls [OPTIONS] [REPOSITORY[:TAG]]&quot;
    return &amp;amp;cmd
}

// NewImagesCommand creates a new `docker images` command
func NewImagesCommand(dockerCli command.Cli) *cobra.Command {
        // images命令需要的所有参数，不同的命令的options不同
    options := imagesOptions{filter: opts.NewFilterOpt()}

    cmd := &amp;amp;cobra.Command{
        Use:   &quot;images [OPTIONS] [REPOSITORY[:TAG]]&quot;,
        Short: &quot;List images&quot;,
        Args:  cli.RequiresMaxArgs(1),
        RunE: func(cmd *cobra.Command, args []string) error {
            if len(args) &amp;gt; 0 {
                options.matchName = args[0]
            }
                        // 真正的执行方法，见下
            return runImages(dockerCli, options)
        },
    }

    flags := cmd.Flags()
        // 将参数解析的结果，放到options
    flags.BoolVarP(&amp;amp;options.quiet, &quot;quiet&quot;, &quot;q&quot;, false, &quot;Only show numeric IDs&quot;)
    flags.BoolVarP(&amp;amp;options.all, &quot;all&quot;, &quot;a&quot;, false, &quot;Show all images (default hides intermediate images)&quot;)
    flags.BoolVar(&amp;amp;options.noTrunc, &quot;no-trunc&quot;, false, &quot;Don't truncate output&quot;)
    flags.BoolVar(&amp;amp;options.showDigests, &quot;digests&quot;, false, &quot;Show digests&quot;)
    flags.StringVar(&amp;amp;options.format, &quot;format&quot;, &quot;&quot;, &quot;Pretty-print images using a Go template&quot;)
    flags.VarP(&amp;amp;options.filter, &quot;filter&quot;, &quot;f&quot;, &quot;Filter output based on conditions provided&quot;)

    return cmd
}

// 真正的执行方法
func runImages(dockerCli command.Cli, options imagesOptions) error {
        // go语言的context包的功能
    ctx := context.Background()
        
        // 获取用户输入--fiter的内容
    filters := options.filter.Value()
        // 用户输入的arg
    if options.matchName != &quot;&quot; {
        filters.Add(&quot;reference&quot;, options.matchName)
    }
        
    listOptions := types.ImageListOptions{
                // 用户输入的-a参数
        All:     options.all,
        Filters: filters,
    }
        // 通过此Client访问deamon，拿到镜像列表
    images, err := dockerCli.Client().ImageList(ctx, listOptions)
    if err != nil {
        return err
    }
        // 用户输入的--format参数
        format := options.format
        
    if len(format) == 0 {
                // 如果无用户输入的format，则读取配置文件中的配置，且非静默模式（-q）,否则使用静默模式的format
        if len(dockerCli.ConfigFile().ImagesFormat) &amp;gt; 0 &amp;amp;&amp;amp; !options.quiet {
            format = dockerCli.ConfigFile().ImagesFormat
        } else {
            format = formatter.TableFormatKey
        }
    }

    imageCtx := formatter.ImageContext{
        Context: formatter.Context{
                        // 输出配置
            Output: dockerCli.Out(),
                        // 格式信息
            Format: formatter.NewImageFormat(format, options.quiet, options.showDigests),
                        // 用户输入的--no-trunc信息，意思为全量打印
            Trunc:  !options.noTrunc,
        },
                // 用户输入的--digests 是否显示摘要信息
        Digest: options.showDigests,
    }
        // 具体的格式化打印细节暂略
    return formatter.ImageWrite(imageCtx, images)
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h2 id=&quot;docker-cli架构总结&quot;&gt;Docker Cli架构总结：&lt;/h2&gt;
&lt;pre&gt;
&lt;code&gt;此处主要是分析如何组装如此多的命令，是一个大体的图示。&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1468540/201811/1468540-20181110232232914-1846425477.png&quot;/&gt;&lt;/p&gt;
</description>
<pubDate>Sat, 10 Nov 2018 15:25:00 +0000</pubDate>
<dc:creator>情猿</dc:creator>
<og:description>本文旨在对Docker Client有一初步源码以及设计上的分析</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/langshiquan/p/9933624.html</dc:identifier>
</item>
<item>
<title>Go基础系列：Go接口 - 骏马金龙</title>
<link>http://www.cnblogs.com/f-ck-need-u/p/9940845.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/f-ck-need-u/p/9940845.html</guid>
<description>&lt;h2 id=&quot;接口用法简介&quot;&gt;接口用法简介&lt;/h2&gt;
&lt;p&gt;接口(interface)是一种类型，用来定义行为(方法)。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;type Namer interface {
    my_method1()
    my_method2(para)
    my_method3(para) return_type
    ...
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;但这些行为不会在接口上直接实现，而是需要用户自定义的方法来实现。所以，在上面的Namer接口类型中的方法&lt;code&gt;my_methodN&lt;/code&gt;都是没有实际方法体的，仅仅只是在接口Namer中存放这些方法的签名(&lt;code&gt;签名 = 函数名+参数(类型)+返回值(类型)&lt;/code&gt;)。&lt;/p&gt;
&lt;p&gt;当用户自定义的类型实现了接口上定义的这些方法，那么自定义类型的值(也就是实例)可以赋值给接口类型的值(也就是接口实例)。这个赋值过程使得接口实例中保存了用户自定义类型实例。&lt;/p&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;package main

import (
    &quot;fmt&quot;
)

// Shaper 接口类型
type Shaper interface {
    Area() float64
}

// Circle struct类型
type Circle struct {
    radius float64
}

// Circle类型实现Shaper中的方法Area()
func (c *Circle) Area() float64 {
    return 3.14 * c.radius * c.radius
}

// Square struct类型
type Square struct {
    length float64
}

// Square类型实现Shaper中的方法Area()
func (s *Square) Area() float64 {
    return s.length * s.length
}

func main() {
    // Circle类型的指针类型实例
    c := new(Circle)
    c.radius = 2.5

    // Square类型的值类型实例
    s := Square{3.2}

    // Sharpe接口实例ins1，它只能是值类型的
    var ins1 Shaper
    // 将Circle实例c赋值给接口实例ins1
    // 那么ins1中就保存了实例c
    ins1 = c
    fmt.Println(ins1)

    // 使用类型推断将Square实例s赋值给接口实例
    ins2 := s
    fmt.Println(ins2)
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上面将输出：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;&amp;amp;{2.5}
{3.2}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;从上面输出结果中可以看出，两个接口实例ins1和ins2被分别赋值后，&lt;strong&gt;分别保存了指针类型的Circle实例c和值类型的Square实例s&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;另外，从上面赋值ins1和ins2的赋值语句上看：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ins1 = c
ins2 := s&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;是否说明接口实例ins就是自定义类型的实例？实际上接口是指针类型(指向什么见下文)。这个时候，自定义类型的实例c、s称为具体实例，ins实例是抽象实例，因为ins接口中定义的行为(方法)并没有具体的行为模式，而c、s中的行为是具体的。&lt;/p&gt;
&lt;p&gt;因为接口实例ins也是自定义类型的实例，所以&lt;strong&gt;当接口实例中保存了自定义类型的实例后，就可以直接从接口上调用它所保存的实例的方法&lt;/strong&gt;。例如：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;fmt.Println(ins1.Area())   // 输出19.625
fmt.Println(ins2.Area())   // 输出10.24&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这里&lt;code&gt;ins1.Area()&lt;/code&gt;调用的是Circle类型上的方法Area()，&lt;code&gt;ins2.Area()&lt;/code&gt;调用的则是Square类型上的方法Area()。这说明&lt;strong&gt;Go的接口可以实现面向对象中的多态：可以按需调用名称相同、功能不同的方法&lt;/strong&gt;。&lt;/p&gt;
&lt;h2 id=&quot;接口实例中存的是什么&quot;&gt;接口实例中存的是什么&lt;/h2&gt;
&lt;p&gt;前面说了，接口类型是指针类型，但是它到底存放了什么东西？&lt;/p&gt;
&lt;p&gt;接口类型的数据结构是2个指针，占用2个机器字长。&lt;/p&gt;
&lt;p&gt;当将类型实例&lt;code&gt;c&lt;/code&gt;赋值给接口实例&lt;code&gt;ins1&lt;/code&gt;后，用&lt;code&gt;println()&lt;/code&gt;函数输出ins1和c，比较它们的地址：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;println(ins1)
println(c)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;输出结果：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;(0x4ceb00,0xc042068058)
0xc042068058&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;从结果中可以看出，接口实例中包含了两个地址，其中第二个地址和类型实例c的地址是完全相同的。而第二个地址&lt;code&gt;c&lt;/code&gt;是Circle的指针类型实例，所以ins中的第二个值也是指针。&lt;/p&gt;
&lt;p&gt;ins中的第一个是指针是什么？它所指向的是一个内部表结构iTable，这个Table中包含两部分：第一部分是实例c的类型信息，也就是&lt;code&gt;*Circle&lt;/code&gt;，第二部分是这个类型(Circle)的方法集，也就是Circle类型的所有方法(此示例中Circle只定义了一个方法Area())。&lt;/p&gt;
&lt;p&gt;所以，如图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/733013/201811/733013-20181101154533125-1219921796.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;注意，上图中的实例c是指针，是指针类型的Circle实例。&lt;/p&gt;
&lt;p&gt;对于值类型的Square实例&lt;code&gt;s&lt;/code&gt;，ins2保存的内容则如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/733013/201811/733013-20181101155519094-2105345990.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;实际上接口实例中保存的内容，在反射(reflect)中体现的淋漓尽致，reflect所有的一切都离不开接口实例保存的内容。&lt;/p&gt;
&lt;h2 id=&quot;方法集method-set规则&quot;&gt;方法集(Method Set)规则&lt;/h2&gt;
&lt;p&gt;官方手册对Method Set的解释：&lt;a href=&quot;https://golang.org/ref/spec#Method_sets&quot; class=&quot;uri&quot;&gt;https://golang.org/ref/spec#Method_sets&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;实例的method set决定了它所实现的接口，以及通过receiver可以调用的方法。&lt;/p&gt;
&lt;p&gt;方法集是类型的方法集合，对于非接口类型，&lt;strong&gt;每个类型都分两个Method Set：值类型实例是一个Method Set，指针类型的实例是另一个Method Set&lt;/strong&gt;。两个Method Set由不同receiver类型的方法组成：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;实例的类型       receiver
--------------------------------------
 值类型:T       (T Type)
 指针类型:*T    (T Type)或(T *Type)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;也就是说：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;值类型的实例的Method Set只由值类型的receiver&lt;code&gt;(T Type)&lt;/code&gt;组成&lt;/strong&gt;&lt;br/&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;指针类型的实例的Method Set由值类型和指针类型的receiver共同组成，即&lt;code&gt;(T Type)&lt;/code&gt;和&lt;code&gt;(T *Type)&lt;/code&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;这是什么意思呢？从receiver的角度去考虑：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;receiver        实例的类型
---------------------------
(T Type)        T 或 *T
(T *Type)       *T&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上面的意思是：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;&lt;strong&gt;如果某类型实现接口的方法的receiver是&lt;code&gt;(T *Type)&lt;/code&gt;类型的，那么只有指针类型的实例&lt;code&gt;*T&lt;/code&gt;才算是实现了这个接口&lt;/strong&gt;&lt;br/&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;如果某类型实现接口的方法的receiver是&lt;code&gt;(T Type)&lt;/code&gt;类型的，那么值类型的实例&lt;code&gt;T&lt;/code&gt;和指针类型的实例&lt;code&gt;*T&lt;/code&gt;都算实现了这个接口&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;举个例子。接口方法Area()，自定义类型Circle有一个receiver类型为&lt;code&gt;(c *Circle)&lt;/code&gt;的Area()方法时，说明实现了接口的方法，但只有Circle实例的类型为指针类型时，这个实例才算是实现了接口，才能赋值给接口实例，才能当作一个接口参数。如下：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;package main

import &quot;fmt&quot;

// Shaper 接口类型
type Shaper interface {
    Area() float64
}

// Circle struct类型
type Circle struct {
    radius float64
}

// Circle类型实现Shaper中的方法Area()
// receiver类型为指针类型
func (c *Circle) Area() float64 {
    return 3.14 * c.radius * c.radius
}

func main() {
    // 声明2个接口实例
    var ins1, ins2 Shaper

    // Circle的指针类型实例
    c1 := new(Circle)
    c1.radius = 2.5
    ins1 = c1
    fmt.Println(ins1.Area())

    // Circle的值类型实例
    c2 := Circle{3.0}
    // 下面的将报错
    ins2 = c2
    fmt.Println(ins2.Area())
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;报错结果：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;cannot use c2 (type Circle) as type Shaper
in assignment:
        Circle does not implement Shaper (Area method has
pointer receiver)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;它的意思是，Circle值类型的实例c2没有实现Share接口的Area()方法，它的Area()方法是指针类型的receiver。换句话说，&lt;strong&gt;值类型的c2实例的Method Set中没有receiver类型为指针的Area()方法&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;所以，上面应该改成：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;ins2 = &amp;amp;c2&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;再声明一个方法，它的receiver是值类型的。下面的代码一切正常。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;type Square struct{
    length float64
}

// 实现方法Area()，receiver为值类型
func (s Square) Area() float64{
    return s.length * s.length
}

func main() {
    var ins3,ins4 Shaper

    // 值类型的Square实例s1
    s1 := Square{3.0}
    ins3 = s1
    fmt.Println(ins3.Area())

    // 指针类型的Square实例s2
    s2 := new(Square)
    s2.length=4.0
    ins4 = s2
    fmt.Println(ins4.Area())
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;很经常的，我们会直接使用推断类型的赋值方式(如&lt;code&gt;ins2 := c2&lt;/code&gt;)将实例赋值给一个变量，我们以为这个变量是接口的实例，但实际上并不一定。正如上面值类型的c2赋值给ins2，这个ins2将是从c2数据结构拷贝而来的另一个副本数据结构，并非接口实例，但这时通过ins2也能调用Area()方法：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;c2 = Circle{3.2}
ins2 := c2
fmt.Println(ins2.Area())  // 正常执行&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;之所以能调用，是因为Circle类型中有Area()方法，但这不是通过接口去调用的。&lt;/p&gt;
&lt;p&gt;所以，&lt;strong&gt;在使用接口的时候，应当尽量使用var先声明接口类型的实例，再将类型的实例赋值给接口实例(如&lt;code&gt;var ins1,ins2 Shaper&lt;/code&gt;)，或者使用&lt;code&gt;ins1 := Shaper(c1)&lt;/code&gt;的方式&lt;/strong&gt;。这样，如果赋值给接口实例的类型实例没有实现该接口，将会报错。&lt;/p&gt;
&lt;p&gt;但是，为什么要限制指针类型的receiver只能是指针类型的实例的Method Set呢？&lt;/p&gt;
&lt;p&gt;看下图，假如指针类型的receiver可以组成值类型实例的Method Set，那么接口实例的第二个指针就必须找到值类型的实例的地址。但实际上，并非所有值类型的实例都能获取到它们的地址。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/733013/201811/733013-20181101155519094-2105345990.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;哪些值类型的实例找不到地址？最常见的是那些简单数据类型的别名类型，如果匿名生成它们的实例，它们的地址就会被Go彻底隐藏，外界找不到这个实例的地址。&lt;/p&gt;
&lt;p&gt;例如：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;package main

import &quot;fmt&quot;

type myint int

func (m *myint) add() myint {
    return *m + 1
}
func main() {
    fmt.Println(myint(3).add())
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;以下是报错信息：找不到myint(3)的地址&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;abc\abc.go:11:22: cannot call pointer method on myint(3)
abc\abc.go:11:22: cannot take the address of myint(3)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;这里的&lt;code&gt;myint(3)&lt;/code&gt;是匿名的myint实例，它的底层是简单数据类型int，&lt;code&gt;myint(3)&lt;/code&gt;的地址会被彻底隐藏，只会提供它的值对象3。&lt;/p&gt;
&lt;h2 id=&quot;普通方法和实现接口方法的区别&quot;&gt;普通方法和实现接口方法的区别&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;对于普通方法，无论是值类型还是指针类型的实例，都能正常调用，且调用时拷贝的内容都由receiver的类型决定&lt;/strong&gt;。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;func (T Type) method1   // 值类型receiver
func (T *Type) method2  // 指针类型receiver&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;strong&gt;指针类型的receiver决定了无论是值类型还是指针类型的实例，都拷贝实例的指针。值类型的receiver决定了无论是值类型还是指针类型的实例，都拷贝实例本身&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;所以，对于person数据结构：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;type person struct {}
p1 := person{}       // 值类型的实例
p2 := new(person)    // 指针类型的实例&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;p1.method1()&lt;/code&gt;和&lt;code&gt;p2.method1()&lt;/code&gt;都是拷贝整个person实例，只不过Go对待&lt;code&gt;p2.method1()&lt;/code&gt;时多一个&quot;步骤&quot;：将其解除引用。所以&lt;code&gt;p2.method1()&lt;/code&gt;等价于&lt;code&gt;(*p2).method1()&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;p1.method2()&lt;/code&gt;和&lt;code&gt;p2.method2()&lt;/code&gt;都拷贝person实例的指针，只不过Go对待&lt;code&gt;p1.method2()&lt;/code&gt;时多一个&quot;步骤&quot;：创建一个额外的引用。所以，&lt;code&gt;p1.method2()&lt;/code&gt;等价于&lt;code&gt;(&amp;amp;p1).method2()&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;而类型实现接口方法时，method set规则决定了类型实例是否实现了接口。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;receiver        实例的类型
---------------------------
(T Type)        T 或 *T
(T *Type)       *T&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;对于接口abc、接口方法method1()、method2()和结构person：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;type abc interface {
    method1
    method2
}

type person struct {}
func (T person) method1   // 值类型receiver
func (T *person) method2  // 指针类型receiver

p1 := abc(person)  // 接口变量保存值类型实例
p2 := abc(&amp;amp;person) // 接口变量保存指针类型实例&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;&lt;code&gt;p2.method1()&lt;/code&gt;、&lt;code&gt;p2.method2()&lt;/code&gt;以及&lt;code&gt;p1.method1()&lt;/code&gt;都是允许的，都会通过接口实例去调用具体person实例的方法。&lt;/p&gt;
&lt;p&gt;但&lt;code&gt;p1.method2()&lt;/code&gt;是错误的，因为method2()的receiver是指针类型的，导致p1没有实现接口abc的method2()方法。&lt;/p&gt;
&lt;h2 id=&quot;接口类型作为参数&quot;&gt;接口类型作为参数&lt;/h2&gt;
&lt;p&gt;将接口类型作为参数很常见。这时，那些实现接口的实例都能作为接口类型参数传递给函数/方法。&lt;/p&gt;
&lt;p&gt;例如，下面的myArea()函数的参数是&lt;code&gt;n Shaper&lt;/code&gt;，是接口类型。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;package main

import (
    &quot;fmt&quot;
)

// Shaper 接口类型
type Shaper interface {
    Area() float64
}

// Circle struct类型
type Circle struct {
    radius float64
}

// Circle类型实现Shaper中的方法Area()
func (c *Circle) Area() float64 {
    return 3.14 * c.radius * c.radius
}

func main() {
    // Circle的指针类型实例
    c1 := new(Circle)
    c1.radius = 2.5
    myArea(c1)
}

func myArea(n Shaper) {
    fmt.Println(n.Area())
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;上面&lt;code&gt;myArea(c1)&lt;/code&gt;是将c1作为接口类型参数传递给n，然后调用&lt;code&gt;c1.Area()&lt;/code&gt;，因为实现了接口方法，所以调用的是Circle的Area()。&lt;/p&gt;
&lt;p&gt;如果实现接口方法的receiver是指针类型的，但却是值类型的实例，将没法作为接口参数传递给函数，原因前面已经解释过了，这种类型的实例没有实现接口。&lt;/p&gt;
&lt;p&gt;以接口作为方法或函数的参数，将使得一切都变得灵活且通用，只要是实现了接口的类型实例，都可以去调用它。&lt;/p&gt;
&lt;p&gt;用的非常多的&lt;code&gt;fmt.Println()&lt;/code&gt;，它的参数也是接口，而且是变长的接口参数：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;$ go doc fmt Println
func Println(a ...interface{}) (n int, err error)&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;每一个参数都会放进一个名为a的Slice中，Slice中的元素是接口类型，而且是空接口，这使得无需实现任何方法，任何东西都可以丢带fmt.Println()中来，至于每个东西怎么输出，那就要看具体情况。&lt;/p&gt;
&lt;h2 id=&quot;接口类型的嵌套&quot;&gt;接口类型的嵌套&lt;/h2&gt;
&lt;p&gt;接口可以嵌套，嵌套的内部接口将属于外部接口，内部接口的方法也将属于外部接口。&lt;/p&gt;
&lt;p&gt;例如，File接口内部嵌套了ReadWrite接口和Lock接口。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;type ReadWrite interface {
    Read(b Buffer) bool
    Write(b Buffer) bool
}
type Lock interface {
    Lock()
    Unlock()
}
type File interface {
    ReadWrite
    Lock
    Close()
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;除此之外，类型嵌套时，如果内部类型实现了接口，那么外部类型也会自动实现接口，因为内部属性是属于外部属性的。&lt;/p&gt;
</description>
<pubDate>Sat, 10 Nov 2018 14:15:00 +0000</pubDate>
<dc:creator>骏马金龙</dc:creator>
<og:description>接口用法简介 接口(interface)是一种类型，用来定义行为(方法)。 但这些行为不会在接口上直接实现，而是需要用户自定义的方法来实现。所以，在上面的Namer接口类型中的方法 都是没有实际方法体</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/f-ck-need-u/p/9940845.html</dc:identifier>
</item>
<item>
<title>【算法】【python实现】二叉搜索树插入、删除、查找 - LiliP</title>
<link>http://www.cnblogs.com/lilip/p/9937697.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lilip/p/9937697.html</guid>
<description>&lt;h2&gt;二叉搜索树&lt;/h2&gt;

&lt;p&gt;&lt;span&gt;定义：如果一颗二叉树的每个节点对应一个关键码值，且关键码值的组织是有顺序的，例如左子节点值小于父节点值，父节点值小于右子节点值，则这棵二叉树是一棵二叉搜索树。&lt;/span&gt;&lt;/p&gt;

&lt;h3&gt;类（TreeNode）：定义二叉搜索树各个节点&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;在该类中，分别存放节点本身的值，以及其左子节点，右子节点，父节点的值。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109225440659-1880345438.png&quot; alt=&quot;&quot; width=&quot;350&quot; height=&quot;245&quot;/&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
class TreeNode(object):
    def __init__(self,val):
        self.value = val    #存值
        self.left = None    #存本节点的左子节点
        self.right = None   #存本节点的右子节点
        self.father = None  #存本节点的父节点
&lt;/pre&gt;&lt;/div&gt;

&lt;h3&gt;类（BST）：定义二叉搜索树的各种功能方法&lt;/h3&gt;
&lt;p&gt;&lt;span&gt;此类用于存放定义二叉树的插入，删除，搜索等方法。&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
class BST(object):
    def __init__(self,nodeList):
        self.root = None
        for node in nodeList:
            self.bfs_insert(node)
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;注：self.bfs_insert(node)中的bfs_insert方法在后面实现。放在构造函数中的目的是将一个列表生成一个二叉搜索树列表。&lt;/p&gt;

&lt;h4&gt;方法（bfs_insert）：实现插入功能&lt;/h4&gt;
&lt;p&gt;&lt;span&gt; 第一步：将根节点（self.root）设置成当前位置节点（cur），即从根节点开始遍历。根节点的父节点（father）初始设置为None。 &lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
def bfs_insert(self,node):
    cur = self.root      #设置当前节点为根节点
    father = None        #设置根节点的父节点为None
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;第二步：查找可以插入的位置&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;1. 当前位置节点（cur）的值与待插入节点（node）的值相等，返回-1（代表无法进行插入操作）。并将父节点（father）值修改为当前位置节点（cur），代表该节点已经遍历完成。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if cur.value == node.value:
    return -1
father = cur
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2.当前位置节点（cur）的值大于待插入节点（node）的值时，表示待插入节点（node）需继续在当前位置节点的左子树中继续查找。故把当前位置节点（cur）的左节点赋值给当前位置节点（cur），作为下一个要访问的节点对象。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if node.value &amp;lt; cur.value:
    cur = cur.left
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109230115342-984557795.png&quot; alt=&quot;&quot; width=&quot;500&quot; height=&quot;272&quot;/&gt;&lt;/p&gt;


&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109230152119-1365594958.png&quot; alt=&quot;&quot; width=&quot;520&quot; height=&quot;278&quot;/&gt;&lt;/p&gt;
&lt;p&gt;3.当前位置节点（cur）的值小于待插入节点（node）的值时，表示待插入节点（node）需继续在当前位置节点的右子树中继续查找。故把当前位置节点（cur）的右节点赋值给当前位置节点（cur），作为下一个要访问的节点对象。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if node.value &amp;gt; cur.value:
    cur = cur.right
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109230315727-1952807398.png&quot; alt=&quot;&quot; width=&quot;520&quot; height=&quot;283&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109230405682-964880542.png&quot; alt=&quot;&quot; width=&quot;520&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;第三步：找到插入位置后，将其设置为待插入值（node）的父节点&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
node.father = father
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;第四步：插入操作&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;1.父节点的值为空（即要插入的是个空二叉树），将待插入节点（node）赋值给根节点（root）。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if father == None:
    self.root = node
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;2.待插入节点（node）的值小于父节点（father）的值，将其放到父节点的左子节点&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if node.value &amp;lt;father.value:
    father.left = node
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109230629211-241111796.png&quot; alt=&quot;&quot; width=&quot;420&quot;/&gt;　&lt;/p&gt;


&lt;p&gt;3.待插入节点（node）的值大于父节点（father）的值，将其放到父节点的右子节点&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if node.value &amp;gt;father.value:
    father.right = node
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109230724875-748347930.png&quot; alt=&quot;&quot; width=&quot;420&quot;/&gt;&lt;/p&gt;

&lt;p&gt;插入功能代码汇总：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
def insert(self,node):
    father = None
    cur = self.root

    while cur != None:
         if cur.value == node.value:
                return -1
         father = cur
         if node.value &amp;lt; cur.value:
                cur = cur.left
         else:
                cur = cur.right
    node.father = father
    if father == None:
        self.root = node
    elif node.value &amp;lt; father.value:
        father.left = node
    else:
        father.right = node
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;方法（bfs）：生成二叉搜索树列表&lt;/h4&gt;
&lt;p&gt;利用队列先进先出的特性，将一个二叉搜索树存放到列表中。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
def bfs(self):
    if self.root == None:
        return None
    retList = []
    q = queue.Queue()
    q.put(self.root)                
    while q.empty() is not True:
        node = q.get()
        retList.append(node.value)
        if node.left != None:
            q.put(node.left)
        if node.right != None:
            q.put(node.right)
    return retList
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;示例：针对如下二叉搜索树，遍历存放到一个列表过程&lt;/p&gt;

&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109230955444-629101590.png&quot; alt=&quot;&quot; width=&quot;211&quot; height=&quot;178&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231022400-1118821668.png&quot; alt=&quot;&quot; width=&quot;200&quot; height=&quot;373&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231053759-210989305.png&quot; alt=&quot;&quot; width=&quot;300&quot; height=&quot;232&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;ps：蓝色：二叉树列表 retList    橙色：队列 q&lt;/span&gt;&lt;/p&gt;

&lt;h4&gt;方法（bfs_search）：实现查找功能&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;第一步：将根节点（self.root）设置成当前位置节点（cur），即从根节点开始遍历。&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
def search(self,value):
    cur = self.root
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;如果cur值不为None，执行第二步。否则执行第三步&lt;/p&gt;

&lt;p&gt;&lt;span&gt;第二步：对比要查找的值（value）与当前位置节点（cur）的值的大小&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;1. 如果当前位置节点（cur）的值等于要查找的值（value），返回当前位置节点（cur）。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if cur.value == value:
    return cur
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231303167-2074574990.png&quot; alt=&quot;&quot; width=&quot;500&quot;/&gt;&lt;/p&gt;


&lt;p&gt;2. 如果当前位置节点（cur）的值小于要查找的值（value），返回当前位置节点（cur）。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if cur.value &amp;lt; value:
    cur = cur.right
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231338247-1191328003.png&quot; alt=&quot;&quot; width=&quot;500&quot;/&gt;&lt;/p&gt;


&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231359725-1409358526.png&quot; alt=&quot;&quot; width=&quot;540&quot;/&gt;&lt;/p&gt;


&lt;p&gt;3. 如果当前位置节点（cur）的值小于要查找的值（value），返回当前位置节点（cur）。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if cur.value &amp;gt; value:
    cur = cur.left
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231502834-913333970.png&quot; alt=&quot;&quot; width=&quot;520&quot;/&gt;&lt;/p&gt;


&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231514501-1690457237.png&quot; alt=&quot;&quot; width=&quot;450&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;第三步：如果cur的值为None，返回空。即查找的二叉搜索树为空树。&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
return None
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;查找功能代码汇总：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
def search(self,value):
    cur = self.root
    while cur != None:
        if cur.value == value:
            return cur
        elif cur.value &amp;lt; value:
            cur = cur.right
        else:
            cur = cur.left
    return None
&lt;/pre&gt;&lt;/div&gt;

&lt;h4&gt;方法（bfs_delete）：实现删除功能&lt;/h4&gt;
&lt;p&gt;&lt;span&gt;第一步：将待删除节点（node）的父节点赋值给father变量。&lt;/span&gt;&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
def delete(self,node):
    father = node.father
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;第二步：判断待删除节点（node）的左子树是否为空&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;1. 待删除节点（node）的左子树为空&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if node.left == None:
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;a)     待删除节点（node）为根节点&lt;/p&gt;

&lt;p&gt;将待删除节点（node）的右子节点置为新的根节点（root），且其如果为非空，将其父节点（node.right.father）赋值为空。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if father == None:
    self.root = node.right
    if node.right != None:
        node.right.father = None
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231749121-1891261603.png&quot; alt=&quot;&quot; width=&quot;300&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231757395-861947228.png&quot; alt=&quot;&quot; width=&quot;300&quot;/&gt; &lt;/p&gt;

&lt;p&gt;b)     待删除节点（node）为其父节点的左子节点&lt;/p&gt;

&lt;p&gt;待删除节点（node）的右子节点（node.right）取代其原来的位置，成为其父节点新的左子节点（father.left）。且其右子节点（node.right）不为空，将待删除节点（node）的父节点赋值给它的父节点（node.right.father）&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if father.left == node:
    father.left = node.right
    if node.right != None:
        node.right.father = father
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231915962-1551434735.png&quot; alt=&quot;&quot; width=&quot;380&quot;/&gt;　&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109231937960-362828489.png&quot; alt=&quot;&quot; width=&quot;380&quot;/&gt;&lt;/p&gt;

&lt;p&gt;c)     待删除节点（node）为其父节点的右子节点&lt;/p&gt;

&lt;p&gt;待删除节点（node）的右子节点（node.right）取代其原来的位置，成为其父节点新的右子节点（father.right）。且其右子节点（node.right）不为空，将待删除节点（node）的父节点赋值给它的父节点（node.right.father）&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if father.right == node:
    father.right = node.right
    if node.right != None:
        node.right.father = father
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232027800-2078394872.png&quot; alt=&quot;&quot; width=&quot;350&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232042492-680310338.png&quot; alt=&quot;&quot; width=&quot;350&quot;/&gt;&lt;/p&gt;

&lt;p&gt;2. 待删除节点（node）的左子树不为空&lt;/p&gt;

&lt;p&gt;&lt;span&gt;第一步：将待删除节点（node）的右子树挂到其左子树最后一层的右子节点下&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;a)     将待删除节点的左子节点（node.left）存到临时变量tmpNode中&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
tmpNode = node.left
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232153486-1768131732.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;

&lt;p&gt;b)     递归找到node.left的最后一层右子节点&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
while tmpNode.right != None:
    tmpNode = tmpNode.right
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232242628-539641954.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt;&lt;/p&gt;

&lt;p&gt;c)     将待删节点的右子树（node.right）挂到node.left的最后一层右子节点下&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
tmpNode.right = node.right
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;d)     将node.right的父节点设置为待删节点左子树中的最后一层的右子节点&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if node.right != None:
    node.right.father = tmpNode
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232335061-1654405841.png&quot; alt=&quot;&quot; width=&quot;400&quot;/&gt;　&lt;/p&gt;

&lt;p&gt;&lt;span&gt;第二步：开始删除node&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;1.待删除节点为根节点&lt;/p&gt;

&lt;p&gt;将待删除节点的左子节点（node.left）设置为根节点（self.root），并将其父节点设置为空。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if father == None:
    self.root = node.left
    node.left.father = None
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232429398-238820420.png&quot; alt=&quot;&quot; width=&quot;320&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232452046-2030803002.png&quot; alt=&quot;&quot; width=&quot;320&quot;/&gt;&lt;/p&gt;


&lt;p&gt;2.待删除节点为根节点的左子节点&lt;/p&gt;

&lt;p&gt;待删除节点的左子节点（node.left）取代待删节点的位置，并将其父节点设置为待删除节点的父节点。&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if father.left == node:
    father.left = node.left
    node.left.father = father
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232546844-829478841.png&quot; alt=&quot;&quot; width=&quot;320&quot;/&gt;&lt;/p&gt;


&lt;p&gt;3. 待删除节点为根节点的右子节点&lt;/p&gt;

&lt;p&gt;待删除节点的左子节点（node.left）取代待删节点的位置，并将其父节点设置为待删除节点的父节点&lt;/p&gt;

&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
if father.right == node:
    father.right = node.left
    node.left.father = father
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232645678-1896866979.png&quot; alt=&quot;&quot; width=&quot;350&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/756585/201811/756585-20181109232710070-170100898.png&quot; alt=&quot;&quot; width=&quot;350&quot;/&gt;&lt;/p&gt;

&lt;p&gt;删除功能代码汇总：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
def delete(self,node):
    father = node.father
    if node.left == None:
        if father == None:
            self.root = node.right
            if node.right != None:
                node.right.father = None
        elif father.left == node:
            father.left = node.right
            if node.right != None:
                node.right.father = father
        else:
            father.right = node.right
            if node.right != None:
                node.right.father = father
        return 'delete successfully'
    tmpNode = node.left
    while tmpNode.right != None:
        tmpNode = tmpNode.right

    tmpNode.right = node.right
    if node.right != None:
        node.right.father = tmpNode

    if father == None:
        self.root = node.left
        node.left.father = None
    elif father.left == node:
        father.left = node.left
        node.left.father = father
    else:
        father.right = node.left
        node.left.father = father
    node = None
    return 'delete successfully'
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;span&gt;综上，二叉搜索树代码&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;50&quot;&gt;
&lt;pre class=&quot;brush:python;gutter:true;&quot;&gt;
# encoding=utf-8
import queue

class TreeNode(object):
    def __init__(self,val):
        self.value = val
        self.left = None
        self.right = None
        self.father = None

class BST(object):
    def __init__(self,nodeList):
        self.root = None
        for node in nodeList:
            self.bfs_insert(node)

    def bfs_insert(self,node):
        father = None
        cur = self.root

        while cur != None:
            if cur.value == node.value:
                return -1
            father = cur
            if node.value &amp;lt; cur.value:
                cur = cur.left
            else:
                cur = cur.right
        node.father = father
        if father == None:
            self.root = node
        elif node.value &amp;lt; father.value:
            father.left = node
        else:
            father.right = node

    def bfs(self):
        if self.root == None:
            return None
        retList = []
        q = queue.Queue()
        q.put(self.root)
        while q.empty() is not True:
            node = q.get()
            retList.append(node.value)
            if node.left != None:
                q.put(node.left)
            if node.right != None:
                q.put(node.right)
        return retList

    def bfs_search(self,value):
        cur = self.root
        while cur != None:
            if cur.value == value:
                return cur
            elif cur.value &amp;lt; value:
                cur = cur.right
            else:
                cur = cur.left
        return None

    def bfs_delete(self,node):
        father = node.father
        if node.left == None:
            if father == None:
                self.root = node.right
                if node.right != None:
                    node.right.father = None
            elif father.left == node:
                father.left = node.right
                if node.right != None:
                    node.right.father = father
            else:
                father.right = node.right
                if node.right != None:
                    node.right.father = father
            return 'delete successfully'
        tmpNode = node.left
        while tmpNode.right != None:
            tmpNode = tmpNode.right

        tmpNode.right = node.right
        if node.right != None:
            node.right.father = tmpNode

        if father == None:
            self.root = node.left
            node.left.father = None
        elif father.left == node:
            father.left = node.left
            node.left.father = father
        else:
            father.right = node.left
            node.left.father = father
        node = None
        return 'delete successfully'

if __name__ == '__main__':
    varList = [24,34,5,4,8,23,45,35,28,6,29]
    nodeList = [TreeNode(var) for var in varList]
    bst = BST(nodeList)
    print (bst.bfs())
    node = bst.bfs_search(34)
    bst.bfs_delete(node)
    print (bst.bfs())
&lt;/pre&gt;&lt;/div&gt;


</description>
<pubDate>Sat, 10 Nov 2018 13:53:00 +0000</pubDate>
<dc:creator>LiliP</dc:creator>
<og:description>二叉搜索树 定义：如果一颗二叉树的每个节点对应一个关键码值，且关键码值的组织是有顺序的，例如左子节点值小于父节点值，父节点值小于右子节点值，则这棵二叉树是一棵二叉搜索树。 类（TreeNode）：定义</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lilip/p/9937697.html</dc:identifier>
</item>
<item>
<title>springmvc(3)注解 - MrChengs</title>
<link>http://www.cnblogs.com/Mrchengs/p/9940764.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/Mrchengs/p/9940764.html</guid>
<description>&lt;p&gt;有疑问可以参考博主其他关于spring mvc的博文&lt;/p&gt;
&lt;p&gt;此时直接进行代码的实现&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;一般的步骤：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;-加入jar包&lt;/p&gt;
&lt;p&gt;-配置DispatcherServlet&lt;/p&gt;
&lt;p&gt;-加入Spring MVC配置文件&lt;/p&gt;
&lt;p&gt;-编写请求的处理器&lt;/p&gt;
&lt;p&gt;-视图&lt;/p&gt;


&lt;p&gt;创建web工程：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110212351520-1236023302.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 加入jar包&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110212409024-192238715.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; web.xml文件&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
 &amp;lt;!-- 配置DispatcherServlet --&amp;gt;
  &amp;lt;servlet&amp;gt;
         &amp;lt;servlet-name&amp;gt;springDispatcherServlet&amp;lt;/servlet-name&amp;gt;
         &amp;lt;servlet-&lt;span&gt;class&lt;/span&gt;&amp;gt;org.springframework.web.servlet.DispatcherServlet&amp;lt;/servlet-&lt;span&gt;class&lt;/span&gt;&amp;gt;
        
         &amp;lt;!-- 配置初始化参数 --&amp;gt;
         &amp;lt;!-- 配置 DispatcherServlet 的一个初始化参数: 配置 SpringMVC 配置文件的位置和名称 --&amp;gt;
        &lt;strong&gt;&lt;em&gt; &amp;lt;!--&lt;span&gt;
            实际上也可以不通过 contextConfigLocation 来配置 SpringMVC 的配置文件, 而使用默认的.
            默认的配置文件为: &lt;/span&gt;/WEB-INF/&amp;lt;servlet-name&amp;gt;-&lt;span&gt;servlet.xml
            简单的列子:在WEB&lt;/span&gt;-INF文件夹下springDispatcherServlet-&lt;span&gt;servlet.xml，init就不需要在配置了
          &lt;/span&gt;--&amp;gt;&lt;/em&gt;&lt;/strong&gt;
         &amp;lt;init-param&amp;gt;
           &amp;lt;param-name&amp;gt;contextConfigLocation&amp;lt;/param-name&amp;gt;
           &amp;lt;param-value&amp;gt;classpath:springmvc.xml&amp;lt;/param-value&amp;gt;
         &amp;lt;/init-param&amp;gt;
         &amp;lt;load-on-startup&amp;gt;&lt;span&gt;1&lt;/span&gt;&amp;lt;/load-on-startup&amp;gt;
  &amp;lt;/servlet&amp;gt;
 
  &amp;lt;servlet-mapping&amp;gt;
         &amp;lt;servlet-name&amp;gt;springDispatcherServlet&amp;lt;/servlet-name&amp;gt;
         &amp;lt;url-pattern&amp;gt;/&amp;lt;/url-pattern&amp;gt;
  &amp;lt;/servlet-mapping&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt; springmvc.xml以及所需要的类&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110212452732-49305255.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; springmvc.xml&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&amp;lt;!-- 配置自动扫描的包 --&amp;gt;
&amp;lt;context:component-scan &lt;span&gt;base&lt;/span&gt;-package=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;com.MrChengs.A&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;&amp;lt;/context:component-scan&amp;gt;
&amp;lt;!-- 配置视图解析器 --&amp;gt;
&amp;lt;bean &lt;span&gt;class&lt;/span&gt;=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;org.springframework.web.servlet.view.InternalResourceViewResolver&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
&lt;span&gt;     &lt;strong&gt;&amp;lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;&amp;gt;&amp;lt;/property&amp;gt;
     &amp;lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&amp;gt;&amp;lt;/property&amp;gt;&lt;/strong&gt;&lt;/span&gt;
&amp;lt;/bean&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt; HelloWord.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
//自动扫描
&lt;span&gt;&lt;strong&gt;@Controller&lt;/strong&gt;&lt;/span&gt;
public class HelloWord {
     //返回值通过视图解析器解析为实际的物理逻辑视图，InternalResourceViewResolver解析器
     //&amp;lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;&amp;gt;&amp;lt;/property&amp;gt;
     //&amp;lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;&amp;gt;&amp;lt;/property&amp;gt;
     //通过前缀    prefix + 返回值  + 后缀
     //   ==  /WEB-INF/views/  + success + .jsp
     
    //使用注解来映射请求url
     &lt;span&gt;&lt;strong&gt;@RequestMapping(&quot;/helloword&quot;)&lt;/strong&gt;&lt;/span&gt;
     public String say(){
           System.out.println(&quot;hello&quot;);
           return &quot;success&quot;;
     }
}
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;这里说明需要在路径下建立相关的 文件以及路径：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110212626704-1509145739.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;success.jsp&lt;/p&gt;
&lt;p&gt;主要用于成功后的显示&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&amp;lt;body&amp;gt;
      &amp;lt;h4&amp;gt;success&amp;lt;/h4&amp;gt;
&amp;lt;/body&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;在index.jsp&lt;/p&gt;
&lt;p&gt;注意路径在href里面&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
  &amp;lt;body&amp;gt;
           &amp;lt;a href=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;helloword&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;helloword&amp;lt;/a&amp;gt;
  &amp;lt;/body&amp;gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt; 得到：注意看请求的url&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110212743028-1434170903.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110212724275-1735429023.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;hr/&gt;
&lt;p&gt;&lt;span&gt;@RequestMapping&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt;Spring MVC 使用@RequestMapping注解为控制器指定可以处理哪些URL请求&lt;/p&gt;
&lt;p&gt;-&amp;gt;在控制器的&lt;span&gt;类定义及方法&lt;/span&gt;出都可以标注&lt;/p&gt;

&lt;p&gt;--&amp;gt;类定义处：提供初步的请求映射信息。相对于WEB应用的根目录&lt;/p&gt;
&lt;p&gt;--&amp;gt;方法处：提供进一步的细分映射信息，相对于类定义处的URL&lt;/p&gt;
&lt;p&gt;                   若类定义处未标注@RequestMapping，则方法处标记的URL相对于WEB应用的根目录&lt;/p&gt;

&lt;p&gt;--&amp;gt;DispatcherServlet截获请求后，就通过控制器上 @RequestMapping 提供的映射信息确定请求对应的方法&lt;/p&gt;

&lt;p&gt;测试在类定义附加方法处&lt;/p&gt;

&lt;div&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110212827397-1420686682.png&quot; alt=&quot;&quot;/&gt;
&lt;/div&gt;
&lt;p&gt;TestRequestMapping.java&lt;/p&gt;
&lt;p&gt;此时的路径是：类定义+方法&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
&lt;span&gt;@Controller
&lt;span&gt;@RequestMapping(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;/springmvc&quot;)
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; TestRequestMapping {

    &lt;span&gt; @RequestMapping(&lt;/span&gt;&lt;/span&gt;&lt;span&gt;&quot;/RequestMapping&quot;)
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String RequestMapping(){
           System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RequestMapping&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
           &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
     }
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;在index,jsp中：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&amp;lt;a href=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;springmvc/RequestMapping&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;testMethod&amp;lt;/a&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; 在运行之后点击超链接，控制台会显示，主要看路径：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110213226783-2094903181.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 具体可看图的解释：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110213259641-1274041233.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;hr/&gt;

&lt;p&gt;&lt;span&gt;映射请求参数、请求方法或请求头&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;-&amp;gt;@RequestMapping 除了可以使用&lt;span&gt;请求 URL&lt;/span&gt; 映射请求外，&lt;/p&gt;
&lt;p&gt;   &lt;span&gt; 还可以使用请求方法、请求参数及请求头映射请求&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;-&amp;gt;@RequestMapping 的 value、method、params 及 heads&lt;/p&gt;
&lt;p&gt;    分别表示&lt;span&gt;请求 URL、请求方法、请求参数及请求头的映射条&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;    件&lt;/span&gt;，他们之间是与的关系，联合使用多个条件可让请求映射&lt;/p&gt;
&lt;p&gt;    更加精确化&lt;/p&gt;

&lt;p&gt;-&amp;gt;&lt;span&gt;params&lt;/span&gt; 和 &lt;span&gt;headers&lt;/span&gt;支持简单的表达式：&lt;/p&gt;
&lt;p&gt;– -param1: 表示请求必须包含名为 param1 的请求参数&lt;/p&gt;
&lt;p&gt;– -!param1: 表示请求不能包含名为 param1 的请求参数&lt;/p&gt;
&lt;p&gt;– -param1 != value1: 表示请求包含名为 param1 的请求参数，但其值&lt;/p&gt;
&lt;p&gt;     不能为 value1&lt;/p&gt;
&lt;p&gt;– -{“param1=value1”, “param2”}: 请求必须包含名为 param1 和param2&lt;/p&gt;
&lt;p&gt;     的两个请求参数，且 param1 参数的值必须为 value1&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;method:&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TestRequestMapping.java&lt;/p&gt;
&lt;p&gt;可以为post,get......&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;34&quot;&gt;
&lt;pre&gt;
     @RequestMapping(value=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/RequestMethod&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;,method=&lt;span&gt;org.springframework.web.bind.annotation.&lt;span&gt;&lt;strong&gt;RequestMethod.POST&lt;/strong&gt;&lt;/span&gt;)
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String RequestMethod(){
           System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;RequestMethod&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;);
           &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
     }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;index.jsp中：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
 &amp;lt;form action=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;springmvc/RequestMethod&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; method=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;post&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
                &amp;lt;input type=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;submit&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; value=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;submit&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;
           &amp;lt;/form&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;点击运行之后的按钮：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;如果此时强制使用get会报错&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110213534543-1462740845.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt; params&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;TestRequestMapping.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
     @RequestMapping(value=&quot;/paramsAndHeaders&quot;,
    &lt;span&gt; params={&quot;user&quot;,&quot;age!=20&quot;}&lt;/span&gt;)
     public String ParamesHeaders(){
           return &quot;success&quot;;
     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;index.jsp&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&amp;lt;a href=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;springmvc/paramsAndHeaders&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;paramsAndHeaders&amp;lt;/a&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110213636752-1819063771.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;此时user属性不写或者age=20，都会报404错误&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt; header：&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110213700058-2073128672.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;可以使用params和header更加精确的映射请求，&lt;/p&gt;
&lt;p&gt;params和headers支持加单的表达式&lt;/p&gt;

&lt;hr/&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;使用 @RequestMapping 映射请求&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Ant 风格资源地址支持 3 种匹配符：&lt;/p&gt;

&lt;p&gt;– ?：匹配文件名中的一个字符&lt;/p&gt;
&lt;p&gt;– *：匹配文件名中的任意字符&lt;/p&gt;
&lt;p&gt;– **：** 匹配多层路径&lt;/p&gt;
&lt;p&gt;@RequestMapping 还支持 Ant 风格的 URL：&lt;/p&gt;
&lt;p&gt;&lt;span&gt;/user/*/createUser: 匹配&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;      /user/aaa/createUser、/user/bbb/createUser 等 URL&lt;/p&gt;
&lt;p&gt;&lt;span&gt;/user/**/createUser: 匹配&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;      /user/createUser、/user/aaa/bbb/createUser 等 URL&lt;/p&gt;
&lt;p&gt;&lt;span&gt;/user/createUserer: 匹配&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;      /user/createUseraa、/user/createUserbb 等 URL&lt;/p&gt;


&lt;p&gt;简单的小实例：&lt;/p&gt;
&lt;p&gt;TestRequestMapping.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&lt;span&gt;     @RequestMapping(&quot;/antpath/*/ant&quot;)&lt;/span&gt;
     public String AntPath(){
           return &quot;success&quot;;
     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　index.jsp:&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&amp;lt;a href=&quot;springmvc/antpath/mvcmmc/ant&quot;&amp;gt;Ant&amp;lt;/a&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110214032819-1730735532.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;hr/&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;@PathVariable 映射 URL 绑定的占位符&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;带占位符的 URL 是 Spring3.0 新增的功能，该功能在SpringMVC 向 &lt;span&gt;REST&lt;/span&gt; 目标挺进发展过程中具有里程碑的意义&lt;/p&gt;

&lt;p&gt;通过 @PathVariable 可以将 URL 中占位符参数绑定到控制器处理方法的入参中：URL 中的 &lt;span&gt;&lt;span&gt;{xxx}&lt;/span&gt; 占位符&lt;/span&gt;可以通过&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;@PathVariable(&quot;xxx&quot;) 绑定到操作方法的入参&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt; TestRequestMapping.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
     @RequestMapping(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/testPathVariable/{&lt;span&gt;id&lt;/span&gt;}&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; String testPathVariable(&lt;strong&gt;&lt;span&gt;@PathVariable(value=&quot;id&quot;)&lt;/span&gt;&lt;/strong&gt; &lt;span&gt;int&lt;/span&gt;&lt;span&gt; id){
           System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;testPathVariable:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; id);
           &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
     }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; index.jsp&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&amp;lt;a href=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;springmvc/testPathVariable/20&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;testPathVariable&amp;lt;/a&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt; &lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110214202562-1078853149.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;



&lt;p&gt;REST&lt;/p&gt;

&lt;p&gt;REST：即 Representational State Transfer。（资源）表现层状态转化。是目前&lt;/p&gt;
&lt;p&gt;最流行的一种互联网软件架构。它结构清晰、符合标准、易于理解、扩展方便，&lt;/p&gt;
&lt;p&gt;所以正得到越来越多网站的采用&lt;/p&gt;

&lt;p&gt;资源（Resources）：网络上的一个实体，或者说是网络上的一个具体信息。它&lt;/p&gt;
&lt;p&gt;可以是一段文本、一张图片、一首歌曲、一种服务，总之就是一个具体的存在。&lt;/p&gt;
&lt;p&gt;可以用一个URI（统一资源定位符）指向它，每种资源对应一个特定的 URI 。要&lt;/p&gt;
&lt;p&gt;获取这个资源，访问它的URI就可以，因此 URI 即为每一个资源的独一无二的识&lt;/p&gt;
&lt;p&gt;别符。&lt;/p&gt;

&lt;p&gt;表现层（Representation）：把资源具体呈现出来的形式，叫做它的表现层&lt;/p&gt;
&lt;p&gt;（Representation）。比如，文本可以用 txt 格式表现，也可以用 HTML 格&lt;/p&gt;
&lt;p&gt;式、XML 格式、JSON 格式表现，甚至可以采用二进制格式。&lt;/p&gt;

&lt;p&gt;状态转化（State Transfer）：每发出一个请求，就代表了客户端和服务器的一&lt;/p&gt;
&lt;p&gt;次交互过程。HTTP协议，是一个无状态协议，即所有的状态都保存在服务器&lt;/p&gt;
&lt;p&gt;端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生“&lt;/p&gt;
&lt;p&gt;状态转化”（State Transfer）。而这种转化是建立在表现层之上的，所以就是 “&lt;/p&gt;
&lt;p&gt;表现层状态转化”&lt;/p&gt;

&lt;p&gt;具体说，就是 HTTP 协议里面，四个表示操作方式的动&lt;/p&gt;
&lt;p&gt;词：&lt;span&gt;GET、POST、PUT、DELETE&lt;/span&gt;。它们分别对应四种基本操作：GET 用来获&lt;/p&gt;
&lt;p&gt;取资源，POST 用来新建资源，PUT 用来更新资源，DELETE 用来删除资&lt;/p&gt;

&lt;p&gt;示例：&lt;/p&gt;
&lt;p&gt;– /order/1 HTTP GET ：得到 id = 1 的 order&lt;/p&gt;
&lt;p&gt;– /order/1 HTTP DELETE：删除 id = 1的 order&lt;/p&gt;
&lt;p&gt;– /order/1 HTTP PUT：更新id = 1的 order&lt;/p&gt;
&lt;p&gt;– /order HTTP POST：新增 order&lt;/p&gt;
&lt;p&gt;• HiddenHttpMethodFilter：浏览器 form 表单只支持 GET&lt;/p&gt;
&lt;p&gt;与 POST 请求，而DELETE、PUT 等 method 并不支&lt;/p&gt;
&lt;p&gt;持，Spring3.0 添加了一个过滤器，可以将这些请求转换&lt;/p&gt;
&lt;p&gt;为标准的 http 方法，使得支持 GET、POST、PUT 与&lt;/p&gt;
&lt;p&gt;DELETE 请求。&lt;/p&gt;

&lt;p&gt;需要在web.xml配置：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
 &amp;lt;!-- 配置org.springframework.web.filter.HiddenHttpMethodFilter.&lt;span&gt;class&lt;/span&gt; --&amp;gt;
  &amp;lt;!-- 可以把POST请求转为delete/post --&amp;gt;
  &amp;lt;filter&amp;gt;
      &amp;lt;filter-name&amp;gt;filter&amp;lt;/filter-name&amp;gt;
      &amp;lt;filter-&lt;span&gt;class&lt;/span&gt;&amp;gt;&lt;span&gt;org.springframework.web.filter.HiddenHttpMethodFilter&lt;/span&gt;&amp;lt;/filter-&lt;span&gt;class&lt;/span&gt;&amp;gt;
  &amp;lt;/filter&amp;gt;
  &amp;lt;filter-mapping&amp;gt;
      &amp;lt;filter-name&amp;gt;filter&amp;lt;/filter-name&amp;gt;
      &amp;lt;url-pattern&amp;gt;&lt;span&gt;/*&lt;/span&gt;&lt;span&gt;&amp;lt;/url-pattern&amp;gt;
  &amp;lt;/filter-mapping&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;java类中：&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;39&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@RequestMapping(value=&quot;/test/{id}&quot;,method=org.springframework.web.bind.annotation.RequestMethod.GET)
     public String testGet(@PathVariable(value=&quot;id&quot;) int id){
           System.out.println(&quot;GET:&quot; + id);
           return &quot;success&quot;;
     }
     
     @RequestMapping(value=&quot;/test&quot;,method=org.springframework.web.bind.annotation.RequestMethod.POST)
     public String testPOST(){
           System.out.println(&quot;POST:&quot;);
           return &quot;success&quot;;
     }
     
     @RequestMapping(value=&quot;/test/{id}&quot;,method=org.springframework.web.bind.annotation.RequestMethod.DELETE)
     public String testDelete(@PathVariable(value=&quot;id&quot;) int id){
           System.out.println(&quot;DELETE:&quot; + id);
           return &quot;success&quot;;
     }
     
     @RequestMapping(value=&quot;/test/{id}&quot;,method=org.springframework.web.bind.annotation.RequestMethod.PUT)
     public String testPUT(@PathVariable(value=&quot;id&quot;) int id){
           System.out.println(&quot;PUT:&quot; + id);
           return &quot;success&quot;;
     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;index.jsp&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;35&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
   &amp;lt;a href=&quot;springmvc/test/1&quot;&amp;gt;GET&amp;lt;/a&amp;gt;
           &amp;lt;br&amp;gt;
           &amp;lt;form action=&quot;springmvc/test&quot; method=&quot;post&quot;&amp;gt;
                &amp;lt;input type=&quot;submit&quot; value=&quot;POST&quot;&amp;gt;
           &amp;lt;/form&amp;gt;
           &amp;lt;br&amp;gt;
           &amp;lt;form action=&quot;springmvc/test/1&quot; method=&quot;post&quot;&amp;gt;
                &amp;lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;DELETE&quot;&amp;gt;
                &amp;lt;input type=&quot;submit&quot; value=&quot;DELETE&quot;&amp;gt;
           &amp;lt;/form&amp;gt;
           &amp;lt;br&amp;gt;
         &amp;lt;form action=&quot;springmvc/test/1&quot; method=&quot;post&quot;&amp;gt;
                &amp;lt;input type=&quot;hidden&quot; name=&quot;_method&quot; value=&quot;PUT&quot;&amp;gt;
                &amp;lt;input type=&quot;submit&quot; value=&quot;PUT&quot;&amp;gt;
           &amp;lt;/form&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110214433938-1939155794.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;

&lt;div readability=&quot;27&quot;&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;映射请求参数 &amp;amp; 请求参数&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;请求处理方法签名&lt;/p&gt;

&lt;p&gt;Spring MVC 通&lt;span&gt;过分析处理方法的签名&lt;/span&gt;，将 HTTP 请求信&lt;/p&gt;
&lt;p&gt;息绑定到处理方法的相应&lt;span&gt;人参&lt;/span&gt;中。&lt;/p&gt;

&lt;p&gt; Spring MVC 对控制器处理方法签名的限制是很宽松的，&lt;/p&gt;
&lt;p&gt;几乎可以按喜欢的任何方式对方法进行签名。&lt;/p&gt;

&lt;p&gt;必要时可以对方法及方法入参标注相应的注解（&lt;/p&gt;
&lt;p&gt;&lt;span&gt;@PathVariable@RequestParam、@RequestHeader&lt;/span&gt; 等）、Spring&lt;/p&gt;
&lt;p&gt;MVC 框架会将 HTTP 请求的信息绑定到相应的方法入参&lt;/p&gt;
&lt;p&gt;中，并根据方法的返回值类型做出相应的后续处理&lt;/p&gt;

&lt;p&gt;&lt;span&gt;使用 @RequestParam 绑定请求参数值&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;在处理方法入参处使用 @RequestParam 可以把请求参数传递给请求方法&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;– ---&lt;span&gt;&lt;strong&gt;value&lt;/strong&gt;&lt;/span&gt;：参数名&lt;/p&gt;
&lt;p&gt;– --- &lt;span&gt;&lt;strong&gt;&lt;span&gt;required&lt;/span&gt;&lt;/strong&gt;：是否必须。默认为 true, 表示请求参数中必须包含对应的参数，若不存在，将抛出异常&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;TestRequestMapping.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;36&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
@RequestMapping(&quot;/testRequestParam&quot;)
     public String testRequestParam(&lt;span&gt;@RequestParam(value=&quot;username&quot;,required=false)&lt;/span&gt; String username,
                @RequestParam(value=&quot;age&quot;) int age){
           System.out.println(&quot;username:&quot; + username + &quot;--age:&quot; + age);
           return &quot;success&quot;;
     }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;index.jsp&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&amp;lt;a href=&quot;springmvc/testRequestParam?username=MrChang&amp;amp;age=22&quot;&amp;gt;testRequestParam&amp;lt;/a&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110214641413-2026014343.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;

&lt;p&gt;&lt;strong&gt;&lt;span&gt;@RequestHeader 绑定请求报头的属性值&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;请求头包含了若干个属性，服务器可据此获知客户端的信&lt;/p&gt;
&lt;p&gt;息，通过 @RequestHeader 即可将请求头中的属性值绑&lt;/p&gt;
&lt;p&gt;定到处理方法的入参中&lt;/p&gt;
&lt;div&gt;&lt;img alt=&quot;&quot;/&gt;&lt;img src=&quot;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATkAAABECAIAAAB1SNUNAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAHOElEQVR42u2dT4gcRRTG5yieFD0qgoIXIZ48ZHLYkyJswsYNaNQ96JJ0lJWA4k3FRSV/iMGJRlZXJQpRT0MEJZ5dEL0o4mETWRQ1isoeVAQlCI493T1Vr6pedVX1v+lJfx9N2K7pel0z1G/q1dvtL70RBEGzoB4+AggCqxAEgVUIAquaXlveFR/rB+d+vvglPi8Iai+rJxdv/eO3Sxc2Pnxr5S58XhDUXlaP774p/jfGNV5d8XlB0Iyzej7q9QdbeWG2Bv1erOi8/9jioCGX1xKhtMbv2/HRQFZtDlfXNrbxOTTJ6njGBlPDkBY3aW25LNTE6ngUqdzR62V1e2NtVWrK03o8mOFmXgNYrZLVn/7cPvDBi7edfjg+HvvoZcHqd198sn5wrjCr7nU3jzRCug5r/pdAHazSEcR3N0Y4PTziiV0SjXIDAKsNsvr977/ecHL/nrcPvfDx04+fe/L200spq/FxYuGWH77+bPqsarA6GKmB1fiOzDtpBavjmQ1WO8Lq3vefmVtfPvvpcXHMnzkUL7POVHAsOYNle9pGrkvmc7Z1JTkknery55Q00jsJp61rEhEzrGCVj88M1SN9NdNwbYTpDZLG+FR5O/3BIDJuJ7onr4Z9pemokIk9XmWN1Fg2yhesuDERSM4dX0aija/IZ5Ubjxoub5B8hPQGSXsHkFZYvfbo3gPvPvrsuSfE8ch7Kze/tORKBZOTbJLRFVSbp1tZYzR5XcTIY9VYteSZ2s0M62CVH6p7q5nBZUvF0+8M9nY9MnD5PaZ0DGeV263S9UgQo+TI45M8VrkIzDqpdzZkjxb/MJy0yaFZBmmLsLbafN7fClavfn73vrUH7399SRx3vnLf9ccW3UmtOFXXWrq00sv1JTCIVXFq8GWsrLmsWoYaUN91JQa5Xw2TJIH9GPVE0FY7Utji1jDSU8snxSnLKhsha6VR/HJgPhq3stoGyUcon2TPLKu73ji848TC3af2iePGI3vmzz4VxqplKcqa6eIh5nEYq9m5mQDrYZ2sli3QOhKDilj1zIEJrew2L5RVa1aZ8uVIoN3RkjBZs+1Kyiozng6z+tUv315zZGHHqXvvOfPQ/neWd776wHXHFi9u/+hRDqU5MM2NZfnWzJGTbmKqU5YdrKbX9/vqps8Mq7DKxmeG6siBRelXuWtRVqvIgcVkJRtWbZU1l14CCumWtLLrdJZybmwyWahHbYmLRvCz3JfSzL6jDrMa6/NLF+5YX7nqufn42Pnm4Zje3EWFK4owNR4DpbRbFPVpEqk3yipu9qqcx+a0ZsMaEdSbskN17ldJJ6OwJWtLnqwqAy9XW1LnPFu2odWZDQ2VpHU4ZLefTHKtXeWsLTHRZJNyX8sgbRG6y2qqvy7//c+/l1Elb1oVpOX4dUjHWIWaEk2pSTUdrEJgtY20FipEg1WwCkEQWIUgCKxCEFiFIAisQhBUFavwRoOg2WAV3mgQNBuswhsNgsAqURlfooA/zavKwKEFrmtXkvCHGWD1SmEVHmhQVd5o01U3WIUHGliVKu6NBlabXMrggQZWQ7zRVAewbPr27MZf5AX2wWzdRalQZHdSTYLrj63SgJRDtp2yyg2PN2pjvdGKoAIPtK6zGuKNpjqA8T5jFv80D1YLRvZjtccYmKoxvNpzDNZsRm2mN1qB/So80MBqkDealkyyPmM2MyGvdbVQ5OAceHKqR3C1C1btBmucURvnCzEy1xl4oHXaA82L1QBvNJMo1km3Elb9I1fJKuddpvgk2Q3WrEZt+ax65sDwQAOrYd5o2qRnfcYsxl+sU5mN1aDInjmw0tOS65KtsqXdbrBmNWqrhFV4oIHVRN7eaG5zXr3sMmD80aRTmZXVsMhetaUo8q4hedSWmOHZjNqqYRUeaGBVqhZvtCaNvyD8OqQjrNYisApWIbAKgVWwCkEQWIUgCKxCEFiFIAisQhBUmFV4o0HQbLAKbzQImg1W4Y0GQV1gtQUeYmWcnCD8KQVYLSfW2GEqrMK1DJoSq1V7o9XBqvZAnOXpnGngAdcyqCFWa/BGq4FV/nmyVrAK1zKoIVa9vdGUtFKe8IZg2uOpGlas71l++qo83q0FSS5X3dU0ZwbGnUx0tzwKG4IKXMugJlgN8EaTD804DcFyWGWNxTy2mhlc9HL9Bj3+dqY7mYfFhO9+Fa5lUFOshnijTTBTEeMMweys2o3FPHNhAqx14XY4HnlZN8G1DK5lLWM1xBstm9Vy82g1BMtltWyBVqyKtbLqmQPDtQxqitUQb7R0tkeRqPNYDcEESoYfGu975sqBRelXuWtRVqvIgeFaBjXN6ijAG22keQLaDcFIkqq/avE9c+1XSSfZK2uUtSVPVpWBl6stjeBaBjXHaqpavNFmQk0azeDXIVB5VrskmlLz/9sGWIXAamtoLVSIBqsQWIUgCKxCEFiFIKhFrH4DQdA0BFYhaKZY/c9DYBWCpqj/AbjsJ60l5hTLAAAAAElFTkSuQmCC&quot; alt=&quot;&quot;/&gt;&lt;/div&gt;

&lt;p&gt;TestRequestMapping.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
     @RequestMapping(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/RequestHeader&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt; String testRequestHeader(@RequestHeader(value=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;Accept&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)String l){
           System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;&lt;span&gt;.println(l);
           &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
     }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt; index.jsp&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;32&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&amp;lt;a href=&quot;springmvc/RequestHeader&quot;&amp;gt;RequestHeader&amp;lt;/a&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110214747686-1271218500.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;hr/&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;使用 POJO 对象绑定请求参数值&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Spring MVC 会按请求参数名和 POJO 属性名进行自动匹&lt;/p&gt;
&lt;p&gt;配，自动为该对象填充属性值。支持&lt;span&gt;级联属性&lt;/span&gt;。&lt;/p&gt;
&lt;p&gt;如：dept.deptId、dept.address.tel 等&lt;/p&gt;

&lt;p&gt;TestRequestMapping.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
     @RequestMapping(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/testpojo&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String testtestpojo(User user){
           System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;&lt;span&gt;.println(user);
           &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
     }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;User.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; User {
     &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String username;
     &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String password;
     &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String email;
     
     &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; Address address;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Address.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; Address {
     &lt;/span&gt;&lt;span&gt;private&lt;/span&gt;&lt;span&gt; String city;
}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;index.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;34&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
&amp;lt;form action=&quot;springmvc/testpojo&quot; method=&quot;post&quot;&amp;gt;
           username:&amp;lt;input type=&quot;text&quot; name=&quot;username&quot;&amp;gt;
           &amp;lt;br&amp;gt;
           password:&amp;lt;input type=&quot;password&quot; name=&quot;password&quot;&amp;gt;
           &amp;lt;br&amp;gt;
           email:&amp;lt;input type=&quot;text&quot; name=&quot;email&quot;&amp;gt;
           &amp;lt;br&amp;gt;
           city:&amp;lt;input type=&quot;text&quot; name=&quot;address.city&quot;&amp;gt;
           &amp;lt;input type=&quot;submit&quot; value=&quot;submit&quot;&amp;gt;
     &amp;lt;/form&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110215027364-1713700753.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/1488757/201811/1488757-20181110215037282-920839573.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt; 使用 Servlet API 作为&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt; TestRequestMapping.java&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
     @RequestMapping(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;/testServletAPI&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;)
     &lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; String testServletAPI(&lt;span&gt;&lt;strong&gt;HttpServletRequest request,
                HttpServletResponse response&lt;/strong&gt;&lt;/span&gt;){
           System.&lt;/span&gt;&lt;span&gt;out&lt;/span&gt;.println(&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;request:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; + request + &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;-response:&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt; +&lt;span&gt; response);
           &lt;/span&gt;&lt;span&gt;return&lt;/span&gt; &lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;success&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;;
     }&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;32&quot;&gt;
&lt;pre&gt;
     &amp;lt;a href=&lt;span&gt;&quot;&lt;/span&gt;&lt;span&gt;springmvc/testServletAPI&lt;/span&gt;&lt;span&gt;&quot;&lt;/span&gt;&amp;gt;testServletAPI&amp;lt;/a&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;cnblogs_Highlighter&quot; readability=&quot;33&quot;&gt;
&lt;pre class=&quot;brush:java;gutter:true;&quot;&gt;
request:org.apache.catalina.connector.RequestFacade@7a434d60-&lt;br/&gt;response:org.apache.catalina.connector.ResponseFacade@addea0e
&lt;/pre&gt;&lt;/div&gt;


</description>
<pubDate>Sat, 10 Nov 2018 13:53:00 +0000</pubDate>
<dc:creator>MrChengs</dc:creator>
<og:description>有疑问可以参考博主其他关于spring mvc的博文 此时直接进行代码的实现 一般的步骤： -加入jar包 -配置DispatcherServlet -加入Spring MVC配置文件 -编写请求的处</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/Mrchengs/p/9940764.html</dc:identifier>
</item>
<item>
<title>工控随笔_03_西门子_Step7项目打开后CPU显示问号解决方法 - volcanol</title>
<link>http://www.cnblogs.com/volcanol/p/9940739.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/volcanol/p/9940739.html</guid>
<description>&lt;p&gt;&lt;span&gt;　　我们在利用西门子的S7-300/400 PLC的编程软件Step7的时候会出现下面如图所示的问题。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;在打开项目的时候，我们会在Simatic Manager里面看到CPU以及一些其他一些组件显示问号。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110200713745-512308692.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;　　　　　　　　　图、CPU显示问号&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;一、问题产生的原因&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　这个问题产生的原因是我们利用低版本的Step7 打开项目的时候，由于Step7 里面没有最新的&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;硬件的描述性文件导致的。 （说明： 西门子的硬件说明文件时.xml格式的文件）。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;二、解决方法&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　解决方法有三个： 升级Step7 、重装系统、升级硬件描述性文件。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;1、升级Step7 &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　不推荐用这个方法，因为安装新版本的Step7的时候，有时候会因为兼容性问题导致不能完全安装。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;而且通过在 [ 控制面板 ] 里面的程序来卸载Step 7 会有一些注册表项不能完全删除，导致升级不能成功。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;       所以不推荐升级Step7.&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;2、重装系统后再安装最新版Step7&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　还可以重装操作系统然后再安装新版本的Step 7，如果系统的软件不多，那么这个方式可能比前面说的&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;升级Step 7方式更快的解决问题。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;3、升级硬件描述&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;strong&gt;&lt;span&gt;重要的事情说三遍：&lt;strong&gt;推荐使用这种方法，&lt;/strong&gt;&lt;strong&gt;推荐使用这种方法，&lt;/strong&gt;&lt;strong&gt;推荐使用这种方法。&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;　&lt;/strong&gt;&lt;/span&gt;&lt;/strong&gt;&lt;span&gt;　有两种方式打开硬件包升级程序： &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　　　1、直接打开硬件包升级程序&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;　　　　2、通过硬件组态编辑器打开硬件升级包程序　　&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;1、直接打开硬件包升级程序&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110203659298-818442559.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如上图所示，通过开始菜单打开硬件包升级程序：Inst.hardware updates 。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　我们还可以用运行对话框通过命令打开硬件包升级程序，如下图所示。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110204611804-83360582.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;如上图所示，通过输入上面的命令打开硬件包升级程序。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;二、通过硬件组态编辑器打开硬件包升级程序&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110204746855-776170838.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如上图在Simatic Manager管理器中选择Hardware然后双击打开硬件组态编辑器。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　或者通过运行对话框通过命令直接打开硬件组态编辑器。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110204906669-35499362.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如上图通过命令打开硬件组态编辑器。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110205128983-1077934707.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如上图，通过命令打开后，会出现如上画面询问项目打开硬件组态对话框，直接选择取消即可。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　打开硬件组态编辑器后，通过菜单命令打开硬件包升级程序。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110205436215-2031309642.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　　　&lt;/span&gt;&lt;span&gt;图   在硬件组态编辑器里面通过菜单打开硬件包升级程序。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如上图通过 option ----&amp;gt; Install HW Updates 命令打开硬件包升级程序。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;三、硬件包升级程序操作&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　首次打开硬件包升级程序会提示创建硬件HSP文件的保存位置，如下图所示：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110205550583-426245077.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;如上图所示，直接选择确定即可。然后弹出如下对话框：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110205641839-48729807.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　 如上图所示，用来进行相关设置，这里设置硬件HSP文件存储路径，如上C:\HWUpdates ，我们一般不需要&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;改变，直接确定即可。&lt;/span&gt;&lt;span&gt;选择确定按钮后会&lt;/span&gt;&lt;span&gt;弹出如下对话框：&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110205823828-1096061810.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;  直接选择 Yes(是即可)。然后会弹出下载硬件HSP文件对话框。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110210114324-591380574.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　不需要进行其他的设置。 我们直接选择Excute即可。&lt;strong&gt;&lt;span&gt;如果你现在使用的是XP系统，那么现在已经无法通过网络下载&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;硬件HSP。会弹出如下报警。&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110210323353-1373934088.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　　　&lt;span&gt;图   XP系统下载硬件HSP对话框报警，提示重定向请求不安全的链接更改为安全链接。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;     鉴于这个问题，后面我再将利用一篇新的随笔来解释如何解决这个问题。下面我们演示在Win7以后的系统如何&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;升级。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;四、下载硬件描述HSP文件&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110211213333-1297669533.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　下载HSP文件。如上图点击 Excute 然后出现下载对话框： Download status， 等待检索服务器上最新的固件&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;完成，弹出如下对话框，对话框显示目前在服务器上已有的最新的HSP文件。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110211502012-136482743.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　这里有3个按钮，  Download开始执行下载，  Select All选择下载所有， Deselect ALL全部不选择。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;可以勾选我们需要的，然后下载。&lt;/span&gt;&lt;span&gt;一般我们选择 Select ALL， 选择完后。我们点击Download开始下载。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;当一个条目下载完毕前面的复选&lt;/span&gt;&lt;span&gt;框就会取消选择。 如果选择多的话，需要一定的时间，等待下载完成&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;即可。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110211920803-1087011439.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;下载后出现提示下载完毕对话框，直接选择确定按钮。然后回到下载对话框。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110212043974-286916850.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　回到下载对话框后，如上点击close按钮关闭下载对话框即可。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;五、安装硬件描述HSP文件&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　下载完毕HSP文件后，即可开始安装硬件HSP文件。在安装之前必须选择安装的HSP文件，这里&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;我们可以根据需要选择，然后&lt;/span&gt;&lt;span&gt;安装即可。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110213155261-1782671680.jpg&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如图我们选择了 IE/PB LINK V3.0。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　上面对话框也有3个按钮：  Select All  选择安装所有的硬件HSP文件； Deselce All不选择任何&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;硬件HSP文件； Install 安装。 &lt;span&gt;&lt;strong&gt;通常我们选择全部安装。&lt;/strong&gt;&lt;/span&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　选择完毕后，点击 Install按钮安装即可。 弹出确认对话框，&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110213525760-258733177.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;　　&lt;span&gt;安装确认对话框。提示操作不可撤销，如果不安装就选择No，选择安装就选择Yes。 选择Yes 后开始安装。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;安装成功后会弹出安装成功提示对话框。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　&lt;img src=&quot;https://img2018.cnblogs.com/blog/304449/201811/304449-20181110213725102-332619138.jpg&quot; alt=&quot;&quot;/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　如上图，安装成功提示对话框，点击确定按钮，即表示HSP安装成功。 &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　安装成功后，点Close关闭程序即可。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;span&gt;六、 结语&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;　　西门子的软件升级比较快，一般不需要选择升级硬件包HSP， 通常选择安装最新版的Step7软件即可。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;当使用版本较早的软件打开新软件开发的程序时可能会遇到上面的情况。&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;--------------------------------------------------------------分割线---------------------------------------------------------------&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;1、文章均为个人原创，欢迎转载，转载请保留出处：https://www.cnblogs.com/volcanol/&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;2、获取工控PLC、变频器、HMI、计算机、Windows、Linux、嵌入式资料点击：&lt;a href=&quot;http://www.cnblogs.com/volcanol/archive/2012/06/05/2537339.html&quot; target=&quot;_blank&quot;&gt;获取资料&lt;/a&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;3、打赏或支持移步：&lt;a href=&quot;http://www.cnblogs.com/volcanol/archive/2012/06/05/2537339.html&quot; target=&quot;_blank&quot;&gt;打赏或支持&lt;/a&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;strong&gt;&lt;span&gt;&lt;strong&gt;--------------------------------------------------------------分割线---------------------------------------------------------------&lt;/strong&gt;&lt;br/&gt;&lt;/span&gt;&lt;/strong&gt;&lt;/span&gt;&lt;/p&gt;

</description>
<pubDate>Sat, 10 Nov 2018 13:45:00 +0000</pubDate>
<dc:creator>volcanol</dc:creator>
<og:description>我们在利用西门子的S7-300/400 PLC的编程软件Step7的时候会出现下面如图所示的问题。 在打开项目的时候，我们会在Simatic Manager里面看到CPU以及一些其他一些组件</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/volcanol/p/9940739.html</dc:identifier>
</item>
<item>
<title>NLog组件 - 势不可挡</title>
<link>http://www.cnblogs.com/yiliukejich0614-1234/p/9914376.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/yiliukejich0614-1234/p/9914376.html</guid>
<description>&lt;pre&gt;
&lt;span&gt; 1&lt;/span&gt; &lt;span&gt;CREATE&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;&lt;span&gt;(
&lt;/span&gt;&lt;span&gt; 2&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;60&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 3&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;AppName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;20&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 4&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;ModuleName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;30&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 5&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;ProcName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;30&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 6&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperationType&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;int&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 7&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;Logger&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;500&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 8&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;LogMessage&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;3000&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt; 9&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;IP&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;32&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;UserName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;36&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;11&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;Createdate&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;datetime&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;12&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;LogLevel&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;varchar&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;(&lt;span&gt;12&lt;/span&gt;) &lt;span&gt;NOT&lt;/span&gt; &lt;span&gt;NULL&lt;/span&gt;&lt;span&gt;,
&lt;/span&gt;&lt;span&gt;13&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PK_OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;PRIMARY&lt;/span&gt; &lt;span&gt;KEY&lt;/span&gt; &lt;span&gt;CLUSTERED&lt;/span&gt; 
&lt;span&gt;14&lt;/span&gt; &lt;span&gt;(
&lt;/span&gt;&lt;span&gt;15&lt;/span&gt;     &lt;span&gt;[&lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ASC&lt;/span&gt;
&lt;span&gt;16&lt;/span&gt; )&lt;span&gt;WITH&lt;/span&gt; (PAD_INDEX &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, STATISTICS_NORECOMPUTE &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, IGNORE_DUP_KEY &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;, ALLOW_ROW_LOCKS &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;, ALLOW_PAGE_LOCKS &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;) &lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;17&lt;/span&gt; ) &lt;span&gt;ON&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;PRIMARY&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;18&lt;/span&gt; 
&lt;span&gt;19&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;20&lt;/span&gt; 
&lt;span&gt;21&lt;/span&gt; &lt;span&gt;SET&lt;/span&gt; ANSI_PADDING &lt;span&gt;OFF&lt;/span&gt;
&lt;span&gt;22&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;23&lt;/span&gt; 
&lt;span&gt;24&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_Id&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;25&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;26&lt;/span&gt; 
&lt;span&gt;27&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_AppName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;AppName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;28&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;29&lt;/span&gt; 
&lt;span&gt;30&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_ModuleName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;ModuleName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;31&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;32&lt;/span&gt; 
&lt;span&gt;33&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_ProcName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;ProcName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;34&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;35&lt;/span&gt; 
&lt;span&gt;36&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_OperationType&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; ((&lt;span&gt;0&lt;/span&gt;)) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperationType&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;37&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;38&lt;/span&gt; 
&lt;span&gt;39&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_Logger&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;Logger&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;40&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;41&lt;/span&gt; 
&lt;span&gt;42&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_LogMessage&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;LogMessage&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;43&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;44&lt;/span&gt; 
&lt;span&gt;45&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_IP&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;IP&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;46&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;47&lt;/span&gt; 
&lt;span&gt;48&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_UserName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;UserName&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;49&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;50&lt;/span&gt; 
&lt;span&gt;51&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF__OperatorL__creat__02084FDA&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;getdate&lt;/span&gt;()) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;Createdate&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;52&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;53&lt;/span&gt; 
&lt;span&gt;54&lt;/span&gt; &lt;span&gt;ALTER&lt;/span&gt; &lt;span&gt;TABLE&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;.&lt;span&gt;[&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;]&lt;/span&gt; &lt;span&gt;ADD&lt;/span&gt;  &lt;span&gt;CONSTRAINT&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;DF_OperatorLog_LogLevel&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;  &lt;span&gt;DEFAULT&lt;/span&gt; (&lt;span&gt;''&lt;/span&gt;) &lt;span&gt;FOR&lt;/span&gt; &lt;span&gt;[&lt;/span&gt;&lt;span&gt;LogLevel&lt;/span&gt;&lt;span&gt;]&lt;/span&gt;
&lt;span&gt;55&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;56&lt;/span&gt; 
&lt;span&gt;57&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;日志表主键ID&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Id&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;58&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;59&lt;/span&gt; 
&lt;span&gt;60&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;一级菜单&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;AppName&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;61&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;62&lt;/span&gt; 
&lt;span&gt;63&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;二级菜单&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;ModuleName&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;64&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;65&lt;/span&gt; 
&lt;span&gt;66&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;本级菜单&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;ProcName&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;67&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;68&lt;/span&gt; 
&lt;span&gt;69&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;操作类型&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperationType&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;70&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;71&lt;/span&gt; 
&lt;span&gt;72&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;日志文件&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Logger&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;73&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;74&lt;/span&gt; 
&lt;span&gt;75&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;日志内容&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;LogMessage&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;76&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;77&lt;/span&gt; 
&lt;span&gt;78&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;IP地址&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;IP&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;79&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;80&lt;/span&gt; 
&lt;span&gt;81&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;用户名&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;UserName&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;82&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;83&lt;/span&gt; 
&lt;span&gt;84&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;创建时间&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;Createdate&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;85&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;span&gt;86&lt;/span&gt; 
&lt;span&gt;87&lt;/span&gt; &lt;span&gt;EXEC&lt;/span&gt; sys.sp_addextendedproperty &lt;span&gt;@name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;MS_Description&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@value&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;日志级别&lt;/span&gt;&lt;span&gt;'&lt;/span&gt; , &lt;span&gt;@level0type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;SCHEMA&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level0name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;dbo&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level1type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;TABLE&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level1name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;OperatorLog&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;@level2type&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;COLUMN&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,&lt;span&gt;@level2name&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;N&lt;span&gt;'&lt;/span&gt;&lt;span&gt;LogLevel&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;
&lt;span&gt;88&lt;/span&gt; &lt;span&gt;GO&lt;/span&gt;
&lt;/pre&gt;</description>
<pubDate>Sat, 10 Nov 2018 13:12:00 +0000</pubDate>
<dc:creator>势不可挡</dc:creator>
<og:description>在.NET Core框架中使用NLog组件记录日志，写数据库，写文件！！！</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/yiliukejich0614-1234/p/9914376.html</dc:identifier>
</item>
<item>
<title>Nginx可以做什么？看完这篇你就懂了 - Java高级架构进阶</title>
<link>http://www.cnblogs.com/xinxin1/p/9940613.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xinxin1/p/9940613.html</guid>
<description>&lt;p&gt;本文只针对Nginx在不加载第三方模块的情况能处理哪些事情，由于第三方模块太多所以也介绍不完，当然本文本身也可能介绍的不完整，毕竟只是我个人使用过和了解到过得，欢迎留言交流。&lt;/p&gt;
&lt;p&gt;Nginx能做什么&lt;/p&gt;
&lt;p&gt;——反向代理&lt;/p&gt;
&lt;p&gt;——负载均衡&lt;/p&gt;
&lt;p&gt;——HTTP服务器（动静分离）&lt;/p&gt;
&lt;p&gt;——正向代理&lt;/p&gt;
&lt;p&gt;以上就是我了解到的Nginx在不依赖第三方模块能处理的事情，下面详细说明每种功能怎么做。&lt;/p&gt;
&lt;p&gt;反向代理&lt;/p&gt;
&lt;p&gt;反向代理应该是Nginx做的最多的一件事了，什么是反向代理呢，以下是百度百科的说法：反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。简单来说就是真实的服务器不能直接被外部网络访问，所以需要一台代理服务器，而代理服务器能被外部网络访问的同时又跟真实服务器在同一个网络环境，当然也可能是同一台服务器，端口不同而已。&lt;/p&gt;
&lt;p&gt;下面贴上一段简单的实现反向代理的代码&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;675&quot; data-height=&quot;206&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-c258566b65ab2bbd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/675/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-c258566b65ab2bbd.png&quot; data-original-width=&quot;675&quot; data-original-height=&quot;206&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;12086&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;保存配置文件后启动Nginx，这样当我们访问localhost的时候，就相当于访问localhost:8080了&lt;/p&gt;
&lt;p&gt;负载均衡&lt;/p&gt;
&lt;p&gt;负载均衡也是Nginx常用的一个功能，负载均衡其意思就是分摊到多个操作单元上进行执行，例如Web服务器、FTP服务器、企业关键应用服务器和其它关键任务服务器等，从而共同完成工作任务。简单而言就是当有2台或以上服务器时，根据规则随机的将请求分发到指定的服务器上处理，负载均衡配置一般都需要同时配置反向代理，通过反向代理跳转到负载均衡。而Nginx目前支持自带3种负载均衡策略，还有2种常用的第三方策略。&lt;/p&gt;
&lt;p&gt;1、RR（默认）&lt;/p&gt;
&lt;p&gt;每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。&lt;/p&gt;
&lt;p&gt;简单配置&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;675&quot; data-height=&quot;284&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-0d67f23a21ae99bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/675/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-0d67f23a21ae99bd.png&quot; data-original-width=&quot;675&quot; data-original-height=&quot;284&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;16086&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;负载均衡的核心代码为&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;676&quot; data-height=&quot;92&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-6b439d295cca3bcc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/676/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-6b439d295cca3bcc.png&quot; data-original-width=&quot;676&quot; data-original-height=&quot;92&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;4939&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;这里我配置了2台服务器，当然实际上是一台，只是端口不一样而已，而8081的服务器是不存在的,也就是说访问不到，但是我们访问http://localhost 的时候,也不会有问题，会默认跳转到http://localhost:8080 具体是因为Nginx会自动判断服务器的状态，如果服务器处于不能访问（服务器挂了），就不会跳转到这台服务器，所以也避免了一台服务器挂了影响使用的情况，由于Nginx默认是RR策略，所以我们不需要其他更多的设置。&lt;/p&gt;
&lt;p&gt;2、权重&lt;/p&gt;
&lt;p&gt;指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。&lt;/p&gt;
&lt;p&gt;例如&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;675&quot; data-height=&quot;96&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-97417b2e65ef3e8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/675/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-97417b2e65ef3e8d.png&quot; data-original-width=&quot;675&quot; data-original-height=&quot;96&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;5880&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;那么10次一般只会有1次会访问到8081，而有9次会访问到8080&lt;/p&gt;
&lt;p&gt;3、ip_hash&lt;/p&gt;
&lt;p&gt;上面的2种方式都有一个问题，那就是下一个请求来的时候请求可能分发到另外一个服务器，当我们的程序不是无状态的时候（采用了session保存数据），这时候就有一个很大的很问题了，比如把登录信息保存到了session中，那么跳转到另外一台服务器的时候就需要重新登录了，所以很多时候我们需要一个客户只访问一个服务器，那么就需要用iphash了，iphash的每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。&lt;/p&gt;
&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;675&quot; data-height=&quot;114&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-fb6eb8d4c1e1f871.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/675/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-fb6eb8d4c1e1f871.png&quot; data-original-width=&quot;675&quot; data-original-height=&quot;114&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;5774&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;4、fair（第三方）&lt;/p&gt;
&lt;p&gt;按后端服务器的响应时间来分配请求，响应时间短的优先分配。&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;674&quot; data-height=&quot;113&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-e059e64f4f8fb737.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/674/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-e059e64f4f8fb737.png&quot; data-original-width=&quot;674&quot; data-original-height=&quot;113&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;5731&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;5、url_hash（第三方）&lt;/p&gt;
&lt;p&gt;按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，后端服务器为缓存时比较有效。 在upstream中加入hash语句，server语句中不能写入weight等其他的参数，hash_method是使用的hash算法&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;676&quot; data-height=&quot;134&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-c435577f5b2bee87.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/676/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-c435577f5b2bee87.png&quot; data-original-width=&quot;676&quot; data-original-height=&quot;134&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;7646&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;以上5种负载均衡各自适用不同情况下使用，所以可以根据实际情况选择使用哪种策略模式,不过fair和url_hash需要安装第三方模块才能使用，由于本文主要介绍Nginx能做的事情，所以Nginx安装第三方模块不会再本文介绍&lt;/p&gt;
&lt;p&gt;HTTP服务器&lt;/p&gt;
&lt;p&gt;Nginx本身也是一个静态资源的服务器，当只有静态资源的时候，就可以使用Nginx来做服务器，同时现在也很流行动静分离，就可以通过Nginx来实现，首先看看Nginx做静态资源服务器&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;673&quot; data-height=&quot;218&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-ecf3bf296c94d738.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/673/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-ecf3bf296c94d738.png&quot; data-original-width=&quot;673&quot; data-original-height=&quot;218&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;9861&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;这样如果访问http://localhost 就会默认访问到E盘wwwroot目录下面的index.html，如果一个网站只是静态页面的话，那么就可以通过这种方式来实现部署。&lt;/p&gt;
&lt;p&gt;动静分离&lt;/p&gt;
&lt;p&gt;动静分离是让动态网站里的动态网页根据一定规则把不变的资源和经常变的资源区分开来，动静资源做好了拆分以后，我们就可以根据静态资源的特点将其做缓存操作，这就是网站静态化处理的核心思路&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;673&quot; data-height=&quot;553&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-461c4713c0fc56ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/673/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-461c4713c0fc56ba.png&quot; data-original-width=&quot;673&quot; data-original-height=&quot;553&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;30345&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;这样我们就可以吧HTML以及图片和css以及js放到wwwroot目录下，而tomcat只负责处理jsp和请求，例如当我们后缀为gif的时候，Nginx默认会从wwwroot获取到当前请求的动态图文件返回，当然这里的静态文件跟Nginx是同一台服务器，我们也可以在另外一台服务器，然后通过反向代理和负载均衡配置过去就好了，只要搞清楚了最基本的流程，很多配置就很简单了，另外localtion后面其实是一个正则表达式，所以非常灵活&lt;/p&gt;
&lt;p&gt;正向代理&lt;/p&gt;
&lt;p&gt;正向代理，意思是一个位于客户端和原始服务器(origin server)之间的服务器，为了从原始服务器取得内容，客户端向代理发送一个请求并指定目标(原始服务器)，然后代理向原始服务器转交请求并将获得的内容返回给客户端。客户端才能使用正向代理。当你需要把你的服务器作为代理服务器的时候，可以用Nginx来实现正向代理，但是目前Nginx有一个问题，那么就是不支持HTTPS，虽然我百度到过配置HTTPS的正向代理，但是到最后发现还是代理不了，当然可能是我配置的不对，所以也希望有知道正确方法的同志们留言说明一下。&lt;/p&gt;

&lt;div class=&quot;image-package&quot;&gt;
&lt;div class=&quot;image-container&quot;&gt;

&lt;div class=&quot;image-view&quot; data-width=&quot;674&quot; data-height=&quot;261&quot;&gt;&lt;img src=&quot;https://upload-images.jianshu.io/upload_images/7564501-241297776397fe9c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/674/format/webp&quot; alt=&quot;&quot; data-original-src=&quot;//upload-images.jianshu.io/upload_images/7564501-241297776397fe9c.png&quot; data-original-width=&quot;674&quot; data-original-height=&quot;261&quot; data-original-format=&quot;image/png&quot; data-original-filesize=&quot;13511&quot;/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;resolver是配置正向代理的DNS服务器，listen 是正向代理的端口，配置好了就可以在ie上面或者其他代理插件上面使用服务器ip+端口号进行代理了。&lt;/p&gt;

</description>
<pubDate>Sat, 10 Nov 2018 13:07:00 +0000</pubDate>
<dc:creator>Java高级架构进阶</dc:creator>
<og:description>本文只针对Nginx在不加载第三方模块的情况能处理哪些事情，由于第三方模块太多所以也介绍不完，当然本文本身也可能介绍的不完整，毕竟只是我个人使用过和了解到过得，欢迎留言交流。 Nginx能做什么 ——</og:description>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xinxin1/p/9940613.html</dc:identifier>
</item>
</channel>
</rss>