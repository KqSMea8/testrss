<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="css/feed.xsl"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:media="http://search.yahoo.com/mrss/" xmlns:og="http://ogp.me/ns#">
<channel>
<atom:link rel="self" href="http://192.168.1.4/fivefilters/makefulltextfeed.php?url=feed.cnblogs.com%2Fblog%2Fsitehome%2Frss&amp;max=10&amp;links=preserve&amp;exc=" />
<atom:link rel="alternate" title="Source URL" href="http://feed.cnblogs.com/blog/sitehome/rss" />
<atom:link rel="related" title="Subscribe to feed" href="http://www.subtome.com/#/subscribe?feeds=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D&amp;back=http%3A%2F%2F192.168.1.4%2Ffivefilters%2Fmakefulltextfeed.php%3Furl%3Dfeed.cnblogs.com%252Fblog%252Fsitehome%252Frss%26max%3D10%26links%3Dpreserve%26exc%3D" />
<title>博客园_首页</title>
<link></link>
<description>代码改变世界</description>
<item>
<title>以太坊开发DApp实战教程——用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台（一） - 以太坊开发</title>
<link>http://www.cnblogs.com/helloworld2018/p/8676484.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/helloworld2018/p/8676484.html</guid>
<description>&lt;h4 id=&quot;第一节-简介&quot;&gt;第一节 简介&lt;/h4&gt;
&lt;p&gt;欢迎和我们一起来用以太坊开发构建一个去中心化电商DApp！我们将用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台类似淘宝的在线电商应用，卖家可以自由地出售商品，买家可以自由地购物：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271efc54d89429?w=657&amp;amp;h=374&amp;amp;f=png&amp;amp;s=16405&quot; alt=&quot;ethereum dapp 以太坊DApp开发&quot;/&gt;&lt;/p&gt;
&lt;ol readability=&quot;8.5&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;去中心化： 和淘宝或&lt;strong&gt;eBay&lt;/strong&gt;不同，我们把所有的商业逻辑和核心数据都放在以太坊区块链上，这使 得它成为一个完全去中心化的应用。和淘宝这样中心化的电商平台相比，一个去中心化的&lt;strong&gt;P2P&lt;/strong&gt;电商应用显然有其独特的价值——至少你不用担心被平台封账户了。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;IPFS： 在以太坊上存储用于商品展示的图片和描述超文本十分昂贵，由于以太坊虚拟机的限制， 有时甚至是不可行的。为了解决这个问题，我们将会把商品图片和商品描述信息存储在同样去中心化的&lt;strong&gt;星际文件系统&lt;/strong&gt;（&lt;strong&gt;IPFS&lt;/strong&gt;)中，而仅仅在链上保存这些数据的&lt;strong&gt;ID&lt;/strong&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;商品拍卖： 对于卖家而言，拍卖显然是一种非常好的提升商品利润空间的销售手段。因此我们在课程项目中将实现去中心化环境下的维科瑞（&lt;strong&gt;Vickery&lt;/strong&gt;）拍卖 —— 这非常类似于&lt;strong&gt;eBay&lt;/strong&gt;的自动竞价系统，而不是简单地对商品进行固定标价。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;资金托管： &lt;strong&gt;中心化&lt;/strong&gt;的平台有一个优点在于它天然提供了买卖双方之间的信任中介。在&lt;strong&gt;去中心化&lt;/strong&gt;的环境中，我们将使用一个多方托管合约来应对买卖双方可能的风险，&lt;strong&gt;托管合约&lt;/strong&gt;采用&lt;strong&gt;投票机制&lt;/strong&gt;来决定买家货款的最终流向。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;链下数据存储： 不要被去中心化限制我们的思维，传统的技术依然有其强大之处。我们将使用&lt;strong&gt;MongoDB&lt;/strong&gt;在链下做一个同步的数据备份，以便实现单纯用区块链很难实现的功能：灵活的商品查询。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h4 id=&quot;第二节-去中心化why&quot;&gt;第二节 去中心化，why？&lt;/h4&gt;
&lt;p&gt;在开始构建我们的应用之前，非常值得花一分钟时间，来理解为什么要在像以太坊这样的&lt;strong&gt;去中心化平台&lt;/strong&gt;上搭建在线卖场。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;eBay&lt;/strong&gt;或&lt;strong&gt;淘宝&lt;/strong&gt;这样的&lt;strong&gt;C2C电商平台&lt;/strong&gt;已经获得了巨大成功，因为它使得买卖双方都相当便利：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271f5207737765?w=518&amp;amp;h=135&amp;amp;f=png&amp;amp;s=6968&quot; alt=&quot;ebay-taobao 淘宝c2c电商平台&quot;/&gt;&lt;/p&gt;
&lt;p&gt;在互联网成为主流之前，人们只能在小范围内、或者在邻里之间买卖商品。当越来越多的人使用互联网， 出现了像eBay这样的平台，无论来自世界的任何一个地方，你都可以在网上买卖商品。无论是商家还 是消费者，这样的平台都有其价值。&lt;/p&gt;
&lt;p&gt;尽管&lt;strong&gt;eBay&lt;/strong&gt;这样的平台方便了大家，也改善了贸易和经济，但它也存在一些缺点：&lt;/p&gt;
&lt;ol readability=&quot;3&quot;&gt;&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;被平台束缚。参与的商家受制于拥有平台的企业。在任何时候，平台拥有者可以自行决定在是否对某个商家进行封号处理，而如果商家严重依赖于平台，那么账号被封就是一个巨大的打击。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;商家费用高。商家上架商品要交费，售出商品也要交佣金。收费本身并没有错，毕竟eBay这样的平台提供了服务。但是，上架费有时太高了，这导致商家最后盈利很少，或是将成本转嫁到消费者身上。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;数据失控。商家或消费者都无法拥有本应属于自己的数据。评论、购买历史等等所有数据都为平台拥有者所有。比如，如果一个商家想要换一个提供商，或者想要导出商品评论或是其他数据都非常不容易，甚至不可能。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;在&lt;strong&gt;以太坊&lt;/strong&gt;上构建的去中心化电商平台就解决了这些问题：商家的账户不会被封；数据也是公开的，所以很容易导出数据；相对于中心化的平台，交易佣金也会低得多。&lt;/p&gt;
&lt;h4 id=&quot;第三节-初步的功能特性&quot;&gt;第三节 初步的功能特性&lt;/h4&gt;
&lt;p&gt;现在你应该已经理解了为什么要构建去中心化的电商应用，也了解了我们要构建的应用是什么，现在让我们来大致看一下，在这个项目中将要实现的主要功能特性：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271f6597481f51?w=704&amp;amp;h=510&amp;amp;f=png&amp;amp;s=17521&quot; alt=&quot;ebay user case&quot;/&gt;&lt;/p&gt;
&lt;ol readability=&quot;5.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;商品上架&lt;/strong&gt;：应用应该支持卖家上架商品进行销售。我们将实现让任何人自由上架商品的功能。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;商品浏览与搜索&lt;/strong&gt;：应用应该支持买家方便地&lt;strong&gt;浏览商品列表&lt;/strong&gt;。我们会实现浏览商品的功能，以及基于商品类别、拍卖时间等条件进行查询的功能。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;strong&gt;商品拍卖&lt;/strong&gt;：跟eBay一样，我们会实现&lt;strong&gt;维科瑞&lt;/strong&gt;拍卖方式的商品竞价销售。由于&lt;strong&gt;以太坊&lt;/strong&gt;上的一切交易都是公开的，因此我们的实现将会与中心化环境下有所不同。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;资金托管&lt;/strong&gt;：一旦出价结束，商品拍卖有了赢家以后，我们会创建由胜出的买方、卖方和任意第三方参与的托管合约，由&lt;strong&gt;托管合约&lt;/strong&gt;来管理交易资金。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;strong&gt;托管资金保护&lt;/strong&gt;：为了保护托管资金，我们将采用&lt;strong&gt;多重签名&lt;/strong&gt;（2/3）来实现防欺诈保护，即三个参与者有两个同意时，才会将托管资金释放给卖方，或是将托管资金返还给买方。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;为了便于查询，我们会将商品数据同时存在链上和链下（数据库）；同时，为了避免图片等数据占用昂贵的链上存储，我们将把图片和商品描述信息上传到同样&lt;strong&gt;去中心化&lt;/strong&gt;的&lt;strong&gt;IPFS&lt;/strong&gt;网络。&lt;/p&gt;
&lt;h4 id=&quot;第四节-基础知识要求&quot;&gt;第四节 基础知识要求&lt;/h4&gt;
&lt;p&gt;为了顺利地完成本课程的学习，你应该对以下语言/技术有一些了解：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;Solidity/Truffle&lt;/strong&gt;：课程将会深入使用&lt;strong&gt;solidity&lt;/strong&gt;来编写合约。如果你还没有学过，建议你先学习一下以太坊开发DApp入门教程，这样至少写过一两个简单的&lt;strong&gt;合约&lt;/strong&gt;。同时，对&lt;strong&gt;truffle&lt;/strong&gt;开发框架的基本了解也会十分有助于完成本课程。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271f92e9ec2a92?w=500&amp;amp;h=133&amp;amp;f=png&amp;amp;s=7933&quot; alt=&quot;solidity truffle&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;HTML/CSS/JavaScript&lt;/strong&gt;：相比入门课程，本课程将会有更多的HTML和CSS代码。你应该对使用HTML/CSS构建前端有基本的了解。同时，我们将会进一步使用JavaScript。它会在服务端将数据保存到数据库，查询数据库并将结果返回给前端。&lt;strong&gt;web3.js&lt;/strong&gt;用于前端与区块链的交互。为了适用各种背景的学习者，我们已经保持&lt;strong&gt;JavaScript&lt;/strong&gt;代码尽可能地简单。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271f9dabae75ff?w=620&amp;amp;h=150&amp;amp;f=png&amp;amp;s=8063&quot; alt=&quot;html css js web3.js&quot;/&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;strong&gt;Database&lt;/strong&gt;：我们会用&lt;strong&gt;MongoDB&lt;/strong&gt;在链下保存产品信息。无须特别了解MongoDB，但是基本的数据库知识有助于你顺利完成本课程的。&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271fb8fd610840?w=431&amp;amp;h=117&amp;amp;f=png&amp;amp;s=4858&quot; alt=&quot;mongodb&quot;/&gt;&lt;/p&gt;
&lt;h4 id=&quot;第五节-系统架构&quot;&gt;第五节 系统架构&lt;/h4&gt;
&lt;p&gt;在开始着手具体的实现之前，先来看一下在本课程我们将要构建的&lt;strong&gt;去中心化电商DApp&lt;/strong&gt;的&lt;strong&gt;架构&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271fc91d0f0c9f?w=582&amp;amp;h=494&amp;amp;f=png&amp;amp;s=9395&quot; alt=&quot;ebay dapp architecture&quot;/&gt;&lt;/p&gt;
&lt;ol readability=&quot;5.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;Web前端&lt;/strong&gt;：web前端使用&lt;strong&gt;HTML/CSS/JavaScript&lt;/strong&gt;开发，其中大量使用了&lt;strong&gt;web3js&lt;/strong&gt;来访问区块链。用户将会通过这个前端应用来访问&lt;strong&gt;以太坊&lt;/strong&gt;、&lt;strong&gt;IPFS&lt;/strong&gt;和&lt;strong&gt;NodeJS&lt;/strong&gt;服务器。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;strong&gt;以太坊区块链&lt;/strong&gt;：这是去中心化应用的核心，所有的代码（&lt;strong&gt;电商合约&lt;/strong&gt;、&lt;strong&gt;资金托管合约&lt;/strong&gt;）和交易都存储在链上，这包括所有的商品信息、买家的出价信息、商品竞价结果、资金流向投票结果等。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;&lt;strong&gt;MongoDB&lt;/strong&gt;：尽管核心数据存储在&lt;strong&gt;区块链&lt;/strong&gt;上，但是为了方便买家对商品的检索和查询，例如只显示某一类的商品，或者显示即将过期的商品等等，我们会用MongoDB数据库来同步地存储和检索商品信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;NodeJS服务器&lt;/strong&gt;：这是&lt;strong&gt;后端&lt;/strong&gt;服务器，我们会利用它给前端提供&lt;strong&gt;REST&lt;/strong&gt;风格的&lt;strong&gt;API&lt;/strong&gt;来查询商品， 同时，也利用它来响应对前端&lt;strong&gt;静态页面&lt;/strong&gt;的请求。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;&lt;strong&gt;IPFS&lt;/strong&gt;: 当卖家上架一个商品时，前端会商品图片文件和介绍文本上传到&lt;strong&gt;IPFS&lt;/strong&gt;，并将所上传文件的&lt;strong&gt;哈希值&lt;/strong&gt;存到链上。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;&lt;h4 id=&quot;第六节-理解架构的作用&quot;&gt;第六节 理解架构的作用&lt;/h4&gt;
&lt;p&gt;为了帮助理解上一节谈到的那些组件的作用，让我们来看看一下卖家上架一个商品的流程：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16271fe76b32a45c?w=590&amp;amp;h=495&amp;amp;f=png&amp;amp;s=10875&quot; alt=&quot;ebay list item&quot;/&gt;&lt;/p&gt;
&lt;ul readability=&quot;3.5&quot;&gt;&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;(1)前端使用一个&lt;strong&gt;HTML表单&lt;/strong&gt;来采集用户输入的商品细节，例如起拍价、商品图片、描述信息等。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;(2)(3) 前端将商品图片和介绍文本上传到&lt;strong&gt;IPFS&lt;/strong&gt;，并返回所上传内容对应的链接（&lt;strong&gt;哈希&lt;/strong&gt;）。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;(4)(5) 然后，&lt;strong&gt;web前端&lt;/strong&gt;会调用电商合约将&lt;strong&gt;商品信息&lt;/strong&gt;和&lt;strong&gt;IPFS&lt;/strong&gt;链接存储到链上。当合约成功地将商品存入&lt;strong&gt;区块链&lt;/strong&gt;后，就会触发一个&lt;strong&gt;事件&lt;/strong&gt;，该事件中包含了商品所有的信息。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;(6)(7)(8) &lt;strong&gt;NodeJS&lt;/strong&gt;服务器监听&lt;strong&gt;区块链事件&lt;/strong&gt;，当事件被&lt;strong&gt;电商合约触发&lt;/strong&gt;时，服务器读取事件内容并将商品信息插入到&lt;strong&gt;MongoDB&lt;/strong&gt;数据库中。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;当开始具体实现商品上架这一特性时，我们将重温这一流程。&lt;/p&gt;
&lt;h4 id=&quot;第七节-敏捷开发&quot;&gt;第七节 敏捷开发&lt;/h4&gt;
&lt;p&gt;我们将采用&lt;strong&gt;敏捷开发&lt;/strong&gt;的思想来实现去中心化电商&lt;strong&gt;DApp&lt;/strong&gt;：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/29/16272000f473ee30?w=727&amp;amp;h=604&amp;amp;f=png&amp;amp;s=38368&quot; alt=&quot;scrum way&quot;/&gt;&lt;/p&gt;
&lt;p&gt;我们将全部的产品特性分别列入8个&lt;strong&gt;迭代&lt;/strong&gt;周期，通过每一次的&lt;strong&gt;冲刺&lt;/strong&gt;（&lt;strong&gt;sprint&lt;/strong&gt;），我们都将得到一个可以发布的版本：&lt;/p&gt;
&lt;p&gt;前两个&lt;strong&gt;冲刺&lt;/strong&gt;主要集中在使用&lt;strong&gt;solidity&lt;/strong&gt;和&lt;strong&gt;truffle框架&lt;/strong&gt;实现电商合约方面，这包括&lt;strong&gt;合约的设计、开发 、编译、部署与测试&lt;/strong&gt;：&lt;/p&gt;
&lt;ul readability=&quot;5&quot;&gt;&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;sprint-1：实现电商合约的商品上架和展示方法。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;sprint-2：实现电商合约的商品竞价和出价揭示方法。&lt;br/&gt;在电商合约基本实现之后，接下来的三个冲刺主要集中在前端用户界面的构建方面，这包括使用web3 与合约的交互，以及通过ipfs的开发接口上传图片等数据交互，当然，还有必不可少的DOM操作：&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;sprint-3：为买家提供商品浏览界面。&lt;/li&gt;
&lt;li&gt;sprint-4：为卖家提供商品上架操作界面。&lt;/li&gt;
&lt;li readability=&quot;1&quot;&gt;
&lt;p&gt;sprint-5：为买家提供商品详情界面、竞价表单以及出价揭示表单。在接下来的两个冲刺里，我们将首先实现资金托管合约，用来管理竞价结束后胜出买家的资金；然后实现相应的用户操作界面。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;sprint-6：实现资金托管合约。&lt;/li&gt;
&lt;li readability=&quot;0&quot;&gt;
&lt;p&gt;sprint-7：基于资金托管合约，为参与托管各方提供操作界面。最后，为了便于商品的查询检索，我们将使用MongoDB来实现商品数据的链下存储。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;-1&quot;&gt;
&lt;p&gt;sprint-8：实现链下数据的同步与数据查询。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</description>
<pubDate>Fri, 30 Mar 2018 07:30:00 +0000</pubDate>
<dc:creator>以太坊开发</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/helloworld2018/p/8676484.html</dc:identifier>
</item>
<item>
<title>金三银四跳槽季，BAT美团滴滴java面试大纲（带答案版）之三：多线程synchronized - xiaoyang_</title>
<link>http://www.cnblogs.com/xyang/p/8669975.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xyang/p/8669975.html</guid>
<description>&lt;p&gt;继续面试大纲系列文章。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;（&lt;/strong&gt;强烈推荐关注公众号：pnxsxb   ，有更多的资源，还经常举行互动活动）也可以长按识别以下二维码关注：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/177141/201803/177141-20180328180438006-1338081668.jpg&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;　　从这一篇开始，我们进入ava编程中的一个重要领域---多线程！多线程就像武学中对的吸星大法，理解透了用好了可以得道成仙，俯瞰芸芸众生；而滥用则会遭其反噬。&lt;/p&gt;
&lt;p&gt;　　在多线程编程中要渡的首个“劫”，则是Synchronized。了解其底层实现，无论是在面试中还是在平时工作中，都大有裨益。我们知其然，知其所以然，才能得心应手少挖坑。&lt;/p&gt;
&lt;p&gt;　　我们知道，多线程的核心思想是通过增加线程数量来并发的运行，来提高效率，也就是数量决胜论，而不是质量决胜（提高每个线程的处理能力）。多线程编程中面临的最大挑战，是如何解决多个线程同时修改一个公用的变量所带来的变量值不确定性问题。顺着这个思路分析，常用办法，无非就是，要么对变量动手，在一个线程修改时，变量值被锁定。要么是对修改的操作动手，在该段代码执行时，对其加锁，其他线程不可以在同一时刻进入该段代码执行。&lt;/p&gt;
&lt;p&gt;　　Synchronized，正是实现了后一种办法。&lt;/p&gt;



&lt;ol&gt;&lt;li&gt;&lt;strong&gt;问：&lt;/strong&gt;你平时涉及到多线程编程多不多？谈谈你对Synchronized锁的理解&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;分析：&lt;/strong&gt;多从实现原理，工作机制来描述&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;答：&lt;/strong&gt;
&lt;ol readability=&quot;-2&quot;&gt;&lt;li readability=&quot;3&quot;&gt;&lt;strong&gt;　　&lt;/strong&gt;在多线程编程中，为了达到线程安全的目的，我们往往通过加锁的方式来实现。而Synchronized正是java提供给我们的非常重要的锁之一。它属于jvm级别加锁，底层实现是：在编译过程中，在指令级别加入一些标识来实现的。例如，同步代码块，会在同步代码块首尾加入&lt;strong&gt;monitorenter和monitorexit字节码&lt;/strong&gt;指令，这两个指令都需要一个reference类型的参数，指明要加锁和解锁的对象，同步方法则是通过在修饰符上加&lt;strong&gt;acc_synchronized&lt;/strong&gt;标识实现。在执行到这些指令（标识）时，本质都是获取、占有、释放monitor锁对象实现互斥，也就是说，同一时刻，只能有一个线程能成功的获取到这个锁对象。我们看一段加了synchronized关键字的代码编译后的字节码。编译前：
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
&lt;span&gt;1&lt;/span&gt; &lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt;&lt;span&gt; test {
&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;   &lt;span&gt;public&lt;/span&gt;&lt;span&gt; test() {
&lt;/span&gt;&lt;span&gt;3&lt;/span&gt; &lt;span&gt;  }
&lt;/span&gt;&lt;span&gt;4&lt;/span&gt;   &lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(String[] args) {
&lt;/span&gt;&lt;span&gt;5&lt;/span&gt;     &lt;span&gt;synchronized&lt;/span&gt;(&lt;span&gt;new&lt;/span&gt;&lt;span&gt; Object()){
&lt;/span&gt;&lt;span&gt;6&lt;/span&gt;         &lt;span&gt;int&lt;/span&gt; i = 0&lt;span&gt;;
&lt;/span&gt;&lt;span&gt;7&lt;/span&gt; &lt;span&gt;    }
&lt;/span&gt;&lt;span&gt;8&lt;/span&gt; &lt;span&gt;  }
&lt;/span&gt;&lt;span&gt;9&lt;/span&gt; }
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;编译后：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; test &lt;span&gt;extends&lt;/span&gt;&lt;span&gt; java.lang.Object{
&lt;/span&gt;&lt;span&gt;public&lt;/span&gt;&lt;span&gt; test();
  Code:
   &lt;/span&gt;0&lt;span&gt;:   aload_0
   &lt;/span&gt;1:   invokespecial   #1; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Method java/lang/Object.&quot;&quot;:()V&lt;/span&gt;
   4&lt;span&gt;:   nop
   &lt;/span&gt;5:   &lt;span&gt;return&lt;/span&gt;

&lt;span&gt;public&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;void&lt;/span&gt;&lt;span&gt; main(java.lang.String[]);
  Code:
   &lt;/span&gt;0:   &lt;span&gt;new&lt;/span&gt;     #2; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;class Object&lt;/span&gt;
   3&lt;span&gt;:   dup
   &lt;/span&gt;4:   invokespecial   #1; &lt;span&gt;//&lt;/span&gt;&lt;span&gt;Method java/lang/Object.&quot;&quot;:()V&lt;/span&gt;
   7&lt;span&gt;:   dup
   &lt;/span&gt;8&lt;span&gt;:   astore_1
   &lt;/span&gt;9:   monitorenter &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Enter the monitor associated with object &lt;/span&gt;
   10&lt;span&gt;:  iconst_0
   &lt;/span&gt;11&lt;span&gt;:  istore_2
   &lt;/span&gt;12&lt;span&gt;:  nop
   &lt;/span&gt;13&lt;span&gt;:  aload_1
   &lt;/span&gt;14:  monitorexit &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Exit the monitor associated with object &lt;/span&gt;
   15:  &lt;span&gt;goto&lt;/span&gt;    23
   18&lt;span&gt;:  astore_3
   &lt;/span&gt;19&lt;span&gt;:  aload_1
   &lt;/span&gt;20:  monitorexit &lt;span&gt;//&lt;/span&gt;&lt;span&gt; Be sure to exit monitor... &lt;/span&gt;
   21&lt;span&gt;:  aload_3
   &lt;/span&gt;22&lt;span&gt;:  athrow
   &lt;/span&gt;23&lt;span&gt;:  nop
   &lt;/span&gt;24:  &lt;span&gt;return&lt;/span&gt;&lt;span&gt;
  Exception table:
   from   to  target type
    &lt;/span&gt;10    15    18&lt;span&gt;   any
    &lt;/span&gt;18    21    18&lt;span&gt;   any

}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;重点关注14行，和20行。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;　在使用Synchronized时，用到的方法是wait和notify（或notifyAll），他们的原理是，调用wait方法后，线程让出cpu资源，释放锁，进入waiting状态，进入等待队列【第一个队列】。当有其他线程调用了notify或者notifyAll唤醒时，会将等待队列里的线程对象，移入阻塞队列【第二个队列】，状态是blocked，等待锁被释放后（这个释放时机，由虚拟机来决定，人为无法干预），开始竞争锁。&lt;/li&gt;
&lt;li&gt;Synchronized无法中断正在阻塞队列或者等待队列的线程。&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;strong&gt;　　4.扩展：&lt;/strong&gt;Synchronized提供了以下几种类型的锁：偏向锁、轻量级锁、重量级锁。在大部分情况下，并不存在多线程竞争，更常见的是一个线程多次获取同一个锁。那么很多的消耗，其实是在锁的获取与释放上。Synchronized一直在被优化，可以说Synchronized虽然推出的较早，但是效率并不比后来推出的Lock差。&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;　偏向锁：在jdk1.6中引入，目的是消除在无竞争情况下的同步原语（翻译成人话就是，即使加了synchronized关键字，但是在没有竞争的时候，没必要去做获取-持有-释放锁对象的操作，提高程序运行性能）。怎么做呢？当锁对象第一次被线程A获取时，虚拟机会把对象头中的标志位设置为01，也就是代表偏向模式。同时把代表这个线程A的ID，通过CAS方式，更新到锁对象头的MarkWord中。相同的线程下次再次申请锁的时候，只需要简单的比较线程ID即可。以上操作成功，则成功进入到同步代码块。如果此时有其他线程B来竞争该锁，分两种情况做不同的处理：
&lt;ol&gt;&lt;li&gt;&lt;em&gt;如果线程A已执行完（并不会主动的修改锁对象的状态），会直接撤销锁对象的状态为未锁定，标志位为00；&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;em&gt;如果线程A还在持有该锁，则锁升级为轻量级锁。　　&lt;/em&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;轻量级锁：也是JDK1.6中引入的，轻量级，是相对于使用互斥量的重量级锁来说的。线程发生竞争锁的时候，不会直接进入阻塞状态，而是先尝试做CAS修改操作，进入自旋，这个过程避免了线程状态切换的开销，不过要消耗cpu资源。详细过程是：
&lt;ol&gt;&lt;li&gt;　　线程尝试进入同步代码块，如果锁对象未被锁定，在当前线程对应的栈帧中，建立锁记录的空间，用于存储锁对象Mark Word的拷贝。&lt;/li&gt;
&lt;li&gt;然后JVM用CAS方式尝试将锁对象的MarkWord内容替换为指向前述“锁记录”的指针。如果成功，当前线程则持有了锁，处于轻量级锁定状态；如果失败，会首先检查当前MarkWord是否已经指向当前线程栈帧的“锁记录”，如果是，就说明当前线程已经拥有了这个锁，直接重入即可。否则就表明是其他线程持有锁，那么进入自旋（其实就是重试CAS修改操作）。&lt;/li&gt;
&lt;li&gt;释放锁时，是使用CAS来讲MarkWord和“锁记录”里的内容互换。如果成功，成功释放；如果事变，表明当前锁存在竞争（被其他线程修改了MarkWord里的数据），此时，锁会升级为重量级锁。&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;重量级锁：也就是我们使用的互斥量方式实现的锁，当存在多线程竞争时，只要没拿到锁，就会进入阻塞状态，主要消耗是在阻塞-唤起-阻塞-唤起的线程状态切换上。&lt;/li&gt;
&lt;li&gt;上面介绍的三种类型的锁，是JVM来负责管理使用哪种类型锁，以及锁的升级（注意，没有降级）。&lt;/li&gt;
&lt;li&gt;这里涉及到锁升级，对象头MarkWord等内容，如果详细说，可能又是一大篇文章了，如果大家感兴趣，可以另起一篇。&lt;/li&gt;
&lt;li&gt;synchronized就先介绍到这里，下一篇预告：&lt;strong&gt;ReentrantLock相关&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;如果你看的爽，请点击右下角的“推荐”，是对小端坚持分享原创的最大鼓励。也可以关注小端的个人公众号 ：   pnxsxb  ，会分享更多的原创技术文章。&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;strong&gt;欢迎扫描以下二维码：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/177141/201803/177141-20180327102908200-2000617773.jpg&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 30 Mar 2018 06:39:00 +0000</pubDate>
<dc:creator>xiaoyang_</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xyang/p/8669975.html</dc:identifier>
</item>
<item>
<title>node.js与比特币（typescript实现） - royalrover</title>
<link>http://www.cnblogs.com/accordion/p/8675780.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/accordion/p/8675780.html</guid>
<description>&lt;h2 id=&quot;btc中的utxo模型&quot;&gt;BTC中的utxo模型&lt;/h2&gt;
&lt;p&gt;BTC中引入了许多创新的概念与技术，&lt;strong&gt;区块链、PoW共识、RSA加密、萌芽阶段的智能合约&lt;/strong&gt;等名词是经常被圈内人所提及，诚然这些创新的实现使得BTC变成了一种有可靠性和安全性保证的封闭生态系统，但是在这个BTC生态中如果没有搭配区块链模式的转账模块，那么货币的流通属性也就无从谈起了。若要实现转账交易模块， “是否采用传统的账户模型实现交易；如何在区块链上存储交易信息，如何实现信息压缩；如何验证交易信息；系统的最大交易并发量”等问题确实值得思考。&lt;/p&gt;
&lt;p&gt;BTC一一解决了这些，它放弃了传统的基于账户的交易模型，而是采用基于区块链存储的utxo（unspent transaction output）模型。笔者尝试分析了为什么不使用传统的账户模型：&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;BTC的存储单元为区块链，区块链的数据结构本质上是单向链表，它并不是传统的关系型数据库，无法新建账户表&lt;/li&gt;
&lt;li&gt;存储压力。如果采用传统的方式，则账户表会随着时间的推移不停地增大，为后续的表的分片与备份造成很大困难&lt;/li&gt;
&lt;li&gt;易造成隐私泄露。账户表的信息会直观的暴露余额等敏感信息&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;utxo模型则很有技巧的避免了这些，在utxo模型下实现的每一笔交易，都不需要显式的提供转账地址和接收地址（utxo中没有账户，也不需要提供地址），只需提供这比交易的 &lt;strong&gt;交易输入&lt;/strong&gt; 和 &lt;strong&gt;交易输出&lt;/strong&gt; 即可，而交易输入与交易输出又是什么？&lt;/p&gt;
&lt;p&gt;交易输入指向一笔交易输出，而且 “这笔交易输出是可以供转账者消费的，因此这笔交易输出也被称作utxo（未花费交易输出）”，它包括“某一笔交易、指向这笔交易的某个可用交易输出的索引值和一个解锁脚本”。这个解锁脚本用来验证某笔可用的消费输出是否可以被提供解锁脚本的人所使用。&lt;/p&gt;
&lt;p&gt;交易输出则是存储BTC“余额”的一个数据结构，它广义上包括两部分：BTC的数量和一个锁定脚本。 BTC的数量可以理解为余额，表示这笔交易产生的结果；而锁定脚本则是用某种算法锁定这个BTC余额，直到某人可以提供解锁该脚本的数据钥匙，这比数额BTC才会被这个人所消费。&lt;/p&gt;
&lt;p&gt;从这个角度看，一笔交易会包含若干个交易输入，同时产生若干个交易输出。这些交易输入都会指向之前某笔交易的未被消费输出（utxo），并提供各自的解锁脚本以证明这些utxo里的BTC是属于转账方；同时将转账产生的所有交易输出用对应方的公钥进行加密（此处是为了更好的理解才解释为公钥加密，实质上是公钥哈希，即btc地址进行逆向base58编码的一段字符串），锁定这几笔交易输出，等待交易输入中的解锁脚本解锁。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;data:image/jpeg;base64,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&quot; alt=&quot;utxo转账图示&quot;/&gt;&lt;/p&gt;
&lt;p&gt;所以，BTC没有账户的概念，所有的“余额”都在区块链上，不过这些余额都已经被加密了，只有提供私钥和签名的人才可以使用对应的utxo的余额，因此这就是为什么BTC持有者必须保存好自己的私钥的原因。&lt;/p&gt;
&lt;h2 id=&quot;utxo的node.js实现&quot;&gt;UTXO的node.js实现&lt;/h2&gt;
&lt;h3 id=&quot;交易输入&quot;&gt;交易输入&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;export class Input {
    private txId: string;
    private outputIndex: number;
    private unlockScript: string;

    public get $txId(): string {
        return this.txId;
    }

    public set $txId(value: string) {
        this.txId = value;
    }
    
    public get $outputIndex(): number {
        return this.outputIndex;
    }

    public set $outputIndex(value: number) {
        this.outputIndex = value;
    }

    public get $unlockScript(): string {
        return this.unlockScript;
    }

    public set $unlockScript(value: string) {
        this.unlockScript = value;
    }
    
    constructor(txId: string, index: number, unlockScript: string){
        this.txId = txId;
        this.outputIndex = index;
        this.unlockScript = unlockScript;
    }

    // 反序列化，进行类型转换
    public static createInputsFromUnserialize(objs: Array&amp;lt;Input&amp;gt;){
        let ins = [];
        objs.forEach((obj)=&amp;gt;{
            ins.push(new Input(obj.txId,obj.outputIndex,obj.unlockScript));
        });
        return ins;
    }
    
    canUnlock (privateKey: string): boolean{
        if(privateKey == this.unlockScript){
            return true;
        }else{
            return false;
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;私有属性txId标识 “某个可用的utxo所属的交易”，是一串sha256编码的字符串；&lt;br/&gt;outputIndex表示 “这个可用的utxo在对应交易的序号值”；&lt;br/&gt;unlockScript则是解锁脚本，此处并未完全按照BTC的原型去实现，而是简单的验证使用者的私钥来实现鉴权，原理上仍遵从BTC的思想。&lt;/p&gt;
&lt;h3 id=&quot;交易输出&quot;&gt;交易输出&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;import * as rsaConfig from '../../rsa.json';
export class Output {
    private value: number;
    // 锁定脚本，需要使用UTXO归属者用私钥进行签名通过
    // 当解锁UTXO成功后，此UTXO变为下一个交易的交易输入，同时使用接收方的地址（公钥）锁定本次交易的交易输出，
    // 等待接收方使用私钥签名使用该UTXO
    // 因此，btc没有账户的概念，所有的“钱”由自己的公钥所加密保存，只有用自己的私钥才能使用这些钱（即解锁了UTXO的解锁脚本）
    private lockScript: string;

    // 该属性仅仅在交易时使用，设置属性
    private txId: string;

    // 该属性仅仅在交易时使用，设置属性
    private index: number;

    public get $index(): number {
        return this.index;
    }

    public set $index(value: number) {
        this.index = value;
    }
    
    public get $txId(): string {
        return this.txId;
    }

    public set $txId(value: string) {
        this.txId = value;
    }
    

    public get $value(): number {
        return this.value;
    }

    public set $value(value: number) {
        this.value = value;
    }

    /* public get $lockScript(): string {
        return this.lockScript;
    }

    public set $lockScript(value: string) {
        this.lockScript = value;
    } */
    
    constructor(value: number,publicKey: string){
        this.value = value;
        this.lockScript = publicKey;
    }

    // 反序列化，进行类型转换
    public static createOnputsFromUnserialize(objs: Array&amp;lt;Output&amp;gt;){
        let outs = [];
        objs.forEach((obj)=&amp;gt;{
            outs.push(new Output(obj.value,obj.lockScript));
        });
        return outs;
    }

    public canUnlock(privateKey: string): boolean{
        if(privateKey == rsaConfig[this.lockScript]){
            return true;
        }else{
            return false;
        }
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;交易输出中的value属性标识当前utxo的余额，即BTC个数；&lt;br/&gt;lockScript属性为锁定脚本，在我们的简易实现中就为接收方的公钥，并不是BTC中的逆波兰式，但大体原理相同，都需要提供私钥来进行解密。&lt;/p&gt;
&lt;h2 id=&quot;一笔交易&quot;&gt;一笔交易&lt;/h2&gt;
&lt;p&gt;一笔交易，包含了若干个交易输入和交易输出，同时也提供了一个txId唯一的标识这比交易。从结构上看是这样的：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;export class Transaction {
    private txId: string;
    private inputTxs: Array&amp;lt;Input&amp;gt;;
    private outputTxs: Array&amp;lt;Output&amp;gt;;

    constructor(txId: string, inputs: Array&amp;lt;Input&amp;gt;, outputs: Array&amp;lt;Output&amp;gt;){
        this.txId = txId;
        this.inputTxs = inputs;
        this.outputTxs = outputs;
    }

    public get $txId(): string {
        return this.txId;
    }

    public set $txId(value: string) {
        this.txId = value;
    }

    public get $inputTxs(): Array&amp;lt;Input&amp;gt; {
        return this.inputTxs;
    }

    public set $inputTxs(value: Array&amp;lt;Input&amp;gt;) {
        this.inputTxs = value;
    }

    public get $outputTxs(): Array&amp;lt;Output&amp;gt; {
        return this.outputTxs;
    }

    public set $outputTxs(value: Array&amp;lt;Output&amp;gt;) {
        this.outputTxs = value;
    }
    /* 
        1.交易结构各字段序列化为字节数组
        2.把字节数组拼接为支付串
        3.对支付串计算两次SHA256 得到交易hash 
    */
    public setTxId(){
        let sha256 = crypto.createHash('sha256');
        sha256.update(JSON.stringify(this.inputTxs) + JSON.stringify(this.outputTxs) + Date.now(),'utf8');
        this.txId = sha256.digest('hex');
    }

}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;其中 txId的计算这里并没有严格按照BTC实现的那样进行计算，而是简单的进行对象序列化进行一次sha256。&lt;/p&gt;
&lt;h3 id=&quot;coinbase交易&quot;&gt;coinbase交易&lt;/h3&gt;
&lt;p&gt;我们都知道得到比特币需要挖矿，其实挖矿也属于一种交易，不过是一种没有确定交易输入的一种交易，它也被称作coinbase交易。coinbase交易在每一个区块中都会存在，它的总额包括了系统针对矿工打包交易过程的奖励以及其他转账方提供的手续费，如下图：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://si.geilicdn.com/hz_img_04ae00000162754b523e0a02685e_2378_1230_unadjust.png&quot; alt=&quot;coinbase交易&quot;/&gt;&lt;/p&gt;
&lt;p&gt;因此，创建一个coinbase交易也很容易&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    // coinbase交易用于给矿工奖励，input为空，output为矿工报酬
    public static createCoinbaseTx(pubKey: string, info: string){
        let input = new Input('',-1,info);
        let output = new Output(AWARD, pubKey);
        let tx = new Transaction('',[input],[output])
        tx.setTxId();
        return tx;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在我们的实现中，只需提供锁定utxo的公钥以及一串描述字符串即可，最后设置交易的txId，完成coinbase交易的创建。&lt;/p&gt;
&lt;p&gt;也提供了识别coinbase交易的方法：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public static isCoinbaseTx(tx: Transaction){
    if(tx.$inputTxs.length == 1 &amp;amp;&amp;amp; tx.$inputTxs[0].$outputIndex == -1 &amp;amp;&amp;amp; tx.$inputTxs[0].$txId == ''){
        return true;
    }else{
        return false;
    }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;至此，coinbase交易就完成了，这是最简单的一种交易，并没有涉及到转账方，也就是交易输入。&lt;/p&gt;
&lt;h3 id=&quot;转账交易&quot;&gt;转账交易&lt;/h3&gt;
&lt;p&gt;使用BTC就避免不了转账，转账事务在utxo模型的实现就是添加了一笔Transaction到某个区块而已。每一笔交易都需要交易输入和交易输出，因此在BTC中，转账的核心就是找到转账方的utxo进行消费，同时将指定数量的BTC划到指定的消费输出上，如果仍有剩余，则找零至自己的消费输出。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;// 创建转账交易
public static createTransaction(from: string, fromPubkey: string, fromKey: string, to: string, toPubkey: string, coin: number){
    let outputs = this.findUTXOToTransfer(fromKey, coin);
    console.log(`UTXOToTransfer： ${JSON.stringify(outputs)}, from: ${from} to ${to} transfer ${coin}`)
    let inputTx = [], sum = 0, outputTx = [];
    outputs.forEach((o)=&amp;gt;{
        sum += o.$value;
        inputTx.push(new Input(o.$txId,o.$index,fromKey));
    });

    if(sum &amp;lt; coin){
        throw Error(`余额不足，转账失败! from ${from} to ${to} transfer ${coin}btc, but only have ${sum}btc`);
    }

    // 公钥锁住脚本
    outputTx.push(new Output(coin,toPubkey));
    if(sum &amp;gt; coin){
        outputTx.push(new Output(sum-coin,fromPubkey));
    }
    let tx = new Transaction('',inputTx,outputTx);
    tx.setTxId();
    return tx;
}   &lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;创建一个交易，需要提供转账方的地址（公钥哈希）、转账方的公钥和私钥、接收方的地址、接收方的公钥以及转账的BTC数量。这笔交易由转账发发起，因此需要提供转账方的私钥进行解锁脚本。&lt;/p&gt;
&lt;p&gt;首先，通过 &lt;strong&gt;findUTXOToTransfer&lt;/strong&gt; 找到满足转账数量的可用的utxo，它需要提供转账方的私钥以及转账数量；&lt;br/&gt;接下来根据获得的可用utxo，进行创建对应的交易输入；&lt;br/&gt;然后用接收方的公钥加密交易输出，同时如果有余额的化找零给自己，用自己的公钥加密；&lt;br/&gt;最后根据得到的交易输入与交易输出，创建一笔交易，计算txId，加入到区块中（我们的demo是在单机下进行模拟，并未实现多播），等待挖矿。&lt;/p&gt;
&lt;p&gt;转账的核心在于 &lt;strong&gt;findUTXOToTransfer&lt;/strong&gt;，在findUTXOToTransfer中，通过调用 &lt;strong&gt;getAllUnspentOutputTx&lt;/strong&gt;拿到所有的可用的utxo，并筛选出满足给定数量BTC的utxo。&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;public static getAllUnspentOutputTx(secreteKey: string): Array&amp;lt;Transaction&amp;gt;{
    let outputIndexHash: Object = this.getAllSpentOutput(secreteKey);
    let unspentOutputsTx = [];
    let keys = Object.keys(outputIndexHash);
    let block = BlockDao.getSingletonInstance().getBlock(chain.$lastACKHash);
    while(block &amp;amp;&amp;amp; block instanceof Block){
        block.$txs &amp;amp;&amp;amp; block.$txs.forEach((tx)=&amp;gt;{
            if(keys.includes(tx.$txId)){
                tx.$outputTxs.forEach((output,i)=&amp;gt;{
                    // 过滤已消费的output
                    if(i == outputIndexHash[tx.$txId])
                        return;
                    
                    if(output.canUnlock(secreteKey)){
                        unspentOutputsTx.push(tx);
                    }    
                });
            }else{
                for(let i=0,len=tx.$outputTxs.length;i&amp;lt;len;i++){
                    let output = tx.$outputTxs[i];
                    if(output.canUnlock(secreteKey)){
                        unspentOutputsTx.push(tx);
                        break;
                    }    
                }
            }
        });
        block = BlockDao.getSingletonInstance().getBlock(block.$prevHash);
    }
    return unspentOutputsTx;
}&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;在getAllUnspentOutputTx中，通过 &lt;strong&gt;getAllSpentOutput&lt;/strong&gt; 遍历本地持久化的区块链，拿到所有的可供消费utxo，这些utxo并不仅仅属于转账方，因此需要在针对每个utxo尝试进行验证逻辑，即output.canUnlock(secreteKey)。验证通过则证明这是属于转账方的BTC，可以用于交易。&lt;/p&gt;
&lt;p&gt;在getAllSpentOutput中，通过遍历每一个交易输入获取它指向前面交易的某个utxo来得到所有的utxo，当然对于coinbase交易我们无法找到他的交易输入，因此会进行过滤。&lt;/p&gt;
&lt;p&gt;至此，utxo的转账流程已经完成，下面需要做的就是把这比交易加入到区块中了，这已不是本文的核心。&lt;/p&gt;
&lt;h2 id=&quot;尾声&quot;&gt;尾声&lt;/h2&gt;
&lt;p&gt;本文所讲的utxo示例是基于作者对BTC实现的基础上的简单实现，有不当之处还请读者指出。另外，本文的代码开源在 &lt;a href=&quot;https://github.com/royalrover/ts-btc&quot; class=&quot;uri&quot;&gt;https://github.com/royalrover/ts-btc&lt;/a&gt; 的 &lt;strong&gt;feature/utxo分支&lt;/strong&gt; 上，希望大家一起提建议！&lt;/p&gt;
</description>
<pubDate>Fri, 30 Mar 2018 05:50:00 +0000</pubDate>
<dc:creator>royalrover</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/accordion/p/8675780.html</dc:identifier>
</item>
<item>
<title>iPhone页面的常用调试方法 - -渔人码头-</title>
<link>http://www.cnblogs.com/imwtr/p/8675701.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/imwtr/p/8675701.html</guid>
<description>&lt;blockquote readability=&quot;13.233576642336&quot;&gt;
&lt;p&gt; &lt;span&gt;在iPhone中调试，大体上与上文 &lt;/span&gt;&lt;a href=&quot;http://www.cnblogs.com/imwtr/p/8445031.html&quot; rel=&quot;nofollow&quot;&gt;安卓中的移动页面调试&lt;/a&gt;&lt;span&gt; 类似，区别主要是iOS系统中的一些限制，导致某些工具无法使用。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;本文基于此，简要介绍在iPhone中如何调试页面。&lt;/p&gt;
&lt;p&gt;最终可以实现在Mac平台使用Safari（或结合ios_webkit_dubug_proxy使用Chrome）调试手机中Safari的页面，结合Charles进行抓包请求断点，再通过微信ipa包重签名来调试微信的WKWebView&lt;/p&gt;
&lt;p&gt;在Windows中结合Fiddler与ios_webkit_debug_proxy中转实现Chrome调试手机的Safari浏览器&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;iPhone页面的常用调试方法-一、能够访问页面&quot;&gt;&lt;span&gt;一、能够访问页面&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;某些页面需要设置HOST才能进行访问，在iPhone上不好设置HOST，所以需要一些代理工具帮助我们&lt;/p&gt;
&lt;p&gt;除了Windows平台中常用的代理调试工具Fiddler之外，还可以使用Mac中的常用代理工具 Charles&lt;/p&gt;
&lt;h3 id=&quot;iPhone页面的常用调试方法-Fiddler&quot;&gt;&lt;strong&gt;Fiddler&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;与上文类似，在iPhone中的WiFi设置里面，设置代理为Windows的 ip:host，如果需要访问HTTPS的页面还需要设置证书&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124256809-244723833.png&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124350823-1608582519.png&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124441324-104506968.png&quot; alt=&quot;&quot;/&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124504736-90287717.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;iPhone页面的常用调试方法-Charles&quot;&gt;&lt;strong&gt;Charles&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;在手机上设置好代理后，访问页面时在Charles中统一请求接入即可&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124544253-2082372392.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;当需要进行HTTPS页面的访问时，也需要在Mac和iPhone中都设置好证书&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124648501-1774691005.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 安装后可在Mac证书列表中看到&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124818830-117111309.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;并设置相关的域&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124904388-603852295.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;根据Charles的提示，手机连接代理之后访问 chls.pro/ssl 安装证书，再访问即可&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330124935484-159808175.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125003619-1527155821.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;而对于某些需要账号授权登陆的页面，涉及到Cookie的模拟登录，可以使用这两个代理工具进行设置&lt;/p&gt;
&lt;p&gt;在Fiddler中可以按前文安卓的配置&lt;/p&gt;
&lt;p&gt;在Charles中也有对应的方法&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125140689-506950788.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h2 id=&quot;iPhone页面的常用调试方法-二、审查元素查看页面输出&quot;&gt;&lt;span&gt;二、审查元素查看页面输出&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;可以使用Chrome的设备模拟来查看页面&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125159878-592829053.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;不过对于iPhone的调试，还需要进行真机的页面查看&lt;/p&gt;
&lt;p&gt;一般来说，iPhone中的页面是在Safari浏览器中查看的&lt;/p&gt;
&lt;p&gt;微信中的内置浏览器是&lt;a class=&quot;external-link&quot; href=&quot;https://www.cnblogs.com/cynthia-wuqian/p/6268359.html&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;WKWebView内核或 UIWebView&lt;/a&gt; ,WKWebView的版本依赖于IOS的版本。其中 UIWebViewer 只是系统浏览器的一部分组建，功能不全或有所 &lt;a class=&quot;external-link&quot; href=&quot;http://36kr.com/p/123075.html&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;限制&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;所以某些情况下可直接在手机的Safari浏览器进行查看调试，某些情况还是少不了在微信内置浏览器中进行&lt;/p&gt;
&lt;h3 id=&quot;iPhone页面的常用调试方法-Safari远程调试&quot;&gt;Safari远程调试&lt;/h3&gt;
&lt;p&gt;这个方法需要结合Mac的Safari浏览器使用，通过Mac与iPhone进行连接来调试&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125253168-1410533176.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;手机上访问某个页面，选取进行调试，将会打开Safari的开发者工具，可以看到熟悉的几个面板&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125334354-1777402500.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; &lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125446220-534877569.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;除了审查元素查看日志之外，还可进行脚本的断点调试，查看网络请求等操作。&lt;/p&gt;
&lt;p&gt;不过功能相对Chrome DevTools来说，相对简单了些，对于简单的页面可直接使用&lt;/p&gt;
&lt;p&gt;对于高版本的iOS系统（如iPhone 7），进行远程调试的Mac主机的系统版本也有限制，并非任何Mac和iPhone之间都能进行调试&lt;/p&gt;
&lt;p&gt;此外，这种远程调试仅支持调试手机的Safari浏览器，无法调试微信的内置浏览器&lt;/p&gt;
&lt;h3 id=&quot;iPhone页面的常用调试方法-基于Weinre的调试&quot;&gt;基于Weinre的调试&lt;/h3&gt;
&lt;p&gt;参考前文&lt;/p&gt;
&lt;h3 id=&quot;iPhone页面的常用调试方法-基于微信开发者工具的调试&quot;&gt;基于微信开发者工具的调试&lt;/h3&gt;
&lt;p&gt;参考前文&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125618442-463977610.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;与前文类似，这两种方法都能进行基础的页面信息查看，不支持HTTPS，使用spy-debugger可支持HTTPS&lt;/p&gt;
&lt;h3 id=&quot;iPhone页面的常用调试方法-基于spy-debugger的调试&quot;&gt;基于 spy-debugger 的调试&lt;/h3&gt;
&lt;p&gt;参考前文，设置好相应的HTTPS证书&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125653574-1018642825.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;h3 id=&quot;iPhone页面的常用调试方法-基于ios-webkit-debug-proxy的调试&quot;&gt;基于 ios-webkit-debug-proxy 的调试&lt;/h3&gt;
&lt;p&gt;Mac上的safari调试功能不够好，而且不能调试微信中的页面，使用weinre只能简单地调试微信页面，无法进行脚本断点等高级功能&lt;/p&gt;
&lt;p&gt;最好的办法莫过于让iPhone可Chrome Devtools进行连接，充分利用好的调试工具与现有的平台，进行调试。&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;external-link&quot; href=&quot;https://github.com/google/ios-webkit-debug-proxy&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;ios-webkit-debug-proxy&lt;/a&gt; 支持多平台，这么来说我们可以不借助Mac主机实现调试iPhone的需求。不过配置过程稍微有些繁琐&lt;/p&gt;
&lt;h4 id=&quot;iPhone页面的常用调试方法-在Mac中安装&quot;&gt;&lt;strong&gt;在Mac中安装&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330125825148-950266680.png&quot; alt=&quot;&quot;/&gt;&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;在前面install前面加上参数是因为brew的update太慢了，手动设置成不需要update&lt;/p&gt;
&lt;p&gt;另外，可以看到报错了，在这里设置权限即可&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130016907-1515631019.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;在手机打开某个页面，然后访问 &lt;a class=&quot;external-link&quot; href=&quot;http://localhost:9221/&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;localhost:9221&lt;/a&gt; ，即可进行调试&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130150531-687441321.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;或者之间在chrome中输入 chrome://inspect 也可看到相应信息&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130252177-1470203983.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;美中不足还是无法检测微信中的页面&lt;/p&gt;

&lt;h4 id=&quot;iPhone页面的常用调试方法-在Windows中配置&quot;&gt;在Windows中配置&lt;/h4&gt;
&lt;p&gt;在windows中配置相对麻烦了些，首先需要安装powershell（win10中已经自带），然后安装 scoop ，再安装这个插件&lt;/p&gt;
&lt;p&gt;同样地，访问相应的页面&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130324037-935395358.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130342175-1480811561.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;或者使用Chrome自身的DevTools来调试，即可实现在Window中调试手机Safari页面（然而还是不支持微信内置的）&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130437027-60285754.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;h3 id=&quot;iPhone页面的常用调试方法-调试微信内置的webview&quot;&gt;调试微信内置的webview&lt;/h3&gt;
&lt;p&gt;要调试微信内置的webview，就需要对其进行重签名打包, 让iOS觉得我们是微信这个APP的开发者（苹果的限制太多了）&lt;/p&gt;
&lt;p&gt;&lt;a class=&quot;external-link&quot; href=&quot;http://jichaowu.com/2017/07/25/remote_debug/&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;相关链接&lt;/a&gt;  &lt;a class=&quot;external-link&quot; href=&quot;https://toutiao.io/posts/z3nbby/preview&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;相关链接&lt;/a&gt;   &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;相关步骤：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在现有证书基础上（如果没有证书需要自己设置）&lt;/p&gt;
&lt;p&gt;1. 下载 &lt;a class=&quot;external-link&quot; href=&quot;https://github.com/Naituw/IPAPatch&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot;&gt;IPAPatch &lt;/a&gt;,解压。&lt;/p&gt;
&lt;p&gt;可以看到如下文件信息&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130500462-644169076.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;2. 下载越狱版的微信ipa（尽量通过正规渠道获取，也可直接在PP助手下载，下载的时候不要连接手机）&lt;/p&gt;
&lt;p&gt;ipa是iOS的应用程序文件包，类似安卓中的apk，正常版本的带有加密信息，打包后会出问题，越狱版已经去壳，可以签入我们的证书&lt;/p&gt;
&lt;p&gt;3. 将 IPAPatch文件夹中的 /Assets/app.ipa 替换成这个微信 ipa&lt;/p&gt;
&lt;p&gt;4. 用XCode打开 /IPAPatch.xcodeproj &lt;/p&gt;
&lt;p&gt;5. 设置 一个新的 BundleID，选用AppleID Team，设置Code Signing，选择真机 target，然后运行安装即可&lt;/p&gt;
&lt;p&gt;遇到报错信息就按提示进行解决&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;可能遇到的问题有：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;no matching provisioning profiles found   确认是否配置了证书，简单的操作可以直接按提示进行fixed&lt;/p&gt;
&lt;p&gt;Code signing is required for product type 'Framework' in     不要忘了设置Framework中的签名&lt;/p&gt;
&lt;p&gt;Xcode: failed to get the task for process  打开应用是会伴有闪退现象。 签名需要使用开发版（iOS Developer）,不要使用发布版（iOS Distribution）,ipa包需使用越狱版&lt;/p&gt;
&lt;p&gt;Xcode “Device Locked” When iPhone is unlocked   记得在手机上选择信任电脑&lt;/p&gt;
&lt;p&gt;could not find developer disk image   低版本的XCode不包含新版iOS的系统依赖，需要更新XCode为最新版，或者直接下载对应的包，&lt;a href=&quot;https://www.jianshu.com/p/3930df903a44&quot; target=&quot;_blank&quot;&gt;放到XCode的包目录中&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;安装成功后一直停留在启动画面 可能是XCode开启了调试断点功能，取消即可&lt;/p&gt;
&lt;p&gt;安装之后原有微信应用打不开了，如果使用不恰当的ipa包，会有意外的副作用，所以得谨慎选择ipa包&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130546666-65439478.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130620471-1146733607.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130658629-840364177.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;安装成功后，即可打开新的微信使用&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130718733-1405129805.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;登陆后，访问相关页面，就可以调试webview了&lt;/p&gt;
&lt;p&gt;方法同上，可在Mac上使用Safari来调试内置浏览器的页面，公众号，小程序等&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130758464-2027339645.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;或者，直接使用我们的windows系统，开启 ios_webkit_debug_proxy 后，在Chrome中调试即可&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330131046805-1936378922.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/688270/201803/688270-20180330130938321-902947390.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 30 Mar 2018 05:29:00 +0000</pubDate>
<dc:creator>-渔人码头-</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/imwtr/p/8675701.html</dc:identifier>
</item>
<item>
<title>Android开发之漫漫长途 XVI——ListView与RecyclerView项目实战 - 忘了12138</title>
<link>http://www.cnblogs.com/wangle12138/p/8675695.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/wangle12138/p/8675695.html</guid>
<description>&lt;p&gt;&lt;em&gt;该文章是一个系列文章，是本人在Android开发的漫漫长途上的一点感想和记录，我会尽量按照先易后难的顺序进行编写该系列。该系列引用了《Android开发艺术探索》以及《深入理解Android 卷Ⅰ，Ⅱ，Ⅲ》中的相关知识，另外也借鉴了其他的优质博客，在此向各位大神表示感谢，膜拜！！！&lt;/em&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;Hello，大家好，有没有想我，这一个月没有更新文章，为什么呢，大声的告诉你，，我在...（准备面试 ps:南京）。至于怎么准备的，以及在面试中遇到的问题还有面试结果之类的，我们下面呢会挑一些与ListView和RecyclerView相关的内容说一下，至于其他的后文再说，毕竟不能打乱我们之前的行文安排（嗯，我就是这么一个十分有节操的人）。&lt;/p&gt;
&lt;p&gt;我们上一篇说了些什么呢，RecyclerView，这个东西已经渐渐替代ListView成为我们Android开发工程师中常见的控件。按照上一篇的预告呢，我们本篇是来实战的。因为毕竟本地数据的展示基本上只能作为Demo，在实际的工作以及项目中，我们遇到的问题可能要比Demo复杂的多。&lt;/p&gt;

&lt;h2 id=&quot;第一题-listview的缓存复用机制&quot;&gt;第一题 ListView的缓存复用机制&lt;/h2&gt;
&lt;p&gt;还是免不得笔试啊，，起码我面试的几家公司有80%让我答一份试卷，而且给你的时间与试卷的复杂度基本上对应不上。（无语。。。）不是说技术上有什么难点，不过你想完美的答出来，估计要写不少字，比如其中一题ListView的缓存复用机制。&lt;br/&gt;关于ListView的缓存复用机制在&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.cnblogs.com/wangle12138/p/8441136.html&quot;&gt;Android开发之漫漫长途 XIV——ListView&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;一文中有非常详细的解说，这边我们就不重复说了，如果你看过我的那一篇文章，你就明白，这个事情不花个半小时是讲不清楚的，更何况是写。所以我们在读书或者读别人博客的时候要善于总结，抓住核心。&lt;/p&gt;
&lt;h2 id=&quot;第二题&quot;&gt;第二题&lt;/h2&gt;
&lt;p&gt;上来打开一个界面，类似淘宝上的首页，问这个页面怎么布局?&lt;br/&gt;&lt;img src=&quot;https://i.imgur.com/5Xh3pES.png&quot;/&gt;&lt;br/&gt;请读者先稍微思考个5分钟再向下看。。。。。&lt;/p&gt;
&lt;p&gt;我的思考过程是这样的&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;首先是根部局，根部局我在项目中用的最多的是LinearLayout、RelativeLayout、FrameLayout这些布局，不过明显这些根部局不符合滑动的条件，必须在其内部定义ScrollView，或者直接顶层就用ScrollView，&lt;/li&gt;
&lt;li&gt;使用ScrollView作为顶层布局或者子布局&lt;/li&gt;
&lt;li&gt;对于内部的列表子View显示可使用RecyclerView&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;直接说了，然后被打脸了，说是ScrollView的话对于含有大量Bitmap的很多View,滑动的话很容易造成OOM。有没有更好的方案。&lt;/p&gt;
&lt;p&gt;然后面试官说了一句，可不可以考虑用RecyclerView作为根部局，然后嵌套RecyclerView呢，，我茅塞顿开，，然后就没有然后了。&lt;/p&gt;
&lt;p&gt;其实我对于RecyclerView的理解陷入了一个误区，毕竟在项目中只是拿它做一些列表展示。完全没有想过用它作为布局的一种，其实也是对于RecyclerView的item type等相关知识理解的不够深入。如果用RecyclerView作为根部局虽然也有许多麻烦之处，但是它带来的好处也是很明显的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;注：我不清楚淘宝到底是怎么做的哈，，只是举例说明一下而已&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;第三题-listview异步获取图片显示错位&quot;&gt;第三题 ListView异步获取图片显示错位&lt;/h2&gt;
&lt;p&gt;关于这一题实际上是第一题ListView的缓存复用机制的一个实战题目，关于这个现象是如何产生的以及如何解决，郭神已经在其博客中深入分析了，我这里就不献丑了，读者可参看&lt;a href=&quot;https://blog.csdn.net/guolin_blog/article/details/45586553&quot;&gt;Android ListView异步加载图片乱序问题，原因分析及解决方案&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;小结&quot;&gt;小结&lt;/h2&gt;
&lt;p&gt;现在大多数商业内容性的App基本上都需要使用列表来展示，不管是使用比较老的ListView，还是正被广泛使用的RecyclerView，这两者都在面试中碰到过。现在来总结一下。&lt;/p&gt;
&lt;ol readability=&quot;1.8822115384615&quot;&gt;&lt;li readability=&quot;2&quot;&gt;
&lt;p&gt;&lt;strong&gt;ListView:&lt;/strong&gt;对于ListView来说，考察最多的是关于ListView的性能优化(其原理也是ListView的复用机制)，使用ViewHolder，然后在重写的getView方法中复用convertView，对于这两点可能大部分读者都了然于胸。当然还有更加直接的方式，如我碰到的第1题。&lt;/p&gt;
&lt;/li&gt;
&lt;li readability=&quot;1.8119001919386&quot;&gt;
&lt;p&gt;&lt;strong&gt;RecyclerView:&lt;/strong&gt;对于RecyclerView来说，&lt;br/&gt;比较简单的呢，碰到过对&lt;strong&gt;ItemDecoration&lt;/strong&gt; 以及 &lt;strong&gt;如何添加HeaderView以及FooterView&lt;/strong&gt;;&lt;br/&gt;比较复杂的呢，碰到过直接让你&lt;strong&gt;复述RecyclerView的缓存复用机制&lt;/strong&gt;，也有RecyclerView内几万甚至更多条数据为什么没有OOM这种间接的问法。另外也碰到了对比于ListView来说，RecyclerView的优势等等问题。（关于这些问题，我上一篇文章里也都提到，读者可参看 &lt;a href=&quot;http://www.cnblogs.com/wangle12138/p/8456508.html&quot;&gt;Android开发之漫漫长途 XV——RecyclerView&lt;/a&gt;）；&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这是我在Github上的一个小小的开源项目，项目地址在文末给出，难度也不大，主要是用来面试的时候用来展示的Demo。读者可以稍微看一下，涉及一下几个内容。&lt;br/&gt;主界面如下所示&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/Blb8KT9.png&quot;/&gt;&lt;/p&gt;
&lt;h2 id=&quot;底部导航&quot;&gt;底部导航&lt;/h2&gt;
&lt;p&gt;使用Fragment进行导航切换，这部分内容可参看我之前关于Fragment的文章&lt;/p&gt;
&lt;h2 id=&quot;recyclerview的下拉刷新和上拉加载&quot;&gt;RecyclerView的下拉刷新和上拉加载&lt;/h2&gt;
&lt;p&gt;这个使用的是BRAVH的开源库，关于更多使用指南，请参看官网&lt;a href=&quot;http://www.recyclerview.org/&quot; class=&quot;uri&quot;&gt;http://www.recyclerview.org/&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;recyclerview自定义layoutmanager&quot;&gt;RecyclerView自定义LayoutManager&lt;/h2&gt;
&lt;p&gt;这部分内容可参看&lt;a href=&quot;https://www.jianshu.com/p/7bb7556bbe10&quot;&gt;自定义LayoutManager 实现弧形以及滑动放大效果RecyclerView&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;material-design-协调布局coordinatorlayout&quot;&gt;Material Design 协调布局(CoordinatorLayout)&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;https://i.imgur.com/79F4Zi3.png&quot;/&gt;&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;本篇呢是个实战项目，先是分享了面试中遇到的关于ListView以及RecyclerView的问题，然后分享了一个小Demo。只是抛砖引玉，读者呢可在我的博客下评论，分享一些面试中遇到的问题。另外Demo中也有很多部分都虚位以待，读者也可以提出一些功能点，提Issue或者Pull request给我。&lt;/p&gt;
&lt;hr/&gt;
&lt;p&gt;下一篇呢，我会整理一下我的面试过程，，然后尽快分享出来，给大家做一个参考。&lt;/p&gt;
&lt;hr/&gt;&lt;hr/&gt;
&lt;p&gt;此致，敬礼&lt;/p&gt;
</description>
<pubDate>Fri, 30 Mar 2018 05:27:00 +0000</pubDate>
<dc:creator>忘了12138</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/wangle12138/p/8675695.html</dc:identifier>
</item>
<item>
<title>开放平台之安全 - skyme</title>
<link>http://www.cnblogs.com/skyme/p/8675643.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/skyme/p/8675643.html</guid>
<description>&lt;h2&gt;什么是开放平台&lt;/h2&gt;
&lt;p&gt;开放平台就是将企业中的业务的核心部分经过抽象和提取，形成面向企业或者面向用户的增值系统，为企业带来新的业务增涨点。&lt;/p&gt;
&lt;p&gt;因为是企业的核心业务能力，所以平台的安全性就成为重中之重。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131002784-629122340.png&quot;&gt;&lt;img width=&quot;640&quot; height=&quot;297&quot; title=&quot;image&quot; alt=&quot;image&quot; src=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131006472-649890197.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;安全方案&lt;/h2&gt;
&lt;p&gt;普通的接口使用Token令牌的方案就可以保证，但是对于一些敏感的接口就需要有针对性的处理，比如使用https。&lt;/p&gt;
&lt;p&gt;https是在http超文本传输协议加入SSL层，它在网络间通信是加密的，所以需要加密证书。&lt;/p&gt;
&lt;p&gt;https协议需要ca证书，一般需要交费。&lt;/p&gt;
&lt;p&gt;签名的设计一般是通过用户和密码的校验，然后针对用户生成一个唯一的Token令牌，&lt;/p&gt;
&lt;p&gt;用户再次获取信息时，带上此令牌，如果令牌正确，则返回数据。对于获取Token信息后，访问用户相关接口，客户端请求的url需要带上如下参数：&lt;/p&gt;
&lt;p&gt;         时间戳：timestamp&lt;/p&gt;
&lt;p&gt;         Token令牌：token&lt;/p&gt;
&lt;h2&gt;jwt&lt;/h2&gt;
&lt;p&gt;JWT(json web token)是为了在网络应用环境间传递声明而执行的一种基于JSON的开放标准。&lt;/p&gt;
&lt;p&gt;JWT的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源。比如用在用户登录上。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131008367-409848969.png&quot;&gt;&lt;img width=&quot;604&quot; height=&quot;271&quot; title=&quot;image&quot; alt=&quot;image&quot; src=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131009841-2031560881.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;那么jwt到底长什么样呢？&lt;/p&gt;
&lt;p&gt;第一部分我们称它为头部（header),第二部分我们称其为载荷（payload)，第三部分是签证（signature)。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;header&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;jwt的头部承载两部分信息：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;声明类型，这里是jwt&lt;/li&gt;
&lt;li&gt;声明加密的算法 通常直接使用 HMAC SHA256&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;完整的头部就像下面这样的JSON：&lt;/p&gt;
&lt;p&gt;{&lt;/p&gt;
&lt;p&gt;&quot;typ&quot;: &quot;JWT&quot;,&lt;/p&gt;
&lt;p&gt;&quot;alg&quot;: &quot;HS256&quot;&lt;/p&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;然后将头部进行base64加密（该加密是可以对称解密的),构成了第一部分：&lt;/p&gt;
&lt;p&gt;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;playload&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;载荷就是存放有效信息的地方。这个名字像是特指飞机上承载的货品，这些有效信息包含三个部分&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;标准中注册的声明&lt;/li&gt;
&lt;li&gt;公共的声明&lt;/li&gt;
&lt;li&gt;私有的声明&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;标准中注册的声明&lt;/strong&gt; (建议但不强制使用) ：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;iss: jwt签发者&lt;/li&gt;
&lt;li&gt;sub: jwt所面向的用户&lt;/li&gt;
&lt;li&gt;aud: 接收jwt的一方&lt;/li&gt;
&lt;li&gt;exp: jwt的过期时间，这个过期时间必须要大于签发时间&lt;/li&gt;
&lt;li&gt;nbf: 定义在什么时间之前，该jwt都是不可用的.&lt;/li&gt;
&lt;li&gt;iat: jwt的签发时间&lt;/li&gt;
&lt;li&gt;jti: jwt的唯一身份标识，主要用来作为一次性token,从而回避重放攻击。&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;strong&gt;公共的声明 ：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;公共的声明可以添加任何的信息，一般添加用户的相关信息或其他业务需要的必要信息.但不建议添加敏感信息，因为该部分在客户端可解密.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;私有的声明 ：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;私有声明是提供者和消费者所共同定义的声明，一般不建议存放敏感信息，因为base64是对称解密的，意味着该部分信息可以归类为明文信息。&lt;/p&gt;
&lt;p&gt;定义一个payload：&lt;/p&gt;
&lt;p&gt;{&lt;/p&gt;
&lt;p&gt;&quot;name&quot;:&quot;Free码农&quot;,&lt;/p&gt;
&lt;p&gt;&quot;age&quot;:&quot;28&quot;,&lt;/p&gt;
&lt;p&gt;&quot;org&quot;:&quot;今日头条&quot;&lt;/p&gt;
&lt;p&gt;}&lt;/p&gt;
&lt;p&gt;然后将其进行base64加密，得到Jwt的第二部分：&lt;/p&gt;
&lt;p&gt;eyJvcmciOiLku4rml6XlpLTmnaEiLCJuYW1lIjoiRnJlZeeggeWGnCIsImV4cCI6MTUxNDM1NjEwMywiaWF0IjoxNTE0MzU2MDQzLCJhZ2UiOiIyOCJ9&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;signature&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;jwt的第三部分是一个签证信息，这个签证信息由三部分组成：&lt;/p&gt;
&lt;ul&gt;&lt;li&gt;
&lt;p&gt;header (base64后的)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;payload (base64后的)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;secret&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;这个部分需要base64加密后的header和base64加密后的payload使用.连接组成的字符串，然后通过header中声明的加密方式进行加盐secret组合加密，然后就构成了jwt的第三部分：&lt;/p&gt;
&lt;p&gt;49UF72vSkj-sA4aHHiYN5eoZ9Nb4w5Vb45PsLF7x_NY&lt;/p&gt;
&lt;p&gt;密钥secret是保存在服务端的，服务端会根据这个密钥进行生成token和验证，所以需要保护好。&lt;/p&gt;
&lt;h2&gt;jwt工作流程&lt;/h2&gt;
&lt;p&gt;下面是一个JWT的工作流程图。&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;用户导航到登录页，输入用户名、密码，进行登录&lt;/li&gt;
&lt;li&gt;服务器验证登录鉴权，如果改用户合法，根据用户的信息和服务器的规则生成JWT Token&lt;/li&gt;
&lt;li&gt;服务器将该token以json形式返回（不一定要json形式，这里说的是一种常见的做法）&lt;/li&gt;
&lt;li&gt;用户得到token，存在localStorage、cookie或其它数据存储形式中。&lt;/li&gt;
&lt;li&gt;以后用户请求&lt;code&gt;/protected&lt;/code&gt;中的API时，在请求的header中加入 &lt;code&gt;Authorization: Bearer xxxx(token)&lt;/code&gt;。此处注意token之前有一个7字符长度的 &lt;code&gt;Bearer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;服务器端对此token进行检验，如果合法就解析其中内容，根据其拥有的权限和自己的业务逻辑给出对应的响应结果。&lt;/li&gt;
&lt;li&gt;用户取得结果&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;&lt;a href=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131010957-734645718.png&quot;&gt;&lt;img width=&quot;640&quot; height=&quot;346&quot; title=&quot;image&quot; alt=&quot;image&quot; src=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131011639-1717058288.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;

&lt;h2&gt;spring boot整合jwt&lt;/h2&gt;
&lt;p&gt;首先，加入依赖&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
                &amp;lt;dependency&amp;gt;
                        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
                        &amp;lt;artifactId&amp;gt;spring-boot-starter-data-jpa&amp;lt;/artifactId&amp;gt;
                &amp;lt;/dependency&amp;gt;
                &amp;lt;dependency&amp;gt;
                        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
                        &amp;lt;artifactId&amp;gt;spring-boot-starter-data-redis&amp;lt;/artifactId&amp;gt;
                &amp;lt;/dependency&amp;gt;
                &amp;lt;dependency&amp;gt;
                        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
                        &amp;lt;artifactId&amp;gt;spring-boot-starter-web&amp;lt;/artifactId&amp;gt;
                &amp;lt;/dependency&amp;gt;
                &amp;lt;dependency&amp;gt;
                        &amp;lt;groupId&amp;gt;org.springframework.boot&amp;lt;/groupId&amp;gt;
                        &amp;lt;artifactId&amp;gt;spring-boot-starter-security&amp;lt;/artifactId&amp;gt;
                &amp;lt;/dependency&amp;gt;

                &amp;lt;dependency&amp;gt;
                        &amp;lt;groupId&amp;gt;org.springframework.security&amp;lt;/groupId&amp;gt;
                        &amp;lt;artifactId&amp;gt;spring-security-test&amp;lt;/artifactId&amp;gt;
                        &amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;
                &amp;lt;/dependency&amp;gt;

                &amp;lt;!-- https:&lt;span&gt;//mvnrepository.com/artifact/mysql/mysql-connector-java --&amp;gt;&lt;/span&gt;
                &amp;lt;dependency&amp;gt;
                        &amp;lt;groupId&amp;gt;mysql&amp;lt;/groupId&amp;gt;
                        &amp;lt;artifactId&amp;gt;mysql-connector-java&amp;lt;/artifactId&amp;gt;
                        &amp;lt;version&amp;gt;5.1.45&amp;lt;/version&amp;gt;
                &amp;lt;/dependency&amp;gt;

                &amp;lt;!-- https:&lt;span&gt;//mvnrepository.com/artifact/io.jsonwebtoken/jjwt --&amp;gt;&lt;/span&gt;
                &amp;lt;dependency&amp;gt;
                        &amp;lt;groupId&amp;gt;io.jsonwebtoken&amp;lt;/groupId&amp;gt;
                        &amp;lt;artifactId&amp;gt;jjwt&amp;lt;/artifactId&amp;gt;
                        &amp;lt;version&amp;gt;0.9.0&amp;lt;/version&amp;gt;
                &amp;lt;/dependency&amp;gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;配置信息代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;33&quot;&gt;
&lt;pre&gt;
# JACKSON
spring:
  jackson:
    serialization:
      INDENT_OUTPUT: &lt;span&gt;true&lt;/span&gt;

jwt:
  header: Authorization
  secret: mySecret
  expiration: 604800
  route:
    authentication:
      path: auth
      refresh: refresh
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;token处理类为JwtTokenUtil，代码如下：&lt;/p&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;55&quot;&gt;
&lt;pre&gt;
@Component
&lt;span&gt;public&lt;/span&gt; &lt;span&gt;class&lt;/span&gt; JwtTokenUtil &lt;span&gt;implements&lt;/span&gt; Serializable {

    &lt;span&gt;private&lt;/span&gt; &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; &lt;span&gt;long&lt;/span&gt; serialVersionUID = -3301605591108950415L;

    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String CLAIM_KEY_USERNAME = &quot;&lt;span&gt;sub&lt;/span&gt;&quot;;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String CLAIM_KEY_AUDIENCE = &quot;&lt;span&gt;aud&lt;/span&gt;&quot;;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String CLAIM_KEY_CREATED = &quot;&lt;span&gt;iat&lt;/span&gt;&quot;;

    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String AUDIENCE_UNKNOWN = &quot;&lt;span&gt;unknown&lt;/span&gt;&quot;;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String AUDIENCE_WEB = &quot;&lt;span&gt;web&lt;/span&gt;&quot;;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String AUDIENCE_MOBILE = &quot;&lt;span&gt;mobile&lt;/span&gt;&quot;;
    &lt;span&gt;static&lt;/span&gt; &lt;span&gt;final&lt;/span&gt; String AUDIENCE_TABLET = &quot;&lt;span&gt;tablet&lt;/span&gt;&quot;;

    @Autowired
    &lt;span&gt;private&lt;/span&gt; TimeProvider timeProvider;

    @Value(&quot;&lt;span&gt;${jwt.secret}&lt;/span&gt;&quot;)
    &lt;span&gt;private&lt;/span&gt; String secret;

    @Value(&quot;&lt;span&gt;${jwt.expiration}&lt;/span&gt;&quot;)
    &lt;span&gt;private&lt;/span&gt; Long expiration;

    &lt;span&gt;public&lt;/span&gt; String getUsernameFromToken(String token) {
        &lt;span&gt;return&lt;/span&gt; getClaimFromToken(token, Claims::getSubject);
    }

    &lt;span&gt;public&lt;/span&gt; Date getIssuedAtDateFromToken(String token) {
        &lt;span&gt;return&lt;/span&gt; getClaimFromToken(token, Claims::getIssuedAt);
    }

    &lt;span&gt;public&lt;/span&gt; Date getExpirationDateFromToken(String token) {
        &lt;span&gt;return&lt;/span&gt; getClaimFromToken(token, Claims::getExpiration);
    }

    &lt;span&gt;public&lt;/span&gt; String getAudienceFromToken(String token) {
        &lt;span&gt;return&lt;/span&gt; getClaimFromToken(token, Claims::getAudience);
    }

    &lt;span&gt;public&lt;/span&gt; &amp;lt;T&amp;gt; T getClaimFromToken(String token, Function&amp;lt;Claims, T&amp;gt; claimsResolver) {
        &lt;span&gt;final&lt;/span&gt; Claims claims = getAllClaimsFromToken(token);
        &lt;span&gt;return&lt;/span&gt; claimsResolver.apply(claims);
    }

    &lt;span&gt;private&lt;/span&gt; Claims getAllClaimsFromToken(String token) {
        &lt;span&gt;return&lt;/span&gt; Jwts.parser()
                .setSigningKey(secret)
                .parseClaimsJws(token)
                .getBody();
    }

    &lt;span&gt;private&lt;/span&gt; Boolean isTokenExpired(String token) {
        &lt;span&gt;final&lt;/span&gt; Date expiration = getExpirationDateFromToken(token);
        &lt;span&gt;return&lt;/span&gt; expiration.before(timeProvider.now());
    }

    &lt;span&gt;private&lt;/span&gt; Boolean isCreatedBeforeLastPasswordReset(Date created, Date lastPasswordReset) {
        &lt;span&gt;return&lt;/span&gt; (lastPasswordReset != &lt;span&gt;null&lt;/span&gt; &amp;amp;&amp;amp; created.before(lastPasswordReset));
    }

    &lt;span&gt;private&lt;/span&gt; String generateAudience(Device device) {
        String audience = AUDIENCE_UNKNOWN;
        &lt;span&gt;if&lt;/span&gt; (device.isNormal()) {
            audience = AUDIENCE_WEB;
        } &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (device.isTablet()) {
            audience = AUDIENCE_TABLET;
        } &lt;span&gt;else&lt;/span&gt; &lt;span&gt;if&lt;/span&gt; (device.isMobile()) {
            audience = AUDIENCE_MOBILE;
        }
        &lt;span&gt;return&lt;/span&gt; audience;
    }

    &lt;span&gt;private&lt;/span&gt; Boolean ignoreTokenExpiration(String token) {
        String audience = getAudienceFromToken(token);
        &lt;span&gt;return&lt;/span&gt; (AUDIENCE_TABLET.equals(audience) || AUDIENCE_MOBILE.equals(audience));
    }

    &lt;span&gt;public&lt;/span&gt; String generateToken(UserDetails userDetails, Device device) {
        Map&amp;lt;String, Object&amp;gt; claims = &lt;span&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;();
        &lt;span&gt;return&lt;/span&gt; doGenerateToken(claims, userDetails.getUsername(), generateAudience(device));
    }

    &lt;span&gt;private&lt;/span&gt; String doGenerateToken(Map&amp;lt;String, Object&amp;gt; claims, String subject, String audience) {
        &lt;span&gt;final&lt;/span&gt; Date createdDate = timeProvider.now();
        &lt;span&gt;final&lt;/span&gt; Date expirationDate = calculateExpirationDate(createdDate);

        System.out.println(&quot;&lt;span&gt;doGenerateToken &lt;/span&gt;&quot; + createdDate);

        &lt;span&gt;return&lt;/span&gt; Jwts.builder()
                .setClaims(claims)
                .setSubject(subject)
                .setAudience(audience)
                .setIssuedAt(createdDate)
                .setExpiration(expirationDate)
                .signWith(SignatureAlgorithm.HS512, secret)
                .compact();
    }

    &lt;span&gt;public&lt;/span&gt; Boolean canTokenBeRefreshed(String token, Date lastPasswordReset) {
        &lt;span&gt;final&lt;/span&gt; Date created = getIssuedAtDateFromToken(token);
        &lt;span&gt;return&lt;/span&gt; !isCreatedBeforeLastPasswordReset(created, lastPasswordReset)
                &amp;amp;&amp;amp; (!isTokenExpired(token) || ignoreTokenExpiration(token));
    }

    &lt;span&gt;public&lt;/span&gt; String refreshToken(String token) {
        &lt;span&gt;final&lt;/span&gt; Date createdDate = timeProvider.now();
        &lt;span&gt;final&lt;/span&gt; Date expirationDate = calculateExpirationDate(createdDate);

        &lt;span&gt;final&lt;/span&gt; Claims claims = getAllClaimsFromToken(token);
        claims.setIssuedAt(createdDate);
        claims.setExpiration(expirationDate);

        &lt;span&gt;return&lt;/span&gt; Jwts.builder()
                .setClaims(claims)
                .signWith(SignatureAlgorithm.HS512, secret)
                .compact();
    }

    &lt;span&gt;public&lt;/span&gt; Boolean validateToken(String token, UserDetails userDetails) {
        JwtUser user = (JwtUser) userDetails;
        &lt;span&gt;final&lt;/span&gt; String username = getUsernameFromToken(token);
        &lt;span&gt;final&lt;/span&gt; Date created = getIssuedAtDateFromToken(token);
        &lt;span&gt;//final Date expiration = getExpirationDateFromToken(token);&lt;/span&gt;
        &lt;span&gt;return&lt;/span&gt; (
              username.equals(user.getUsername())
                    &amp;amp;&amp;amp; !isTokenExpired(token)
                    &amp;amp;&amp;amp; !isCreatedBeforeLastPasswordReset(created, user.getLastPasswordResetDate())
        );
    }

    &lt;span&gt;private&lt;/span&gt; Date calculateExpirationDate(Date createdDate) {
        &lt;span&gt;return&lt;/span&gt; &lt;span&gt;new&lt;/span&gt; Date(createdDate.getTime() + expiration * 1000);
    }
}
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;最后，在控制层对token的处理进行调用，就能够完成用户的权限认证。&lt;/p&gt;
&lt;h2&gt;测试&lt;/h2&gt;
&lt;p&gt;启动应用，然后输入&lt;a href=&quot;http://localhost:8080&quot;&gt;http://localhost:8080&lt;/a&gt;，我们能够看到测试页面&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131012010-955308637.png&quot;&gt;&lt;img width=&quot;745&quot; height=&quot;239&quot; title=&quot;image&quot; alt=&quot;image&quot; src=&quot;https://images2018.cnblogs.com/blog/133059/201803/133059-20180330131012501-274628590.png&quot; border=&quot;0&quot;/&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;当输入用户名为admin并且登录成功时，点击右侧的按钮能够调用相应的接口。当登录不成功时，会返回401错误。&lt;/p&gt;
&lt;p&gt;当输入用户名为user并且登录成功时，只能访问普通用户权限的接口，不能访问管理用户权限的接口。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;关于开放平台其实还有很多需要切入的点，此处给出的安全方案只是一个示例，可以在此基础上进行二次开发，实现企业级的安全方案。文中的示例代码地址如下：&lt;/p&gt;
&lt;p&gt;&lt;a title=&quot;https://github.com/cloudskyme/jwt-spring-security-demo&quot; href=&quot;https://github.com/cloudskyme/jwt-spring-security-demo&quot;&gt;https://github.com/cloudskyme/jwt-spring-security-demo&lt;/a&gt;&lt;/p&gt;
</description>
<pubDate>Fri, 30 Mar 2018 05:10:00 +0000</pubDate>
<dc:creator>skyme</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/skyme/p/8675643.html</dc:identifier>
</item>
<item>
<title>微信公众号 智能客服 - 庸斋杂记</title>
<link>http://www.cnblogs.com/shy-huang/p/8675446.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/shy-huang/p/8675446.html</guid>
<description>&lt;h2 id=&quot;前言&quot;&gt;&lt;span&gt;前言&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;微信公众号的开发，园子里有很多资料，这里简述。&lt;br/&gt;虽说是智能，现在是仿佛智障，很多是hard code逻辑，日后将逐步加入LUIS,现在一些常用的打招呼（你好，您好，hi，hey，hello，how are you等识别比较好）。&lt;/p&gt;
&lt;p&gt;业务性的处理，更多是逻辑上，比如常用的回复1,2,3,4然后返回对应的消息。这里涉及多轮会话，要求对上文的记忆，不然容易回答串题了。&lt;/p&gt;
&lt;p&gt;还有就是一些分词技术，这个目前对空格敏感，还有就是南京市长江大桥，是南京市长，还是长江大桥？这个是日后话题了。&lt;/p&gt;
&lt;h3 id=&quot;net-core-apii的方式创建一个wechat-api-controller&quot;&gt;&lt;span&gt;.NET Core APIi的方式，创建一个WeChat API Controller&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;验证微信服务器地址的方法：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    [HttpGet]
    [Route(&quot;api/wechat&quot;)]
    public IActionResult Get(string signature, string timestamp, string nonce, string echostr)
    {
        var token = ConfigReader.TokenStr;//微信公众平台后台设置的Token
        if (string.IsNullOrEmpty(token))
        {
            return NotFound(&quot;请先设置Token！&quot;);
            //return new HttpResponseMessage() { Content = new StringContent(&quot;请先设置Token！&quot;, Encoding.GetEncoding(&quot;UTF-8&quot;), &quot;application/x-www-form-urlencoded&quot;) };
        }
        var ent = &quot;&quot;;
        if (!BasicAPI.CheckSignature(signature, timestamp, nonce, token, out ent))
        {
            return NotFound(&quot;验证微信签名失败！&quot;);
            //return new HttpResponseMessage() { Content = new StringContent(&quot;参数错误！&quot;, Encoding.GetEncoding(&quot;UTF-8&quot;), &quot;application/x-www-form-urlencoded&quot;) };
        }
        //返回随机字符串则表示验证通过
        return Ok(echostr);
        //return new HttpResponseMessage() { Content = new StringContent(echostr, Encoding.GetEncoding(&quot;UTF-8&quot;), &quot;application/x-www-form-urlencoded&quot;) };
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;p&gt;验证成功之后，所有消息，微信会转到这个方法：&lt;/p&gt;
&lt;pre&gt;
&lt;code&gt;    用户发送消息后，微信平台自动Post一个请求到这里，并等待响应XML。
    [HttpPost]
    [Route(&quot;api/wechat&quot;)]
    public async Task&amp;lt;IActionResult&amp;gt; Post()
    {
        WeChatMessage message = null;
        string signature = HttpContext.Request.Query[&quot;signature&quot;].ToString();
        string timestamp = HttpContext.Request.Query[&quot;timestamp&quot;].ToString();
        string nonce = HttpContext.Request.Query[&quot;nonce&quot;].ToString();
        string echostr = HttpContext.Request.Query[&quot;echostr&quot;].ToString();

        var safeMode = HttpContext.Request.Query[&quot;encrypt_type&quot;].ToString() == &quot;aes&quot;;
        using (var streamReader = new StreamReader(HttpContext.Request.Body, Encoding.UTF8))
        {
            var decryptMsg = string.Empty;
            var msg = streamReader.ReadToEnd();

            #region 解密
            if (safeMode)
            {
                var msg_signature = HttpContext.Request.Query[&quot;msg_signature&quot;];
                var wechatBizMsgCrypt = new WeChatMsgCrypt(ConfigReader.TokenUrl, ConfigReader.EncodingAESKey, ConfigReader.AppId);
                var ret = wechatBizMsgCrypt.DecryptMsg(msg_signature, timestamp, nonce, msg, ref decryptMsg);
                if (ret != 0)//解密失败
                {
                    //TODO：失败的业务处理逻辑
                }
            }
            else
            {
                decryptMsg = msg;
            }
            #endregion

            message = ParseMessageType.Parse(decryptMsg);
        }
        var response = await new WeChatExecutor(repo).Execute(message);
        var encryptMsg = string.Empty;

        #region 加密
        if (safeMode)
        {
            var msg_signature = HttpContext.Request.Query[&quot;msg_signature&quot;];
            var wxBizMsgCrypt = new WeChatMsgCrypt(ConfigReader.TokenUrl, ConfigReader.EncodingAESKey, ConfigReader.AppId);
            var ret = wxBizMsgCrypt.EncryptMsg(response, timestamp, nonce, ref encryptMsg);
            if (ret != 0)//加密失败
            {
                //TODO：开发者加密失败的业务处理逻辑
            }
        }
        else
        {
            encryptMsg = response;
        }
        #endregion

        return Ok(encryptMsg);
        //return new HttpResponseMessage()
        //{
        //    Content = new StringContent(encryptMsg, Encoding.GetEncoding(&quot;UTF-8&quot;), &quot;application/x-www-form-urlencoded&quot;)
        //    //ContentType = &quot;text/xml&quot;,              
        //};
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;将接收到的消息转发到botmicrosoft-botframework服务将bot服务的secretkey配置上&quot;&gt;&lt;span&gt;将接收到的消息，转发到Bot(Microsoft BotFramework)服务，将Bot服务的SecretKey配置上：&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;    public async static Task&amp;lt;string&amp;gt; PostMessage(string message, string openId)
    {
        HttpClient client;
        HttpResponseMessage response;

        bool IsReplyReceived = false;

        string ReceivedString = null;

        client = new HttpClient();
        client.BaseAddress = new Uri(&quot;https://directline.botframework.com/api/conversations/&quot;);
        client.DefaultRequestHeaders.Accept.Clear();
        client.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue(&quot;application/json&quot;));
        //bot-int WeChat channel
        client.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue(&quot;BotConnector&quot;, ConfigReader.BotSecretKey);

        response = await client.GetAsync(&quot;/api/tokens/&quot;);
        if (response.IsSuccessStatusCode)
        {
            var conversation = new Conversation();
            response = await client.PostAsJsonAsync(&quot;/api/conversations/&quot;, conversation);
            if (response.IsSuccessStatusCode)
            {
                Conversation ConversationInfo = response.Content.ReadAsAsync(typeof(Conversation)).Result as Conversation;

                var contentString = response.Content.ReadAsStringAsync();
                string conversationUrl = ConversationInfo.conversationId + &quot;/messages/&quot;;
                Message msg = new Message() { text = message, from = openId, channelData = &quot;WeChat&quot; };
                response = await client.PostAsJsonAsync(conversationUrl, msg);
                if (response.IsSuccessStatusCode)
                {
                    response = await client.GetAsync(conversationUrl);
                    if (response.IsSuccessStatusCode)
                    {
                        MessageSet BotMessage = response.Content.ReadAsAsync(typeof(MessageSet)).Result as MessageSet;
                        ReceivedString = BotMessage.messages[1].text;
                        IsReplyReceived = true;
                    }
                }
            }
        }
        return ReceivedString;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;这里要定义几个model用于序列化bot返回的数据类型&quot;&gt;&lt;span&gt;这里要定义几个model，用于序列化Bot返回的数据类型：&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;public class Conversation
{
    public string conversationId { get; set; }
    public string token { get; set; }
    public int expires_in { get; set; }
}

public class MessageSet
{
    public Message[] messages { get; set; }
    public string watermark { get; set; }
    public string eTag { get; set; }
}

public class Message
{
    public string id { get; set; }
    public string conversationId { get; set; }
    public DateTime created { get; set; }
    public string from { get; set; }
    public string text { get; set; }
    public string channelData { get; set; }
    public string[] images { get; set; }
    public Attachment[] attachments { get; set; }
    public string eTag { get; set; }
}

public class Attachment
{
    public string url { get; set; }
    public string contentType { get; set; }
}&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;bot-server中的消息路由处理方法&quot;&gt;&lt;span&gt;Bot server中的消息路由处理方法&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;public virtual async Task&amp;lt;HttpResponseMessage&amp;gt; Post([FromBody] Activity activity)
    {
        if (activity != null &amp;amp;&amp;amp; activity.GetActivityType() == ActivityTypes.Message)
        {
            logger.Information(new ConversationEvent
            {
                EventType = LogEventType.ChatBotActivity,
                Message = $&quot;ChatBot message controller receives a message, content: {activity.Text}&quot;,
                Activity = activity
            });
            var isAgent = await ServiceManager.AgentManager.IsAgent(activity.From.Id);
            var context = await ServiceManager.ContextManager.GetUserContext(activity, isAgent);

            var activityLogger = new Logger.CosmosDbActivityLogger();
            if (await ServiceManager.CommandMessageHandler.HandleCommandAsync(activity, isAgent) == false)
            {
                if (!string.IsNullOrEmpty(activity.Text)
                    &amp;amp;&amp;amp; activity.Text.ToLower().Contains(CommandRequestConnection))
                {
                    var contextManager = ServiceManager.ContextManager;
                    var messageRouterResultHandler = ServiceManager.MessageRouterResultHandler;
                    var result = await contextManager.RequestConnection(context, activity);
                    await activityLogger.LogAsync(activity);
                    // Handle the result, if required
                    await messageRouterResultHandler.HandleResultAsync(result);
                }
                else
                {
                    if (isAgent)
                    {
                        IAgentActor agentActor = SFHelper.GetActor&amp;lt;IAgentActor&amp;gt;(activity);
                        await activityLogger.LogAsync(activity);
                        await agentActor.MessagePost(context, new ActivityDataContract(activity));
                    }
                    else
                    {
                        ICustomerActor customerActor = SFHelper.GetActor&amp;lt;ICustomerActor&amp;gt;(activity);
                        await customerActor.MessagePost(context, new ActivityDataContract(activity));
                        if (activity.Text.Equals(&quot;没有解决&quot;) || activity.Text.Equals(&quot;解决了&quot;))
                        {
                            await ServiceManager.InquiryManager.CloseInquiryAsync(context);
                        }
                    }
                }
            }
        }
        else
        {
            HandleSystemMessage(activity);
        }
        return new HttpResponseMessage(HttpStatusCode.Accepted);
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;定义回复消息内容markdown格式微信支持不友好&quot;&gt;&lt;span&gt;定义回复消息内容，markdown格式，微信支持不友好。&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;public static Activity BuildProactiveGreeting(Activity context)
    {
        var responseMessage = context.CreateReply();

        // TODO: Move to MenuManager via DataReposotry to persist to CosmosDB
        var topLevelMenuItems = new List&amp;lt;CardActionItem&amp;gt;
        {
            new CardActionItem() { Title = &quot;技术支持&quot;, ActionType = ActionTypes.ImBack },
            new CardActionItem() { Title = &quot;账单/订阅/配额支持&quot;, ActionType = ActionTypes.ImBack },
            new CardActionItem() { Title = &quot;产品咨询&quot;, ActionType = ActionTypes.ImBack },
            new CardActionItem() { Title = &quot;注册问题&quot;, ActionType = ActionTypes.ImBack }
        };

        // TODO: make sure we get correct name from wechat channel
        string cardTitleText = &quot;Hi，我是您的智能客服，等您很久啦~猜您可能对以下内容感兴趣：&quot;;
        var heroCard = BuildHeroCardWithActionButtons(cardTitleText, topLevelMenuItems);

        responseMessage.AttachmentLayout = AttachmentLayoutTypes.List;
        responseMessage.Attachments = new List&amp;lt;Attachment&amp;gt;() { heroCard.ToAttachment() };
        return responseMessage;
    }&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;bot回复消息&quot;&gt;&lt;span&gt;Bot回复消息：&lt;/span&gt;&lt;/h3&gt;
&lt;pre&gt;
&lt;code&gt;var client = new ConnectorClient(new Uri(message.ServiceUrl), new MicrosoftAppCredentials());
var reply = GreetingHelper.BuildProactiveGreeting(message);
client.Conversations.ReplyToActivityAsync(reply);&lt;/code&gt;
&lt;/pre&gt;
&lt;h3 id=&quot;效果图&quot;&gt;&lt;span&gt;效果图&lt;/span&gt;&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/600371/201803/600371-20180330115900623-609902364.png&quot;/&gt;&lt;/p&gt;
&lt;p&gt;就是打招呼的时候，会回复一个简单得产品介绍，暂时没有多轮会话，因为上下文理解出现一些问题，就不献丑了（滑稽）。&lt;/p&gt;
&lt;h2 id=&quot;后记&quot;&gt;&lt;span&gt;后记&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;日后还有个切换到人工客服，当输入人工客服时，调用微信公众号的客服消息接口，每两小时（过期时间7200s）获取一次token，&lt;br/&gt;然后根据用户的OPENID，将微信支持的消息格式，发送到粉丝端，获取token的IP必须添加到白名单中。&lt;br/&gt;这个要求公众号是认证的，个人的没有授权。&lt;/p&gt;
</description>
<pubDate>Fri, 30 Mar 2018 04:00:00 +0000</pubDate>
<dc:creator>庸斋杂记</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/shy-huang/p/8675446.html</dc:identifier>
</item>
<item>
<title>数据库（Oracle）运维工作内容及常用脚本命令 - lhdz_bj</title>
<link>http://www.cnblogs.com/lhdz_bj/p/8675405.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/lhdz_bj/p/8675405.html</guid>
<description>&lt;p&gt;1、系统资源状况：&lt;br/&gt;--内存及CPU资源&lt;br/&gt;  --linux,solaris,aix&lt;br/&gt;    vmstat 5&lt;br/&gt;  --说明：&lt;br/&gt;    1）观察空闲内存的数量多少，以及空闲内存量是否稳定，如果不稳定就得想办法来解决，怎么解决还得看具体情况，一般可以通过调整相关内存参数来解决，各种操作系统输出指标、解释及内存调整参数及方法不完全一样；&lt;br/&gt;    2)观察CPU资源利用情况，首先，需要观察CPU上运行的任务数，也就是vmstat输出中位于第一列上的指标，如果该指标持续大于CPU核心数，应该引起注意；如果该指标持续大于CPU核心数的两倍，那么应该引起重视；如果持续为CPU核心数的多倍，系统一般会出现应用可感知的现象，必须立刻想办法解决。当然，在观察该指标的同时，还要结合CPU利用率的指标情况，如：用户使用百分比,系统使用百分比,空闲百分比等指标，如果空闲百分比持续低于20%，应该引起注意；如果持续低于10%，应该引起重视；如果持续为0，系统一般会出现应用可感知的现象，应该立刻想办法解决问题；&lt;br/&gt;    3）CPU用户使用百分比和系统使用百分比的比例，也是应该注意的。一般来说，在一个状态正常的系统上，用户使用百分比应该比系统使用百分比大很多，几倍到十几倍甚至更高，如果系统使用百分比持续接近用户使用百分比，甚至大于用户使用百分比，说明系统的状态是不正常的，可能是硬件或者操作系统问题，也可能是应用问题。有关vmstat输出中各指标及解释等，可以参照本人博客中相关文章：&lt;a href=&quot;http://blog.csdn.net/tuning_optmization&quot; target=&quot;_blank&quot;&gt;http://blog.csdn.net/tuning_optmization&lt;/a&gt;。&lt;br/&gt;--IO状况&lt;br/&gt;  --linux,solaris&lt;br/&gt;    iostat -dx 5&lt;br/&gt;  --aix&lt;br/&gt;    iostat 5&lt;br/&gt;  --说明：&lt;br/&gt;    1）该命令主要用来观察系统存储设备的负载和性能状况，首先，需要观察系统各存储设备的繁忙程度，如果该繁忙程度指标持续超过80%，那么应该引起注意；如果持续超过90%，应该引起重视；如果持续100%，一般会出现应用感知的现象，应该立刻想办法解决问题；&lt;br/&gt;    2）其次，需要注意的是系统上各存储设备的IO能力，就是每秒钟各存储设备的输入、输出的数据量，这个和具体设备的硬件及配置有关，没有一个严格的标准，性能好点的能达到每秒上G，甚至几个G，差的只能到每秒几十兆甚至十几兆；&lt;br/&gt;    3）最后，需要观察存储设备完成每次读写操作耗费的时间，这个也是和具体设备硬件和配置相关的，好的设备可能不到1毫秒，差的能到几十毫秒甚至上百毫秒；iostat的输出，在各种操作系统上的输出和解释也不尽相同，具体可以参照本人博客的相关文章：&lt;a href=&quot;http://blog.csdn.net/tuning_optmization&quot; target=&quot;_blank&quot;&gt;http://blog.csdn.net/tuning_optmization&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;2、磁盘空间及使用率&lt;br/&gt;   df -k&lt;br/&gt;   --说明：&lt;br/&gt;     1）该命令会输出系统上各存储设备的设备名，总空间量，已使用空间量及百分比，可用空间量及百分比，及挂载点名字等，这里存储空间的单位为K;&lt;/p&gt;
&lt;p&gt;3、查看系统日志&lt;br/&gt;   --说明：&lt;br/&gt;     1）需要查看的日志名字及具体位置，和具体的操作系统及你的关注点有关，具体可以参照相关文章；&lt;/p&gt;
&lt;p&gt;4、查看数据库告警日志(alert.log)&lt;br/&gt;   --说明：&lt;br/&gt;     1）不同的数据库版本，该日志的位置也会不同，一般来说，10g的数据库上，在ORACLE_BASE/admin/ORACLE_SID/bdump/alert_ORACLE_SID.log；而11g数据库上，在ORACLE_BASE/diag/rdbms/ORACLE_SID/ORACLE_SID/trace/alert_ORACLE_SID.log，具体可以登录数据库并通过以下命令查询：&lt;br/&gt;select value from v$diag_info where name ='Diag Trace';&lt;br/&gt;     2）找到alert.log日志后，可以检查是否有异常情况，例如：报错，可疑告警，可疑命令等，如果有这些异常，可以将这些信息报告专业DBA，由专业DBA结合其他信息进一步跟踪、分析，直到找到引起异常的原因，并妥善解决为止；&lt;/p&gt;
&lt;p&gt;5、查看数据库表空间&lt;br/&gt;   --说明：&lt;br/&gt;     1）最重要的是，查看数据库的空间使用率，数据库各表空间的空间使用情况，可以用以下命令查询，如果发现表空间使用率异常，应该引起注意，需进一步调查是正常使用还是异常使用，如果正常使用引起的空间不够，可以考虑对表空间扩容或其他措施解决，否则，就得看看什么问题导致了表空间的异常使用，查明原因后解决；&lt;br/&gt;Select d.tablespace_name,space &quot;sum_space(m)&quot;,blocks sum_blocks,&lt;br/&gt;         space-nvl(free_space,0) &quot;used_space&quot;,round((1-nvl(free_space,0)/space)*100,2) &quot;used_rate(%)&quot;,&lt;br/&gt;         Free_space &quot;free_space(M)&quot;&lt;br/&gt;    From (select tablespace_name,round(sum(bytes)/(1024*1024),2) space,sum(blocks) blocks&lt;br/&gt;            From dba_data_files&lt;br/&gt;           Group by tablespace_name) d,&lt;br/&gt;         (select tablespace_name,round(sum(bytes)/(1024*1024),2) free_space&lt;br/&gt;            From dba_free_space&lt;br/&gt;           Group by tablespace_name) f&lt;br/&gt;           Where d.tablespace_name=f.tablespace_name(+)&lt;br/&gt;  Union all&lt;br/&gt;  Select d.tablespace_name,space &quot;sum_space(M)&quot;,blocks sum_blocks,used_space &quot;used_space(M)&quot;,round(nvl(used_space,0)/space*100,2) &quot;used_rate(%)&quot;,&lt;br/&gt;         Nvl(free_space,0) &quot;free_space(m)&quot;&lt;br/&gt;    From&lt;br/&gt;         (select tablespace_name,round(sum(bytes)/(1024*1024),2) space,&lt;br/&gt;                 Sum(blocks) blocks&lt;br/&gt;            From dba_temp_files&lt;br/&gt;           Group by tablespace_name) d,&lt;br/&gt;         (select tablespace_name,round(sum(bytes_used)/(1024*1024),2) used_space,round(sum(bytes_free)/(1024*1024),2) free_space&lt;br/&gt;            From v$temp_space_header&lt;br/&gt;           Group by tablespace_name) f&lt;br/&gt;    Where d.tablespace_name=f.tablespace_name(+)&lt;br/&gt;    order by tablespace_name;&lt;br/&gt;     2）其次，要查看表空间的设置及状态，最该注意的是用户数据表空间数据文件的自动扩展设置，一般来说，建议关闭用户数据表空间数据文件的自动扩展，这样，可以避免意外事件的发生，例如：表空间异常使用导致的系统空间耗尽等；关闭数据文件自动增长，当表空间耗尽时，继续使用数据库会在用户端报错，从而可以起到空间告警的作用，表空间数据文件可以查询ba_data_files及dba_temp_files等视图；&lt;/p&gt;
&lt;p&gt;6、查看数据库用户&lt;br/&gt;   --说明：&lt;br/&gt;     1）可以查看dba_users视图来了解数据库用户的情况，如果发现异常信息，及时通知专业DBA等相关人员，并进一步跟踪、分析，直到找到引起异常的原因并妥善解决，例如：发现了新的数据库用户；原来被锁定的用户被打开了；用户默认表空间发生了变化；用户默认资源配置梗概或资源消耗组发生了变化等。&lt;/p&gt;
&lt;p&gt;7、查看用户权限及审计信息&lt;br/&gt;   --说明：&lt;br/&gt;     1）查看用户权限，看用户权限是否发生了变化，是否存在过度授权的情况，查看用户拥有的所有权限可以用以下语句：&lt;br/&gt;SELECT 'ROLE' TYPE,grantee,granted_role privilege,admin_option ad,&lt;br/&gt;         '/' table_name,'/' column_name,'/' owner&lt;br/&gt;    FROM dba_role_privs&lt;br/&gt;   WHERE grantee = UPPER ('&amp;amp;&amp;amp;1')&lt;br/&gt;  UNION ALL&lt;br/&gt;  SELECT 'SYSTEM' TYPE,grantee,privilege privilege,admin_option ad,&lt;br/&gt;         '/' table_name,'/' column_name,'/' owner&lt;br/&gt;    FROM dba_sys_privs&lt;br/&gt;   WHERE grantee = UPPER ('&amp;amp;&amp;amp;1')&lt;br/&gt;  UNION ALL&lt;br/&gt;  SELECT 'TABLE' TYPE,grantee,privilege privilege,grantable ad,&lt;br/&gt;         table_name,'/' column_name,owner&lt;br/&gt;    FROM dba_tab_privs&lt;br/&gt;   WHERE grantee = UPPER ('&amp;amp;&amp;amp;1')&lt;br/&gt;  UNION ALL&lt;br/&gt;  SELECT 'COLUMN' TYPE,grantee,privilege privilege,&lt;br/&gt;         grantable ad,table_name,column_name,owner&lt;br/&gt;    FROM dba_col_privs&lt;br/&gt;   WHERE grantee = UPPER ('&amp;amp;&amp;amp;1')&lt;br/&gt;   ORDER BY 1;&lt;br/&gt;     2）如果系统启用了审计功能，根据审计具体配置的不同，可以查看相应表、视图、字典或操作系统文件；&lt;/p&gt;
&lt;p&gt;8、查看系统会话数及会话情况&lt;br/&gt;   --说明：&lt;br/&gt;     1）查看系统会话数，可以多次运行以下命令查看，看看总会话数是否稳定，也可以分用户查看会话数，并查看各用户会话数是否稳定，并和之前的数据进行对比，如果发现不稳定或异常，及时通知专业DBA等相关人员，并进一步跟踪、分析，直至找到出现异常的原因并妥善解决，例如：会话的异常增长等。&lt;br/&gt;       select count(*) from v$session;&lt;br/&gt;       select username,count(*) from v$session group by username;&lt;br/&gt;     2）大体查看会话，看看是否有异常信息，如果发现异常情况，及时通知专业DBA等相关人员，并进一步跟踪、分析，直到找到出现异常的原因并妥善解决，例如：异常主机的登录；异常用户的登录等；&lt;br/&gt;       select * from v$session;&lt;/p&gt;
&lt;p&gt;9、查看数据库等待事件&lt;br/&gt;   --说明：&lt;br/&gt;     1）数据库等待事件，可以反映数据库目前的运行状态，可以用以下命令查询，如果发现异常信息，及时通知专业DBA等相关人员，并进一步跟踪、分析，知道找到出现异常的原因并妥善解决，此外，由于该项检查专业性比较强，很多时候，最好由专业DBA或者运维人员与专业DBA一起检查该项目，以便及时准确的发现和解决问题，具体事件及解释可以参照本人博客相关文章：&lt;a href=&quot;http://blog.csdn.net/tuning_optmization&quot; target=&quot;_blank&quot;&gt;http://blog.csdn.net/tuning_optmization&lt;/a&gt;。&lt;br/&gt;Select event &quot;wait event&quot;,sum(seconds_in_wait) &quot;waited so far(sec)&quot;,&lt;br/&gt;         Count(sid) &quot;num sess waiting&quot;&lt;br/&gt;    From v$session_wait&lt;br/&gt;   Group by event&lt;br/&gt;   order by &quot;waited so far(sec)&quot; desc,&quot;num sess waiting&quot; desc;&lt;/p&gt;
&lt;p&gt;10、检查用户密码情况&lt;br/&gt;    --说明：&lt;br/&gt;      1）检查操作系统用户密码，检查各用户密码是否变化，如果发现异常，及时通知系统管理员等相关人员，并进一步跟踪、分析，直到找到异常的原因并妥善解决，最好定期修改密码；&lt;br/&gt;      2）检查数据库用户密码，检查数据库各用户密码是否变化，如果发现异常，及时通知专业DBA等相关人员，并进一步跟踪、分析，直到找到异常的原因并妥善解决，最好定期修改密码；&lt;/p&gt;
&lt;p&gt;11、定期获取AWR报告并分析&lt;br/&gt;    --说明：&lt;br/&gt;      1）AWR报告是oracle数据库支持的一个功能，可以反映数据库相应时段的负载和性能等状态，系统默认保留一周的快照以生成相应AWR，快照粒度为1小时；&lt;br/&gt;      2）AWR包含信息非常全面，专业DBA可以根据它了解到相应时段数据库乃至服务器的整体状态，分析AWR报告的工作需要专业DBA或者请专业DBA配合来做，一旦发现异常，及时通知相关人员，并进一步跟踪、分析，直到找到异常的原因并妥善解决，获取及分析AWR报告的方法，可以参照本人的博客相关文章：&lt;a href=&quot;http://blog.csdn.net/tuning_optmization&quot; target=&quot;_blank&quot;&gt;http://blog.csdn.net/tuning_optmization&lt;/a&gt;，禁止转载。&lt;/p&gt;
</description>
<pubDate>Fri, 30 Mar 2018 03:48:00 +0000</pubDate>
<dc:creator>lhdz_bj</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/lhdz_bj/p/8675405.html</dc:identifier>
</item>
<item>
<title>Jmeter返回参数值写入文件《一》 - 雪山狼</title>
<link>http://www.cnblogs.com/weimeizhizuo/p/8675368.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/weimeizhizuo/p/8675368.html</guid>
<description>&lt;p&gt;　　在用Jmeter做自动化测试的时候，某些特殊情况下我们需要将Jmeter的返回的某个特殊值写入的文件中，那么我们该如何做呢?&lt;/p&gt;
&lt;p&gt;对于Jmeter这个工具来说，我们不难知道，它是一个java开源的可扩展的既有个性又有内涵的工具，因此我们可以上jar包。&lt;/p&gt;
&lt;p&gt;一、用MyEclipse写一个文件读写的工具并打包成jar包，如下图所示：&lt;/p&gt;
&lt;p&gt;（不要问为什么用MyEclipse,因为我喜欢！）&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330110424637-2029022394.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;二、调试该程序&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330110848678-1518873978.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;三、运行脚本在本机对应的目录中查看是否存在a.csv文件文件中内容是否为unused，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330111112797-26689375.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;PS：很开心文件成功创建且值成功被记录，那么接下来我们该如何放入Jmeter中呢？&lt;/p&gt;
&lt;p&gt;四、打jar包,将package打包&lt;/p&gt;
&lt;p&gt;4.1、选中要打包的包裹，鼠标右击选中导出，如下图：&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330112004975-1516607432.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;4.2、选择JAR file，点击下一步&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330112246564-792802241.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;4.3、进入下一步，然后勾上需要的选项，和填写必要选项，点击完成如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330112445569-321002232.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 五、进入Jmeter中，写入调试脚本，对其jar包进行调试&lt;/p&gt;
&lt;p&gt;5.1、打开Jmeter，将jar包引入测试计划，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330112838661-687026707.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.2、编写测试脚本，我这里是以登陆接口为例将token值写入到文件，同时添加一个BeanShell Sampler，&lt;/p&gt;
&lt;p&gt;在这里面需要将参数的值传递给jar包里面，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330113446933-437360698.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;5.3、token值的获取，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330113542274-1234038582.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt; 5.4、执行脚本，查看token值，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330113706073-2105299027.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;5.5、查看对应文件是否成功生成，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330113805977-1446158035.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;

&lt;p&gt;5.6、值是否写入，如下图所示：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://images2018.cnblogs.com/blog/1356714/201803/1356714-20180330113852674-2025392858.png&quot; alt=&quot;&quot;/&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;&lt;span&gt;&lt;span&gt;&lt;strong&gt;PS:每一次记录，都是与众不同&lt;/strong&gt;&lt;/span&gt;&lt;/span&gt;&lt;/em&gt;&lt;/p&gt;

</description>
<pubDate>Fri, 30 Mar 2018 03:41:00 +0000</pubDate>
<dc:creator>雪山狼</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/weimeizhizuo/p/8675368.html</dc:identifier>
</item>
<item>
<title>MySQL升级-5.6升级到5.7版本&amp;切换GTID模式 - 苏家小萝卜</title>
<link>http://www.cnblogs.com/xinysu/p/8675286.html</link>
<guid isPermaLink="true" >http://www.cnblogs.com/xinysu/p/8675286.html</guid>
<description>&lt;div readability=&quot;61.365054378935&quot;&gt;

&lt;div readability=&quot;8&quot;&gt;   &lt;img src=&quot;https://images2018.cnblogs.com/blog/608061/201803/608061-20180330112755126-192142498.png&quot; alt=&quot;&quot; width=&quot;97&quot; height=&quot;93&quot;/&gt; 目前未在生产环境中升级过数据库版本，倒是在测试环境跟开发环境升级过。&lt;/div&gt;

&lt;p&gt;    可以通过mysqldump sql文件进行升级，也可以通过mysql_upgrade升级，前者耗时较长，且需要足够量的磁盘空间，本文暂不讨论，升级使用mysql_upgrade方式。   &lt;/p&gt;

&lt;div&gt;
&lt;div&gt;
&lt;div&gt;
&lt;div&gt;
&lt;div readability=&quot;5.9121621621622&quot;&gt;


&lt;div readability=&quot;7.5422535211268&quot;&gt;    如果转载，请注明博文来源： &lt;a href=&quot;http://www.cnblogs.com/xinysu/&quot;&gt;www.cnblogs.com/xinysu/&lt;/a&gt;   ，版权归 博客园 苏家小萝卜 所有。望各位支持！&lt;/div&gt;

&lt;hr/&gt;&lt;hr/&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;    如果是线上环境升级，常规来说分为以下几个步骤：&lt;/p&gt;
&lt;div readability=&quot;8&quot;&gt;
&lt;ol&gt;&lt;li&gt;&lt;span&gt;从库先升级&lt;/span&gt;
&lt;ol&gt;&lt;li&gt;业务迁移，从库上若有只读业务或者其他，迁移到其他DB实例&lt;/li&gt;
&lt;li&gt;从库备份&lt;/li&gt;
&lt;li&gt;从库停止复制&lt;/li&gt;
&lt;li&gt;升级&lt;/li&gt;
&lt;li&gt;从库恢复复制（升级后主库仍是5.6版本，从库是5.7版本，注意是否有异常）&lt;/li&gt;
&lt;li&gt;主从恢复正常&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;主从切换&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;新从库升级&lt;/span&gt;
&lt;ol&gt;&lt;li&gt;新从库停止复制&lt;/li&gt;
&lt;li&gt;新从库备份&lt;/li&gt;
&lt;li&gt;升级&lt;/li&gt;
&lt;li&gt;新从库恢复复制&lt;/li&gt;
&lt;li&gt;主从恢复正常&lt;/li&gt;
&lt;li&gt;恢复相关业务&lt;/li&gt;
&lt;/ol&gt;&lt;/li&gt;
&lt;/ol&gt;&lt;p&gt;    本文主要记录升级的详细步骤、主库5.6从库5.7有哪些问题以及如何从传统模式转变为GTID模式。&lt;/p&gt;
&lt;/div&gt;

&lt;div readability=&quot;7&quot;&gt;
&lt;p&gt;&lt;span&gt;升级步骤简要如下：&lt;br/&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ol&gt;&lt;li&gt;&lt;span&gt;安装新版本mysql，从库服务器安装5.7版本mysql&lt;br/&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;修改安装目录配置参数，修改从库的mysql配置文件，把 mysql 安装目录修改为 5.7版本的安装目录&lt;br/&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;关闭从库mysql服务&lt;br/&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;新版本mysql启动实例，使用5.7版本mysql启动待升级实例&lt;br/&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;升级字典，使用mysql_upgrade升级字典&lt;br/&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;检查，查看mysql log日志&lt;br/&gt;&lt;/span&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div readability=&quot;7.5&quot;&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;35&quot;&gt;
&lt;pre&gt;
&lt;span&gt;#&lt;/span&gt;&lt;span&gt;1 安装新版本mysql&lt;/span&gt;&lt;span&gt;
#&lt;/span&gt;&lt;span&gt;# 下载mysql5.7.17，拷贝到server下的/opt文件目录下&lt;/span&gt;&lt;span&gt;
#&lt;/span&gt;&lt;span&gt;# 解压，创建软连接，授权&lt;/span&gt;
tar zvxf mysql-5.7.17-linux-glibc2.5-&lt;span&gt;x86_64.tar.gz
ln &lt;/span&gt;-s /opt/mysql-5.7.17-linux-glibc2.5-x86_64 /usr/local/&lt;span&gt;mysql57
chown &lt;/span&gt;-R mysql:mysql /usr/data/&lt;span&gt;mysql57
 
&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;2 修改配置参数&lt;/span&gt;&lt;span&gt;
#&lt;/span&gt;&lt;span&gt;# 检查配置文件中那些配置是使用到了 安装目录，把使用到底都修改&lt;/span&gt;
&lt;span&gt;旧：
basedir &lt;/span&gt;= /usr/local/&lt;span&gt;mysql56
plugin&lt;/span&gt;-dir = /usr/local/mysql56/lib/plugin/&lt;span&gt;
 
新：
basedir &lt;/span&gt;= /usr/local/&lt;span&gt;mysql
plugin&lt;/span&gt;-dir = /usr/local/mysql/lib/plugin/
 
&lt;span&gt;#&lt;/span&gt;&lt;span&gt;3 关闭mysql&lt;/span&gt;
[root@sutest244 mysqlup]&lt;span&gt;#&lt;/span&gt;&lt;span&gt; /usr/local/mysql56/bin/mysqladmin --socket=/tmp/mysql3399.sock -uroot -p shutdown&lt;/span&gt;
&lt;span&gt;Enter password:
[root&lt;/span&gt;@sutest244 mysqlup]&lt;span&gt;#&lt;/span&gt;&lt;span&gt; ps axu | grep mysql3399 | grep mysqld&lt;/span&gt;
[root@sutest244 mysqlup]&lt;span&gt;#
&lt;/span&gt; 
&lt;span&gt;#&lt;/span&gt;&lt;span&gt;4 新版本启动mysql&lt;/span&gt;
[root@sutest244 mysqlup]&lt;span&gt;#&lt;/span&gt;&lt;span&gt; /usr/local/mysql/bin/mysqld --defaults-file=/data/mysqlup/mysql3399.cnf &amp;amp;&lt;/span&gt;
[1] 15477&lt;span&gt;
[root&lt;/span&gt;@sutest244 mysqlup]&lt;span&gt;#&lt;/span&gt;&lt;span&gt; ps axu | grep mysql3399 | grep mysqld&lt;/span&gt;
mysql    15477 37.1 26.7 11931672 1037520 pts/4 Sl  03:34   0:05 /usr/local/mysql/bin/mysqld --defaults&lt;span&gt;-file&lt;/span&gt;=/data/mysqlup/&lt;span&gt;mysql3399.cnf
[root&lt;/span&gt;@sutest244 mysqlup]&lt;span&gt;#
&lt;/span&gt;[root@sutest244 mysqlup]&lt;span&gt;#&lt;/span&gt;&lt;span&gt; vim /data/mysqlup/data/error.log&lt;/span&gt;
 
&lt;span&gt;#&lt;/span&gt;&lt;span&gt;4.1 检查&lt;/span&gt;
&lt;span&gt;检查启动后的错误日志，看下是否有配置参数报错，如果有，修改
错误日志会有大量的字典信息报错，这个暂不处理，下个步骤修复
 
&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;5 升级字典&lt;/span&gt;
[root@sutest244 bin]&lt;span&gt;#&lt;/span&gt;&lt;span&gt; /usr/local/mysql/bin/mysql_upgrade --socket=/tmp/mysql3399.sock -uroot -p&lt;/span&gt;
&lt;span&gt;Enter password:
Checking &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; update is needed.
Checking server version.
Running queries to upgrade MySQL server.
Checking system database.
mysql.columns_priv                                 OK
mysql.db                                           OK
mysql.engine_cost                                  OK
mysql.event                                        OK
mysql.func                                         OK
mysql.general_log                                  OK
mysql.gtid_executed                                OK
mysql.help_category                                OK
mysql.help_keyword                                 OK
mysql.help_relation                                OK
mysql.help_topic                                   OK
mysql.innodb_index_stats                           OK
mysql.innodb_table_stats                           OK
mysql.ndb_binlog_index                             OK
mysql.plugin                                       OK
mysql.proc                                         OK
mysql.procs_priv                                   OK
mysql.proxies_priv                                 OK
mysql.server_cost                                  OK
mysql.servers                                      OK
mysql.slave_master_info                            OK
mysql.slave_relay_log_info                         OK
mysql.slave_worker_info                            OK
mysql.slow_log                                     OK
mysql.tables_priv                                  OK
mysql.time_zone                                    OK
mysql.time_zone_leap_second                        OK
mysql.time_zone_name                               OK
mysql.time_zone_transition                         OK
mysql.time_zone_transition_type                    OK
mysql.user                                         OK
Upgrading the sys schema.
Checking databases.
sys.sys_config                                     OK
省略...
检查用户数据库及表格
省略...
Upgrade &lt;/span&gt;&lt;span&gt;process&lt;/span&gt;&lt;span&gt; completed successfully.
Checking &lt;/span&gt;&lt;span&gt;if&lt;/span&gt;&lt;span&gt; update is needed.
 
&lt;/span&gt;&lt;span&gt;#&lt;/span&gt;&lt;span&gt;6 检查日志&lt;/span&gt;
查看log日志正常。
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;由于从库是5.7版本，mysql、performance、sys等一些系统数据库对象有发生变化，同时一些SQL也有所变动。&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;&lt;span&gt;2.1 修改用户密码失败&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;1). 问题&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;主库修改用户密码，update mysql.user set password=password('newpasswd') where ...&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;2018-03-29T01:22:45.058927Z 12 [ERROR] Slave SQL for channel '': Column 1 of table 'mysql.user' cannot be converted from type 'char(16)' to type 'char(32)', Error_code: 1677&lt;br/&gt;&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;&lt;span&gt;2018-03-29T01:22:45.059066Z 12 [ERROR] Error running query, slave SQL thread aborted. Fix the problem, and restart the slave SQL thread with &quot;SLAVE START&quot;. We stopped at log 'bin_log.000003' position 3208&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span&gt;2). 分析&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;&lt;span&gt;修改导致从库复制异常停止，因为 5.6版本mysql.user表格的password字段，在5.7没有该字段，修改为 authentication_string &lt;br/&gt;&lt;span&gt;&lt;br/&gt;&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;3). 处理&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;方案1：事先处理，执行update password 的前，配置会话不记录binlog：set session sql_log_bin=off，然后单独到主从执行该SQL&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;方案2：事后处理，如果已经出现这个错误，则在从库跳过该sql然后再开启复制同步，最后从库修改密码&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;
&lt;ul&gt;&lt;li&gt;set global sql_slave_skip_counter=1;&lt;/li&gt;
&lt;li&gt;start slave sql_thread;&lt;/li&gt;
&lt;li&gt;show slave status;&lt;/li&gt;
&lt;li&gt;set session sql_log_bin=off;&lt;/li&gt;
&lt;li&gt;alter user suuser@'%' identified by 'newpassword';&lt;/li&gt;
&lt;li&gt;flush privileges;&lt;/li&gt;
&lt;li&gt;set session sql_log_bin=on;&lt;/li&gt;
&lt;/ul&gt;&lt;/div&gt;
&lt;h2&gt;&lt;span&gt;&lt;span&gt;2.2 SQL语法问题&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;1). 问题&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;div&gt;
&lt;ul&gt;&lt;li&gt;SELECT字段超过GROUP BY字段报错&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;select id,name,age,count(*) from tbuser group by name;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;其他一些SQL语法问题&lt;/li&gt;
&lt;/ul&gt;&lt;p&gt;&lt;span&gt;2).分析&lt;/span&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;5.7跟5.6默认的sql_mode配置不一样，如果mysql配置文件中没有说明sql_mode，升级后sql_mode将从NO_ENGINE_SUBSTITUTION修改为ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION，该模式下会导致部分在5.6支持的SQL在5.7报语法错误。&lt;/p&gt;
&lt;p&gt;&lt;span&gt; &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;&lt;span&gt;3). 处理&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;方案1：&lt;span&gt;事先处理，在测试环境中，详细测试程序代码在新版本数据库上的兼容性，若有异常，则修复程序代码中的SQL操作逻辑。&lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;方案2：事先处理，mysql配置文件中，指定sql_mode与5.6版本一致。&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span&gt;方案3：事后处理，如果已经在出现这个错误，有需要快速响应处理，可以把sql_mode修改为跟5.6版本默认的sql_mode一致即可。&lt;/span&gt;&lt;/p&gt;

&lt;h2&gt;&lt;span&gt;&lt;span&gt;3.1 何为GTID&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;p&gt;Global Transaction ID，全局唯一标识，简称GTID，一个GTID 代表在 &lt;span&gt;某个实例上发生的一个事务。&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;GTID = source_id:transaction_id，其中source_id代表执行该事务的实例的server_uuid，transaction_id是自增值，从1开始，故GTID实际表示为：在 source_id 实例上面发生的 第 transaction_id 个事务。&lt;/p&gt;
&lt;h2&gt;&lt;span&gt;3.2 GTID相关配置参数&lt;/span&gt;&lt;/h2&gt;
&lt;ul&gt;&lt;li&gt;&lt;span&gt;ENFORCE_GTID_CONSISTENCY&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;warn&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;如果出现GTID不兼容的语句用法，在错误日志会记录相关信息，那么需要调整应该程序避免不兼容的写法，直到完全没有产生不兼容的语句，可以通过应该程序去排查所有的sql，也可以设置后观察错误日志一段时间，这一步非常重要。&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;on&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;启动强制GTID一致性&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;ul&gt;&lt;li&gt;&lt;span&gt;GTID_MODE&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;说明&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;OFF&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;新事务是非GTID, Slave只接受不带GTID的事务，传送来GTID的事务会报错&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;OFF_PERMISSIVE&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;新事务是非GTID, Slave只接受不带GTID的事务也接受带GTID的事务&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ON_PERMISSIVE&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;新事务是GTID, Slave只接受不带GTID的事务也接受带GTID的事务&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;ON&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;新事务是GTID, Slave只接受带GTID的事务&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;切换顺序&lt;/li&gt;
&lt;li&gt;
&lt;ul&gt;&lt;li&gt;需要严格按照以下顺序，不可跳跃&lt;/li&gt;
&lt;li&gt;OFF &amp;lt;= =&amp;gt; OFF_PERMISSIVE &amp;lt;= =&amp;gt; ON_PERMISSIVE &amp;lt;= =&amp;gt; ON&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;h2&gt;&lt;span&gt;&lt;span&gt;3.3 传统复制切换GTID复制&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;

&lt;div class=&quot;cnblogs_code&quot; readability=&quot;36&quot;&gt;
&lt;pre&gt;
#step &lt;span&gt;1&lt;/span&gt;&lt;span&gt; 
#修改 ENFORCE_GTID_CONSISTENCY 为 warn ，运行一段时间，检查错误日志里边是否存在于GTID不兼容的语句用法，并尽快修复
#主从都执行，先后顺序不要求
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; &lt;span&gt;@@global&lt;/span&gt;.enforce_gtid_consistency&lt;span&gt;=&lt;/span&gt;&lt;span&gt;warn;
 
#step &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;
#修改 ENFORCE_GTID_CONSISTENCY 为 &lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt; ，确定没有不兼容语法后，可以修改为ON
#主从都执行，先后顺序不要求
&lt;/span&gt;&lt;span&gt;set&lt;/span&gt; &lt;span&gt;@@global&lt;/span&gt;.enforce_gtid_consistency&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;;
 
#step &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;
#设置GTID_MODE为off_permissiv
#主从都执行，先后顺序不要求
&lt;/span&gt;&lt;span&gt;SET&lt;/span&gt; &lt;span&gt;@@GLOBAL&lt;/span&gt;.GTID_MODE &lt;span&gt;=&lt;/span&gt;&lt;span&gt; OFF_PERMISSIVE;
 
#step &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;
#设置GTID_MODE为off_permissiv&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on_permissiv
#主从都执行，先后顺序不要求
&lt;/span&gt;&lt;span&gt;SET&lt;/span&gt; &lt;span&gt;@@GLOBAL&lt;/span&gt;.GTID_MODE &lt;span&gt;=&lt;/span&gt;&lt;span&gt; ON_PERMISSIVE;
 
#step &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;
# 检查全部实例 正在进行的匿名交易数目，也就是非GTID事务有没有都传送到从库上了，需要等到这个变量为 &lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt; 才是可以进行下面操作
#主从都执行，先后顺序不要求
SHOW STATUS &lt;/span&gt;&lt;span&gt;LIKE&lt;/span&gt; &lt;span&gt;'&lt;/span&gt;&lt;span&gt;ONGOING_ANONYMOUS_TRANSACTION_COUNT&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;;
 
#step &lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;
#检查所有实例上面的slave的非GTID是否都执行完了
show master status;#取file跟pos到从库去执行查看
&lt;/span&gt;&lt;span&gt;SELECT&lt;/span&gt; MASTER_POS_WAIT(&lt;span&gt;'&lt;/span&gt;&lt;span&gt;bin_log.000003&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;, &lt;span&gt;88748605&lt;/span&gt;&lt;span&gt;); #返回结果大于等于0则说明事务已经完全复制完成
 
 
#step &lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;
#清理binlog，切换到新的binlog上面
#主从都执行，先后顺序不要求
flush logs;
 
#step8
#启动GTID
#主从都执行，先后顺序不要求
&lt;/span&gt;&lt;span&gt;SET&lt;/span&gt; &lt;span&gt;@@GLOBAL&lt;/span&gt;.GTID_MODE &lt;span&gt;=&lt;/span&gt; &lt;span&gt;ON&lt;/span&gt;&lt;span&gt;;
 
#step &lt;/span&gt;&lt;span&gt;9&lt;/span&gt;&lt;span&gt;
#修改cnf文件
#主从都执行，先后顺序不要求
gtid_mode&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;
enforce&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;gtid&lt;span&gt;-&lt;/span&gt;consistency&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;
binlog_gtid_simple_recovery&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;



&lt;h2&gt;&lt;span&gt;&lt;span&gt;3.4 GTID复制切换传统复制&lt;/span&gt;&lt;/span&gt;&lt;/h2&gt;
&lt;div class=&quot;cnblogs_code&quot; readability=&quot;37&quot;&gt;
&lt;pre&gt;
#step &lt;span&gt;1&lt;/span&gt;&lt;span&gt;
#停止从库
#所有从库都执行，先后顺序不要求
stop slave;
 
#step &lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;
#重置chanage master to语句，关闭 master_auto_position
#所有从库都执行，先后顺序不要求
show slave status \G; #取sql_thread的file跟position位置，Relay_Master_Log_File  Exec_Master_Log_Pos
change master &lt;/span&gt;&lt;span&gt;to&lt;/span&gt; master_log_file&lt;span&gt;=&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;&lt;span&gt;mysql-bin.000003&lt;/span&gt;&lt;span&gt;'&lt;/span&gt;,master_log_pos&lt;span&gt;=&lt;/span&gt;&lt;span&gt;4563&lt;/span&gt;,master_auto_position&lt;span&gt;=&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;;
 
#step &lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;
#测试同步是否正常
#主库对数据进行操作，看从库的position有没有变化，同时看数据是否变更
 
#step &lt;/span&gt;&lt;span&gt;4&lt;/span&gt;&lt;span&gt;
#修改GTID_MODE 为 ON_PERMISSIVE
#主从都执行
&lt;/span&gt;&lt;span&gt;SET&lt;/span&gt; &lt;span&gt;@@GLOBAL&lt;/span&gt;.GTID_MODE &lt;span&gt;=&lt;/span&gt;&lt;span&gt; ON_PERMISSIVE;
 
#step &lt;/span&gt;&lt;span&gt;5&lt;/span&gt;&lt;span&gt;
#修改GTID_MODE 为 OFF_PERMISSIVE
#主从都执行
&lt;/span&gt;&lt;span&gt;SET&lt;/span&gt; &lt;span&gt;@@GLOBAL&lt;/span&gt;.GTID_MODE &lt;span&gt;=&lt;/span&gt;&lt;span&gt; OFF_PERMISSIVE;
 
#step &lt;/span&gt;&lt;span&gt;6&lt;/span&gt;&lt;span&gt;
#修改GTID_MODE 为 &lt;/span&gt;&lt;span&gt;OFF&lt;/span&gt;&lt;span&gt;
#主从都执行
&lt;/span&gt;&lt;span&gt;SET&lt;/span&gt; &lt;span&gt;@@GLOBAL&lt;/span&gt;.GTID_MODE &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;&lt;span&gt;;
 
#step &lt;/span&gt;&lt;span&gt;7&lt;/span&gt;&lt;span&gt;
#清理binlog，切换到新的binlog上面
#主从都执行，先后顺序不要求
flush logs;
 
#step8
#禁用GTID，其中enforce&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;gtid&lt;span&gt;-&lt;/span&gt;&lt;span&gt;consistency可以不关闭，还是进行 GTID的一致性检查
#主从都执行，先后顺序不要求
&lt;/span&gt;&lt;span&gt;SET&lt;/span&gt; &lt;span&gt;@@GLOBAL&lt;/span&gt;.GTID_MODE &lt;span&gt;=&lt;/span&gt; &lt;span&gt;OFF&lt;/span&gt;&lt;span&gt;;
 
#step9
#检验同步情况
 
#&lt;/span&gt;&lt;span&gt;10&lt;/span&gt;&lt;span&gt;
#修改cnf文件，注释GTID的参数
#主从都执行，先后顺序不要求
#gtid_mode&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;
#enforce&lt;/span&gt;&lt;span&gt;-&lt;/span&gt;gtid&lt;span&gt;-&lt;/span&gt;consistency&lt;span&gt;=&lt;/span&gt;&lt;span&gt;on&lt;/span&gt;&lt;span&gt;
#binlog_gtid_simple_recovery&lt;/span&gt;&lt;span&gt;=&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;

&lt;/div&gt;
</description>
<pubDate>Fri, 30 Mar 2018 03:38:00 +0000</pubDate>
<dc:creator>苏家小萝卜</dc:creator>
<dc:language>zh-cn</dc:language>
<dc:format>text/html</dc:format>
<dc:identifier>http://www.cnblogs.com/xinysu/p/8675286.html</dc:identifier>
</item>
</channel>
</rss>